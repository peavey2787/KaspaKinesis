{
  "version": 3,
  "sources": ["../../node_modules/react/cjs/react.production.js", "../../node_modules/react/index.js", "../../node_modules/scheduler/cjs/scheduler.production.js", "../../node_modules/scheduler/index.js", "../../node_modules/react-dom/cjs/react-dom.production.js", "../../node_modules/react-dom/index.js", "../../node_modules/react-dom/cjs/react-dom-client.production.js", "../../node_modules/react-dom/client.js", "../../kktp/core/constants.js", "../../kktp/protocol/integrity/canonical.js", "../../spa/relay-demo.tsx", "../../spa/SpaLayout.tsx", "../../app/relay-demo/components/relay-visualizer.tsx", "../../kktp/adapters/kaspaAdapter.js", "../../kktp/engine/kaspa/kas-wasm/kaspa.js", "../../kktp/core/logger.js", "../../kktp/engine/kaspa/transport/kaspa_client.js", "../../kktp/engine/kaspa/utilities/utilities.js", "../../kktp/engine/kaspa/transport/utxo_manager.js", "../../kktp/engine/kaspa/transport/tx_builder.js", "../../kktp/engine/kaspa/transport/utxo_operations.js", "../../kktp/engine/kaspa/transport/rpc_runner.js", "../../kktp/engine/kaspa/transport/heartbeat.js", "../../kktp/engine/kaspa/transport/transportFacade.js", "../../kktp/engine/kaspa/identity/wallet_service.js", "../../kktp/engine/kaspa/identity/storage.js", "../../kktp/engine/kaspa/crypto/encryption.js", "../../kktp/engine/kaspa/identity/identityFacade.js", "../../kktp/engine/kaspa/intelligence/dag_walk.js", "../../kktp/engine/kaspa/intelligence/indexer.js", "../../kktp/engine/kaspa/intelligence/scanner.js", "../../kktp/engine/kaspa/intelligence/intelligenceFacade.js", "../../kktp/engine/kaspa/crypto/dh_encryption.js", "../../kktp/engine/kaspa/crypto/cryptoFacade.js", "../../kktp/engine/kaspa/vrf/core/errors.js", "../../kktp/engine/kaspa/vrf/core/logs/logger.js", "../../kktp/engine/kaspa/vrf/core/crypto.js", "../../kktp/engine/kaspa/vrf/core/extractor.js", "../../kktp/engine/kaspa/vrf/core/folding.js", "../../kktp/engine/kaspa/vrf/core/models/Block.js", "../../kktp/engine/kaspa/vrf/core/config.js", "../../kktp/engine/kaspa/vrf/core/constants.js", "../../kktp/engine/kaspa/vrf/core/fetcher/cache.js", "../../kktp/engine/kaspa/vrf/core/fetcher/bitcoin.js", "../../kktp/engine/kaspa/vrf/core/fetcher/kaspa.js", "../../kktp/engine/kaspa/vrf/core/fetcher/QRNG-fetcher.js", "../../kktp/engine/kaspa/vrf/core/fetcher/qrng.js", "../../kktp/engine/kaspa/vrf/core/tests/gamma.js", "../../kktp/engine/kaspa/vrf/core/tests/utilities.js", "../../kktp/engine/kaspa/vrf/core/tests/basic.js", "../../kktp/engine/kaspa/vrf/core/tests/binary-matrix-rank.js", "../../kktp/engine/kaspa/vrf/core/tests/linear-complexity.js", "../../kktp/engine/kaspa/vrf/core/tests/template-matching.js", "../../kktp/engine/kaspa/vrf/core/tests/spectral-dft.js", "../../kktp/engine/kaspa/vrf/core/tests/maurer-universal.js", "../../kktp/engine/kaspa/vrf/core/tests/random-excursions.js", "../../kktp/engine/kaspa/vrf/core/nist.js", "../../kktp/engine/kaspa/vrf/core/nistVerifier.js", "../../kktp/engine/kaspa/vrf/core/models/vrfProof.js", "../../kktp/engine/kaspa/vrf/vrfFacade.js", "../../kktp/engine/kaspa/kaspaPortal.js", "../../kktp/core/eventEmitter.js", "../../kktp/core/cryptoUtils.js", "../../kktp/blockchain/moveProcessor.js", "../../kktp/blockchain/wallet/KaspaLink.js", "../../kktp/blockchain/wallet/UtxoManager.js", "../../kktp/blockchain/wallet/UtxoPool.js", "../../kktp/blockchain/crypto/EntropyProvider.js", "../../kktp/blockchain/crypto/VrfManager.js", "../../kktp/blockchain/protocol/BinaryPacker.js", "../../kktp/core/merkleTree.js", "../../kktp/blockchain/protocol/MerkleManager.js", "../../kktp/blockchain/protocol/MoveVault.js", "../../kktp/blockchain/protocol/StateSerializer.js", "../../kktp/blockchain/protocol/AuditTrail.js", "../../kktp/blockchain/anchor/heartbeatParser.js", "../../kktp/blockchain/anchor/AnchorStrategy.js", "../../kktp/blockchain/kaspaAnchorFacade.js", "../../kktp/audit/auditCheating.js", "../../kktp/audit/cheating/utils.js", "../../kktp/audit/cheating/chain.js", "../../kktp/audit/cheating/daa.js", "../../kktp/audit/cheating/entropy.js", "../../kktp/audit/cheating/finalResult.js", "../../kktp/audit/cheating/merkle.js", "../../kktp/audit/cheating/normalize.js", "../../kktp/audit/cheating/outcome.js", "../../kktp/audit/cheating/parsing.js", "../../kktp/audit/cheating/vrfChain.js", "../../kktp/blockchain/anchorParser.js", "../../kktp/protocol/schemas/discovery.json", "../../kktp/protocol/schemas/response.json", "../../kktp/protocol/schemas/message.json", "../../kktp/protocol/schemas/sessionEnd.json", "../../kktp/protocol/integrity/validator.js", "../../kktp/protocol/kktpProtocolFacade.js", "../../kktp/protocol/integrity/handshake.js", "../../kktp/protocol/utils/conversions.js", "../../kktp/protocol/integrity/aad.js", "../../kktp/protocol/utils/kktpCodec.js", "../../kktp/protocol/sessions/stateMachine.js", "../../kktp/protocol/integrity/anchorFactory.js", "../../kktp/protocol/sessions/sessionFacade.js", "../../kktp/protocol/sessions/keyDeriver.js", "../../kktp/protocol/sessions/smHelpers.js", "../../kktp/protocol/sessions/sessionVault.js", "../../kktp/protocol/sessions/handoverEngine.js", "../../kktp/protocol/sessions/sessionPersistence.js", "../../kktp/lobby/lobbyCodec.js", "../../kktp/lobby/lobbyMessageHandler.js", "../../kktp/lobby/lobbySchemas.js", "../../kktp/lobby/parts/lobbyContext.js", "../../kktp/lobby/parts/lobbyUtils.js", "../../kktp/lobby/parts/lobbySubscriptions.js", "../../kktp/lobby/parts/lobbyDmBuffer.js", "../../kktp/lobby/parts/lobbyUtxo.js", "../../kktp/lobby/parts/lobbyRouting.js", "../../kktp/lobby/parts/lobbyMessaging.js", "../../kktp/lobby/parts/lobbyKeys.js", "../../kktp/lobby/parts/lobbyRoster.js", "../../kktp/lobby/parts/lobbyJoins.js", "../../kktp/lobby/parts/lobbyDiscovery.js", "../../kktp/lobby/parts/lobbyPersistence.js", "../../kktp/lobby/parts/lobbySessionEnd.js", "../../kktp/lobby/lobbyManager.js", "../../kktp/lobby/lobbyFacade.js", "../../kktp/kkGameEngine.js"],
  "sourcesContent": ["/**\n * @license React\n * react.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n  REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n  MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar ReactNoopUpdateQueue = {\n    isMounted: function () {\n      return !1;\n    },\n    enqueueForceUpdate: function () {},\n    enqueueReplaceState: function () {},\n    enqueueSetState: function () {}\n  },\n  assign = Object.assign,\n  emptyObject = {};\nfunction Component(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nComponent.prototype.isReactComponent = {};\nComponent.prototype.setState = function (partialState, callback) {\n  if (\n    \"object\" !== typeof partialState &&\n    \"function\" !== typeof partialState &&\n    null != partialState\n  )\n    throw Error(\n      \"takes an object of state variables to update or a function which returns an object of state variables.\"\n    );\n  this.updater.enqueueSetState(this, partialState, callback, \"setState\");\n};\nComponent.prototype.forceUpdate = function (callback) {\n  this.updater.enqueueForceUpdate(this, callback, \"forceUpdate\");\n};\nfunction ComponentDummy() {}\nComponentDummy.prototype = Component.prototype;\nfunction PureComponent(props, context, updater) {\n  this.props = props;\n  this.context = context;\n  this.refs = emptyObject;\n  this.updater = updater || ReactNoopUpdateQueue;\n}\nvar pureComponentPrototype = (PureComponent.prototype = new ComponentDummy());\npureComponentPrototype.constructor = PureComponent;\nassign(pureComponentPrototype, Component.prototype);\npureComponentPrototype.isPureReactComponent = !0;\nvar isArrayImpl = Array.isArray;\nfunction noop() {}\nvar ReactSharedInternals = { H: null, A: null, T: null, S: null },\n  hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction ReactElement(type, key, props) {\n  var refProp = props.ref;\n  return {\n    $$typeof: REACT_ELEMENT_TYPE,\n    type: type,\n    key: key,\n    ref: void 0 !== refProp ? refProp : null,\n    props: props\n  };\n}\nfunction cloneAndReplaceKey(oldElement, newKey) {\n  return ReactElement(oldElement.type, newKey, oldElement.props);\n}\nfunction isValidElement(object) {\n  return (\n    \"object\" === typeof object &&\n    null !== object &&\n    object.$$typeof === REACT_ELEMENT_TYPE\n  );\n}\nfunction escape(key) {\n  var escaperLookup = { \"=\": \"=0\", \":\": \"=2\" };\n  return (\n    \"$\" +\n    key.replace(/[=:]/g, function (match) {\n      return escaperLookup[match];\n    })\n  );\n}\nvar userProvidedKeyEscapeRegex = /\\/+/g;\nfunction getElementKey(element, index) {\n  return \"object\" === typeof element && null !== element && null != element.key\n    ? escape(\"\" + element.key)\n    : index.toString(36);\n}\nfunction resolveThenable(thenable) {\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw thenable.reason;\n    default:\n      switch (\n        (\"string\" === typeof thenable.status\n          ? thenable.then(noop, noop)\n          : ((thenable.status = \"pending\"),\n            thenable.then(\n              function (fulfilledValue) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"fulfilled\"),\n                  (thenable.value = fulfilledValue));\n              },\n              function (error) {\n                \"pending\" === thenable.status &&\n                  ((thenable.status = \"rejected\"), (thenable.reason = error));\n              }\n            )),\n        thenable.status)\n      ) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw thenable.reason;\n      }\n  }\n  throw thenable;\n}\nfunction mapIntoArray(children, array, escapedPrefix, nameSoFar, callback) {\n  var type = typeof children;\n  if (\"undefined\" === type || \"boolean\" === type) children = null;\n  var invokeCallback = !1;\n  if (null === children) invokeCallback = !0;\n  else\n    switch (type) {\n      case \"bigint\":\n      case \"string\":\n      case \"number\":\n        invokeCallback = !0;\n        break;\n      case \"object\":\n        switch (children.$$typeof) {\n          case REACT_ELEMENT_TYPE:\n          case REACT_PORTAL_TYPE:\n            invokeCallback = !0;\n            break;\n          case REACT_LAZY_TYPE:\n            return (\n              (invokeCallback = children._init),\n              mapIntoArray(\n                invokeCallback(children._payload),\n                array,\n                escapedPrefix,\n                nameSoFar,\n                callback\n              )\n            );\n        }\n    }\n  if (invokeCallback)\n    return (\n      (callback = callback(children)),\n      (invokeCallback =\n        \"\" === nameSoFar ? \".\" + getElementKey(children, 0) : nameSoFar),\n      isArrayImpl(callback)\n        ? ((escapedPrefix = \"\"),\n          null != invokeCallback &&\n            (escapedPrefix =\n              invokeCallback.replace(userProvidedKeyEscapeRegex, \"$&/\") + \"/\"),\n          mapIntoArray(callback, array, escapedPrefix, \"\", function (c) {\n            return c;\n          }))\n        : null != callback &&\n          (isValidElement(callback) &&\n            (callback = cloneAndReplaceKey(\n              callback,\n              escapedPrefix +\n                (null == callback.key ||\n                (children && children.key === callback.key)\n                  ? \"\"\n                  : (\"\" + callback.key).replace(\n                      userProvidedKeyEscapeRegex,\n                      \"$&/\"\n                    ) + \"/\") +\n                invokeCallback\n            )),\n          array.push(callback)),\n      1\n    );\n  invokeCallback = 0;\n  var nextNamePrefix = \"\" === nameSoFar ? \".\" : nameSoFar + \":\";\n  if (isArrayImpl(children))\n    for (var i = 0; i < children.length; i++)\n      (nameSoFar = children[i]),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (((i = getIteratorFn(children)), \"function\" === typeof i))\n    for (\n      children = i.call(children), i = 0;\n      !(nameSoFar = children.next()).done;\n\n    )\n      (nameSoFar = nameSoFar.value),\n        (type = nextNamePrefix + getElementKey(nameSoFar, i++)),\n        (invokeCallback += mapIntoArray(\n          nameSoFar,\n          array,\n          escapedPrefix,\n          type,\n          callback\n        ));\n  else if (\"object\" === type) {\n    if (\"function\" === typeof children.then)\n      return mapIntoArray(\n        resolveThenable(children),\n        array,\n        escapedPrefix,\n        nameSoFar,\n        callback\n      );\n    array = String(children);\n    throw Error(\n      \"Objects are not valid as a React child (found: \" +\n        (\"[object Object]\" === array\n          ? \"object with keys {\" + Object.keys(children).join(\", \") + \"}\"\n          : array) +\n        \"). If you meant to render a collection of children, use an array instead.\"\n    );\n  }\n  return invokeCallback;\n}\nfunction mapChildren(children, func, context) {\n  if (null == children) return children;\n  var result = [],\n    count = 0;\n  mapIntoArray(children, result, \"\", \"\", function (child) {\n    return func.call(context, child, count++);\n  });\n  return result;\n}\nfunction lazyInitializer(payload) {\n  if (-1 === payload._status) {\n    var ctor = payload._result;\n    ctor = ctor();\n    ctor.then(\n      function (moduleObject) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 1), (payload._result = moduleObject);\n      },\n      function (error) {\n        if (0 === payload._status || -1 === payload._status)\n          (payload._status = 2), (payload._result = error);\n      }\n    );\n    -1 === payload._status && ((payload._status = 0), (payload._result = ctor));\n  }\n  if (1 === payload._status) return payload._result.default;\n  throw payload._result;\n}\nvar reportGlobalError =\n    \"function\" === typeof reportError\n      ? reportError\n      : function (error) {\n          if (\n            \"object\" === typeof window &&\n            \"function\" === typeof window.ErrorEvent\n          ) {\n            var event = new window.ErrorEvent(\"error\", {\n              bubbles: !0,\n              cancelable: !0,\n              message:\n                \"object\" === typeof error &&\n                null !== error &&\n                \"string\" === typeof error.message\n                  ? String(error.message)\n                  : String(error),\n              error: error\n            });\n            if (!window.dispatchEvent(event)) return;\n          } else if (\n            \"object\" === typeof process &&\n            \"function\" === typeof process.emit\n          ) {\n            process.emit(\"uncaughtException\", error);\n            return;\n          }\n          console.error(error);\n        },\n  Children = {\n    map: mapChildren,\n    forEach: function (children, forEachFunc, forEachContext) {\n      mapChildren(\n        children,\n        function () {\n          forEachFunc.apply(this, arguments);\n        },\n        forEachContext\n      );\n    },\n    count: function (children) {\n      var n = 0;\n      mapChildren(children, function () {\n        n++;\n      });\n      return n;\n    },\n    toArray: function (children) {\n      return (\n        mapChildren(children, function (child) {\n          return child;\n        }) || []\n      );\n    },\n    only: function (children) {\n      if (!isValidElement(children))\n        throw Error(\n          \"React.Children.only expected to receive a single React element child.\"\n        );\n      return children;\n    }\n  };\nexports.Activity = REACT_ACTIVITY_TYPE;\nexports.Children = Children;\nexports.Component = Component;\nexports.Fragment = REACT_FRAGMENT_TYPE;\nexports.Profiler = REACT_PROFILER_TYPE;\nexports.PureComponent = PureComponent;\nexports.StrictMode = REACT_STRICT_MODE_TYPE;\nexports.Suspense = REACT_SUSPENSE_TYPE;\nexports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  ReactSharedInternals;\nexports.__COMPILER_RUNTIME = {\n  __proto__: null,\n  c: function (size) {\n    return ReactSharedInternals.H.useMemoCache(size);\n  }\n};\nexports.cache = function (fn) {\n  return function () {\n    return fn.apply(null, arguments);\n  };\n};\nexports.cacheSignal = function () {\n  return null;\n};\nexports.cloneElement = function (element, config, children) {\n  if (null === element || void 0 === element)\n    throw Error(\n      \"The argument must be a React element, but you passed \" + element + \".\"\n    );\n  var props = assign({}, element.props),\n    key = element.key;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      !hasOwnProperty.call(config, propName) ||\n        \"key\" === propName ||\n        \"__self\" === propName ||\n        \"__source\" === propName ||\n        (\"ref\" === propName && void 0 === config.ref) ||\n        (props[propName] = config[propName]);\n  var propName = arguments.length - 2;\n  if (1 === propName) props.children = children;\n  else if (1 < propName) {\n    for (var childArray = Array(propName), i = 0; i < propName; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  return ReactElement(element.type, key, props);\n};\nexports.createContext = function (defaultValue) {\n  defaultValue = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    _currentValue: defaultValue,\n    _currentValue2: defaultValue,\n    _threadCount: 0,\n    Provider: null,\n    Consumer: null\n  };\n  defaultValue.Provider = defaultValue;\n  defaultValue.Consumer = {\n    $$typeof: REACT_CONSUMER_TYPE,\n    _context: defaultValue\n  };\n  return defaultValue;\n};\nexports.createElement = function (type, config, children) {\n  var propName,\n    props = {},\n    key = null;\n  if (null != config)\n    for (propName in (void 0 !== config.key && (key = \"\" + config.key), config))\n      hasOwnProperty.call(config, propName) &&\n        \"key\" !== propName &&\n        \"__self\" !== propName &&\n        \"__source\" !== propName &&\n        (props[propName] = config[propName]);\n  var childrenLength = arguments.length - 2;\n  if (1 === childrenLength) props.children = children;\n  else if (1 < childrenLength) {\n    for (var childArray = Array(childrenLength), i = 0; i < childrenLength; i++)\n      childArray[i] = arguments[i + 2];\n    props.children = childArray;\n  }\n  if (type && type.defaultProps)\n    for (propName in ((childrenLength = type.defaultProps), childrenLength))\n      void 0 === props[propName] &&\n        (props[propName] = childrenLength[propName]);\n  return ReactElement(type, key, props);\n};\nexports.createRef = function () {\n  return { current: null };\n};\nexports.forwardRef = function (render) {\n  return { $$typeof: REACT_FORWARD_REF_TYPE, render: render };\n};\nexports.isValidElement = isValidElement;\nexports.lazy = function (ctor) {\n  return {\n    $$typeof: REACT_LAZY_TYPE,\n    _payload: { _status: -1, _result: ctor },\n    _init: lazyInitializer\n  };\n};\nexports.memo = function (type, compare) {\n  return {\n    $$typeof: REACT_MEMO_TYPE,\n    type: type,\n    compare: void 0 === compare ? null : compare\n  };\n};\nexports.startTransition = function (scope) {\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  try {\n    var returnValue = scope(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    \"object\" === typeof returnValue &&\n      null !== returnValue &&\n      \"function\" === typeof returnValue.then &&\n      returnValue.then(noop, reportGlobalError);\n  } catch (error) {\n    reportGlobalError(error);\n  } finally {\n    null !== prevTransition &&\n      null !== currentTransition.types &&\n      (prevTransition.types = currentTransition.types),\n      (ReactSharedInternals.T = prevTransition);\n  }\n};\nexports.unstable_useCacheRefresh = function () {\n  return ReactSharedInternals.H.useCacheRefresh();\n};\nexports.use = function (usable) {\n  return ReactSharedInternals.H.use(usable);\n};\nexports.useActionState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useActionState(action, initialState, permalink);\n};\nexports.useCallback = function (callback, deps) {\n  return ReactSharedInternals.H.useCallback(callback, deps);\n};\nexports.useContext = function (Context) {\n  return ReactSharedInternals.H.useContext(Context);\n};\nexports.useDebugValue = function () {};\nexports.useDeferredValue = function (value, initialValue) {\n  return ReactSharedInternals.H.useDeferredValue(value, initialValue);\n};\nexports.useEffect = function (create, deps) {\n  return ReactSharedInternals.H.useEffect(create, deps);\n};\nexports.useEffectEvent = function (callback) {\n  return ReactSharedInternals.H.useEffectEvent(callback);\n};\nexports.useId = function () {\n  return ReactSharedInternals.H.useId();\n};\nexports.useImperativeHandle = function (ref, create, deps) {\n  return ReactSharedInternals.H.useImperativeHandle(ref, create, deps);\n};\nexports.useInsertionEffect = function (create, deps) {\n  return ReactSharedInternals.H.useInsertionEffect(create, deps);\n};\nexports.useLayoutEffect = function (create, deps) {\n  return ReactSharedInternals.H.useLayoutEffect(create, deps);\n};\nexports.useMemo = function (create, deps) {\n  return ReactSharedInternals.H.useMemo(create, deps);\n};\nexports.useOptimistic = function (passthrough, reducer) {\n  return ReactSharedInternals.H.useOptimistic(passthrough, reducer);\n};\nexports.useReducer = function (reducer, initialArg, init) {\n  return ReactSharedInternals.H.useReducer(reducer, initialArg, init);\n};\nexports.useRef = function (initialValue) {\n  return ReactSharedInternals.H.useRef(initialValue);\n};\nexports.useState = function (initialState) {\n  return ReactSharedInternals.H.useState(initialState);\n};\nexports.useSyncExternalStore = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot\n) {\n  return ReactSharedInternals.H.useSyncExternalStore(\n    subscribe,\n    getSnapshot,\n    getServerSnapshot\n  );\n};\nexports.useTransition = function () {\n  return ReactSharedInternals.H.useTransition();\n};\nexports.version = \"19.2.3\";\n", "'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n", "/**\n * @license React\n * scheduler.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nfunction push(heap, node) {\n  var index = heap.length;\n  heap.push(node);\n  a: for (; 0 < index; ) {\n    var parentIndex = (index - 1) >>> 1,\n      parent = heap[parentIndex];\n    if (0 < compare(parent, node))\n      (heap[parentIndex] = node), (heap[index] = parent), (index = parentIndex);\n    else break a;\n  }\n}\nfunction peek(heap) {\n  return 0 === heap.length ? null : heap[0];\n}\nfunction pop(heap) {\n  if (0 === heap.length) return null;\n  var first = heap[0],\n    last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    a: for (\n      var index = 0, length = heap.length, halfLength = length >>> 1;\n      index < halfLength;\n\n    ) {\n      var leftIndex = 2 * (index + 1) - 1,\n        left = heap[leftIndex],\n        rightIndex = leftIndex + 1,\n        right = heap[rightIndex];\n      if (0 > compare(left, last))\n        rightIndex < length && 0 > compare(right, left)\n          ? ((heap[index] = right),\n            (heap[rightIndex] = last),\n            (index = rightIndex))\n          : ((heap[index] = left),\n            (heap[leftIndex] = last),\n            (index = leftIndex));\n      else if (rightIndex < length && 0 > compare(right, last))\n        (heap[index] = right), (heap[rightIndex] = last), (index = rightIndex);\n      else break a;\n    }\n  }\n  return first;\n}\nfunction compare(a, b) {\n  var diff = a.sortIndex - b.sortIndex;\n  return 0 !== diff ? diff : a.id - b.id;\n}\nexports.unstable_now = void 0;\nif (\"object\" === typeof performance && \"function\" === typeof performance.now) {\n  var localPerformance = performance;\n  exports.unstable_now = function () {\n    return localPerformance.now();\n  };\n} else {\n  var localDate = Date,\n    initialTime = localDate.now();\n  exports.unstable_now = function () {\n    return localDate.now() - initialTime;\n  };\n}\nvar taskQueue = [],\n  timerQueue = [],\n  taskIdCounter = 1,\n  currentTask = null,\n  currentPriorityLevel = 3,\n  isPerformingWork = !1,\n  isHostCallbackScheduled = !1,\n  isHostTimeoutScheduled = !1,\n  needsPaint = !1,\n  localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n  localClearTimeout = \"function\" === typeof clearTimeout ? clearTimeout : null,\n  localSetImmediate = \"undefined\" !== typeof setImmediate ? setImmediate : null;\nfunction advanceTimers(currentTime) {\n  for (var timer = peek(timerQueue); null !== timer; ) {\n    if (null === timer.callback) pop(timerQueue);\n    else if (timer.startTime <= currentTime)\n      pop(timerQueue),\n        (timer.sortIndex = timer.expirationTime),\n        push(taskQueue, timer);\n    else break;\n    timer = peek(timerQueue);\n  }\n}\nfunction handleTimeout(currentTime) {\n  isHostTimeoutScheduled = !1;\n  advanceTimers(currentTime);\n  if (!isHostCallbackScheduled)\n    if (null !== peek(taskQueue))\n      (isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n    else {\n      var firstTimer = peek(timerQueue);\n      null !== firstTimer &&\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n}\nvar isMessageLoopRunning = !1,\n  taskTimeoutID = -1,\n  frameInterval = 5,\n  startTime = -1;\nfunction shouldYieldToHost() {\n  return needsPaint\n    ? !0\n    : exports.unstable_now() - startTime < frameInterval\n      ? !1\n      : !0;\n}\nfunction performWorkUntilDeadline() {\n  needsPaint = !1;\n  if (isMessageLoopRunning) {\n    var currentTime = exports.unstable_now();\n    startTime = currentTime;\n    var hasMoreWork = !0;\n    try {\n      a: {\n        isHostCallbackScheduled = !1;\n        isHostTimeoutScheduled &&\n          ((isHostTimeoutScheduled = !1),\n          localClearTimeout(taskTimeoutID),\n          (taskTimeoutID = -1));\n        isPerformingWork = !0;\n        var previousPriorityLevel = currentPriorityLevel;\n        try {\n          b: {\n            advanceTimers(currentTime);\n            for (\n              currentTask = peek(taskQueue);\n              null !== currentTask &&\n              !(\n                currentTask.expirationTime > currentTime && shouldYieldToHost()\n              );\n\n            ) {\n              var callback = currentTask.callback;\n              if (\"function\" === typeof callback) {\n                currentTask.callback = null;\n                currentPriorityLevel = currentTask.priorityLevel;\n                var continuationCallback = callback(\n                  currentTask.expirationTime <= currentTime\n                );\n                currentTime = exports.unstable_now();\n                if (\"function\" === typeof continuationCallback) {\n                  currentTask.callback = continuationCallback;\n                  advanceTimers(currentTime);\n                  hasMoreWork = !0;\n                  break b;\n                }\n                currentTask === peek(taskQueue) && pop(taskQueue);\n                advanceTimers(currentTime);\n              } else pop(taskQueue);\n              currentTask = peek(taskQueue);\n            }\n            if (null !== currentTask) hasMoreWork = !0;\n            else {\n              var firstTimer = peek(timerQueue);\n              null !== firstTimer &&\n                requestHostTimeout(\n                  handleTimeout,\n                  firstTimer.startTime - currentTime\n                );\n              hasMoreWork = !1;\n            }\n          }\n          break a;\n        } finally {\n          (currentTask = null),\n            (currentPriorityLevel = previousPriorityLevel),\n            (isPerformingWork = !1);\n        }\n        hasMoreWork = void 0;\n      }\n    } finally {\n      hasMoreWork\n        ? schedulePerformWorkUntilDeadline()\n        : (isMessageLoopRunning = !1);\n    }\n  }\n}\nvar schedulePerformWorkUntilDeadline;\nif (\"function\" === typeof localSetImmediate)\n  schedulePerformWorkUntilDeadline = function () {\n    localSetImmediate(performWorkUntilDeadline);\n  };\nelse if (\"undefined\" !== typeof MessageChannel) {\n  var channel = new MessageChannel(),\n    port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = function () {\n    port.postMessage(null);\n  };\n} else\n  schedulePerformWorkUntilDeadline = function () {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\nfunction requestHostTimeout(callback, ms) {\n  taskTimeoutID = localSetTimeout(function () {\n    callback(exports.unstable_now());\n  }, ms);\n}\nexports.unstable_IdlePriority = 5;\nexports.unstable_ImmediatePriority = 1;\nexports.unstable_LowPriority = 4;\nexports.unstable_NormalPriority = 3;\nexports.unstable_Profiling = null;\nexports.unstable_UserBlockingPriority = 2;\nexports.unstable_cancelCallback = function (task) {\n  task.callback = null;\n};\nexports.unstable_forceFrameRate = function (fps) {\n  0 > fps || 125 < fps\n    ? console.error(\n        \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n      )\n    : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n};\nexports.unstable_getCurrentPriorityLevel = function () {\n  return currentPriorityLevel;\n};\nexports.unstable_next = function (eventHandler) {\n  switch (currentPriorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n      var priorityLevel = 3;\n      break;\n    default:\n      priorityLevel = currentPriorityLevel;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_requestPaint = function () {\n  needsPaint = !0;\n};\nexports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n  switch (priorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n      break;\n    default:\n      priorityLevel = 3;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_scheduleCallback = function (\n  priorityLevel,\n  callback,\n  options\n) {\n  var currentTime = exports.unstable_now();\n  \"object\" === typeof options && null !== options\n    ? ((options = options.delay),\n      (options =\n        \"number\" === typeof options && 0 < options\n          ? currentTime + options\n          : currentTime))\n    : (options = currentTime);\n  switch (priorityLevel) {\n    case 1:\n      var timeout = -1;\n      break;\n    case 2:\n      timeout = 250;\n      break;\n    case 5:\n      timeout = 1073741823;\n      break;\n    case 4:\n      timeout = 1e4;\n      break;\n    default:\n      timeout = 5e3;\n  }\n  timeout = options + timeout;\n  priorityLevel = {\n    id: taskIdCounter++,\n    callback: callback,\n    priorityLevel: priorityLevel,\n    startTime: options,\n    expirationTime: timeout,\n    sortIndex: -1\n  };\n  options > currentTime\n    ? ((priorityLevel.sortIndex = options),\n      push(timerQueue, priorityLevel),\n      null === peek(taskQueue) &&\n        priorityLevel === peek(timerQueue) &&\n        (isHostTimeoutScheduled\n          ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n          : (isHostTimeoutScheduled = !0),\n        requestHostTimeout(handleTimeout, options - currentTime)))\n    : ((priorityLevel.sortIndex = timeout),\n      push(taskQueue, priorityLevel),\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline())));\n  return priorityLevel;\n};\nexports.unstable_shouldYield = shouldYieldToHost;\nexports.unstable_wrapCallback = function (callback) {\n  var parentPriorityLevel = currentPriorityLevel;\n  return function () {\n    var previousPriorityLevel = currentPriorityLevel;\n    currentPriorityLevel = parentPriorityLevel;\n    try {\n      return callback.apply(this, arguments);\n    } finally {\n      currentPriorityLevel = previousPriorityLevel;\n    }\n  };\n};\n", "'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n", "/**\n * @license React\n * react-dom.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction noop() {}\nvar Internals = {\n    d: {\n      f: noop,\n      r: function () {\n        throw Error(formatProdErrorMessage(522));\n      },\n      D: noop,\n      C: noop,\n      L: noop,\n      m: noop,\n      X: noop,\n      S: noop,\n      M: noop\n    },\n    p: 0,\n    findDOMNode: null\n  },\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\");\nfunction createPortal$1(children, containerInfo, implementation) {\n  var key =\n    3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;\n  return {\n    $$typeof: REACT_PORTAL_TYPE,\n    key: null == key ? null : \"\" + key,\n    children: children,\n    containerInfo: containerInfo,\n    implementation: implementation\n  };\n}\nvar ReactSharedInternals =\n  React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;\nfunction getCrossOriginStringAs(as, input) {\n  if (\"font\" === as) return \"\";\n  if (\"string\" === typeof input)\n    return \"use-credentials\" === input ? input : \"\";\n}\nexports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE =\n  Internals;\nexports.createPortal = function (children, container) {\n  var key =\n    2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;\n  if (\n    !container ||\n    (1 !== container.nodeType &&\n      9 !== container.nodeType &&\n      11 !== container.nodeType)\n  )\n    throw Error(formatProdErrorMessage(299));\n  return createPortal$1(children, container, null, key);\n};\nexports.flushSync = function (fn) {\n  var previousTransition = ReactSharedInternals.T,\n    previousUpdatePriority = Internals.p;\n  try {\n    if (((ReactSharedInternals.T = null), (Internals.p = 2), fn)) return fn();\n  } finally {\n    (ReactSharedInternals.T = previousTransition),\n      (Internals.p = previousUpdatePriority),\n      Internals.d.f();\n  }\n};\nexports.preconnect = function (href, options) {\n  \"string\" === typeof href &&\n    (options\n      ? ((options = options.crossOrigin),\n        (options =\n          \"string\" === typeof options\n            ? \"use-credentials\" === options\n              ? options\n              : \"\"\n            : void 0))\n      : (options = null),\n    Internals.d.C(href, options));\n};\nexports.prefetchDNS = function (href) {\n  \"string\" === typeof href && Internals.d.D(href);\n};\nexports.preinit = function (href, options) {\n  if (\"string\" === typeof href && options && \"string\" === typeof options.as) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin),\n      integrity =\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      fetchPriority =\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0;\n    \"style\" === as\n      ? Internals.d.S(\n          href,\n          \"string\" === typeof options.precedence ? options.precedence : void 0,\n          {\n            crossOrigin: crossOrigin,\n            integrity: integrity,\n            fetchPriority: fetchPriority\n          }\n        )\n      : \"script\" === as &&\n        Internals.d.X(href, {\n          crossOrigin: crossOrigin,\n          integrity: integrity,\n          fetchPriority: fetchPriority,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n  }\n};\nexports.preinitModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (\"object\" === typeof options && null !== options) {\n      if (null == options.as || \"script\" === options.as) {\n        var crossOrigin = getCrossOriginStringAs(\n          options.as,\n          options.crossOrigin\n        );\n        Internals.d.M(href, {\n          crossOrigin: crossOrigin,\n          integrity:\n            \"string\" === typeof options.integrity ? options.integrity : void 0,\n          nonce: \"string\" === typeof options.nonce ? options.nonce : void 0\n        });\n      }\n    } else null == options && Internals.d.M(href);\n};\nexports.preload = function (href, options) {\n  if (\n    \"string\" === typeof href &&\n    \"object\" === typeof options &&\n    null !== options &&\n    \"string\" === typeof options.as\n  ) {\n    var as = options.as,\n      crossOrigin = getCrossOriginStringAs(as, options.crossOrigin);\n    Internals.d.L(href, as, {\n      crossOrigin: crossOrigin,\n      integrity:\n        \"string\" === typeof options.integrity ? options.integrity : void 0,\n      nonce: \"string\" === typeof options.nonce ? options.nonce : void 0,\n      type: \"string\" === typeof options.type ? options.type : void 0,\n      fetchPriority:\n        \"string\" === typeof options.fetchPriority\n          ? options.fetchPriority\n          : void 0,\n      referrerPolicy:\n        \"string\" === typeof options.referrerPolicy\n          ? options.referrerPolicy\n          : void 0,\n      imageSrcSet:\n        \"string\" === typeof options.imageSrcSet ? options.imageSrcSet : void 0,\n      imageSizes:\n        \"string\" === typeof options.imageSizes ? options.imageSizes : void 0,\n      media: \"string\" === typeof options.media ? options.media : void 0\n    });\n  }\n};\nexports.preloadModule = function (href, options) {\n  if (\"string\" === typeof href)\n    if (options) {\n      var crossOrigin = getCrossOriginStringAs(options.as, options.crossOrigin);\n      Internals.d.m(href, {\n        as:\n          \"string\" === typeof options.as && \"script\" !== options.as\n            ? options.as\n            : void 0,\n        crossOrigin: crossOrigin,\n        integrity:\n          \"string\" === typeof options.integrity ? options.integrity : void 0\n      });\n    } else Internals.d.m(href);\n};\nexports.requestFormReset = function (form) {\n  Internals.d.r(form);\n};\nexports.unstable_batchedUpdates = function (fn, a) {\n  return fn(a);\n};\nexports.useFormState = function (action, initialState, permalink) {\n  return ReactSharedInternals.H.useFormState(action, initialState, permalink);\n};\nexports.useFormStatus = function () {\n  return ReactSharedInternals.H.useHostTransitionStatus();\n};\nexports.version = \"19.2.3\";\n", "'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n", "/**\n * @license React\n * react-dom-client.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n\"use strict\";\nvar Scheduler = require(\"scheduler\"),\n  React = require(\"react\"),\n  ReactDOM = require(\"react-dom\");\nfunction formatProdErrorMessage(code) {\n  var url = \"https://react.dev/errors/\" + code;\n  if (1 < arguments.length) {\n    url += \"?args[]=\" + encodeURIComponent(arguments[1]);\n    for (var i = 2; i < arguments.length; i++)\n      url += \"&args[]=\" + encodeURIComponent(arguments[i]);\n  }\n  return (\n    \"Minified React error #\" +\n    code +\n    \"; visit \" +\n    url +\n    \" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"\n  );\n}\nfunction isValidContainer(node) {\n  return !(\n    !node ||\n    (1 !== node.nodeType && 9 !== node.nodeType && 11 !== node.nodeType)\n  );\n}\nfunction getNearestMountedFiber(fiber) {\n  var node = fiber,\n    nearestMounted = fiber;\n  if (fiber.alternate) for (; node.return; ) node = node.return;\n  else {\n    fiber = node;\n    do\n      (node = fiber),\n        0 !== (node.flags & 4098) && (nearestMounted = node.return),\n        (fiber = node.return);\n    while (fiber);\n  }\n  return 3 === node.tag ? nearestMounted : null;\n}\nfunction getSuspenseInstanceFromFiber(fiber) {\n  if (13 === fiber.tag) {\n    var suspenseState = fiber.memoizedState;\n    null === suspenseState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (suspenseState = fiber.memoizedState));\n    if (null !== suspenseState) return suspenseState.dehydrated;\n  }\n  return null;\n}\nfunction getActivityInstanceFromFiber(fiber) {\n  if (31 === fiber.tag) {\n    var activityState = fiber.memoizedState;\n    null === activityState &&\n      ((fiber = fiber.alternate),\n      null !== fiber && (activityState = fiber.memoizedState));\n    if (null !== activityState) return activityState.dehydrated;\n  }\n  return null;\n}\nfunction assertIsMounted(fiber) {\n  if (getNearestMountedFiber(fiber) !== fiber)\n    throw Error(formatProdErrorMessage(188));\n}\nfunction findCurrentFiberUsingSlowPath(fiber) {\n  var alternate = fiber.alternate;\n  if (!alternate) {\n    alternate = getNearestMountedFiber(fiber);\n    if (null === alternate) throw Error(formatProdErrorMessage(188));\n    return alternate !== fiber ? null : fiber;\n  }\n  for (var a = fiber, b = alternate; ; ) {\n    var parentA = a.return;\n    if (null === parentA) break;\n    var parentB = parentA.alternate;\n    if (null === parentB) {\n      b = parentA.return;\n      if (null !== b) {\n        a = b;\n        continue;\n      }\n      break;\n    }\n    if (parentA.child === parentB.child) {\n      for (parentB = parentA.child; parentB; ) {\n        if (parentB === a) return assertIsMounted(parentA), fiber;\n        if (parentB === b) return assertIsMounted(parentA), alternate;\n        parentB = parentB.sibling;\n      }\n      throw Error(formatProdErrorMessage(188));\n    }\n    if (a.return !== b.return) (a = parentA), (b = parentB);\n    else {\n      for (var didFindChild = !1, child$0 = parentA.child; child$0; ) {\n        if (child$0 === a) {\n          didFindChild = !0;\n          a = parentA;\n          b = parentB;\n          break;\n        }\n        if (child$0 === b) {\n          didFindChild = !0;\n          b = parentA;\n          a = parentB;\n          break;\n        }\n        child$0 = child$0.sibling;\n      }\n      if (!didFindChild) {\n        for (child$0 = parentB.child; child$0; ) {\n          if (child$0 === a) {\n            didFindChild = !0;\n            a = parentB;\n            b = parentA;\n            break;\n          }\n          if (child$0 === b) {\n            didFindChild = !0;\n            b = parentB;\n            a = parentA;\n            break;\n          }\n          child$0 = child$0.sibling;\n        }\n        if (!didFindChild) throw Error(formatProdErrorMessage(189));\n      }\n    }\n    if (a.alternate !== b) throw Error(formatProdErrorMessage(190));\n  }\n  if (3 !== a.tag) throw Error(formatProdErrorMessage(188));\n  return a.stateNode.current === a ? fiber : alternate;\n}\nfunction findCurrentHostFiberImpl(node) {\n  var tag = node.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return node;\n  for (node = node.child; null !== node; ) {\n    tag = findCurrentHostFiberImpl(node);\n    if (null !== tag) return tag;\n    node = node.sibling;\n  }\n  return null;\n}\nvar assign = Object.assign,\n  REACT_LEGACY_ELEMENT_TYPE = Symbol.for(\"react.element\"),\n  REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n  REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n  REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n  REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n  REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n  REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n  REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n  REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n  REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n  REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n  REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n  REACT_LAZY_TYPE = Symbol.for(\"react.lazy\");\nSymbol.for(\"react.scope\");\nvar REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\");\nSymbol.for(\"react.legacy_hidden\");\nSymbol.for(\"react.tracing_marker\");\nvar REACT_MEMO_CACHE_SENTINEL = Symbol.for(\"react.memo_cache_sentinel\");\nSymbol.for(\"react.view_transition\");\nvar MAYBE_ITERATOR_SYMBOL = Symbol.iterator;\nfunction getIteratorFn(maybeIterable) {\n  if (null === maybeIterable || \"object\" !== typeof maybeIterable) return null;\n  maybeIterable =\n    (MAYBE_ITERATOR_SYMBOL && maybeIterable[MAYBE_ITERATOR_SYMBOL]) ||\n    maybeIterable[\"@@iterator\"];\n  return \"function\" === typeof maybeIterable ? maybeIterable : null;\n}\nvar REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\");\nfunction getComponentNameFromType(type) {\n  if (null == type) return null;\n  if (\"function\" === typeof type)\n    return type.$$typeof === REACT_CLIENT_REFERENCE\n      ? null\n      : type.displayName || type.name || null;\n  if (\"string\" === typeof type) return type;\n  switch (type) {\n    case REACT_FRAGMENT_TYPE:\n      return \"Fragment\";\n    case REACT_PROFILER_TYPE:\n      return \"Profiler\";\n    case REACT_STRICT_MODE_TYPE:\n      return \"StrictMode\";\n    case REACT_SUSPENSE_TYPE:\n      return \"Suspense\";\n    case REACT_SUSPENSE_LIST_TYPE:\n      return \"SuspenseList\";\n    case REACT_ACTIVITY_TYPE:\n      return \"Activity\";\n  }\n  if (\"object\" === typeof type)\n    switch (type.$$typeof) {\n      case REACT_PORTAL_TYPE:\n        return \"Portal\";\n      case REACT_CONTEXT_TYPE:\n        return type.displayName || \"Context\";\n      case REACT_CONSUMER_TYPE:\n        return (type._context.displayName || \"Context\") + \".Consumer\";\n      case REACT_FORWARD_REF_TYPE:\n        var innerType = type.render;\n        type = type.displayName;\n        type ||\n          ((type = innerType.displayName || innerType.name || \"\"),\n          (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n        return type;\n      case REACT_MEMO_TYPE:\n        return (\n          (innerType = type.displayName || null),\n          null !== innerType\n            ? innerType\n            : getComponentNameFromType(type.type) || \"Memo\"\n        );\n      case REACT_LAZY_TYPE:\n        innerType = type._payload;\n        type = type._init;\n        try {\n          return getComponentNameFromType(type(innerType));\n        } catch (x) {}\n    }\n  return null;\n}\nvar isArrayImpl = Array.isArray,\n  ReactSharedInternals =\n    React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  ReactDOMSharedInternals =\n    ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n  sharedNotPendingObject = {\n    pending: !1,\n    data: null,\n    method: null,\n    action: null\n  },\n  valueStack = [],\n  index = -1;\nfunction createCursor(defaultValue) {\n  return { current: defaultValue };\n}\nfunction pop(cursor) {\n  0 > index ||\n    ((cursor.current = valueStack[index]), (valueStack[index] = null), index--);\n}\nfunction push(cursor, value) {\n  index++;\n  valueStack[index] = cursor.current;\n  cursor.current = value;\n}\nvar contextStackCursor = createCursor(null),\n  contextFiberStackCursor = createCursor(null),\n  rootInstanceStackCursor = createCursor(null),\n  hostTransitionProviderCursor = createCursor(null);\nfunction pushHostContainer(fiber, nextRootInstance) {\n  push(rootInstanceStackCursor, nextRootInstance);\n  push(contextFiberStackCursor, fiber);\n  push(contextStackCursor, null);\n  switch (nextRootInstance.nodeType) {\n    case 9:\n    case 11:\n      fiber = (fiber = nextRootInstance.documentElement)\n        ? (fiber = fiber.namespaceURI)\n          ? getOwnHostContext(fiber)\n          : 0\n        : 0;\n      break;\n    default:\n      if (\n        ((fiber = nextRootInstance.tagName),\n        (nextRootInstance = nextRootInstance.namespaceURI))\n      )\n        (nextRootInstance = getOwnHostContext(nextRootInstance)),\n          (fiber = getChildHostContextProd(nextRootInstance, fiber));\n      else\n        switch (fiber) {\n          case \"svg\":\n            fiber = 1;\n            break;\n          case \"math\":\n            fiber = 2;\n            break;\n          default:\n            fiber = 0;\n        }\n  }\n  pop(contextStackCursor);\n  push(contextStackCursor, fiber);\n}\nfunction popHostContainer() {\n  pop(contextStackCursor);\n  pop(contextFiberStackCursor);\n  pop(rootInstanceStackCursor);\n}\nfunction pushHostContext(fiber) {\n  null !== fiber.memoizedState && push(hostTransitionProviderCursor, fiber);\n  var context = contextStackCursor.current;\n  var JSCompiler_inline_result = getChildHostContextProd(context, fiber.type);\n  context !== JSCompiler_inline_result &&\n    (push(contextFiberStackCursor, fiber),\n    push(contextStackCursor, JSCompiler_inline_result));\n}\nfunction popHostContext(fiber) {\n  contextFiberStackCursor.current === fiber &&\n    (pop(contextStackCursor), pop(contextFiberStackCursor));\n  hostTransitionProviderCursor.current === fiber &&\n    (pop(hostTransitionProviderCursor),\n    (HostTransitionContext._currentValue = sharedNotPendingObject));\n}\nvar prefix, suffix;\nfunction describeBuiltInComponentFrame(name) {\n  if (void 0 === prefix)\n    try {\n      throw Error();\n    } catch (x) {\n      var match = x.stack.trim().match(/\\n( *(at )?)/);\n      prefix = (match && match[1]) || \"\";\n      suffix =\n        -1 < x.stack.indexOf(\"\\n    at\")\n          ? \" (<anonymous>)\"\n          : -1 < x.stack.indexOf(\"@\")\n            ? \"@unknown:0:0\"\n            : \"\";\n    }\n  return \"\\n\" + prefix + name + suffix;\n}\nvar reentry = !1;\nfunction describeNativeComponentFrame(fn, construct) {\n  if (!fn || reentry) return \"\";\n  reentry = !0;\n  var previousPrepareStackTrace = Error.prepareStackTrace;\n  Error.prepareStackTrace = void 0;\n  try {\n    var RunInRootFrame = {\n      DetermineComponentFrameRoot: function () {\n        try {\n          if (construct) {\n            var Fake = function () {\n              throw Error();\n            };\n            Object.defineProperty(Fake.prototype, \"props\", {\n              set: function () {\n                throw Error();\n              }\n            });\n            if (\"object\" === typeof Reflect && Reflect.construct) {\n              try {\n                Reflect.construct(Fake, []);\n              } catch (x) {\n                var control = x;\n              }\n              Reflect.construct(fn, [], Fake);\n            } else {\n              try {\n                Fake.call();\n              } catch (x$1) {\n                control = x$1;\n              }\n              fn.call(Fake.prototype);\n            }\n          } else {\n            try {\n              throw Error();\n            } catch (x$2) {\n              control = x$2;\n            }\n            (Fake = fn()) &&\n              \"function\" === typeof Fake.catch &&\n              Fake.catch(function () {});\n          }\n        } catch (sample) {\n          if (sample && control && \"string\" === typeof sample.stack)\n            return [sample.stack, control.stack];\n        }\n        return [null, null];\n      }\n    };\n    RunInRootFrame.DetermineComponentFrameRoot.displayName =\n      \"DetermineComponentFrameRoot\";\n    var namePropDescriptor = Object.getOwnPropertyDescriptor(\n      RunInRootFrame.DetermineComponentFrameRoot,\n      \"name\"\n    );\n    namePropDescriptor &&\n      namePropDescriptor.configurable &&\n      Object.defineProperty(\n        RunInRootFrame.DetermineComponentFrameRoot,\n        \"name\",\n        { value: \"DetermineComponentFrameRoot\" }\n      );\n    var _RunInRootFrame$Deter = RunInRootFrame.DetermineComponentFrameRoot(),\n      sampleStack = _RunInRootFrame$Deter[0],\n      controlStack = _RunInRootFrame$Deter[1];\n    if (sampleStack && controlStack) {\n      var sampleLines = sampleStack.split(\"\\n\"),\n        controlLines = controlStack.split(\"\\n\");\n      for (\n        namePropDescriptor = RunInRootFrame = 0;\n        RunInRootFrame < sampleLines.length &&\n        !sampleLines[RunInRootFrame].includes(\"DetermineComponentFrameRoot\");\n\n      )\n        RunInRootFrame++;\n      for (\n        ;\n        namePropDescriptor < controlLines.length &&\n        !controlLines[namePropDescriptor].includes(\n          \"DetermineComponentFrameRoot\"\n        );\n\n      )\n        namePropDescriptor++;\n      if (\n        RunInRootFrame === sampleLines.length ||\n        namePropDescriptor === controlLines.length\n      )\n        for (\n          RunInRootFrame = sampleLines.length - 1,\n            namePropDescriptor = controlLines.length - 1;\n          1 <= RunInRootFrame &&\n          0 <= namePropDescriptor &&\n          sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor];\n\n        )\n          namePropDescriptor--;\n      for (\n        ;\n        1 <= RunInRootFrame && 0 <= namePropDescriptor;\n        RunInRootFrame--, namePropDescriptor--\n      )\n        if (sampleLines[RunInRootFrame] !== controlLines[namePropDescriptor]) {\n          if (1 !== RunInRootFrame || 1 !== namePropDescriptor) {\n            do\n              if (\n                (RunInRootFrame--,\n                namePropDescriptor--,\n                0 > namePropDescriptor ||\n                  sampleLines[RunInRootFrame] !==\n                    controlLines[namePropDescriptor])\n              ) {\n                var frame =\n                  \"\\n\" +\n                  sampleLines[RunInRootFrame].replace(\" at new \", \" at \");\n                fn.displayName &&\n                  frame.includes(\"<anonymous>\") &&\n                  (frame = frame.replace(\"<anonymous>\", fn.displayName));\n                return frame;\n              }\n            while (1 <= RunInRootFrame && 0 <= namePropDescriptor);\n          }\n          break;\n        }\n    }\n  } finally {\n    (reentry = !1), (Error.prepareStackTrace = previousPrepareStackTrace);\n  }\n  return (previousPrepareStackTrace = fn ? fn.displayName || fn.name : \"\")\n    ? describeBuiltInComponentFrame(previousPrepareStackTrace)\n    : \"\";\n}\nfunction describeFiber(fiber, childFiber) {\n  switch (fiber.tag) {\n    case 26:\n    case 27:\n    case 5:\n      return describeBuiltInComponentFrame(fiber.type);\n    case 16:\n      return describeBuiltInComponentFrame(\"Lazy\");\n    case 13:\n      return fiber.child !== childFiber && null !== childFiber\n        ? describeBuiltInComponentFrame(\"Suspense Fallback\")\n        : describeBuiltInComponentFrame(\"Suspense\");\n    case 19:\n      return describeBuiltInComponentFrame(\"SuspenseList\");\n    case 0:\n    case 15:\n      return describeNativeComponentFrame(fiber.type, !1);\n    case 11:\n      return describeNativeComponentFrame(fiber.type.render, !1);\n    case 1:\n      return describeNativeComponentFrame(fiber.type, !0);\n    case 31:\n      return describeBuiltInComponentFrame(\"Activity\");\n    default:\n      return \"\";\n  }\n}\nfunction getStackByFiberInDevAndProd(workInProgress) {\n  try {\n    var info = \"\",\n      previous = null;\n    do\n      (info += describeFiber(workInProgress, previous)),\n        (previous = workInProgress),\n        (workInProgress = workInProgress.return);\n    while (workInProgress);\n    return info;\n  } catch (x) {\n    return \"\\nError generating stack: \" + x.message + \"\\n\" + x.stack;\n  }\n}\nvar hasOwnProperty = Object.prototype.hasOwnProperty,\n  scheduleCallback$3 = Scheduler.unstable_scheduleCallback,\n  cancelCallback$1 = Scheduler.unstable_cancelCallback,\n  shouldYield = Scheduler.unstable_shouldYield,\n  requestPaint = Scheduler.unstable_requestPaint,\n  now = Scheduler.unstable_now,\n  getCurrentPriorityLevel = Scheduler.unstable_getCurrentPriorityLevel,\n  ImmediatePriority = Scheduler.unstable_ImmediatePriority,\n  UserBlockingPriority = Scheduler.unstable_UserBlockingPriority,\n  NormalPriority$1 = Scheduler.unstable_NormalPriority,\n  LowPriority = Scheduler.unstable_LowPriority,\n  IdlePriority = Scheduler.unstable_IdlePriority,\n  log$1 = Scheduler.log,\n  unstable_setDisableYieldValue = Scheduler.unstable_setDisableYieldValue,\n  rendererID = null,\n  injectedHook = null;\nfunction setIsStrictModeForDevtools(newIsStrictMode) {\n  \"function\" === typeof log$1 && unstable_setDisableYieldValue(newIsStrictMode);\n  if (injectedHook && \"function\" === typeof injectedHook.setStrictMode)\n    try {\n      injectedHook.setStrictMode(rendererID, newIsStrictMode);\n    } catch (err) {}\n}\nvar clz32 = Math.clz32 ? Math.clz32 : clz32Fallback,\n  log = Math.log,\n  LN2 = Math.LN2;\nfunction clz32Fallback(x) {\n  x >>>= 0;\n  return 0 === x ? 32 : (31 - ((log(x) / LN2) | 0)) | 0;\n}\nvar nextTransitionUpdateLane = 256,\n  nextTransitionDeferredLane = 262144,\n  nextRetryLane = 4194304;\nfunction getHighestPriorityLanes(lanes) {\n  var pendingSyncLanes = lanes & 42;\n  if (0 !== pendingSyncLanes) return pendingSyncLanes;\n  switch (lanes & -lanes) {\n    case 1:\n      return 1;\n    case 2:\n      return 2;\n    case 4:\n      return 4;\n    case 8:\n      return 8;\n    case 16:\n      return 16;\n    case 32:\n      return 32;\n    case 64:\n      return 64;\n    case 128:\n      return 128;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n      return lanes & 261888;\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return lanes & 3932160;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return lanes & 62914560;\n    case 67108864:\n      return 67108864;\n    case 134217728:\n      return 134217728;\n    case 268435456:\n      return 268435456;\n    case 536870912:\n      return 536870912;\n    case 1073741824:\n      return 0;\n    default:\n      return lanes;\n  }\n}\nfunction getNextLanes(root, wipLanes, rootHasPendingCommit) {\n  var pendingLanes = root.pendingLanes;\n  if (0 === pendingLanes) return 0;\n  var nextLanes = 0,\n    suspendedLanes = root.suspendedLanes,\n    pingedLanes = root.pingedLanes;\n  root = root.warmLanes;\n  var nonIdlePendingLanes = pendingLanes & 134217727;\n  0 !== nonIdlePendingLanes\n    ? ((pendingLanes = nonIdlePendingLanes & ~suspendedLanes),\n      0 !== pendingLanes\n        ? (nextLanes = getHighestPriorityLanes(pendingLanes))\n        : ((pingedLanes &= nonIdlePendingLanes),\n          0 !== pingedLanes\n            ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n            : rootHasPendingCommit ||\n              ((rootHasPendingCommit = nonIdlePendingLanes & ~root),\n              0 !== rootHasPendingCommit &&\n                (nextLanes = getHighestPriorityLanes(rootHasPendingCommit)))))\n    : ((nonIdlePendingLanes = pendingLanes & ~suspendedLanes),\n      0 !== nonIdlePendingLanes\n        ? (nextLanes = getHighestPriorityLanes(nonIdlePendingLanes))\n        : 0 !== pingedLanes\n          ? (nextLanes = getHighestPriorityLanes(pingedLanes))\n          : rootHasPendingCommit ||\n            ((rootHasPendingCommit = pendingLanes & ~root),\n            0 !== rootHasPendingCommit &&\n              (nextLanes = getHighestPriorityLanes(rootHasPendingCommit))));\n  return 0 === nextLanes\n    ? 0\n    : 0 !== wipLanes &&\n        wipLanes !== nextLanes &&\n        0 === (wipLanes & suspendedLanes) &&\n        ((suspendedLanes = nextLanes & -nextLanes),\n        (rootHasPendingCommit = wipLanes & -wipLanes),\n        suspendedLanes >= rootHasPendingCommit ||\n          (32 === suspendedLanes && 0 !== (rootHasPendingCommit & 4194048)))\n      ? wipLanes\n      : nextLanes;\n}\nfunction checkIfRootIsPrerendering(root, renderLanes) {\n  return (\n    0 ===\n    (root.pendingLanes &\n      ~(root.suspendedLanes & ~root.pingedLanes) &\n      renderLanes)\n  );\n}\nfunction computeExpirationTime(lane, currentTime) {\n  switch (lane) {\n    case 1:\n    case 2:\n    case 4:\n    case 8:\n    case 64:\n      return currentTime + 250;\n    case 16:\n    case 32:\n    case 128:\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n      return currentTime + 5e3;\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      return -1;\n    case 67108864:\n    case 134217728:\n    case 268435456:\n    case 536870912:\n    case 1073741824:\n      return -1;\n    default:\n      return -1;\n  }\n}\nfunction claimNextRetryLane() {\n  var lane = nextRetryLane;\n  nextRetryLane <<= 1;\n  0 === (nextRetryLane & 62914560) && (nextRetryLane = 4194304);\n  return lane;\n}\nfunction createLaneMap(initial) {\n  for (var laneMap = [], i = 0; 31 > i; i++) laneMap.push(initial);\n  return laneMap;\n}\nfunction markRootUpdated$1(root, updateLane) {\n  root.pendingLanes |= updateLane;\n  268435456 !== updateLane &&\n    ((root.suspendedLanes = 0), (root.pingedLanes = 0), (root.warmLanes = 0));\n}\nfunction markRootFinished(\n  root,\n  finishedLanes,\n  remainingLanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  var previouslyPendingLanes = root.pendingLanes;\n  root.pendingLanes = remainingLanes;\n  root.suspendedLanes = 0;\n  root.pingedLanes = 0;\n  root.warmLanes = 0;\n  root.expiredLanes &= remainingLanes;\n  root.entangledLanes &= remainingLanes;\n  root.errorRecoveryDisabledLanes &= remainingLanes;\n  root.shellSuspendCounter = 0;\n  var entanglements = root.entanglements,\n    expirationTimes = root.expirationTimes,\n    hiddenUpdates = root.hiddenUpdates;\n  for (\n    remainingLanes = previouslyPendingLanes & ~remainingLanes;\n    0 < remainingLanes;\n\n  ) {\n    var index$7 = 31 - clz32(remainingLanes),\n      lane = 1 << index$7;\n    entanglements[index$7] = 0;\n    expirationTimes[index$7] = -1;\n    var hiddenUpdatesForLane = hiddenUpdates[index$7];\n    if (null !== hiddenUpdatesForLane)\n      for (\n        hiddenUpdates[index$7] = null, index$7 = 0;\n        index$7 < hiddenUpdatesForLane.length;\n        index$7++\n      ) {\n        var update = hiddenUpdatesForLane[index$7];\n        null !== update && (update.lane &= -536870913);\n      }\n    remainingLanes &= ~lane;\n  }\n  0 !== spawnedLane && markSpawnedDeferredLane(root, spawnedLane, 0);\n  0 !== suspendedRetryLanes &&\n    0 === updatedLanes &&\n    0 !== root.tag &&\n    (root.suspendedLanes |=\n      suspendedRetryLanes & ~(previouslyPendingLanes & ~finishedLanes));\n}\nfunction markSpawnedDeferredLane(root, spawnedLane, entangledLanes) {\n  root.pendingLanes |= spawnedLane;\n  root.suspendedLanes &= ~spawnedLane;\n  var spawnedLaneIndex = 31 - clz32(spawnedLane);\n  root.entangledLanes |= spawnedLane;\n  root.entanglements[spawnedLaneIndex] =\n    root.entanglements[spawnedLaneIndex] |\n    1073741824 |\n    (entangledLanes & 261930);\n}\nfunction markRootEntangled(root, entangledLanes) {\n  var rootEntangledLanes = (root.entangledLanes |= entangledLanes);\n  for (root = root.entanglements; rootEntangledLanes; ) {\n    var index$8 = 31 - clz32(rootEntangledLanes),\n      lane = 1 << index$8;\n    (lane & entangledLanes) | (root[index$8] & entangledLanes) &&\n      (root[index$8] |= entangledLanes);\n    rootEntangledLanes &= ~lane;\n  }\n}\nfunction getBumpedLaneForHydration(root, renderLanes) {\n  var renderLane = renderLanes & -renderLanes;\n  renderLane =\n    0 !== (renderLane & 42) ? 1 : getBumpedLaneForHydrationByLane(renderLane);\n  return 0 !== (renderLane & (root.suspendedLanes | renderLanes))\n    ? 0\n    : renderLane;\n}\nfunction getBumpedLaneForHydrationByLane(lane) {\n  switch (lane) {\n    case 2:\n      lane = 1;\n      break;\n    case 8:\n      lane = 4;\n      break;\n    case 32:\n      lane = 16;\n      break;\n    case 256:\n    case 512:\n    case 1024:\n    case 2048:\n    case 4096:\n    case 8192:\n    case 16384:\n    case 32768:\n    case 65536:\n    case 131072:\n    case 262144:\n    case 524288:\n    case 1048576:\n    case 2097152:\n    case 4194304:\n    case 8388608:\n    case 16777216:\n    case 33554432:\n      lane = 128;\n      break;\n    case 268435456:\n      lane = 134217728;\n      break;\n    default:\n      lane = 0;\n  }\n  return lane;\n}\nfunction lanesToEventPriority(lanes) {\n  lanes &= -lanes;\n  return 2 < lanes\n    ? 8 < lanes\n      ? 0 !== (lanes & 134217727)\n        ? 32\n        : 268435456\n      : 8\n    : 2;\n}\nfunction resolveUpdatePriority() {\n  var updatePriority = ReactDOMSharedInternals.p;\n  if (0 !== updatePriority) return updatePriority;\n  updatePriority = window.event;\n  return void 0 === updatePriority ? 32 : getEventPriority(updatePriority.type);\n}\nfunction runWithPriority(priority, fn) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    return (ReactDOMSharedInternals.p = priority), fn();\n  } finally {\n    ReactDOMSharedInternals.p = previousPriority;\n  }\n}\nvar randomKey = Math.random().toString(36).slice(2),\n  internalInstanceKey = \"__reactFiber$\" + randomKey,\n  internalPropsKey = \"__reactProps$\" + randomKey,\n  internalContainerInstanceKey = \"__reactContainer$\" + randomKey,\n  internalEventHandlersKey = \"__reactEvents$\" + randomKey,\n  internalEventHandlerListenersKey = \"__reactListeners$\" + randomKey,\n  internalEventHandlesSetKey = \"__reactHandles$\" + randomKey,\n  internalRootNodeResourcesKey = \"__reactResources$\" + randomKey,\n  internalHoistableMarker = \"__reactMarker$\" + randomKey;\nfunction detachDeletedInstance(node) {\n  delete node[internalInstanceKey];\n  delete node[internalPropsKey];\n  delete node[internalEventHandlersKey];\n  delete node[internalEventHandlerListenersKey];\n  delete node[internalEventHandlesSetKey];\n}\nfunction getClosestInstanceFromNode(targetNode) {\n  var targetInst = targetNode[internalInstanceKey];\n  if (targetInst) return targetInst;\n  for (var parentNode = targetNode.parentNode; parentNode; ) {\n    if (\n      (targetInst =\n        parentNode[internalContainerInstanceKey] ||\n        parentNode[internalInstanceKey])\n    ) {\n      parentNode = targetInst.alternate;\n      if (\n        null !== targetInst.child ||\n        (null !== parentNode && null !== parentNode.child)\n      )\n        for (\n          targetNode = getParentHydrationBoundary(targetNode);\n          null !== targetNode;\n\n        ) {\n          if ((parentNode = targetNode[internalInstanceKey])) return parentNode;\n          targetNode = getParentHydrationBoundary(targetNode);\n        }\n      return targetInst;\n    }\n    targetNode = parentNode;\n    parentNode = targetNode.parentNode;\n  }\n  return null;\n}\nfunction getInstanceFromNode(node) {\n  if (\n    (node = node[internalInstanceKey] || node[internalContainerInstanceKey])\n  ) {\n    var tag = node.tag;\n    if (\n      5 === tag ||\n      6 === tag ||\n      13 === tag ||\n      31 === tag ||\n      26 === tag ||\n      27 === tag ||\n      3 === tag\n    )\n      return node;\n  }\n  return null;\n}\nfunction getNodeFromInstance(inst) {\n  var tag = inst.tag;\n  if (5 === tag || 26 === tag || 27 === tag || 6 === tag) return inst.stateNode;\n  throw Error(formatProdErrorMessage(33));\n}\nfunction getResourcesFromRoot(root) {\n  var resources = root[internalRootNodeResourcesKey];\n  resources ||\n    (resources = root[internalRootNodeResourcesKey] =\n      { hoistableStyles: new Map(), hoistableScripts: new Map() });\n  return resources;\n}\nfunction markNodeAsHoistable(node) {\n  node[internalHoistableMarker] = !0;\n}\nvar allNativeEvents = new Set(),\n  registrationNameDependencies = {};\nfunction registerTwoPhaseEvent(registrationName, dependencies) {\n  registerDirectEvent(registrationName, dependencies);\n  registerDirectEvent(registrationName + \"Capture\", dependencies);\n}\nfunction registerDirectEvent(registrationName, dependencies) {\n  registrationNameDependencies[registrationName] = dependencies;\n  for (\n    registrationName = 0;\n    registrationName < dependencies.length;\n    registrationName++\n  )\n    allNativeEvents.add(dependencies[registrationName]);\n}\nvar VALID_ATTRIBUTE_NAME_REGEX = RegExp(\n    \"^[:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD][:A-Z_a-z\\\\u00C0-\\\\u00D6\\\\u00D8-\\\\u00F6\\\\u00F8-\\\\u02FF\\\\u0370-\\\\u037D\\\\u037F-\\\\u1FFF\\\\u200C-\\\\u200D\\\\u2070-\\\\u218F\\\\u2C00-\\\\u2FEF\\\\u3001-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFFD\\\\-.0-9\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]*$\"\n  ),\n  illegalAttributeNameCache = {},\n  validatedAttributeNameCache = {};\nfunction isAttributeNameSafe(attributeName) {\n  if (hasOwnProperty.call(validatedAttributeNameCache, attributeName))\n    return !0;\n  if (hasOwnProperty.call(illegalAttributeNameCache, attributeName)) return !1;\n  if (VALID_ATTRIBUTE_NAME_REGEX.test(attributeName))\n    return (validatedAttributeNameCache[attributeName] = !0);\n  illegalAttributeNameCache[attributeName] = !0;\n  return !1;\n}\nfunction setValueForAttribute(node, name, value) {\n  if (isAttributeNameSafe(name))\n    if (null === value) node.removeAttribute(name);\n    else {\n      switch (typeof value) {\n        case \"undefined\":\n        case \"function\":\n        case \"symbol\":\n          node.removeAttribute(name);\n          return;\n        case \"boolean\":\n          var prefix$10 = name.toLowerCase().slice(0, 5);\n          if (\"data-\" !== prefix$10 && \"aria-\" !== prefix$10) {\n            node.removeAttribute(name);\n            return;\n          }\n      }\n      node.setAttribute(name, \"\" + value);\n    }\n}\nfunction setValueForKnownAttribute(node, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttribute(name, \"\" + value);\n  }\n}\nfunction setValueForNamespacedAttribute(node, namespace, name, value) {\n  if (null === value) node.removeAttribute(name);\n  else {\n    switch (typeof value) {\n      case \"undefined\":\n      case \"function\":\n      case \"symbol\":\n      case \"boolean\":\n        node.removeAttribute(name);\n        return;\n    }\n    node.setAttributeNS(namespace, name, \"\" + value);\n  }\n}\nfunction getToStringValue(value) {\n  switch (typeof value) {\n    case \"bigint\":\n    case \"boolean\":\n    case \"number\":\n    case \"string\":\n    case \"undefined\":\n      return value;\n    case \"object\":\n      return value;\n    default:\n      return \"\";\n  }\n}\nfunction isCheckable(elem) {\n  var type = elem.type;\n  return (\n    (elem = elem.nodeName) &&\n    \"input\" === elem.toLowerCase() &&\n    (\"checkbox\" === type || \"radio\" === type)\n  );\n}\nfunction trackValueOnNode(node, valueField, currentValue) {\n  var descriptor = Object.getOwnPropertyDescriptor(\n    node.constructor.prototype,\n    valueField\n  );\n  if (\n    !node.hasOwnProperty(valueField) &&\n    \"undefined\" !== typeof descriptor &&\n    \"function\" === typeof descriptor.get &&\n    \"function\" === typeof descriptor.set\n  ) {\n    var get = descriptor.get,\n      set = descriptor.set;\n    Object.defineProperty(node, valueField, {\n      configurable: !0,\n      get: function () {\n        return get.call(this);\n      },\n      set: function (value) {\n        currentValue = \"\" + value;\n        set.call(this, value);\n      }\n    });\n    Object.defineProperty(node, valueField, {\n      enumerable: descriptor.enumerable\n    });\n    return {\n      getValue: function () {\n        return currentValue;\n      },\n      setValue: function (value) {\n        currentValue = \"\" + value;\n      },\n      stopTracking: function () {\n        node._valueTracker = null;\n        delete node[valueField];\n      }\n    };\n  }\n}\nfunction track(node) {\n  if (!node._valueTracker) {\n    var valueField = isCheckable(node) ? \"checked\" : \"value\";\n    node._valueTracker = trackValueOnNode(\n      node,\n      valueField,\n      \"\" + node[valueField]\n    );\n  }\n}\nfunction updateValueIfChanged(node) {\n  if (!node) return !1;\n  var tracker = node._valueTracker;\n  if (!tracker) return !0;\n  var lastValue = tracker.getValue();\n  var value = \"\";\n  node &&\n    (value = isCheckable(node)\n      ? node.checked\n        ? \"true\"\n        : \"false\"\n      : node.value);\n  node = value;\n  return node !== lastValue ? (tracker.setValue(node), !0) : !1;\n}\nfunction getActiveElement(doc) {\n  doc = doc || (\"undefined\" !== typeof document ? document : void 0);\n  if (\"undefined\" === typeof doc) return null;\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\nvar escapeSelectorAttributeValueInsideDoubleQuotesRegex = /[\\n\"\\\\]/g;\nfunction escapeSelectorAttributeValueInsideDoubleQuotes(value) {\n  return value.replace(\n    escapeSelectorAttributeValueInsideDoubleQuotesRegex,\n    function (ch) {\n      return \"\\\\\" + ch.charCodeAt(0).toString(16) + \" \";\n    }\n  );\n}\nfunction updateInput(\n  element,\n  value,\n  defaultValue,\n  lastDefaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name\n) {\n  element.name = \"\";\n  null != type &&\n  \"function\" !== typeof type &&\n  \"symbol\" !== typeof type &&\n  \"boolean\" !== typeof type\n    ? (element.type = type)\n    : element.removeAttribute(\"type\");\n  if (null != value)\n    if (\"number\" === type) {\n      if ((0 === value && \"\" === element.value) || element.value != value)\n        element.value = \"\" + getToStringValue(value);\n    } else\n      element.value !== \"\" + getToStringValue(value) &&\n        (element.value = \"\" + getToStringValue(value));\n  else\n    (\"submit\" !== type && \"reset\" !== type) || element.removeAttribute(\"value\");\n  null != value\n    ? setDefaultValue(element, type, getToStringValue(value))\n    : null != defaultValue\n      ? setDefaultValue(element, type, getToStringValue(defaultValue))\n      : null != lastDefaultValue && element.removeAttribute(\"value\");\n  null == checked &&\n    null != defaultChecked &&\n    (element.defaultChecked = !!defaultChecked);\n  null != checked &&\n    (element.checked =\n      checked && \"function\" !== typeof checked && \"symbol\" !== typeof checked);\n  null != name &&\n  \"function\" !== typeof name &&\n  \"symbol\" !== typeof name &&\n  \"boolean\" !== typeof name\n    ? (element.name = \"\" + getToStringValue(name))\n    : element.removeAttribute(\"name\");\n}\nfunction initInput(\n  element,\n  value,\n  defaultValue,\n  checked,\n  defaultChecked,\n  type,\n  name,\n  isHydrating\n) {\n  null != type &&\n    \"function\" !== typeof type &&\n    \"symbol\" !== typeof type &&\n    \"boolean\" !== typeof type &&\n    (element.type = type);\n  if (null != value || null != defaultValue) {\n    if (\n      !(\n        (\"submit\" !== type && \"reset\" !== type) ||\n        (void 0 !== value && null !== value)\n      )\n    ) {\n      track(element);\n      return;\n    }\n    defaultValue =\n      null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n    value = null != value ? \"\" + getToStringValue(value) : defaultValue;\n    isHydrating || value === element.value || (element.value = value);\n    element.defaultValue = value;\n  }\n  checked = null != checked ? checked : defaultChecked;\n  checked =\n    \"function\" !== typeof checked && \"symbol\" !== typeof checked && !!checked;\n  element.checked = isHydrating ? element.checked : !!checked;\n  element.defaultChecked = !!checked;\n  null != name &&\n    \"function\" !== typeof name &&\n    \"symbol\" !== typeof name &&\n    \"boolean\" !== typeof name &&\n    (element.name = name);\n  track(element);\n}\nfunction setDefaultValue(node, type, value) {\n  (\"number\" === type && getActiveElement(node.ownerDocument) === node) ||\n    node.defaultValue === \"\" + value ||\n    (node.defaultValue = \"\" + value);\n}\nfunction updateOptions(node, multiple, propValue, setDefaultSelected) {\n  node = node.options;\n  if (multiple) {\n    multiple = {};\n    for (var i = 0; i < propValue.length; i++)\n      multiple[\"$\" + propValue[i]] = !0;\n    for (propValue = 0; propValue < node.length; propValue++)\n      (i = multiple.hasOwnProperty(\"$\" + node[propValue].value)),\n        node[propValue].selected !== i && (node[propValue].selected = i),\n        i && setDefaultSelected && (node[propValue].defaultSelected = !0);\n  } else {\n    propValue = \"\" + getToStringValue(propValue);\n    multiple = null;\n    for (i = 0; i < node.length; i++) {\n      if (node[i].value === propValue) {\n        node[i].selected = !0;\n        setDefaultSelected && (node[i].defaultSelected = !0);\n        return;\n      }\n      null !== multiple || node[i].disabled || (multiple = node[i]);\n    }\n    null !== multiple && (multiple.selected = !0);\n  }\n}\nfunction updateTextarea(element, value, defaultValue) {\n  if (\n    null != value &&\n    ((value = \"\" + getToStringValue(value)),\n    value !== element.value && (element.value = value),\n    null == defaultValue)\n  ) {\n    element.defaultValue !== value && (element.defaultValue = value);\n    return;\n  }\n  element.defaultValue =\n    null != defaultValue ? \"\" + getToStringValue(defaultValue) : \"\";\n}\nfunction initTextarea(element, value, defaultValue, children) {\n  if (null == value) {\n    if (null != children) {\n      if (null != defaultValue) throw Error(formatProdErrorMessage(92));\n      if (isArrayImpl(children)) {\n        if (1 < children.length) throw Error(formatProdErrorMessage(93));\n        children = children[0];\n      }\n      defaultValue = children;\n    }\n    null == defaultValue && (defaultValue = \"\");\n    value = defaultValue;\n  }\n  defaultValue = getToStringValue(value);\n  element.defaultValue = defaultValue;\n  children = element.textContent;\n  children === defaultValue &&\n    \"\" !== children &&\n    null !== children &&\n    (element.value = children);\n  track(element);\n}\nfunction setTextContent(node, text) {\n  if (text) {\n    var firstChild = node.firstChild;\n    if (\n      firstChild &&\n      firstChild === node.lastChild &&\n      3 === firstChild.nodeType\n    ) {\n      firstChild.nodeValue = text;\n      return;\n    }\n  }\n  node.textContent = text;\n}\nvar unitlessNumbers = new Set(\n  \"animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp\".split(\n    \" \"\n  )\n);\nfunction setValueForStyle(style, styleName, value) {\n  var isCustomProperty = 0 === styleName.indexOf(\"--\");\n  null == value || \"boolean\" === typeof value || \"\" === value\n    ? isCustomProperty\n      ? style.setProperty(styleName, \"\")\n      : \"float\" === styleName\n        ? (style.cssFloat = \"\")\n        : (style[styleName] = \"\")\n    : isCustomProperty\n      ? style.setProperty(styleName, value)\n      : \"number\" !== typeof value ||\n          0 === value ||\n          unitlessNumbers.has(styleName)\n        ? \"float\" === styleName\n          ? (style.cssFloat = value)\n          : (style[styleName] = (\"\" + value).trim())\n        : (style[styleName] = value + \"px\");\n}\nfunction setValueForStyles(node, styles, prevStyles) {\n  if (null != styles && \"object\" !== typeof styles)\n    throw Error(formatProdErrorMessage(62));\n  node = node.style;\n  if (null != prevStyles) {\n    for (var styleName in prevStyles)\n      !prevStyles.hasOwnProperty(styleName) ||\n        (null != styles && styles.hasOwnProperty(styleName)) ||\n        (0 === styleName.indexOf(\"--\")\n          ? node.setProperty(styleName, \"\")\n          : \"float\" === styleName\n            ? (node.cssFloat = \"\")\n            : (node[styleName] = \"\"));\n    for (var styleName$16 in styles)\n      (styleName = styles[styleName$16]),\n        styles.hasOwnProperty(styleName$16) &&\n          prevStyles[styleName$16] !== styleName &&\n          setValueForStyle(node, styleName$16, styleName);\n  } else\n    for (var styleName$17 in styles)\n      styles.hasOwnProperty(styleName$17) &&\n        setValueForStyle(node, styleName$17, styles[styleName$17]);\n}\nfunction isCustomElement(tagName) {\n  if (-1 === tagName.indexOf(\"-\")) return !1;\n  switch (tagName) {\n    case \"annotation-xml\":\n    case \"color-profile\":\n    case \"font-face\":\n    case \"font-face-src\":\n    case \"font-face-uri\":\n    case \"font-face-format\":\n    case \"font-face-name\":\n    case \"missing-glyph\":\n      return !1;\n    default:\n      return !0;\n  }\n}\nvar aliases = new Map([\n    [\"acceptCharset\", \"accept-charset\"],\n    [\"htmlFor\", \"for\"],\n    [\"httpEquiv\", \"http-equiv\"],\n    [\"crossOrigin\", \"crossorigin\"],\n    [\"accentHeight\", \"accent-height\"],\n    [\"alignmentBaseline\", \"alignment-baseline\"],\n    [\"arabicForm\", \"arabic-form\"],\n    [\"baselineShift\", \"baseline-shift\"],\n    [\"capHeight\", \"cap-height\"],\n    [\"clipPath\", \"clip-path\"],\n    [\"clipRule\", \"clip-rule\"],\n    [\"colorInterpolation\", \"color-interpolation\"],\n    [\"colorInterpolationFilters\", \"color-interpolation-filters\"],\n    [\"colorProfile\", \"color-profile\"],\n    [\"colorRendering\", \"color-rendering\"],\n    [\"dominantBaseline\", \"dominant-baseline\"],\n    [\"enableBackground\", \"enable-background\"],\n    [\"fillOpacity\", \"fill-opacity\"],\n    [\"fillRule\", \"fill-rule\"],\n    [\"floodColor\", \"flood-color\"],\n    [\"floodOpacity\", \"flood-opacity\"],\n    [\"fontFamily\", \"font-family\"],\n    [\"fontSize\", \"font-size\"],\n    [\"fontSizeAdjust\", \"font-size-adjust\"],\n    [\"fontStretch\", \"font-stretch\"],\n    [\"fontStyle\", \"font-style\"],\n    [\"fontVariant\", \"font-variant\"],\n    [\"fontWeight\", \"font-weight\"],\n    [\"glyphName\", \"glyph-name\"],\n    [\"glyphOrientationHorizontal\", \"glyph-orientation-horizontal\"],\n    [\"glyphOrientationVertical\", \"glyph-orientation-vertical\"],\n    [\"horizAdvX\", \"horiz-adv-x\"],\n    [\"horizOriginX\", \"horiz-origin-x\"],\n    [\"imageRendering\", \"image-rendering\"],\n    [\"letterSpacing\", \"letter-spacing\"],\n    [\"lightingColor\", \"lighting-color\"],\n    [\"markerEnd\", \"marker-end\"],\n    [\"markerMid\", \"marker-mid\"],\n    [\"markerStart\", \"marker-start\"],\n    [\"overlinePosition\", \"overline-position\"],\n    [\"overlineThickness\", \"overline-thickness\"],\n    [\"paintOrder\", \"paint-order\"],\n    [\"panose-1\", \"panose-1\"],\n    [\"pointerEvents\", \"pointer-events\"],\n    [\"renderingIntent\", \"rendering-intent\"],\n    [\"shapeRendering\", \"shape-rendering\"],\n    [\"stopColor\", \"stop-color\"],\n    [\"stopOpacity\", \"stop-opacity\"],\n    [\"strikethroughPosition\", \"strikethrough-position\"],\n    [\"strikethroughThickness\", \"strikethrough-thickness\"],\n    [\"strokeDasharray\", \"stroke-dasharray\"],\n    [\"strokeDashoffset\", \"stroke-dashoffset\"],\n    [\"strokeLinecap\", \"stroke-linecap\"],\n    [\"strokeLinejoin\", \"stroke-linejoin\"],\n    [\"strokeMiterlimit\", \"stroke-miterlimit\"],\n    [\"strokeOpacity\", \"stroke-opacity\"],\n    [\"strokeWidth\", \"stroke-width\"],\n    [\"textAnchor\", \"text-anchor\"],\n    [\"textDecoration\", \"text-decoration\"],\n    [\"textRendering\", \"text-rendering\"],\n    [\"transformOrigin\", \"transform-origin\"],\n    [\"underlinePosition\", \"underline-position\"],\n    [\"underlineThickness\", \"underline-thickness\"],\n    [\"unicodeBidi\", \"unicode-bidi\"],\n    [\"unicodeRange\", \"unicode-range\"],\n    [\"unitsPerEm\", \"units-per-em\"],\n    [\"vAlphabetic\", \"v-alphabetic\"],\n    [\"vHanging\", \"v-hanging\"],\n    [\"vIdeographic\", \"v-ideographic\"],\n    [\"vMathematical\", \"v-mathematical\"],\n    [\"vectorEffect\", \"vector-effect\"],\n    [\"vertAdvY\", \"vert-adv-y\"],\n    [\"vertOriginX\", \"vert-origin-x\"],\n    [\"vertOriginY\", \"vert-origin-y\"],\n    [\"wordSpacing\", \"word-spacing\"],\n    [\"writingMode\", \"writing-mode\"],\n    [\"xmlnsXlink\", \"xmlns:xlink\"],\n    [\"xHeight\", \"x-height\"]\n  ]),\n  isJavaScriptProtocol =\n    /^[\\u0000-\\u001F ]*j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:/i;\nfunction sanitizeURL(url) {\n  return isJavaScriptProtocol.test(\"\" + url)\n    ? \"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')\"\n    : url;\n}\nfunction noop$1() {}\nvar currentReplayingEvent = null;\nfunction getEventTarget(nativeEvent) {\n  nativeEvent = nativeEvent.target || nativeEvent.srcElement || window;\n  nativeEvent.correspondingUseElement &&\n    (nativeEvent = nativeEvent.correspondingUseElement);\n  return 3 === nativeEvent.nodeType ? nativeEvent.parentNode : nativeEvent;\n}\nvar restoreTarget = null,\n  restoreQueue = null;\nfunction restoreStateOfTarget(target) {\n  var internalInstance = getInstanceFromNode(target);\n  if (internalInstance && (target = internalInstance.stateNode)) {\n    var props = target[internalPropsKey] || null;\n    a: switch (((target = internalInstance.stateNode), internalInstance.type)) {\n      case \"input\":\n        updateInput(\n          target,\n          props.value,\n          props.defaultValue,\n          props.defaultValue,\n          props.checked,\n          props.defaultChecked,\n          props.type,\n          props.name\n        );\n        internalInstance = props.name;\n        if (\"radio\" === props.type && null != internalInstance) {\n          for (props = target; props.parentNode; ) props = props.parentNode;\n          props = props.querySelectorAll(\n            'input[name=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                \"\" + internalInstance\n              ) +\n              '\"][type=\"radio\"]'\n          );\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          ) {\n            var otherNode = props[internalInstance];\n            if (otherNode !== target && otherNode.form === target.form) {\n              var otherProps = otherNode[internalPropsKey] || null;\n              if (!otherProps) throw Error(formatProdErrorMessage(90));\n              updateInput(\n                otherNode,\n                otherProps.value,\n                otherProps.defaultValue,\n                otherProps.defaultValue,\n                otherProps.checked,\n                otherProps.defaultChecked,\n                otherProps.type,\n                otherProps.name\n              );\n            }\n          }\n          for (\n            internalInstance = 0;\n            internalInstance < props.length;\n            internalInstance++\n          )\n            (otherNode = props[internalInstance]),\n              otherNode.form === target.form && updateValueIfChanged(otherNode);\n        }\n        break a;\n      case \"textarea\":\n        updateTextarea(target, props.value, props.defaultValue);\n        break a;\n      case \"select\":\n        (internalInstance = props.value),\n          null != internalInstance &&\n            updateOptions(target, !!props.multiple, internalInstance, !1);\n    }\n  }\n}\nvar isInsideEventHandler = !1;\nfunction batchedUpdates$1(fn, a, b) {\n  if (isInsideEventHandler) return fn(a, b);\n  isInsideEventHandler = !0;\n  try {\n    var JSCompiler_inline_result = fn(a);\n    return JSCompiler_inline_result;\n  } finally {\n    if (\n      ((isInsideEventHandler = !1),\n      null !== restoreTarget || null !== restoreQueue)\n    )\n      if (\n        (flushSyncWork$1(),\n        restoreTarget &&\n          ((a = restoreTarget),\n          (fn = restoreQueue),\n          (restoreQueue = restoreTarget = null),\n          restoreStateOfTarget(a),\n          fn))\n      )\n        for (a = 0; a < fn.length; a++) restoreStateOfTarget(fn[a]);\n  }\n}\nfunction getListener(inst, registrationName) {\n  var stateNode = inst.stateNode;\n  if (null === stateNode) return null;\n  var props = stateNode[internalPropsKey] || null;\n  if (null === props) return null;\n  stateNode = props[registrationName];\n  a: switch (registrationName) {\n    case \"onClick\":\n    case \"onClickCapture\":\n    case \"onDoubleClick\":\n    case \"onDoubleClickCapture\":\n    case \"onMouseDown\":\n    case \"onMouseDownCapture\":\n    case \"onMouseMove\":\n    case \"onMouseMoveCapture\":\n    case \"onMouseUp\":\n    case \"onMouseUpCapture\":\n    case \"onMouseEnter\":\n      (props = !props.disabled) ||\n        ((inst = inst.type),\n        (props = !(\n          \"button\" === inst ||\n          \"input\" === inst ||\n          \"select\" === inst ||\n          \"textarea\" === inst\n        )));\n      inst = !props;\n      break a;\n    default:\n      inst = !1;\n  }\n  if (inst) return null;\n  if (stateNode && \"function\" !== typeof stateNode)\n    throw Error(\n      formatProdErrorMessage(231, registrationName, typeof stateNode)\n    );\n  return stateNode;\n}\nvar canUseDOM = !(\n    \"undefined\" === typeof window ||\n    \"undefined\" === typeof window.document ||\n    \"undefined\" === typeof window.document.createElement\n  ),\n  passiveBrowserEventsSupported = !1;\nif (canUseDOM)\n  try {\n    var options = {};\n    Object.defineProperty(options, \"passive\", {\n      get: function () {\n        passiveBrowserEventsSupported = !0;\n      }\n    });\n    window.addEventListener(\"test\", options, options);\n    window.removeEventListener(\"test\", options, options);\n  } catch (e) {\n    passiveBrowserEventsSupported = !1;\n  }\nvar root = null,\n  startText = null,\n  fallbackText = null;\nfunction getData() {\n  if (fallbackText) return fallbackText;\n  var start,\n    startValue = startText,\n    startLength = startValue.length,\n    end,\n    endValue = \"value\" in root ? root.value : root.textContent,\n    endLength = endValue.length;\n  for (\n    start = 0;\n    start < startLength && startValue[start] === endValue[start];\n    start++\n  );\n  var minEnd = startLength - start;\n  for (\n    end = 1;\n    end <= minEnd &&\n    startValue[startLength - end] === endValue[endLength - end];\n    end++\n  );\n  return (fallbackText = endValue.slice(start, 1 < end ? 1 - end : void 0));\n}\nfunction getEventCharCode(nativeEvent) {\n  var keyCode = nativeEvent.keyCode;\n  \"charCode\" in nativeEvent\n    ? ((nativeEvent = nativeEvent.charCode),\n      0 === nativeEvent && 13 === keyCode && (nativeEvent = 13))\n    : (nativeEvent = keyCode);\n  10 === nativeEvent && (nativeEvent = 13);\n  return 32 <= nativeEvent || 13 === nativeEvent ? nativeEvent : 0;\n}\nfunction functionThatReturnsTrue() {\n  return !0;\n}\nfunction functionThatReturnsFalse() {\n  return !1;\n}\nfunction createSyntheticEvent(Interface) {\n  function SyntheticBaseEvent(\n    reactName,\n    reactEventType,\n    targetInst,\n    nativeEvent,\n    nativeEventTarget\n  ) {\n    this._reactName = reactName;\n    this._targetInst = targetInst;\n    this.type = reactEventType;\n    this.nativeEvent = nativeEvent;\n    this.target = nativeEventTarget;\n    this.currentTarget = null;\n    for (var propName in Interface)\n      Interface.hasOwnProperty(propName) &&\n        ((reactName = Interface[propName]),\n        (this[propName] = reactName\n          ? reactName(nativeEvent)\n          : nativeEvent[propName]));\n    this.isDefaultPrevented = (\n      null != nativeEvent.defaultPrevented\n        ? nativeEvent.defaultPrevented\n        : !1 === nativeEvent.returnValue\n    )\n      ? functionThatReturnsTrue\n      : functionThatReturnsFalse;\n    this.isPropagationStopped = functionThatReturnsFalse;\n    return this;\n  }\n  assign(SyntheticBaseEvent.prototype, {\n    preventDefault: function () {\n      this.defaultPrevented = !0;\n      var event = this.nativeEvent;\n      event &&\n        (event.preventDefault\n          ? event.preventDefault()\n          : \"unknown\" !== typeof event.returnValue && (event.returnValue = !1),\n        (this.isDefaultPrevented = functionThatReturnsTrue));\n    },\n    stopPropagation: function () {\n      var event = this.nativeEvent;\n      event &&\n        (event.stopPropagation\n          ? event.stopPropagation()\n          : \"unknown\" !== typeof event.cancelBubble &&\n            (event.cancelBubble = !0),\n        (this.isPropagationStopped = functionThatReturnsTrue));\n    },\n    persist: function () {},\n    isPersistent: functionThatReturnsTrue\n  });\n  return SyntheticBaseEvent;\n}\nvar EventInterface = {\n    eventPhase: 0,\n    bubbles: 0,\n    cancelable: 0,\n    timeStamp: function (event) {\n      return event.timeStamp || Date.now();\n    },\n    defaultPrevented: 0,\n    isTrusted: 0\n  },\n  SyntheticEvent = createSyntheticEvent(EventInterface),\n  UIEventInterface = assign({}, EventInterface, { view: 0, detail: 0 }),\n  SyntheticUIEvent = createSyntheticEvent(UIEventInterface),\n  lastMovementX,\n  lastMovementY,\n  lastMouseEvent,\n  MouseEventInterface = assign({}, UIEventInterface, {\n    screenX: 0,\n    screenY: 0,\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    getModifierState: getEventModifierState,\n    button: 0,\n    buttons: 0,\n    relatedTarget: function (event) {\n      return void 0 === event.relatedTarget\n        ? event.fromElement === event.srcElement\n          ? event.toElement\n          : event.fromElement\n        : event.relatedTarget;\n    },\n    movementX: function (event) {\n      if (\"movementX\" in event) return event.movementX;\n      event !== lastMouseEvent &&\n        (lastMouseEvent && \"mousemove\" === event.type\n          ? ((lastMovementX = event.screenX - lastMouseEvent.screenX),\n            (lastMovementY = event.screenY - lastMouseEvent.screenY))\n          : (lastMovementY = lastMovementX = 0),\n        (lastMouseEvent = event));\n      return lastMovementX;\n    },\n    movementY: function (event) {\n      return \"movementY\" in event ? event.movementY : lastMovementY;\n    }\n  }),\n  SyntheticMouseEvent = createSyntheticEvent(MouseEventInterface),\n  DragEventInterface = assign({}, MouseEventInterface, { dataTransfer: 0 }),\n  SyntheticDragEvent = createSyntheticEvent(DragEventInterface),\n  FocusEventInterface = assign({}, UIEventInterface, { relatedTarget: 0 }),\n  SyntheticFocusEvent = createSyntheticEvent(FocusEventInterface),\n  AnimationEventInterface = assign({}, EventInterface, {\n    animationName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticAnimationEvent = createSyntheticEvent(AnimationEventInterface),\n  ClipboardEventInterface = assign({}, EventInterface, {\n    clipboardData: function (event) {\n      return \"clipboardData\" in event\n        ? event.clipboardData\n        : window.clipboardData;\n    }\n  }),\n  SyntheticClipboardEvent = createSyntheticEvent(ClipboardEventInterface),\n  CompositionEventInterface = assign({}, EventInterface, { data: 0 }),\n  SyntheticCompositionEvent = createSyntheticEvent(CompositionEventInterface),\n  normalizeKey = {\n    Esc: \"Escape\",\n    Spacebar: \" \",\n    Left: \"ArrowLeft\",\n    Up: \"ArrowUp\",\n    Right: \"ArrowRight\",\n    Down: \"ArrowDown\",\n    Del: \"Delete\",\n    Win: \"OS\",\n    Menu: \"ContextMenu\",\n    Apps: \"ContextMenu\",\n    Scroll: \"ScrollLock\",\n    MozPrintableKey: \"Unidentified\"\n  },\n  translateToKey = {\n    8: \"Backspace\",\n    9: \"Tab\",\n    12: \"Clear\",\n    13: \"Enter\",\n    16: \"Shift\",\n    17: \"Control\",\n    18: \"Alt\",\n    19: \"Pause\",\n    20: \"CapsLock\",\n    27: \"Escape\",\n    32: \" \",\n    33: \"PageUp\",\n    34: \"PageDown\",\n    35: \"End\",\n    36: \"Home\",\n    37: \"ArrowLeft\",\n    38: \"ArrowUp\",\n    39: \"ArrowRight\",\n    40: \"ArrowDown\",\n    45: \"Insert\",\n    46: \"Delete\",\n    112: \"F1\",\n    113: \"F2\",\n    114: \"F3\",\n    115: \"F4\",\n    116: \"F5\",\n    117: \"F6\",\n    118: \"F7\",\n    119: \"F8\",\n    120: \"F9\",\n    121: \"F10\",\n    122: \"F11\",\n    123: \"F12\",\n    144: \"NumLock\",\n    145: \"ScrollLock\",\n    224: \"Meta\"\n  },\n  modifierKeyToProp = {\n    Alt: \"altKey\",\n    Control: \"ctrlKey\",\n    Meta: \"metaKey\",\n    Shift: \"shiftKey\"\n  };\nfunction modifierStateGetter(keyArg) {\n  var nativeEvent = this.nativeEvent;\n  return nativeEvent.getModifierState\n    ? nativeEvent.getModifierState(keyArg)\n    : (keyArg = modifierKeyToProp[keyArg])\n      ? !!nativeEvent[keyArg]\n      : !1;\n}\nfunction getEventModifierState() {\n  return modifierStateGetter;\n}\nvar KeyboardEventInterface = assign({}, UIEventInterface, {\n    key: function (nativeEvent) {\n      if (nativeEvent.key) {\n        var key = normalizeKey[nativeEvent.key] || nativeEvent.key;\n        if (\"Unidentified\" !== key) return key;\n      }\n      return \"keypress\" === nativeEvent.type\n        ? ((nativeEvent = getEventCharCode(nativeEvent)),\n          13 === nativeEvent ? \"Enter\" : String.fromCharCode(nativeEvent))\n        : \"keydown\" === nativeEvent.type || \"keyup\" === nativeEvent.type\n          ? translateToKey[nativeEvent.keyCode] || \"Unidentified\"\n          : \"\";\n    },\n    code: 0,\n    location: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    altKey: 0,\n    metaKey: 0,\n    repeat: 0,\n    locale: 0,\n    getModifierState: getEventModifierState,\n    charCode: function (event) {\n      return \"keypress\" === event.type ? getEventCharCode(event) : 0;\n    },\n    keyCode: function (event) {\n      return \"keydown\" === event.type || \"keyup\" === event.type\n        ? event.keyCode\n        : 0;\n    },\n    which: function (event) {\n      return \"keypress\" === event.type\n        ? getEventCharCode(event)\n        : \"keydown\" === event.type || \"keyup\" === event.type\n          ? event.keyCode\n          : 0;\n    }\n  }),\n  SyntheticKeyboardEvent = createSyntheticEvent(KeyboardEventInterface),\n  PointerEventInterface = assign({}, MouseEventInterface, {\n    pointerId: 0,\n    width: 0,\n    height: 0,\n    pressure: 0,\n    tangentialPressure: 0,\n    tiltX: 0,\n    tiltY: 0,\n    twist: 0,\n    pointerType: 0,\n    isPrimary: 0\n  }),\n  SyntheticPointerEvent = createSyntheticEvent(PointerEventInterface),\n  TouchEventInterface = assign({}, UIEventInterface, {\n    touches: 0,\n    targetTouches: 0,\n    changedTouches: 0,\n    altKey: 0,\n    metaKey: 0,\n    ctrlKey: 0,\n    shiftKey: 0,\n    getModifierState: getEventModifierState\n  }),\n  SyntheticTouchEvent = createSyntheticEvent(TouchEventInterface),\n  TransitionEventInterface = assign({}, EventInterface, {\n    propertyName: 0,\n    elapsedTime: 0,\n    pseudoElement: 0\n  }),\n  SyntheticTransitionEvent = createSyntheticEvent(TransitionEventInterface),\n  WheelEventInterface = assign({}, MouseEventInterface, {\n    deltaX: function (event) {\n      return \"deltaX\" in event\n        ? event.deltaX\n        : \"wheelDeltaX\" in event\n          ? -event.wheelDeltaX\n          : 0;\n    },\n    deltaY: function (event) {\n      return \"deltaY\" in event\n        ? event.deltaY\n        : \"wheelDeltaY\" in event\n          ? -event.wheelDeltaY\n          : \"wheelDelta\" in event\n            ? -event.wheelDelta\n            : 0;\n    },\n    deltaZ: 0,\n    deltaMode: 0\n  }),\n  SyntheticWheelEvent = createSyntheticEvent(WheelEventInterface),\n  ToggleEventInterface = assign({}, EventInterface, {\n    newState: 0,\n    oldState: 0\n  }),\n  SyntheticToggleEvent = createSyntheticEvent(ToggleEventInterface),\n  END_KEYCODES = [9, 13, 27, 32],\n  canUseCompositionEvent = canUseDOM && \"CompositionEvent\" in window,\n  documentMode = null;\ncanUseDOM &&\n  \"documentMode\" in document &&\n  (documentMode = document.documentMode);\nvar canUseTextInputEvent = canUseDOM && \"TextEvent\" in window && !documentMode,\n  useFallbackCompositionData =\n    canUseDOM &&\n    (!canUseCompositionEvent ||\n      (documentMode && 8 < documentMode && 11 >= documentMode)),\n  SPACEBAR_CHAR = String.fromCharCode(32),\n  hasSpaceKeypress = !1;\nfunction isFallbackCompositionEnd(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"keyup\":\n      return -1 !== END_KEYCODES.indexOf(nativeEvent.keyCode);\n    case \"keydown\":\n      return 229 !== nativeEvent.keyCode;\n    case \"keypress\":\n    case \"mousedown\":\n    case \"focusout\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction getDataFromCustomEvent(nativeEvent) {\n  nativeEvent = nativeEvent.detail;\n  return \"object\" === typeof nativeEvent && \"data\" in nativeEvent\n    ? nativeEvent.data\n    : null;\n}\nvar isComposing = !1;\nfunction getNativeBeforeInputChars(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"compositionend\":\n      return getDataFromCustomEvent(nativeEvent);\n    case \"keypress\":\n      if (32 !== nativeEvent.which) return null;\n      hasSpaceKeypress = !0;\n      return SPACEBAR_CHAR;\n    case \"textInput\":\n      return (\n        (domEventName = nativeEvent.data),\n        domEventName === SPACEBAR_CHAR && hasSpaceKeypress ? null : domEventName\n      );\n    default:\n      return null;\n  }\n}\nfunction getFallbackBeforeInputChars(domEventName, nativeEvent) {\n  if (isComposing)\n    return \"compositionend\" === domEventName ||\n      (!canUseCompositionEvent &&\n        isFallbackCompositionEnd(domEventName, nativeEvent))\n      ? ((domEventName = getData()),\n        (fallbackText = startText = root = null),\n        (isComposing = !1),\n        domEventName)\n      : null;\n  switch (domEventName) {\n    case \"paste\":\n      return null;\n    case \"keypress\":\n      if (\n        !(nativeEvent.ctrlKey || nativeEvent.altKey || nativeEvent.metaKey) ||\n        (nativeEvent.ctrlKey && nativeEvent.altKey)\n      ) {\n        if (nativeEvent.char && 1 < nativeEvent.char.length)\n          return nativeEvent.char;\n        if (nativeEvent.which) return String.fromCharCode(nativeEvent.which);\n      }\n      return null;\n    case \"compositionend\":\n      return useFallbackCompositionData && \"ko\" !== nativeEvent.locale\n        ? null\n        : nativeEvent.data;\n    default:\n      return null;\n  }\n}\nvar supportedInputTypes = {\n  color: !0,\n  date: !0,\n  datetime: !0,\n  \"datetime-local\": !0,\n  email: !0,\n  month: !0,\n  number: !0,\n  password: !0,\n  range: !0,\n  search: !0,\n  tel: !0,\n  text: !0,\n  time: !0,\n  url: !0,\n  week: !0\n};\nfunction isTextInputElement(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return \"input\" === nodeName\n    ? !!supportedInputTypes[elem.type]\n    : \"textarea\" === nodeName\n      ? !0\n      : !1;\n}\nfunction createAndAccumulateChangeEvent(\n  dispatchQueue,\n  inst,\n  nativeEvent,\n  target\n) {\n  restoreTarget\n    ? restoreQueue\n      ? restoreQueue.push(target)\n      : (restoreQueue = [target])\n    : (restoreTarget = target);\n  inst = accumulateTwoPhaseListeners(inst, \"onChange\");\n  0 < inst.length &&\n    ((nativeEvent = new SyntheticEvent(\n      \"onChange\",\n      \"change\",\n      null,\n      nativeEvent,\n      target\n    )),\n    dispatchQueue.push({ event: nativeEvent, listeners: inst }));\n}\nvar activeElement$1 = null,\n  activeElementInst$1 = null;\nfunction runEventInBatch(dispatchQueue) {\n  processDispatchQueue(dispatchQueue, 0);\n}\nfunction getInstIfValueChanged(targetInst) {\n  var targetNode = getNodeFromInstance(targetInst);\n  if (updateValueIfChanged(targetNode)) return targetInst;\n}\nfunction getTargetInstForChangeEvent(domEventName, targetInst) {\n  if (\"change\" === domEventName) return targetInst;\n}\nvar isInputEventSupported = !1;\nif (canUseDOM) {\n  var JSCompiler_inline_result$jscomp$286;\n  if (canUseDOM) {\n    var isSupported$jscomp$inline_427 = \"oninput\" in document;\n    if (!isSupported$jscomp$inline_427) {\n      var element$jscomp$inline_428 = document.createElement(\"div\");\n      element$jscomp$inline_428.setAttribute(\"oninput\", \"return;\");\n      isSupported$jscomp$inline_427 =\n        \"function\" === typeof element$jscomp$inline_428.oninput;\n    }\n    JSCompiler_inline_result$jscomp$286 = isSupported$jscomp$inline_427;\n  } else JSCompiler_inline_result$jscomp$286 = !1;\n  isInputEventSupported =\n    JSCompiler_inline_result$jscomp$286 &&\n    (!document.documentMode || 9 < document.documentMode);\n}\nfunction stopWatchingForValueChange() {\n  activeElement$1 &&\n    (activeElement$1.detachEvent(\"onpropertychange\", handlePropertyChange),\n    (activeElementInst$1 = activeElement$1 = null));\n}\nfunction handlePropertyChange(nativeEvent) {\n  if (\n    \"value\" === nativeEvent.propertyName &&\n    getInstIfValueChanged(activeElementInst$1)\n  ) {\n    var dispatchQueue = [];\n    createAndAccumulateChangeEvent(\n      dispatchQueue,\n      activeElementInst$1,\n      nativeEvent,\n      getEventTarget(nativeEvent)\n    );\n    batchedUpdates$1(runEventInBatch, dispatchQueue);\n  }\n}\nfunction handleEventsForInputEventPolyfill(domEventName, target, targetInst) {\n  \"focusin\" === domEventName\n    ? (stopWatchingForValueChange(),\n      (activeElement$1 = target),\n      (activeElementInst$1 = targetInst),\n      activeElement$1.attachEvent(\"onpropertychange\", handlePropertyChange))\n    : \"focusout\" === domEventName && stopWatchingForValueChange();\n}\nfunction getTargetInstForInputEventPolyfill(domEventName) {\n  if (\n    \"selectionchange\" === domEventName ||\n    \"keyup\" === domEventName ||\n    \"keydown\" === domEventName\n  )\n    return getInstIfValueChanged(activeElementInst$1);\n}\nfunction getTargetInstForClickEvent(domEventName, targetInst) {\n  if (\"click\" === domEventName) return getInstIfValueChanged(targetInst);\n}\nfunction getTargetInstForInputOrChangeEvent(domEventName, targetInst) {\n  if (\"input\" === domEventName || \"change\" === domEventName)\n    return getInstIfValueChanged(targetInst);\n}\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is;\nfunction shallowEqual(objA, objB) {\n  if (objectIs(objA, objB)) return !0;\n  if (\n    \"object\" !== typeof objA ||\n    null === objA ||\n    \"object\" !== typeof objB ||\n    null === objB\n  )\n    return !1;\n  var keysA = Object.keys(objA),\n    keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return !1;\n  for (keysB = 0; keysB < keysA.length; keysB++) {\n    var currentKey = keysA[keysB];\n    if (\n      !hasOwnProperty.call(objB, currentKey) ||\n      !objectIs(objA[currentKey], objB[currentKey])\n    )\n      return !1;\n  }\n  return !0;\n}\nfunction getLeafNode(node) {\n  for (; node && node.firstChild; ) node = node.firstChild;\n  return node;\n}\nfunction getNodeForCharacterOffset(root, offset) {\n  var node = getLeafNode(root);\n  root = 0;\n  for (var nodeEnd; node; ) {\n    if (3 === node.nodeType) {\n      nodeEnd = root + node.textContent.length;\n      if (root <= offset && nodeEnd >= offset)\n        return { node: node, offset: offset - root };\n      root = nodeEnd;\n    }\n    a: {\n      for (; node; ) {\n        if (node.nextSibling) {\n          node = node.nextSibling;\n          break a;\n        }\n        node = node.parentNode;\n      }\n      node = void 0;\n    }\n    node = getLeafNode(node);\n  }\n}\nfunction containsNode(outerNode, innerNode) {\n  return outerNode && innerNode\n    ? outerNode === innerNode\n      ? !0\n      : outerNode && 3 === outerNode.nodeType\n        ? !1\n        : innerNode && 3 === innerNode.nodeType\n          ? containsNode(outerNode, innerNode.parentNode)\n          : \"contains\" in outerNode\n            ? outerNode.contains(innerNode)\n            : outerNode.compareDocumentPosition\n              ? !!(outerNode.compareDocumentPosition(innerNode) & 16)\n              : !1\n    : !1;\n}\nfunction getActiveElementDeep(containerInfo) {\n  containerInfo =\n    null != containerInfo &&\n    null != containerInfo.ownerDocument &&\n    null != containerInfo.ownerDocument.defaultView\n      ? containerInfo.ownerDocument.defaultView\n      : window;\n  for (\n    var element = getActiveElement(containerInfo.document);\n    element instanceof containerInfo.HTMLIFrameElement;\n\n  ) {\n    try {\n      var JSCompiler_inline_result =\n        \"string\" === typeof element.contentWindow.location.href;\n    } catch (err) {\n      JSCompiler_inline_result = !1;\n    }\n    if (JSCompiler_inline_result) containerInfo = element.contentWindow;\n    else break;\n    element = getActiveElement(containerInfo.document);\n  }\n  return element;\n}\nfunction hasSelectionCapabilities(elem) {\n  var nodeName = elem && elem.nodeName && elem.nodeName.toLowerCase();\n  return (\n    nodeName &&\n    ((\"input\" === nodeName &&\n      (\"text\" === elem.type ||\n        \"search\" === elem.type ||\n        \"tel\" === elem.type ||\n        \"url\" === elem.type ||\n        \"password\" === elem.type)) ||\n      \"textarea\" === nodeName ||\n      \"true\" === elem.contentEditable)\n  );\n}\nvar skipSelectionChangeEvent =\n    canUseDOM && \"documentMode\" in document && 11 >= document.documentMode,\n  activeElement = null,\n  activeElementInst = null,\n  lastSelection = null,\n  mouseDown = !1;\nfunction constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget) {\n  var doc =\n    nativeEventTarget.window === nativeEventTarget\n      ? nativeEventTarget.document\n      : 9 === nativeEventTarget.nodeType\n        ? nativeEventTarget\n        : nativeEventTarget.ownerDocument;\n  mouseDown ||\n    null == activeElement ||\n    activeElement !== getActiveElement(doc) ||\n    ((doc = activeElement),\n    \"selectionStart\" in doc && hasSelectionCapabilities(doc)\n      ? (doc = { start: doc.selectionStart, end: doc.selectionEnd })\n      : ((doc = (\n          (doc.ownerDocument && doc.ownerDocument.defaultView) ||\n          window\n        ).getSelection()),\n        (doc = {\n          anchorNode: doc.anchorNode,\n          anchorOffset: doc.anchorOffset,\n          focusNode: doc.focusNode,\n          focusOffset: doc.focusOffset\n        })),\n    (lastSelection && shallowEqual(lastSelection, doc)) ||\n      ((lastSelection = doc),\n      (doc = accumulateTwoPhaseListeners(activeElementInst, \"onSelect\")),\n      0 < doc.length &&\n        ((nativeEvent = new SyntheticEvent(\n          \"onSelect\",\n          \"select\",\n          null,\n          nativeEvent,\n          nativeEventTarget\n        )),\n        dispatchQueue.push({ event: nativeEvent, listeners: doc }),\n        (nativeEvent.target = activeElement))));\n}\nfunction makePrefixMap(styleProp, eventName) {\n  var prefixes = {};\n  prefixes[styleProp.toLowerCase()] = eventName.toLowerCase();\n  prefixes[\"Webkit\" + styleProp] = \"webkit\" + eventName;\n  prefixes[\"Moz\" + styleProp] = \"moz\" + eventName;\n  return prefixes;\n}\nvar vendorPrefixes = {\n    animationend: makePrefixMap(\"Animation\", \"AnimationEnd\"),\n    animationiteration: makePrefixMap(\"Animation\", \"AnimationIteration\"),\n    animationstart: makePrefixMap(\"Animation\", \"AnimationStart\"),\n    transitionrun: makePrefixMap(\"Transition\", \"TransitionRun\"),\n    transitionstart: makePrefixMap(\"Transition\", \"TransitionStart\"),\n    transitioncancel: makePrefixMap(\"Transition\", \"TransitionCancel\"),\n    transitionend: makePrefixMap(\"Transition\", \"TransitionEnd\")\n  },\n  prefixedEventNames = {},\n  style = {};\ncanUseDOM &&\n  ((style = document.createElement(\"div\").style),\n  \"AnimationEvent\" in window ||\n    (delete vendorPrefixes.animationend.animation,\n    delete vendorPrefixes.animationiteration.animation,\n    delete vendorPrefixes.animationstart.animation),\n  \"TransitionEvent\" in window ||\n    delete vendorPrefixes.transitionend.transition);\nfunction getVendorPrefixedEventName(eventName) {\n  if (prefixedEventNames[eventName]) return prefixedEventNames[eventName];\n  if (!vendorPrefixes[eventName]) return eventName;\n  var prefixMap = vendorPrefixes[eventName],\n    styleProp;\n  for (styleProp in prefixMap)\n    if (prefixMap.hasOwnProperty(styleProp) && styleProp in style)\n      return (prefixedEventNames[eventName] = prefixMap[styleProp]);\n  return eventName;\n}\nvar ANIMATION_END = getVendorPrefixedEventName(\"animationend\"),\n  ANIMATION_ITERATION = getVendorPrefixedEventName(\"animationiteration\"),\n  ANIMATION_START = getVendorPrefixedEventName(\"animationstart\"),\n  TRANSITION_RUN = getVendorPrefixedEventName(\"transitionrun\"),\n  TRANSITION_START = getVendorPrefixedEventName(\"transitionstart\"),\n  TRANSITION_CANCEL = getVendorPrefixedEventName(\"transitioncancel\"),\n  TRANSITION_END = getVendorPrefixedEventName(\"transitionend\"),\n  topLevelEventsToReactNames = new Map(),\n  simpleEventPluginEvents =\n    \"abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\n      \" \"\n    );\nsimpleEventPluginEvents.push(\"scrollEnd\");\nfunction registerSimpleEvent(domEventName, reactName) {\n  topLevelEventsToReactNames.set(domEventName, reactName);\n  registerTwoPhaseEvent(reactName, [domEventName]);\n}\nvar reportGlobalError =\n    \"function\" === typeof reportError\n      ? reportError\n      : function (error) {\n          if (\n            \"object\" === typeof window &&\n            \"function\" === typeof window.ErrorEvent\n          ) {\n            var event = new window.ErrorEvent(\"error\", {\n              bubbles: !0,\n              cancelable: !0,\n              message:\n                \"object\" === typeof error &&\n                null !== error &&\n                \"string\" === typeof error.message\n                  ? String(error.message)\n                  : String(error),\n              error: error\n            });\n            if (!window.dispatchEvent(event)) return;\n          } else if (\n            \"object\" === typeof process &&\n            \"function\" === typeof process.emit\n          ) {\n            process.emit(\"uncaughtException\", error);\n            return;\n          }\n          console.error(error);\n        },\n  concurrentQueues = [],\n  concurrentQueuesIndex = 0,\n  concurrentlyUpdatedLanes = 0;\nfunction finishQueueingConcurrentUpdates() {\n  for (\n    var endIndex = concurrentQueuesIndex,\n      i = (concurrentlyUpdatedLanes = concurrentQueuesIndex = 0);\n    i < endIndex;\n\n  ) {\n    var fiber = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var queue = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var update = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    var lane = concurrentQueues[i];\n    concurrentQueues[i++] = null;\n    if (null !== queue && null !== update) {\n      var pending = queue.pending;\n      null === pending\n        ? (update.next = update)\n        : ((update.next = pending.next), (pending.next = update));\n      queue.pending = update;\n    }\n    0 !== lane && markUpdateLaneFromFiberToRoot(fiber, update, lane);\n  }\n}\nfunction enqueueUpdate$1(fiber, queue, update, lane) {\n  concurrentQueues[concurrentQueuesIndex++] = fiber;\n  concurrentQueues[concurrentQueuesIndex++] = queue;\n  concurrentQueues[concurrentQueuesIndex++] = update;\n  concurrentQueues[concurrentQueuesIndex++] = lane;\n  concurrentlyUpdatedLanes |= lane;\n  fiber.lanes |= lane;\n  fiber = fiber.alternate;\n  null !== fiber && (fiber.lanes |= lane);\n}\nfunction enqueueConcurrentHookUpdate(fiber, queue, update, lane) {\n  enqueueUpdate$1(fiber, queue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction enqueueConcurrentRenderForLane(fiber, lane) {\n  enqueueUpdate$1(fiber, null, null, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction markUpdateLaneFromFiberToRoot(sourceFiber, update, lane) {\n  sourceFiber.lanes |= lane;\n  var alternate = sourceFiber.alternate;\n  null !== alternate && (alternate.lanes |= lane);\n  for (var isHidden = !1, parent = sourceFiber.return; null !== parent; )\n    (parent.childLanes |= lane),\n      (alternate = parent.alternate),\n      null !== alternate && (alternate.childLanes |= lane),\n      22 === parent.tag &&\n        ((sourceFiber = parent.stateNode),\n        null === sourceFiber || sourceFiber._visibility & 1 || (isHidden = !0)),\n      (sourceFiber = parent),\n      (parent = parent.return);\n  return 3 === sourceFiber.tag\n    ? ((parent = sourceFiber.stateNode),\n      isHidden &&\n        null !== update &&\n        ((isHidden = 31 - clz32(lane)),\n        (sourceFiber = parent.hiddenUpdates),\n        (alternate = sourceFiber[isHidden]),\n        null === alternate\n          ? (sourceFiber[isHidden] = [update])\n          : alternate.push(update),\n        (update.lane = lane | 536870912)),\n      parent)\n    : null;\n}\nfunction getRootForUpdatedFiber(sourceFiber) {\n  if (50 < nestedUpdateCount)\n    throw (\n      ((nestedUpdateCount = 0),\n      (rootWithNestedUpdates = null),\n      Error(formatProdErrorMessage(185)))\n    );\n  for (var parent = sourceFiber.return; null !== parent; )\n    (sourceFiber = parent), (parent = sourceFiber.return);\n  return 3 === sourceFiber.tag ? sourceFiber.stateNode : null;\n}\nvar emptyContextObject = {};\nfunction FiberNode(tag, pendingProps, key, mode) {\n  this.tag = tag;\n  this.key = key;\n  this.sibling =\n    this.child =\n    this.return =\n    this.stateNode =\n    this.type =\n    this.elementType =\n      null;\n  this.index = 0;\n  this.refCleanup = this.ref = null;\n  this.pendingProps = pendingProps;\n  this.dependencies =\n    this.memoizedState =\n    this.updateQueue =\n    this.memoizedProps =\n      null;\n  this.mode = mode;\n  this.subtreeFlags = this.flags = 0;\n  this.deletions = null;\n  this.childLanes = this.lanes = 0;\n  this.alternate = null;\n}\nfunction createFiberImplClass(tag, pendingProps, key, mode) {\n  return new FiberNode(tag, pendingProps, key, mode);\n}\nfunction shouldConstruct(Component) {\n  Component = Component.prototype;\n  return !(!Component || !Component.isReactComponent);\n}\nfunction createWorkInProgress(current, pendingProps) {\n  var workInProgress = current.alternate;\n  null === workInProgress\n    ? ((workInProgress = createFiberImplClass(\n        current.tag,\n        pendingProps,\n        current.key,\n        current.mode\n      )),\n      (workInProgress.elementType = current.elementType),\n      (workInProgress.type = current.type),\n      (workInProgress.stateNode = current.stateNode),\n      (workInProgress.alternate = current),\n      (current.alternate = workInProgress))\n    : ((workInProgress.pendingProps = pendingProps),\n      (workInProgress.type = current.type),\n      (workInProgress.flags = 0),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null));\n  workInProgress.flags = current.flags & 65011712;\n  workInProgress.childLanes = current.childLanes;\n  workInProgress.lanes = current.lanes;\n  workInProgress.child = current.child;\n  workInProgress.memoizedProps = current.memoizedProps;\n  workInProgress.memoizedState = current.memoizedState;\n  workInProgress.updateQueue = current.updateQueue;\n  pendingProps = current.dependencies;\n  workInProgress.dependencies =\n    null === pendingProps\n      ? null\n      : { lanes: pendingProps.lanes, firstContext: pendingProps.firstContext };\n  workInProgress.sibling = current.sibling;\n  workInProgress.index = current.index;\n  workInProgress.ref = current.ref;\n  workInProgress.refCleanup = current.refCleanup;\n  return workInProgress;\n}\nfunction resetWorkInProgress(workInProgress, renderLanes) {\n  workInProgress.flags &= 65011714;\n  var current = workInProgress.alternate;\n  null === current\n    ? ((workInProgress.childLanes = 0),\n      (workInProgress.lanes = renderLanes),\n      (workInProgress.child = null),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.memoizedProps = null),\n      (workInProgress.memoizedState = null),\n      (workInProgress.updateQueue = null),\n      (workInProgress.dependencies = null),\n      (workInProgress.stateNode = null))\n    : ((workInProgress.childLanes = current.childLanes),\n      (workInProgress.lanes = current.lanes),\n      (workInProgress.child = current.child),\n      (workInProgress.subtreeFlags = 0),\n      (workInProgress.deletions = null),\n      (workInProgress.memoizedProps = current.memoizedProps),\n      (workInProgress.memoizedState = current.memoizedState),\n      (workInProgress.updateQueue = current.updateQueue),\n      (workInProgress.type = current.type),\n      (renderLanes = current.dependencies),\n      (workInProgress.dependencies =\n        null === renderLanes\n          ? null\n          : {\n              lanes: renderLanes.lanes,\n              firstContext: renderLanes.firstContext\n            }));\n  return workInProgress;\n}\nfunction createFiberFromTypeAndProps(\n  type,\n  key,\n  pendingProps,\n  owner,\n  mode,\n  lanes\n) {\n  var fiberTag = 0;\n  owner = type;\n  if (\"function\" === typeof type) shouldConstruct(type) && (fiberTag = 1);\n  else if (\"string\" === typeof type)\n    fiberTag = isHostHoistableType(\n      type,\n      pendingProps,\n      contextStackCursor.current\n    )\n      ? 26\n      : \"html\" === type || \"head\" === type || \"body\" === type\n        ? 27\n        : 5;\n  else\n    a: switch (type) {\n      case REACT_ACTIVITY_TYPE:\n        return (\n          (type = createFiberImplClass(31, pendingProps, key, mode)),\n          (type.elementType = REACT_ACTIVITY_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_FRAGMENT_TYPE:\n        return createFiberFromFragment(pendingProps.children, mode, lanes, key);\n      case REACT_STRICT_MODE_TYPE:\n        fiberTag = 8;\n        mode |= 24;\n        break;\n      case REACT_PROFILER_TYPE:\n        return (\n          (type = createFiberImplClass(12, pendingProps, key, mode | 2)),\n          (type.elementType = REACT_PROFILER_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_TYPE:\n        return (\n          (type = createFiberImplClass(13, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      case REACT_SUSPENSE_LIST_TYPE:\n        return (\n          (type = createFiberImplClass(19, pendingProps, key, mode)),\n          (type.elementType = REACT_SUSPENSE_LIST_TYPE),\n          (type.lanes = lanes),\n          type\n        );\n      default:\n        if (\"object\" === typeof type && null !== type)\n          switch (type.$$typeof) {\n            case REACT_CONTEXT_TYPE:\n              fiberTag = 10;\n              break a;\n            case REACT_CONSUMER_TYPE:\n              fiberTag = 9;\n              break a;\n            case REACT_FORWARD_REF_TYPE:\n              fiberTag = 11;\n              break a;\n            case REACT_MEMO_TYPE:\n              fiberTag = 14;\n              break a;\n            case REACT_LAZY_TYPE:\n              fiberTag = 16;\n              owner = null;\n              break a;\n          }\n        fiberTag = 29;\n        pendingProps = Error(\n          formatProdErrorMessage(130, null === type ? \"null\" : typeof type, \"\")\n        );\n        owner = null;\n    }\n  key = createFiberImplClass(fiberTag, pendingProps, key, mode);\n  key.elementType = type;\n  key.type = owner;\n  key.lanes = lanes;\n  return key;\n}\nfunction createFiberFromFragment(elements, mode, lanes, key) {\n  elements = createFiberImplClass(7, elements, key, mode);\n  elements.lanes = lanes;\n  return elements;\n}\nfunction createFiberFromText(content, mode, lanes) {\n  content = createFiberImplClass(6, content, null, mode);\n  content.lanes = lanes;\n  return content;\n}\nfunction createFiberFromDehydratedFragment(dehydratedNode) {\n  var fiber = createFiberImplClass(18, null, null, 0);\n  fiber.stateNode = dehydratedNode;\n  return fiber;\n}\nfunction createFiberFromPortal(portal, mode, lanes) {\n  mode = createFiberImplClass(\n    4,\n    null !== portal.children ? portal.children : [],\n    portal.key,\n    mode\n  );\n  mode.lanes = lanes;\n  mode.stateNode = {\n    containerInfo: portal.containerInfo,\n    pendingChildren: null,\n    implementation: portal.implementation\n  };\n  return mode;\n}\nvar CapturedStacks = new WeakMap();\nfunction createCapturedValueAtFiber(value, source) {\n  if (\"object\" === typeof value && null !== value) {\n    var existing = CapturedStacks.get(value);\n    if (void 0 !== existing) return existing;\n    source = {\n      value: value,\n      source: source,\n      stack: getStackByFiberInDevAndProd(source)\n    };\n    CapturedStacks.set(value, source);\n    return source;\n  }\n  return {\n    value: value,\n    source: source,\n    stack: getStackByFiberInDevAndProd(source)\n  };\n}\nvar forkStack = [],\n  forkStackIndex = 0,\n  treeForkProvider = null,\n  treeForkCount = 0,\n  idStack = [],\n  idStackIndex = 0,\n  treeContextProvider = null,\n  treeContextId = 1,\n  treeContextOverflow = \"\";\nfunction pushTreeFork(workInProgress, totalChildren) {\n  forkStack[forkStackIndex++] = treeForkCount;\n  forkStack[forkStackIndex++] = treeForkProvider;\n  treeForkProvider = workInProgress;\n  treeForkCount = totalChildren;\n}\nfunction pushTreeId(workInProgress, totalChildren, index) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextProvider = workInProgress;\n  var baseIdWithLeadingBit = treeContextId;\n  workInProgress = treeContextOverflow;\n  var baseLength = 32 - clz32(baseIdWithLeadingBit) - 1;\n  baseIdWithLeadingBit &= ~(1 << baseLength);\n  index += 1;\n  var length = 32 - clz32(totalChildren) + baseLength;\n  if (30 < length) {\n    var numberOfOverflowBits = baseLength - (baseLength % 5);\n    length = (\n      baseIdWithLeadingBit &\n      ((1 << numberOfOverflowBits) - 1)\n    ).toString(32);\n    baseIdWithLeadingBit >>= numberOfOverflowBits;\n    baseLength -= numberOfOverflowBits;\n    treeContextId =\n      (1 << (32 - clz32(totalChildren) + baseLength)) |\n      (index << baseLength) |\n      baseIdWithLeadingBit;\n    treeContextOverflow = length + workInProgress;\n  } else\n    (treeContextId =\n      (1 << length) | (index << baseLength) | baseIdWithLeadingBit),\n      (treeContextOverflow = workInProgress);\n}\nfunction pushMaterializedTreeId(workInProgress) {\n  null !== workInProgress.return &&\n    (pushTreeFork(workInProgress, 1), pushTreeId(workInProgress, 1, 0));\n}\nfunction popTreeContext(workInProgress) {\n  for (; workInProgress === treeForkProvider; )\n    (treeForkProvider = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null),\n      (treeForkCount = forkStack[--forkStackIndex]),\n      (forkStack[forkStackIndex] = null);\n  for (; workInProgress === treeContextProvider; )\n    (treeContextProvider = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextOverflow = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null),\n      (treeContextId = idStack[--idStackIndex]),\n      (idStack[idStackIndex] = null);\n}\nfunction restoreSuspendedTreeContext(workInProgress, suspendedContext) {\n  idStack[idStackIndex++] = treeContextId;\n  idStack[idStackIndex++] = treeContextOverflow;\n  idStack[idStackIndex++] = treeContextProvider;\n  treeContextId = suspendedContext.id;\n  treeContextOverflow = suspendedContext.overflow;\n  treeContextProvider = workInProgress;\n}\nvar hydrationParentFiber = null,\n  nextHydratableInstance = null,\n  isHydrating = !1,\n  hydrationErrors = null,\n  rootOrSingletonContext = !1,\n  HydrationMismatchException = Error(formatProdErrorMessage(519));\nfunction throwOnHydrationMismatch(fiber) {\n  var error = Error(\n    formatProdErrorMessage(\n      418,\n      1 < arguments.length && void 0 !== arguments[1] && arguments[1]\n        ? \"text\"\n        : \"HTML\",\n      \"\"\n    )\n  );\n  queueHydrationError(createCapturedValueAtFiber(error, fiber));\n  throw HydrationMismatchException;\n}\nfunction prepareToHydrateHostInstance(fiber) {\n  var instance = fiber.stateNode,\n    type = fiber.type,\n    props = fiber.memoizedProps;\n  instance[internalInstanceKey] = fiber;\n  instance[internalPropsKey] = props;\n  switch (type) {\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"cancel\", instance);\n      listenToNonDelegatedEvent(\"close\", instance);\n      break;\n    case \"iframe\":\n    case \"object\":\n    case \"embed\":\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (type = 0; type < mediaEventTypes.length; type++)\n        listenToNonDelegatedEvent(mediaEventTypes[type], instance);\n      break;\n    case \"source\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      break;\n    case \"img\":\n    case \"image\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", instance);\n      listenToNonDelegatedEvent(\"load\", instance);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", instance);\n      break;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      initInput(\n        instance,\n        props.value,\n        props.defaultValue,\n        props.checked,\n        props.defaultChecked,\n        props.type,\n        props.name,\n        !0\n      );\n      break;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", instance);\n      break;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", instance),\n        initTextarea(instance, props.value, props.defaultValue, props.children);\n  }\n  type = props.children;\n  (\"string\" !== typeof type &&\n    \"number\" !== typeof type &&\n    \"bigint\" !== typeof type) ||\n  instance.textContent === \"\" + type ||\n  !0 === props.suppressHydrationWarning ||\n  checkForUnmatchedText(instance.textContent, type)\n    ? (null != props.popover &&\n        (listenToNonDelegatedEvent(\"beforetoggle\", instance),\n        listenToNonDelegatedEvent(\"toggle\", instance)),\n      null != props.onScroll && listenToNonDelegatedEvent(\"scroll\", instance),\n      null != props.onScrollEnd &&\n        listenToNonDelegatedEvent(\"scrollend\", instance),\n      null != props.onClick && (instance.onclick = noop$1),\n      (instance = !0))\n    : (instance = !1);\n  instance || throwOnHydrationMismatch(fiber, !0);\n}\nfunction popToNextHostParent(fiber) {\n  for (hydrationParentFiber = fiber.return; hydrationParentFiber; )\n    switch (hydrationParentFiber.tag) {\n      case 5:\n      case 31:\n      case 13:\n        rootOrSingletonContext = !1;\n        return;\n      case 27:\n      case 3:\n        rootOrSingletonContext = !0;\n        return;\n      default:\n        hydrationParentFiber = hydrationParentFiber.return;\n    }\n}\nfunction popHydrationState(fiber) {\n  if (fiber !== hydrationParentFiber) return !1;\n  if (!isHydrating) return popToNextHostParent(fiber), (isHydrating = !0), !1;\n  var tag = fiber.tag,\n    JSCompiler_temp;\n  if ((JSCompiler_temp = 3 !== tag && 27 !== tag)) {\n    if ((JSCompiler_temp = 5 === tag))\n      (JSCompiler_temp = fiber.type),\n        (JSCompiler_temp =\n          !(\"form\" !== JSCompiler_temp && \"button\" !== JSCompiler_temp) ||\n          shouldSetTextContent(fiber.type, fiber.memoizedProps));\n    JSCompiler_temp = !JSCompiler_temp;\n  }\n  JSCompiler_temp && nextHydratableInstance && throwOnHydrationMismatch(fiber);\n  popToNextHostParent(fiber);\n  if (13 === tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    nextHydratableInstance =\n      getNextHydratableInstanceAfterHydrationBoundary(fiber);\n  } else if (31 === tag) {\n    fiber = fiber.memoizedState;\n    fiber = null !== fiber ? fiber.dehydrated : null;\n    if (!fiber) throw Error(formatProdErrorMessage(317));\n    nextHydratableInstance =\n      getNextHydratableInstanceAfterHydrationBoundary(fiber);\n  } else\n    27 === tag\n      ? ((tag = nextHydratableInstance),\n        isSingletonScope(fiber.type)\n          ? ((fiber = previousHydratableOnEnteringScopedSingleton),\n            (previousHydratableOnEnteringScopedSingleton = null),\n            (nextHydratableInstance = fiber))\n          : (nextHydratableInstance = tag))\n      : (nextHydratableInstance = hydrationParentFiber\n          ? getNextHydratable(fiber.stateNode.nextSibling)\n          : null);\n  return !0;\n}\nfunction resetHydrationState() {\n  nextHydratableInstance = hydrationParentFiber = null;\n  isHydrating = !1;\n}\nfunction upgradeHydrationErrorsToRecoverable() {\n  var queuedErrors = hydrationErrors;\n  null !== queuedErrors &&\n    (null === workInProgressRootRecoverableErrors\n      ? (workInProgressRootRecoverableErrors = queuedErrors)\n      : workInProgressRootRecoverableErrors.push.apply(\n          workInProgressRootRecoverableErrors,\n          queuedErrors\n        ),\n    (hydrationErrors = null));\n  return queuedErrors;\n}\nfunction queueHydrationError(error) {\n  null === hydrationErrors\n    ? (hydrationErrors = [error])\n    : hydrationErrors.push(error);\n}\nvar valueCursor = createCursor(null),\n  currentlyRenderingFiber$1 = null,\n  lastContextDependency = null;\nfunction pushProvider(providerFiber, context, nextValue) {\n  push(valueCursor, context._currentValue);\n  context._currentValue = nextValue;\n}\nfunction popProvider(context) {\n  context._currentValue = valueCursor.current;\n  pop(valueCursor);\n}\nfunction scheduleContextWorkOnParentPath(parent, renderLanes, propagationRoot) {\n  for (; null !== parent; ) {\n    var alternate = parent.alternate;\n    (parent.childLanes & renderLanes) !== renderLanes\n      ? ((parent.childLanes |= renderLanes),\n        null !== alternate && (alternate.childLanes |= renderLanes))\n      : null !== alternate &&\n        (alternate.childLanes & renderLanes) !== renderLanes &&\n        (alternate.childLanes |= renderLanes);\n    if (parent === propagationRoot) break;\n    parent = parent.return;\n  }\n}\nfunction propagateContextChanges(\n  workInProgress,\n  contexts,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  var fiber = workInProgress.child;\n  null !== fiber && (fiber.return = workInProgress);\n  for (; null !== fiber; ) {\n    var list = fiber.dependencies;\n    if (null !== list) {\n      var nextFiber = fiber.child;\n      list = list.firstContext;\n      a: for (; null !== list; ) {\n        var dependency = list;\n        list = fiber;\n        for (var i = 0; i < contexts.length; i++)\n          if (dependency.context === contexts[i]) {\n            list.lanes |= renderLanes;\n            dependency = list.alternate;\n            null !== dependency && (dependency.lanes |= renderLanes);\n            scheduleContextWorkOnParentPath(\n              list.return,\n              renderLanes,\n              workInProgress\n            );\n            forcePropagateEntireTree || (nextFiber = null);\n            break a;\n          }\n        list = dependency.next;\n      }\n    } else if (18 === fiber.tag) {\n      nextFiber = fiber.return;\n      if (null === nextFiber) throw Error(formatProdErrorMessage(341));\n      nextFiber.lanes |= renderLanes;\n      list = nextFiber.alternate;\n      null !== list && (list.lanes |= renderLanes);\n      scheduleContextWorkOnParentPath(nextFiber, renderLanes, workInProgress);\n      nextFiber = null;\n    } else nextFiber = fiber.child;\n    if (null !== nextFiber) nextFiber.return = fiber;\n    else\n      for (nextFiber = fiber; null !== nextFiber; ) {\n        if (nextFiber === workInProgress) {\n          nextFiber = null;\n          break;\n        }\n        fiber = nextFiber.sibling;\n        if (null !== fiber) {\n          fiber.return = nextFiber.return;\n          nextFiber = fiber;\n          break;\n        }\n        nextFiber = nextFiber.return;\n      }\n    fiber = nextFiber;\n  }\n}\nfunction propagateParentContextChanges(\n  current,\n  workInProgress,\n  renderLanes,\n  forcePropagateEntireTree\n) {\n  current = null;\n  for (\n    var parent = workInProgress, isInsidePropagationBailout = !1;\n    null !== parent;\n\n  ) {\n    if (!isInsidePropagationBailout)\n      if (0 !== (parent.flags & 524288)) isInsidePropagationBailout = !0;\n      else if (0 !== (parent.flags & 262144)) break;\n    if (10 === parent.tag) {\n      var currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent = currentParent.memoizedProps;\n      if (null !== currentParent) {\n        var context = parent.type;\n        objectIs(parent.pendingProps.value, currentParent.value) ||\n          (null !== current ? current.push(context) : (current = [context]));\n      }\n    } else if (parent === hostTransitionProviderCursor.current) {\n      currentParent = parent.alternate;\n      if (null === currentParent) throw Error(formatProdErrorMessage(387));\n      currentParent.memoizedState.memoizedState !==\n        parent.memoizedState.memoizedState &&\n        (null !== current\n          ? current.push(HostTransitionContext)\n          : (current = [HostTransitionContext]));\n    }\n    parent = parent.return;\n  }\n  null !== current &&\n    propagateContextChanges(\n      workInProgress,\n      current,\n      renderLanes,\n      forcePropagateEntireTree\n    );\n  workInProgress.flags |= 262144;\n}\nfunction checkIfContextChanged(currentDependencies) {\n  for (\n    currentDependencies = currentDependencies.firstContext;\n    null !== currentDependencies;\n\n  ) {\n    if (\n      !objectIs(\n        currentDependencies.context._currentValue,\n        currentDependencies.memoizedValue\n      )\n    )\n      return !0;\n    currentDependencies = currentDependencies.next;\n  }\n  return !1;\n}\nfunction prepareToReadContext(workInProgress) {\n  currentlyRenderingFiber$1 = workInProgress;\n  lastContextDependency = null;\n  workInProgress = workInProgress.dependencies;\n  null !== workInProgress && (workInProgress.firstContext = null);\n}\nfunction readContext(context) {\n  return readContextForConsumer(currentlyRenderingFiber$1, context);\n}\nfunction readContextDuringReconciliation(consumer, context) {\n  null === currentlyRenderingFiber$1 && prepareToReadContext(consumer);\n  return readContextForConsumer(consumer, context);\n}\nfunction readContextForConsumer(consumer, context) {\n  var value = context._currentValue;\n  context = { context: context, memoizedValue: value, next: null };\n  if (null === lastContextDependency) {\n    if (null === consumer) throw Error(formatProdErrorMessage(308));\n    lastContextDependency = context;\n    consumer.dependencies = { lanes: 0, firstContext: context };\n    consumer.flags |= 524288;\n  } else lastContextDependency = lastContextDependency.next = context;\n  return value;\n}\nvar AbortControllerLocal =\n    \"undefined\" !== typeof AbortController\n      ? AbortController\n      : function () {\n          var listeners = [],\n            signal = (this.signal = {\n              aborted: !1,\n              addEventListener: function (type, listener) {\n                listeners.push(listener);\n              }\n            });\n          this.abort = function () {\n            signal.aborted = !0;\n            listeners.forEach(function (listener) {\n              return listener();\n            });\n          };\n        },\n  scheduleCallback$2 = Scheduler.unstable_scheduleCallback,\n  NormalPriority = Scheduler.unstable_NormalPriority,\n  CacheContext = {\n    $$typeof: REACT_CONTEXT_TYPE,\n    Consumer: null,\n    Provider: null,\n    _currentValue: null,\n    _currentValue2: null,\n    _threadCount: 0\n  };\nfunction createCache() {\n  return {\n    controller: new AbortControllerLocal(),\n    data: new Map(),\n    refCount: 0\n  };\n}\nfunction releaseCache(cache) {\n  cache.refCount--;\n  0 === cache.refCount &&\n    scheduleCallback$2(NormalPriority, function () {\n      cache.controller.abort();\n    });\n}\nvar currentEntangledListeners = null,\n  currentEntangledPendingCount = 0,\n  currentEntangledLane = 0,\n  currentEntangledActionThenable = null;\nfunction entangleAsyncAction(transition, thenable) {\n  if (null === currentEntangledListeners) {\n    var entangledListeners = (currentEntangledListeners = []);\n    currentEntangledPendingCount = 0;\n    currentEntangledLane = requestTransitionLane();\n    currentEntangledActionThenable = {\n      status: \"pending\",\n      value: void 0,\n      then: function (resolve) {\n        entangledListeners.push(resolve);\n      }\n    };\n  }\n  currentEntangledPendingCount++;\n  thenable.then(pingEngtangledActionScope, pingEngtangledActionScope);\n  return thenable;\n}\nfunction pingEngtangledActionScope() {\n  if (\n    0 === --currentEntangledPendingCount &&\n    null !== currentEntangledListeners\n  ) {\n    null !== currentEntangledActionThenable &&\n      (currentEntangledActionThenable.status = \"fulfilled\");\n    var listeners = currentEntangledListeners;\n    currentEntangledListeners = null;\n    currentEntangledLane = 0;\n    currentEntangledActionThenable = null;\n    for (var i = 0; i < listeners.length; i++) (0, listeners[i])();\n  }\n}\nfunction chainThenableValue(thenable, result) {\n  var listeners = [],\n    thenableWithOverride = {\n      status: \"pending\",\n      value: null,\n      reason: null,\n      then: function (resolve) {\n        listeners.push(resolve);\n      }\n    };\n  thenable.then(\n    function () {\n      thenableWithOverride.status = \"fulfilled\";\n      thenableWithOverride.value = result;\n      for (var i = 0; i < listeners.length; i++) (0, listeners[i])(result);\n    },\n    function (error) {\n      thenableWithOverride.status = \"rejected\";\n      thenableWithOverride.reason = error;\n      for (error = 0; error < listeners.length; error++)\n        (0, listeners[error])(void 0);\n    }\n  );\n  return thenableWithOverride;\n}\nvar prevOnStartTransitionFinish = ReactSharedInternals.S;\nReactSharedInternals.S = function (transition, returnValue) {\n  globalMostRecentTransitionTime = now();\n  \"object\" === typeof returnValue &&\n    null !== returnValue &&\n    \"function\" === typeof returnValue.then &&\n    entangleAsyncAction(transition, returnValue);\n  null !== prevOnStartTransitionFinish &&\n    prevOnStartTransitionFinish(transition, returnValue);\n};\nvar resumedCache = createCursor(null);\nfunction peekCacheFromPool() {\n  var cacheResumedFromPreviousRender = resumedCache.current;\n  return null !== cacheResumedFromPreviousRender\n    ? cacheResumedFromPreviousRender\n    : workInProgressRoot.pooledCache;\n}\nfunction pushTransition(offscreenWorkInProgress, prevCachePool) {\n  null === prevCachePool\n    ? push(resumedCache, resumedCache.current)\n    : push(resumedCache, prevCachePool.pool);\n}\nfunction getSuspendedCache() {\n  var cacheFromPool = peekCacheFromPool();\n  return null === cacheFromPool\n    ? null\n    : { parent: CacheContext._currentValue, pool: cacheFromPool };\n}\nvar SuspenseException = Error(formatProdErrorMessage(460)),\n  SuspenseyCommitException = Error(formatProdErrorMessage(474)),\n  SuspenseActionException = Error(formatProdErrorMessage(542)),\n  noopSuspenseyCommitThenable = { then: function () {} };\nfunction isThenableResolved(thenable) {\n  thenable = thenable.status;\n  return \"fulfilled\" === thenable || \"rejected\" === thenable;\n}\nfunction trackUsedThenable(thenableState, thenable, index) {\n  index = thenableState[index];\n  void 0 === index\n    ? thenableState.push(thenable)\n    : index !== thenable && (thenable.then(noop$1, noop$1), (thenable = index));\n  switch (thenable.status) {\n    case \"fulfilled\":\n      return thenable.value;\n    case \"rejected\":\n      throw (\n        ((thenableState = thenable.reason),\n        checkIfUseWrappedInAsyncCatch(thenableState),\n        thenableState)\n      );\n    default:\n      if (\"string\" === typeof thenable.status) thenable.then(noop$1, noop$1);\n      else {\n        thenableState = workInProgressRoot;\n        if (null !== thenableState && 100 < thenableState.shellSuspendCounter)\n          throw Error(formatProdErrorMessage(482));\n        thenableState = thenable;\n        thenableState.status = \"pending\";\n        thenableState.then(\n          function (fulfilledValue) {\n            if (\"pending\" === thenable.status) {\n              var fulfilledThenable = thenable;\n              fulfilledThenable.status = \"fulfilled\";\n              fulfilledThenable.value = fulfilledValue;\n            }\n          },\n          function (error) {\n            if (\"pending\" === thenable.status) {\n              var rejectedThenable = thenable;\n              rejectedThenable.status = \"rejected\";\n              rejectedThenable.reason = error;\n            }\n          }\n        );\n      }\n      switch (thenable.status) {\n        case \"fulfilled\":\n          return thenable.value;\n        case \"rejected\":\n          throw (\n            ((thenableState = thenable.reason),\n            checkIfUseWrappedInAsyncCatch(thenableState),\n            thenableState)\n          );\n      }\n      suspendedThenable = thenable;\n      throw SuspenseException;\n  }\n}\nfunction resolveLazy(lazyType) {\n  try {\n    var init = lazyType._init;\n    return init(lazyType._payload);\n  } catch (x) {\n    if (null !== x && \"object\" === typeof x && \"function\" === typeof x.then)\n      throw ((suspendedThenable = x), SuspenseException);\n    throw x;\n  }\n}\nvar suspendedThenable = null;\nfunction getSuspendedThenable() {\n  if (null === suspendedThenable) throw Error(formatProdErrorMessage(459));\n  var thenable = suspendedThenable;\n  suspendedThenable = null;\n  return thenable;\n}\nfunction checkIfUseWrappedInAsyncCatch(rejectedReason) {\n  if (\n    rejectedReason === SuspenseException ||\n    rejectedReason === SuspenseActionException\n  )\n    throw Error(formatProdErrorMessage(483));\n}\nvar thenableState$1 = null,\n  thenableIndexCounter$1 = 0;\nfunction unwrapThenable(thenable) {\n  var index = thenableIndexCounter$1;\n  thenableIndexCounter$1 += 1;\n  null === thenableState$1 && (thenableState$1 = []);\n  return trackUsedThenable(thenableState$1, thenable, index);\n}\nfunction coerceRef(workInProgress, element) {\n  element = element.props.ref;\n  workInProgress.ref = void 0 !== element ? element : null;\n}\nfunction throwOnInvalidObjectTypeImpl(returnFiber, newChild) {\n  if (newChild.$$typeof === REACT_LEGACY_ELEMENT_TYPE)\n    throw Error(formatProdErrorMessage(525));\n  returnFiber = Object.prototype.toString.call(newChild);\n  throw Error(\n    formatProdErrorMessage(\n      31,\n      \"[object Object]\" === returnFiber\n        ? \"object with keys {\" + Object.keys(newChild).join(\", \") + \"}\"\n        : returnFiber\n    )\n  );\n}\nfunction createChildReconciler(shouldTrackSideEffects) {\n  function deleteChild(returnFiber, childToDelete) {\n    if (shouldTrackSideEffects) {\n      var deletions = returnFiber.deletions;\n      null === deletions\n        ? ((returnFiber.deletions = [childToDelete]), (returnFiber.flags |= 16))\n        : deletions.push(childToDelete);\n    }\n  }\n  function deleteRemainingChildren(returnFiber, currentFirstChild) {\n    if (!shouldTrackSideEffects) return null;\n    for (; null !== currentFirstChild; )\n      deleteChild(returnFiber, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return null;\n  }\n  function mapRemainingChildren(currentFirstChild) {\n    for (var existingChildren = new Map(); null !== currentFirstChild; )\n      null !== currentFirstChild.key\n        ? existingChildren.set(currentFirstChild.key, currentFirstChild)\n        : existingChildren.set(currentFirstChild.index, currentFirstChild),\n        (currentFirstChild = currentFirstChild.sibling);\n    return existingChildren;\n  }\n  function useFiber(fiber, pendingProps) {\n    fiber = createWorkInProgress(fiber, pendingProps);\n    fiber.index = 0;\n    fiber.sibling = null;\n    return fiber;\n  }\n  function placeChild(newFiber, lastPlacedIndex, newIndex) {\n    newFiber.index = newIndex;\n    if (!shouldTrackSideEffects)\n      return (newFiber.flags |= 1048576), lastPlacedIndex;\n    newIndex = newFiber.alternate;\n    if (null !== newIndex)\n      return (\n        (newIndex = newIndex.index),\n        newIndex < lastPlacedIndex\n          ? ((newFiber.flags |= 67108866), lastPlacedIndex)\n          : newIndex\n      );\n    newFiber.flags |= 67108866;\n    return lastPlacedIndex;\n  }\n  function placeSingleChild(newFiber) {\n    shouldTrackSideEffects &&\n      null === newFiber.alternate &&\n      (newFiber.flags |= 67108866);\n    return newFiber;\n  }\n  function updateTextNode(returnFiber, current, textContent, lanes) {\n    if (null === current || 6 !== current.tag)\n      return (\n        (current = createFiberFromText(textContent, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, textContent);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateElement(returnFiber, current, element, lanes) {\n    var elementType = element.type;\n    if (elementType === REACT_FRAGMENT_TYPE)\n      return updateFragment(\n        returnFiber,\n        current,\n        element.props.children,\n        lanes,\n        element.key\n      );\n    if (\n      null !== current &&\n      (current.elementType === elementType ||\n        (\"object\" === typeof elementType &&\n          null !== elementType &&\n          elementType.$$typeof === REACT_LAZY_TYPE &&\n          resolveLazy(elementType) === current.type))\n    )\n      return (\n        (current = useFiber(current, element.props)),\n        coerceRef(current, element),\n        (current.return = returnFiber),\n        current\n      );\n    current = createFiberFromTypeAndProps(\n      element.type,\n      element.key,\n      element.props,\n      null,\n      returnFiber.mode,\n      lanes\n    );\n    coerceRef(current, element);\n    current.return = returnFiber;\n    return current;\n  }\n  function updatePortal(returnFiber, current, portal, lanes) {\n    if (\n      null === current ||\n      4 !== current.tag ||\n      current.stateNode.containerInfo !== portal.containerInfo ||\n      current.stateNode.implementation !== portal.implementation\n    )\n      return (\n        (current = createFiberFromPortal(portal, returnFiber.mode, lanes)),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, portal.children || []);\n    current.return = returnFiber;\n    return current;\n  }\n  function updateFragment(returnFiber, current, fragment, lanes, key) {\n    if (null === current || 7 !== current.tag)\n      return (\n        (current = createFiberFromFragment(\n          fragment,\n          returnFiber.mode,\n          lanes,\n          key\n        )),\n        (current.return = returnFiber),\n        current\n      );\n    current = useFiber(current, fragment);\n    current.return = returnFiber;\n    return current;\n  }\n  function createChild(returnFiber, newChild, lanes) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (newChild = createFiberFromText(\n          \"\" + newChild,\n          returnFiber.mode,\n          lanes\n        )),\n        (newChild.return = returnFiber),\n        newChild\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (lanes = createFiberFromTypeAndProps(\n              newChild.type,\n              newChild.key,\n              newChild.props,\n              null,\n              returnFiber.mode,\n              lanes\n            )),\n            coerceRef(lanes, newChild),\n            (lanes.return = returnFiber),\n            lanes\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (newChild = createFiberFromPortal(\n              newChild,\n              returnFiber.mode,\n              lanes\n            )),\n            (newChild.return = returnFiber),\n            newChild\n          );\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            createChild(returnFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (newChild = createFiberFromFragment(\n            newChild,\n            returnFiber.mode,\n            lanes,\n            null\n          )),\n          (newChild.return = returnFiber),\n          newChild\n        );\n      if (\"function\" === typeof newChild.then)\n        return createChild(returnFiber, unwrapThenable(newChild), lanes);\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return createChild(\n          returnFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateSlot(returnFiber, oldFiber, newChild, lanes) {\n    var key = null !== oldFiber ? oldFiber.key : null;\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return null !== key\n        ? null\n        : updateTextNode(returnFiber, oldFiber, \"\" + newChild, lanes);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return newChild.key === key\n            ? updateElement(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_PORTAL_TYPE:\n          return newChild.key === key\n            ? updatePortal(returnFiber, oldFiber, newChild, lanes)\n            : null;\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            updateSlot(returnFiber, oldFiber, newChild, lanes)\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return null !== key\n          ? null\n          : updateFragment(returnFiber, oldFiber, newChild, lanes, null);\n      if (\"function\" === typeof newChild.then)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateSlot(\n          returnFiber,\n          oldFiber,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return null;\n  }\n  function updateFromMap(\n    existingChildren,\n    returnFiber,\n    newIdx,\n    newChild,\n    lanes\n  ) {\n    if (\n      (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n    )\n      return (\n        (existingChildren = existingChildren.get(newIdx) || null),\n        updateTextNode(returnFiber, existingChildren, \"\" + newChild, lanes)\n      );\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updateElement(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_PORTAL_TYPE:\n          return (\n            (existingChildren =\n              existingChildren.get(\n                null === newChild.key ? newIdx : newChild.key\n              ) || null),\n            updatePortal(returnFiber, existingChildren, newChild, lanes)\n          );\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            updateFromMap(\n              existingChildren,\n              returnFiber,\n              newIdx,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild) || getIteratorFn(newChild))\n        return (\n          (existingChildren = existingChildren.get(newIdx) || null),\n          updateFragment(returnFiber, existingChildren, newChild, lanes, null)\n        );\n      if (\"function\" === typeof newChild.then)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return updateFromMap(\n          existingChildren,\n          returnFiber,\n          newIdx,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return null;\n  }\n  function reconcileChildrenArray(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null;\n      null !== oldFiber && newIdx < newChildren.length;\n      newIdx++\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(\n        returnFiber,\n        oldFiber,\n        newChildren[newIdx],\n        lanes\n      );\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (newIdx === newChildren.length)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; newIdx < newChildren.length; newIdx++)\n        (oldFiber = createChild(returnFiber, newChildren[newIdx], lanes)),\n          null !== oldFiber &&\n            ((currentFirstChild = placeChild(\n              oldFiber,\n              currentFirstChild,\n              newIdx\n            )),\n            null === previousNewFiber\n              ? (resultingFirstChild = oldFiber)\n              : (previousNewFiber.sibling = oldFiber),\n            (previousNewFiber = oldFiber));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      newIdx < newChildren.length;\n      newIdx++\n    )\n      (nextOldFiber = updateFromMap(\n        oldFiber,\n        returnFiber,\n        newIdx,\n        newChildren[newIdx],\n        lanes\n      )),\n        null !== nextOldFiber &&\n          (shouldTrackSideEffects &&\n            null !== nextOldFiber.alternate &&\n            oldFiber.delete(\n              null === nextOldFiber.key ? newIdx : nextOldFiber.key\n            ),\n          (currentFirstChild = placeChild(\n            nextOldFiber,\n            currentFirstChild,\n            newIdx\n          )),\n          null === previousNewFiber\n            ? (resultingFirstChild = nextOldFiber)\n            : (previousNewFiber.sibling = nextOldFiber),\n          (previousNewFiber = nextOldFiber));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildrenIterator(\n    returnFiber,\n    currentFirstChild,\n    newChildren,\n    lanes\n  ) {\n    if (null == newChildren) throw Error(formatProdErrorMessage(151));\n    for (\n      var resultingFirstChild = null,\n        previousNewFiber = null,\n        oldFiber = currentFirstChild,\n        newIdx = (currentFirstChild = 0),\n        nextOldFiber = null,\n        step = newChildren.next();\n      null !== oldFiber && !step.done;\n      newIdx++, step = newChildren.next()\n    ) {\n      oldFiber.index > newIdx\n        ? ((nextOldFiber = oldFiber), (oldFiber = null))\n        : (nextOldFiber = oldFiber.sibling);\n      var newFiber = updateSlot(returnFiber, oldFiber, step.value, lanes);\n      if (null === newFiber) {\n        null === oldFiber && (oldFiber = nextOldFiber);\n        break;\n      }\n      shouldTrackSideEffects &&\n        oldFiber &&\n        null === newFiber.alternate &&\n        deleteChild(returnFiber, oldFiber);\n      currentFirstChild = placeChild(newFiber, currentFirstChild, newIdx);\n      null === previousNewFiber\n        ? (resultingFirstChild = newFiber)\n        : (previousNewFiber.sibling = newFiber);\n      previousNewFiber = newFiber;\n      oldFiber = nextOldFiber;\n    }\n    if (step.done)\n      return (\n        deleteRemainingChildren(returnFiber, oldFiber),\n        isHydrating && pushTreeFork(returnFiber, newIdx),\n        resultingFirstChild\n      );\n    if (null === oldFiber) {\n      for (; !step.done; newIdx++, step = newChildren.next())\n        (step = createChild(returnFiber, step.value, lanes)),\n          null !== step &&\n            ((currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n            null === previousNewFiber\n              ? (resultingFirstChild = step)\n              : (previousNewFiber.sibling = step),\n            (previousNewFiber = step));\n      isHydrating && pushTreeFork(returnFiber, newIdx);\n      return resultingFirstChild;\n    }\n    for (\n      oldFiber = mapRemainingChildren(oldFiber);\n      !step.done;\n      newIdx++, step = newChildren.next()\n    )\n      (step = updateFromMap(oldFiber, returnFiber, newIdx, step.value, lanes)),\n        null !== step &&\n          (shouldTrackSideEffects &&\n            null !== step.alternate &&\n            oldFiber.delete(null === step.key ? newIdx : step.key),\n          (currentFirstChild = placeChild(step, currentFirstChild, newIdx)),\n          null === previousNewFiber\n            ? (resultingFirstChild = step)\n            : (previousNewFiber.sibling = step),\n          (previousNewFiber = step));\n    shouldTrackSideEffects &&\n      oldFiber.forEach(function (child) {\n        return deleteChild(returnFiber, child);\n      });\n    isHydrating && pushTreeFork(returnFiber, newIdx);\n    return resultingFirstChild;\n  }\n  function reconcileChildFibersImpl(\n    returnFiber,\n    currentFirstChild,\n    newChild,\n    lanes\n  ) {\n    \"object\" === typeof newChild &&\n      null !== newChild &&\n      newChild.type === REACT_FRAGMENT_TYPE &&\n      null === newChild.key &&\n      (newChild = newChild.props.children);\n    if (\"object\" === typeof newChild && null !== newChild) {\n      switch (newChild.$$typeof) {\n        case REACT_ELEMENT_TYPE:\n          a: {\n            for (var key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key) {\n                key = newChild.type;\n                if (key === REACT_FRAGMENT_TYPE) {\n                  if (7 === currentFirstChild.tag) {\n                    deleteRemainingChildren(\n                      returnFiber,\n                      currentFirstChild.sibling\n                    );\n                    lanes = useFiber(\n                      currentFirstChild,\n                      newChild.props.children\n                    );\n                    lanes.return = returnFiber;\n                    returnFiber = lanes;\n                    break a;\n                  }\n                } else if (\n                  currentFirstChild.elementType === key ||\n                  (\"object\" === typeof key &&\n                    null !== key &&\n                    key.$$typeof === REACT_LAZY_TYPE &&\n                    resolveLazy(key) === currentFirstChild.type)\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.props);\n                  coerceRef(lanes, newChild);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                }\n                deleteRemainingChildren(returnFiber, currentFirstChild);\n                break;\n              } else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            newChild.type === REACT_FRAGMENT_TYPE\n              ? ((lanes = createFiberFromFragment(\n                  newChild.props.children,\n                  returnFiber.mode,\n                  lanes,\n                  newChild.key\n                )),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes))\n              : ((lanes = createFiberFromTypeAndProps(\n                  newChild.type,\n                  newChild.key,\n                  newChild.props,\n                  null,\n                  returnFiber.mode,\n                  lanes\n                )),\n                coerceRef(lanes, newChild),\n                (lanes.return = returnFiber),\n                (returnFiber = lanes));\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_PORTAL_TYPE:\n          a: {\n            for (key = newChild.key; null !== currentFirstChild; ) {\n              if (currentFirstChild.key === key)\n                if (\n                  4 === currentFirstChild.tag &&\n                  currentFirstChild.stateNode.containerInfo ===\n                    newChild.containerInfo &&\n                  currentFirstChild.stateNode.implementation ===\n                    newChild.implementation\n                ) {\n                  deleteRemainingChildren(\n                    returnFiber,\n                    currentFirstChild.sibling\n                  );\n                  lanes = useFiber(currentFirstChild, newChild.children || []);\n                  lanes.return = returnFiber;\n                  returnFiber = lanes;\n                  break a;\n                } else {\n                  deleteRemainingChildren(returnFiber, currentFirstChild);\n                  break;\n                }\n              else deleteChild(returnFiber, currentFirstChild);\n              currentFirstChild = currentFirstChild.sibling;\n            }\n            lanes = createFiberFromPortal(newChild, returnFiber.mode, lanes);\n            lanes.return = returnFiber;\n            returnFiber = lanes;\n          }\n          return placeSingleChild(returnFiber);\n        case REACT_LAZY_TYPE:\n          return (\n            (newChild = resolveLazy(newChild)),\n            reconcileChildFibersImpl(\n              returnFiber,\n              currentFirstChild,\n              newChild,\n              lanes\n            )\n          );\n      }\n      if (isArrayImpl(newChild))\n        return reconcileChildrenArray(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      if (getIteratorFn(newChild)) {\n        key = getIteratorFn(newChild);\n        if (\"function\" !== typeof key) throw Error(formatProdErrorMessage(150));\n        newChild = key.call(newChild);\n        return reconcileChildrenIterator(\n          returnFiber,\n          currentFirstChild,\n          newChild,\n          lanes\n        );\n      }\n      if (\"function\" === typeof newChild.then)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          unwrapThenable(newChild),\n          lanes\n        );\n      if (newChild.$$typeof === REACT_CONTEXT_TYPE)\n        return reconcileChildFibersImpl(\n          returnFiber,\n          currentFirstChild,\n          readContextDuringReconciliation(returnFiber, newChild),\n          lanes\n        );\n      throwOnInvalidObjectTypeImpl(returnFiber, newChild);\n    }\n    return (\"string\" === typeof newChild && \"\" !== newChild) ||\n      \"number\" === typeof newChild ||\n      \"bigint\" === typeof newChild\n      ? ((newChild = \"\" + newChild),\n        null !== currentFirstChild && 6 === currentFirstChild.tag\n          ? (deleteRemainingChildren(returnFiber, currentFirstChild.sibling),\n            (lanes = useFiber(currentFirstChild, newChild)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes))\n          : (deleteRemainingChildren(returnFiber, currentFirstChild),\n            (lanes = createFiberFromText(newChild, returnFiber.mode, lanes)),\n            (lanes.return = returnFiber),\n            (returnFiber = lanes)),\n        placeSingleChild(returnFiber))\n      : deleteRemainingChildren(returnFiber, currentFirstChild);\n  }\n  return function (returnFiber, currentFirstChild, newChild, lanes) {\n    try {\n      thenableIndexCounter$1 = 0;\n      var firstChildFiber = reconcileChildFibersImpl(\n        returnFiber,\n        currentFirstChild,\n        newChild,\n        lanes\n      );\n      thenableState$1 = null;\n      return firstChildFiber;\n    } catch (x) {\n      if (x === SuspenseException || x === SuspenseActionException) throw x;\n      var fiber = createFiberImplClass(29, x, null, returnFiber.mode);\n      fiber.lanes = lanes;\n      fiber.return = returnFiber;\n      return fiber;\n    } finally {\n    }\n  };\n}\nvar reconcileChildFibers = createChildReconciler(!0),\n  mountChildFibers = createChildReconciler(!1),\n  hasForceUpdate = !1;\nfunction initializeUpdateQueue(fiber) {\n  fiber.updateQueue = {\n    baseState: fiber.memoizedState,\n    firstBaseUpdate: null,\n    lastBaseUpdate: null,\n    shared: { pending: null, lanes: 0, hiddenCallbacks: null },\n    callbacks: null\n  };\n}\nfunction cloneUpdateQueue(current, workInProgress) {\n  current = current.updateQueue;\n  workInProgress.updateQueue === current &&\n    (workInProgress.updateQueue = {\n      baseState: current.baseState,\n      firstBaseUpdate: current.firstBaseUpdate,\n      lastBaseUpdate: current.lastBaseUpdate,\n      shared: current.shared,\n      callbacks: null\n    });\n}\nfunction createUpdate(lane) {\n  return { lane: lane, tag: 0, payload: null, callback: null, next: null };\n}\nfunction enqueueUpdate(fiber, update, lane) {\n  var updateQueue = fiber.updateQueue;\n  if (null === updateQueue) return null;\n  updateQueue = updateQueue.shared;\n  if (0 !== (executionContext & 2)) {\n    var pending = updateQueue.pending;\n    null === pending\n      ? (update.next = update)\n      : ((update.next = pending.next), (pending.next = update));\n    updateQueue.pending = update;\n    update = getRootForUpdatedFiber(fiber);\n    markUpdateLaneFromFiberToRoot(fiber, null, lane);\n    return update;\n  }\n  enqueueUpdate$1(fiber, updateQueue, update, lane);\n  return getRootForUpdatedFiber(fiber);\n}\nfunction entangleTransitions(root, fiber, lane) {\n  fiber = fiber.updateQueue;\n  if (null !== fiber && ((fiber = fiber.shared), 0 !== (lane & 4194048))) {\n    var queueLanes = fiber.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    fiber.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nfunction enqueueCapturedUpdate(workInProgress, capturedUpdate) {\n  var queue = workInProgress.updateQueue,\n    current = workInProgress.alternate;\n  if (\n    null !== current &&\n    ((current = current.updateQueue), queue === current)\n  ) {\n    var newFirst = null,\n      newLast = null;\n    queue = queue.firstBaseUpdate;\n    if (null !== queue) {\n      do {\n        var clone = {\n          lane: queue.lane,\n          tag: queue.tag,\n          payload: queue.payload,\n          callback: null,\n          next: null\n        };\n        null === newLast\n          ? (newFirst = newLast = clone)\n          : (newLast = newLast.next = clone);\n        queue = queue.next;\n      } while (null !== queue);\n      null === newLast\n        ? (newFirst = newLast = capturedUpdate)\n        : (newLast = newLast.next = capturedUpdate);\n    } else newFirst = newLast = capturedUpdate;\n    queue = {\n      baseState: current.baseState,\n      firstBaseUpdate: newFirst,\n      lastBaseUpdate: newLast,\n      shared: current.shared,\n      callbacks: current.callbacks\n    };\n    workInProgress.updateQueue = queue;\n    return;\n  }\n  workInProgress = queue.lastBaseUpdate;\n  null === workInProgress\n    ? (queue.firstBaseUpdate = capturedUpdate)\n    : (workInProgress.next = capturedUpdate);\n  queue.lastBaseUpdate = capturedUpdate;\n}\nvar didReadFromEntangledAsyncAction = !1;\nfunction suspendIfUpdateReadFromEntangledAsyncAction() {\n  if (didReadFromEntangledAsyncAction) {\n    var entangledActionThenable = currentEntangledActionThenable;\n    if (null !== entangledActionThenable) throw entangledActionThenable;\n  }\n}\nfunction processUpdateQueue(\n  workInProgress$jscomp$0,\n  props,\n  instance$jscomp$0,\n  renderLanes\n) {\n  didReadFromEntangledAsyncAction = !1;\n  var queue = workInProgress$jscomp$0.updateQueue;\n  hasForceUpdate = !1;\n  var firstBaseUpdate = queue.firstBaseUpdate,\n    lastBaseUpdate = queue.lastBaseUpdate,\n    pendingQueue = queue.shared.pending;\n  if (null !== pendingQueue) {\n    queue.shared.pending = null;\n    var lastPendingUpdate = pendingQueue,\n      firstPendingUpdate = lastPendingUpdate.next;\n    lastPendingUpdate.next = null;\n    null === lastBaseUpdate\n      ? (firstBaseUpdate = firstPendingUpdate)\n      : (lastBaseUpdate.next = firstPendingUpdate);\n    lastBaseUpdate = lastPendingUpdate;\n    var current = workInProgress$jscomp$0.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      (pendingQueue = current.lastBaseUpdate),\n      pendingQueue !== lastBaseUpdate &&\n        (null === pendingQueue\n          ? (current.firstBaseUpdate = firstPendingUpdate)\n          : (pendingQueue.next = firstPendingUpdate),\n        (current.lastBaseUpdate = lastPendingUpdate)));\n  }\n  if (null !== firstBaseUpdate) {\n    var newState = queue.baseState;\n    lastBaseUpdate = 0;\n    current = firstPendingUpdate = lastPendingUpdate = null;\n    pendingQueue = firstBaseUpdate;\n    do {\n      var updateLane = pendingQueue.lane & -536870913,\n        isHiddenUpdate = updateLane !== pendingQueue.lane;\n      if (\n        isHiddenUpdate\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        0 !== updateLane &&\n          updateLane === currentEntangledLane &&\n          (didReadFromEntangledAsyncAction = !0);\n        null !== current &&\n          (current = current.next =\n            {\n              lane: 0,\n              tag: pendingQueue.tag,\n              payload: pendingQueue.payload,\n              callback: null,\n              next: null\n            });\n        a: {\n          var workInProgress = workInProgress$jscomp$0,\n            update = pendingQueue;\n          updateLane = props;\n          var instance = instance$jscomp$0;\n          switch (update.tag) {\n            case 1:\n              workInProgress = update.payload;\n              if (\"function\" === typeof workInProgress) {\n                newState = workInProgress.call(instance, newState, updateLane);\n                break a;\n              }\n              newState = workInProgress;\n              break a;\n            case 3:\n              workInProgress.flags = (workInProgress.flags & -65537) | 128;\n            case 0:\n              workInProgress = update.payload;\n              updateLane =\n                \"function\" === typeof workInProgress\n                  ? workInProgress.call(instance, newState, updateLane)\n                  : workInProgress;\n              if (null === updateLane || void 0 === updateLane) break a;\n              newState = assign({}, newState, updateLane);\n              break a;\n            case 2:\n              hasForceUpdate = !0;\n          }\n        }\n        updateLane = pendingQueue.callback;\n        null !== updateLane &&\n          ((workInProgress$jscomp$0.flags |= 64),\n          isHiddenUpdate && (workInProgress$jscomp$0.flags |= 8192),\n          (isHiddenUpdate = queue.callbacks),\n          null === isHiddenUpdate\n            ? (queue.callbacks = [updateLane])\n            : isHiddenUpdate.push(updateLane));\n      } else\n        (isHiddenUpdate = {\n          lane: updateLane,\n          tag: pendingQueue.tag,\n          payload: pendingQueue.payload,\n          callback: pendingQueue.callback,\n          next: null\n        }),\n          null === current\n            ? ((firstPendingUpdate = current = isHiddenUpdate),\n              (lastPendingUpdate = newState))\n            : (current = current.next = isHiddenUpdate),\n          (lastBaseUpdate |= updateLane);\n      pendingQueue = pendingQueue.next;\n      if (null === pendingQueue)\n        if (((pendingQueue = queue.shared.pending), null === pendingQueue))\n          break;\n        else\n          (isHiddenUpdate = pendingQueue),\n            (pendingQueue = isHiddenUpdate.next),\n            (isHiddenUpdate.next = null),\n            (queue.lastBaseUpdate = isHiddenUpdate),\n            (queue.shared.pending = null);\n    } while (1);\n    null === current && (lastPendingUpdate = newState);\n    queue.baseState = lastPendingUpdate;\n    queue.firstBaseUpdate = firstPendingUpdate;\n    queue.lastBaseUpdate = current;\n    null === firstBaseUpdate && (queue.shared.lanes = 0);\n    workInProgressRootSkippedLanes |= lastBaseUpdate;\n    workInProgress$jscomp$0.lanes = lastBaseUpdate;\n    workInProgress$jscomp$0.memoizedState = newState;\n  }\n}\nfunction callCallback(callback, context) {\n  if (\"function\" !== typeof callback)\n    throw Error(formatProdErrorMessage(191, callback));\n  callback.call(context);\n}\nfunction commitCallbacks(updateQueue, context) {\n  var callbacks = updateQueue.callbacks;\n  if (null !== callbacks)\n    for (\n      updateQueue.callbacks = null, updateQueue = 0;\n      updateQueue < callbacks.length;\n      updateQueue++\n    )\n      callCallback(callbacks[updateQueue], context);\n}\nvar currentTreeHiddenStackCursor = createCursor(null),\n  prevEntangledRenderLanesCursor = createCursor(0);\nfunction pushHiddenContext(fiber, context) {\n  fiber = entangledRenderLanes;\n  push(prevEntangledRenderLanesCursor, fiber);\n  push(currentTreeHiddenStackCursor, context);\n  entangledRenderLanes = fiber | context.baseLanes;\n}\nfunction reuseHiddenContextOnStack() {\n  push(prevEntangledRenderLanesCursor, entangledRenderLanes);\n  push(currentTreeHiddenStackCursor, currentTreeHiddenStackCursor.current);\n}\nfunction popHiddenContext() {\n  entangledRenderLanes = prevEntangledRenderLanesCursor.current;\n  pop(currentTreeHiddenStackCursor);\n  pop(prevEntangledRenderLanesCursor);\n}\nvar suspenseHandlerStackCursor = createCursor(null),\n  shellBoundary = null;\nfunction pushPrimaryTreeSuspenseHandler(handler) {\n  var current = handler.alternate;\n  push(suspenseStackCursor, suspenseStackCursor.current & 1);\n  push(suspenseHandlerStackCursor, handler);\n  null === shellBoundary &&\n    (null === current || null !== currentTreeHiddenStackCursor.current\n      ? (shellBoundary = handler)\n      : null !== current.memoizedState && (shellBoundary = handler));\n}\nfunction pushDehydratedActivitySuspenseHandler(fiber) {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, fiber);\n  null === shellBoundary && (shellBoundary = fiber);\n}\nfunction pushOffscreenSuspenseHandler(fiber) {\n  22 === fiber.tag\n    ? (push(suspenseStackCursor, suspenseStackCursor.current),\n      push(suspenseHandlerStackCursor, fiber),\n      null === shellBoundary && (shellBoundary = fiber))\n    : reuseSuspenseHandlerOnStack(fiber);\n}\nfunction reuseSuspenseHandlerOnStack() {\n  push(suspenseStackCursor, suspenseStackCursor.current);\n  push(suspenseHandlerStackCursor, suspenseHandlerStackCursor.current);\n}\nfunction popSuspenseHandler(fiber) {\n  pop(suspenseHandlerStackCursor);\n  shellBoundary === fiber && (shellBoundary = null);\n  pop(suspenseStackCursor);\n}\nvar suspenseStackCursor = createCursor(0);\nfunction findFirstSuspended(row) {\n  for (var node = row; null !== node; ) {\n    if (13 === node.tag) {\n      var state = node.memoizedState;\n      if (\n        null !== state &&\n        ((state = state.dehydrated),\n        null === state ||\n          isSuspenseInstancePending(state) ||\n          isSuspenseInstanceFallback(state))\n      )\n        return node;\n    } else if (\n      19 === node.tag &&\n      (\"forwards\" === node.memoizedProps.revealOrder ||\n        \"backwards\" === node.memoizedProps.revealOrder ||\n        \"unstable_legacy-backwards\" === node.memoizedProps.revealOrder ||\n        \"together\" === node.memoizedProps.revealOrder)\n    ) {\n      if (0 !== (node.flags & 128)) return node;\n    } else if (null !== node.child) {\n      node.child.return = node;\n      node = node.child;\n      continue;\n    }\n    if (node === row) break;\n    for (; null === node.sibling; ) {\n      if (null === node.return || node.return === row) return null;\n      node = node.return;\n    }\n    node.sibling.return = node.return;\n    node = node.sibling;\n  }\n  return null;\n}\nvar renderLanes = 0,\n  currentlyRenderingFiber = null,\n  currentHook = null,\n  workInProgressHook = null,\n  didScheduleRenderPhaseUpdate = !1,\n  didScheduleRenderPhaseUpdateDuringThisPass = !1,\n  shouldDoubleInvokeUserFnsInHooksDEV = !1,\n  localIdCounter = 0,\n  thenableIndexCounter = 0,\n  thenableState = null,\n  globalClientIdCounter = 0;\nfunction throwInvalidHookError() {\n  throw Error(formatProdErrorMessage(321));\n}\nfunction areHookInputsEqual(nextDeps, prevDeps) {\n  if (null === prevDeps) return !1;\n  for (var i = 0; i < prevDeps.length && i < nextDeps.length; i++)\n    if (!objectIs(nextDeps[i], prevDeps[i])) return !1;\n  return !0;\n}\nfunction renderWithHooks(\n  current,\n  workInProgress,\n  Component,\n  props,\n  secondArg,\n  nextRenderLanes\n) {\n  renderLanes = nextRenderLanes;\n  currentlyRenderingFiber = workInProgress;\n  workInProgress.memoizedState = null;\n  workInProgress.updateQueue = null;\n  workInProgress.lanes = 0;\n  ReactSharedInternals.H =\n    null === current || null === current.memoizedState\n      ? HooksDispatcherOnMount\n      : HooksDispatcherOnUpdate;\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  nextRenderLanes = Component(props, secondArg);\n  shouldDoubleInvokeUserFnsInHooksDEV = !1;\n  didScheduleRenderPhaseUpdateDuringThisPass &&\n    (nextRenderLanes = renderWithHooksAgain(\n      workInProgress,\n      Component,\n      props,\n      secondArg\n    ));\n  finishRenderingHooks(current);\n  return nextRenderLanes;\n}\nfunction finishRenderingHooks(current) {\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  var didRenderTooFewHooks = null !== currentHook && null !== currentHook.next;\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdate = !1;\n  thenableIndexCounter = 0;\n  thenableState = null;\n  if (didRenderTooFewHooks) throw Error(formatProdErrorMessage(300));\n  null === current ||\n    didReceiveUpdate ||\n    ((current = current.dependencies),\n    null !== current &&\n      checkIfContextChanged(current) &&\n      (didReceiveUpdate = !0));\n}\nfunction renderWithHooksAgain(workInProgress, Component, props, secondArg) {\n  currentlyRenderingFiber = workInProgress;\n  var numberOfReRenders = 0;\n  do {\n    didScheduleRenderPhaseUpdateDuringThisPass && (thenableState = null);\n    thenableIndexCounter = 0;\n    didScheduleRenderPhaseUpdateDuringThisPass = !1;\n    if (25 <= numberOfReRenders) throw Error(formatProdErrorMessage(301));\n    numberOfReRenders += 1;\n    workInProgressHook = currentHook = null;\n    if (null != workInProgress.updateQueue) {\n      var children = workInProgress.updateQueue;\n      children.lastEffect = null;\n      children.events = null;\n      children.stores = null;\n      null != children.memoCache && (children.memoCache.index = 0);\n    }\n    ReactSharedInternals.H = HooksDispatcherOnRerender;\n    children = Component(props, secondArg);\n  } while (didScheduleRenderPhaseUpdateDuringThisPass);\n  return children;\n}\nfunction TransitionAwareHostComponent() {\n  var dispatcher = ReactSharedInternals.H,\n    maybeThenable = dispatcher.useState()[0];\n  maybeThenable =\n    \"function\" === typeof maybeThenable.then\n      ? useThenable(maybeThenable)\n      : maybeThenable;\n  dispatcher = dispatcher.useState()[0];\n  (null !== currentHook ? currentHook.memoizedState : null) !== dispatcher &&\n    (currentlyRenderingFiber.flags |= 1024);\n  return maybeThenable;\n}\nfunction checkDidRenderIdHook() {\n  var didRenderIdHook = 0 !== localIdCounter;\n  localIdCounter = 0;\n  return didRenderIdHook;\n}\nfunction bailoutHooks(current, workInProgress, lanes) {\n  workInProgress.updateQueue = current.updateQueue;\n  workInProgress.flags &= -2053;\n  current.lanes &= ~lanes;\n}\nfunction resetHooksOnUnwind(workInProgress) {\n  if (didScheduleRenderPhaseUpdate) {\n    for (\n      workInProgress = workInProgress.memoizedState;\n      null !== workInProgress;\n\n    ) {\n      var queue = workInProgress.queue;\n      null !== queue && (queue.pending = null);\n      workInProgress = workInProgress.next;\n    }\n    didScheduleRenderPhaseUpdate = !1;\n  }\n  renderLanes = 0;\n  workInProgressHook = currentHook = currentlyRenderingFiber = null;\n  didScheduleRenderPhaseUpdateDuringThisPass = !1;\n  thenableIndexCounter = localIdCounter = 0;\n  thenableState = null;\n}\nfunction mountWorkInProgressHook() {\n  var hook = {\n    memoizedState: null,\n    baseState: null,\n    baseQueue: null,\n    queue: null,\n    next: null\n  };\n  null === workInProgressHook\n    ? (currentlyRenderingFiber.memoizedState = workInProgressHook = hook)\n    : (workInProgressHook = workInProgressHook.next = hook);\n  return workInProgressHook;\n}\nfunction updateWorkInProgressHook() {\n  if (null === currentHook) {\n    var nextCurrentHook = currentlyRenderingFiber.alternate;\n    nextCurrentHook =\n      null !== nextCurrentHook ? nextCurrentHook.memoizedState : null;\n  } else nextCurrentHook = currentHook.next;\n  var nextWorkInProgressHook =\n    null === workInProgressHook\n      ? currentlyRenderingFiber.memoizedState\n      : workInProgressHook.next;\n  if (null !== nextWorkInProgressHook)\n    (workInProgressHook = nextWorkInProgressHook),\n      (currentHook = nextCurrentHook);\n  else {\n    if (null === nextCurrentHook) {\n      if (null === currentlyRenderingFiber.alternate)\n        throw Error(formatProdErrorMessage(467));\n      throw Error(formatProdErrorMessage(310));\n    }\n    currentHook = nextCurrentHook;\n    nextCurrentHook = {\n      memoizedState: currentHook.memoizedState,\n      baseState: currentHook.baseState,\n      baseQueue: currentHook.baseQueue,\n      queue: currentHook.queue,\n      next: null\n    };\n    null === workInProgressHook\n      ? (currentlyRenderingFiber.memoizedState = workInProgressHook =\n          nextCurrentHook)\n      : (workInProgressHook = workInProgressHook.next = nextCurrentHook);\n  }\n  return workInProgressHook;\n}\nfunction createFunctionComponentUpdateQueue() {\n  return { lastEffect: null, events: null, stores: null, memoCache: null };\n}\nfunction useThenable(thenable) {\n  var index = thenableIndexCounter;\n  thenableIndexCounter += 1;\n  null === thenableState && (thenableState = []);\n  thenable = trackUsedThenable(thenableState, thenable, index);\n  index = currentlyRenderingFiber;\n  null ===\n    (null === workInProgressHook\n      ? index.memoizedState\n      : workInProgressHook.next) &&\n    ((index = index.alternate),\n    (ReactSharedInternals.H =\n      null === index || null === index.memoizedState\n        ? HooksDispatcherOnMount\n        : HooksDispatcherOnUpdate));\n  return thenable;\n}\nfunction use(usable) {\n  if (null !== usable && \"object\" === typeof usable) {\n    if (\"function\" === typeof usable.then) return useThenable(usable);\n    if (usable.$$typeof === REACT_CONTEXT_TYPE) return readContext(usable);\n  }\n  throw Error(formatProdErrorMessage(438, String(usable)));\n}\nfunction useMemoCache(size) {\n  var memoCache = null,\n    updateQueue = currentlyRenderingFiber.updateQueue;\n  null !== updateQueue && (memoCache = updateQueue.memoCache);\n  if (null == memoCache) {\n    var current = currentlyRenderingFiber.alternate;\n    null !== current &&\n      ((current = current.updateQueue),\n      null !== current &&\n        ((current = current.memoCache),\n        null != current &&\n          (memoCache = {\n            data: current.data.map(function (array) {\n              return array.slice();\n            }),\n            index: 0\n          })));\n  }\n  null == memoCache && (memoCache = { data: [], index: 0 });\n  null === updateQueue &&\n    ((updateQueue = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = updateQueue));\n  updateQueue.memoCache = memoCache;\n  updateQueue = memoCache.data[memoCache.index];\n  if (void 0 === updateQueue)\n    for (\n      updateQueue = memoCache.data[memoCache.index] = Array(size), current = 0;\n      current < size;\n      current++\n    )\n      updateQueue[current] = REACT_MEMO_CACHE_SENTINEL;\n  memoCache.index++;\n  return updateQueue;\n}\nfunction basicStateReducer(state, action) {\n  return \"function\" === typeof action ? action(state) : action;\n}\nfunction updateReducer(reducer) {\n  var hook = updateWorkInProgressHook();\n  return updateReducerImpl(hook, currentHook, reducer);\n}\nfunction updateReducerImpl(hook, current, reducer) {\n  var queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var baseQueue = hook.baseQueue,\n    pendingQueue = queue.pending;\n  if (null !== pendingQueue) {\n    if (null !== baseQueue) {\n      var baseFirst = baseQueue.next;\n      baseQueue.next = pendingQueue.next;\n      pendingQueue.next = baseFirst;\n    }\n    current.baseQueue = baseQueue = pendingQueue;\n    queue.pending = null;\n  }\n  pendingQueue = hook.baseState;\n  if (null === baseQueue) hook.memoizedState = pendingQueue;\n  else {\n    current = baseQueue.next;\n    var newBaseQueueFirst = (baseFirst = null),\n      newBaseQueueLast = null,\n      update = current,\n      didReadFromEntangledAsyncAction$60 = !1;\n    do {\n      var updateLane = update.lane & -536870913;\n      if (\n        updateLane !== update.lane\n          ? (workInProgressRootRenderLanes & updateLane) === updateLane\n          : (renderLanes & updateLane) === updateLane\n      ) {\n        var revertLane = update.revertLane;\n        if (0 === revertLane)\n          null !== newBaseQueueLast &&\n            (newBaseQueueLast = newBaseQueueLast.next =\n              {\n                lane: 0,\n                revertLane: 0,\n                gesture: null,\n                action: update.action,\n                hasEagerState: update.hasEagerState,\n                eagerState: update.eagerState,\n                next: null\n              }),\n            updateLane === currentEntangledLane &&\n              (didReadFromEntangledAsyncAction$60 = !0);\n        else if ((renderLanes & revertLane) === revertLane) {\n          update = update.next;\n          revertLane === currentEntangledLane &&\n            (didReadFromEntangledAsyncAction$60 = !0);\n          continue;\n        } else\n          (updateLane = {\n            lane: 0,\n            revertLane: update.revertLane,\n            gesture: null,\n            action: update.action,\n            hasEagerState: update.hasEagerState,\n            eagerState: update.eagerState,\n            next: null\n          }),\n            null === newBaseQueueLast\n              ? ((newBaseQueueFirst = newBaseQueueLast = updateLane),\n                (baseFirst = pendingQueue))\n              : (newBaseQueueLast = newBaseQueueLast.next = updateLane),\n            (currentlyRenderingFiber.lanes |= revertLane),\n            (workInProgressRootSkippedLanes |= revertLane);\n        updateLane = update.action;\n        shouldDoubleInvokeUserFnsInHooksDEV &&\n          reducer(pendingQueue, updateLane);\n        pendingQueue = update.hasEagerState\n          ? update.eagerState\n          : reducer(pendingQueue, updateLane);\n      } else\n        (revertLane = {\n          lane: updateLane,\n          revertLane: update.revertLane,\n          gesture: update.gesture,\n          action: update.action,\n          hasEagerState: update.hasEagerState,\n          eagerState: update.eagerState,\n          next: null\n        }),\n          null === newBaseQueueLast\n            ? ((newBaseQueueFirst = newBaseQueueLast = revertLane),\n              (baseFirst = pendingQueue))\n            : (newBaseQueueLast = newBaseQueueLast.next = revertLane),\n          (currentlyRenderingFiber.lanes |= updateLane),\n          (workInProgressRootSkippedLanes |= updateLane);\n      update = update.next;\n    } while (null !== update && update !== current);\n    null === newBaseQueueLast\n      ? (baseFirst = pendingQueue)\n      : (newBaseQueueLast.next = newBaseQueueFirst);\n    if (\n      !objectIs(pendingQueue, hook.memoizedState) &&\n      ((didReceiveUpdate = !0),\n      didReadFromEntangledAsyncAction$60 &&\n        ((reducer = currentEntangledActionThenable), null !== reducer))\n    )\n      throw reducer;\n    hook.memoizedState = pendingQueue;\n    hook.baseState = baseFirst;\n    hook.baseQueue = newBaseQueueLast;\n    queue.lastRenderedState = pendingQueue;\n  }\n  null === baseQueue && (queue.lanes = 0);\n  return [hook.memoizedState, queue.dispatch];\n}\nfunction rerenderReducer(reducer) {\n  var hook = updateWorkInProgressHook(),\n    queue = hook.queue;\n  if (null === queue) throw Error(formatProdErrorMessage(311));\n  queue.lastRenderedReducer = reducer;\n  var dispatch = queue.dispatch,\n    lastRenderPhaseUpdate = queue.pending,\n    newState = hook.memoizedState;\n  if (null !== lastRenderPhaseUpdate) {\n    queue.pending = null;\n    var update = (lastRenderPhaseUpdate = lastRenderPhaseUpdate.next);\n    do (newState = reducer(newState, update.action)), (update = update.next);\n    while (update !== lastRenderPhaseUpdate);\n    objectIs(newState, hook.memoizedState) || (didReceiveUpdate = !0);\n    hook.memoizedState = newState;\n    null === hook.baseQueue && (hook.baseState = newState);\n    queue.lastRenderedState = newState;\n  }\n  return [newState, dispatch];\n}\nfunction updateSyncExternalStore(subscribe, getSnapshot, getServerSnapshot) {\n  var fiber = currentlyRenderingFiber,\n    hook = updateWorkInProgressHook(),\n    isHydrating$jscomp$0 = isHydrating;\n  if (isHydrating$jscomp$0) {\n    if (void 0 === getServerSnapshot) throw Error(formatProdErrorMessage(407));\n    getServerSnapshot = getServerSnapshot();\n  } else getServerSnapshot = getSnapshot();\n  var snapshotChanged = !objectIs(\n    (currentHook || hook).memoizedState,\n    getServerSnapshot\n  );\n  snapshotChanged &&\n    ((hook.memoizedState = getServerSnapshot), (didReceiveUpdate = !0));\n  hook = hook.queue;\n  updateEffect(subscribeToStore.bind(null, fiber, hook, subscribe), [\n    subscribe\n  ]);\n  if (\n    hook.getSnapshot !== getSnapshot ||\n    snapshotChanged ||\n    (null !== workInProgressHook && workInProgressHook.memoizedState.tag & 1)\n  ) {\n    fiber.flags |= 2048;\n    pushSimpleEffect(\n      9,\n      { destroy: void 0 },\n      updateStoreInstance.bind(\n        null,\n        fiber,\n        hook,\n        getServerSnapshot,\n        getSnapshot\n      ),\n      null\n    );\n    if (null === workInProgressRoot) throw Error(formatProdErrorMessage(349));\n    isHydrating$jscomp$0 ||\n      0 !== (renderLanes & 127) ||\n      pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n  }\n  return getServerSnapshot;\n}\nfunction pushStoreConsistencyCheck(fiber, getSnapshot, renderedSnapshot) {\n  fiber.flags |= 16384;\n  fiber = { getSnapshot: getSnapshot, value: renderedSnapshot };\n  getSnapshot = currentlyRenderingFiber.updateQueue;\n  null === getSnapshot\n    ? ((getSnapshot = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber.updateQueue = getSnapshot),\n      (getSnapshot.stores = [fiber]))\n    : ((renderedSnapshot = getSnapshot.stores),\n      null === renderedSnapshot\n        ? (getSnapshot.stores = [fiber])\n        : renderedSnapshot.push(fiber));\n}\nfunction updateStoreInstance(fiber, inst, nextSnapshot, getSnapshot) {\n  inst.value = nextSnapshot;\n  inst.getSnapshot = getSnapshot;\n  checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n}\nfunction subscribeToStore(fiber, inst, subscribe) {\n  return subscribe(function () {\n    checkIfSnapshotChanged(inst) && forceStoreRerender(fiber);\n  });\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction forceStoreRerender(fiber) {\n  var root = enqueueConcurrentRenderForLane(fiber, 2);\n  null !== root && scheduleUpdateOnFiber(root, fiber, 2);\n}\nfunction mountStateImpl(initialState) {\n  var hook = mountWorkInProgressHook();\n  if (\"function\" === typeof initialState) {\n    var initialStateInitializer = initialState;\n    initialState = initialStateInitializer();\n    if (shouldDoubleInvokeUserFnsInHooksDEV) {\n      setIsStrictModeForDevtools(!0);\n      try {\n        initialStateInitializer();\n      } finally {\n        setIsStrictModeForDevtools(!1);\n      }\n    }\n  }\n  hook.memoizedState = hook.baseState = initialState;\n  hook.queue = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: basicStateReducer,\n    lastRenderedState: initialState\n  };\n  return hook;\n}\nfunction updateOptimisticImpl(hook, current, passthrough, reducer) {\n  hook.baseState = passthrough;\n  return updateReducerImpl(\n    hook,\n    currentHook,\n    \"function\" === typeof reducer ? reducer : basicStateReducer\n  );\n}\nfunction dispatchActionState(\n  fiber,\n  actionQueue,\n  setPendingState,\n  setState,\n  payload\n) {\n  if (isRenderPhaseUpdate(fiber)) throw Error(formatProdErrorMessage(485));\n  fiber = actionQueue.action;\n  if (null !== fiber) {\n    var actionNode = {\n      payload: payload,\n      action: fiber,\n      next: null,\n      isTransition: !0,\n      status: \"pending\",\n      value: null,\n      reason: null,\n      listeners: [],\n      then: function (listener) {\n        actionNode.listeners.push(listener);\n      }\n    };\n    null !== ReactSharedInternals.T\n      ? setPendingState(!0)\n      : (actionNode.isTransition = !1);\n    setState(actionNode);\n    setPendingState = actionQueue.pending;\n    null === setPendingState\n      ? ((actionNode.next = actionQueue.pending = actionNode),\n        runActionStateAction(actionQueue, actionNode))\n      : ((actionNode.next = setPendingState.next),\n        (actionQueue.pending = setPendingState.next = actionNode));\n  }\n}\nfunction runActionStateAction(actionQueue, node) {\n  var action = node.action,\n    payload = node.payload,\n    prevState = actionQueue.state;\n  if (node.isTransition) {\n    var prevTransition = ReactSharedInternals.T,\n      currentTransition = {};\n    ReactSharedInternals.T = currentTransition;\n    try {\n      var returnValue = action(prevState, payload),\n        onStartTransitionFinish = ReactSharedInternals.S;\n      null !== onStartTransitionFinish &&\n        onStartTransitionFinish(currentTransition, returnValue);\n      handleActionReturnValue(actionQueue, node, returnValue);\n    } catch (error) {\n      onActionError(actionQueue, node, error);\n    } finally {\n      null !== prevTransition &&\n        null !== currentTransition.types &&\n        (prevTransition.types = currentTransition.types),\n        (ReactSharedInternals.T = prevTransition);\n    }\n  } else\n    try {\n      (prevTransition = action(prevState, payload)),\n        handleActionReturnValue(actionQueue, node, prevTransition);\n    } catch (error$66) {\n      onActionError(actionQueue, node, error$66);\n    }\n}\nfunction handleActionReturnValue(actionQueue, node, returnValue) {\n  null !== returnValue &&\n  \"object\" === typeof returnValue &&\n  \"function\" === typeof returnValue.then\n    ? returnValue.then(\n        function (nextState) {\n          onActionSuccess(actionQueue, node, nextState);\n        },\n        function (error) {\n          return onActionError(actionQueue, node, error);\n        }\n      )\n    : onActionSuccess(actionQueue, node, returnValue);\n}\nfunction onActionSuccess(actionQueue, actionNode, nextState) {\n  actionNode.status = \"fulfilled\";\n  actionNode.value = nextState;\n  notifyActionListeners(actionNode);\n  actionQueue.state = nextState;\n  actionNode = actionQueue.pending;\n  null !== actionNode &&\n    ((nextState = actionNode.next),\n    nextState === actionNode\n      ? (actionQueue.pending = null)\n      : ((nextState = nextState.next),\n        (actionNode.next = nextState),\n        runActionStateAction(actionQueue, nextState)));\n}\nfunction onActionError(actionQueue, actionNode, error) {\n  var last = actionQueue.pending;\n  actionQueue.pending = null;\n  if (null !== last) {\n    last = last.next;\n    do\n      (actionNode.status = \"rejected\"),\n        (actionNode.reason = error),\n        notifyActionListeners(actionNode),\n        (actionNode = actionNode.next);\n    while (actionNode !== last);\n  }\n  actionQueue.action = null;\n}\nfunction notifyActionListeners(actionNode) {\n  actionNode = actionNode.listeners;\n  for (var i = 0; i < actionNode.length; i++) (0, actionNode[i])();\n}\nfunction actionStateReducer(oldState, newState) {\n  return newState;\n}\nfunction mountActionState(action, initialStateProp) {\n  if (isHydrating) {\n    var ssrFormState = workInProgressRoot.formState;\n    if (null !== ssrFormState) {\n      a: {\n        var JSCompiler_inline_result = currentlyRenderingFiber;\n        if (isHydrating) {\n          if (nextHydratableInstance) {\n            b: {\n              var JSCompiler_inline_result$jscomp$0 = nextHydratableInstance;\n              for (\n                var inRootOrSingleton = rootOrSingletonContext;\n                8 !== JSCompiler_inline_result$jscomp$0.nodeType;\n\n              ) {\n                if (!inRootOrSingleton) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n                JSCompiler_inline_result$jscomp$0 = getNextHydratable(\n                  JSCompiler_inline_result$jscomp$0.nextSibling\n                );\n                if (null === JSCompiler_inline_result$jscomp$0) {\n                  JSCompiler_inline_result$jscomp$0 = null;\n                  break b;\n                }\n              }\n              inRootOrSingleton = JSCompiler_inline_result$jscomp$0.data;\n              JSCompiler_inline_result$jscomp$0 =\n                \"F!\" === inRootOrSingleton || \"F\" === inRootOrSingleton\n                  ? JSCompiler_inline_result$jscomp$0\n                  : null;\n            }\n            if (JSCompiler_inline_result$jscomp$0) {\n              nextHydratableInstance = getNextHydratable(\n                JSCompiler_inline_result$jscomp$0.nextSibling\n              );\n              JSCompiler_inline_result =\n                \"F!\" === JSCompiler_inline_result$jscomp$0.data;\n              break a;\n            }\n          }\n          throwOnHydrationMismatch(JSCompiler_inline_result);\n        }\n        JSCompiler_inline_result = !1;\n      }\n      JSCompiler_inline_result && (initialStateProp = ssrFormState[0]);\n    }\n  }\n  ssrFormState = mountWorkInProgressHook();\n  ssrFormState.memoizedState = ssrFormState.baseState = initialStateProp;\n  JSCompiler_inline_result = {\n    pending: null,\n    lanes: 0,\n    dispatch: null,\n    lastRenderedReducer: actionStateReducer,\n    lastRenderedState: initialStateProp\n  };\n  ssrFormState.queue = JSCompiler_inline_result;\n  ssrFormState = dispatchSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result\n  );\n  JSCompiler_inline_result.dispatch = ssrFormState;\n  JSCompiler_inline_result = mountStateImpl(!1);\n  inRootOrSingleton = dispatchOptimisticSetState.bind(\n    null,\n    currentlyRenderingFiber,\n    !1,\n    JSCompiler_inline_result.queue\n  );\n  JSCompiler_inline_result = mountWorkInProgressHook();\n  JSCompiler_inline_result$jscomp$0 = {\n    state: initialStateProp,\n    dispatch: null,\n    action: action,\n    pending: null\n  };\n  JSCompiler_inline_result.queue = JSCompiler_inline_result$jscomp$0;\n  ssrFormState = dispatchActionState.bind(\n    null,\n    currentlyRenderingFiber,\n    JSCompiler_inline_result$jscomp$0,\n    inRootOrSingleton,\n    ssrFormState\n  );\n  JSCompiler_inline_result$jscomp$0.dispatch = ssrFormState;\n  JSCompiler_inline_result.memoizedState = action;\n  return [initialStateProp, ssrFormState, !1];\n}\nfunction updateActionState(action) {\n  var stateHook = updateWorkInProgressHook();\n  return updateActionStateImpl(stateHook, currentHook, action);\n}\nfunction updateActionStateImpl(stateHook, currentStateHook, action) {\n  currentStateHook = updateReducerImpl(\n    stateHook,\n    currentStateHook,\n    actionStateReducer\n  )[0];\n  stateHook = updateReducer(basicStateReducer)[0];\n  if (\n    \"object\" === typeof currentStateHook &&\n    null !== currentStateHook &&\n    \"function\" === typeof currentStateHook.then\n  )\n    try {\n      var state = useThenable(currentStateHook);\n    } catch (x) {\n      if (x === SuspenseException) throw SuspenseActionException;\n      throw x;\n    }\n  else state = currentStateHook;\n  currentStateHook = updateWorkInProgressHook();\n  var actionQueue = currentStateHook.queue,\n    dispatch = actionQueue.dispatch;\n  action !== currentStateHook.memoizedState &&\n    ((currentlyRenderingFiber.flags |= 2048),\n    pushSimpleEffect(\n      9,\n      { destroy: void 0 },\n      actionStateActionEffect.bind(null, actionQueue, action),\n      null\n    ));\n  return [state, dispatch, stateHook];\n}\nfunction actionStateActionEffect(actionQueue, action) {\n  actionQueue.action = action;\n}\nfunction rerenderActionState(action) {\n  var stateHook = updateWorkInProgressHook(),\n    currentStateHook = currentHook;\n  if (null !== currentStateHook)\n    return updateActionStateImpl(stateHook, currentStateHook, action);\n  updateWorkInProgressHook();\n  stateHook = stateHook.memoizedState;\n  currentStateHook = updateWorkInProgressHook();\n  var dispatch = currentStateHook.queue.dispatch;\n  currentStateHook.memoizedState = action;\n  return [stateHook, dispatch, !1];\n}\nfunction pushSimpleEffect(tag, inst, create, deps) {\n  tag = { tag: tag, create: create, deps: deps, inst: inst, next: null };\n  inst = currentlyRenderingFiber.updateQueue;\n  null === inst &&\n    ((inst = createFunctionComponentUpdateQueue()),\n    (currentlyRenderingFiber.updateQueue = inst));\n  create = inst.lastEffect;\n  null === create\n    ? (inst.lastEffect = tag.next = tag)\n    : ((deps = create.next),\n      (create.next = tag),\n      (tag.next = deps),\n      (inst.lastEffect = tag));\n  return tag;\n}\nfunction updateRef() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction mountEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = mountWorkInProgressHook();\n  currentlyRenderingFiber.flags |= fiberFlags;\n  hook.memoizedState = pushSimpleEffect(\n    1 | hookFlags,\n    { destroy: void 0 },\n    create,\n    void 0 === deps ? null : deps\n  );\n}\nfunction updateEffectImpl(fiberFlags, hookFlags, create, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var inst = hook.memoizedState.inst;\n  null !== currentHook &&\n  null !== deps &&\n  areHookInputsEqual(deps, currentHook.memoizedState.deps)\n    ? (hook.memoizedState = pushSimpleEffect(hookFlags, inst, create, deps))\n    : ((currentlyRenderingFiber.flags |= fiberFlags),\n      (hook.memoizedState = pushSimpleEffect(\n        1 | hookFlags,\n        inst,\n        create,\n        deps\n      )));\n}\nfunction mountEffect(create, deps) {\n  mountEffectImpl(8390656, 8, create, deps);\n}\nfunction updateEffect(create, deps) {\n  updateEffectImpl(2048, 8, create, deps);\n}\nfunction useEffectEventImpl(payload) {\n  currentlyRenderingFiber.flags |= 4;\n  var componentUpdateQueue = currentlyRenderingFiber.updateQueue;\n  if (null === componentUpdateQueue)\n    (componentUpdateQueue = createFunctionComponentUpdateQueue()),\n      (currentlyRenderingFiber.updateQueue = componentUpdateQueue),\n      (componentUpdateQueue.events = [payload]);\n  else {\n    var events = componentUpdateQueue.events;\n    null === events\n      ? (componentUpdateQueue.events = [payload])\n      : events.push(payload);\n  }\n}\nfunction updateEvent(callback) {\n  var ref = updateWorkInProgressHook().memoizedState;\n  useEffectEventImpl({ ref: ref, nextImpl: callback });\n  return function () {\n    if (0 !== (executionContext & 2)) throw Error(formatProdErrorMessage(440));\n    return ref.impl.apply(void 0, arguments);\n  };\n}\nfunction updateInsertionEffect(create, deps) {\n  return updateEffectImpl(4, 2, create, deps);\n}\nfunction updateLayoutEffect(create, deps) {\n  return updateEffectImpl(4, 4, create, deps);\n}\nfunction imperativeHandleEffect(create, ref) {\n  if (\"function\" === typeof ref) {\n    create = create();\n    var refCleanup = ref(create);\n    return function () {\n      \"function\" === typeof refCleanup ? refCleanup() : ref(null);\n    };\n  }\n  if (null !== ref && void 0 !== ref)\n    return (\n      (create = create()),\n      (ref.current = create),\n      function () {\n        ref.current = null;\n      }\n    );\n}\nfunction updateImperativeHandle(ref, create, deps) {\n  deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n  updateEffectImpl(4, 4, imperativeHandleEffect.bind(null, create, ref), deps);\n}\nfunction mountDebugValue() {}\nfunction updateCallback(callback, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  hook.memoizedState = [callback, deps];\n  return callback;\n}\nfunction updateMemo(nextCreate, deps) {\n  var hook = updateWorkInProgressHook();\n  deps = void 0 === deps ? null : deps;\n  var prevState = hook.memoizedState;\n  if (null !== deps && areHookInputsEqual(deps, prevState[1]))\n    return prevState[0];\n  prevState = nextCreate();\n  if (shouldDoubleInvokeUserFnsInHooksDEV) {\n    setIsStrictModeForDevtools(!0);\n    try {\n      nextCreate();\n    } finally {\n      setIsStrictModeForDevtools(!1);\n    }\n  }\n  hook.memoizedState = [prevState, deps];\n  return prevState;\n}\nfunction mountDeferredValueImpl(hook, value, initialValue) {\n  if (\n    void 0 === initialValue ||\n    (0 !== (renderLanes & 1073741824) &&\n      0 === (workInProgressRootRenderLanes & 261930))\n  )\n    return (hook.memoizedState = value);\n  hook.memoizedState = initialValue;\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return initialValue;\n}\nfunction updateDeferredValueImpl(hook, prevValue, value, initialValue) {\n  if (objectIs(value, prevValue)) return value;\n  if (null !== currentTreeHiddenStackCursor.current)\n    return (\n      (hook = mountDeferredValueImpl(hook, value, initialValue)),\n      objectIs(hook, prevValue) || (didReceiveUpdate = !0),\n      hook\n    );\n  if (\n    0 === (renderLanes & 42) ||\n    (0 !== (renderLanes & 1073741824) &&\n      0 === (workInProgressRootRenderLanes & 261930))\n  )\n    return (didReceiveUpdate = !0), (hook.memoizedState = value);\n  hook = requestDeferredLane();\n  currentlyRenderingFiber.lanes |= hook;\n  workInProgressRootSkippedLanes |= hook;\n  return prevValue;\n}\nfunction startTransition(fiber, queue, pendingState, finishedState, callback) {\n  var previousPriority = ReactDOMSharedInternals.p;\n  ReactDOMSharedInternals.p =\n    0 !== previousPriority && 8 > previousPriority ? previousPriority : 8;\n  var prevTransition = ReactSharedInternals.T,\n    currentTransition = {};\n  ReactSharedInternals.T = currentTransition;\n  dispatchOptimisticSetState(fiber, !1, queue, pendingState);\n  try {\n    var returnValue = callback(),\n      onStartTransitionFinish = ReactSharedInternals.S;\n    null !== onStartTransitionFinish &&\n      onStartTransitionFinish(currentTransition, returnValue);\n    if (\n      null !== returnValue &&\n      \"object\" === typeof returnValue &&\n      \"function\" === typeof returnValue.then\n    ) {\n      var thenableForFinishedState = chainThenableValue(\n        returnValue,\n        finishedState\n      );\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        thenableForFinishedState,\n        requestUpdateLane(fiber)\n      );\n    } else\n      dispatchSetStateInternal(\n        fiber,\n        queue,\n        finishedState,\n        requestUpdateLane(fiber)\n      );\n  } catch (error) {\n    dispatchSetStateInternal(\n      fiber,\n      queue,\n      { then: function () {}, status: \"rejected\", reason: error },\n      requestUpdateLane()\n    );\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      null !== prevTransition &&\n        null !== currentTransition.types &&\n        (prevTransition.types = currentTransition.types),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction noop() {}\nfunction startHostTransition(formFiber, pendingState, action, formData) {\n  if (5 !== formFiber.tag) throw Error(formatProdErrorMessage(476));\n  var queue = ensureFormComponentIsStateful(formFiber).queue;\n  startTransition(\n    formFiber,\n    queue,\n    pendingState,\n    sharedNotPendingObject,\n    null === action\n      ? noop\n      : function () {\n          requestFormReset$1(formFiber);\n          return action(formData);\n        }\n  );\n}\nfunction ensureFormComponentIsStateful(formFiber) {\n  var existingStateHook = formFiber.memoizedState;\n  if (null !== existingStateHook) return existingStateHook;\n  existingStateHook = {\n    memoizedState: sharedNotPendingObject,\n    baseState: sharedNotPendingObject,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: sharedNotPendingObject\n    },\n    next: null\n  };\n  var initialResetState = {};\n  existingStateHook.next = {\n    memoizedState: initialResetState,\n    baseState: initialResetState,\n    baseQueue: null,\n    queue: {\n      pending: null,\n      lanes: 0,\n      dispatch: null,\n      lastRenderedReducer: basicStateReducer,\n      lastRenderedState: initialResetState\n    },\n    next: null\n  };\n  formFiber.memoizedState = existingStateHook;\n  formFiber = formFiber.alternate;\n  null !== formFiber && (formFiber.memoizedState = existingStateHook);\n  return existingStateHook;\n}\nfunction requestFormReset$1(formFiber) {\n  var stateHook = ensureFormComponentIsStateful(formFiber);\n  null === stateHook.next && (stateHook = formFiber.alternate.memoizedState);\n  dispatchSetStateInternal(\n    formFiber,\n    stateHook.next.queue,\n    {},\n    requestUpdateLane()\n  );\n}\nfunction useHostTransitionStatus() {\n  return readContext(HostTransitionContext);\n}\nfunction updateId() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction updateRefresh() {\n  return updateWorkInProgressHook().memoizedState;\n}\nfunction refreshCache(fiber) {\n  for (var provider = fiber.return; null !== provider; ) {\n    switch (provider.tag) {\n      case 24:\n      case 3:\n        var lane = requestUpdateLane();\n        fiber = createUpdate(lane);\n        var root$69 = enqueueUpdate(provider, fiber, lane);\n        null !== root$69 &&\n          (scheduleUpdateOnFiber(root$69, provider, lane),\n          entangleTransitions(root$69, provider, lane));\n        provider = { cache: createCache() };\n        fiber.payload = provider;\n        return;\n    }\n    provider = provider.return;\n  }\n}\nfunction dispatchReducerAction(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  action = {\n    lane: lane,\n    revertLane: 0,\n    gesture: null,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  isRenderPhaseUpdate(fiber)\n    ? enqueueRenderPhaseUpdate(queue, action)\n    : ((action = enqueueConcurrentHookUpdate(fiber, queue, action, lane)),\n      null !== action &&\n        (scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane)));\n}\nfunction dispatchSetState(fiber, queue, action) {\n  var lane = requestUpdateLane();\n  dispatchSetStateInternal(fiber, queue, action, lane);\n}\nfunction dispatchSetStateInternal(fiber, queue, action, lane) {\n  var update = {\n    lane: lane,\n    revertLane: 0,\n    gesture: null,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) enqueueRenderPhaseUpdate(queue, update);\n  else {\n    var alternate = fiber.alternate;\n    if (\n      0 === fiber.lanes &&\n      (null === alternate || 0 === alternate.lanes) &&\n      ((alternate = queue.lastRenderedReducer), null !== alternate)\n    )\n      try {\n        var currentState = queue.lastRenderedState,\n          eagerState = alternate(currentState, action);\n        update.hasEagerState = !0;\n        update.eagerState = eagerState;\n        if (objectIs(eagerState, currentState))\n          return (\n            enqueueUpdate$1(fiber, queue, update, 0),\n            null === workInProgressRoot && finishQueueingConcurrentUpdates(),\n            !1\n          );\n      } catch (error) {\n      } finally {\n      }\n    action = enqueueConcurrentHookUpdate(fiber, queue, update, lane);\n    if (null !== action)\n      return (\n        scheduleUpdateOnFiber(action, fiber, lane),\n        entangleTransitionUpdate(action, queue, lane),\n        !0\n      );\n  }\n  return !1;\n}\nfunction dispatchOptimisticSetState(fiber, throwIfDuringRender, queue, action) {\n  action = {\n    lane: 2,\n    revertLane: requestTransitionLane(),\n    gesture: null,\n    action: action,\n    hasEagerState: !1,\n    eagerState: null,\n    next: null\n  };\n  if (isRenderPhaseUpdate(fiber)) {\n    if (throwIfDuringRender) throw Error(formatProdErrorMessage(479));\n  } else\n    (throwIfDuringRender = enqueueConcurrentHookUpdate(\n      fiber,\n      queue,\n      action,\n      2\n    )),\n      null !== throwIfDuringRender &&\n        scheduleUpdateOnFiber(throwIfDuringRender, fiber, 2);\n}\nfunction isRenderPhaseUpdate(fiber) {\n  var alternate = fiber.alternate;\n  return (\n    fiber === currentlyRenderingFiber ||\n    (null !== alternate && alternate === currentlyRenderingFiber)\n  );\n}\nfunction enqueueRenderPhaseUpdate(queue, update) {\n  didScheduleRenderPhaseUpdateDuringThisPass = didScheduleRenderPhaseUpdate =\n    !0;\n  var pending = queue.pending;\n  null === pending\n    ? (update.next = update)\n    : ((update.next = pending.next), (pending.next = update));\n  queue.pending = update;\n}\nfunction entangleTransitionUpdate(root, queue, lane) {\n  if (0 !== (lane & 4194048)) {\n    var queueLanes = queue.lanes;\n    queueLanes &= root.pendingLanes;\n    lane |= queueLanes;\n    queue.lanes = lane;\n    markRootEntangled(root, lane);\n  }\n}\nvar ContextOnlyDispatcher = {\n  readContext: readContext,\n  use: use,\n  useCallback: throwInvalidHookError,\n  useContext: throwInvalidHookError,\n  useEffect: throwInvalidHookError,\n  useImperativeHandle: throwInvalidHookError,\n  useLayoutEffect: throwInvalidHookError,\n  useInsertionEffect: throwInvalidHookError,\n  useMemo: throwInvalidHookError,\n  useReducer: throwInvalidHookError,\n  useRef: throwInvalidHookError,\n  useState: throwInvalidHookError,\n  useDebugValue: throwInvalidHookError,\n  useDeferredValue: throwInvalidHookError,\n  useTransition: throwInvalidHookError,\n  useSyncExternalStore: throwInvalidHookError,\n  useId: throwInvalidHookError,\n  useHostTransitionStatus: throwInvalidHookError,\n  useFormState: throwInvalidHookError,\n  useActionState: throwInvalidHookError,\n  useOptimistic: throwInvalidHookError,\n  useMemoCache: throwInvalidHookError,\n  useCacheRefresh: throwInvalidHookError\n};\nContextOnlyDispatcher.useEffectEvent = throwInvalidHookError;\nvar HooksDispatcherOnMount = {\n    readContext: readContext,\n    use: use,\n    useCallback: function (callback, deps) {\n      mountWorkInProgressHook().memoizedState = [\n        callback,\n        void 0 === deps ? null : deps\n      ];\n      return callback;\n    },\n    useContext: readContext,\n    useEffect: mountEffect,\n    useImperativeHandle: function (ref, create, deps) {\n      deps = null !== deps && void 0 !== deps ? deps.concat([ref]) : null;\n      mountEffectImpl(\n        4194308,\n        4,\n        imperativeHandleEffect.bind(null, create, ref),\n        deps\n      );\n    },\n    useLayoutEffect: function (create, deps) {\n      return mountEffectImpl(4194308, 4, create, deps);\n    },\n    useInsertionEffect: function (create, deps) {\n      mountEffectImpl(4, 2, create, deps);\n    },\n    useMemo: function (nextCreate, deps) {\n      var hook = mountWorkInProgressHook();\n      deps = void 0 === deps ? null : deps;\n      var nextValue = nextCreate();\n      if (shouldDoubleInvokeUserFnsInHooksDEV) {\n        setIsStrictModeForDevtools(!0);\n        try {\n          nextCreate();\n        } finally {\n          setIsStrictModeForDevtools(!1);\n        }\n      }\n      hook.memoizedState = [nextValue, deps];\n      return nextValue;\n    },\n    useReducer: function (reducer, initialArg, init) {\n      var hook = mountWorkInProgressHook();\n      if (void 0 !== init) {\n        var initialState = init(initialArg);\n        if (shouldDoubleInvokeUserFnsInHooksDEV) {\n          setIsStrictModeForDevtools(!0);\n          try {\n            init(initialArg);\n          } finally {\n            setIsStrictModeForDevtools(!1);\n          }\n        }\n      } else initialState = initialArg;\n      hook.memoizedState = hook.baseState = initialState;\n      reducer = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: reducer,\n        lastRenderedState: initialState\n      };\n      hook.queue = reducer;\n      reducer = reducer.dispatch = dispatchReducerAction.bind(\n        null,\n        currentlyRenderingFiber,\n        reducer\n      );\n      return [hook.memoizedState, reducer];\n    },\n    useRef: function (initialValue) {\n      var hook = mountWorkInProgressHook();\n      initialValue = { current: initialValue };\n      return (hook.memoizedState = initialValue);\n    },\n    useState: function (initialState) {\n      initialState = mountStateImpl(initialState);\n      var queue = initialState.queue,\n        dispatch = dispatchSetState.bind(null, currentlyRenderingFiber, queue);\n      queue.dispatch = dispatch;\n      return [initialState.memoizedState, dispatch];\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = mountWorkInProgressHook();\n      return mountDeferredValueImpl(hook, value, initialValue);\n    },\n    useTransition: function () {\n      var stateHook = mountStateImpl(!1);\n      stateHook = startTransition.bind(\n        null,\n        currentlyRenderingFiber,\n        stateHook.queue,\n        !0,\n        !1\n      );\n      mountWorkInProgressHook().memoizedState = stateHook;\n      return [!1, stateHook];\n    },\n    useSyncExternalStore: function (subscribe, getSnapshot, getServerSnapshot) {\n      var fiber = currentlyRenderingFiber,\n        hook = mountWorkInProgressHook();\n      if (isHydrating) {\n        if (void 0 === getServerSnapshot)\n          throw Error(formatProdErrorMessage(407));\n        getServerSnapshot = getServerSnapshot();\n      } else {\n        getServerSnapshot = getSnapshot();\n        if (null === workInProgressRoot)\n          throw Error(formatProdErrorMessage(349));\n        0 !== (workInProgressRootRenderLanes & 127) ||\n          pushStoreConsistencyCheck(fiber, getSnapshot, getServerSnapshot);\n      }\n      hook.memoizedState = getServerSnapshot;\n      var inst = { value: getServerSnapshot, getSnapshot: getSnapshot };\n      hook.queue = inst;\n      mountEffect(subscribeToStore.bind(null, fiber, inst, subscribe), [\n        subscribe\n      ]);\n      fiber.flags |= 2048;\n      pushSimpleEffect(\n        9,\n        { destroy: void 0 },\n        updateStoreInstance.bind(\n          null,\n          fiber,\n          inst,\n          getServerSnapshot,\n          getSnapshot\n        ),\n        null\n      );\n      return getServerSnapshot;\n    },\n    useId: function () {\n      var hook = mountWorkInProgressHook(),\n        identifierPrefix = workInProgressRoot.identifierPrefix;\n      if (isHydrating) {\n        var JSCompiler_inline_result = treeContextOverflow;\n        var idWithLeadingBit = treeContextId;\n        JSCompiler_inline_result =\n          (\n            idWithLeadingBit & ~(1 << (32 - clz32(idWithLeadingBit) - 1))\n          ).toString(32) + JSCompiler_inline_result;\n        identifierPrefix =\n          \"_\" + identifierPrefix + \"R_\" + JSCompiler_inline_result;\n        JSCompiler_inline_result = localIdCounter++;\n        0 < JSCompiler_inline_result &&\n          (identifierPrefix += \"H\" + JSCompiler_inline_result.toString(32));\n        identifierPrefix += \"_\";\n      } else\n        (JSCompiler_inline_result = globalClientIdCounter++),\n          (identifierPrefix =\n            \"_\" +\n            identifierPrefix +\n            \"r_\" +\n            JSCompiler_inline_result.toString(32) +\n            \"_\");\n      return (hook.memoizedState = identifierPrefix);\n    },\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: mountActionState,\n    useActionState: mountActionState,\n    useOptimistic: function (passthrough) {\n      var hook = mountWorkInProgressHook();\n      hook.memoizedState = hook.baseState = passthrough;\n      var queue = {\n        pending: null,\n        lanes: 0,\n        dispatch: null,\n        lastRenderedReducer: null,\n        lastRenderedState: null\n      };\n      hook.queue = queue;\n      hook = dispatchOptimisticSetState.bind(\n        null,\n        currentlyRenderingFiber,\n        !0,\n        queue\n      );\n      queue.dispatch = hook;\n      return [passthrough, hook];\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: function () {\n      return (mountWorkInProgressHook().memoizedState = refreshCache.bind(\n        null,\n        currentlyRenderingFiber\n      ));\n    },\n    useEffectEvent: function (callback) {\n      var hook = mountWorkInProgressHook(),\n        ref = { impl: callback };\n      hook.memoizedState = ref;\n      return function () {\n        if (0 !== (executionContext & 2))\n          throw Error(formatProdErrorMessage(440));\n        return ref.impl.apply(void 0, arguments);\n      };\n    }\n  },\n  HooksDispatcherOnUpdate = {\n    readContext: readContext,\n    use: use,\n    useCallback: updateCallback,\n    useContext: readContext,\n    useEffect: updateEffect,\n    useImperativeHandle: updateImperativeHandle,\n    useInsertionEffect: updateInsertionEffect,\n    useLayoutEffect: updateLayoutEffect,\n    useMemo: updateMemo,\n    useReducer: updateReducer,\n    useRef: updateRef,\n    useState: function () {\n      return updateReducer(basicStateReducer);\n    },\n    useDebugValue: mountDebugValue,\n    useDeferredValue: function (value, initialValue) {\n      var hook = updateWorkInProgressHook();\n      return updateDeferredValueImpl(\n        hook,\n        currentHook.memoizedState,\n        value,\n        initialValue\n      );\n    },\n    useTransition: function () {\n      var booleanOrThenable = updateReducer(basicStateReducer)[0],\n        start = updateWorkInProgressHook().memoizedState;\n      return [\n        \"boolean\" === typeof booleanOrThenable\n          ? booleanOrThenable\n          : useThenable(booleanOrThenable),\n        start\n      ];\n    },\n    useSyncExternalStore: updateSyncExternalStore,\n    useId: updateId,\n    useHostTransitionStatus: useHostTransitionStatus,\n    useFormState: updateActionState,\n    useActionState: updateActionState,\n    useOptimistic: function (passthrough, reducer) {\n      var hook = updateWorkInProgressHook();\n      return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n    },\n    useMemoCache: useMemoCache,\n    useCacheRefresh: updateRefresh\n  };\nHooksDispatcherOnUpdate.useEffectEvent = updateEvent;\nvar HooksDispatcherOnRerender = {\n  readContext: readContext,\n  use: use,\n  useCallback: updateCallback,\n  useContext: readContext,\n  useEffect: updateEffect,\n  useImperativeHandle: updateImperativeHandle,\n  useInsertionEffect: updateInsertionEffect,\n  useLayoutEffect: updateLayoutEffect,\n  useMemo: updateMemo,\n  useReducer: rerenderReducer,\n  useRef: updateRef,\n  useState: function () {\n    return rerenderReducer(basicStateReducer);\n  },\n  useDebugValue: mountDebugValue,\n  useDeferredValue: function (value, initialValue) {\n    var hook = updateWorkInProgressHook();\n    return null === currentHook\n      ? mountDeferredValueImpl(hook, value, initialValue)\n      : updateDeferredValueImpl(\n          hook,\n          currentHook.memoizedState,\n          value,\n          initialValue\n        );\n  },\n  useTransition: function () {\n    var booleanOrThenable = rerenderReducer(basicStateReducer)[0],\n      start = updateWorkInProgressHook().memoizedState;\n    return [\n      \"boolean\" === typeof booleanOrThenable\n        ? booleanOrThenable\n        : useThenable(booleanOrThenable),\n      start\n    ];\n  },\n  useSyncExternalStore: updateSyncExternalStore,\n  useId: updateId,\n  useHostTransitionStatus: useHostTransitionStatus,\n  useFormState: rerenderActionState,\n  useActionState: rerenderActionState,\n  useOptimistic: function (passthrough, reducer) {\n    var hook = updateWorkInProgressHook();\n    if (null !== currentHook)\n      return updateOptimisticImpl(hook, currentHook, passthrough, reducer);\n    hook.baseState = passthrough;\n    return [passthrough, hook.queue.dispatch];\n  },\n  useMemoCache: useMemoCache,\n  useCacheRefresh: updateRefresh\n};\nHooksDispatcherOnRerender.useEffectEvent = updateEvent;\nfunction applyDerivedStateFromProps(\n  workInProgress,\n  ctor,\n  getDerivedStateFromProps,\n  nextProps\n) {\n  ctor = workInProgress.memoizedState;\n  getDerivedStateFromProps = getDerivedStateFromProps(nextProps, ctor);\n  getDerivedStateFromProps =\n    null === getDerivedStateFromProps || void 0 === getDerivedStateFromProps\n      ? ctor\n      : assign({}, ctor, getDerivedStateFromProps);\n  workInProgress.memoizedState = getDerivedStateFromProps;\n  0 === workInProgress.lanes &&\n    (workInProgress.updateQueue.baseState = getDerivedStateFromProps);\n}\nvar classComponentUpdater = {\n  enqueueSetState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueReplaceState: function (inst, payload, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 1;\n    update.payload = payload;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    payload = enqueueUpdate(inst, update, lane);\n    null !== payload &&\n      (scheduleUpdateOnFiber(payload, inst, lane),\n      entangleTransitions(payload, inst, lane));\n  },\n  enqueueForceUpdate: function (inst, callback) {\n    inst = inst._reactInternals;\n    var lane = requestUpdateLane(),\n      update = createUpdate(lane);\n    update.tag = 2;\n    void 0 !== callback && null !== callback && (update.callback = callback);\n    callback = enqueueUpdate(inst, update, lane);\n    null !== callback &&\n      (scheduleUpdateOnFiber(callback, inst, lane),\n      entangleTransitions(callback, inst, lane));\n  }\n};\nfunction checkShouldComponentUpdate(\n  workInProgress,\n  ctor,\n  oldProps,\n  newProps,\n  oldState,\n  newState,\n  nextContext\n) {\n  workInProgress = workInProgress.stateNode;\n  return \"function\" === typeof workInProgress.shouldComponentUpdate\n    ? workInProgress.shouldComponentUpdate(newProps, newState, nextContext)\n    : ctor.prototype && ctor.prototype.isPureReactComponent\n      ? !shallowEqual(oldProps, newProps) || !shallowEqual(oldState, newState)\n      : !0;\n}\nfunction callComponentWillReceiveProps(\n  workInProgress,\n  instance,\n  newProps,\n  nextContext\n) {\n  workInProgress = instance.state;\n  \"function\" === typeof instance.componentWillReceiveProps &&\n    instance.componentWillReceiveProps(newProps, nextContext);\n  \"function\" === typeof instance.UNSAFE_componentWillReceiveProps &&\n    instance.UNSAFE_componentWillReceiveProps(newProps, nextContext);\n  instance.state !== workInProgress &&\n    classComponentUpdater.enqueueReplaceState(instance, instance.state, null);\n}\nfunction resolveClassComponentProps(Component, baseProps) {\n  var newProps = baseProps;\n  if (\"ref\" in baseProps) {\n    newProps = {};\n    for (var propName in baseProps)\n      \"ref\" !== propName && (newProps[propName] = baseProps[propName]);\n  }\n  if ((Component = Component.defaultProps)) {\n    newProps === baseProps && (newProps = assign({}, newProps));\n    for (var propName$73 in Component)\n      void 0 === newProps[propName$73] &&\n        (newProps[propName$73] = Component[propName$73]);\n  }\n  return newProps;\n}\nfunction defaultOnUncaughtError(error) {\n  reportGlobalError(error);\n}\nfunction defaultOnCaughtError(error) {\n  console.error(error);\n}\nfunction defaultOnRecoverableError(error) {\n  reportGlobalError(error);\n}\nfunction logUncaughtError(root, errorInfo) {\n  try {\n    var onUncaughtError = root.onUncaughtError;\n    onUncaughtError(errorInfo.value, { componentStack: errorInfo.stack });\n  } catch (e$74) {\n    setTimeout(function () {\n      throw e$74;\n    });\n  }\n}\nfunction logCaughtError(root, boundary, errorInfo) {\n  try {\n    var onCaughtError = root.onCaughtError;\n    onCaughtError(errorInfo.value, {\n      componentStack: errorInfo.stack,\n      errorBoundary: 1 === boundary.tag ? boundary.stateNode : null\n    });\n  } catch (e$75) {\n    setTimeout(function () {\n      throw e$75;\n    });\n  }\n}\nfunction createRootErrorUpdate(root, errorInfo, lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  lane.payload = { element: null };\n  lane.callback = function () {\n    logUncaughtError(root, errorInfo);\n  };\n  return lane;\n}\nfunction createClassErrorUpdate(lane) {\n  lane = createUpdate(lane);\n  lane.tag = 3;\n  return lane;\n}\nfunction initializeClassErrorUpdate(update, root, fiber, errorInfo) {\n  var getDerivedStateFromError = fiber.type.getDerivedStateFromError;\n  if (\"function\" === typeof getDerivedStateFromError) {\n    var error = errorInfo.value;\n    update.payload = function () {\n      return getDerivedStateFromError(error);\n    };\n    update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n    };\n  }\n  var inst = fiber.stateNode;\n  null !== inst &&\n    \"function\" === typeof inst.componentDidCatch &&\n    (update.callback = function () {\n      logCaughtError(root, fiber, errorInfo);\n      \"function\" !== typeof getDerivedStateFromError &&\n        (null === legacyErrorBoundariesThatAlreadyFailed\n          ? (legacyErrorBoundariesThatAlreadyFailed = new Set([this]))\n          : legacyErrorBoundariesThatAlreadyFailed.add(this));\n      var stack = errorInfo.stack;\n      this.componentDidCatch(errorInfo.value, {\n        componentStack: null !== stack ? stack : \"\"\n      });\n    });\n}\nfunction throwException(\n  root,\n  returnFiber,\n  sourceFiber,\n  value,\n  rootRenderLanes\n) {\n  sourceFiber.flags |= 32768;\n  if (\n    null !== value &&\n    \"object\" === typeof value &&\n    \"function\" === typeof value.then\n  ) {\n    returnFiber = sourceFiber.alternate;\n    null !== returnFiber &&\n      propagateParentContextChanges(\n        returnFiber,\n        sourceFiber,\n        rootRenderLanes,\n        !0\n      );\n    sourceFiber = suspenseHandlerStackCursor.current;\n    if (null !== sourceFiber) {\n      switch (sourceFiber.tag) {\n        case 31:\n        case 13:\n          return (\n            null === shellBoundary\n              ? renderDidSuspendDelayIfPossible()\n              : null === sourceFiber.alternate &&\n                0 === workInProgressRootExitStatus &&\n                (workInProgressRootExitStatus = 3),\n            (sourceFiber.flags &= -257),\n            (sourceFiber.flags |= 65536),\n            (sourceFiber.lanes = rootRenderLanes),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? (sourceFiber.updateQueue = new Set([value]))\n                  : returnFiber.add(value),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n        case 22:\n          return (\n            (sourceFiber.flags |= 65536),\n            value === noopSuspenseyCommitThenable\n              ? (sourceFiber.flags |= 16384)\n              : ((returnFiber = sourceFiber.updateQueue),\n                null === returnFiber\n                  ? ((returnFiber = {\n                      transitions: null,\n                      markerInstances: null,\n                      retryQueue: new Set([value])\n                    }),\n                    (sourceFiber.updateQueue = returnFiber))\n                  : ((sourceFiber = returnFiber.retryQueue),\n                    null === sourceFiber\n                      ? (returnFiber.retryQueue = new Set([value]))\n                      : sourceFiber.add(value)),\n                attachPingListener(root, value, rootRenderLanes)),\n            !1\n          );\n      }\n      throw Error(formatProdErrorMessage(435, sourceFiber.tag));\n    }\n    attachPingListener(root, value, rootRenderLanes);\n    renderDidSuspendDelayIfPossible();\n    return !1;\n  }\n  if (isHydrating)\n    return (\n      (returnFiber = suspenseHandlerStackCursor.current),\n      null !== returnFiber\n        ? (0 === (returnFiber.flags & 65536) && (returnFiber.flags |= 256),\n          (returnFiber.flags |= 65536),\n          (returnFiber.lanes = rootRenderLanes),\n          value !== HydrationMismatchException &&\n            ((root = Error(formatProdErrorMessage(422), { cause: value })),\n            queueHydrationError(createCapturedValueAtFiber(root, sourceFiber))))\n        : (value !== HydrationMismatchException &&\n            ((returnFiber = Error(formatProdErrorMessage(423), {\n              cause: value\n            })),\n            queueHydrationError(\n              createCapturedValueAtFiber(returnFiber, sourceFiber)\n            )),\n          (root = root.current.alternate),\n          (root.flags |= 65536),\n          (rootRenderLanes &= -rootRenderLanes),\n          (root.lanes |= rootRenderLanes),\n          (value = createCapturedValueAtFiber(value, sourceFiber)),\n          (rootRenderLanes = createRootErrorUpdate(\n            root.stateNode,\n            value,\n            rootRenderLanes\n          )),\n          enqueueCapturedUpdate(root, rootRenderLanes),\n          4 !== workInProgressRootExitStatus &&\n            (workInProgressRootExitStatus = 2)),\n      !1\n    );\n  var wrapperError = Error(formatProdErrorMessage(520), { cause: value });\n  wrapperError = createCapturedValueAtFiber(wrapperError, sourceFiber);\n  null === workInProgressRootConcurrentErrors\n    ? (workInProgressRootConcurrentErrors = [wrapperError])\n    : workInProgressRootConcurrentErrors.push(wrapperError);\n  4 !== workInProgressRootExitStatus && (workInProgressRootExitStatus = 2);\n  if (null === returnFiber) return !0;\n  value = createCapturedValueAtFiber(value, sourceFiber);\n  sourceFiber = returnFiber;\n  do {\n    switch (sourceFiber.tag) {\n      case 3:\n        return (\n          (sourceFiber.flags |= 65536),\n          (root = rootRenderLanes & -rootRenderLanes),\n          (sourceFiber.lanes |= root),\n          (root = createRootErrorUpdate(sourceFiber.stateNode, value, root)),\n          enqueueCapturedUpdate(sourceFiber, root),\n          !1\n        );\n      case 1:\n        if (\n          ((returnFiber = sourceFiber.type),\n          (wrapperError = sourceFiber.stateNode),\n          0 === (sourceFiber.flags & 128) &&\n            (\"function\" === typeof returnFiber.getDerivedStateFromError ||\n              (null !== wrapperError &&\n                \"function\" === typeof wrapperError.componentDidCatch &&\n                (null === legacyErrorBoundariesThatAlreadyFailed ||\n                  !legacyErrorBoundariesThatAlreadyFailed.has(wrapperError)))))\n        )\n          return (\n            (sourceFiber.flags |= 65536),\n            (rootRenderLanes &= -rootRenderLanes),\n            (sourceFiber.lanes |= rootRenderLanes),\n            (rootRenderLanes = createClassErrorUpdate(rootRenderLanes)),\n            initializeClassErrorUpdate(\n              rootRenderLanes,\n              root,\n              sourceFiber,\n              value\n            ),\n            enqueueCapturedUpdate(sourceFiber, rootRenderLanes),\n            !1\n          );\n    }\n    sourceFiber = sourceFiber.return;\n  } while (null !== sourceFiber);\n  return !1;\n}\nvar SelectiveHydrationException = Error(formatProdErrorMessage(461)),\n  didReceiveUpdate = !1;\nfunction reconcileChildren(current, workInProgress, nextChildren, renderLanes) {\n  workInProgress.child =\n    null === current\n      ? mountChildFibers(workInProgress, null, nextChildren, renderLanes)\n      : reconcileChildFibers(\n          workInProgress,\n          current.child,\n          nextChildren,\n          renderLanes\n        );\n}\nfunction updateForwardRef(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  Component = Component.render;\n  var ref = workInProgress.ref;\n  if (\"ref\" in nextProps) {\n    var propsWithoutRef = {};\n    for (var key in nextProps)\n      \"ref\" !== key && (propsWithoutRef[key] = nextProps[key]);\n  } else propsWithoutRef = nextProps;\n  prepareToReadContext(workInProgress);\n  nextProps = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    propsWithoutRef,\n    ref,\n    renderLanes\n  );\n  key = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && key && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null === current) {\n    var type = Component.type;\n    if (\n      \"function\" === typeof type &&\n      !shouldConstruct(type) &&\n      void 0 === type.defaultProps &&\n      null === Component.compare\n    )\n      return (\n        (workInProgress.tag = 15),\n        (workInProgress.type = type),\n        updateSimpleMemoComponent(\n          current,\n          workInProgress,\n          type,\n          nextProps,\n          renderLanes\n        )\n      );\n    current = createFiberFromTypeAndProps(\n      Component.type,\n      null,\n      nextProps,\n      workInProgress,\n      workInProgress.mode,\n      renderLanes\n    );\n    current.ref = workInProgress.ref;\n    current.return = workInProgress;\n    return (workInProgress.child = current);\n  }\n  type = current.child;\n  if (!checkScheduledUpdateOrContext(current, renderLanes)) {\n    var prevProps = type.memoizedProps;\n    Component = Component.compare;\n    Component = null !== Component ? Component : shallowEqual;\n    if (Component(prevProps, nextProps) && current.ref === workInProgress.ref)\n      return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n  }\n  workInProgress.flags |= 1;\n  current = createWorkInProgress(type, nextProps);\n  current.ref = workInProgress.ref;\n  current.return = workInProgress;\n  return (workInProgress.child = current);\n}\nfunction updateSimpleMemoComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  if (null !== current) {\n    var prevProps = current.memoizedProps;\n    if (\n      shallowEqual(prevProps, nextProps) &&\n      current.ref === workInProgress.ref\n    )\n      if (\n        ((didReceiveUpdate = !1),\n        (workInProgress.pendingProps = nextProps = prevProps),\n        checkScheduledUpdateOrContext(current, renderLanes))\n      )\n        0 !== (current.flags & 131072) && (didReceiveUpdate = !0);\n      else\n        return (\n          (workInProgress.lanes = current.lanes),\n          bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n        );\n  }\n  return updateFunctionComponent(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    renderLanes\n  );\n}\nfunction updateOffscreenComponent(\n  current,\n  workInProgress,\n  renderLanes,\n  nextProps\n) {\n  var nextChildren = nextProps.children,\n    prevState = null !== current ? current.memoizedState : null;\n  null === current &&\n    null === workInProgress.stateNode &&\n    (workInProgress.stateNode = {\n      _visibility: 1,\n      _pendingMarkers: null,\n      _retryCache: null,\n      _transitions: null\n    });\n  if (\"hidden\" === nextProps.mode) {\n    if (0 !== (workInProgress.flags & 128)) {\n      prevState =\n        null !== prevState ? prevState.baseLanes | renderLanes : renderLanes;\n      if (null !== current) {\n        nextProps = workInProgress.child = current.child;\n        for (nextChildren = 0; null !== nextProps; )\n          (nextChildren =\n            nextChildren | nextProps.lanes | nextProps.childLanes),\n            (nextProps = nextProps.sibling);\n        nextProps = nextChildren & ~prevState;\n      } else (nextProps = 0), (workInProgress.child = null);\n      return deferHiddenOffscreenComponent(\n        current,\n        workInProgress,\n        prevState,\n        renderLanes,\n        nextProps\n      );\n    }\n    if (0 !== (renderLanes & 536870912))\n      (workInProgress.memoizedState = { baseLanes: 0, cachePool: null }),\n        null !== current &&\n          pushTransition(\n            workInProgress,\n            null !== prevState ? prevState.cachePool : null\n          ),\n        null !== prevState\n          ? pushHiddenContext(workInProgress, prevState)\n          : reuseHiddenContextOnStack(),\n        pushOffscreenSuspenseHandler(workInProgress);\n    else\n      return (\n        (nextProps = workInProgress.lanes = 536870912),\n        deferHiddenOffscreenComponent(\n          current,\n          workInProgress,\n          null !== prevState ? prevState.baseLanes | renderLanes : renderLanes,\n          renderLanes,\n          nextProps\n        )\n      );\n  } else\n    null !== prevState\n      ? (pushTransition(workInProgress, prevState.cachePool),\n        pushHiddenContext(workInProgress, prevState),\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (workInProgress.memoizedState = null))\n      : (null !== current && pushTransition(workInProgress, null),\n        reuseHiddenContextOnStack(),\n        reuseSuspenseHandlerOnStack(workInProgress));\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nfunction bailoutOffscreenComponent(current, workInProgress) {\n  (null !== current && 22 === current.tag) ||\n    null !== workInProgress.stateNode ||\n    (workInProgress.stateNode = {\n      _visibility: 1,\n      _pendingMarkers: null,\n      _retryCache: null,\n      _transitions: null\n    });\n  return workInProgress.sibling;\n}\nfunction deferHiddenOffscreenComponent(\n  current,\n  workInProgress,\n  nextBaseLanes,\n  renderLanes,\n  remainingChildLanes\n) {\n  var JSCompiler_inline_result = peekCacheFromPool();\n  JSCompiler_inline_result =\n    null === JSCompiler_inline_result\n      ? null\n      : { parent: CacheContext._currentValue, pool: JSCompiler_inline_result };\n  workInProgress.memoizedState = {\n    baseLanes: nextBaseLanes,\n    cachePool: JSCompiler_inline_result\n  };\n  null !== current && pushTransition(workInProgress, null);\n  reuseHiddenContextOnStack();\n  pushOffscreenSuspenseHandler(workInProgress);\n  null !== current &&\n    propagateParentContextChanges(current, workInProgress, renderLanes, !0);\n  workInProgress.childLanes = remainingChildLanes;\n  return null;\n}\nfunction mountActivityChildren(workInProgress, nextProps) {\n  nextProps = mountWorkInProgressOffscreenFiber(\n    { mode: nextProps.mode, children: nextProps.children },\n    workInProgress.mode\n  );\n  nextProps.ref = workInProgress.ref;\n  workInProgress.child = nextProps;\n  nextProps.return = workInProgress;\n  return nextProps;\n}\nfunction retryActivityComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountActivityChildren(workInProgress, workInProgress.pendingProps);\n  current.flags |= 2;\n  popSuspenseHandler(workInProgress);\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction updateActivityComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    didSuspend = 0 !== (workInProgress.flags & 128);\n  workInProgress.flags &= -129;\n  if (null === current) {\n    if (isHydrating) {\n      if (\"hidden\" === nextProps.mode)\n        return (\n          (current = mountActivityChildren(workInProgress, nextProps)),\n          (workInProgress.lanes = 536870912),\n          bailoutOffscreenComponent(null, current)\n        );\n      pushDehydratedActivitySuspenseHandler(workInProgress);\n      (current = nextHydratableInstance)\n        ? ((current = canHydrateHydrationBoundary(\n            current,\n            rootOrSingletonContext\n          )),\n          (current = null !== current && \"&\" === current.data ? current : null),\n          null !== current &&\n            ((workInProgress.memoizedState = {\n              dehydrated: current,\n              treeContext:\n                null !== treeContextProvider\n                  ? { id: treeContextId, overflow: treeContextOverflow }\n                  : null,\n              retryLane: 536870912,\n              hydrationErrors: null\n            }),\n            (renderLanes = createFiberFromDehydratedFragment(current)),\n            (renderLanes.return = workInProgress),\n            (workInProgress.child = renderLanes),\n            (hydrationParentFiber = workInProgress),\n            (nextHydratableInstance = null)))\n        : (current = null);\n      if (null === current) throw throwOnHydrationMismatch(workInProgress);\n      workInProgress.lanes = 536870912;\n      return null;\n    }\n    return mountActivityChildren(workInProgress, nextProps);\n  }\n  var prevState = current.memoizedState;\n  if (null !== prevState) {\n    var dehydrated = prevState.dehydrated;\n    pushDehydratedActivitySuspenseHandler(workInProgress);\n    if (didSuspend)\n      if (workInProgress.flags & 256)\n        (workInProgress.flags &= -257),\n          (workInProgress = retryActivityComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          ));\n      else if (null !== workInProgress.memoizedState)\n        (workInProgress.child = current.child),\n          (workInProgress.flags |= 128),\n          (workInProgress = null);\n      else throw Error(formatProdErrorMessage(558));\n    else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (didSuspend = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || didSuspend)\n    ) {\n      nextProps = workInProgressRoot;\n      if (\n        null !== nextProps &&\n        ((dehydrated = getBumpedLaneForHydration(nextProps, renderLanes)),\n        0 !== dehydrated && dehydrated !== prevState.retryLane)\n      )\n        throw (\n          ((prevState.retryLane = dehydrated),\n          enqueueConcurrentRenderForLane(current, dehydrated),\n          scheduleUpdateOnFiber(nextProps, current, dehydrated),\n          SelectiveHydrationException)\n        );\n      renderDidSuspendDelayIfPossible();\n      workInProgress = retryActivityComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      (current = prevState.treeContext),\n        (nextHydratableInstance = getNextHydratable(dehydrated.nextSibling)),\n        (hydrationParentFiber = workInProgress),\n        (isHydrating = !0),\n        (hydrationErrors = null),\n        (rootOrSingletonContext = !1),\n        null !== current &&\n          restoreSuspendedTreeContext(workInProgress, current),\n        (workInProgress = mountActivityChildren(workInProgress, nextProps)),\n        (workInProgress.flags |= 4096);\n    return workInProgress;\n  }\n  current = createWorkInProgress(current.child, {\n    mode: nextProps.mode,\n    children: nextProps.children\n  });\n  current.ref = workInProgress.ref;\n  workInProgress.child = current;\n  current.return = workInProgress;\n  return current;\n}\nfunction markRef(current, workInProgress) {\n  var ref = workInProgress.ref;\n  if (null === ref)\n    null !== current &&\n      null !== current.ref &&\n      (workInProgress.flags |= 4194816);\n  else {\n    if (\"function\" !== typeof ref && \"object\" !== typeof ref)\n      throw Error(formatProdErrorMessage(284));\n    if (null === current || current.ref !== ref)\n      workInProgress.flags |= 4194816;\n  }\n}\nfunction updateFunctionComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  Component = renderWithHooks(\n    current,\n    workInProgress,\n    Component,\n    nextProps,\n    void 0,\n    renderLanes\n  );\n  nextProps = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && nextProps && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, Component, renderLanes);\n  return workInProgress.child;\n}\nfunction replayFunctionComponent(\n  current,\n  workInProgress,\n  nextProps,\n  Component,\n  secondArg,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  workInProgress.updateQueue = null;\n  nextProps = renderWithHooksAgain(\n    workInProgress,\n    Component,\n    nextProps,\n    secondArg\n  );\n  finishRenderingHooks(current);\n  Component = checkDidRenderIdHook();\n  if (null !== current && !didReceiveUpdate)\n    return (\n      bailoutHooks(current, workInProgress, renderLanes),\n      bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes)\n    );\n  isHydrating && Component && pushMaterializedTreeId(workInProgress);\n  workInProgress.flags |= 1;\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  return workInProgress.child;\n}\nfunction updateClassComponent(\n  current,\n  workInProgress,\n  Component,\n  nextProps,\n  renderLanes\n) {\n  prepareToReadContext(workInProgress);\n  if (null === workInProgress.stateNode) {\n    var context = emptyContextObject,\n      contextType = Component.contextType;\n    \"object\" === typeof contextType &&\n      null !== contextType &&\n      (context = readContext(contextType));\n    context = new Component(nextProps, context);\n    workInProgress.memoizedState =\n      null !== context.state && void 0 !== context.state ? context.state : null;\n    context.updater = classComponentUpdater;\n    workInProgress.stateNode = context;\n    context._reactInternals = workInProgress;\n    context = workInProgress.stateNode;\n    context.props = nextProps;\n    context.state = workInProgress.memoizedState;\n    context.refs = {};\n    initializeUpdateQueue(workInProgress);\n    contextType = Component.contextType;\n    context.context =\n      \"object\" === typeof contextType && null !== contextType\n        ? readContext(contextType)\n        : emptyContextObject;\n    context.state = workInProgress.memoizedState;\n    contextType = Component.getDerivedStateFromProps;\n    \"function\" === typeof contextType &&\n      (applyDerivedStateFromProps(\n        workInProgress,\n        Component,\n        contextType,\n        nextProps\n      ),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof Component.getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate ||\n      (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n        \"function\" !== typeof context.componentWillMount) ||\n      ((contextType = context.state),\n      \"function\" === typeof context.componentWillMount &&\n        context.componentWillMount(),\n      \"function\" === typeof context.UNSAFE_componentWillMount &&\n        context.UNSAFE_componentWillMount(),\n      contextType !== context.state &&\n        classComponentUpdater.enqueueReplaceState(context, context.state, null),\n      processUpdateQueue(workInProgress, nextProps, context, renderLanes),\n      suspendIfUpdateReadFromEntangledAsyncAction(),\n      (context.state = workInProgress.memoizedState));\n    \"function\" === typeof context.componentDidMount &&\n      (workInProgress.flags |= 4194308);\n    nextProps = !0;\n  } else if (null === current) {\n    context = workInProgress.stateNode;\n    var unresolvedOldProps = workInProgress.memoizedProps,\n      oldProps = resolveClassComponentProps(Component, unresolvedOldProps);\n    context.props = oldProps;\n    var oldContext = context.context,\n      contextType$jscomp$0 = Component.contextType;\n    contextType = emptyContextObject;\n    \"object\" === typeof contextType$jscomp$0 &&\n      null !== contextType$jscomp$0 &&\n      (contextType = readContext(contextType$jscomp$0));\n    var getDerivedStateFromProps = Component.getDerivedStateFromProps;\n    contextType$jscomp$0 =\n      \"function\" === typeof getDerivedStateFromProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate;\n    unresolvedOldProps = workInProgress.pendingProps !== unresolvedOldProps;\n    contextType$jscomp$0 ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((unresolvedOldProps || oldContext !== contextType) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          contextType\n        ));\n    hasForceUpdate = !1;\n    var oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    oldContext = workInProgress.memoizedState;\n    unresolvedOldProps || oldState !== oldContext || hasForceUpdate\n      ? (\"function\" === typeof getDerivedStateFromProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            getDerivedStateFromProps,\n            nextProps\n          ),\n          (oldContext = workInProgress.memoizedState)),\n        (oldProps =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            oldProps,\n            nextProps,\n            oldState,\n            oldContext,\n            contextType\n          ))\n          ? (contextType$jscomp$0 ||\n              (\"function\" !== typeof context.UNSAFE_componentWillMount &&\n                \"function\" !== typeof context.componentWillMount) ||\n              (\"function\" === typeof context.componentWillMount &&\n                context.componentWillMount(),\n              \"function\" === typeof context.UNSAFE_componentWillMount &&\n                context.UNSAFE_componentWillMount()),\n            \"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308))\n          : (\"function\" === typeof context.componentDidMount &&\n              (workInProgress.flags |= 4194308),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = oldContext)),\n        (context.props = nextProps),\n        (context.state = oldContext),\n        (context.context = contextType),\n        (nextProps = oldProps))\n      : (\"function\" === typeof context.componentDidMount &&\n          (workInProgress.flags |= 4194308),\n        (nextProps = !1));\n  } else {\n    context = workInProgress.stateNode;\n    cloneUpdateQueue(current, workInProgress);\n    contextType = workInProgress.memoizedProps;\n    contextType$jscomp$0 = resolveClassComponentProps(Component, contextType);\n    context.props = contextType$jscomp$0;\n    getDerivedStateFromProps = workInProgress.pendingProps;\n    oldState = context.context;\n    oldContext = Component.contextType;\n    oldProps = emptyContextObject;\n    \"object\" === typeof oldContext &&\n      null !== oldContext &&\n      (oldProps = readContext(oldContext));\n    unresolvedOldProps = Component.getDerivedStateFromProps;\n    (oldContext =\n      \"function\" === typeof unresolvedOldProps ||\n      \"function\" === typeof context.getSnapshotBeforeUpdate) ||\n      (\"function\" !== typeof context.UNSAFE_componentWillReceiveProps &&\n        \"function\" !== typeof context.componentWillReceiveProps) ||\n      ((contextType !== getDerivedStateFromProps || oldState !== oldProps) &&\n        callComponentWillReceiveProps(\n          workInProgress,\n          context,\n          nextProps,\n          oldProps\n        ));\n    hasForceUpdate = !1;\n    oldState = workInProgress.memoizedState;\n    context.state = oldState;\n    processUpdateQueue(workInProgress, nextProps, context, renderLanes);\n    suspendIfUpdateReadFromEntangledAsyncAction();\n    var newState = workInProgress.memoizedState;\n    contextType !== getDerivedStateFromProps ||\n    oldState !== newState ||\n    hasForceUpdate ||\n    (null !== current &&\n      null !== current.dependencies &&\n      checkIfContextChanged(current.dependencies))\n      ? (\"function\" === typeof unresolvedOldProps &&\n          (applyDerivedStateFromProps(\n            workInProgress,\n            Component,\n            unresolvedOldProps,\n            nextProps\n          ),\n          (newState = workInProgress.memoizedState)),\n        (contextType$jscomp$0 =\n          hasForceUpdate ||\n          checkShouldComponentUpdate(\n            workInProgress,\n            Component,\n            contextType$jscomp$0,\n            nextProps,\n            oldState,\n            newState,\n            oldProps\n          ) ||\n          (null !== current &&\n            null !== current.dependencies &&\n            checkIfContextChanged(current.dependencies)))\n          ? (oldContext ||\n              (\"function\" !== typeof context.UNSAFE_componentWillUpdate &&\n                \"function\" !== typeof context.componentWillUpdate) ||\n              (\"function\" === typeof context.componentWillUpdate &&\n                context.componentWillUpdate(nextProps, newState, oldProps),\n              \"function\" === typeof context.UNSAFE_componentWillUpdate &&\n                context.UNSAFE_componentWillUpdate(\n                  nextProps,\n                  newState,\n                  oldProps\n                )),\n            \"function\" === typeof context.componentDidUpdate &&\n              (workInProgress.flags |= 4),\n            \"function\" === typeof context.getSnapshotBeforeUpdate &&\n              (workInProgress.flags |= 1024))\n          : (\"function\" !== typeof context.componentDidUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 4),\n            \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n              (contextType === current.memoizedProps &&\n                oldState === current.memoizedState) ||\n              (workInProgress.flags |= 1024),\n            (workInProgress.memoizedProps = nextProps),\n            (workInProgress.memoizedState = newState)),\n        (context.props = nextProps),\n        (context.state = newState),\n        (context.context = oldProps),\n        (nextProps = contextType$jscomp$0))\n      : (\"function\" !== typeof context.componentDidUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 4),\n        \"function\" !== typeof context.getSnapshotBeforeUpdate ||\n          (contextType === current.memoizedProps &&\n            oldState === current.memoizedState) ||\n          (workInProgress.flags |= 1024),\n        (nextProps = !1));\n  }\n  context = nextProps;\n  markRef(current, workInProgress);\n  nextProps = 0 !== (workInProgress.flags & 128);\n  context || nextProps\n    ? ((context = workInProgress.stateNode),\n      (Component =\n        nextProps && \"function\" !== typeof Component.getDerivedStateFromError\n          ? null\n          : context.render()),\n      (workInProgress.flags |= 1),\n      null !== current && nextProps\n        ? ((workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            current.child,\n            null,\n            renderLanes\n          )),\n          (workInProgress.child = reconcileChildFibers(\n            workInProgress,\n            null,\n            Component,\n            renderLanes\n          )))\n        : reconcileChildren(current, workInProgress, Component, renderLanes),\n      (workInProgress.memoizedState = context.state),\n      (current = workInProgress.child))\n    : (current = bailoutOnAlreadyFinishedWork(\n        current,\n        workInProgress,\n        renderLanes\n      ));\n  return current;\n}\nfunction mountHostRootWithoutHydrating(\n  current,\n  workInProgress,\n  nextChildren,\n  renderLanes\n) {\n  resetHydrationState();\n  workInProgress.flags |= 256;\n  reconcileChildren(current, workInProgress, nextChildren, renderLanes);\n  return workInProgress.child;\n}\nvar SUSPENDED_MARKER = {\n  dehydrated: null,\n  treeContext: null,\n  retryLane: 0,\n  hydrationErrors: null\n};\nfunction mountSuspenseOffscreenState(renderLanes) {\n  return { baseLanes: renderLanes, cachePool: getSuspendedCache() };\n}\nfunction getRemainingWorkInPrimaryTree(\n  current,\n  primaryTreeDidDefer,\n  renderLanes\n) {\n  current = null !== current ? current.childLanes & ~renderLanes : 0;\n  primaryTreeDidDefer && (current |= workInProgressDeferredLane);\n  return current;\n}\nfunction updateSuspenseComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    showFallback = !1,\n    didSuspend = 0 !== (workInProgress.flags & 128),\n    JSCompiler_temp;\n  (JSCompiler_temp = didSuspend) ||\n    (JSCompiler_temp =\n      null !== current && null === current.memoizedState\n        ? !1\n        : 0 !== (suspenseStackCursor.current & 2));\n  JSCompiler_temp && ((showFallback = !0), (workInProgress.flags &= -129));\n  JSCompiler_temp = 0 !== (workInProgress.flags & 32);\n  workInProgress.flags &= -33;\n  if (null === current) {\n    if (isHydrating) {\n      showFallback\n        ? pushPrimaryTreeSuspenseHandler(workInProgress)\n        : reuseSuspenseHandlerOnStack(workInProgress);\n      (current = nextHydratableInstance)\n        ? ((current = canHydrateHydrationBoundary(\n            current,\n            rootOrSingletonContext\n          )),\n          (current = null !== current && \"&\" !== current.data ? current : null),\n          null !== current &&\n            ((workInProgress.memoizedState = {\n              dehydrated: current,\n              treeContext:\n                null !== treeContextProvider\n                  ? { id: treeContextId, overflow: treeContextOverflow }\n                  : null,\n              retryLane: 536870912,\n              hydrationErrors: null\n            }),\n            (renderLanes = createFiberFromDehydratedFragment(current)),\n            (renderLanes.return = workInProgress),\n            (workInProgress.child = renderLanes),\n            (hydrationParentFiber = workInProgress),\n            (nextHydratableInstance = null)))\n        : (current = null);\n      if (null === current) throw throwOnHydrationMismatch(workInProgress);\n      isSuspenseInstanceFallback(current)\n        ? (workInProgress.lanes = 32)\n        : (workInProgress.lanes = 536870912);\n      return null;\n    }\n    var nextPrimaryChildren = nextProps.children;\n    nextProps = nextProps.fallback;\n    if (showFallback)\n      return (\n        reuseSuspenseHandlerOnStack(workInProgress),\n        (showFallback = workInProgress.mode),\n        (nextPrimaryChildren = mountWorkInProgressOffscreenFiber(\n          { mode: \"hidden\", children: nextPrimaryChildren },\n          showFallback\n        )),\n        (nextProps = createFiberFromFragment(\n          nextProps,\n          showFallback,\n          renderLanes,\n          null\n        )),\n        (nextPrimaryChildren.return = workInProgress),\n        (nextProps.return = workInProgress),\n        (nextPrimaryChildren.sibling = nextProps),\n        (workInProgress.child = nextPrimaryChildren),\n        (nextProps = workInProgress.child),\n        (nextProps.memoizedState = mountSuspenseOffscreenState(renderLanes)),\n        (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n          current,\n          JSCompiler_temp,\n          renderLanes\n        )),\n        (workInProgress.memoizedState = SUSPENDED_MARKER),\n        bailoutOffscreenComponent(null, nextProps)\n      );\n    pushPrimaryTreeSuspenseHandler(workInProgress);\n    return mountSuspensePrimaryChildren(workInProgress, nextPrimaryChildren);\n  }\n  var prevState = current.memoizedState;\n  if (\n    null !== prevState &&\n    ((nextPrimaryChildren = prevState.dehydrated), null !== nextPrimaryChildren)\n  ) {\n    if (didSuspend)\n      workInProgress.flags & 256\n        ? (pushPrimaryTreeSuspenseHandler(workInProgress),\n          (workInProgress.flags &= -257),\n          (workInProgress = retrySuspenseComponentWithoutHydrating(\n            current,\n            workInProgress,\n            renderLanes\n          )))\n        : null !== workInProgress.memoizedState\n          ? (reuseSuspenseHandlerOnStack(workInProgress),\n            (workInProgress.child = current.child),\n            (workInProgress.flags |= 128),\n            (workInProgress = null))\n          : (reuseSuspenseHandlerOnStack(workInProgress),\n            (nextPrimaryChildren = nextProps.fallback),\n            (showFallback = workInProgress.mode),\n            (nextProps = mountWorkInProgressOffscreenFiber(\n              { mode: \"visible\", children: nextProps.children },\n              showFallback\n            )),\n            (nextPrimaryChildren = createFiberFromFragment(\n              nextPrimaryChildren,\n              showFallback,\n              renderLanes,\n              null\n            )),\n            (nextPrimaryChildren.flags |= 2),\n            (nextProps.return = workInProgress),\n            (nextPrimaryChildren.return = workInProgress),\n            (nextProps.sibling = nextPrimaryChildren),\n            (workInProgress.child = nextProps),\n            reconcileChildFibers(\n              workInProgress,\n              current.child,\n              null,\n              renderLanes\n            ),\n            (nextProps = workInProgress.child),\n            (nextProps.memoizedState =\n              mountSuspenseOffscreenState(renderLanes)),\n            (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n              current,\n              JSCompiler_temp,\n              renderLanes\n            )),\n            (workInProgress.memoizedState = SUSPENDED_MARKER),\n            (workInProgress = bailoutOffscreenComponent(null, nextProps)));\n    else if (\n      (pushPrimaryTreeSuspenseHandler(workInProgress),\n      isSuspenseInstanceFallback(nextPrimaryChildren))\n    ) {\n      JSCompiler_temp =\n        nextPrimaryChildren.nextSibling &&\n        nextPrimaryChildren.nextSibling.dataset;\n      if (JSCompiler_temp) var digest = JSCompiler_temp.dgst;\n      JSCompiler_temp = digest;\n      nextProps = Error(formatProdErrorMessage(419));\n      nextProps.stack = \"\";\n      nextProps.digest = JSCompiler_temp;\n      queueHydrationError({ value: nextProps, source: null, stack: null });\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else if (\n      (didReceiveUpdate ||\n        propagateParentContextChanges(current, workInProgress, renderLanes, !1),\n      (JSCompiler_temp = 0 !== (renderLanes & current.childLanes)),\n      didReceiveUpdate || JSCompiler_temp)\n    ) {\n      JSCompiler_temp = workInProgressRoot;\n      if (\n        null !== JSCompiler_temp &&\n        ((nextProps = getBumpedLaneForHydration(JSCompiler_temp, renderLanes)),\n        0 !== nextProps && nextProps !== prevState.retryLane)\n      )\n        throw (\n          ((prevState.retryLane = nextProps),\n          enqueueConcurrentRenderForLane(current, nextProps),\n          scheduleUpdateOnFiber(JSCompiler_temp, current, nextProps),\n          SelectiveHydrationException)\n        );\n      isSuspenseInstancePending(nextPrimaryChildren) ||\n        renderDidSuspendDelayIfPossible();\n      workInProgress = retrySuspenseComponentWithoutHydrating(\n        current,\n        workInProgress,\n        renderLanes\n      );\n    } else\n      isSuspenseInstancePending(nextPrimaryChildren)\n        ? ((workInProgress.flags |= 192),\n          (workInProgress.child = current.child),\n          (workInProgress = null))\n        : ((current = prevState.treeContext),\n          (nextHydratableInstance = getNextHydratable(\n            nextPrimaryChildren.nextSibling\n          )),\n          (hydrationParentFiber = workInProgress),\n          (isHydrating = !0),\n          (hydrationErrors = null),\n          (rootOrSingletonContext = !1),\n          null !== current &&\n            restoreSuspendedTreeContext(workInProgress, current),\n          (workInProgress = mountSuspensePrimaryChildren(\n            workInProgress,\n            nextProps.children\n          )),\n          (workInProgress.flags |= 4096));\n    return workInProgress;\n  }\n  if (showFallback)\n    return (\n      reuseSuspenseHandlerOnStack(workInProgress),\n      (nextPrimaryChildren = nextProps.fallback),\n      (showFallback = workInProgress.mode),\n      (prevState = current.child),\n      (digest = prevState.sibling),\n      (nextProps = createWorkInProgress(prevState, {\n        mode: \"hidden\",\n        children: nextProps.children\n      })),\n      (nextProps.subtreeFlags = prevState.subtreeFlags & 65011712),\n      null !== digest\n        ? (nextPrimaryChildren = createWorkInProgress(\n            digest,\n            nextPrimaryChildren\n          ))\n        : ((nextPrimaryChildren = createFiberFromFragment(\n            nextPrimaryChildren,\n            showFallback,\n            renderLanes,\n            null\n          )),\n          (nextPrimaryChildren.flags |= 2)),\n      (nextPrimaryChildren.return = workInProgress),\n      (nextProps.return = workInProgress),\n      (nextProps.sibling = nextPrimaryChildren),\n      (workInProgress.child = nextProps),\n      bailoutOffscreenComponent(null, nextProps),\n      (nextProps = workInProgress.child),\n      (nextPrimaryChildren = current.child.memoizedState),\n      null === nextPrimaryChildren\n        ? (nextPrimaryChildren = mountSuspenseOffscreenState(renderLanes))\n        : ((showFallback = nextPrimaryChildren.cachePool),\n          null !== showFallback\n            ? ((prevState = CacheContext._currentValue),\n              (showFallback =\n                showFallback.parent !== prevState\n                  ? { parent: prevState, pool: prevState }\n                  : showFallback))\n            : (showFallback = getSuspendedCache()),\n          (nextPrimaryChildren = {\n            baseLanes: nextPrimaryChildren.baseLanes | renderLanes,\n            cachePool: showFallback\n          })),\n      (nextProps.memoizedState = nextPrimaryChildren),\n      (nextProps.childLanes = getRemainingWorkInPrimaryTree(\n        current,\n        JSCompiler_temp,\n        renderLanes\n      )),\n      (workInProgress.memoizedState = SUSPENDED_MARKER),\n      bailoutOffscreenComponent(current.child, nextProps)\n    );\n  pushPrimaryTreeSuspenseHandler(workInProgress);\n  renderLanes = current.child;\n  current = renderLanes.sibling;\n  renderLanes = createWorkInProgress(renderLanes, {\n    mode: \"visible\",\n    children: nextProps.children\n  });\n  renderLanes.return = workInProgress;\n  renderLanes.sibling = null;\n  null !== current &&\n    ((JSCompiler_temp = workInProgress.deletions),\n    null === JSCompiler_temp\n      ? ((workInProgress.deletions = [current]), (workInProgress.flags |= 16))\n      : JSCompiler_temp.push(current));\n  workInProgress.child = renderLanes;\n  workInProgress.memoizedState = null;\n  return renderLanes;\n}\nfunction mountSuspensePrimaryChildren(workInProgress, primaryChildren) {\n  primaryChildren = mountWorkInProgressOffscreenFiber(\n    { mode: \"visible\", children: primaryChildren },\n    workInProgress.mode\n  );\n  primaryChildren.return = workInProgress;\n  return (workInProgress.child = primaryChildren);\n}\nfunction mountWorkInProgressOffscreenFiber(offscreenProps, mode) {\n  offscreenProps = createFiberImplClass(22, offscreenProps, null, mode);\n  offscreenProps.lanes = 0;\n  return offscreenProps;\n}\nfunction retrySuspenseComponentWithoutHydrating(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  reconcileChildFibers(workInProgress, current.child, null, renderLanes);\n  current = mountSuspensePrimaryChildren(\n    workInProgress,\n    workInProgress.pendingProps.children\n  );\n  current.flags |= 2;\n  workInProgress.memoizedState = null;\n  return current;\n}\nfunction scheduleSuspenseWorkOnFiber(fiber, renderLanes, propagationRoot) {\n  fiber.lanes |= renderLanes;\n  var alternate = fiber.alternate;\n  null !== alternate && (alternate.lanes |= renderLanes);\n  scheduleContextWorkOnParentPath(fiber.return, renderLanes, propagationRoot);\n}\nfunction initSuspenseListRenderState(\n  workInProgress,\n  isBackwards,\n  tail,\n  lastContentRow,\n  tailMode,\n  treeForkCount\n) {\n  var renderState = workInProgress.memoizedState;\n  null === renderState\n    ? (workInProgress.memoizedState = {\n        isBackwards: isBackwards,\n        rendering: null,\n        renderingStartTime: 0,\n        last: lastContentRow,\n        tail: tail,\n        tailMode: tailMode,\n        treeForkCount: treeForkCount\n      })\n    : ((renderState.isBackwards = isBackwards),\n      (renderState.rendering = null),\n      (renderState.renderingStartTime = 0),\n      (renderState.last = lastContentRow),\n      (renderState.tail = tail),\n      (renderState.tailMode = tailMode),\n      (renderState.treeForkCount = treeForkCount));\n}\nfunction updateSuspenseListComponent(current, workInProgress, renderLanes) {\n  var nextProps = workInProgress.pendingProps,\n    revealOrder = nextProps.revealOrder,\n    tailMode = nextProps.tail;\n  nextProps = nextProps.children;\n  var suspenseContext = suspenseStackCursor.current,\n    shouldForceFallback = 0 !== (suspenseContext & 2);\n  shouldForceFallback\n    ? ((suspenseContext = (suspenseContext & 1) | 2),\n      (workInProgress.flags |= 128))\n    : (suspenseContext &= 1);\n  push(suspenseStackCursor, suspenseContext);\n  reconcileChildren(current, workInProgress, nextProps, renderLanes);\n  nextProps = isHydrating ? treeForkCount : 0;\n  if (!shouldForceFallback && null !== current && 0 !== (current.flags & 128))\n    a: for (current = workInProgress.child; null !== current; ) {\n      if (13 === current.tag)\n        null !== current.memoizedState &&\n          scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n      else if (19 === current.tag)\n        scheduleSuspenseWorkOnFiber(current, renderLanes, workInProgress);\n      else if (null !== current.child) {\n        current.child.return = current;\n        current = current.child;\n        continue;\n      }\n      if (current === workInProgress) break a;\n      for (; null === current.sibling; ) {\n        if (null === current.return || current.return === workInProgress)\n          break a;\n        current = current.return;\n      }\n      current.sibling.return = current.return;\n      current = current.sibling;\n    }\n  switch (revealOrder) {\n    case \"forwards\":\n      renderLanes = workInProgress.child;\n      for (revealOrder = null; null !== renderLanes; )\n        (current = renderLanes.alternate),\n          null !== current &&\n            null === findFirstSuspended(current) &&\n            (revealOrder = renderLanes),\n          (renderLanes = renderLanes.sibling);\n      renderLanes = revealOrder;\n      null === renderLanes\n        ? ((revealOrder = workInProgress.child), (workInProgress.child = null))\n        : ((revealOrder = renderLanes.sibling), (renderLanes.sibling = null));\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        revealOrder,\n        renderLanes,\n        tailMode,\n        nextProps\n      );\n      break;\n    case \"backwards\":\n    case \"unstable_legacy-backwards\":\n      renderLanes = null;\n      revealOrder = workInProgress.child;\n      for (workInProgress.child = null; null !== revealOrder; ) {\n        current = revealOrder.alternate;\n        if (null !== current && null === findFirstSuspended(current)) {\n          workInProgress.child = revealOrder;\n          break;\n        }\n        current = revealOrder.sibling;\n        revealOrder.sibling = renderLanes;\n        renderLanes = revealOrder;\n        revealOrder = current;\n      }\n      initSuspenseListRenderState(\n        workInProgress,\n        !0,\n        renderLanes,\n        null,\n        tailMode,\n        nextProps\n      );\n      break;\n    case \"together\":\n      initSuspenseListRenderState(\n        workInProgress,\n        !1,\n        null,\n        null,\n        void 0,\n        nextProps\n      );\n      break;\n    default:\n      workInProgress.memoizedState = null;\n  }\n  return workInProgress.child;\n}\nfunction bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes) {\n  null !== current && (workInProgress.dependencies = current.dependencies);\n  workInProgressRootSkippedLanes |= workInProgress.lanes;\n  if (0 === (renderLanes & workInProgress.childLanes))\n    if (null !== current) {\n      if (\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        0 === (renderLanes & workInProgress.childLanes))\n      )\n        return null;\n    } else return null;\n  if (null !== current && workInProgress.child !== current.child)\n    throw Error(formatProdErrorMessage(153));\n  if (null !== workInProgress.child) {\n    current = workInProgress.child;\n    renderLanes = createWorkInProgress(current, current.pendingProps);\n    workInProgress.child = renderLanes;\n    for (renderLanes.return = workInProgress; null !== current.sibling; )\n      (current = current.sibling),\n        (renderLanes = renderLanes.sibling =\n          createWorkInProgress(current, current.pendingProps)),\n        (renderLanes.return = workInProgress);\n    renderLanes.sibling = null;\n  }\n  return workInProgress.child;\n}\nfunction checkScheduledUpdateOrContext(current, renderLanes) {\n  if (0 !== (current.lanes & renderLanes)) return !0;\n  current = current.dependencies;\n  return null !== current && checkIfContextChanged(current) ? !0 : !1;\n}\nfunction attemptEarlyBailoutIfNoScheduledUpdate(\n  current,\n  workInProgress,\n  renderLanes\n) {\n  switch (workInProgress.tag) {\n    case 3:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n      resetHydrationState();\n      break;\n    case 27:\n    case 5:\n      pushHostContext(workInProgress);\n      break;\n    case 4:\n      pushHostContainer(workInProgress, workInProgress.stateNode.containerInfo);\n      break;\n    case 10:\n      pushProvider(\n        workInProgress,\n        workInProgress.type,\n        workInProgress.memoizedProps.value\n      );\n      break;\n    case 31:\n      if (null !== workInProgress.memoizedState)\n        return (\n          (workInProgress.flags |= 128),\n          pushDehydratedActivitySuspenseHandler(workInProgress),\n          null\n        );\n      break;\n    case 13:\n      var state$102 = workInProgress.memoizedState;\n      if (null !== state$102) {\n        if (null !== state$102.dehydrated)\n          return (\n            pushPrimaryTreeSuspenseHandler(workInProgress),\n            (workInProgress.flags |= 128),\n            null\n          );\n        if (0 !== (renderLanes & workInProgress.child.childLanes))\n          return updateSuspenseComponent(current, workInProgress, renderLanes);\n        pushPrimaryTreeSuspenseHandler(workInProgress);\n        current = bailoutOnAlreadyFinishedWork(\n          current,\n          workInProgress,\n          renderLanes\n        );\n        return null !== current ? current.sibling : null;\n      }\n      pushPrimaryTreeSuspenseHandler(workInProgress);\n      break;\n    case 19:\n      var didSuspendBefore = 0 !== (current.flags & 128);\n      state$102 = 0 !== (renderLanes & workInProgress.childLanes);\n      state$102 ||\n        (propagateParentContextChanges(\n          current,\n          workInProgress,\n          renderLanes,\n          !1\n        ),\n        (state$102 = 0 !== (renderLanes & workInProgress.childLanes)));\n      if (didSuspendBefore) {\n        if (state$102)\n          return updateSuspenseListComponent(\n            current,\n            workInProgress,\n            renderLanes\n          );\n        workInProgress.flags |= 128;\n      }\n      didSuspendBefore = workInProgress.memoizedState;\n      null !== didSuspendBefore &&\n        ((didSuspendBefore.rendering = null),\n        (didSuspendBefore.tail = null),\n        (didSuspendBefore.lastEffect = null));\n      push(suspenseStackCursor, suspenseStackCursor.current);\n      if (state$102) break;\n      else return null;\n    case 22:\n      return (\n        (workInProgress.lanes = 0),\n        updateOffscreenComponent(\n          current,\n          workInProgress,\n          renderLanes,\n          workInProgress.pendingProps\n        )\n      );\n    case 24:\n      pushProvider(workInProgress, CacheContext, current.memoizedState.cache);\n  }\n  return bailoutOnAlreadyFinishedWork(current, workInProgress, renderLanes);\n}\nfunction beginWork(current, workInProgress, renderLanes) {\n  if (null !== current)\n    if (current.memoizedProps !== workInProgress.pendingProps)\n      didReceiveUpdate = !0;\n    else {\n      if (\n        !checkScheduledUpdateOrContext(current, renderLanes) &&\n        0 === (workInProgress.flags & 128)\n      )\n        return (\n          (didReceiveUpdate = !1),\n          attemptEarlyBailoutIfNoScheduledUpdate(\n            current,\n            workInProgress,\n            renderLanes\n          )\n        );\n      didReceiveUpdate = 0 !== (current.flags & 131072) ? !0 : !1;\n    }\n  else\n    (didReceiveUpdate = !1),\n      isHydrating &&\n        0 !== (workInProgress.flags & 1048576) &&\n        pushTreeId(workInProgress, treeForkCount, workInProgress.index);\n  workInProgress.lanes = 0;\n  switch (workInProgress.tag) {\n    case 16:\n      a: {\n        var props = workInProgress.pendingProps;\n        current = resolveLazy(workInProgress.elementType);\n        workInProgress.type = current;\n        if (\"function\" === typeof current)\n          shouldConstruct(current)\n            ? ((props = resolveClassComponentProps(current, props)),\n              (workInProgress.tag = 1),\n              (workInProgress = updateClassComponent(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              )))\n            : ((workInProgress.tag = 0),\n              (workInProgress = updateFunctionComponent(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              )));\n        else {\n          if (void 0 !== current && null !== current) {\n            var $$typeof = current.$$typeof;\n            if ($$typeof === REACT_FORWARD_REF_TYPE) {\n              workInProgress.tag = 11;\n              workInProgress = updateForwardRef(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              );\n              break a;\n            } else if ($$typeof === REACT_MEMO_TYPE) {\n              workInProgress.tag = 14;\n              workInProgress = updateMemoComponent(\n                null,\n                workInProgress,\n                current,\n                props,\n                renderLanes\n              );\n              break a;\n            }\n          }\n          workInProgress = getComponentNameFromType(current) || current;\n          throw Error(formatProdErrorMessage(306, workInProgress, \"\"));\n        }\n      }\n      return workInProgress;\n    case 0:\n      return updateFunctionComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 1:\n      return (\n        (props = workInProgress.type),\n        ($$typeof = resolveClassComponentProps(\n          props,\n          workInProgress.pendingProps\n        )),\n        updateClassComponent(\n          current,\n          workInProgress,\n          props,\n          $$typeof,\n          renderLanes\n        )\n      );\n    case 3:\n      a: {\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        );\n        if (null === current) throw Error(formatProdErrorMessage(387));\n        props = workInProgress.pendingProps;\n        var prevState = workInProgress.memoizedState;\n        $$typeof = prevState.element;\n        cloneUpdateQueue(current, workInProgress);\n        processUpdateQueue(workInProgress, props, null, renderLanes);\n        var nextState = workInProgress.memoizedState;\n        props = nextState.cache;\n        pushProvider(workInProgress, CacheContext, props);\n        props !== prevState.cache &&\n          propagateContextChanges(\n            workInProgress,\n            [CacheContext],\n            renderLanes,\n            !0\n          );\n        suspendIfUpdateReadFromEntangledAsyncAction();\n        props = nextState.element;\n        if (prevState.isDehydrated)\n          if (\n            ((prevState = {\n              element: props,\n              isDehydrated: !1,\n              cache: nextState.cache\n            }),\n            (workInProgress.updateQueue.baseState = prevState),\n            (workInProgress.memoizedState = prevState),\n            workInProgress.flags & 256)\n          ) {\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              props,\n              renderLanes\n            );\n            break a;\n          } else if (props !== $$typeof) {\n            $$typeof = createCapturedValueAtFiber(\n              Error(formatProdErrorMessage(424)),\n              workInProgress\n            );\n            queueHydrationError($$typeof);\n            workInProgress = mountHostRootWithoutHydrating(\n              current,\n              workInProgress,\n              props,\n              renderLanes\n            );\n            break a;\n          } else {\n            current = workInProgress.stateNode.containerInfo;\n            switch (current.nodeType) {\n              case 9:\n                current = current.body;\n                break;\n              default:\n                current =\n                  \"HTML\" === current.nodeName\n                    ? current.ownerDocument.body\n                    : current;\n            }\n            nextHydratableInstance = getNextHydratable(current.firstChild);\n            hydrationParentFiber = workInProgress;\n            isHydrating = !0;\n            hydrationErrors = null;\n            rootOrSingletonContext = !0;\n            renderLanes = mountChildFibers(\n              workInProgress,\n              null,\n              props,\n              renderLanes\n            );\n            for (workInProgress.child = renderLanes; renderLanes; )\n              (renderLanes.flags = (renderLanes.flags & -3) | 4096),\n                (renderLanes = renderLanes.sibling);\n          }\n        else {\n          resetHydrationState();\n          if (props === $$typeof) {\n            workInProgress = bailoutOnAlreadyFinishedWork(\n              current,\n              workInProgress,\n              renderLanes\n            );\n            break a;\n          }\n          reconcileChildren(current, workInProgress, props, renderLanes);\n        }\n        workInProgress = workInProgress.child;\n      }\n      return workInProgress;\n    case 26:\n      return (\n        markRef(current, workInProgress),\n        null === current\n          ? (renderLanes = getResource(\n              workInProgress.type,\n              null,\n              workInProgress.pendingProps,\n              null\n            ))\n            ? (workInProgress.memoizedState = renderLanes)\n            : isHydrating ||\n              ((renderLanes = workInProgress.type),\n              (current = workInProgress.pendingProps),\n              (props = getOwnerDocumentFromRootContainer(\n                rootInstanceStackCursor.current\n              ).createElement(renderLanes)),\n              (props[internalInstanceKey] = workInProgress),\n              (props[internalPropsKey] = current),\n              setInitialProperties(props, renderLanes, current),\n              markNodeAsHoistable(props),\n              (workInProgress.stateNode = props))\n          : (workInProgress.memoizedState = getResource(\n              workInProgress.type,\n              current.memoizedProps,\n              workInProgress.pendingProps,\n              current.memoizedState\n            )),\n        null\n      );\n    case 27:\n      return (\n        pushHostContext(workInProgress),\n        null === current &&\n          isHydrating &&\n          ((props = workInProgress.stateNode =\n            resolveSingletonInstance(\n              workInProgress.type,\n              workInProgress.pendingProps,\n              rootInstanceStackCursor.current\n            )),\n          (hydrationParentFiber = workInProgress),\n          (rootOrSingletonContext = !0),\n          ($$typeof = nextHydratableInstance),\n          isSingletonScope(workInProgress.type)\n            ? ((previousHydratableOnEnteringScopedSingleton = $$typeof),\n              (nextHydratableInstance = getNextHydratable(props.firstChild)))\n            : (nextHydratableInstance = $$typeof)),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        markRef(current, workInProgress),\n        null === current && (workInProgress.flags |= 4194304),\n        workInProgress.child\n      );\n    case 5:\n      if (null === current && isHydrating) {\n        if (($$typeof = props = nextHydratableInstance))\n          (props = canHydrateInstance(\n            props,\n            workInProgress.type,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== props\n              ? ((workInProgress.stateNode = props),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = getNextHydratable(props.firstChild)),\n                (rootOrSingletonContext = !1),\n                ($$typeof = !0))\n              : ($$typeof = !1);\n        $$typeof || throwOnHydrationMismatch(workInProgress);\n      }\n      pushHostContext(workInProgress);\n      $$typeof = workInProgress.type;\n      prevState = workInProgress.pendingProps;\n      nextState = null !== current ? current.memoizedProps : null;\n      props = prevState.children;\n      shouldSetTextContent($$typeof, prevState)\n        ? (props = null)\n        : null !== nextState &&\n          shouldSetTextContent($$typeof, nextState) &&\n          (workInProgress.flags |= 32);\n      null !== workInProgress.memoizedState &&\n        (($$typeof = renderWithHooks(\n          current,\n          workInProgress,\n          TransitionAwareHostComponent,\n          null,\n          null,\n          renderLanes\n        )),\n        (HostTransitionContext._currentValue = $$typeof));\n      markRef(current, workInProgress);\n      reconcileChildren(current, workInProgress, props, renderLanes);\n      return workInProgress.child;\n    case 6:\n      if (null === current && isHydrating) {\n        if ((current = renderLanes = nextHydratableInstance))\n          (renderLanes = canHydrateTextInstance(\n            renderLanes,\n            workInProgress.pendingProps,\n            rootOrSingletonContext\n          )),\n            null !== renderLanes\n              ? ((workInProgress.stateNode = renderLanes),\n                (hydrationParentFiber = workInProgress),\n                (nextHydratableInstance = null),\n                (current = !0))\n              : (current = !1);\n        current || throwOnHydrationMismatch(workInProgress);\n      }\n      return null;\n    case 13:\n      return updateSuspenseComponent(current, workInProgress, renderLanes);\n    case 4:\n      return (\n        pushHostContainer(\n          workInProgress,\n          workInProgress.stateNode.containerInfo\n        ),\n        (props = workInProgress.pendingProps),\n        null === current\n          ? (workInProgress.child = reconcileChildFibers(\n              workInProgress,\n              null,\n              props,\n              renderLanes\n            ))\n          : reconcileChildren(current, workInProgress, props, renderLanes),\n        workInProgress.child\n      );\n    case 11:\n      return updateForwardRef(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 7:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 8:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 12:\n      return (\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 10:\n      return (\n        (props = workInProgress.pendingProps),\n        pushProvider(workInProgress, workInProgress.type, props.value),\n        reconcileChildren(current, workInProgress, props.children, renderLanes),\n        workInProgress.child\n      );\n    case 9:\n      return (\n        ($$typeof = workInProgress.type._context),\n        (props = workInProgress.pendingProps.children),\n        prepareToReadContext(workInProgress),\n        ($$typeof = readContext($$typeof)),\n        (props = props($$typeof)),\n        (workInProgress.flags |= 1),\n        reconcileChildren(current, workInProgress, props, renderLanes),\n        workInProgress.child\n      );\n    case 14:\n      return updateMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 15:\n      return updateSimpleMemoComponent(\n        current,\n        workInProgress,\n        workInProgress.type,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n    case 19:\n      return updateSuspenseListComponent(current, workInProgress, renderLanes);\n    case 31:\n      return updateActivityComponent(current, workInProgress, renderLanes);\n    case 22:\n      return updateOffscreenComponent(\n        current,\n        workInProgress,\n        renderLanes,\n        workInProgress.pendingProps\n      );\n    case 24:\n      return (\n        prepareToReadContext(workInProgress),\n        (props = readContext(CacheContext)),\n        null === current\n          ? (($$typeof = peekCacheFromPool()),\n            null === $$typeof &&\n              (($$typeof = workInProgressRoot),\n              (prevState = createCache()),\n              ($$typeof.pooledCache = prevState),\n              prevState.refCount++,\n              null !== prevState && ($$typeof.pooledCacheLanes |= renderLanes),\n              ($$typeof = prevState)),\n            (workInProgress.memoizedState = { parent: props, cache: $$typeof }),\n            initializeUpdateQueue(workInProgress),\n            pushProvider(workInProgress, CacheContext, $$typeof))\n          : (0 !== (current.lanes & renderLanes) &&\n              (cloneUpdateQueue(current, workInProgress),\n              processUpdateQueue(workInProgress, null, null, renderLanes),\n              suspendIfUpdateReadFromEntangledAsyncAction()),\n            ($$typeof = current.memoizedState),\n            (prevState = workInProgress.memoizedState),\n            $$typeof.parent !== props\n              ? (($$typeof = { parent: props, cache: props }),\n                (workInProgress.memoizedState = $$typeof),\n                0 === workInProgress.lanes &&\n                  (workInProgress.memoizedState =\n                    workInProgress.updateQueue.baseState =\n                      $$typeof),\n                pushProvider(workInProgress, CacheContext, props))\n              : ((props = prevState.cache),\n                pushProvider(workInProgress, CacheContext, props),\n                props !== $$typeof.cache &&\n                  propagateContextChanges(\n                    workInProgress,\n                    [CacheContext],\n                    renderLanes,\n                    !0\n                  ))),\n        reconcileChildren(\n          current,\n          workInProgress,\n          workInProgress.pendingProps.children,\n          renderLanes\n        ),\n        workInProgress.child\n      );\n    case 29:\n      throw workInProgress.pendingProps;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction markUpdate(workInProgress) {\n  workInProgress.flags |= 4;\n}\nfunction preloadInstanceAndSuspendIfNeeded(\n  workInProgress,\n  type,\n  oldProps,\n  newProps,\n  renderLanes\n) {\n  if ((type = 0 !== (workInProgress.mode & 32))) type = !1;\n  if (type) {\n    if (\n      ((workInProgress.flags |= 16777216),\n      (renderLanes & 335544128) === renderLanes)\n    )\n      if (workInProgress.stateNode.complete) workInProgress.flags |= 8192;\n      else if (shouldRemainOnPreviousScreen()) workInProgress.flags |= 8192;\n      else\n        throw (\n          ((suspendedThenable = noopSuspenseyCommitThenable),\n          SuspenseyCommitException)\n        );\n  } else workInProgress.flags &= -16777217;\n}\nfunction preloadResourceAndSuspendIfNeeded(workInProgress, resource) {\n  if (\"stylesheet\" !== resource.type || 0 !== (resource.state.loading & 4))\n    workInProgress.flags &= -16777217;\n  else if (((workInProgress.flags |= 16777216), !preloadResource(resource)))\n    if (shouldRemainOnPreviousScreen()) workInProgress.flags |= 8192;\n    else\n      throw (\n        ((suspendedThenable = noopSuspenseyCommitThenable),\n        SuspenseyCommitException)\n      );\n}\nfunction scheduleRetryEffect(workInProgress, retryQueue) {\n  null !== retryQueue && (workInProgress.flags |= 4);\n  workInProgress.flags & 16384 &&\n    ((retryQueue =\n      22 !== workInProgress.tag ? claimNextRetryLane() : 536870912),\n    (workInProgress.lanes |= retryQueue),\n    (workInProgressSuspendedRetryLanes |= retryQueue));\n}\nfunction cutOffTailIfNeeded(renderState, hasRenderedATailFallback) {\n  if (!isHydrating)\n    switch (renderState.tailMode) {\n      case \"hidden\":\n        hasRenderedATailFallback = renderState.tail;\n        for (var lastTailNode = null; null !== hasRenderedATailFallback; )\n          null !== hasRenderedATailFallback.alternate &&\n            (lastTailNode = hasRenderedATailFallback),\n            (hasRenderedATailFallback = hasRenderedATailFallback.sibling);\n        null === lastTailNode\n          ? (renderState.tail = null)\n          : (lastTailNode.sibling = null);\n        break;\n      case \"collapsed\":\n        lastTailNode = renderState.tail;\n        for (var lastTailNode$106 = null; null !== lastTailNode; )\n          null !== lastTailNode.alternate && (lastTailNode$106 = lastTailNode),\n            (lastTailNode = lastTailNode.sibling);\n        null === lastTailNode$106\n          ? hasRenderedATailFallback || null === renderState.tail\n            ? (renderState.tail = null)\n            : (renderState.tail.sibling = null)\n          : (lastTailNode$106.sibling = null);\n    }\n}\nfunction bubbleProperties(completedWork) {\n  var didBailout =\n      null !== completedWork.alternate &&\n      completedWork.alternate.child === completedWork.child,\n    newChildLanes = 0,\n    subtreeFlags = 0;\n  if (didBailout)\n    for (var child$107 = completedWork.child; null !== child$107; )\n      (newChildLanes |= child$107.lanes | child$107.childLanes),\n        (subtreeFlags |= child$107.subtreeFlags & 65011712),\n        (subtreeFlags |= child$107.flags & 65011712),\n        (child$107.return = completedWork),\n        (child$107 = child$107.sibling);\n  else\n    for (child$107 = completedWork.child; null !== child$107; )\n      (newChildLanes |= child$107.lanes | child$107.childLanes),\n        (subtreeFlags |= child$107.subtreeFlags),\n        (subtreeFlags |= child$107.flags),\n        (child$107.return = completedWork),\n        (child$107 = child$107.sibling);\n  completedWork.subtreeFlags |= subtreeFlags;\n  completedWork.childLanes = newChildLanes;\n  return didBailout;\n}\nfunction completeWork(current, workInProgress, renderLanes) {\n  var newProps = workInProgress.pendingProps;\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 16:\n    case 15:\n    case 0:\n    case 11:\n    case 7:\n    case 8:\n    case 12:\n    case 9:\n    case 14:\n      return bubbleProperties(workInProgress), null;\n    case 1:\n      return bubbleProperties(workInProgress), null;\n    case 3:\n      renderLanes = workInProgress.stateNode;\n      newProps = null;\n      null !== current && (newProps = current.memoizedState.cache);\n      workInProgress.memoizedState.cache !== newProps &&\n        (workInProgress.flags |= 2048);\n      popProvider(CacheContext);\n      popHostContainer();\n      renderLanes.pendingContext &&\n        ((renderLanes.context = renderLanes.pendingContext),\n        (renderLanes.pendingContext = null));\n      if (null === current || null === current.child)\n        popHydrationState(workInProgress)\n          ? markUpdate(workInProgress)\n          : null === current ||\n            (current.memoizedState.isDehydrated &&\n              0 === (workInProgress.flags & 256)) ||\n            ((workInProgress.flags |= 1024),\n            upgradeHydrationErrorsToRecoverable());\n      bubbleProperties(workInProgress);\n      return null;\n    case 26:\n      var type = workInProgress.type,\n        nextResource = workInProgress.memoizedState;\n      null === current\n        ? (markUpdate(workInProgress),\n          null !== nextResource\n            ? (bubbleProperties(workInProgress),\n              preloadResourceAndSuspendIfNeeded(workInProgress, nextResource))\n            : (bubbleProperties(workInProgress),\n              preloadInstanceAndSuspendIfNeeded(\n                workInProgress,\n                type,\n                null,\n                newProps,\n                renderLanes\n              )))\n        : nextResource\n          ? nextResource !== current.memoizedState\n            ? (markUpdate(workInProgress),\n              bubbleProperties(workInProgress),\n              preloadResourceAndSuspendIfNeeded(workInProgress, nextResource))\n            : (bubbleProperties(workInProgress),\n              (workInProgress.flags &= -16777217))\n          : ((current = current.memoizedProps),\n            current !== newProps && markUpdate(workInProgress),\n            bubbleProperties(workInProgress),\n            preloadInstanceAndSuspendIfNeeded(\n              workInProgress,\n              type,\n              current,\n              newProps,\n              renderLanes\n            ));\n      return null;\n    case 27:\n      popHostContext(workInProgress);\n      renderLanes = rootInstanceStackCursor.current;\n      type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        current = contextStackCursor.current;\n        popHydrationState(workInProgress)\n          ? prepareToHydrateHostInstance(workInProgress, current)\n          : ((current = resolveSingletonInstance(type, newProps, renderLanes)),\n            (workInProgress.stateNode = current),\n            markUpdate(workInProgress));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 5:\n      popHostContext(workInProgress);\n      type = workInProgress.type;\n      if (null !== current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (!newProps) {\n          if (null === workInProgress.stateNode)\n            throw Error(formatProdErrorMessage(166));\n          bubbleProperties(workInProgress);\n          return null;\n        }\n        nextResource = contextStackCursor.current;\n        if (popHydrationState(workInProgress))\n          prepareToHydrateHostInstance(workInProgress, nextResource);\n        else {\n          var ownerDocument = getOwnerDocumentFromRootContainer(\n            rootInstanceStackCursor.current\n          );\n          switch (nextResource) {\n            case 1:\n              nextResource = ownerDocument.createElementNS(\n                \"http://www.w3.org/2000/svg\",\n                type\n              );\n              break;\n            case 2:\n              nextResource = ownerDocument.createElementNS(\n                \"http://www.w3.org/1998/Math/MathML\",\n                type\n              );\n              break;\n            default:\n              switch (type) {\n                case \"svg\":\n                  nextResource = ownerDocument.createElementNS(\n                    \"http://www.w3.org/2000/svg\",\n                    type\n                  );\n                  break;\n                case \"math\":\n                  nextResource = ownerDocument.createElementNS(\n                    \"http://www.w3.org/1998/Math/MathML\",\n                    type\n                  );\n                  break;\n                case \"script\":\n                  nextResource = ownerDocument.createElement(\"div\");\n                  nextResource.innerHTML = \"<script>\\x3c/script>\";\n                  nextResource = nextResource.removeChild(\n                    nextResource.firstChild\n                  );\n                  break;\n                case \"select\":\n                  nextResource =\n                    \"string\" === typeof newProps.is\n                      ? ownerDocument.createElement(\"select\", {\n                          is: newProps.is\n                        })\n                      : ownerDocument.createElement(\"select\");\n                  newProps.multiple\n                    ? (nextResource.multiple = !0)\n                    : newProps.size && (nextResource.size = newProps.size);\n                  break;\n                default:\n                  nextResource =\n                    \"string\" === typeof newProps.is\n                      ? ownerDocument.createElement(type, { is: newProps.is })\n                      : ownerDocument.createElement(type);\n              }\n          }\n          nextResource[internalInstanceKey] = workInProgress;\n          nextResource[internalPropsKey] = newProps;\n          a: for (\n            ownerDocument = workInProgress.child;\n            null !== ownerDocument;\n\n          ) {\n            if (5 === ownerDocument.tag || 6 === ownerDocument.tag)\n              nextResource.appendChild(ownerDocument.stateNode);\n            else if (\n              4 !== ownerDocument.tag &&\n              27 !== ownerDocument.tag &&\n              null !== ownerDocument.child\n            ) {\n              ownerDocument.child.return = ownerDocument;\n              ownerDocument = ownerDocument.child;\n              continue;\n            }\n            if (ownerDocument === workInProgress) break a;\n            for (; null === ownerDocument.sibling; ) {\n              if (\n                null === ownerDocument.return ||\n                ownerDocument.return === workInProgress\n              )\n                break a;\n              ownerDocument = ownerDocument.return;\n            }\n            ownerDocument.sibling.return = ownerDocument.return;\n            ownerDocument = ownerDocument.sibling;\n          }\n          workInProgress.stateNode = nextResource;\n          a: switch (\n            (setInitialProperties(nextResource, type, newProps), type)\n          ) {\n            case \"button\":\n            case \"input\":\n            case \"select\":\n            case \"textarea\":\n              newProps = !!newProps.autoFocus;\n              break a;\n            case \"img\":\n              newProps = !0;\n              break a;\n            default:\n              newProps = !1;\n          }\n          newProps && markUpdate(workInProgress);\n        }\n      }\n      bubbleProperties(workInProgress);\n      preloadInstanceAndSuspendIfNeeded(\n        workInProgress,\n        workInProgress.type,\n        null === current ? null : current.memoizedProps,\n        workInProgress.pendingProps,\n        renderLanes\n      );\n      return null;\n    case 6:\n      if (current && null != workInProgress.stateNode)\n        current.memoizedProps !== newProps && markUpdate(workInProgress);\n      else {\n        if (\"string\" !== typeof newProps && null === workInProgress.stateNode)\n          throw Error(formatProdErrorMessage(166));\n        current = rootInstanceStackCursor.current;\n        if (popHydrationState(workInProgress)) {\n          current = workInProgress.stateNode;\n          renderLanes = workInProgress.memoizedProps;\n          newProps = null;\n          type = hydrationParentFiber;\n          if (null !== type)\n            switch (type.tag) {\n              case 27:\n              case 5:\n                newProps = type.memoizedProps;\n            }\n          current[internalInstanceKey] = workInProgress;\n          current =\n            current.nodeValue === renderLanes ||\n            (null !== newProps && !0 === newProps.suppressHydrationWarning) ||\n            checkForUnmatchedText(current.nodeValue, renderLanes)\n              ? !0\n              : !1;\n          current || throwOnHydrationMismatch(workInProgress, !0);\n        } else\n          (current =\n            getOwnerDocumentFromRootContainer(current).createTextNode(\n              newProps\n            )),\n            (current[internalInstanceKey] = workInProgress),\n            (workInProgress.stateNode = current);\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 31:\n      renderLanes = workInProgress.memoizedState;\n      if (null === current || null !== current.memoizedState) {\n        newProps = popHydrationState(workInProgress);\n        if (null !== renderLanes) {\n          if (null === current) {\n            if (!newProps) throw Error(formatProdErrorMessage(318));\n            current = workInProgress.memoizedState;\n            current = null !== current ? current.dehydrated : null;\n            if (!current) throw Error(formatProdErrorMessage(557));\n            current[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          current = !1;\n        } else\n          (renderLanes = upgradeHydrationErrorsToRecoverable()),\n            null !== current &&\n              null !== current.memoizedState &&\n              (current.memoizedState.hydrationErrors = renderLanes),\n            (current = !0);\n        if (!current) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n        if (0 !== (workInProgress.flags & 128))\n          throw Error(formatProdErrorMessage(558));\n      }\n      bubbleProperties(workInProgress);\n      return null;\n    case 13:\n      newProps = workInProgress.memoizedState;\n      if (\n        null === current ||\n        (null !== current.memoizedState &&\n          null !== current.memoizedState.dehydrated)\n      ) {\n        type = popHydrationState(workInProgress);\n        if (null !== newProps && null !== newProps.dehydrated) {\n          if (null === current) {\n            if (!type) throw Error(formatProdErrorMessage(318));\n            type = workInProgress.memoizedState;\n            type = null !== type ? type.dehydrated : null;\n            if (!type) throw Error(formatProdErrorMessage(317));\n            type[internalInstanceKey] = workInProgress;\n          } else\n            resetHydrationState(),\n              0 === (workInProgress.flags & 128) &&\n                (workInProgress.memoizedState = null),\n              (workInProgress.flags |= 4);\n          bubbleProperties(workInProgress);\n          type = !1;\n        } else\n          (type = upgradeHydrationErrorsToRecoverable()),\n            null !== current &&\n              null !== current.memoizedState &&\n              (current.memoizedState.hydrationErrors = type),\n            (type = !0);\n        if (!type) {\n          if (workInProgress.flags & 256)\n            return popSuspenseHandler(workInProgress), workInProgress;\n          popSuspenseHandler(workInProgress);\n          return null;\n        }\n      }\n      popSuspenseHandler(workInProgress);\n      if (0 !== (workInProgress.flags & 128))\n        return (workInProgress.lanes = renderLanes), workInProgress;\n      renderLanes = null !== newProps;\n      current = null !== current && null !== current.memoizedState;\n      renderLanes &&\n        ((newProps = workInProgress.child),\n        (type = null),\n        null !== newProps.alternate &&\n          null !== newProps.alternate.memoizedState &&\n          null !== newProps.alternate.memoizedState.cachePool &&\n          (type = newProps.alternate.memoizedState.cachePool.pool),\n        (nextResource = null),\n        null !== newProps.memoizedState &&\n          null !== newProps.memoizedState.cachePool &&\n          (nextResource = newProps.memoizedState.cachePool.pool),\n        nextResource !== type && (newProps.flags |= 2048));\n      renderLanes !== current &&\n        renderLanes &&\n        (workInProgress.child.flags |= 8192);\n      scheduleRetryEffect(workInProgress, workInProgress.updateQueue);\n      bubbleProperties(workInProgress);\n      return null;\n    case 4:\n      return (\n        popHostContainer(),\n        null === current &&\n          listenToAllSupportedEvents(workInProgress.stateNode.containerInfo),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 10:\n      return (\n        popProvider(workInProgress.type), bubbleProperties(workInProgress), null\n      );\n    case 19:\n      pop(suspenseStackCursor);\n      newProps = workInProgress.memoizedState;\n      if (null === newProps) return bubbleProperties(workInProgress), null;\n      type = 0 !== (workInProgress.flags & 128);\n      nextResource = newProps.rendering;\n      if (null === nextResource)\n        if (type) cutOffTailIfNeeded(newProps, !1);\n        else {\n          if (\n            0 !== workInProgressRootExitStatus ||\n            (null !== current && 0 !== (current.flags & 128))\n          )\n            for (current = workInProgress.child; null !== current; ) {\n              nextResource = findFirstSuspended(current);\n              if (null !== nextResource) {\n                workInProgress.flags |= 128;\n                cutOffTailIfNeeded(newProps, !1);\n                current = nextResource.updateQueue;\n                workInProgress.updateQueue = current;\n                scheduleRetryEffect(workInProgress, current);\n                workInProgress.subtreeFlags = 0;\n                current = renderLanes;\n                for (renderLanes = workInProgress.child; null !== renderLanes; )\n                  resetWorkInProgress(renderLanes, current),\n                    (renderLanes = renderLanes.sibling);\n                push(\n                  suspenseStackCursor,\n                  (suspenseStackCursor.current & 1) | 2\n                );\n                isHydrating &&\n                  pushTreeFork(workInProgress, newProps.treeForkCount);\n                return workInProgress.child;\n              }\n              current = current.sibling;\n            }\n          null !== newProps.tail &&\n            now() > workInProgressRootRenderTargetTime &&\n            ((workInProgress.flags |= 128),\n            (type = !0),\n            cutOffTailIfNeeded(newProps, !1),\n            (workInProgress.lanes = 4194304));\n        }\n      else {\n        if (!type)\n          if (\n            ((current = findFirstSuspended(nextResource)), null !== current)\n          ) {\n            if (\n              ((workInProgress.flags |= 128),\n              (type = !0),\n              (current = current.updateQueue),\n              (workInProgress.updateQueue = current),\n              scheduleRetryEffect(workInProgress, current),\n              cutOffTailIfNeeded(newProps, !0),\n              null === newProps.tail &&\n                \"hidden\" === newProps.tailMode &&\n                !nextResource.alternate &&\n                !isHydrating)\n            )\n              return bubbleProperties(workInProgress), null;\n          } else\n            2 * now() - newProps.renderingStartTime >\n              workInProgressRootRenderTargetTime &&\n              536870912 !== renderLanes &&\n              ((workInProgress.flags |= 128),\n              (type = !0),\n              cutOffTailIfNeeded(newProps, !1),\n              (workInProgress.lanes = 4194304));\n        newProps.isBackwards\n          ? ((nextResource.sibling = workInProgress.child),\n            (workInProgress.child = nextResource))\n          : ((current = newProps.last),\n            null !== current\n              ? (current.sibling = nextResource)\n              : (workInProgress.child = nextResource),\n            (newProps.last = nextResource));\n      }\n      if (null !== newProps.tail)\n        return (\n          (current = newProps.tail),\n          (newProps.rendering = current),\n          (newProps.tail = current.sibling),\n          (newProps.renderingStartTime = now()),\n          (current.sibling = null),\n          (renderLanes = suspenseStackCursor.current),\n          push(\n            suspenseStackCursor,\n            type ? (renderLanes & 1) | 2 : renderLanes & 1\n          ),\n          isHydrating && pushTreeFork(workInProgress, newProps.treeForkCount),\n          current\n        );\n      bubbleProperties(workInProgress);\n      return null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        (newProps = null !== workInProgress.memoizedState),\n        null !== current\n          ? (null !== current.memoizedState) !== newProps &&\n            (workInProgress.flags |= 8192)\n          : newProps && (workInProgress.flags |= 8192),\n        newProps\n          ? 0 !== (renderLanes & 536870912) &&\n            0 === (workInProgress.flags & 128) &&\n            (bubbleProperties(workInProgress),\n            workInProgress.subtreeFlags & 6 && (workInProgress.flags |= 8192))\n          : bubbleProperties(workInProgress),\n        (renderLanes = workInProgress.updateQueue),\n        null !== renderLanes &&\n          scheduleRetryEffect(workInProgress, renderLanes.retryQueue),\n        (renderLanes = null),\n        null !== current &&\n          null !== current.memoizedState &&\n          null !== current.memoizedState.cachePool &&\n          (renderLanes = current.memoizedState.cachePool.pool),\n        (newProps = null),\n        null !== workInProgress.memoizedState &&\n          null !== workInProgress.memoizedState.cachePool &&\n          (newProps = workInProgress.memoizedState.cachePool.pool),\n        newProps !== renderLanes && (workInProgress.flags |= 2048),\n        null !== current && pop(resumedCache),\n        null\n      );\n    case 24:\n      return (\n        (renderLanes = null),\n        null !== current && (renderLanes = current.memoizedState.cache),\n        workInProgress.memoizedState.cache !== renderLanes &&\n          (workInProgress.flags |= 2048),\n        popProvider(CacheContext),\n        bubbleProperties(workInProgress),\n        null\n      );\n    case 25:\n      return null;\n    case 30:\n      return null;\n  }\n  throw Error(formatProdErrorMessage(156, workInProgress.tag));\n}\nfunction unwindWork(current, workInProgress) {\n  popTreeContext(workInProgress);\n  switch (workInProgress.tag) {\n    case 1:\n      return (\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 3:\n      return (\n        popProvider(CacheContext),\n        popHostContainer(),\n        (current = workInProgress.flags),\n        0 !== (current & 65536) && 0 === (current & 128)\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 26:\n    case 27:\n    case 5:\n      return popHostContext(workInProgress), null;\n    case 31:\n      if (null !== workInProgress.memoizedState) {\n        popSuspenseHandler(workInProgress);\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 13:\n      popSuspenseHandler(workInProgress);\n      current = workInProgress.memoizedState;\n      if (null !== current && null !== current.dehydrated) {\n        if (null === workInProgress.alternate)\n          throw Error(formatProdErrorMessage(340));\n        resetHydrationState();\n      }\n      current = workInProgress.flags;\n      return current & 65536\n        ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n        : null;\n    case 19:\n      return pop(suspenseStackCursor), null;\n    case 4:\n      return popHostContainer(), null;\n    case 10:\n      return popProvider(workInProgress.type), null;\n    case 22:\n    case 23:\n      return (\n        popSuspenseHandler(workInProgress),\n        popHiddenContext(),\n        null !== current && pop(resumedCache),\n        (current = workInProgress.flags),\n        current & 65536\n          ? ((workInProgress.flags = (current & -65537) | 128), workInProgress)\n          : null\n      );\n    case 24:\n      return popProvider(CacheContext), null;\n    case 25:\n      return null;\n    default:\n      return null;\n  }\n}\nfunction unwindInterruptedWork(current, interruptedWork) {\n  popTreeContext(interruptedWork);\n  switch (interruptedWork.tag) {\n    case 3:\n      popProvider(CacheContext);\n      popHostContainer();\n      break;\n    case 26:\n    case 27:\n    case 5:\n      popHostContext(interruptedWork);\n      break;\n    case 4:\n      popHostContainer();\n      break;\n    case 31:\n      null !== interruptedWork.memoizedState &&\n        popSuspenseHandler(interruptedWork);\n      break;\n    case 13:\n      popSuspenseHandler(interruptedWork);\n      break;\n    case 19:\n      pop(suspenseStackCursor);\n      break;\n    case 10:\n      popProvider(interruptedWork.type);\n      break;\n    case 22:\n    case 23:\n      popSuspenseHandler(interruptedWork);\n      popHiddenContext();\n      null !== current && pop(resumedCache);\n      break;\n    case 24:\n      popProvider(CacheContext);\n  }\n}\nfunction commitHookEffectListMount(flags, finishedWork) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          lastEffect = void 0;\n          var create = updateQueue.create,\n            inst = updateQueue.inst;\n          lastEffect = create();\n          inst.destroy = lastEffect;\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHookEffectListUnmount(\n  flags,\n  finishedWork,\n  nearestMountedAncestor$jscomp$0\n) {\n  try {\n    var updateQueue = finishedWork.updateQueue,\n      lastEffect = null !== updateQueue ? updateQueue.lastEffect : null;\n    if (null !== lastEffect) {\n      var firstEffect = lastEffect.next;\n      updateQueue = firstEffect;\n      do {\n        if ((updateQueue.tag & flags) === flags) {\n          var inst = updateQueue.inst,\n            destroy = inst.destroy;\n          if (void 0 !== destroy) {\n            inst.destroy = void 0;\n            lastEffect = finishedWork;\n            var nearestMountedAncestor = nearestMountedAncestor$jscomp$0,\n              destroy_ = destroy;\n            try {\n              destroy_();\n            } catch (error) {\n              captureCommitPhaseError(\n                lastEffect,\n                nearestMountedAncestor,\n                error\n              );\n            }\n          }\n        }\n        updateQueue = updateQueue.next;\n      } while (updateQueue !== firstEffect);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitClassCallbacks(finishedWork) {\n  var updateQueue = finishedWork.updateQueue;\n  if (null !== updateQueue) {\n    var instance = finishedWork.stateNode;\n    try {\n      commitCallbacks(updateQueue, instance);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction safelyCallComponentWillUnmount(\n  current,\n  nearestMountedAncestor,\n  instance\n) {\n  instance.props = resolveClassComponentProps(\n    current.type,\n    current.memoizedProps\n  );\n  instance.state = current.memoizedState;\n  try {\n    instance.componentWillUnmount();\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyAttachRef(current, nearestMountedAncestor) {\n  try {\n    var ref = current.ref;\n    if (null !== ref) {\n      switch (current.tag) {\n        case 26:\n        case 27:\n        case 5:\n          var instanceToUse = current.stateNode;\n          break;\n        case 30:\n          instanceToUse = current.stateNode;\n          break;\n        default:\n          instanceToUse = current.stateNode;\n      }\n      \"function\" === typeof ref\n        ? (current.refCleanup = ref(instanceToUse))\n        : (ref.current = instanceToUse);\n    }\n  } catch (error) {\n    captureCommitPhaseError(current, nearestMountedAncestor, error);\n  }\n}\nfunction safelyDetachRef(current, nearestMountedAncestor) {\n  var ref = current.ref,\n    refCleanup = current.refCleanup;\n  if (null !== ref)\n    if (\"function\" === typeof refCleanup)\n      try {\n        refCleanup();\n      } catch (error) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error);\n      } finally {\n        (current.refCleanup = null),\n          (current = current.alternate),\n          null != current && (current.refCleanup = null);\n      }\n    else if (\"function\" === typeof ref)\n      try {\n        ref(null);\n      } catch (error$140) {\n        captureCommitPhaseError(current, nearestMountedAncestor, error$140);\n      }\n    else ref.current = null;\n}\nfunction commitHostMount(finishedWork) {\n  var type = finishedWork.type,\n    props = finishedWork.memoizedProps,\n    instance = finishedWork.stateNode;\n  try {\n    a: switch (type) {\n      case \"button\":\n      case \"input\":\n      case \"select\":\n      case \"textarea\":\n        props.autoFocus && instance.focus();\n        break a;\n      case \"img\":\n        props.src\n          ? (instance.src = props.src)\n          : props.srcSet && (instance.srcset = props.srcSet);\n    }\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction commitHostUpdate(finishedWork, newProps, oldProps) {\n  try {\n    var domElement = finishedWork.stateNode;\n    updateProperties(domElement, finishedWork.type, oldProps, newProps);\n    domElement[internalPropsKey] = newProps;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nfunction isHostParent(fiber) {\n  return (\n    5 === fiber.tag ||\n    3 === fiber.tag ||\n    26 === fiber.tag ||\n    (27 === fiber.tag && isSingletonScope(fiber.type)) ||\n    4 === fiber.tag\n  );\n}\nfunction getHostSibling(fiber) {\n  a: for (;;) {\n    for (; null === fiber.sibling; ) {\n      if (null === fiber.return || isHostParent(fiber.return)) return null;\n      fiber = fiber.return;\n    }\n    fiber.sibling.return = fiber.return;\n    for (\n      fiber = fiber.sibling;\n      5 !== fiber.tag && 6 !== fiber.tag && 18 !== fiber.tag;\n\n    ) {\n      if (27 === fiber.tag && isSingletonScope(fiber.type)) continue a;\n      if (fiber.flags & 2) continue a;\n      if (null === fiber.child || 4 === fiber.tag) continue a;\n      else (fiber.child.return = fiber), (fiber = fiber.child);\n    }\n    if (!(fiber.flags & 2)) return fiber.stateNode;\n  }\n}\nfunction insertOrAppendPlacementNodeIntoContainer(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before\n        ? (9 === parent.nodeType\n            ? parent.body\n            : \"HTML\" === parent.nodeName\n              ? parent.ownerDocument.body\n              : parent\n          ).insertBefore(node, before)\n        : ((before =\n            9 === parent.nodeType\n              ? parent.body\n              : \"HTML\" === parent.nodeName\n                ? parent.ownerDocument.body\n                : parent),\n          before.appendChild(node),\n          (parent = parent._reactRootContainer),\n          (null !== parent && void 0 !== parent) ||\n            null !== before.onclick ||\n            (before.onclick = noop$1));\n  else if (\n    4 !== tag &&\n    (27 === tag &&\n      isSingletonScope(node.type) &&\n      ((parent = node.stateNode), (before = null)),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNodeIntoContainer(node, before, parent),\n        (node = node.sibling);\n}\nfunction insertOrAppendPlacementNode(node, before, parent) {\n  var tag = node.tag;\n  if (5 === tag || 6 === tag)\n    (node = node.stateNode),\n      before ? parent.insertBefore(node, before) : parent.appendChild(node);\n  else if (\n    4 !== tag &&\n    (27 === tag && isSingletonScope(node.type) && (parent = node.stateNode),\n    (node = node.child),\n    null !== node)\n  )\n    for (\n      insertOrAppendPlacementNode(node, before, parent), node = node.sibling;\n      null !== node;\n\n    )\n      insertOrAppendPlacementNode(node, before, parent), (node = node.sibling);\n}\nfunction commitHostSingletonAcquisition(finishedWork) {\n  var singleton = finishedWork.stateNode,\n    props = finishedWork.memoizedProps;\n  try {\n    for (\n      var type = finishedWork.type, attributes = singleton.attributes;\n      attributes.length;\n\n    )\n      singleton.removeAttributeNode(attributes[0]);\n    setInitialProperties(singleton, type, props);\n    singleton[internalInstanceKey] = finishedWork;\n    singleton[internalPropsKey] = props;\n  } catch (error) {\n    captureCommitPhaseError(finishedWork, finishedWork.return, error);\n  }\n}\nvar offscreenSubtreeIsHidden = !1,\n  offscreenSubtreeWasHidden = !1,\n  needsFormReset = !1,\n  PossiblyWeakSet = \"function\" === typeof WeakSet ? WeakSet : Set,\n  nextEffect = null;\nfunction commitBeforeMutationEffects(root, firstChild) {\n  root = root.containerInfo;\n  eventsEnabled = _enabled;\n  root = getActiveElementDeep(root);\n  if (hasSelectionCapabilities(root)) {\n    if (\"selectionStart\" in root)\n      var JSCompiler_temp = {\n        start: root.selectionStart,\n        end: root.selectionEnd\n      };\n    else\n      a: {\n        JSCompiler_temp =\n          ((JSCompiler_temp = root.ownerDocument) &&\n            JSCompiler_temp.defaultView) ||\n          window;\n        var selection =\n          JSCompiler_temp.getSelection && JSCompiler_temp.getSelection();\n        if (selection && 0 !== selection.rangeCount) {\n          JSCompiler_temp = selection.anchorNode;\n          var anchorOffset = selection.anchorOffset,\n            focusNode = selection.focusNode;\n          selection = selection.focusOffset;\n          try {\n            JSCompiler_temp.nodeType, focusNode.nodeType;\n          } catch (e$20) {\n            JSCompiler_temp = null;\n            break a;\n          }\n          var length = 0,\n            start = -1,\n            end = -1,\n            indexWithinAnchor = 0,\n            indexWithinFocus = 0,\n            node = root,\n            parentNode = null;\n          b: for (;;) {\n            for (var next; ; ) {\n              node !== JSCompiler_temp ||\n                (0 !== anchorOffset && 3 !== node.nodeType) ||\n                (start = length + anchorOffset);\n              node !== focusNode ||\n                (0 !== selection && 3 !== node.nodeType) ||\n                (end = length + selection);\n              3 === node.nodeType && (length += node.nodeValue.length);\n              if (null === (next = node.firstChild)) break;\n              parentNode = node;\n              node = next;\n            }\n            for (;;) {\n              if (node === root) break b;\n              parentNode === JSCompiler_temp &&\n                ++indexWithinAnchor === anchorOffset &&\n                (start = length);\n              parentNode === focusNode &&\n                ++indexWithinFocus === selection &&\n                (end = length);\n              if (null !== (next = node.nextSibling)) break;\n              node = parentNode;\n              parentNode = node.parentNode;\n            }\n            node = next;\n          }\n          JSCompiler_temp =\n            -1 === start || -1 === end ? null : { start: start, end: end };\n        } else JSCompiler_temp = null;\n      }\n    JSCompiler_temp = JSCompiler_temp || { start: 0, end: 0 };\n  } else JSCompiler_temp = null;\n  selectionInformation = { focusedElem: root, selectionRange: JSCompiler_temp };\n  _enabled = !1;\n  for (nextEffect = firstChild; null !== nextEffect; )\n    if (\n      ((firstChild = nextEffect),\n      (root = firstChild.child),\n      0 !== (firstChild.subtreeFlags & 1028) && null !== root)\n    )\n      (root.return = firstChild), (nextEffect = root);\n    else\n      for (; null !== nextEffect; ) {\n        firstChild = nextEffect;\n        focusNode = firstChild.alternate;\n        root = firstChild.flags;\n        switch (firstChild.tag) {\n          case 0:\n            if (\n              0 !== (root & 4) &&\n              ((root = firstChild.updateQueue),\n              (root = null !== root ? root.events : null),\n              null !== root)\n            )\n              for (\n                JSCompiler_temp = 0;\n                JSCompiler_temp < root.length;\n                JSCompiler_temp++\n              )\n                (anchorOffset = root[JSCompiler_temp]),\n                  (anchorOffset.ref.impl = anchorOffset.nextImpl);\n            break;\n          case 11:\n          case 15:\n            break;\n          case 1:\n            if (0 !== (root & 1024) && null !== focusNode) {\n              root = void 0;\n              JSCompiler_temp = firstChild;\n              anchorOffset = focusNode.memoizedProps;\n              focusNode = focusNode.memoizedState;\n              selection = JSCompiler_temp.stateNode;\n              try {\n                var resolvedPrevProps = resolveClassComponentProps(\n                  JSCompiler_temp.type,\n                  anchorOffset\n                );\n                root = selection.getSnapshotBeforeUpdate(\n                  resolvedPrevProps,\n                  focusNode\n                );\n                selection.__reactInternalSnapshotBeforeUpdate = root;\n              } catch (error) {\n                captureCommitPhaseError(\n                  JSCompiler_temp,\n                  JSCompiler_temp.return,\n                  error\n                );\n              }\n            }\n            break;\n          case 3:\n            if (0 !== (root & 1024))\n              if (\n                ((root = firstChild.stateNode.containerInfo),\n                (JSCompiler_temp = root.nodeType),\n                9 === JSCompiler_temp)\n              )\n                clearContainerSparingly(root);\n              else if (1 === JSCompiler_temp)\n                switch (root.nodeName) {\n                  case \"HEAD\":\n                  case \"HTML\":\n                  case \"BODY\":\n                    clearContainerSparingly(root);\n                    break;\n                  default:\n                    root.textContent = \"\";\n                }\n            break;\n          case 5:\n          case 26:\n          case 27:\n          case 6:\n          case 4:\n          case 17:\n            break;\n          default:\n            if (0 !== (root & 1024)) throw Error(formatProdErrorMessage(163));\n        }\n        root = firstChild.sibling;\n        if (null !== root) {\n          root.return = firstChild.return;\n          nextEffect = root;\n          break;\n        }\n        nextEffect = firstChild.return;\n      }\n}\nfunction commitLayoutEffectOnFiber(finishedRoot, current, finishedWork) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitHookEffectListMount(5, finishedWork);\n      break;\n    case 1:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (flags & 4)\n        if (((finishedRoot = finishedWork.stateNode), null === current))\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(finishedWork, finishedWork.return, error);\n          }\n        else {\n          var prevProps = resolveClassComponentProps(\n            finishedWork.type,\n            current.memoizedProps\n          );\n          current = current.memoizedState;\n          try {\n            finishedRoot.componentDidUpdate(\n              prevProps,\n              current,\n              finishedRoot.__reactInternalSnapshotBeforeUpdate\n            );\n          } catch (error$139) {\n            captureCommitPhaseError(\n              finishedWork,\n              finishedWork.return,\n              error$139\n            );\n          }\n        }\n      flags & 64 && commitClassCallbacks(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      if (\n        flags & 64 &&\n        ((finishedRoot = finishedWork.updateQueue), null !== finishedRoot)\n      ) {\n        current = null;\n        if (null !== finishedWork.child)\n          switch (finishedWork.child.tag) {\n            case 27:\n            case 5:\n              current = finishedWork.child.stateNode;\n              break;\n            case 1:\n              current = finishedWork.child.stateNode;\n          }\n        try {\n          commitCallbacks(finishedRoot, current);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 27:\n      null === current &&\n        flags & 4 &&\n        commitHostSingletonAcquisition(finishedWork);\n    case 26:\n    case 5:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      null === current && flags & 4 && commitHostMount(finishedWork);\n      flags & 512 && safelyAttachRef(finishedWork, finishedWork.return);\n      break;\n    case 12:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      break;\n    case 31:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitActivityHydrationCallbacks(finishedRoot, finishedWork);\n      break;\n    case 13:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n      flags & 4 && commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n      flags & 64 &&\n        ((finishedRoot = finishedWork.memoizedState),\n        null !== finishedRoot &&\n          ((finishedRoot = finishedRoot.dehydrated),\n          null !== finishedRoot &&\n            ((finishedWork = retryDehydratedSuspenseBoundary.bind(\n              null,\n              finishedWork\n            )),\n            registerSuspenseInstanceRetry(finishedRoot, finishedWork))));\n      break;\n    case 22:\n      flags = null !== finishedWork.memoizedState || offscreenSubtreeIsHidden;\n      if (!flags) {\n        current =\n          (null !== current && null !== current.memoizedState) ||\n          offscreenSubtreeWasHidden;\n        prevProps = offscreenSubtreeIsHidden;\n        var prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n        offscreenSubtreeIsHidden = flags;\n        (offscreenSubtreeWasHidden = current) && !prevOffscreenSubtreeWasHidden\n          ? recursivelyTraverseReappearLayoutEffects(\n              finishedRoot,\n              finishedWork,\n              0 !== (finishedWork.subtreeFlags & 8772)\n            )\n          : recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n        offscreenSubtreeIsHidden = prevProps;\n        offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      }\n      break;\n    case 30:\n      break;\n    default:\n      recursivelyTraverseLayoutEffects(finishedRoot, finishedWork);\n  }\n}\nfunction detachFiberAfterEffects(fiber) {\n  var alternate = fiber.alternate;\n  null !== alternate &&\n    ((fiber.alternate = null), detachFiberAfterEffects(alternate));\n  fiber.child = null;\n  fiber.deletions = null;\n  fiber.sibling = null;\n  5 === fiber.tag &&\n    ((alternate = fiber.stateNode),\n    null !== alternate && detachDeletedInstance(alternate));\n  fiber.stateNode = null;\n  fiber.return = null;\n  fiber.dependencies = null;\n  fiber.memoizedProps = null;\n  fiber.memoizedState = null;\n  fiber.pendingProps = null;\n  fiber.stateNode = null;\n  fiber.updateQueue = null;\n}\nvar hostParent = null,\n  hostParentIsContainer = !1;\nfunction recursivelyTraverseDeletionEffects(\n  finishedRoot,\n  nearestMountedAncestor,\n  parent\n) {\n  for (parent = parent.child; null !== parent; )\n    commitDeletionEffectsOnFiber(finishedRoot, nearestMountedAncestor, parent),\n      (parent = parent.sibling);\n}\nfunction commitDeletionEffectsOnFiber(\n  finishedRoot,\n  nearestMountedAncestor,\n  deletedFiber\n) {\n  if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberUnmount)\n    try {\n      injectedHook.onCommitFiberUnmount(rendererID, deletedFiber);\n    } catch (err) {}\n  switch (deletedFiber.tag) {\n    case 26:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      deletedFiber.memoizedState\n        ? deletedFiber.memoizedState.count--\n        : deletedFiber.stateNode &&\n          ((deletedFiber = deletedFiber.stateNode),\n          deletedFiber.parentNode.removeChild(deletedFiber));\n      break;\n    case 27:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n      var prevHostParent = hostParent,\n        prevHostParentIsContainer = hostParentIsContainer;\n      isSingletonScope(deletedFiber.type) &&\n        ((hostParent = deletedFiber.stateNode), (hostParentIsContainer = !1));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      releaseSingletonInstance(deletedFiber.stateNode);\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 5:\n      offscreenSubtreeWasHidden ||\n        safelyDetachRef(deletedFiber, nearestMountedAncestor);\n    case 6:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = null;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      if (null !== hostParent)\n        if (hostParentIsContainer)\n          try {\n            (9 === hostParent.nodeType\n              ? hostParent.body\n              : \"HTML\" === hostParent.nodeName\n                ? hostParent.ownerDocument.body\n                : hostParent\n            ).removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n        else\n          try {\n            hostParent.removeChild(deletedFiber.stateNode);\n          } catch (error) {\n            captureCommitPhaseError(\n              deletedFiber,\n              nearestMountedAncestor,\n              error\n            );\n          }\n      break;\n    case 18:\n      null !== hostParent &&\n        (hostParentIsContainer\n          ? ((finishedRoot = hostParent),\n            clearHydrationBoundary(\n              9 === finishedRoot.nodeType\n                ? finishedRoot.body\n                : \"HTML\" === finishedRoot.nodeName\n                  ? finishedRoot.ownerDocument.body\n                  : finishedRoot,\n              deletedFiber.stateNode\n            ),\n            retryIfBlockedOn(finishedRoot))\n          : clearHydrationBoundary(hostParent, deletedFiber.stateNode));\n      break;\n    case 4:\n      prevHostParent = hostParent;\n      prevHostParentIsContainer = hostParentIsContainer;\n      hostParent = deletedFiber.stateNode.containerInfo;\n      hostParentIsContainer = !0;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      hostParent = prevHostParent;\n      hostParentIsContainer = prevHostParentIsContainer;\n      break;\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      commitHookEffectListUnmount(2, deletedFiber, nearestMountedAncestor);\n      offscreenSubtreeWasHidden ||\n        commitHookEffectListUnmount(4, deletedFiber, nearestMountedAncestor);\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 1:\n      offscreenSubtreeWasHidden ||\n        (safelyDetachRef(deletedFiber, nearestMountedAncestor),\n        (prevHostParent = deletedFiber.stateNode),\n        \"function\" === typeof prevHostParent.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            deletedFiber,\n            nearestMountedAncestor,\n            prevHostParent\n          ));\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 21:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      break;\n    case 22:\n      offscreenSubtreeWasHidden =\n        (prevHostParent = offscreenSubtreeWasHidden) ||\n        null !== deletedFiber.memoizedState;\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n      offscreenSubtreeWasHidden = prevHostParent;\n      break;\n    default:\n      recursivelyTraverseDeletionEffects(\n        finishedRoot,\n        nearestMountedAncestor,\n        deletedFiber\n      );\n  }\n}\nfunction commitActivityHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState), null !== finishedRoot))\n  ) {\n    finishedRoot = finishedRoot.dehydrated;\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n  }\n}\nfunction commitSuspenseHydrationCallbacks(finishedRoot, finishedWork) {\n  if (\n    null === finishedWork.memoizedState &&\n    ((finishedRoot = finishedWork.alternate),\n    null !== finishedRoot &&\n      ((finishedRoot = finishedRoot.memoizedState),\n      null !== finishedRoot &&\n        ((finishedRoot = finishedRoot.dehydrated), null !== finishedRoot)))\n  )\n    try {\n      retryIfBlockedOn(finishedRoot);\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n}\nfunction getRetryCache(finishedWork) {\n  switch (finishedWork.tag) {\n    case 31:\n    case 13:\n    case 19:\n      var retryCache = finishedWork.stateNode;\n      null === retryCache &&\n        (retryCache = finishedWork.stateNode = new PossiblyWeakSet());\n      return retryCache;\n    case 22:\n      return (\n        (finishedWork = finishedWork.stateNode),\n        (retryCache = finishedWork._retryCache),\n        null === retryCache &&\n          (retryCache = finishedWork._retryCache = new PossiblyWeakSet()),\n        retryCache\n      );\n    default:\n      throw Error(formatProdErrorMessage(435, finishedWork.tag));\n  }\n}\nfunction attachSuspenseRetryListeners(finishedWork, wakeables) {\n  var retryCache = getRetryCache(finishedWork);\n  wakeables.forEach(function (wakeable) {\n    if (!retryCache.has(wakeable)) {\n      retryCache.add(wakeable);\n      var retry = resolveRetryWakeable.bind(null, finishedWork, wakeable);\n      wakeable.then(retry, retry);\n    }\n  });\n}\nfunction recursivelyTraverseMutationEffects(root$jscomp$0, parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (null !== deletions)\n    for (var i = 0; i < deletions.length; i++) {\n      var childToDelete = deletions[i],\n        root = root$jscomp$0,\n        returnFiber = parentFiber,\n        parent = returnFiber;\n      a: for (; null !== parent; ) {\n        switch (parent.tag) {\n          case 27:\n            if (isSingletonScope(parent.type)) {\n              hostParent = parent.stateNode;\n              hostParentIsContainer = !1;\n              break a;\n            }\n            break;\n          case 5:\n            hostParent = parent.stateNode;\n            hostParentIsContainer = !1;\n            break a;\n          case 3:\n          case 4:\n            hostParent = parent.stateNode.containerInfo;\n            hostParentIsContainer = !0;\n            break a;\n        }\n        parent = parent.return;\n      }\n      if (null === hostParent) throw Error(formatProdErrorMessage(160));\n      commitDeletionEffectsOnFiber(root, returnFiber, childToDelete);\n      hostParent = null;\n      hostParentIsContainer = !1;\n      root = childToDelete.alternate;\n      null !== root && (root.return = null);\n      childToDelete.return = null;\n    }\n  if (parentFiber.subtreeFlags & 13886)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitMutationEffectsOnFiber(parentFiber, root$jscomp$0),\n        (parentFiber = parentFiber.sibling);\n}\nvar currentHoistableRoot = null;\nfunction commitMutationEffectsOnFiber(finishedWork, root) {\n  var current = finishedWork.alternate,\n    flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 14:\n    case 15:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        (commitHookEffectListUnmount(3, finishedWork, finishedWork.return),\n        commitHookEffectListMount(3, finishedWork),\n        commitHookEffectListUnmount(5, finishedWork, finishedWork.return));\n      break;\n    case 1:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      flags & 64 &&\n        offscreenSubtreeIsHidden &&\n        ((finishedWork = finishedWork.updateQueue),\n        null !== finishedWork &&\n          ((flags = finishedWork.callbacks),\n          null !== flags &&\n            ((current = finishedWork.shared.hiddenCallbacks),\n            (finishedWork.shared.hiddenCallbacks =\n              null === current ? flags : current.concat(flags)))));\n      break;\n    case 26:\n      var hoistableRoot = currentHoistableRoot;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (flags & 4) {\n        var currentResource = null !== current ? current.memoizedState : null;\n        flags = finishedWork.memoizedState;\n        if (null === current)\n          if (null === flags)\n            if (null === finishedWork.stateNode) {\n              a: {\n                flags = finishedWork.type;\n                current = finishedWork.memoizedProps;\n                hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n                b: switch (flags) {\n                  case \"title\":\n                    currentResource =\n                      hoistableRoot.getElementsByTagName(\"title\")[0];\n                    if (\n                      !currentResource ||\n                      currentResource[internalHoistableMarker] ||\n                      currentResource[internalInstanceKey] ||\n                      \"http://www.w3.org/2000/svg\" ===\n                        currentResource.namespaceURI ||\n                      currentResource.hasAttribute(\"itemprop\")\n                    )\n                      (currentResource = hoistableRoot.createElement(flags)),\n                        hoistableRoot.head.insertBefore(\n                          currentResource,\n                          hoistableRoot.querySelector(\"head > title\")\n                        );\n                    setInitialProperties(currentResource, flags, current);\n                    currentResource[internalInstanceKey] = finishedWork;\n                    markNodeAsHoistable(currentResource);\n                    flags = currentResource;\n                    break a;\n                  case \"link\":\n                    var maybeNodes = getHydratableHoistableCache(\n                      \"link\",\n                      \"href\",\n                      hoistableRoot\n                    ).get(flags + (current.href || \"\"));\n                    if (maybeNodes)\n                      for (var i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"href\") ===\n                            (null == current.href || \"\" === current.href\n                              ? null\n                              : current.href) &&\n                            currentResource.getAttribute(\"rel\") ===\n                              (null == current.rel ? null : current.rel) &&\n                            currentResource.getAttribute(\"title\") ===\n                              (null == current.title ? null : current.title) &&\n                            currentResource.getAttribute(\"crossorigin\") ===\n                              (null == current.crossOrigin\n                                ? null\n                                : current.crossOrigin))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  case \"meta\":\n                    if (\n                      (maybeNodes = getHydratableHoistableCache(\n                        \"meta\",\n                        \"content\",\n                        hoistableRoot\n                      ).get(flags + (current.content || \"\")))\n                    )\n                      for (i = 0; i < maybeNodes.length; i++)\n                        if (\n                          ((currentResource = maybeNodes[i]),\n                          currentResource.getAttribute(\"content\") ===\n                            (null == current.content\n                              ? null\n                              : \"\" + current.content) &&\n                            currentResource.getAttribute(\"name\") ===\n                              (null == current.name ? null : current.name) &&\n                            currentResource.getAttribute(\"property\") ===\n                              (null == current.property\n                                ? null\n                                : current.property) &&\n                            currentResource.getAttribute(\"http-equiv\") ===\n                              (null == current.httpEquiv\n                                ? null\n                                : current.httpEquiv) &&\n                            currentResource.getAttribute(\"charset\") ===\n                              (null == current.charSet\n                                ? null\n                                : current.charSet))\n                        ) {\n                          maybeNodes.splice(i, 1);\n                          break b;\n                        }\n                    currentResource = hoistableRoot.createElement(flags);\n                    setInitialProperties(currentResource, flags, current);\n                    hoistableRoot.head.appendChild(currentResource);\n                    break;\n                  default:\n                    throw Error(formatProdErrorMessage(468, flags));\n                }\n                currentResource[internalInstanceKey] = finishedWork;\n                markNodeAsHoistable(currentResource);\n                flags = currentResource;\n              }\n              finishedWork.stateNode = flags;\n            } else\n              mountHoistable(\n                hoistableRoot,\n                finishedWork.type,\n                finishedWork.stateNode\n              );\n          else\n            finishedWork.stateNode = acquireResource(\n              hoistableRoot,\n              flags,\n              finishedWork.memoizedProps\n            );\n        else\n          currentResource !== flags\n            ? (null === currentResource\n                ? null !== current.stateNode &&\n                  ((current = current.stateNode),\n                  current.parentNode.removeChild(current))\n                : currentResource.count--,\n              null === flags\n                ? mountHoistable(\n                    hoistableRoot,\n                    finishedWork.type,\n                    finishedWork.stateNode\n                  )\n                : acquireResource(\n                    hoistableRoot,\n                    flags,\n                    finishedWork.memoizedProps\n                  ))\n            : null === flags &&\n              null !== finishedWork.stateNode &&\n              commitHostUpdate(\n                finishedWork,\n                finishedWork.memoizedProps,\n                current.memoizedProps\n              );\n      }\n      break;\n    case 27:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      null !== current &&\n        flags & 4 &&\n        commitHostUpdate(\n          finishedWork,\n          finishedWork.memoizedProps,\n          current.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 512 &&\n        (offscreenSubtreeWasHidden ||\n          null === current ||\n          safelyDetachRef(current, current.return));\n      if (finishedWork.flags & 32) {\n        hoistableRoot = finishedWork.stateNode;\n        try {\n          setTextContent(hoistableRoot, \"\");\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      flags & 4 &&\n        null != finishedWork.stateNode &&\n        ((hoistableRoot = finishedWork.memoizedProps),\n        commitHostUpdate(\n          finishedWork,\n          hoistableRoot,\n          null !== current ? current.memoizedProps : hoistableRoot\n        ));\n      flags & 1024 && (needsFormReset = !0);\n      break;\n    case 6:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4) {\n        if (null === finishedWork.stateNode)\n          throw Error(formatProdErrorMessage(162));\n        flags = finishedWork.memoizedProps;\n        current = finishedWork.stateNode;\n        try {\n          current.nodeValue = flags;\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      }\n      break;\n    case 3:\n      tagCaches = null;\n      hoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(root.containerInfo);\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      currentHoistableRoot = hoistableRoot;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 4 && null !== current && current.memoizedState.isDehydrated)\n        try {\n          retryIfBlockedOn(root.containerInfo);\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      needsFormReset &&\n        ((needsFormReset = !1), recursivelyResetForms(finishedWork));\n      break;\n    case 4:\n      flags = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(\n        finishedWork.stateNode.containerInfo\n      );\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      currentHoistableRoot = flags;\n      break;\n    case 12:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      break;\n    case 31:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 13:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      finishedWork.child.flags & 8192 &&\n        (null !== finishedWork.memoizedState) !==\n          (null !== current && null !== current.memoizedState) &&\n        (globalMostRecentFallbackTime = now());\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 22:\n      hoistableRoot = null !== finishedWork.memoizedState;\n      var wasHidden = null !== current && null !== current.memoizedState,\n        prevOffscreenSubtreeIsHidden = offscreenSubtreeIsHidden,\n        prevOffscreenSubtreeWasHidden = offscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden || hoistableRoot;\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden || wasHidden;\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      offscreenSubtreeWasHidden = prevOffscreenSubtreeWasHidden;\n      offscreenSubtreeIsHidden = prevOffscreenSubtreeIsHidden;\n      commitReconciliationEffects(finishedWork);\n      if (flags & 8192)\n        a: for (\n          root = finishedWork.stateNode,\n            root._visibility = hoistableRoot\n              ? root._visibility & -2\n              : root._visibility | 1,\n            hoistableRoot &&\n              (null === current ||\n                wasHidden ||\n                offscreenSubtreeIsHidden ||\n                offscreenSubtreeWasHidden ||\n                recursivelyTraverseDisappearLayoutEffects(finishedWork)),\n            current = null,\n            root = finishedWork;\n          ;\n\n        ) {\n          if (5 === root.tag || 26 === root.tag) {\n            if (null === current) {\n              wasHidden = current = root;\n              try {\n                if (((currentResource = wasHidden.stateNode), hoistableRoot))\n                  (maybeNodes = currentResource.style),\n                    \"function\" === typeof maybeNodes.setProperty\n                      ? maybeNodes.setProperty(\"display\", \"none\", \"important\")\n                      : (maybeNodes.display = \"none\");\n                else {\n                  i = wasHidden.stateNode;\n                  var styleProp = wasHidden.memoizedProps.style,\n                    display =\n                      void 0 !== styleProp &&\n                      null !== styleProp &&\n                      styleProp.hasOwnProperty(\"display\")\n                        ? styleProp.display\n                        : null;\n                  i.style.display =\n                    null == display || \"boolean\" === typeof display\n                      ? \"\"\n                      : (\"\" + display).trim();\n                }\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (6 === root.tag) {\n            if (null === current) {\n              wasHidden = root;\n              try {\n                wasHidden.stateNode.nodeValue = hoistableRoot\n                  ? \"\"\n                  : wasHidden.memoizedProps;\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (18 === root.tag) {\n            if (null === current) {\n              wasHidden = root;\n              try {\n                var instance = wasHidden.stateNode;\n                hoistableRoot\n                  ? hideOrUnhideDehydratedBoundary(instance, !0)\n                  : hideOrUnhideDehydratedBoundary(wasHidden.stateNode, !1);\n              } catch (error) {\n                captureCommitPhaseError(wasHidden, wasHidden.return, error);\n              }\n            }\n          } else if (\n            ((22 !== root.tag && 23 !== root.tag) ||\n              null === root.memoizedState ||\n              root === finishedWork) &&\n            null !== root.child\n          ) {\n            root.child.return = root;\n            root = root.child;\n            continue;\n          }\n          if (root === finishedWork) break a;\n          for (; null === root.sibling; ) {\n            if (null === root.return || root.return === finishedWork) break a;\n            current === root && (current = null);\n            root = root.return;\n          }\n          current === root && (current = null);\n          root.sibling.return = root.return;\n          root = root.sibling;\n        }\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((current = flags.retryQueue),\n          null !== current &&\n            ((flags.retryQueue = null),\n            attachSuspenseRetryListeners(finishedWork, current))));\n      break;\n    case 19:\n      recursivelyTraverseMutationEffects(root, finishedWork);\n      commitReconciliationEffects(finishedWork);\n      flags & 4 &&\n        ((flags = finishedWork.updateQueue),\n        null !== flags &&\n          ((finishedWork.updateQueue = null),\n          attachSuspenseRetryListeners(finishedWork, flags)));\n      break;\n    case 30:\n      break;\n    case 21:\n      break;\n    default:\n      recursivelyTraverseMutationEffects(root, finishedWork),\n        commitReconciliationEffects(finishedWork);\n  }\n}\nfunction commitReconciliationEffects(finishedWork) {\n  var flags = finishedWork.flags;\n  if (flags & 2) {\n    try {\n      for (\n        var hostParentFiber, parentFiber = finishedWork.return;\n        null !== parentFiber;\n\n      ) {\n        if (isHostParent(parentFiber)) {\n          hostParentFiber = parentFiber;\n          break;\n        }\n        parentFiber = parentFiber.return;\n      }\n      if (null == hostParentFiber) throw Error(formatProdErrorMessage(160));\n      switch (hostParentFiber.tag) {\n        case 27:\n          var parent = hostParentFiber.stateNode,\n            before = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before, parent);\n          break;\n        case 5:\n          var parent$141 = hostParentFiber.stateNode;\n          hostParentFiber.flags & 32 &&\n            (setTextContent(parent$141, \"\"), (hostParentFiber.flags &= -33));\n          var before$142 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNode(finishedWork, before$142, parent$141);\n          break;\n        case 3:\n        case 4:\n          var parent$143 = hostParentFiber.stateNode.containerInfo,\n            before$144 = getHostSibling(finishedWork);\n          insertOrAppendPlacementNodeIntoContainer(\n            finishedWork,\n            before$144,\n            parent$143\n          );\n          break;\n        default:\n          throw Error(formatProdErrorMessage(161));\n      }\n    } catch (error) {\n      captureCommitPhaseError(finishedWork, finishedWork.return, error);\n    }\n    finishedWork.flags &= -3;\n  }\n  flags & 4096 && (finishedWork.flags &= -4097);\n}\nfunction recursivelyResetForms(parentFiber) {\n  if (parentFiber.subtreeFlags & 1024)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var fiber = parentFiber;\n      recursivelyResetForms(fiber);\n      5 === fiber.tag && fiber.flags & 1024 && fiber.stateNode.reset();\n      parentFiber = parentFiber.sibling;\n    }\n}\nfunction recursivelyTraverseLayoutEffects(root, parentFiber) {\n  if (parentFiber.subtreeFlags & 8772)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitLayoutEffectOnFiber(root, parentFiber.alternate, parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction recursivelyTraverseDisappearLayoutEffects(parentFiber) {\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedWork = parentFiber;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 14:\n      case 15:\n        commitHookEffectListUnmount(4, finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 1:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        var instance = finishedWork.stateNode;\n        \"function\" === typeof instance.componentWillUnmount &&\n          safelyCallComponentWillUnmount(\n            finishedWork,\n            finishedWork.return,\n            instance\n          );\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 27:\n        releaseSingletonInstance(finishedWork.stateNode);\n      case 26:\n      case 5:\n        safelyDetachRef(finishedWork, finishedWork.return);\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      case 30:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n        break;\n      default:\n        recursivelyTraverseDisappearLayoutEffects(finishedWork);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseReappearLayoutEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects && 0 !== (parentFiber.subtreeFlags & 8772);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var current = parentFiber.alternate,\n      finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(4, finishedWork);\n        break;\n      case 1:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        current = finishedWork;\n        finishedRoot = current.stateNode;\n        if (\"function\" === typeof finishedRoot.componentDidMount)\n          try {\n            finishedRoot.componentDidMount();\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        current = finishedWork;\n        finishedRoot = current.updateQueue;\n        if (null !== finishedRoot) {\n          var instance = current.stateNode;\n          try {\n            var hiddenCallbacks = finishedRoot.shared.hiddenCallbacks;\n            if (null !== hiddenCallbacks)\n              for (\n                finishedRoot.shared.hiddenCallbacks = null, finishedRoot = 0;\n                finishedRoot < hiddenCallbacks.length;\n                finishedRoot++\n              )\n                callCallback(hiddenCallbacks[finishedRoot], instance);\n          } catch (error) {\n            captureCommitPhaseError(current, current.return, error);\n          }\n        }\n        includeWorkInProgressEffects &&\n          flags & 64 &&\n          commitClassCallbacks(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 27:\n        commitHostSingletonAcquisition(finishedWork);\n      case 26:\n      case 5:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          null === current &&\n          flags & 4 &&\n          commitHostMount(finishedWork);\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 12:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        break;\n      case 31:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitActivityHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 13:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 4 &&\n          commitSuspenseHydrationCallbacks(finishedRoot, finishedWork);\n        break;\n      case 22:\n        null === finishedWork.memoizedState &&\n          recursivelyTraverseReappearLayoutEffects(\n            finishedRoot,\n            finishedWork,\n            includeWorkInProgressEffects\n          );\n        safelyAttachRef(finishedWork, finishedWork.return);\n        break;\n      case 30:\n        break;\n      default:\n        recursivelyTraverseReappearLayoutEffects(\n          finishedRoot,\n          finishedWork,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitOffscreenPassiveMountEffects(current, finishedWork) {\n  var previousCache = null;\n  null !== current &&\n    null !== current.memoizedState &&\n    null !== current.memoizedState.cachePool &&\n    (previousCache = current.memoizedState.cachePool.pool);\n  current = null;\n  null !== finishedWork.memoizedState &&\n    null !== finishedWork.memoizedState.cachePool &&\n    (current = finishedWork.memoizedState.cachePool.pool);\n  current !== previousCache &&\n    (null != current && current.refCount++,\n    null != previousCache && releaseCache(previousCache));\n}\nfunction commitCachePassiveMountEffect(current, finishedWork) {\n  current = null;\n  null !== finishedWork.alternate &&\n    (current = finishedWork.alternate.memoizedState.cache);\n  finishedWork = finishedWork.memoizedState.cache;\n  finishedWork !== current &&\n    (finishedWork.refCount++, null != current && releaseCache(current));\n}\nfunction recursivelyTraversePassiveMountEffects(\n  root,\n  parentFiber,\n  committedLanes,\n  committedTransitions\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveMountOnFiber(\n        root,\n        parentFiber,\n        committedLanes,\n        committedTransitions\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveMountOnFiber(\n  finishedRoot,\n  finishedWork,\n  committedLanes,\n  committedTransitions\n) {\n  var flags = finishedWork.flags;\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 && commitHookEffectListMount(9, finishedWork);\n      break;\n    case 1:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 3:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        ((finishedRoot = null),\n        null !== finishedWork.alternate &&\n          (finishedRoot = finishedWork.alternate.memoizedState.cache),\n        (finishedWork = finishedWork.memoizedState.cache),\n        finishedWork !== finishedRoot &&\n          (finishedWork.refCount++,\n          null != finishedRoot && releaseCache(finishedRoot)));\n      break;\n    case 12:\n      if (flags & 2048) {\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n        finishedRoot = finishedWork.stateNode;\n        try {\n          var _finishedWork$memoize2 = finishedWork.memoizedProps,\n            id = _finishedWork$memoize2.id,\n            onPostCommit = _finishedWork$memoize2.onPostCommit;\n          \"function\" === typeof onPostCommit &&\n            onPostCommit(\n              id,\n              null === finishedWork.alternate ? \"mount\" : \"update\",\n              finishedRoot.passiveEffectDuration,\n              -0\n            );\n        } catch (error) {\n          captureCommitPhaseError(finishedWork, finishedWork.return, error);\n        }\n      } else\n        recursivelyTraversePassiveMountEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions\n        );\n      break;\n    case 31:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 13:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      break;\n    case 23:\n      break;\n    case 22:\n      _finishedWork$memoize2 = finishedWork.stateNode;\n      id = finishedWork.alternate;\n      null !== finishedWork.memoizedState\n        ? _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork)\n        : _finishedWork$memoize2._visibility & 2\n          ? recursivelyTraversePassiveMountEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions\n            )\n          : ((_finishedWork$memoize2._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              0 !== (finishedWork.subtreeFlags & 10256) || !1\n            ));\n      flags & 2048 && commitOffscreenPassiveMountEffects(id, finishedWork);\n      break;\n    case 24:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n      flags & 2048 &&\n        commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveMountEffects(\n        finishedRoot,\n        finishedWork,\n        committedLanes,\n        committedTransitions\n      );\n  }\n}\nfunction recursivelyTraverseReconnectPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber,\n  committedLanes$jscomp$0,\n  committedTransitions$jscomp$0,\n  includeWorkInProgressEffects\n) {\n  includeWorkInProgressEffects =\n    includeWorkInProgressEffects &&\n    (0 !== (parentFiber.subtreeFlags & 10256) || !1);\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    var finishedRoot = finishedRoot$jscomp$0,\n      finishedWork = parentFiber,\n      committedLanes = committedLanes$jscomp$0,\n      committedTransitions = committedTransitions$jscomp$0,\n      flags = finishedWork.flags;\n    switch (finishedWork.tag) {\n      case 0:\n      case 11:\n      case 15:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        commitHookEffectListMount(8, finishedWork);\n        break;\n      case 23:\n        break;\n      case 22:\n        var instance = finishedWork.stateNode;\n        null !== finishedWork.memoizedState\n          ? instance._visibility & 2\n            ? recursivelyTraverseReconnectPassiveEffects(\n                finishedRoot,\n                finishedWork,\n                committedLanes,\n                committedTransitions,\n                includeWorkInProgressEffects\n              )\n            : recursivelyTraverseAtomicPassiveEffects(\n                finishedRoot,\n                finishedWork\n              )\n          : ((instance._visibility |= 2),\n            recursivelyTraverseReconnectPassiveEffects(\n              finishedRoot,\n              finishedWork,\n              committedLanes,\n              committedTransitions,\n              includeWorkInProgressEffects\n            ));\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitOffscreenPassiveMountEffects(\n            finishedWork.alternate,\n            finishedWork\n          );\n        break;\n      case 24:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n        includeWorkInProgressEffects &&\n          flags & 2048 &&\n          commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n        break;\n      default:\n        recursivelyTraverseReconnectPassiveEffects(\n          finishedRoot,\n          finishedWork,\n          committedLanes,\n          committedTransitions,\n          includeWorkInProgressEffects\n        );\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction recursivelyTraverseAtomicPassiveEffects(\n  finishedRoot$jscomp$0,\n  parentFiber\n) {\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n      var finishedRoot = finishedRoot$jscomp$0,\n        finishedWork = parentFiber,\n        flags = finishedWork.flags;\n      switch (finishedWork.tag) {\n        case 22:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitOffscreenPassiveMountEffects(\n              finishedWork.alternate,\n              finishedWork\n            );\n          break;\n        case 24:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n          flags & 2048 &&\n            commitCachePassiveMountEffect(finishedWork.alternate, finishedWork);\n          break;\n        default:\n          recursivelyTraverseAtomicPassiveEffects(finishedRoot, finishedWork);\n      }\n      parentFiber = parentFiber.sibling;\n    }\n}\nvar suspenseyCommitFlag = 8192;\nfunction recursivelyAccumulateSuspenseyCommit(\n  parentFiber,\n  committedLanes,\n  suspendedState\n) {\n  if (parentFiber.subtreeFlags & suspenseyCommitFlag)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      accumulateSuspenseyCommitOnFiber(\n        parentFiber,\n        committedLanes,\n        suspendedState\n      ),\n        (parentFiber = parentFiber.sibling);\n}\nfunction accumulateSuspenseyCommitOnFiber(\n  fiber,\n  committedLanes,\n  suspendedState\n) {\n  switch (fiber.tag) {\n    case 26:\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n      fiber.flags & suspenseyCommitFlag &&\n        null !== fiber.memoizedState &&\n        suspendResource(\n          suspendedState,\n          currentHoistableRoot,\n          fiber.memoizedState,\n          fiber.memoizedProps\n        );\n      break;\n    case 5:\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n      break;\n    case 3:\n    case 4:\n      var previousHoistableRoot = currentHoistableRoot;\n      currentHoistableRoot = getHoistableRoot(fiber.stateNode.containerInfo);\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n      currentHoistableRoot = previousHoistableRoot;\n      break;\n    case 22:\n      null === fiber.memoizedState &&\n        ((previousHoistableRoot = fiber.alternate),\n        null !== previousHoistableRoot &&\n        null !== previousHoistableRoot.memoizedState\n          ? ((previousHoistableRoot = suspenseyCommitFlag),\n            (suspenseyCommitFlag = 16777216),\n            recursivelyAccumulateSuspenseyCommit(\n              fiber,\n              committedLanes,\n              suspendedState\n            ),\n            (suspenseyCommitFlag = previousHoistableRoot))\n          : recursivelyAccumulateSuspenseyCommit(\n              fiber,\n              committedLanes,\n              suspendedState\n            ));\n      break;\n    default:\n      recursivelyAccumulateSuspenseyCommit(\n        fiber,\n        committedLanes,\n        suspendedState\n      );\n  }\n}\nfunction detachAlternateSiblings(parentFiber) {\n  var previousFiber = parentFiber.alternate;\n  if (\n    null !== previousFiber &&\n    ((parentFiber = previousFiber.child), null !== parentFiber)\n  ) {\n    previousFiber.child = null;\n    do\n      (previousFiber = parentFiber.sibling),\n        (parentFiber.sibling = null),\n        (parentFiber = previousFiber);\n    while (null !== parentFiber);\n  }\n}\nfunction recursivelyTraversePassiveUnmountEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  if (parentFiber.subtreeFlags & 10256)\n    for (parentFiber = parentFiber.child; null !== parentFiber; )\n      commitPassiveUnmountOnFiber(parentFiber),\n        (parentFiber = parentFiber.sibling);\n}\nfunction commitPassiveUnmountOnFiber(finishedWork) {\n  switch (finishedWork.tag) {\n    case 0:\n    case 11:\n    case 15:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      finishedWork.flags & 2048 &&\n        commitHookEffectListUnmount(9, finishedWork, finishedWork.return);\n      break;\n    case 3:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 12:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    case 22:\n      var instance = finishedWork.stateNode;\n      null !== finishedWork.memoizedState &&\n      instance._visibility & 2 &&\n      (null === finishedWork.return || 13 !== finishedWork.return.tag)\n        ? ((instance._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(finishedWork))\n        : recursivelyTraversePassiveUnmountEffects(finishedWork);\n      break;\n    default:\n      recursivelyTraversePassiveUnmountEffects(finishedWork);\n  }\n}\nfunction recursivelyTraverseDisconnectPassiveEffects(parentFiber) {\n  var deletions = parentFiber.deletions;\n  if (0 !== (parentFiber.flags & 16)) {\n    if (null !== deletions)\n      for (var i = 0; i < deletions.length; i++) {\n        var childToDelete = deletions[i];\n        nextEffect = childToDelete;\n        commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n          childToDelete,\n          parentFiber\n        );\n      }\n    detachAlternateSiblings(parentFiber);\n  }\n  for (parentFiber = parentFiber.child; null !== parentFiber; ) {\n    deletions = parentFiber;\n    switch (deletions.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, deletions, deletions.return);\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n        break;\n      case 22:\n        i = deletions.stateNode;\n        i._visibility & 2 &&\n          ((i._visibility &= -3),\n          recursivelyTraverseDisconnectPassiveEffects(deletions));\n        break;\n      default:\n        recursivelyTraverseDisconnectPassiveEffects(deletions);\n    }\n    parentFiber = parentFiber.sibling;\n  }\n}\nfunction commitPassiveUnmountEffectsInsideOfDeletedTree_begin(\n  deletedSubtreeRoot,\n  nearestMountedAncestor\n) {\n  for (; null !== nextEffect; ) {\n    var fiber = nextEffect;\n    switch (fiber.tag) {\n      case 0:\n      case 11:\n      case 15:\n        commitHookEffectListUnmount(8, fiber, nearestMountedAncestor);\n        break;\n      case 23:\n      case 22:\n        if (\n          null !== fiber.memoizedState &&\n          null !== fiber.memoizedState.cachePool\n        ) {\n          var cache = fiber.memoizedState.cachePool.pool;\n          null != cache && cache.refCount++;\n        }\n        break;\n      case 24:\n        releaseCache(fiber.memoizedState.cache);\n    }\n    cache = fiber.child;\n    if (null !== cache) (cache.return = fiber), (nextEffect = cache);\n    else\n      a: for (fiber = deletedSubtreeRoot; null !== nextEffect; ) {\n        cache = nextEffect;\n        var sibling = cache.sibling,\n          returnFiber = cache.return;\n        detachFiberAfterEffects(cache);\n        if (cache === fiber) {\n          nextEffect = null;\n          break a;\n        }\n        if (null !== sibling) {\n          sibling.return = returnFiber;\n          nextEffect = sibling;\n          break a;\n        }\n        nextEffect = returnFiber;\n      }\n  }\n}\nvar DefaultAsyncDispatcher = {\n    getCacheForType: function (resourceType) {\n      var cache = readContext(CacheContext),\n        cacheForType = cache.data.get(resourceType);\n      void 0 === cacheForType &&\n        ((cacheForType = resourceType()),\n        cache.data.set(resourceType, cacheForType));\n      return cacheForType;\n    },\n    cacheSignal: function () {\n      return readContext(CacheContext).controller.signal;\n    }\n  },\n  PossiblyWeakMap = \"function\" === typeof WeakMap ? WeakMap : Map,\n  executionContext = 0,\n  workInProgressRoot = null,\n  workInProgress = null,\n  workInProgressRootRenderLanes = 0,\n  workInProgressSuspendedReason = 0,\n  workInProgressThrownValue = null,\n  workInProgressRootDidSkipSuspendedSiblings = !1,\n  workInProgressRootIsPrerendering = !1,\n  workInProgressRootDidAttachPingListener = !1,\n  entangledRenderLanes = 0,\n  workInProgressRootExitStatus = 0,\n  workInProgressRootSkippedLanes = 0,\n  workInProgressRootInterleavedUpdatedLanes = 0,\n  workInProgressRootPingedLanes = 0,\n  workInProgressDeferredLane = 0,\n  workInProgressSuspendedRetryLanes = 0,\n  workInProgressRootConcurrentErrors = null,\n  workInProgressRootRecoverableErrors = null,\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1,\n  globalMostRecentFallbackTime = 0,\n  globalMostRecentTransitionTime = 0,\n  workInProgressRootRenderTargetTime = Infinity,\n  workInProgressTransitions = null,\n  legacyErrorBoundariesThatAlreadyFailed = null,\n  pendingEffectsStatus = 0,\n  pendingEffectsRoot = null,\n  pendingFinishedWork = null,\n  pendingEffectsLanes = 0,\n  pendingEffectsRemainingLanes = 0,\n  pendingPassiveTransitions = null,\n  pendingRecoverableErrors = null,\n  nestedUpdateCount = 0,\n  rootWithNestedUpdates = null;\nfunction requestUpdateLane() {\n  return 0 !== (executionContext & 2) && 0 !== workInProgressRootRenderLanes\n    ? workInProgressRootRenderLanes & -workInProgressRootRenderLanes\n    : null !== ReactSharedInternals.T\n      ? requestTransitionLane()\n      : resolveUpdatePriority();\n}\nfunction requestDeferredLane() {\n  if (0 === workInProgressDeferredLane)\n    if (0 === (workInProgressRootRenderLanes & 536870912) || isHydrating) {\n      var lane = nextTransitionDeferredLane;\n      nextTransitionDeferredLane <<= 1;\n      0 === (nextTransitionDeferredLane & 3932160) &&\n        (nextTransitionDeferredLane = 262144);\n      workInProgressDeferredLane = lane;\n    } else workInProgressDeferredLane = 536870912;\n  lane = suspenseHandlerStackCursor.current;\n  null !== lane && (lane.flags |= 32);\n  return workInProgressDeferredLane;\n}\nfunction scheduleUpdateOnFiber(root, fiber, lane) {\n  if (\n    (root === workInProgressRoot &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    prepareFreshStack(root, 0),\n      markRootSuspended(\n        root,\n        workInProgressRootRenderLanes,\n        workInProgressDeferredLane,\n        !1\n      );\n  markRootUpdated$1(root, lane);\n  if (0 === (executionContext & 2) || root !== workInProgressRoot)\n    root === workInProgressRoot &&\n      (0 === (executionContext & 2) &&\n        (workInProgressRootInterleavedUpdatedLanes |= lane),\n      4 === workInProgressRootExitStatus &&\n        markRootSuspended(\n          root,\n          workInProgressRootRenderLanes,\n          workInProgressDeferredLane,\n          !1\n        )),\n      ensureRootIsScheduled(root);\n}\nfunction performWorkOnRoot(root$jscomp$0, lanes, forceSync) {\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  var shouldTimeSlice =\n      (!forceSync &&\n        0 === (lanes & 127) &&\n        0 === (lanes & root$jscomp$0.expiredLanes)) ||\n      checkIfRootIsPrerendering(root$jscomp$0, lanes),\n    exitStatus = shouldTimeSlice\n      ? renderRootConcurrent(root$jscomp$0, lanes)\n      : renderRootSync(root$jscomp$0, lanes, !0),\n    renderWasConcurrent = shouldTimeSlice;\n  do {\n    if (0 === exitStatus) {\n      workInProgressRootIsPrerendering &&\n        !shouldTimeSlice &&\n        markRootSuspended(root$jscomp$0, lanes, 0, !1);\n      break;\n    } else {\n      forceSync = root$jscomp$0.current.alternate;\n      if (\n        renderWasConcurrent &&\n        !isRenderConsistentWithExternalStores(forceSync)\n      ) {\n        exitStatus = renderRootSync(root$jscomp$0, lanes, !1);\n        renderWasConcurrent = !1;\n        continue;\n      }\n      if (2 === exitStatus) {\n        renderWasConcurrent = lanes;\n        if (root$jscomp$0.errorRecoveryDisabledLanes & renderWasConcurrent)\n          var JSCompiler_inline_result = 0;\n        else\n          (JSCompiler_inline_result = root$jscomp$0.pendingLanes & -536870913),\n            (JSCompiler_inline_result =\n              0 !== JSCompiler_inline_result\n                ? JSCompiler_inline_result\n                : JSCompiler_inline_result & 536870912\n                  ? 536870912\n                  : 0);\n        if (0 !== JSCompiler_inline_result) {\n          lanes = JSCompiler_inline_result;\n          a: {\n            var root = root$jscomp$0;\n            exitStatus = workInProgressRootConcurrentErrors;\n            var wasRootDehydrated = root.current.memoizedState.isDehydrated;\n            wasRootDehydrated &&\n              (prepareFreshStack(root, JSCompiler_inline_result).flags |= 256);\n            JSCompiler_inline_result = renderRootSync(\n              root,\n              JSCompiler_inline_result,\n              !1\n            );\n            if (2 !== JSCompiler_inline_result) {\n              if (\n                workInProgressRootDidAttachPingListener &&\n                !wasRootDehydrated\n              ) {\n                root.errorRecoveryDisabledLanes |= renderWasConcurrent;\n                workInProgressRootInterleavedUpdatedLanes |=\n                  renderWasConcurrent;\n                exitStatus = 4;\n                break a;\n              }\n              renderWasConcurrent = workInProgressRootRecoverableErrors;\n              workInProgressRootRecoverableErrors = exitStatus;\n              null !== renderWasConcurrent &&\n                (null === workInProgressRootRecoverableErrors\n                  ? (workInProgressRootRecoverableErrors = renderWasConcurrent)\n                  : workInProgressRootRecoverableErrors.push.apply(\n                      workInProgressRootRecoverableErrors,\n                      renderWasConcurrent\n                    ));\n            }\n            exitStatus = JSCompiler_inline_result;\n          }\n          renderWasConcurrent = !1;\n          if (2 !== exitStatus) continue;\n        }\n      }\n      if (1 === exitStatus) {\n        prepareFreshStack(root$jscomp$0, 0);\n        markRootSuspended(root$jscomp$0, lanes, 0, !0);\n        break;\n      }\n      a: {\n        shouldTimeSlice = root$jscomp$0;\n        renderWasConcurrent = exitStatus;\n        switch (renderWasConcurrent) {\n          case 0:\n          case 1:\n            throw Error(formatProdErrorMessage(345));\n          case 4:\n            if ((lanes & 4194048) !== lanes) break;\n          case 6:\n            markRootSuspended(\n              shouldTimeSlice,\n              lanes,\n              workInProgressDeferredLane,\n              !workInProgressRootDidSkipSuspendedSiblings\n            );\n            break a;\n          case 2:\n            workInProgressRootRecoverableErrors = null;\n            break;\n          case 3:\n          case 5:\n            break;\n          default:\n            throw Error(formatProdErrorMessage(329));\n        }\n        if (\n          (lanes & 62914560) === lanes &&\n          ((exitStatus = globalMostRecentFallbackTime + 300 - now()),\n          10 < exitStatus)\n        ) {\n          markRootSuspended(\n            shouldTimeSlice,\n            lanes,\n            workInProgressDeferredLane,\n            !workInProgressRootDidSkipSuspendedSiblings\n          );\n          if (0 !== getNextLanes(shouldTimeSlice, 0, !0)) break a;\n          pendingEffectsLanes = lanes;\n          shouldTimeSlice.timeoutHandle = scheduleTimeout(\n            commitRootWhenReady.bind(\n              null,\n              shouldTimeSlice,\n              forceSync,\n              workInProgressRootRecoverableErrors,\n              workInProgressTransitions,\n              workInProgressRootDidIncludeRecursiveRenderUpdate,\n              lanes,\n              workInProgressDeferredLane,\n              workInProgressRootInterleavedUpdatedLanes,\n              workInProgressSuspendedRetryLanes,\n              workInProgressRootDidSkipSuspendedSiblings,\n              renderWasConcurrent,\n              \"Throttled\",\n              -0,\n              0\n            ),\n            exitStatus\n          );\n          break a;\n        }\n        commitRootWhenReady(\n          shouldTimeSlice,\n          forceSync,\n          workInProgressRootRecoverableErrors,\n          workInProgressTransitions,\n          workInProgressRootDidIncludeRecursiveRenderUpdate,\n          lanes,\n          workInProgressDeferredLane,\n          workInProgressRootInterleavedUpdatedLanes,\n          workInProgressSuspendedRetryLanes,\n          workInProgressRootDidSkipSuspendedSiblings,\n          renderWasConcurrent,\n          null,\n          -0,\n          0\n        );\n      }\n    }\n    break;\n  } while (1);\n  ensureRootIsScheduled(root$jscomp$0);\n}\nfunction commitRootWhenReady(\n  root,\n  finishedWork,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  lanes,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes,\n  didSkipSuspendedSiblings,\n  exitStatus,\n  suspendedCommitReason,\n  completedRenderStartTime,\n  completedRenderEndTime\n) {\n  root.timeoutHandle = -1;\n  suspendedCommitReason = finishedWork.subtreeFlags;\n  if (\n    suspendedCommitReason & 8192 ||\n    16785408 === (suspendedCommitReason & 16785408)\n  ) {\n    suspendedCommitReason = {\n      stylesheets: null,\n      count: 0,\n      imgCount: 0,\n      imgBytes: 0,\n      suspenseyImages: [],\n      waitingForImages: !0,\n      waitingForViewTransition: !1,\n      unsuspend: noop$1\n    };\n    accumulateSuspenseyCommitOnFiber(\n      finishedWork,\n      lanes,\n      suspendedCommitReason\n    );\n    var timeoutOffset =\n      (lanes & 62914560) === lanes\n        ? globalMostRecentFallbackTime - now()\n        : (lanes & 4194048) === lanes\n          ? globalMostRecentTransitionTime - now()\n          : 0;\n    timeoutOffset = waitForCommitToBeReady(\n      suspendedCommitReason,\n      timeoutOffset\n    );\n    if (null !== timeoutOffset) {\n      pendingEffectsLanes = lanes;\n      root.cancelPendingCommit = timeoutOffset(\n        commitRoot.bind(\n          null,\n          root,\n          finishedWork,\n          lanes,\n          recoverableErrors,\n          transitions,\n          didIncludeRenderPhaseUpdate,\n          spawnedLane,\n          updatedLanes,\n          suspendedRetryLanes,\n          exitStatus,\n          suspendedCommitReason,\n          null,\n          completedRenderStartTime,\n          completedRenderEndTime\n        )\n      );\n      markRootSuspended(root, lanes, spawnedLane, !didSkipSuspendedSiblings);\n      return;\n    }\n  }\n  commitRoot(\n    root,\n    finishedWork,\n    lanes,\n    recoverableErrors,\n    transitions,\n    didIncludeRenderPhaseUpdate,\n    spawnedLane,\n    updatedLanes,\n    suspendedRetryLanes\n  );\n}\nfunction isRenderConsistentWithExternalStores(finishedWork) {\n  for (var node = finishedWork; ; ) {\n    var tag = node.tag;\n    if (\n      (0 === tag || 11 === tag || 15 === tag) &&\n      node.flags & 16384 &&\n      ((tag = node.updateQueue),\n      null !== tag && ((tag = tag.stores), null !== tag))\n    )\n      for (var i = 0; i < tag.length; i++) {\n        var check = tag[i],\n          getSnapshot = check.getSnapshot;\n        check = check.value;\n        try {\n          if (!objectIs(getSnapshot(), check)) return !1;\n        } catch (error) {\n          return !1;\n        }\n      }\n    tag = node.child;\n    if (node.subtreeFlags & 16384 && null !== tag)\n      (tag.return = node), (node = tag);\n    else {\n      if (node === finishedWork) break;\n      for (; null === node.sibling; ) {\n        if (null === node.return || node.return === finishedWork) return !0;\n        node = node.return;\n      }\n      node.sibling.return = node.return;\n      node = node.sibling;\n    }\n  }\n  return !0;\n}\nfunction markRootSuspended(\n  root,\n  suspendedLanes,\n  spawnedLane,\n  didAttemptEntireTree\n) {\n  suspendedLanes &= ~workInProgressRootPingedLanes;\n  suspendedLanes &= ~workInProgressRootInterleavedUpdatedLanes;\n  root.suspendedLanes |= suspendedLanes;\n  root.pingedLanes &= ~suspendedLanes;\n  didAttemptEntireTree && (root.warmLanes |= suspendedLanes);\n  didAttemptEntireTree = root.expirationTimes;\n  for (var lanes = suspendedLanes; 0 < lanes; ) {\n    var index$6 = 31 - clz32(lanes),\n      lane = 1 << index$6;\n    didAttemptEntireTree[index$6] = -1;\n    lanes &= ~lane;\n  }\n  0 !== spawnedLane &&\n    markSpawnedDeferredLane(root, spawnedLane, suspendedLanes);\n}\nfunction flushSyncWork$1() {\n  return 0 === (executionContext & 6)\n    ? (flushSyncWorkAcrossRoots_impl(0, !1), !1)\n    : !0;\n}\nfunction resetWorkInProgressStack() {\n  if (null !== workInProgress) {\n    if (0 === workInProgressSuspendedReason)\n      var interruptedWork = workInProgress.return;\n    else\n      (interruptedWork = workInProgress),\n        (lastContextDependency = currentlyRenderingFiber$1 = null),\n        resetHooksOnUnwind(interruptedWork),\n        (thenableState$1 = null),\n        (thenableIndexCounter$1 = 0),\n        (interruptedWork = workInProgress);\n    for (; null !== interruptedWork; )\n      unwindInterruptedWork(interruptedWork.alternate, interruptedWork),\n        (interruptedWork = interruptedWork.return);\n    workInProgress = null;\n  }\n}\nfunction prepareFreshStack(root, lanes) {\n  var timeoutHandle = root.timeoutHandle;\n  -1 !== timeoutHandle &&\n    ((root.timeoutHandle = -1), cancelTimeout(timeoutHandle));\n  timeoutHandle = root.cancelPendingCommit;\n  null !== timeoutHandle &&\n    ((root.cancelPendingCommit = null), timeoutHandle());\n  pendingEffectsLanes = 0;\n  resetWorkInProgressStack();\n  workInProgressRoot = root;\n  workInProgress = timeoutHandle = createWorkInProgress(root.current, null);\n  workInProgressRootRenderLanes = lanes;\n  workInProgressSuspendedReason = 0;\n  workInProgressThrownValue = null;\n  workInProgressRootDidSkipSuspendedSiblings = !1;\n  workInProgressRootIsPrerendering = checkIfRootIsPrerendering(root, lanes);\n  workInProgressRootDidAttachPingListener = !1;\n  workInProgressSuspendedRetryLanes =\n    workInProgressDeferredLane =\n    workInProgressRootPingedLanes =\n    workInProgressRootInterleavedUpdatedLanes =\n    workInProgressRootSkippedLanes =\n    workInProgressRootExitStatus =\n      0;\n  workInProgressRootRecoverableErrors = workInProgressRootConcurrentErrors =\n    null;\n  workInProgressRootDidIncludeRecursiveRenderUpdate = !1;\n  0 !== (lanes & 8) && (lanes |= lanes & 32);\n  var allEntangledLanes = root.entangledLanes;\n  if (0 !== allEntangledLanes)\n    for (\n      root = root.entanglements, allEntangledLanes &= lanes;\n      0 < allEntangledLanes;\n\n    ) {\n      var index$4 = 31 - clz32(allEntangledLanes),\n        lane = 1 << index$4;\n      lanes |= root[index$4];\n      allEntangledLanes &= ~lane;\n    }\n  entangledRenderLanes = lanes;\n  finishQueueingConcurrentUpdates();\n  return timeoutHandle;\n}\nfunction handleThrow(root, thrownValue) {\n  currentlyRenderingFiber = null;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  thrownValue === SuspenseException || thrownValue === SuspenseActionException\n    ? ((thrownValue = getSuspendedThenable()),\n      (workInProgressSuspendedReason = 3))\n    : thrownValue === SuspenseyCommitException\n      ? ((thrownValue = getSuspendedThenable()),\n        (workInProgressSuspendedReason = 4))\n      : (workInProgressSuspendedReason =\n          thrownValue === SelectiveHydrationException\n            ? 8\n            : null !== thrownValue &&\n                \"object\" === typeof thrownValue &&\n                \"function\" === typeof thrownValue.then\n              ? 6\n              : 1);\n  workInProgressThrownValue = thrownValue;\n  null === workInProgress &&\n    ((workInProgressRootExitStatus = 1),\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    ));\n}\nfunction shouldRemainOnPreviousScreen() {\n  var handler = suspenseHandlerStackCursor.current;\n  return null === handler\n    ? !0\n    : (workInProgressRootRenderLanes & 4194048) ===\n        workInProgressRootRenderLanes\n      ? null === shellBoundary\n        ? !0\n        : !1\n      : (workInProgressRootRenderLanes & 62914560) ===\n            workInProgressRootRenderLanes ||\n          0 !== (workInProgressRootRenderLanes & 536870912)\n        ? handler === shellBoundary\n        : !1;\n}\nfunction pushDispatcher() {\n  var prevDispatcher = ReactSharedInternals.H;\n  ReactSharedInternals.H = ContextOnlyDispatcher;\n  return null === prevDispatcher ? ContextOnlyDispatcher : prevDispatcher;\n}\nfunction pushAsyncDispatcher() {\n  var prevAsyncDispatcher = ReactSharedInternals.A;\n  ReactSharedInternals.A = DefaultAsyncDispatcher;\n  return prevAsyncDispatcher;\n}\nfunction renderDidSuspendDelayIfPossible() {\n  workInProgressRootExitStatus = 4;\n  workInProgressRootDidSkipSuspendedSiblings ||\n    ((workInProgressRootRenderLanes & 4194048) !==\n      workInProgressRootRenderLanes &&\n      null !== suspenseHandlerStackCursor.current) ||\n    (workInProgressRootIsPrerendering = !0);\n  (0 === (workInProgressRootSkippedLanes & 134217727) &&\n    0 === (workInProgressRootInterleavedUpdatedLanes & 134217727)) ||\n    null === workInProgressRoot ||\n    markRootSuspended(\n      workInProgressRoot,\n      workInProgressRootRenderLanes,\n      workInProgressDeferredLane,\n      !1\n    );\n}\nfunction renderRootSync(root, lanes, shouldYieldForPrerendering) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  if (workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes)\n    (workInProgressTransitions = null), prepareFreshStack(root, lanes);\n  lanes = !1;\n  var exitStatus = workInProgressRootExitStatus;\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        var unitOfWork = workInProgress,\n          thrownValue = workInProgressThrownValue;\n        switch (workInProgressSuspendedReason) {\n          case 8:\n            resetWorkInProgressStack();\n            exitStatus = 6;\n            break a;\n          case 3:\n          case 2:\n          case 9:\n          case 6:\n            null === suspenseHandlerStackCursor.current && (lanes = !0);\n            var reason = workInProgressSuspendedReason;\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n            if (\n              shouldYieldForPrerendering &&\n              workInProgressRootIsPrerendering\n            ) {\n              exitStatus = 0;\n              break a;\n            }\n            break;\n          default:\n            (reason = workInProgressSuspendedReason),\n              (workInProgressSuspendedReason = 0),\n              (workInProgressThrownValue = null),\n              throwAndUnwindWorkLoop(root, unitOfWork, thrownValue, reason);\n        }\n      }\n      workLoopSync();\n      exitStatus = workInProgressRootExitStatus;\n      break;\n    } catch (thrownValue$165) {\n      handleThrow(root, thrownValue$165);\n    }\n  while (1);\n  lanes && root.shellSuspendCounter++;\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  executionContext = prevExecutionContext;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  null === workInProgress &&\n    ((workInProgressRoot = null),\n    (workInProgressRootRenderLanes = 0),\n    finishQueueingConcurrentUpdates());\n  return exitStatus;\n}\nfunction workLoopSync() {\n  for (; null !== workInProgress; ) performUnitOfWork(workInProgress);\n}\nfunction renderRootConcurrent(root, lanes) {\n  var prevExecutionContext = executionContext;\n  executionContext |= 2;\n  var prevDispatcher = pushDispatcher(),\n    prevAsyncDispatcher = pushAsyncDispatcher();\n  workInProgressRoot !== root || workInProgressRootRenderLanes !== lanes\n    ? ((workInProgressTransitions = null),\n      (workInProgressRootRenderTargetTime = now() + 500),\n      prepareFreshStack(root, lanes))\n    : (workInProgressRootIsPrerendering = checkIfRootIsPrerendering(\n        root,\n        lanes\n      ));\n  a: do\n    try {\n      if (0 !== workInProgressSuspendedReason && null !== workInProgress) {\n        lanes = workInProgress;\n        var thrownValue = workInProgressThrownValue;\n        b: switch (workInProgressSuspendedReason) {\n          case 1:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 1);\n            break;\n          case 2:\n          case 9:\n            if (isThenableResolved(thrownValue)) {\n              workInProgressSuspendedReason = 0;\n              workInProgressThrownValue = null;\n              replaySuspendedUnitOfWork(lanes);\n              break;\n            }\n            lanes = function () {\n              (2 !== workInProgressSuspendedReason &&\n                9 !== workInProgressSuspendedReason) ||\n                workInProgressRoot !== root ||\n                (workInProgressSuspendedReason = 7);\n              ensureRootIsScheduled(root);\n            };\n            thrownValue.then(lanes, lanes);\n            break a;\n          case 3:\n            workInProgressSuspendedReason = 7;\n            break a;\n          case 4:\n            workInProgressSuspendedReason = 5;\n            break a;\n          case 7:\n            isThenableResolved(thrownValue)\n              ? ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                replaySuspendedUnitOfWork(lanes))\n              : ((workInProgressSuspendedReason = 0),\n                (workInProgressThrownValue = null),\n                throwAndUnwindWorkLoop(root, lanes, thrownValue, 7));\n            break;\n          case 5:\n            var resource = null;\n            switch (workInProgress.tag) {\n              case 26:\n                resource = workInProgress.memoizedState;\n              case 5:\n              case 27:\n                var hostFiber = workInProgress;\n                if (\n                  resource\n                    ? preloadResource(resource)\n                    : hostFiber.stateNode.complete\n                ) {\n                  workInProgressSuspendedReason = 0;\n                  workInProgressThrownValue = null;\n                  var sibling = hostFiber.sibling;\n                  if (null !== sibling) workInProgress = sibling;\n                  else {\n                    var returnFiber = hostFiber.return;\n                    null !== returnFiber\n                      ? ((workInProgress = returnFiber),\n                        completeUnitOfWork(returnFiber))\n                      : (workInProgress = null);\n                  }\n                  break b;\n                }\n            }\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 5);\n            break;\n          case 6:\n            workInProgressSuspendedReason = 0;\n            workInProgressThrownValue = null;\n            throwAndUnwindWorkLoop(root, lanes, thrownValue, 6);\n            break;\n          case 8:\n            resetWorkInProgressStack();\n            workInProgressRootExitStatus = 6;\n            break a;\n          default:\n            throw Error(formatProdErrorMessage(462));\n        }\n      }\n      workLoopConcurrentByScheduler();\n      break;\n    } catch (thrownValue$167) {\n      handleThrow(root, thrownValue$167);\n    }\n  while (1);\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  ReactSharedInternals.H = prevDispatcher;\n  ReactSharedInternals.A = prevAsyncDispatcher;\n  executionContext = prevExecutionContext;\n  if (null !== workInProgress) return 0;\n  workInProgressRoot = null;\n  workInProgressRootRenderLanes = 0;\n  finishQueueingConcurrentUpdates();\n  return workInProgressRootExitStatus;\n}\nfunction workLoopConcurrentByScheduler() {\n  for (; null !== workInProgress && !shouldYield(); )\n    performUnitOfWork(workInProgress);\n}\nfunction performUnitOfWork(unitOfWork) {\n  var next = beginWork(unitOfWork.alternate, unitOfWork, entangledRenderLanes);\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction replaySuspendedUnitOfWork(unitOfWork) {\n  var next = unitOfWork;\n  var current = next.alternate;\n  switch (next.tag) {\n    case 15:\n    case 0:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type,\n        void 0,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 11:\n      next = replayFunctionComponent(\n        current,\n        next,\n        next.pendingProps,\n        next.type.render,\n        next.ref,\n        workInProgressRootRenderLanes\n      );\n      break;\n    case 5:\n      resetHooksOnUnwind(next);\n    default:\n      unwindInterruptedWork(current, next),\n        (next = workInProgress =\n          resetWorkInProgress(next, entangledRenderLanes)),\n        (next = beginWork(current, next, entangledRenderLanes));\n  }\n  unitOfWork.memoizedProps = unitOfWork.pendingProps;\n  null === next ? completeUnitOfWork(unitOfWork) : (workInProgress = next);\n}\nfunction throwAndUnwindWorkLoop(\n  root,\n  unitOfWork,\n  thrownValue,\n  suspendedReason\n) {\n  lastContextDependency = currentlyRenderingFiber$1 = null;\n  resetHooksOnUnwind(unitOfWork);\n  thenableState$1 = null;\n  thenableIndexCounter$1 = 0;\n  var returnFiber = unitOfWork.return;\n  try {\n    if (\n      throwException(\n        root,\n        returnFiber,\n        unitOfWork,\n        thrownValue,\n        workInProgressRootRenderLanes\n      )\n    ) {\n      workInProgressRootExitStatus = 1;\n      logUncaughtError(\n        root,\n        createCapturedValueAtFiber(thrownValue, root.current)\n      );\n      workInProgress = null;\n      return;\n    }\n  } catch (error) {\n    if (null !== returnFiber) throw ((workInProgress = returnFiber), error);\n    workInProgressRootExitStatus = 1;\n    logUncaughtError(\n      root,\n      createCapturedValueAtFiber(thrownValue, root.current)\n    );\n    workInProgress = null;\n    return;\n  }\n  if (unitOfWork.flags & 32768) {\n    if (isHydrating || 1 === suspendedReason) root = !0;\n    else if (\n      workInProgressRootIsPrerendering ||\n      0 !== (workInProgressRootRenderLanes & 536870912)\n    )\n      root = !1;\n    else if (\n      ((workInProgressRootDidSkipSuspendedSiblings = root = !0),\n      2 === suspendedReason ||\n        9 === suspendedReason ||\n        3 === suspendedReason ||\n        6 === suspendedReason)\n    )\n      (suspendedReason = suspenseHandlerStackCursor.current),\n        null !== suspendedReason &&\n          13 === suspendedReason.tag &&\n          (suspendedReason.flags |= 16384);\n    unwindUnitOfWork(unitOfWork, root);\n  } else completeUnitOfWork(unitOfWork);\n}\nfunction completeUnitOfWork(unitOfWork) {\n  var completedWork = unitOfWork;\n  do {\n    if (0 !== (completedWork.flags & 32768)) {\n      unwindUnitOfWork(\n        completedWork,\n        workInProgressRootDidSkipSuspendedSiblings\n      );\n      return;\n    }\n    unitOfWork = completedWork.return;\n    var next = completeWork(\n      completedWork.alternate,\n      completedWork,\n      entangledRenderLanes\n    );\n    if (null !== next) {\n      workInProgress = next;\n      return;\n    }\n    completedWork = completedWork.sibling;\n    if (null !== completedWork) {\n      workInProgress = completedWork;\n      return;\n    }\n    workInProgress = completedWork = unitOfWork;\n  } while (null !== completedWork);\n  0 === workInProgressRootExitStatus && (workInProgressRootExitStatus = 5);\n}\nfunction unwindUnitOfWork(unitOfWork, skipSiblings) {\n  do {\n    var next = unwindWork(unitOfWork.alternate, unitOfWork);\n    if (null !== next) {\n      next.flags &= 32767;\n      workInProgress = next;\n      return;\n    }\n    next = unitOfWork.return;\n    null !== next &&\n      ((next.flags |= 32768), (next.subtreeFlags = 0), (next.deletions = null));\n    if (\n      !skipSiblings &&\n      ((unitOfWork = unitOfWork.sibling), null !== unitOfWork)\n    ) {\n      workInProgress = unitOfWork;\n      return;\n    }\n    workInProgress = unitOfWork = next;\n  } while (null !== unitOfWork);\n  workInProgressRootExitStatus = 6;\n  workInProgress = null;\n}\nfunction commitRoot(\n  root,\n  finishedWork,\n  lanes,\n  recoverableErrors,\n  transitions,\n  didIncludeRenderPhaseUpdate,\n  spawnedLane,\n  updatedLanes,\n  suspendedRetryLanes\n) {\n  root.cancelPendingCommit = null;\n  do flushPendingEffects();\n  while (0 !== pendingEffectsStatus);\n  if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(327));\n  if (null !== finishedWork) {\n    if (finishedWork === root.current) throw Error(formatProdErrorMessage(177));\n    didIncludeRenderPhaseUpdate = finishedWork.lanes | finishedWork.childLanes;\n    didIncludeRenderPhaseUpdate |= concurrentlyUpdatedLanes;\n    markRootFinished(\n      root,\n      lanes,\n      didIncludeRenderPhaseUpdate,\n      spawnedLane,\n      updatedLanes,\n      suspendedRetryLanes\n    );\n    root === workInProgressRoot &&\n      ((workInProgress = workInProgressRoot = null),\n      (workInProgressRootRenderLanes = 0));\n    pendingFinishedWork = finishedWork;\n    pendingEffectsRoot = root;\n    pendingEffectsLanes = lanes;\n    pendingEffectsRemainingLanes = didIncludeRenderPhaseUpdate;\n    pendingPassiveTransitions = transitions;\n    pendingRecoverableErrors = recoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? ((root.callbackNode = null),\n        (root.callbackPriority = 0),\n        scheduleCallback$1(NormalPriority$1, function () {\n          flushPassiveEffects();\n          return null;\n        }))\n      : ((root.callbackNode = null), (root.callbackPriority = 0));\n    recoverableErrors = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || recoverableErrors) {\n      recoverableErrors = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      transitions = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      spawnedLane = executionContext;\n      executionContext |= 4;\n      try {\n        commitBeforeMutationEffects(root, finishedWork, lanes);\n      } finally {\n        (executionContext = spawnedLane),\n          (ReactDOMSharedInternals.p = transitions),\n          (ReactSharedInternals.T = recoverableErrors);\n      }\n    }\n    pendingEffectsStatus = 1;\n    flushMutationEffects();\n    flushLayoutEffects();\n    flushSpawnedWork();\n  }\n}\nfunction flushMutationEffects() {\n  if (1 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootMutationHasEffect = 0 !== (finishedWork.flags & 13878);\n    if (0 !== (finishedWork.subtreeFlags & 13878) || rootMutationHasEffect) {\n      rootMutationHasEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitMutationEffectsOnFiber(finishedWork, root);\n        var priorSelectionInformation = selectionInformation,\n          curFocusedElem = getActiveElementDeep(root.containerInfo),\n          priorFocusedElem = priorSelectionInformation.focusedElem,\n          priorSelectionRange = priorSelectionInformation.selectionRange;\n        if (\n          curFocusedElem !== priorFocusedElem &&\n          priorFocusedElem &&\n          priorFocusedElem.ownerDocument &&\n          containsNode(\n            priorFocusedElem.ownerDocument.documentElement,\n            priorFocusedElem\n          )\n        ) {\n          if (\n            null !== priorSelectionRange &&\n            hasSelectionCapabilities(priorFocusedElem)\n          ) {\n            var start = priorSelectionRange.start,\n              end = priorSelectionRange.end;\n            void 0 === end && (end = start);\n            if (\"selectionStart\" in priorFocusedElem)\n              (priorFocusedElem.selectionStart = start),\n                (priorFocusedElem.selectionEnd = Math.min(\n                  end,\n                  priorFocusedElem.value.length\n                ));\n            else {\n              var doc = priorFocusedElem.ownerDocument || document,\n                win = (doc && doc.defaultView) || window;\n              if (win.getSelection) {\n                var selection = win.getSelection(),\n                  length = priorFocusedElem.textContent.length,\n                  start$jscomp$0 = Math.min(priorSelectionRange.start, length),\n                  end$jscomp$0 =\n                    void 0 === priorSelectionRange.end\n                      ? start$jscomp$0\n                      : Math.min(priorSelectionRange.end, length);\n                !selection.extend &&\n                  start$jscomp$0 > end$jscomp$0 &&\n                  ((curFocusedElem = end$jscomp$0),\n                  (end$jscomp$0 = start$jscomp$0),\n                  (start$jscomp$0 = curFocusedElem));\n                var startMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    start$jscomp$0\n                  ),\n                  endMarker = getNodeForCharacterOffset(\n                    priorFocusedElem,\n                    end$jscomp$0\n                  );\n                if (\n                  startMarker &&\n                  endMarker &&\n                  (1 !== selection.rangeCount ||\n                    selection.anchorNode !== startMarker.node ||\n                    selection.anchorOffset !== startMarker.offset ||\n                    selection.focusNode !== endMarker.node ||\n                    selection.focusOffset !== endMarker.offset)\n                ) {\n                  var range = doc.createRange();\n                  range.setStart(startMarker.node, startMarker.offset);\n                  selection.removeAllRanges();\n                  start$jscomp$0 > end$jscomp$0\n                    ? (selection.addRange(range),\n                      selection.extend(endMarker.node, endMarker.offset))\n                    : (range.setEnd(endMarker.node, endMarker.offset),\n                      selection.addRange(range));\n                }\n              }\n            }\n          }\n          doc = [];\n          for (\n            selection = priorFocusedElem;\n            (selection = selection.parentNode);\n\n          )\n            1 === selection.nodeType &&\n              doc.push({\n                element: selection,\n                left: selection.scrollLeft,\n                top: selection.scrollTop\n              });\n          \"function\" === typeof priorFocusedElem.focus &&\n            priorFocusedElem.focus();\n          for (\n            priorFocusedElem = 0;\n            priorFocusedElem < doc.length;\n            priorFocusedElem++\n          ) {\n            var info = doc[priorFocusedElem];\n            info.element.scrollLeft = info.left;\n            info.element.scrollTop = info.top;\n          }\n        }\n        _enabled = !!eventsEnabled;\n        selectionInformation = eventsEnabled = null;\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootMutationHasEffect);\n      }\n    }\n    root.current = finishedWork;\n    pendingEffectsStatus = 2;\n  }\n}\nfunction flushLayoutEffects() {\n  if (2 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      rootHasLayoutEffect = 0 !== (finishedWork.flags & 8772);\n    if (0 !== (finishedWork.subtreeFlags & 8772) || rootHasLayoutEffect) {\n      rootHasLayoutEffect = ReactSharedInternals.T;\n      ReactSharedInternals.T = null;\n      var previousPriority = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      var prevExecutionContext = executionContext;\n      executionContext |= 4;\n      try {\n        commitLayoutEffectOnFiber(root, finishedWork.alternate, finishedWork);\n      } finally {\n        (executionContext = prevExecutionContext),\n          (ReactDOMSharedInternals.p = previousPriority),\n          (ReactSharedInternals.T = rootHasLayoutEffect);\n      }\n    }\n    pendingEffectsStatus = 3;\n  }\n}\nfunction flushSpawnedWork() {\n  if (4 === pendingEffectsStatus || 3 === pendingEffectsStatus) {\n    pendingEffectsStatus = 0;\n    requestPaint();\n    var root = pendingEffectsRoot,\n      finishedWork = pendingFinishedWork,\n      lanes = pendingEffectsLanes,\n      recoverableErrors = pendingRecoverableErrors;\n    0 !== (finishedWork.subtreeFlags & 10256) ||\n    0 !== (finishedWork.flags & 10256)\n      ? (pendingEffectsStatus = 5)\n      : ((pendingEffectsStatus = 0),\n        (pendingFinishedWork = pendingEffectsRoot = null),\n        releaseRootPooledCache(root, root.pendingLanes));\n    var remainingLanes = root.pendingLanes;\n    0 === remainingLanes && (legacyErrorBoundariesThatAlreadyFailed = null);\n    lanesToEventPriority(lanes);\n    finishedWork = finishedWork.stateNode;\n    if (injectedHook && \"function\" === typeof injectedHook.onCommitFiberRoot)\n      try {\n        injectedHook.onCommitFiberRoot(\n          rendererID,\n          finishedWork,\n          void 0,\n          128 === (finishedWork.current.flags & 128)\n        );\n      } catch (err) {}\n    if (null !== recoverableErrors) {\n      finishedWork = ReactSharedInternals.T;\n      remainingLanes = ReactDOMSharedInternals.p;\n      ReactDOMSharedInternals.p = 2;\n      ReactSharedInternals.T = null;\n      try {\n        for (\n          var onRecoverableError = root.onRecoverableError, i = 0;\n          i < recoverableErrors.length;\n          i++\n        ) {\n          var recoverableError = recoverableErrors[i];\n          onRecoverableError(recoverableError.value, {\n            componentStack: recoverableError.stack\n          });\n        }\n      } finally {\n        (ReactSharedInternals.T = finishedWork),\n          (ReactDOMSharedInternals.p = remainingLanes);\n      }\n    }\n    0 !== (pendingEffectsLanes & 3) && flushPendingEffects();\n    ensureRootIsScheduled(root);\n    remainingLanes = root.pendingLanes;\n    0 !== (lanes & 261930) && 0 !== (remainingLanes & 42)\n      ? root === rootWithNestedUpdates\n        ? nestedUpdateCount++\n        : ((nestedUpdateCount = 0), (rootWithNestedUpdates = root))\n      : (nestedUpdateCount = 0);\n    flushSyncWorkAcrossRoots_impl(0, !1);\n  }\n}\nfunction releaseRootPooledCache(root, remainingLanes) {\n  0 === (root.pooledCacheLanes &= remainingLanes) &&\n    ((remainingLanes = root.pooledCache),\n    null != remainingLanes &&\n      ((root.pooledCache = null), releaseCache(remainingLanes)));\n}\nfunction flushPendingEffects() {\n  flushMutationEffects();\n  flushLayoutEffects();\n  flushSpawnedWork();\n  return flushPassiveEffects();\n}\nfunction flushPassiveEffects() {\n  if (5 !== pendingEffectsStatus) return !1;\n  var root = pendingEffectsRoot,\n    remainingLanes = pendingEffectsRemainingLanes;\n  pendingEffectsRemainingLanes = 0;\n  var renderPriority = lanesToEventPriority(pendingEffectsLanes),\n    prevTransition = ReactSharedInternals.T,\n    previousPriority = ReactDOMSharedInternals.p;\n  try {\n    ReactDOMSharedInternals.p = 32 > renderPriority ? 32 : renderPriority;\n    ReactSharedInternals.T = null;\n    renderPriority = pendingPassiveTransitions;\n    pendingPassiveTransitions = null;\n    var root$jscomp$0 = pendingEffectsRoot,\n      lanes = pendingEffectsLanes;\n    pendingEffectsStatus = 0;\n    pendingFinishedWork = pendingEffectsRoot = null;\n    pendingEffectsLanes = 0;\n    if (0 !== (executionContext & 6)) throw Error(formatProdErrorMessage(331));\n    var prevExecutionContext = executionContext;\n    executionContext |= 4;\n    commitPassiveUnmountOnFiber(root$jscomp$0.current);\n    commitPassiveMountOnFiber(\n      root$jscomp$0,\n      root$jscomp$0.current,\n      lanes,\n      renderPriority\n    );\n    executionContext = prevExecutionContext;\n    flushSyncWorkAcrossRoots_impl(0, !1);\n    if (\n      injectedHook &&\n      \"function\" === typeof injectedHook.onPostCommitFiberRoot\n    )\n      try {\n        injectedHook.onPostCommitFiberRoot(rendererID, root$jscomp$0);\n      } catch (err) {}\n    return !0;\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition),\n      releaseRootPooledCache(root, remainingLanes);\n  }\n}\nfunction captureCommitPhaseErrorOnRoot(rootFiber, sourceFiber, error) {\n  sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n  sourceFiber = createRootErrorUpdate(rootFiber.stateNode, sourceFiber, 2);\n  rootFiber = enqueueUpdate(rootFiber, sourceFiber, 2);\n  null !== rootFiber &&\n    (markRootUpdated$1(rootFiber, 2), ensureRootIsScheduled(rootFiber));\n}\nfunction captureCommitPhaseError(sourceFiber, nearestMountedAncestor, error) {\n  if (3 === sourceFiber.tag)\n    captureCommitPhaseErrorOnRoot(sourceFiber, sourceFiber, error);\n  else\n    for (; null !== nearestMountedAncestor; ) {\n      if (3 === nearestMountedAncestor.tag) {\n        captureCommitPhaseErrorOnRoot(\n          nearestMountedAncestor,\n          sourceFiber,\n          error\n        );\n        break;\n      } else if (1 === nearestMountedAncestor.tag) {\n        var instance = nearestMountedAncestor.stateNode;\n        if (\n          \"function\" ===\n            typeof nearestMountedAncestor.type.getDerivedStateFromError ||\n          (\"function\" === typeof instance.componentDidCatch &&\n            (null === legacyErrorBoundariesThatAlreadyFailed ||\n              !legacyErrorBoundariesThatAlreadyFailed.has(instance)))\n        ) {\n          sourceFiber = createCapturedValueAtFiber(error, sourceFiber);\n          error = createClassErrorUpdate(2);\n          instance = enqueueUpdate(nearestMountedAncestor, error, 2);\n          null !== instance &&\n            (initializeClassErrorUpdate(\n              error,\n              instance,\n              nearestMountedAncestor,\n              sourceFiber\n            ),\n            markRootUpdated$1(instance, 2),\n            ensureRootIsScheduled(instance));\n          break;\n        }\n      }\n      nearestMountedAncestor = nearestMountedAncestor.return;\n    }\n}\nfunction attachPingListener(root, wakeable, lanes) {\n  var pingCache = root.pingCache;\n  if (null === pingCache) {\n    pingCache = root.pingCache = new PossiblyWeakMap();\n    var threadIDs = new Set();\n    pingCache.set(wakeable, threadIDs);\n  } else\n    (threadIDs = pingCache.get(wakeable)),\n      void 0 === threadIDs &&\n        ((threadIDs = new Set()), pingCache.set(wakeable, threadIDs));\n  threadIDs.has(lanes) ||\n    ((workInProgressRootDidAttachPingListener = !0),\n    threadIDs.add(lanes),\n    (root = pingSuspendedRoot.bind(null, root, wakeable, lanes)),\n    wakeable.then(root, root));\n}\nfunction pingSuspendedRoot(root, wakeable, pingedLanes) {\n  var pingCache = root.pingCache;\n  null !== pingCache && pingCache.delete(wakeable);\n  root.pingedLanes |= root.suspendedLanes & pingedLanes;\n  root.warmLanes &= ~pingedLanes;\n  workInProgressRoot === root &&\n    (workInProgressRootRenderLanes & pingedLanes) === pingedLanes &&\n    (4 === workInProgressRootExitStatus ||\n    (3 === workInProgressRootExitStatus &&\n      (workInProgressRootRenderLanes & 62914560) ===\n        workInProgressRootRenderLanes &&\n      300 > now() - globalMostRecentFallbackTime)\n      ? 0 === (executionContext & 2) && prepareFreshStack(root, 0)\n      : (workInProgressRootPingedLanes |= pingedLanes),\n    workInProgressSuspendedRetryLanes === workInProgressRootRenderLanes &&\n      (workInProgressSuspendedRetryLanes = 0));\n  ensureRootIsScheduled(root);\n}\nfunction retryTimedOutBoundary(boundaryFiber, retryLane) {\n  0 === retryLane && (retryLane = claimNextRetryLane());\n  boundaryFiber = enqueueConcurrentRenderForLane(boundaryFiber, retryLane);\n  null !== boundaryFiber &&\n    (markRootUpdated$1(boundaryFiber, retryLane),\n    ensureRootIsScheduled(boundaryFiber));\n}\nfunction retryDehydratedSuspenseBoundary(boundaryFiber) {\n  var suspenseState = boundaryFiber.memoizedState,\n    retryLane = 0;\n  null !== suspenseState && (retryLane = suspenseState.retryLane);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction resolveRetryWakeable(boundaryFiber, wakeable) {\n  var retryLane = 0;\n  switch (boundaryFiber.tag) {\n    case 31:\n    case 13:\n      var retryCache = boundaryFiber.stateNode;\n      var suspenseState = boundaryFiber.memoizedState;\n      null !== suspenseState && (retryLane = suspenseState.retryLane);\n      break;\n    case 19:\n      retryCache = boundaryFiber.stateNode;\n      break;\n    case 22:\n      retryCache = boundaryFiber.stateNode._retryCache;\n      break;\n    default:\n      throw Error(formatProdErrorMessage(314));\n  }\n  null !== retryCache && retryCache.delete(wakeable);\n  retryTimedOutBoundary(boundaryFiber, retryLane);\n}\nfunction scheduleCallback$1(priorityLevel, callback) {\n  return scheduleCallback$3(priorityLevel, callback);\n}\nvar firstScheduledRoot = null,\n  lastScheduledRoot = null,\n  didScheduleMicrotask = !1,\n  mightHavePendingSyncWork = !1,\n  isFlushingWork = !1,\n  currentEventTransitionLane = 0;\nfunction ensureRootIsScheduled(root) {\n  root !== lastScheduledRoot &&\n    null === root.next &&\n    (null === lastScheduledRoot\n      ? (firstScheduledRoot = lastScheduledRoot = root)\n      : (lastScheduledRoot = lastScheduledRoot.next = root));\n  mightHavePendingSyncWork = !0;\n  didScheduleMicrotask ||\n    ((didScheduleMicrotask = !0), scheduleImmediateRootScheduleTask());\n}\nfunction flushSyncWorkAcrossRoots_impl(syncTransitionLanes, onlyLegacy) {\n  if (!isFlushingWork && mightHavePendingSyncWork) {\n    isFlushingWork = !0;\n    do {\n      var didPerformSomeWork = !1;\n      for (var root$170 = firstScheduledRoot; null !== root$170; ) {\n        if (!onlyLegacy)\n          if (0 !== syncTransitionLanes) {\n            var pendingLanes = root$170.pendingLanes;\n            if (0 === pendingLanes) var JSCompiler_inline_result = 0;\n            else {\n              var suspendedLanes = root$170.suspendedLanes,\n                pingedLanes = root$170.pingedLanes;\n              JSCompiler_inline_result =\n                (1 << (31 - clz32(42 | syncTransitionLanes) + 1)) - 1;\n              JSCompiler_inline_result &=\n                pendingLanes & ~(suspendedLanes & ~pingedLanes);\n              JSCompiler_inline_result =\n                JSCompiler_inline_result & 201326741\n                  ? (JSCompiler_inline_result & 201326741) | 1\n                  : JSCompiler_inline_result\n                    ? JSCompiler_inline_result | 2\n                    : 0;\n            }\n            0 !== JSCompiler_inline_result &&\n              ((didPerformSomeWork = !0),\n              performSyncWorkOnRoot(root$170, JSCompiler_inline_result));\n          } else\n            (JSCompiler_inline_result = workInProgressRootRenderLanes),\n              (JSCompiler_inline_result = getNextLanes(\n                root$170,\n                root$170 === workInProgressRoot ? JSCompiler_inline_result : 0,\n                null !== root$170.cancelPendingCommit ||\n                  -1 !== root$170.timeoutHandle\n              )),\n              0 === (JSCompiler_inline_result & 3) ||\n                checkIfRootIsPrerendering(root$170, JSCompiler_inline_result) ||\n                ((didPerformSomeWork = !0),\n                performSyncWorkOnRoot(root$170, JSCompiler_inline_result));\n        root$170 = root$170.next;\n      }\n    } while (didPerformSomeWork);\n    isFlushingWork = !1;\n  }\n}\nfunction processRootScheduleInImmediateTask() {\n  processRootScheduleInMicrotask();\n}\nfunction processRootScheduleInMicrotask() {\n  mightHavePendingSyncWork = didScheduleMicrotask = !1;\n  var syncTransitionLanes = 0;\n  0 !== currentEventTransitionLane &&\n    shouldAttemptEagerTransition() &&\n    (syncTransitionLanes = currentEventTransitionLane);\n  for (\n    var currentTime = now(), prev = null, root = firstScheduledRoot;\n    null !== root;\n\n  ) {\n    var next = root.next,\n      nextLanes = scheduleTaskForRootDuringMicrotask(root, currentTime);\n    if (0 === nextLanes)\n      (root.next = null),\n        null === prev ? (firstScheduledRoot = next) : (prev.next = next),\n        null === next && (lastScheduledRoot = prev);\n    else if (\n      ((prev = root), 0 !== syncTransitionLanes || 0 !== (nextLanes & 3))\n    )\n      mightHavePendingSyncWork = !0;\n    root = next;\n  }\n  (0 !== pendingEffectsStatus && 5 !== pendingEffectsStatus) ||\n    flushSyncWorkAcrossRoots_impl(syncTransitionLanes, !1);\n  0 !== currentEventTransitionLane && (currentEventTransitionLane = 0);\n}\nfunction scheduleTaskForRootDuringMicrotask(root, currentTime) {\n  for (\n    var suspendedLanes = root.suspendedLanes,\n      pingedLanes = root.pingedLanes,\n      expirationTimes = root.expirationTimes,\n      lanes = root.pendingLanes & -62914561;\n    0 < lanes;\n\n  ) {\n    var index$5 = 31 - clz32(lanes),\n      lane = 1 << index$5,\n      expirationTime = expirationTimes[index$5];\n    if (-1 === expirationTime) {\n      if (0 === (lane & suspendedLanes) || 0 !== (lane & pingedLanes))\n        expirationTimes[index$5] = computeExpirationTime(lane, currentTime);\n    } else expirationTime <= currentTime && (root.expiredLanes |= lane);\n    lanes &= ~lane;\n  }\n  currentTime = workInProgressRoot;\n  suspendedLanes = workInProgressRootRenderLanes;\n  suspendedLanes = getNextLanes(\n    root,\n    root === currentTime ? suspendedLanes : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  pingedLanes = root.callbackNode;\n  if (\n    0 === suspendedLanes ||\n    (root === currentTime &&\n      (2 === workInProgressSuspendedReason ||\n        9 === workInProgressSuspendedReason)) ||\n    null !== root.cancelPendingCommit\n  )\n    return (\n      null !== pingedLanes &&\n        null !== pingedLanes &&\n        cancelCallback$1(pingedLanes),\n      (root.callbackNode = null),\n      (root.callbackPriority = 0)\n    );\n  if (\n    0 === (suspendedLanes & 3) ||\n    checkIfRootIsPrerendering(root, suspendedLanes)\n  ) {\n    currentTime = suspendedLanes & -suspendedLanes;\n    if (currentTime === root.callbackPriority) return currentTime;\n    null !== pingedLanes && cancelCallback$1(pingedLanes);\n    switch (lanesToEventPriority(suspendedLanes)) {\n      case 2:\n      case 8:\n        suspendedLanes = UserBlockingPriority;\n        break;\n      case 32:\n        suspendedLanes = NormalPriority$1;\n        break;\n      case 268435456:\n        suspendedLanes = IdlePriority;\n        break;\n      default:\n        suspendedLanes = NormalPriority$1;\n    }\n    pingedLanes = performWorkOnRootViaSchedulerTask.bind(null, root);\n    suspendedLanes = scheduleCallback$3(suspendedLanes, pingedLanes);\n    root.callbackPriority = currentTime;\n    root.callbackNode = suspendedLanes;\n    return currentTime;\n  }\n  null !== pingedLanes && null !== pingedLanes && cancelCallback$1(pingedLanes);\n  root.callbackPriority = 2;\n  root.callbackNode = null;\n  return 2;\n}\nfunction performWorkOnRootViaSchedulerTask(root, didTimeout) {\n  if (0 !== pendingEffectsStatus && 5 !== pendingEffectsStatus)\n    return (root.callbackNode = null), (root.callbackPriority = 0), null;\n  var originalCallbackNode = root.callbackNode;\n  if (flushPendingEffects() && root.callbackNode !== originalCallbackNode)\n    return null;\n  var workInProgressRootRenderLanes$jscomp$0 = workInProgressRootRenderLanes;\n  workInProgressRootRenderLanes$jscomp$0 = getNextLanes(\n    root,\n    root === workInProgressRoot ? workInProgressRootRenderLanes$jscomp$0 : 0,\n    null !== root.cancelPendingCommit || -1 !== root.timeoutHandle\n  );\n  if (0 === workInProgressRootRenderLanes$jscomp$0) return null;\n  performWorkOnRoot(root, workInProgressRootRenderLanes$jscomp$0, didTimeout);\n  scheduleTaskForRootDuringMicrotask(root, now());\n  return null != root.callbackNode && root.callbackNode === originalCallbackNode\n    ? performWorkOnRootViaSchedulerTask.bind(null, root)\n    : null;\n}\nfunction performSyncWorkOnRoot(root, lanes) {\n  if (flushPendingEffects()) return null;\n  performWorkOnRoot(root, lanes, !0);\n}\nfunction scheduleImmediateRootScheduleTask() {\n  scheduleMicrotask(function () {\n    0 !== (executionContext & 6)\n      ? scheduleCallback$3(\n          ImmediatePriority,\n          processRootScheduleInImmediateTask\n        )\n      : processRootScheduleInMicrotask();\n  });\n}\nfunction requestTransitionLane() {\n  if (0 === currentEventTransitionLane) {\n    var actionScopeLane = currentEntangledLane;\n    0 === actionScopeLane &&\n      ((actionScopeLane = nextTransitionUpdateLane),\n      (nextTransitionUpdateLane <<= 1),\n      0 === (nextTransitionUpdateLane & 261888) &&\n        (nextTransitionUpdateLane = 256));\n    currentEventTransitionLane = actionScopeLane;\n  }\n  return currentEventTransitionLane;\n}\nfunction coerceFormActionProp(actionProp) {\n  return null == actionProp ||\n    \"symbol\" === typeof actionProp ||\n    \"boolean\" === typeof actionProp\n    ? null\n    : \"function\" === typeof actionProp\n      ? actionProp\n      : sanitizeURL(\"\" + actionProp);\n}\nfunction createFormDataWithSubmitter(form, submitter) {\n  var temp = submitter.ownerDocument.createElement(\"input\");\n  temp.name = submitter.name;\n  temp.value = submitter.value;\n  form.id && temp.setAttribute(\"form\", form.id);\n  submitter.parentNode.insertBefore(temp, submitter);\n  form = new FormData(form);\n  temp.parentNode.removeChild(temp);\n  return form;\n}\nfunction extractEvents$1(\n  dispatchQueue,\n  domEventName,\n  maybeTargetInst,\n  nativeEvent,\n  nativeEventTarget\n) {\n  if (\n    \"submit\" === domEventName &&\n    maybeTargetInst &&\n    maybeTargetInst.stateNode === nativeEventTarget\n  ) {\n    var action = coerceFormActionProp(\n        (nativeEventTarget[internalPropsKey] || null).action\n      ),\n      submitter = nativeEvent.submitter;\n    submitter &&\n      ((domEventName = (domEventName = submitter[internalPropsKey] || null)\n        ? coerceFormActionProp(domEventName.formAction)\n        : submitter.getAttribute(\"formAction\")),\n      null !== domEventName && ((action = domEventName), (submitter = null)));\n    var event = new SyntheticEvent(\n      \"action\",\n      \"action\",\n      null,\n      nativeEvent,\n      nativeEventTarget\n    );\n    dispatchQueue.push({\n      event: event,\n      listeners: [\n        {\n          instance: null,\n          listener: function () {\n            if (nativeEvent.defaultPrevented) {\n              if (0 !== currentEventTransitionLane) {\n                var formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget);\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  null,\n                  formData\n                );\n              }\n            } else\n              \"function\" === typeof action &&\n                (event.preventDefault(),\n                (formData = submitter\n                  ? createFormDataWithSubmitter(nativeEventTarget, submitter)\n                  : new FormData(nativeEventTarget)),\n                startHostTransition(\n                  maybeTargetInst,\n                  {\n                    pending: !0,\n                    data: formData,\n                    method: nativeEventTarget.method,\n                    action: action\n                  },\n                  action,\n                  formData\n                ));\n          },\n          currentTarget: nativeEventTarget\n        }\n      ]\n    });\n  }\n}\nfor (\n  var i$jscomp$inline_1577 = 0;\n  i$jscomp$inline_1577 < simpleEventPluginEvents.length;\n  i$jscomp$inline_1577++\n) {\n  var eventName$jscomp$inline_1578 =\n      simpleEventPluginEvents[i$jscomp$inline_1577],\n    domEventName$jscomp$inline_1579 =\n      eventName$jscomp$inline_1578.toLowerCase(),\n    capitalizedEvent$jscomp$inline_1580 =\n      eventName$jscomp$inline_1578[0].toUpperCase() +\n      eventName$jscomp$inline_1578.slice(1);\n  registerSimpleEvent(\n    domEventName$jscomp$inline_1579,\n    \"on\" + capitalizedEvent$jscomp$inline_1580\n  );\n}\nregisterSimpleEvent(ANIMATION_END, \"onAnimationEnd\");\nregisterSimpleEvent(ANIMATION_ITERATION, \"onAnimationIteration\");\nregisterSimpleEvent(ANIMATION_START, \"onAnimationStart\");\nregisterSimpleEvent(\"dblclick\", \"onDoubleClick\");\nregisterSimpleEvent(\"focusin\", \"onFocus\");\nregisterSimpleEvent(\"focusout\", \"onBlur\");\nregisterSimpleEvent(TRANSITION_RUN, \"onTransitionRun\");\nregisterSimpleEvent(TRANSITION_START, \"onTransitionStart\");\nregisterSimpleEvent(TRANSITION_CANCEL, \"onTransitionCancel\");\nregisterSimpleEvent(TRANSITION_END, \"onTransitionEnd\");\nregisterDirectEvent(\"onMouseEnter\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onMouseLeave\", [\"mouseout\", \"mouseover\"]);\nregisterDirectEvent(\"onPointerEnter\", [\"pointerout\", \"pointerover\"]);\nregisterDirectEvent(\"onPointerLeave\", [\"pointerout\", \"pointerover\"]);\nregisterTwoPhaseEvent(\n  \"onChange\",\n  \"change click focusin focusout input keydown keyup selectionchange\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onSelect\",\n  \"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\n    \" \"\n  )\n);\nregisterTwoPhaseEvent(\"onBeforeInput\", [\n  \"compositionend\",\n  \"keypress\",\n  \"textInput\",\n  \"paste\"\n]);\nregisterTwoPhaseEvent(\n  \"onCompositionEnd\",\n  \"compositionend focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionStart\",\n  \"compositionstart focusout keydown keypress keyup mousedown\".split(\" \")\n);\nregisterTwoPhaseEvent(\n  \"onCompositionUpdate\",\n  \"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \")\n);\nvar mediaEventTypes =\n    \"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\n      \" \"\n    ),\n  nonDelegatedEvents = new Set(\n    \"beforetoggle cancel close invalid load scroll scrollend toggle\"\n      .split(\" \")\n      .concat(mediaEventTypes)\n  );\nfunction processDispatchQueue(dispatchQueue, eventSystemFlags) {\n  eventSystemFlags = 0 !== (eventSystemFlags & 4);\n  for (var i = 0; i < dispatchQueue.length; i++) {\n    var _dispatchQueue$i = dispatchQueue[i],\n      event = _dispatchQueue$i.event;\n    _dispatchQueue$i = _dispatchQueue$i.listeners;\n    a: {\n      var previousInstance = void 0;\n      if (eventSystemFlags)\n        for (\n          var i$jscomp$0 = _dispatchQueue$i.length - 1;\n          0 <= i$jscomp$0;\n          i$jscomp$0--\n        ) {\n          var _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0],\n            instance = _dispatchListeners$i.instance,\n            currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n      else\n        for (\n          i$jscomp$0 = 0;\n          i$jscomp$0 < _dispatchQueue$i.length;\n          i$jscomp$0++\n        ) {\n          _dispatchListeners$i = _dispatchQueue$i[i$jscomp$0];\n          instance = _dispatchListeners$i.instance;\n          currentTarget = _dispatchListeners$i.currentTarget;\n          _dispatchListeners$i = _dispatchListeners$i.listener;\n          if (instance !== previousInstance && event.isPropagationStopped())\n            break a;\n          previousInstance = _dispatchListeners$i;\n          event.currentTarget = currentTarget;\n          try {\n            previousInstance(event);\n          } catch (error) {\n            reportGlobalError(error);\n          }\n          event.currentTarget = null;\n          previousInstance = instance;\n        }\n    }\n  }\n}\nfunction listenToNonDelegatedEvent(domEventName, targetElement) {\n  var JSCompiler_inline_result = targetElement[internalEventHandlersKey];\n  void 0 === JSCompiler_inline_result &&\n    (JSCompiler_inline_result = targetElement[internalEventHandlersKey] =\n      new Set());\n  var listenerSetKey = domEventName + \"__bubble\";\n  JSCompiler_inline_result.has(listenerSetKey) ||\n    (addTrappedEventListener(targetElement, domEventName, 2, !1),\n    JSCompiler_inline_result.add(listenerSetKey));\n}\nfunction listenToNativeEvent(domEventName, isCapturePhaseListener, target) {\n  var eventSystemFlags = 0;\n  isCapturePhaseListener && (eventSystemFlags |= 4);\n  addTrappedEventListener(\n    target,\n    domEventName,\n    eventSystemFlags,\n    isCapturePhaseListener\n  );\n}\nvar listeningMarker = \"_reactListening\" + Math.random().toString(36).slice(2);\nfunction listenToAllSupportedEvents(rootContainerElement) {\n  if (!rootContainerElement[listeningMarker]) {\n    rootContainerElement[listeningMarker] = !0;\n    allNativeEvents.forEach(function (domEventName) {\n      \"selectionchange\" !== domEventName &&\n        (nonDelegatedEvents.has(domEventName) ||\n          listenToNativeEvent(domEventName, !1, rootContainerElement),\n        listenToNativeEvent(domEventName, !0, rootContainerElement));\n    });\n    var ownerDocument =\n      9 === rootContainerElement.nodeType\n        ? rootContainerElement\n        : rootContainerElement.ownerDocument;\n    null === ownerDocument ||\n      ownerDocument[listeningMarker] ||\n      ((ownerDocument[listeningMarker] = !0),\n      listenToNativeEvent(\"selectionchange\", !1, ownerDocument));\n  }\n}\nfunction addTrappedEventListener(\n  targetContainer,\n  domEventName,\n  eventSystemFlags,\n  isCapturePhaseListener\n) {\n  switch (getEventPriority(domEventName)) {\n    case 2:\n      var listenerWrapper = dispatchDiscreteEvent;\n      break;\n    case 8:\n      listenerWrapper = dispatchContinuousEvent;\n      break;\n    default:\n      listenerWrapper = dispatchEvent;\n  }\n  eventSystemFlags = listenerWrapper.bind(\n    null,\n    domEventName,\n    eventSystemFlags,\n    targetContainer\n  );\n  listenerWrapper = void 0;\n  !passiveBrowserEventsSupported ||\n    (\"touchstart\" !== domEventName &&\n      \"touchmove\" !== domEventName &&\n      \"wheel\" !== domEventName) ||\n    (listenerWrapper = !0);\n  isCapturePhaseListener\n    ? void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          capture: !0,\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !0)\n    : void 0 !== listenerWrapper\n      ? targetContainer.addEventListener(domEventName, eventSystemFlags, {\n          passive: listenerWrapper\n        })\n      : targetContainer.addEventListener(domEventName, eventSystemFlags, !1);\n}\nfunction dispatchEventForPluginEventSystem(\n  domEventName,\n  eventSystemFlags,\n  nativeEvent,\n  targetInst$jscomp$0,\n  targetContainer\n) {\n  var ancestorInst = targetInst$jscomp$0;\n  if (\n    0 === (eventSystemFlags & 1) &&\n    0 === (eventSystemFlags & 2) &&\n    null !== targetInst$jscomp$0\n  )\n    a: for (;;) {\n      if (null === targetInst$jscomp$0) return;\n      var nodeTag = targetInst$jscomp$0.tag;\n      if (3 === nodeTag || 4 === nodeTag) {\n        var container = targetInst$jscomp$0.stateNode.containerInfo;\n        if (container === targetContainer) break;\n        if (4 === nodeTag)\n          for (nodeTag = targetInst$jscomp$0.return; null !== nodeTag; ) {\n            var grandTag = nodeTag.tag;\n            if (\n              (3 === grandTag || 4 === grandTag) &&\n              nodeTag.stateNode.containerInfo === targetContainer\n            )\n              return;\n            nodeTag = nodeTag.return;\n          }\n        for (; null !== container; ) {\n          nodeTag = getClosestInstanceFromNode(container);\n          if (null === nodeTag) return;\n          grandTag = nodeTag.tag;\n          if (\n            5 === grandTag ||\n            6 === grandTag ||\n            26 === grandTag ||\n            27 === grandTag\n          ) {\n            targetInst$jscomp$0 = ancestorInst = nodeTag;\n            continue a;\n          }\n          container = container.parentNode;\n        }\n      }\n      targetInst$jscomp$0 = targetInst$jscomp$0.return;\n    }\n  batchedUpdates$1(function () {\n    var targetInst = ancestorInst,\n      nativeEventTarget = getEventTarget(nativeEvent),\n      dispatchQueue = [];\n    a: {\n      var reactName = topLevelEventsToReactNames.get(domEventName);\n      if (void 0 !== reactName) {\n        var SyntheticEventCtor = SyntheticEvent,\n          reactEventType = domEventName;\n        switch (domEventName) {\n          case \"keypress\":\n            if (0 === getEventCharCode(nativeEvent)) break a;\n          case \"keydown\":\n          case \"keyup\":\n            SyntheticEventCtor = SyntheticKeyboardEvent;\n            break;\n          case \"focusin\":\n            reactEventType = \"focus\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"focusout\":\n            reactEventType = \"blur\";\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"beforeblur\":\n          case \"afterblur\":\n            SyntheticEventCtor = SyntheticFocusEvent;\n            break;\n          case \"click\":\n            if (2 === nativeEvent.button) break a;\n          case \"auxclick\":\n          case \"dblclick\":\n          case \"mousedown\":\n          case \"mousemove\":\n          case \"mouseup\":\n          case \"mouseout\":\n          case \"mouseover\":\n          case \"contextmenu\":\n            SyntheticEventCtor = SyntheticMouseEvent;\n            break;\n          case \"drag\":\n          case \"dragend\":\n          case \"dragenter\":\n          case \"dragexit\":\n          case \"dragleave\":\n          case \"dragover\":\n          case \"dragstart\":\n          case \"drop\":\n            SyntheticEventCtor = SyntheticDragEvent;\n            break;\n          case \"touchcancel\":\n          case \"touchend\":\n          case \"touchmove\":\n          case \"touchstart\":\n            SyntheticEventCtor = SyntheticTouchEvent;\n            break;\n          case ANIMATION_END:\n          case ANIMATION_ITERATION:\n          case ANIMATION_START:\n            SyntheticEventCtor = SyntheticAnimationEvent;\n            break;\n          case TRANSITION_END:\n            SyntheticEventCtor = SyntheticTransitionEvent;\n            break;\n          case \"scroll\":\n          case \"scrollend\":\n            SyntheticEventCtor = SyntheticUIEvent;\n            break;\n          case \"wheel\":\n            SyntheticEventCtor = SyntheticWheelEvent;\n            break;\n          case \"copy\":\n          case \"cut\":\n          case \"paste\":\n            SyntheticEventCtor = SyntheticClipboardEvent;\n            break;\n          case \"gotpointercapture\":\n          case \"lostpointercapture\":\n          case \"pointercancel\":\n          case \"pointerdown\":\n          case \"pointermove\":\n          case \"pointerout\":\n          case \"pointerover\":\n          case \"pointerup\":\n            SyntheticEventCtor = SyntheticPointerEvent;\n            break;\n          case \"toggle\":\n          case \"beforetoggle\":\n            SyntheticEventCtor = SyntheticToggleEvent;\n        }\n        var inCapturePhase = 0 !== (eventSystemFlags & 4),\n          accumulateTargetOnly =\n            !inCapturePhase &&\n            (\"scroll\" === domEventName || \"scrollend\" === domEventName),\n          reactEventName = inCapturePhase\n            ? null !== reactName\n              ? reactName + \"Capture\"\n              : null\n            : reactName;\n        inCapturePhase = [];\n        for (\n          var instance = targetInst, lastHostComponent;\n          null !== instance;\n\n        ) {\n          var _instance = instance;\n          lastHostComponent = _instance.stateNode;\n          _instance = _instance.tag;\n          (5 !== _instance && 26 !== _instance && 27 !== _instance) ||\n            null === lastHostComponent ||\n            null === reactEventName ||\n            ((_instance = getListener(instance, reactEventName)),\n            null != _instance &&\n              inCapturePhase.push(\n                createDispatchListener(instance, _instance, lastHostComponent)\n              ));\n          if (accumulateTargetOnly) break;\n          instance = instance.return;\n        }\n        0 < inCapturePhase.length &&\n          ((reactName = new SyntheticEventCtor(\n            reactName,\n            reactEventType,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: reactName, listeners: inCapturePhase }));\n      }\n    }\n    if (0 === (eventSystemFlags & 7)) {\n      a: {\n        reactName =\n          \"mouseover\" === domEventName || \"pointerover\" === domEventName;\n        SyntheticEventCtor =\n          \"mouseout\" === domEventName || \"pointerout\" === domEventName;\n        if (\n          reactName &&\n          nativeEvent !== currentReplayingEvent &&\n          (reactEventType =\n            nativeEvent.relatedTarget || nativeEvent.fromElement) &&\n          (getClosestInstanceFromNode(reactEventType) ||\n            reactEventType[internalContainerInstanceKey])\n        )\n          break a;\n        if (SyntheticEventCtor || reactName) {\n          reactName =\n            nativeEventTarget.window === nativeEventTarget\n              ? nativeEventTarget\n              : (reactName = nativeEventTarget.ownerDocument)\n                ? reactName.defaultView || reactName.parentWindow\n                : window;\n          if (SyntheticEventCtor) {\n            if (\n              ((reactEventType =\n                nativeEvent.relatedTarget || nativeEvent.toElement),\n              (SyntheticEventCtor = targetInst),\n              (reactEventType = reactEventType\n                ? getClosestInstanceFromNode(reactEventType)\n                : null),\n              null !== reactEventType &&\n                ((accumulateTargetOnly =\n                  getNearestMountedFiber(reactEventType)),\n                (inCapturePhase = reactEventType.tag),\n                reactEventType !== accumulateTargetOnly ||\n                  (5 !== inCapturePhase &&\n                    27 !== inCapturePhase &&\n                    6 !== inCapturePhase)))\n            )\n              reactEventType = null;\n          } else (SyntheticEventCtor = null), (reactEventType = targetInst);\n          if (SyntheticEventCtor !== reactEventType) {\n            inCapturePhase = SyntheticMouseEvent;\n            _instance = \"onMouseLeave\";\n            reactEventName = \"onMouseEnter\";\n            instance = \"mouse\";\n            if (\"pointerout\" === domEventName || \"pointerover\" === domEventName)\n              (inCapturePhase = SyntheticPointerEvent),\n                (_instance = \"onPointerLeave\"),\n                (reactEventName = \"onPointerEnter\"),\n                (instance = \"pointer\");\n            accumulateTargetOnly =\n              null == SyntheticEventCtor\n                ? reactName\n                : getNodeFromInstance(SyntheticEventCtor);\n            lastHostComponent =\n              null == reactEventType\n                ? reactName\n                : getNodeFromInstance(reactEventType);\n            reactName = new inCapturePhase(\n              _instance,\n              instance + \"leave\",\n              SyntheticEventCtor,\n              nativeEvent,\n              nativeEventTarget\n            );\n            reactName.target = accumulateTargetOnly;\n            reactName.relatedTarget = lastHostComponent;\n            _instance = null;\n            getClosestInstanceFromNode(nativeEventTarget) === targetInst &&\n              ((inCapturePhase = new inCapturePhase(\n                reactEventName,\n                instance + \"enter\",\n                reactEventType,\n                nativeEvent,\n                nativeEventTarget\n              )),\n              (inCapturePhase.target = lastHostComponent),\n              (inCapturePhase.relatedTarget = accumulateTargetOnly),\n              (_instance = inCapturePhase));\n            accumulateTargetOnly = _instance;\n            if (SyntheticEventCtor && reactEventType)\n              b: {\n                inCapturePhase = getParent;\n                reactEventName = SyntheticEventCtor;\n                instance = reactEventType;\n                lastHostComponent = 0;\n                for (\n                  _instance = reactEventName;\n                  _instance;\n                  _instance = inCapturePhase(_instance)\n                )\n                  lastHostComponent++;\n                _instance = 0;\n                for (var tempB = instance; tempB; tempB = inCapturePhase(tempB))\n                  _instance++;\n                for (; 0 < lastHostComponent - _instance; )\n                  (reactEventName = inCapturePhase(reactEventName)),\n                    lastHostComponent--;\n                for (; 0 < _instance - lastHostComponent; )\n                  (instance = inCapturePhase(instance)), _instance--;\n                for (; lastHostComponent--; ) {\n                  if (\n                    reactEventName === instance ||\n                    (null !== instance && reactEventName === instance.alternate)\n                  ) {\n                    inCapturePhase = reactEventName;\n                    break b;\n                  }\n                  reactEventName = inCapturePhase(reactEventName);\n                  instance = inCapturePhase(instance);\n                }\n                inCapturePhase = null;\n              }\n            else inCapturePhase = null;\n            null !== SyntheticEventCtor &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                reactName,\n                SyntheticEventCtor,\n                inCapturePhase,\n                !1\n              );\n            null !== reactEventType &&\n              null !== accumulateTargetOnly &&\n              accumulateEnterLeaveListenersForEvent(\n                dispatchQueue,\n                accumulateTargetOnly,\n                reactEventType,\n                inCapturePhase,\n                !0\n              );\n          }\n        }\n      }\n      a: {\n        reactName = targetInst ? getNodeFromInstance(targetInst) : window;\n        SyntheticEventCtor =\n          reactName.nodeName && reactName.nodeName.toLowerCase();\n        if (\n          \"select\" === SyntheticEventCtor ||\n          (\"input\" === SyntheticEventCtor && \"file\" === reactName.type)\n        )\n          var getTargetInstFunc = getTargetInstForChangeEvent;\n        else if (isTextInputElement(reactName))\n          if (isInputEventSupported)\n            getTargetInstFunc = getTargetInstForInputOrChangeEvent;\n          else {\n            getTargetInstFunc = getTargetInstForInputEventPolyfill;\n            var handleEventFunc = handleEventsForInputEventPolyfill;\n          }\n        else\n          (SyntheticEventCtor = reactName.nodeName),\n            !SyntheticEventCtor ||\n            \"input\" !== SyntheticEventCtor.toLowerCase() ||\n            (\"checkbox\" !== reactName.type && \"radio\" !== reactName.type)\n              ? targetInst &&\n                isCustomElement(targetInst.elementType) &&\n                (getTargetInstFunc = getTargetInstForChangeEvent)\n              : (getTargetInstFunc = getTargetInstForClickEvent);\n        if (\n          getTargetInstFunc &&\n          (getTargetInstFunc = getTargetInstFunc(domEventName, targetInst))\n        ) {\n          createAndAccumulateChangeEvent(\n            dispatchQueue,\n            getTargetInstFunc,\n            nativeEvent,\n            nativeEventTarget\n          );\n          break a;\n        }\n        handleEventFunc && handleEventFunc(domEventName, reactName, targetInst);\n        \"focusout\" === domEventName &&\n          targetInst &&\n          \"number\" === reactName.type &&\n          null != targetInst.memoizedProps.value &&\n          setDefaultValue(reactName, \"number\", reactName.value);\n      }\n      handleEventFunc = targetInst ? getNodeFromInstance(targetInst) : window;\n      switch (domEventName) {\n        case \"focusin\":\n          if (\n            isTextInputElement(handleEventFunc) ||\n            \"true\" === handleEventFunc.contentEditable\n          )\n            (activeElement = handleEventFunc),\n              (activeElementInst = targetInst),\n              (lastSelection = null);\n          break;\n        case \"focusout\":\n          lastSelection = activeElementInst = activeElement = null;\n          break;\n        case \"mousedown\":\n          mouseDown = !0;\n          break;\n        case \"contextmenu\":\n        case \"mouseup\":\n        case \"dragend\":\n          mouseDown = !1;\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n          break;\n        case \"selectionchange\":\n          if (skipSelectionChangeEvent) break;\n        case \"keydown\":\n        case \"keyup\":\n          constructSelectEvent(dispatchQueue, nativeEvent, nativeEventTarget);\n      }\n      var fallbackData;\n      if (canUseCompositionEvent)\n        b: {\n          switch (domEventName) {\n            case \"compositionstart\":\n              var eventType = \"onCompositionStart\";\n              break b;\n            case \"compositionend\":\n              eventType = \"onCompositionEnd\";\n              break b;\n            case \"compositionupdate\":\n              eventType = \"onCompositionUpdate\";\n              break b;\n          }\n          eventType = void 0;\n        }\n      else\n        isComposing\n          ? isFallbackCompositionEnd(domEventName, nativeEvent) &&\n            (eventType = \"onCompositionEnd\")\n          : \"keydown\" === domEventName &&\n            229 === nativeEvent.keyCode &&\n            (eventType = \"onCompositionStart\");\n      eventType &&\n        (useFallbackCompositionData &&\n          \"ko\" !== nativeEvent.locale &&\n          (isComposing || \"onCompositionStart\" !== eventType\n            ? \"onCompositionEnd\" === eventType &&\n              isComposing &&\n              (fallbackData = getData())\n            : ((root = nativeEventTarget),\n              (startText = \"value\" in root ? root.value : root.textContent),\n              (isComposing = !0))),\n        (handleEventFunc = accumulateTwoPhaseListeners(targetInst, eventType)),\n        0 < handleEventFunc.length &&\n          ((eventType = new SyntheticCompositionEvent(\n            eventType,\n            domEventName,\n            null,\n            nativeEvent,\n            nativeEventTarget\n          )),\n          dispatchQueue.push({ event: eventType, listeners: handleEventFunc }),\n          fallbackData\n            ? (eventType.data = fallbackData)\n            : ((fallbackData = getDataFromCustomEvent(nativeEvent)),\n              null !== fallbackData && (eventType.data = fallbackData))));\n      if (\n        (fallbackData = canUseTextInputEvent\n          ? getNativeBeforeInputChars(domEventName, nativeEvent)\n          : getFallbackBeforeInputChars(domEventName, nativeEvent))\n      )\n        (eventType = accumulateTwoPhaseListeners(targetInst, \"onBeforeInput\")),\n          0 < eventType.length &&\n            ((handleEventFunc = new SyntheticCompositionEvent(\n              \"onBeforeInput\",\n              \"beforeinput\",\n              null,\n              nativeEvent,\n              nativeEventTarget\n            )),\n            dispatchQueue.push({\n              event: handleEventFunc,\n              listeners: eventType\n            }),\n            (handleEventFunc.data = fallbackData));\n      extractEvents$1(\n        dispatchQueue,\n        domEventName,\n        targetInst,\n        nativeEvent,\n        nativeEventTarget\n      );\n    }\n    processDispatchQueue(dispatchQueue, eventSystemFlags);\n  });\n}\nfunction createDispatchListener(instance, listener, currentTarget) {\n  return {\n    instance: instance,\n    listener: listener,\n    currentTarget: currentTarget\n  };\n}\nfunction accumulateTwoPhaseListeners(targetFiber, reactName) {\n  for (\n    var captureName = reactName + \"Capture\", listeners = [];\n    null !== targetFiber;\n\n  ) {\n    var _instance2 = targetFiber,\n      stateNode = _instance2.stateNode;\n    _instance2 = _instance2.tag;\n    (5 !== _instance2 && 26 !== _instance2 && 27 !== _instance2) ||\n      null === stateNode ||\n      ((_instance2 = getListener(targetFiber, captureName)),\n      null != _instance2 &&\n        listeners.unshift(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ),\n      (_instance2 = getListener(targetFiber, reactName)),\n      null != _instance2 &&\n        listeners.push(\n          createDispatchListener(targetFiber, _instance2, stateNode)\n        ));\n    if (3 === targetFiber.tag) return listeners;\n    targetFiber = targetFiber.return;\n  }\n  return [];\n}\nfunction getParent(inst) {\n  if (null === inst) return null;\n  do inst = inst.return;\n  while (inst && 5 !== inst.tag && 27 !== inst.tag);\n  return inst ? inst : null;\n}\nfunction accumulateEnterLeaveListenersForEvent(\n  dispatchQueue,\n  event,\n  target,\n  common,\n  inCapturePhase\n) {\n  for (\n    var registrationName = event._reactName, listeners = [];\n    null !== target && target !== common;\n\n  ) {\n    var _instance3 = target,\n      alternate = _instance3.alternate,\n      stateNode = _instance3.stateNode;\n    _instance3 = _instance3.tag;\n    if (null !== alternate && alternate === common) break;\n    (5 !== _instance3 && 26 !== _instance3 && 27 !== _instance3) ||\n      null === stateNode ||\n      ((alternate = stateNode),\n      inCapturePhase\n        ? ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.unshift(\n              createDispatchListener(target, stateNode, alternate)\n            ))\n        : inCapturePhase ||\n          ((stateNode = getListener(target, registrationName)),\n          null != stateNode &&\n            listeners.push(\n              createDispatchListener(target, stateNode, alternate)\n            )));\n    target = target.return;\n  }\n  0 !== listeners.length &&\n    dispatchQueue.push({ event: event, listeners: listeners });\n}\nvar NORMALIZE_NEWLINES_REGEX = /\\r\\n?/g,\n  NORMALIZE_NULL_AND_REPLACEMENT_REGEX = /\\u0000|\\uFFFD/g;\nfunction normalizeMarkupForTextOrAttribute(markup) {\n  return (\"string\" === typeof markup ? markup : \"\" + markup)\n    .replace(NORMALIZE_NEWLINES_REGEX, \"\\n\")\n    .replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX, \"\");\n}\nfunction checkForUnmatchedText(serverText, clientText) {\n  clientText = normalizeMarkupForTextOrAttribute(clientText);\n  return normalizeMarkupForTextOrAttribute(serverText) === clientText ? !0 : !1;\n}\nfunction setProp(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"children\":\n      \"string\" === typeof value\n        ? \"body\" === tag ||\n          (\"textarea\" === tag && \"\" === value) ||\n          setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          \"body\" !== tag &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"className\":\n      setValueForKnownAttribute(domElement, \"class\", value);\n      break;\n    case \"tabIndex\":\n      setValueForKnownAttribute(domElement, \"tabindex\", value);\n      break;\n    case \"dir\":\n    case \"role\":\n    case \"viewBox\":\n    case \"width\":\n    case \"height\":\n      setValueForKnownAttribute(domElement, key, value);\n      break;\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"data\":\n      if (\"object\" !== tag) {\n        setValueForKnownAttribute(domElement, \"data\", value);\n        break;\n      }\n    case \"src\":\n    case \"href\":\n      if (\"\" === value && (\"a\" !== tag || \"href\" !== key)) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"action\":\n    case \"formAction\":\n      if (\"function\" === typeof value) {\n        domElement.setAttribute(\n          key,\n          \"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')\"\n        );\n        break;\n      } else\n        \"function\" === typeof prevValue &&\n          (\"formAction\" === key\n            ? (\"input\" !== tag &&\n                setProp(domElement, tag, \"name\", props.name, props, null),\n              setProp(\n                domElement,\n                tag,\n                \"formEncType\",\n                props.formEncType,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formMethod\",\n                props.formMethod,\n                props,\n                null\n              ),\n              setProp(\n                domElement,\n                tag,\n                \"formTarget\",\n                props.formTarget,\n                props,\n                null\n              ))\n            : (setProp(domElement, tag, \"encType\", props.encType, props, null),\n              setProp(domElement, tag, \"method\", props.method, props, null),\n              setProp(domElement, tag, \"target\", props.target, props, null)));\n      if (\n        null == value ||\n        \"symbol\" === typeof value ||\n        \"boolean\" === typeof value\n      ) {\n        domElement.removeAttribute(key);\n        break;\n      }\n      value = sanitizeURL(\"\" + value);\n      domElement.setAttribute(key, value);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"multiple\":\n      domElement.multiple =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"muted\":\n      domElement.muted =\n        value && \"function\" !== typeof value && \"symbol\" !== typeof value;\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"defaultValue\":\n    case \"defaultChecked\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"autoFocus\":\n      break;\n    case \"xlinkHref\":\n      if (\n        null == value ||\n        \"function\" === typeof value ||\n        \"boolean\" === typeof value ||\n        \"symbol\" === typeof value\n      ) {\n        domElement.removeAttribute(\"xlink:href\");\n        break;\n      }\n      key = sanitizeURL(\"\" + value);\n      domElement.setAttributeNS(\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:href\",\n        key\n      );\n      break;\n    case \"contentEditable\":\n    case \"spellCheck\":\n    case \"draggable\":\n    case \"value\":\n    case \"autoReverse\":\n    case \"externalResourcesRequired\":\n    case \"focusable\":\n    case \"preserveAlpha\":\n      null != value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\" + value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"inert\":\n    case \"allowFullScreen\":\n    case \"async\":\n    case \"autoPlay\":\n    case \"controls\":\n    case \"default\":\n    case \"defer\":\n    case \"disabled\":\n    case \"disablePictureInPicture\":\n    case \"disableRemotePlayback\":\n    case \"formNoValidate\":\n    case \"hidden\":\n    case \"loop\":\n    case \"noModule\":\n    case \"noValidate\":\n    case \"open\":\n    case \"playsInline\":\n    case \"readOnly\":\n    case \"required\":\n    case \"reversed\":\n    case \"scoped\":\n    case \"seamless\":\n    case \"itemScope\":\n      value && \"function\" !== typeof value && \"symbol\" !== typeof value\n        ? domElement.setAttribute(key, \"\")\n        : domElement.removeAttribute(key);\n      break;\n    case \"capture\":\n    case \"download\":\n      !0 === value\n        ? domElement.setAttribute(key, \"\")\n        : !1 !== value &&\n            null != value &&\n            \"function\" !== typeof value &&\n            \"symbol\" !== typeof value\n          ? domElement.setAttribute(key, value)\n          : domElement.removeAttribute(key);\n      break;\n    case \"cols\":\n    case \"rows\":\n    case \"size\":\n    case \"span\":\n      null != value &&\n      \"function\" !== typeof value &&\n      \"symbol\" !== typeof value &&\n      !isNaN(value) &&\n      1 <= value\n        ? domElement.setAttribute(key, value)\n        : domElement.removeAttribute(key);\n      break;\n    case \"rowSpan\":\n    case \"start\":\n      null == value ||\n      \"function\" === typeof value ||\n      \"symbol\" === typeof value ||\n      isNaN(value)\n        ? domElement.removeAttribute(key)\n        : domElement.setAttribute(key, value);\n      break;\n    case \"popover\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      setValueForAttribute(domElement, \"popover\", value);\n      break;\n    case \"xlinkActuate\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:actuate\",\n        value\n      );\n      break;\n    case \"xlinkArcrole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:arcrole\",\n        value\n      );\n      break;\n    case \"xlinkRole\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:role\",\n        value\n      );\n      break;\n    case \"xlinkShow\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:show\",\n        value\n      );\n      break;\n    case \"xlinkTitle\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:title\",\n        value\n      );\n      break;\n    case \"xlinkType\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/1999/xlink\",\n        \"xlink:type\",\n        value\n      );\n      break;\n    case \"xmlBase\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:base\",\n        value\n      );\n      break;\n    case \"xmlLang\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:lang\",\n        value\n      );\n      break;\n    case \"xmlSpace\":\n      setValueForNamespacedAttribute(\n        domElement,\n        \"http://www.w3.org/XML/1998/namespace\",\n        \"xml:space\",\n        value\n      );\n      break;\n    case \"is\":\n      setValueForAttribute(domElement, \"is\", value);\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (\n        !(2 < key.length) ||\n        (\"o\" !== key[0] && \"O\" !== key[0]) ||\n        (\"n\" !== key[1] && \"N\" !== key[1])\n      )\n        (key = aliases.get(key) || key),\n          setValueForAttribute(domElement, key, value);\n  }\n}\nfunction setPropOnCustomElement(domElement, tag, key, value, props, prevValue) {\n  switch (key) {\n    case \"style\":\n      setValueForStyles(domElement, value, prevValue);\n      break;\n    case \"dangerouslySetInnerHTML\":\n      if (null != value) {\n        if (\"object\" !== typeof value || !(\"__html\" in value))\n          throw Error(formatProdErrorMessage(61));\n        key = value.__html;\n        if (null != key) {\n          if (null != props.children) throw Error(formatProdErrorMessage(60));\n          domElement.innerHTML = key;\n        }\n      }\n      break;\n    case \"children\":\n      \"string\" === typeof value\n        ? setTextContent(domElement, value)\n        : (\"number\" === typeof value || \"bigint\" === typeof value) &&\n          setTextContent(domElement, \"\" + value);\n      break;\n    case \"onScroll\":\n      null != value && listenToNonDelegatedEvent(\"scroll\", domElement);\n      break;\n    case \"onScrollEnd\":\n      null != value && listenToNonDelegatedEvent(\"scrollend\", domElement);\n      break;\n    case \"onClick\":\n      null != value && (domElement.onclick = noop$1);\n      break;\n    case \"suppressContentEditableWarning\":\n    case \"suppressHydrationWarning\":\n    case \"innerHTML\":\n    case \"ref\":\n      break;\n    case \"innerText\":\n    case \"textContent\":\n      break;\n    default:\n      if (!registrationNameDependencies.hasOwnProperty(key))\n        a: {\n          if (\n            \"o\" === key[0] &&\n            \"n\" === key[1] &&\n            ((props = key.endsWith(\"Capture\")),\n            (tag = key.slice(2, props ? key.length - 7 : void 0)),\n            (prevValue = domElement[internalPropsKey] || null),\n            (prevValue = null != prevValue ? prevValue[key] : null),\n            \"function\" === typeof prevValue &&\n              domElement.removeEventListener(tag, prevValue, props),\n            \"function\" === typeof value)\n          ) {\n            \"function\" !== typeof prevValue &&\n              null !== prevValue &&\n              (key in domElement\n                ? (domElement[key] = null)\n                : domElement.hasAttribute(key) &&\n                  domElement.removeAttribute(key));\n            domElement.addEventListener(tag, value, props);\n            break a;\n          }\n          key in domElement\n            ? (domElement[key] = value)\n            : !0 === value\n              ? domElement.setAttribute(key, \"\")\n              : setValueForAttribute(domElement, key, value);\n        }\n  }\n}\nfunction setInitialProperties(domElement, tag, props) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"img\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      var hasSrc = !1,\n        hasSrcSet = !1,\n        propKey;\n      for (propKey in props)\n        if (props.hasOwnProperty(propKey)) {\n          var propValue = props[propKey];\n          if (null != propValue)\n            switch (propKey) {\n              case \"src\":\n                hasSrc = !0;\n                break;\n              case \"srcSet\":\n                hasSrcSet = !0;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                throw Error(formatProdErrorMessage(137, tag));\n              default:\n                setProp(domElement, tag, propKey, propValue, props, null);\n            }\n        }\n      hasSrcSet &&\n        setProp(domElement, tag, \"srcSet\", props.srcSet, props, null);\n      hasSrc && setProp(domElement, tag, \"src\", props.src, props, null);\n      return;\n    case \"input\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      var defaultValue = (propKey = propValue = hasSrcSet = null),\n        checked = null,\n        defaultChecked = null;\n      for (hasSrc in props)\n        if (props.hasOwnProperty(hasSrc)) {\n          var propValue$184 = props[hasSrc];\n          if (null != propValue$184)\n            switch (hasSrc) {\n              case \"name\":\n                hasSrcSet = propValue$184;\n                break;\n              case \"type\":\n                propValue = propValue$184;\n                break;\n              case \"checked\":\n                checked = propValue$184;\n                break;\n              case \"defaultChecked\":\n                defaultChecked = propValue$184;\n                break;\n              case \"value\":\n                propKey = propValue$184;\n                break;\n              case \"defaultValue\":\n                defaultValue = propValue$184;\n                break;\n              case \"children\":\n              case \"dangerouslySetInnerHTML\":\n                if (null != propValue$184)\n                  throw Error(formatProdErrorMessage(137, tag));\n                break;\n              default:\n                setProp(domElement, tag, hasSrc, propValue$184, props, null);\n            }\n        }\n      initInput(\n        domElement,\n        propKey,\n        defaultValue,\n        checked,\n        defaultChecked,\n        propValue,\n        hasSrcSet,\n        !1\n      );\n      return;\n    case \"select\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      hasSrc = propValue = propKey = null;\n      for (hasSrcSet in props)\n        if (\n          props.hasOwnProperty(hasSrcSet) &&\n          ((defaultValue = props[hasSrcSet]), null != defaultValue)\n        )\n          switch (hasSrcSet) {\n            case \"value\":\n              propKey = defaultValue;\n              break;\n            case \"defaultValue\":\n              propValue = defaultValue;\n              break;\n            case \"multiple\":\n              hasSrc = defaultValue;\n            default:\n              setProp(domElement, tag, hasSrcSet, defaultValue, props, null);\n          }\n      tag = propKey;\n      props = propValue;\n      domElement.multiple = !!hasSrc;\n      null != tag\n        ? updateOptions(domElement, !!hasSrc, tag, !1)\n        : null != props && updateOptions(domElement, !!hasSrc, props, !0);\n      return;\n    case \"textarea\":\n      listenToNonDelegatedEvent(\"invalid\", domElement);\n      propKey = hasSrcSet = hasSrc = null;\n      for (propValue in props)\n        if (\n          props.hasOwnProperty(propValue) &&\n          ((defaultValue = props[propValue]), null != defaultValue)\n        )\n          switch (propValue) {\n            case \"value\":\n              hasSrc = defaultValue;\n              break;\n            case \"defaultValue\":\n              hasSrcSet = defaultValue;\n              break;\n            case \"children\":\n              propKey = defaultValue;\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != defaultValue) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              setProp(domElement, tag, propValue, defaultValue, props, null);\n          }\n      initTextarea(domElement, hasSrc, hasSrcSet, propKey);\n      return;\n    case \"option\":\n      for (checked in props)\n        if (\n          props.hasOwnProperty(checked) &&\n          ((hasSrc = props[checked]), null != hasSrc)\n        )\n          switch (checked) {\n            case \"selected\":\n              domElement.selected =\n                hasSrc &&\n                \"function\" !== typeof hasSrc &&\n                \"symbol\" !== typeof hasSrc;\n              break;\n            default:\n              setProp(domElement, tag, checked, hasSrc, props, null);\n          }\n      return;\n    case \"dialog\":\n      listenToNonDelegatedEvent(\"beforetoggle\", domElement);\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      listenToNonDelegatedEvent(\"cancel\", domElement);\n      listenToNonDelegatedEvent(\"close\", domElement);\n      break;\n    case \"iframe\":\n    case \"object\":\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"video\":\n    case \"audio\":\n      for (hasSrc = 0; hasSrc < mediaEventTypes.length; hasSrc++)\n        listenToNonDelegatedEvent(mediaEventTypes[hasSrc], domElement);\n      break;\n    case \"image\":\n      listenToNonDelegatedEvent(\"error\", domElement);\n      listenToNonDelegatedEvent(\"load\", domElement);\n      break;\n    case \"details\":\n      listenToNonDelegatedEvent(\"toggle\", domElement);\n      break;\n    case \"embed\":\n    case \"source\":\n    case \"link\":\n      listenToNonDelegatedEvent(\"error\", domElement),\n        listenToNonDelegatedEvent(\"load\", domElement);\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (defaultChecked in props)\n        if (\n          props.hasOwnProperty(defaultChecked) &&\n          ((hasSrc = props[defaultChecked]), null != hasSrc)\n        )\n          switch (defaultChecked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              throw Error(formatProdErrorMessage(137, tag));\n            default:\n              setProp(domElement, tag, defaultChecked, hasSrc, props, null);\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (propValue$184 in props)\n          props.hasOwnProperty(propValue$184) &&\n            ((hasSrc = props[propValue$184]),\n            void 0 !== hasSrc &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propValue$184,\n                hasSrc,\n                props,\n                void 0\n              ));\n        return;\n      }\n  }\n  for (defaultValue in props)\n    props.hasOwnProperty(defaultValue) &&\n      ((hasSrc = props[defaultValue]),\n      null != hasSrc &&\n        setProp(domElement, tag, defaultValue, hasSrc, props, null));\n}\nfunction updateProperties(domElement, tag, lastProps, nextProps) {\n  switch (tag) {\n    case \"div\":\n    case \"span\":\n    case \"svg\":\n    case \"path\":\n    case \"a\":\n    case \"g\":\n    case \"p\":\n    case \"li\":\n      break;\n    case \"input\":\n      var name = null,\n        type = null,\n        value = null,\n        defaultValue = null,\n        lastDefaultValue = null,\n        checked = null,\n        defaultChecked = null;\n      for (propKey in lastProps) {\n        var lastProp = lastProps[propKey];\n        if (lastProps.hasOwnProperty(propKey) && null != lastProp)\n          switch (propKey) {\n            case \"checked\":\n              break;\n            case \"value\":\n              break;\n            case \"defaultValue\":\n              lastDefaultValue = lastProp;\n            default:\n              nextProps.hasOwnProperty(propKey) ||\n                setProp(domElement, tag, propKey, null, nextProps, lastProp);\n          }\n      }\n      for (var propKey$201 in nextProps) {\n        var propKey = nextProps[propKey$201];\n        lastProp = lastProps[propKey$201];\n        if (\n          nextProps.hasOwnProperty(propKey$201) &&\n          (null != propKey || null != lastProp)\n        )\n          switch (propKey$201) {\n            case \"type\":\n              type = propKey;\n              break;\n            case \"name\":\n              name = propKey;\n              break;\n            case \"checked\":\n              checked = propKey;\n              break;\n            case \"defaultChecked\":\n              defaultChecked = propKey;\n              break;\n            case \"value\":\n              value = propKey;\n              break;\n            case \"defaultValue\":\n              defaultValue = propKey;\n              break;\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              propKey !== lastProp &&\n                setProp(\n                  domElement,\n                  tag,\n                  propKey$201,\n                  propKey,\n                  nextProps,\n                  lastProp\n                );\n          }\n      }\n      updateInput(\n        domElement,\n        value,\n        defaultValue,\n        lastDefaultValue,\n        checked,\n        defaultChecked,\n        type,\n        name\n      );\n      return;\n    case \"select\":\n      propKey = value = defaultValue = propKey$201 = null;\n      for (type in lastProps)\n        if (\n          ((lastDefaultValue = lastProps[type]),\n          lastProps.hasOwnProperty(type) && null != lastDefaultValue)\n        )\n          switch (type) {\n            case \"value\":\n              break;\n            case \"multiple\":\n              propKey = lastDefaultValue;\n            default:\n              nextProps.hasOwnProperty(type) ||\n                setProp(\n                  domElement,\n                  tag,\n                  type,\n                  null,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      for (name in nextProps)\n        if (\n          ((type = nextProps[name]),\n          (lastDefaultValue = lastProps[name]),\n          nextProps.hasOwnProperty(name) &&\n            (null != type || null != lastDefaultValue))\n        )\n          switch (name) {\n            case \"value\":\n              propKey$201 = type;\n              break;\n            case \"defaultValue\":\n              defaultValue = type;\n              break;\n            case \"multiple\":\n              value = type;\n            default:\n              type !== lastDefaultValue &&\n                setProp(\n                  domElement,\n                  tag,\n                  name,\n                  type,\n                  nextProps,\n                  lastDefaultValue\n                );\n          }\n      tag = defaultValue;\n      lastProps = value;\n      nextProps = propKey;\n      null != propKey$201\n        ? updateOptions(domElement, !!lastProps, propKey$201, !1)\n        : !!nextProps !== !!lastProps &&\n          (null != tag\n            ? updateOptions(domElement, !!lastProps, tag, !0)\n            : updateOptions(domElement, !!lastProps, lastProps ? [] : \"\", !1));\n      return;\n    case \"textarea\":\n      propKey = propKey$201 = null;\n      for (defaultValue in lastProps)\n        if (\n          ((name = lastProps[defaultValue]),\n          lastProps.hasOwnProperty(defaultValue) &&\n            null != name &&\n            !nextProps.hasOwnProperty(defaultValue))\n        )\n          switch (defaultValue) {\n            case \"value\":\n              break;\n            case \"children\":\n              break;\n            default:\n              setProp(domElement, tag, defaultValue, null, nextProps, name);\n          }\n      for (value in nextProps)\n        if (\n          ((name = nextProps[value]),\n          (type = lastProps[value]),\n          nextProps.hasOwnProperty(value) && (null != name || null != type))\n        )\n          switch (value) {\n            case \"value\":\n              propKey$201 = name;\n              break;\n            case \"defaultValue\":\n              propKey = name;\n              break;\n            case \"children\":\n              break;\n            case \"dangerouslySetInnerHTML\":\n              if (null != name) throw Error(formatProdErrorMessage(91));\n              break;\n            default:\n              name !== type &&\n                setProp(domElement, tag, value, name, nextProps, type);\n          }\n      updateTextarea(domElement, propKey$201, propKey);\n      return;\n    case \"option\":\n      for (var propKey$217 in lastProps)\n        if (\n          ((propKey$201 = lastProps[propKey$217]),\n          lastProps.hasOwnProperty(propKey$217) &&\n            null != propKey$201 &&\n            !nextProps.hasOwnProperty(propKey$217))\n        )\n          switch (propKey$217) {\n            case \"selected\":\n              domElement.selected = !1;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                propKey$217,\n                null,\n                nextProps,\n                propKey$201\n              );\n          }\n      for (lastDefaultValue in nextProps)\n        if (\n          ((propKey$201 = nextProps[lastDefaultValue]),\n          (propKey = lastProps[lastDefaultValue]),\n          nextProps.hasOwnProperty(lastDefaultValue) &&\n            propKey$201 !== propKey &&\n            (null != propKey$201 || null != propKey))\n        )\n          switch (lastDefaultValue) {\n            case \"selected\":\n              domElement.selected =\n                propKey$201 &&\n                \"function\" !== typeof propKey$201 &&\n                \"symbol\" !== typeof propKey$201;\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                lastDefaultValue,\n                propKey$201,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    case \"img\":\n    case \"link\":\n    case \"area\":\n    case \"base\":\n    case \"br\":\n    case \"col\":\n    case \"embed\":\n    case \"hr\":\n    case \"keygen\":\n    case \"meta\":\n    case \"param\":\n    case \"source\":\n    case \"track\":\n    case \"wbr\":\n    case \"menuitem\":\n      for (var propKey$222 in lastProps)\n        (propKey$201 = lastProps[propKey$222]),\n          lastProps.hasOwnProperty(propKey$222) &&\n            null != propKey$201 &&\n            !nextProps.hasOwnProperty(propKey$222) &&\n            setProp(domElement, tag, propKey$222, null, nextProps, propKey$201);\n      for (checked in nextProps)\n        if (\n          ((propKey$201 = nextProps[checked]),\n          (propKey = lastProps[checked]),\n          nextProps.hasOwnProperty(checked) &&\n            propKey$201 !== propKey &&\n            (null != propKey$201 || null != propKey))\n        )\n          switch (checked) {\n            case \"children\":\n            case \"dangerouslySetInnerHTML\":\n              if (null != propKey$201)\n                throw Error(formatProdErrorMessage(137, tag));\n              break;\n            default:\n              setProp(\n                domElement,\n                tag,\n                checked,\n                propKey$201,\n                nextProps,\n                propKey\n              );\n          }\n      return;\n    default:\n      if (isCustomElement(tag)) {\n        for (var propKey$227 in lastProps)\n          (propKey$201 = lastProps[propKey$227]),\n            lastProps.hasOwnProperty(propKey$227) &&\n              void 0 !== propKey$201 &&\n              !nextProps.hasOwnProperty(propKey$227) &&\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                propKey$227,\n                void 0,\n                nextProps,\n                propKey$201\n              );\n        for (defaultChecked in nextProps)\n          (propKey$201 = nextProps[defaultChecked]),\n            (propKey = lastProps[defaultChecked]),\n            !nextProps.hasOwnProperty(defaultChecked) ||\n              propKey$201 === propKey ||\n              (void 0 === propKey$201 && void 0 === propKey) ||\n              setPropOnCustomElement(\n                domElement,\n                tag,\n                defaultChecked,\n                propKey$201,\n                nextProps,\n                propKey\n              );\n        return;\n      }\n  }\n  for (var propKey$232 in lastProps)\n    (propKey$201 = lastProps[propKey$232]),\n      lastProps.hasOwnProperty(propKey$232) &&\n        null != propKey$201 &&\n        !nextProps.hasOwnProperty(propKey$232) &&\n        setProp(domElement, tag, propKey$232, null, nextProps, propKey$201);\n  for (lastProp in nextProps)\n    (propKey$201 = nextProps[lastProp]),\n      (propKey = lastProps[lastProp]),\n      !nextProps.hasOwnProperty(lastProp) ||\n        propKey$201 === propKey ||\n        (null == propKey$201 && null == propKey) ||\n        setProp(domElement, tag, lastProp, propKey$201, nextProps, propKey);\n}\nfunction isLikelyStaticResource(initiatorType) {\n  switch (initiatorType) {\n    case \"css\":\n    case \"script\":\n    case \"font\":\n    case \"img\":\n    case \"image\":\n    case \"input\":\n    case \"link\":\n      return !0;\n    default:\n      return !1;\n  }\n}\nfunction estimateBandwidth() {\n  if (\"function\" === typeof performance.getEntriesByType) {\n    for (\n      var count = 0,\n        bits = 0,\n        resourceEntries = performance.getEntriesByType(\"resource\"),\n        i = 0;\n      i < resourceEntries.length;\n      i++\n    ) {\n      var entry = resourceEntries[i],\n        transferSize = entry.transferSize,\n        initiatorType = entry.initiatorType,\n        duration = entry.duration;\n      if (transferSize && duration && isLikelyStaticResource(initiatorType)) {\n        initiatorType = 0;\n        duration = entry.responseEnd;\n        for (i += 1; i < resourceEntries.length; i++) {\n          var overlapEntry = resourceEntries[i],\n            overlapStartTime = overlapEntry.startTime;\n          if (overlapStartTime > duration) break;\n          var overlapTransferSize = overlapEntry.transferSize,\n            overlapInitiatorType = overlapEntry.initiatorType;\n          overlapTransferSize &&\n            isLikelyStaticResource(overlapInitiatorType) &&\n            ((overlapEntry = overlapEntry.responseEnd),\n            (initiatorType +=\n              overlapTransferSize *\n              (overlapEntry < duration\n                ? 1\n                : (duration - overlapStartTime) /\n                  (overlapEntry - overlapStartTime))));\n        }\n        --i;\n        bits += (8 * (transferSize + initiatorType)) / (entry.duration / 1e3);\n        count++;\n        if (10 < count) break;\n      }\n    }\n    if (0 < count) return bits / count / 1e6;\n  }\n  return navigator.connection &&\n    ((count = navigator.connection.downlink), \"number\" === typeof count)\n    ? count\n    : 5;\n}\nvar eventsEnabled = null,\n  selectionInformation = null;\nfunction getOwnerDocumentFromRootContainer(rootContainerElement) {\n  return 9 === rootContainerElement.nodeType\n    ? rootContainerElement\n    : rootContainerElement.ownerDocument;\n}\nfunction getOwnHostContext(namespaceURI) {\n  switch (namespaceURI) {\n    case \"http://www.w3.org/2000/svg\":\n      return 1;\n    case \"http://www.w3.org/1998/Math/MathML\":\n      return 2;\n    default:\n      return 0;\n  }\n}\nfunction getChildHostContextProd(parentNamespace, type) {\n  if (0 === parentNamespace)\n    switch (type) {\n      case \"svg\":\n        return 1;\n      case \"math\":\n        return 2;\n      default:\n        return 0;\n    }\n  return 1 === parentNamespace && \"foreignObject\" === type\n    ? 0\n    : parentNamespace;\n}\nfunction shouldSetTextContent(type, props) {\n  return (\n    \"textarea\" === type ||\n    \"noscript\" === type ||\n    \"string\" === typeof props.children ||\n    \"number\" === typeof props.children ||\n    \"bigint\" === typeof props.children ||\n    (\"object\" === typeof props.dangerouslySetInnerHTML &&\n      null !== props.dangerouslySetInnerHTML &&\n      null != props.dangerouslySetInnerHTML.__html)\n  );\n}\nvar currentPopstateTransitionEvent = null;\nfunction shouldAttemptEagerTransition() {\n  var event = window.event;\n  if (event && \"popstate\" === event.type) {\n    if (event === currentPopstateTransitionEvent) return !1;\n    currentPopstateTransitionEvent = event;\n    return !0;\n  }\n  currentPopstateTransitionEvent = null;\n  return !1;\n}\nvar scheduleTimeout = \"function\" === typeof setTimeout ? setTimeout : void 0,\n  cancelTimeout = \"function\" === typeof clearTimeout ? clearTimeout : void 0,\n  localPromise = \"function\" === typeof Promise ? Promise : void 0,\n  scheduleMicrotask =\n    \"function\" === typeof queueMicrotask\n      ? queueMicrotask\n      : \"undefined\" !== typeof localPromise\n        ? function (callback) {\n            return localPromise\n              .resolve(null)\n              .then(callback)\n              .catch(handleErrorInNextTick);\n          }\n        : scheduleTimeout;\nfunction handleErrorInNextTick(error) {\n  setTimeout(function () {\n    throw error;\n  });\n}\nfunction isSingletonScope(type) {\n  return \"head\" === type;\n}\nfunction clearHydrationBoundary(parentInstance, hydrationInstance) {\n  var node = hydrationInstance,\n    depth = 0;\n  do {\n    var nextNode = node.nextSibling;\n    parentInstance.removeChild(node);\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node || \"/&\" === node)) {\n        if (0 === depth) {\n          parentInstance.removeChild(nextNode);\n          retryIfBlockedOn(hydrationInstance);\n          return;\n        }\n        depth--;\n      } else if (\n        \"$\" === node ||\n        \"$?\" === node ||\n        \"$~\" === node ||\n        \"$!\" === node ||\n        \"&\" === node\n      )\n        depth++;\n      else if (\"html\" === node)\n        releaseSingletonInstance(parentInstance.ownerDocument.documentElement);\n      else if (\"head\" === node) {\n        node = parentInstance.ownerDocument.head;\n        releaseSingletonInstance(node);\n        for (var node$jscomp$0 = node.firstChild; node$jscomp$0; ) {\n          var nextNode$jscomp$0 = node$jscomp$0.nextSibling,\n            nodeName = node$jscomp$0.nodeName;\n          node$jscomp$0[internalHoistableMarker] ||\n            \"SCRIPT\" === nodeName ||\n            \"STYLE\" === nodeName ||\n            (\"LINK\" === nodeName &&\n              \"stylesheet\" === node$jscomp$0.rel.toLowerCase()) ||\n            node.removeChild(node$jscomp$0);\n          node$jscomp$0 = nextNode$jscomp$0;\n        }\n      } else\n        \"body\" === node &&\n          releaseSingletonInstance(parentInstance.ownerDocument.body);\n    node = nextNode;\n  } while (node);\n  retryIfBlockedOn(hydrationInstance);\n}\nfunction hideOrUnhideDehydratedBoundary(suspenseInstance, isHidden) {\n  var node = suspenseInstance;\n  suspenseInstance = 0;\n  do {\n    var nextNode = node.nextSibling;\n    1 === node.nodeType\n      ? isHidden\n        ? ((node._stashedDisplay = node.style.display),\n          (node.style.display = \"none\"))\n        : ((node.style.display = node._stashedDisplay || \"\"),\n          \"\" === node.getAttribute(\"style\") && node.removeAttribute(\"style\"))\n      : 3 === node.nodeType &&\n        (isHidden\n          ? ((node._stashedText = node.nodeValue), (node.nodeValue = \"\"))\n          : (node.nodeValue = node._stashedText || \"\"));\n    if (nextNode && 8 === nextNode.nodeType)\n      if (((node = nextNode.data), \"/$\" === node))\n        if (0 === suspenseInstance) break;\n        else suspenseInstance--;\n      else\n        (\"$\" !== node && \"$?\" !== node && \"$~\" !== node && \"$!\" !== node) ||\n          suspenseInstance++;\n    node = nextNode;\n  } while (node);\n}\nfunction clearContainerSparingly(container) {\n  var nextNode = container.firstChild;\n  nextNode && 10 === nextNode.nodeType && (nextNode = nextNode.nextSibling);\n  for (; nextNode; ) {\n    var node = nextNode;\n    nextNode = nextNode.nextSibling;\n    switch (node.nodeName) {\n      case \"HTML\":\n      case \"HEAD\":\n      case \"BODY\":\n        clearContainerSparingly(node);\n        detachDeletedInstance(node);\n        continue;\n      case \"SCRIPT\":\n      case \"STYLE\":\n        continue;\n      case \"LINK\":\n        if (\"stylesheet\" === node.rel.toLowerCase()) continue;\n    }\n    container.removeChild(node);\n  }\n}\nfunction canHydrateInstance(instance, type, props, inRootOrSingleton) {\n  for (; 1 === instance.nodeType; ) {\n    var anyProps = props;\n    if (instance.nodeName.toLowerCase() !== type.toLowerCase()) {\n      if (\n        !inRootOrSingleton &&\n        (\"INPUT\" !== instance.nodeName || \"hidden\" !== instance.type)\n      )\n        break;\n    } else if (!inRootOrSingleton)\n      if (\"input\" === type && \"hidden\" === instance.type) {\n        var name = null == anyProps.name ? null : \"\" + anyProps.name;\n        if (\n          \"hidden\" === anyProps.type &&\n          instance.getAttribute(\"name\") === name\n        )\n          return instance;\n      } else return instance;\n    else if (!instance[internalHoistableMarker])\n      switch (type) {\n        case \"meta\":\n          if (!instance.hasAttribute(\"itemprop\")) break;\n          return instance;\n        case \"link\":\n          name = instance.getAttribute(\"rel\");\n          if (\"stylesheet\" === name && instance.hasAttribute(\"data-precedence\"))\n            break;\n          else if (\n            name !== anyProps.rel ||\n            instance.getAttribute(\"href\") !==\n              (null == anyProps.href || \"\" === anyProps.href\n                ? null\n                : anyProps.href) ||\n            instance.getAttribute(\"crossorigin\") !==\n              (null == anyProps.crossOrigin ? null : anyProps.crossOrigin) ||\n            instance.getAttribute(\"title\") !==\n              (null == anyProps.title ? null : anyProps.title)\n          )\n            break;\n          return instance;\n        case \"style\":\n          if (instance.hasAttribute(\"data-precedence\")) break;\n          return instance;\n        case \"script\":\n          name = instance.getAttribute(\"src\");\n          if (\n            (name !== (null == anyProps.src ? null : anyProps.src) ||\n              instance.getAttribute(\"type\") !==\n                (null == anyProps.type ? null : anyProps.type) ||\n              instance.getAttribute(\"crossorigin\") !==\n                (null == anyProps.crossOrigin ? null : anyProps.crossOrigin)) &&\n            name &&\n            instance.hasAttribute(\"async\") &&\n            !instance.hasAttribute(\"itemprop\")\n          )\n            break;\n          return instance;\n        default:\n          return instance;\n      }\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) break;\n  }\n  return null;\n}\nfunction canHydrateTextInstance(instance, text, inRootOrSingleton) {\n  if (\"\" === text) return null;\n  for (; 3 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction canHydrateHydrationBoundary(instance, inRootOrSingleton) {\n  for (; 8 !== instance.nodeType; ) {\n    if (\n      (1 !== instance.nodeType ||\n        \"INPUT\" !== instance.nodeName ||\n        \"hidden\" !== instance.type) &&\n      !inRootOrSingleton\n    )\n      return null;\n    instance = getNextHydratable(instance.nextSibling);\n    if (null === instance) return null;\n  }\n  return instance;\n}\nfunction isSuspenseInstancePending(instance) {\n  return \"$?\" === instance.data || \"$~\" === instance.data;\n}\nfunction isSuspenseInstanceFallback(instance) {\n  return (\n    \"$!\" === instance.data ||\n    (\"$?\" === instance.data && \"loading\" !== instance.ownerDocument.readyState)\n  );\n}\nfunction registerSuspenseInstanceRetry(instance, callback) {\n  var ownerDocument = instance.ownerDocument;\n  if (\"$~\" === instance.data) instance._reactRetry = callback;\n  else if (\"$?\" !== instance.data || \"loading\" !== ownerDocument.readyState)\n    callback();\n  else {\n    var listener = function () {\n      callback();\n      ownerDocument.removeEventListener(\"DOMContentLoaded\", listener);\n    };\n    ownerDocument.addEventListener(\"DOMContentLoaded\", listener);\n    instance._reactRetry = listener;\n  }\n}\nfunction getNextHydratable(node) {\n  for (; null != node; node = node.nextSibling) {\n    var nodeType = node.nodeType;\n    if (1 === nodeType || 3 === nodeType) break;\n    if (8 === nodeType) {\n      nodeType = node.data;\n      if (\n        \"$\" === nodeType ||\n        \"$!\" === nodeType ||\n        \"$?\" === nodeType ||\n        \"$~\" === nodeType ||\n        \"&\" === nodeType ||\n        \"F!\" === nodeType ||\n        \"F\" === nodeType\n      )\n        break;\n      if (\"/$\" === nodeType || \"/&\" === nodeType) return null;\n    }\n  }\n  return node;\n}\nvar previousHydratableOnEnteringScopedSingleton = null;\nfunction getNextHydratableInstanceAfterHydrationBoundary(hydrationInstance) {\n  hydrationInstance = hydrationInstance.nextSibling;\n  for (var depth = 0; hydrationInstance; ) {\n    if (8 === hydrationInstance.nodeType) {\n      var data = hydrationInstance.data;\n      if (\"/$\" === data || \"/&\" === data) {\n        if (0 === depth)\n          return getNextHydratable(hydrationInstance.nextSibling);\n        depth--;\n      } else\n        (\"$\" !== data &&\n          \"$!\" !== data &&\n          \"$?\" !== data &&\n          \"$~\" !== data &&\n          \"&\" !== data) ||\n          depth++;\n    }\n    hydrationInstance = hydrationInstance.nextSibling;\n  }\n  return null;\n}\nfunction getParentHydrationBoundary(targetInstance) {\n  targetInstance = targetInstance.previousSibling;\n  for (var depth = 0; targetInstance; ) {\n    if (8 === targetInstance.nodeType) {\n      var data = targetInstance.data;\n      if (\n        \"$\" === data ||\n        \"$!\" === data ||\n        \"$?\" === data ||\n        \"$~\" === data ||\n        \"&\" === data\n      ) {\n        if (0 === depth) return targetInstance;\n        depth--;\n      } else (\"/$\" !== data && \"/&\" !== data) || depth++;\n    }\n    targetInstance = targetInstance.previousSibling;\n  }\n  return null;\n}\nfunction resolveSingletonInstance(type, props, rootContainerInstance) {\n  props = getOwnerDocumentFromRootContainer(rootContainerInstance);\n  switch (type) {\n    case \"html\":\n      type = props.documentElement;\n      if (!type) throw Error(formatProdErrorMessage(452));\n      return type;\n    case \"head\":\n      type = props.head;\n      if (!type) throw Error(formatProdErrorMessage(453));\n      return type;\n    case \"body\":\n      type = props.body;\n      if (!type) throw Error(formatProdErrorMessage(454));\n      return type;\n    default:\n      throw Error(formatProdErrorMessage(451));\n  }\n}\nfunction releaseSingletonInstance(instance) {\n  for (var attributes = instance.attributes; attributes.length; )\n    instance.removeAttributeNode(attributes[0]);\n  detachDeletedInstance(instance);\n}\nvar preloadPropsMap = new Map(),\n  preconnectsSet = new Set();\nfunction getHoistableRoot(container) {\n  return \"function\" === typeof container.getRootNode\n    ? container.getRootNode()\n    : 9 === container.nodeType\n      ? container\n      : container.ownerDocument;\n}\nvar previousDispatcher = ReactDOMSharedInternals.d;\nReactDOMSharedInternals.d = {\n  f: flushSyncWork,\n  r: requestFormReset,\n  D: prefetchDNS,\n  C: preconnect,\n  L: preload,\n  m: preloadModule,\n  X: preinitScript,\n  S: preinitStyle,\n  M: preinitModuleScript\n};\nfunction flushSyncWork() {\n  var previousWasRendering = previousDispatcher.f(),\n    wasRendering = flushSyncWork$1();\n  return previousWasRendering || wasRendering;\n}\nfunction requestFormReset(form) {\n  var formInst = getInstanceFromNode(form);\n  null !== formInst && 5 === formInst.tag && \"form\" === formInst.type\n    ? requestFormReset$1(formInst)\n    : previousDispatcher.r(form);\n}\nvar globalDocument = \"undefined\" === typeof document ? null : document;\nfunction preconnectAs(rel, href, crossOrigin) {\n  var ownerDocument = globalDocument;\n  if (ownerDocument && \"string\" === typeof href && href) {\n    var limitedEscapedHref =\n      escapeSelectorAttributeValueInsideDoubleQuotes(href);\n    limitedEscapedHref =\n      'link[rel=\"' + rel + '\"][href=\"' + limitedEscapedHref + '\"]';\n    \"string\" === typeof crossOrigin &&\n      (limitedEscapedHref += '[crossorigin=\"' + crossOrigin + '\"]');\n    preconnectsSet.has(limitedEscapedHref) ||\n      (preconnectsSet.add(limitedEscapedHref),\n      (rel = { rel: rel, crossOrigin: crossOrigin, href: href }),\n      null === ownerDocument.querySelector(limitedEscapedHref) &&\n        ((href = ownerDocument.createElement(\"link\")),\n        setInitialProperties(href, \"link\", rel),\n        markNodeAsHoistable(href),\n        ownerDocument.head.appendChild(href)));\n  }\n}\nfunction prefetchDNS(href) {\n  previousDispatcher.D(href);\n  preconnectAs(\"dns-prefetch\", href, null);\n}\nfunction preconnect(href, crossOrigin) {\n  previousDispatcher.C(href, crossOrigin);\n  preconnectAs(\"preconnect\", href, crossOrigin);\n}\nfunction preload(href, as, options) {\n  previousDispatcher.L(href, as, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href && as) {\n    var preloadSelector =\n      'link[rel=\"preload\"][as=\"' +\n      escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n      '\"]';\n    \"image\" === as\n      ? options && options.imageSrcSet\n        ? ((preloadSelector +=\n            '[imagesrcset=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(\n              options.imageSrcSet\n            ) +\n            '\"]'),\n          \"string\" === typeof options.imageSizes &&\n            (preloadSelector +=\n              '[imagesizes=\"' +\n              escapeSelectorAttributeValueInsideDoubleQuotes(\n                options.imageSizes\n              ) +\n              '\"]'))\n        : (preloadSelector +=\n            '[href=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n            '\"]')\n      : (preloadSelector +=\n          '[href=\"' +\n          escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n          '\"]');\n    var key = preloadSelector;\n    switch (as) {\n      case \"style\":\n        key = getStyleKey(href);\n        break;\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    preloadPropsMap.has(key) ||\n      ((href = assign(\n        {\n          rel: \"preload\",\n          href:\n            \"image\" === as && options && options.imageSrcSet ? void 0 : href,\n          as: as\n        },\n        options\n      )),\n      preloadPropsMap.set(key, href),\n      null !== ownerDocument.querySelector(preloadSelector) ||\n        (\"style\" === as &&\n          ownerDocument.querySelector(getStylesheetSelectorFromKey(key))) ||\n        (\"script\" === as &&\n          ownerDocument.querySelector(getScriptSelectorFromKey(key))) ||\n        ((as = ownerDocument.createElement(\"link\")),\n        setInitialProperties(as, \"link\", href),\n        markNodeAsHoistable(as),\n        ownerDocument.head.appendChild(as)));\n  }\n}\nfunction preloadModule(href, options) {\n  previousDispatcher.m(href, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var as = options && \"string\" === typeof options.as ? options.as : \"script\",\n      preloadSelector =\n        'link[rel=\"modulepreload\"][as=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(as) +\n        '\"][href=\"' +\n        escapeSelectorAttributeValueInsideDoubleQuotes(href) +\n        '\"]',\n      key = preloadSelector;\n    switch (as) {\n      case \"audioworklet\":\n      case \"paintworklet\":\n      case \"serviceworker\":\n      case \"sharedworker\":\n      case \"worker\":\n      case \"script\":\n        key = getScriptKey(href);\n    }\n    if (\n      !preloadPropsMap.has(key) &&\n      ((href = assign({ rel: \"modulepreload\", href: href }, options)),\n      preloadPropsMap.set(key, href),\n      null === ownerDocument.querySelector(preloadSelector))\n    ) {\n      switch (as) {\n        case \"audioworklet\":\n        case \"paintworklet\":\n        case \"serviceworker\":\n        case \"sharedworker\":\n        case \"worker\":\n        case \"script\":\n          if (ownerDocument.querySelector(getScriptSelectorFromKey(key)))\n            return;\n      }\n      as = ownerDocument.createElement(\"link\");\n      setInitialProperties(as, \"link\", href);\n      markNodeAsHoistable(as);\n      ownerDocument.head.appendChild(as);\n    }\n  }\n}\nfunction preinitStyle(href, precedence, options) {\n  previousDispatcher.S(href, precedence, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && href) {\n    var styles = getResourcesFromRoot(ownerDocument).hoistableStyles,\n      key = getStyleKey(href);\n    precedence = precedence || \"default\";\n    var resource = styles.get(key);\n    if (!resource) {\n      var state = { loading: 0, preload: null };\n      if (\n        (resource = ownerDocument.querySelector(\n          getStylesheetSelectorFromKey(key)\n        ))\n      )\n        state.loading = 5;\n      else {\n        href = assign(\n          { rel: \"stylesheet\", href: href, \"data-precedence\": precedence },\n          options\n        );\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForStylesheet(href, options);\n        var link = (resource = ownerDocument.createElement(\"link\"));\n        markNodeAsHoistable(link);\n        setInitialProperties(link, \"link\", href);\n        link._p = new Promise(function (resolve, reject) {\n          link.onload = resolve;\n          link.onerror = reject;\n        });\n        link.addEventListener(\"load\", function () {\n          state.loading |= 1;\n        });\n        link.addEventListener(\"error\", function () {\n          state.loading |= 2;\n        });\n        state.loading |= 4;\n        insertStylesheet(resource, precedence, ownerDocument);\n      }\n      resource = {\n        type: \"stylesheet\",\n        instance: resource,\n        count: 1,\n        state: state\n      };\n      styles.set(key, resource);\n    }\n  }\n}\nfunction preinitScript(src, options) {\n  previousDispatcher.X(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0 }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction preinitModuleScript(src, options) {\n  previousDispatcher.M(src, options);\n  var ownerDocument = globalDocument;\n  if (ownerDocument && src) {\n    var scripts = getResourcesFromRoot(ownerDocument).hoistableScripts,\n      key = getScriptKey(src),\n      resource = scripts.get(key);\n    resource ||\n      ((resource = ownerDocument.querySelector(getScriptSelectorFromKey(key))),\n      resource ||\n        ((src = assign({ src: src, async: !0, type: \"module\" }, options)),\n        (options = preloadPropsMap.get(key)) &&\n          adoptPreloadPropsForScript(src, options),\n        (resource = ownerDocument.createElement(\"script\")),\n        markNodeAsHoistable(resource),\n        setInitialProperties(resource, \"link\", src),\n        ownerDocument.head.appendChild(resource)),\n      (resource = {\n        type: \"script\",\n        instance: resource,\n        count: 1,\n        state: null\n      }),\n      scripts.set(key, resource));\n  }\n}\nfunction getResource(type, currentProps, pendingProps, currentResource) {\n  var JSCompiler_inline_result = (JSCompiler_inline_result =\n    rootInstanceStackCursor.current)\n    ? getHoistableRoot(JSCompiler_inline_result)\n    : null;\n  if (!JSCompiler_inline_result) throw Error(formatProdErrorMessage(446));\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return null;\n    case \"style\":\n      return \"string\" === typeof pendingProps.precedence &&\n        \"string\" === typeof pendingProps.href\n        ? ((currentProps = getStyleKey(pendingProps.href)),\n          (pendingProps = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles),\n          (currentResource = pendingProps.get(currentProps)),\n          currentResource ||\n            ((currentResource = {\n              type: \"style\",\n              instance: null,\n              count: 0,\n              state: null\n            }),\n            pendingProps.set(currentProps, currentResource)),\n          currentResource)\n        : { type: \"void\", instance: null, count: 0, state: null };\n    case \"link\":\n      if (\n        \"stylesheet\" === pendingProps.rel &&\n        \"string\" === typeof pendingProps.href &&\n        \"string\" === typeof pendingProps.precedence\n      ) {\n        type = getStyleKey(pendingProps.href);\n        var styles$243 = getResourcesFromRoot(\n            JSCompiler_inline_result\n          ).hoistableStyles,\n          resource$244 = styles$243.get(type);\n        resource$244 ||\n          ((JSCompiler_inline_result =\n            JSCompiler_inline_result.ownerDocument || JSCompiler_inline_result),\n          (resource$244 = {\n            type: \"stylesheet\",\n            instance: null,\n            count: 0,\n            state: { loading: 0, preload: null }\n          }),\n          styles$243.set(type, resource$244),\n          (styles$243 = JSCompiler_inline_result.querySelector(\n            getStylesheetSelectorFromKey(type)\n          )) &&\n            !styles$243._p &&\n            ((resource$244.instance = styles$243),\n            (resource$244.state.loading = 5)),\n          preloadPropsMap.has(type) ||\n            ((pendingProps = {\n              rel: \"preload\",\n              as: \"style\",\n              href: pendingProps.href,\n              crossOrigin: pendingProps.crossOrigin,\n              integrity: pendingProps.integrity,\n              media: pendingProps.media,\n              hrefLang: pendingProps.hrefLang,\n              referrerPolicy: pendingProps.referrerPolicy\n            }),\n            preloadPropsMap.set(type, pendingProps),\n            styles$243 ||\n              preloadStylesheet(\n                JSCompiler_inline_result,\n                type,\n                pendingProps,\n                resource$244.state\n              )));\n        if (currentProps && null === currentResource)\n          throw Error(formatProdErrorMessage(528, \"\"));\n        return resource$244;\n      }\n      if (currentProps && null !== currentResource)\n        throw Error(formatProdErrorMessage(529, \"\"));\n      return null;\n    case \"script\":\n      return (\n        (currentProps = pendingProps.async),\n        (pendingProps = pendingProps.src),\n        \"string\" === typeof pendingProps &&\n        currentProps &&\n        \"function\" !== typeof currentProps &&\n        \"symbol\" !== typeof currentProps\n          ? ((currentProps = getScriptKey(pendingProps)),\n            (pendingProps = getResourcesFromRoot(\n              JSCompiler_inline_result\n            ).hoistableScripts),\n            (currentResource = pendingProps.get(currentProps)),\n            currentResource ||\n              ((currentResource = {\n                type: \"script\",\n                instance: null,\n                count: 0,\n                state: null\n              }),\n              pendingProps.set(currentProps, currentResource)),\n            currentResource)\n          : { type: \"void\", instance: null, count: 0, state: null }\n      );\n    default:\n      throw Error(formatProdErrorMessage(444, type));\n  }\n}\nfunction getStyleKey(href) {\n  return 'href=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(href) + '\"';\n}\nfunction getStylesheetSelectorFromKey(key) {\n  return 'link[rel=\"stylesheet\"][' + key + \"]\";\n}\nfunction stylesheetPropsFromRawProps(rawProps) {\n  return assign({}, rawProps, {\n    \"data-precedence\": rawProps.precedence,\n    precedence: null\n  });\n}\nfunction preloadStylesheet(ownerDocument, key, preloadProps, state) {\n  ownerDocument.querySelector('link[rel=\"preload\"][as=\"style\"][' + key + \"]\")\n    ? (state.loading = 1)\n    : ((key = ownerDocument.createElement(\"link\")),\n      (state.preload = key),\n      key.addEventListener(\"load\", function () {\n        return (state.loading |= 1);\n      }),\n      key.addEventListener(\"error\", function () {\n        return (state.loading |= 2);\n      }),\n      setInitialProperties(key, \"link\", preloadProps),\n      markNodeAsHoistable(key),\n      ownerDocument.head.appendChild(key));\n}\nfunction getScriptKey(src) {\n  return '[src=\"' + escapeSelectorAttributeValueInsideDoubleQuotes(src) + '\"]';\n}\nfunction getScriptSelectorFromKey(key) {\n  return \"script[async]\" + key;\n}\nfunction acquireResource(hoistableRoot, resource, props) {\n  resource.count++;\n  if (null === resource.instance)\n    switch (resource.type) {\n      case \"style\":\n        var instance = hoistableRoot.querySelector(\n          'style[data-href~=\"' +\n            escapeSelectorAttributeValueInsideDoubleQuotes(props.href) +\n            '\"]'\n        );\n        if (instance)\n          return (\n            (resource.instance = instance),\n            markNodeAsHoistable(instance),\n            instance\n          );\n        var styleProps = assign({}, props, {\n          \"data-href\": props.href,\n          \"data-precedence\": props.precedence,\n          href: null,\n          precedence: null\n        });\n        instance = (hoistableRoot.ownerDocument || hoistableRoot).createElement(\n          \"style\"\n        );\n        markNodeAsHoistable(instance);\n        setInitialProperties(instance, \"style\", styleProps);\n        insertStylesheet(instance, props.precedence, hoistableRoot);\n        return (resource.instance = instance);\n      case \"stylesheet\":\n        styleProps = getStyleKey(props.href);\n        var instance$249 = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(styleProps)\n        );\n        if (instance$249)\n          return (\n            (resource.state.loading |= 4),\n            (resource.instance = instance$249),\n            markNodeAsHoistable(instance$249),\n            instance$249\n          );\n        instance = stylesheetPropsFromRawProps(props);\n        (styleProps = preloadPropsMap.get(styleProps)) &&\n          adoptPreloadPropsForStylesheet(instance, styleProps);\n        instance$249 = (\n          hoistableRoot.ownerDocument || hoistableRoot\n        ).createElement(\"link\");\n        markNodeAsHoistable(instance$249);\n        var linkInstance = instance$249;\n        linkInstance._p = new Promise(function (resolve, reject) {\n          linkInstance.onload = resolve;\n          linkInstance.onerror = reject;\n        });\n        setInitialProperties(instance$249, \"link\", instance);\n        resource.state.loading |= 4;\n        insertStylesheet(instance$249, props.precedence, hoistableRoot);\n        return (resource.instance = instance$249);\n      case \"script\":\n        instance$249 = getScriptKey(props.src);\n        if (\n          (styleProps = hoistableRoot.querySelector(\n            getScriptSelectorFromKey(instance$249)\n          ))\n        )\n          return (\n            (resource.instance = styleProps),\n            markNodeAsHoistable(styleProps),\n            styleProps\n          );\n        instance = props;\n        if ((styleProps = preloadPropsMap.get(instance$249)))\n          (instance = assign({}, props)),\n            adoptPreloadPropsForScript(instance, styleProps);\n        hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n        styleProps = hoistableRoot.createElement(\"script\");\n        markNodeAsHoistable(styleProps);\n        setInitialProperties(styleProps, \"link\", instance);\n        hoistableRoot.head.appendChild(styleProps);\n        return (resource.instance = styleProps);\n      case \"void\":\n        return null;\n      default:\n        throw Error(formatProdErrorMessage(443, resource.type));\n    }\n  else\n    \"stylesheet\" === resource.type &&\n      0 === (resource.state.loading & 4) &&\n      ((instance = resource.instance),\n      (resource.state.loading |= 4),\n      insertStylesheet(instance, props.precedence, hoistableRoot));\n  return resource.instance;\n}\nfunction insertStylesheet(instance, precedence, root) {\n  for (\n    var nodes = root.querySelectorAll(\n        'link[rel=\"stylesheet\"][data-precedence],style[data-precedence]'\n      ),\n      last = nodes.length ? nodes[nodes.length - 1] : null,\n      prior = last,\n      i = 0;\n    i < nodes.length;\n    i++\n  ) {\n    var node = nodes[i];\n    if (node.dataset.precedence === precedence) prior = node;\n    else if (prior !== last) break;\n  }\n  prior\n    ? prior.parentNode.insertBefore(instance, prior.nextSibling)\n    : ((precedence = 9 === root.nodeType ? root.head : root),\n      precedence.insertBefore(instance, precedence.firstChild));\n}\nfunction adoptPreloadPropsForStylesheet(stylesheetProps, preloadProps) {\n  null == stylesheetProps.crossOrigin &&\n    (stylesheetProps.crossOrigin = preloadProps.crossOrigin);\n  null == stylesheetProps.referrerPolicy &&\n    (stylesheetProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == stylesheetProps.title && (stylesheetProps.title = preloadProps.title);\n}\nfunction adoptPreloadPropsForScript(scriptProps, preloadProps) {\n  null == scriptProps.crossOrigin &&\n    (scriptProps.crossOrigin = preloadProps.crossOrigin);\n  null == scriptProps.referrerPolicy &&\n    (scriptProps.referrerPolicy = preloadProps.referrerPolicy);\n  null == scriptProps.integrity &&\n    (scriptProps.integrity = preloadProps.integrity);\n}\nvar tagCaches = null;\nfunction getHydratableHoistableCache(type, keyAttribute, ownerDocument) {\n  if (null === tagCaches) {\n    var cache = new Map();\n    var caches = (tagCaches = new Map());\n    caches.set(ownerDocument, cache);\n  } else\n    (caches = tagCaches),\n      (cache = caches.get(ownerDocument)),\n      cache || ((cache = new Map()), caches.set(ownerDocument, cache));\n  if (cache.has(type)) return cache;\n  cache.set(type, null);\n  ownerDocument = ownerDocument.getElementsByTagName(type);\n  for (caches = 0; caches < ownerDocument.length; caches++) {\n    var node = ownerDocument[caches];\n    if (\n      !(\n        node[internalHoistableMarker] ||\n        node[internalInstanceKey] ||\n        (\"link\" === type && \"stylesheet\" === node.getAttribute(\"rel\"))\n      ) &&\n      \"http://www.w3.org/2000/svg\" !== node.namespaceURI\n    ) {\n      var nodeKey = node.getAttribute(keyAttribute) || \"\";\n      nodeKey = type + nodeKey;\n      var existing = cache.get(nodeKey);\n      existing ? existing.push(node) : cache.set(nodeKey, [node]);\n    }\n  }\n  return cache;\n}\nfunction mountHoistable(hoistableRoot, type, instance) {\n  hoistableRoot = hoistableRoot.ownerDocument || hoistableRoot;\n  hoistableRoot.head.insertBefore(\n    instance,\n    \"title\" === type ? hoistableRoot.querySelector(\"head > title\") : null\n  );\n}\nfunction isHostHoistableType(type, props, hostContext) {\n  if (1 === hostContext || null != props.itemProp) return !1;\n  switch (type) {\n    case \"meta\":\n    case \"title\":\n      return !0;\n    case \"style\":\n      if (\n        \"string\" !== typeof props.precedence ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href\n      )\n        break;\n      return !0;\n    case \"link\":\n      if (\n        \"string\" !== typeof props.rel ||\n        \"string\" !== typeof props.href ||\n        \"\" === props.href ||\n        props.onLoad ||\n        props.onError\n      )\n        break;\n      switch (props.rel) {\n        case \"stylesheet\":\n          return (\n            (type = props.disabled),\n            \"string\" === typeof props.precedence && null == type\n          );\n        default:\n          return !0;\n      }\n    case \"script\":\n      if (\n        props.async &&\n        \"function\" !== typeof props.async &&\n        \"symbol\" !== typeof props.async &&\n        !props.onLoad &&\n        !props.onError &&\n        props.src &&\n        \"string\" === typeof props.src\n      )\n        return !0;\n  }\n  return !1;\n}\nfunction preloadResource(resource) {\n  return \"stylesheet\" === resource.type && 0 === (resource.state.loading & 3)\n    ? !1\n    : !0;\n}\nfunction suspendResource(state, hoistableRoot, resource, props) {\n  if (\n    \"stylesheet\" === resource.type &&\n    (\"string\" !== typeof props.media ||\n      !1 !== matchMedia(props.media).matches) &&\n    0 === (resource.state.loading & 4)\n  ) {\n    if (null === resource.instance) {\n      var key = getStyleKey(props.href),\n        instance = hoistableRoot.querySelector(\n          getStylesheetSelectorFromKey(key)\n        );\n      if (instance) {\n        hoistableRoot = instance._p;\n        null !== hoistableRoot &&\n          \"object\" === typeof hoistableRoot &&\n          \"function\" === typeof hoistableRoot.then &&\n          (state.count++,\n          (state = onUnsuspend.bind(state)),\n          hoistableRoot.then(state, state));\n        resource.state.loading |= 4;\n        resource.instance = instance;\n        markNodeAsHoistable(instance);\n        return;\n      }\n      instance = hoistableRoot.ownerDocument || hoistableRoot;\n      props = stylesheetPropsFromRawProps(props);\n      (key = preloadPropsMap.get(key)) &&\n        adoptPreloadPropsForStylesheet(props, key);\n      instance = instance.createElement(\"link\");\n      markNodeAsHoistable(instance);\n      var linkInstance = instance;\n      linkInstance._p = new Promise(function (resolve, reject) {\n        linkInstance.onload = resolve;\n        linkInstance.onerror = reject;\n      });\n      setInitialProperties(instance, \"link\", props);\n      resource.instance = instance;\n    }\n    null === state.stylesheets && (state.stylesheets = new Map());\n    state.stylesheets.set(resource, hoistableRoot);\n    (hoistableRoot = resource.state.preload) &&\n      0 === (resource.state.loading & 3) &&\n      (state.count++,\n      (resource = onUnsuspend.bind(state)),\n      hoistableRoot.addEventListener(\"load\", resource),\n      hoistableRoot.addEventListener(\"error\", resource));\n  }\n}\nvar estimatedBytesWithinLimit = 0;\nfunction waitForCommitToBeReady(state, timeoutOffset) {\n  state.stylesheets &&\n    0 === state.count &&\n    insertSuspendedStylesheets(state, state.stylesheets);\n  return 0 < state.count || 0 < state.imgCount\n    ? function (commit) {\n        var stylesheetTimer = setTimeout(function () {\n          state.stylesheets &&\n            insertSuspendedStylesheets(state, state.stylesheets);\n          if (state.unsuspend) {\n            var unsuspend = state.unsuspend;\n            state.unsuspend = null;\n            unsuspend();\n          }\n        }, 6e4 + timeoutOffset);\n        0 < state.imgBytes &&\n          0 === estimatedBytesWithinLimit &&\n          (estimatedBytesWithinLimit = 62500 * estimateBandwidth());\n        var imgTimer = setTimeout(\n          function () {\n            state.waitingForImages = !1;\n            if (\n              0 === state.count &&\n              (state.stylesheets &&\n                insertSuspendedStylesheets(state, state.stylesheets),\n              state.unsuspend)\n            ) {\n              var unsuspend = state.unsuspend;\n              state.unsuspend = null;\n              unsuspend();\n            }\n          },\n          (state.imgBytes > estimatedBytesWithinLimit ? 50 : 800) +\n            timeoutOffset\n        );\n        state.unsuspend = commit;\n        return function () {\n          state.unsuspend = null;\n          clearTimeout(stylesheetTimer);\n          clearTimeout(imgTimer);\n        };\n      }\n    : null;\n}\nfunction onUnsuspend() {\n  this.count--;\n  if (0 === this.count && (0 === this.imgCount || !this.waitingForImages))\n    if (this.stylesheets) insertSuspendedStylesheets(this, this.stylesheets);\n    else if (this.unsuspend) {\n      var unsuspend = this.unsuspend;\n      this.unsuspend = null;\n      unsuspend();\n    }\n}\nvar precedencesByRoot = null;\nfunction insertSuspendedStylesheets(state, resources) {\n  state.stylesheets = null;\n  null !== state.unsuspend &&\n    (state.count++,\n    (precedencesByRoot = new Map()),\n    resources.forEach(insertStylesheetIntoRoot, state),\n    (precedencesByRoot = null),\n    onUnsuspend.call(state));\n}\nfunction insertStylesheetIntoRoot(root, resource) {\n  if (!(resource.state.loading & 4)) {\n    var precedences = precedencesByRoot.get(root);\n    if (precedences) var last = precedences.get(null);\n    else {\n      precedences = new Map();\n      precedencesByRoot.set(root, precedences);\n      for (\n        var nodes = root.querySelectorAll(\n            \"link[data-precedence],style[data-precedence]\"\n          ),\n          i = 0;\n        i < nodes.length;\n        i++\n      ) {\n        var node = nodes[i];\n        if (\n          \"LINK\" === node.nodeName ||\n          \"not all\" !== node.getAttribute(\"media\")\n        )\n          precedences.set(node.dataset.precedence, node), (last = node);\n      }\n      last && precedences.set(null, last);\n    }\n    nodes = resource.instance;\n    node = nodes.getAttribute(\"data-precedence\");\n    i = precedences.get(node) || last;\n    i === last && precedences.set(null, nodes);\n    precedences.set(node, nodes);\n    this.count++;\n    last = onUnsuspend.bind(this);\n    nodes.addEventListener(\"load\", last);\n    nodes.addEventListener(\"error\", last);\n    i\n      ? i.parentNode.insertBefore(nodes, i.nextSibling)\n      : ((root = 9 === root.nodeType ? root.head : root),\n        root.insertBefore(nodes, root.firstChild));\n    resource.state.loading |= 4;\n  }\n}\nvar HostTransitionContext = {\n  $$typeof: REACT_CONTEXT_TYPE,\n  Provider: null,\n  Consumer: null,\n  _currentValue: sharedNotPendingObject,\n  _currentValue2: sharedNotPendingObject,\n  _threadCount: 0\n};\nfunction FiberRootNode(\n  containerInfo,\n  tag,\n  hydrate,\n  identifierPrefix,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  onDefaultTransitionIndicator,\n  formState\n) {\n  this.tag = 1;\n  this.containerInfo = containerInfo;\n  this.pingCache = this.current = this.pendingChildren = null;\n  this.timeoutHandle = -1;\n  this.callbackNode =\n    this.next =\n    this.pendingContext =\n    this.context =\n    this.cancelPendingCommit =\n      null;\n  this.callbackPriority = 0;\n  this.expirationTimes = createLaneMap(-1);\n  this.entangledLanes =\n    this.shellSuspendCounter =\n    this.errorRecoveryDisabledLanes =\n    this.expiredLanes =\n    this.warmLanes =\n    this.pingedLanes =\n    this.suspendedLanes =\n    this.pendingLanes =\n      0;\n  this.entanglements = createLaneMap(0);\n  this.hiddenUpdates = createLaneMap(null);\n  this.identifierPrefix = identifierPrefix;\n  this.onUncaughtError = onUncaughtError;\n  this.onCaughtError = onCaughtError;\n  this.onRecoverableError = onRecoverableError;\n  this.pooledCache = null;\n  this.pooledCacheLanes = 0;\n  this.formState = formState;\n  this.incompleteTransitions = new Map();\n}\nfunction createFiberRoot(\n  containerInfo,\n  tag,\n  hydrate,\n  initialChildren,\n  hydrationCallbacks,\n  isStrictMode,\n  identifierPrefix,\n  formState,\n  onUncaughtError,\n  onCaughtError,\n  onRecoverableError,\n  onDefaultTransitionIndicator\n) {\n  containerInfo = new FiberRootNode(\n    containerInfo,\n    tag,\n    hydrate,\n    identifierPrefix,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    onDefaultTransitionIndicator,\n    formState\n  );\n  tag = 1;\n  !0 === isStrictMode && (tag |= 24);\n  isStrictMode = createFiberImplClass(3, null, null, tag);\n  containerInfo.current = isStrictMode;\n  isStrictMode.stateNode = containerInfo;\n  tag = createCache();\n  tag.refCount++;\n  containerInfo.pooledCache = tag;\n  tag.refCount++;\n  isStrictMode.memoizedState = {\n    element: initialChildren,\n    isDehydrated: hydrate,\n    cache: tag\n  };\n  initializeUpdateQueue(isStrictMode);\n  return containerInfo;\n}\nfunction getContextForSubtree(parentComponent) {\n  if (!parentComponent) return emptyContextObject;\n  parentComponent = emptyContextObject;\n  return parentComponent;\n}\nfunction updateContainerImpl(\n  rootFiber,\n  lane,\n  element,\n  container,\n  parentComponent,\n  callback\n) {\n  parentComponent = getContextForSubtree(parentComponent);\n  null === container.context\n    ? (container.context = parentComponent)\n    : (container.pendingContext = parentComponent);\n  container = createUpdate(lane);\n  container.payload = { element: element };\n  callback = void 0 === callback ? null : callback;\n  null !== callback && (container.callback = callback);\n  element = enqueueUpdate(rootFiber, container, lane);\n  null !== element &&\n    (scheduleUpdateOnFiber(element, rootFiber, lane),\n    entangleTransitions(element, rootFiber, lane));\n}\nfunction markRetryLaneImpl(fiber, retryLane) {\n  fiber = fiber.memoizedState;\n  if (null !== fiber && null !== fiber.dehydrated) {\n    var a = fiber.retryLane;\n    fiber.retryLane = 0 !== a && a < retryLane ? a : retryLane;\n  }\n}\nfunction markRetryLaneIfNotHydrated(fiber, retryLane) {\n  markRetryLaneImpl(fiber, retryLane);\n  (fiber = fiber.alternate) && markRetryLaneImpl(fiber, retryLane);\n}\nfunction attemptContinuousHydration(fiber) {\n  if (13 === fiber.tag || 31 === fiber.tag) {\n    var root = enqueueConcurrentRenderForLane(fiber, 67108864);\n    null !== root && scheduleUpdateOnFiber(root, fiber, 67108864);\n    markRetryLaneIfNotHydrated(fiber, 67108864);\n  }\n}\nfunction attemptHydrationAtCurrentPriority(fiber) {\n  if (13 === fiber.tag || 31 === fiber.tag) {\n    var lane = requestUpdateLane();\n    lane = getBumpedLaneForHydrationByLane(lane);\n    var root = enqueueConcurrentRenderForLane(fiber, lane);\n    null !== root && scheduleUpdateOnFiber(root, fiber, lane);\n    markRetryLaneIfNotHydrated(fiber, lane);\n  }\n}\nvar _enabled = !0;\nfunction dispatchDiscreteEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 2),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchContinuousEvent(\n  domEventName,\n  eventSystemFlags,\n  container,\n  nativeEvent\n) {\n  var prevTransition = ReactSharedInternals.T;\n  ReactSharedInternals.T = null;\n  var previousPriority = ReactDOMSharedInternals.p;\n  try {\n    (ReactDOMSharedInternals.p = 8),\n      dispatchEvent(domEventName, eventSystemFlags, container, nativeEvent);\n  } finally {\n    (ReactDOMSharedInternals.p = previousPriority),\n      (ReactSharedInternals.T = prevTransition);\n  }\n}\nfunction dispatchEvent(\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (_enabled) {\n    var blockedOn = findInstanceBlockingEvent(nativeEvent);\n    if (null === blockedOn)\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        return_targetInst,\n        targetContainer\n      ),\n        clearIfContinuousEvent(domEventName, nativeEvent);\n    else if (\n      queueIfContinuousEvent(\n        blockedOn,\n        domEventName,\n        eventSystemFlags,\n        targetContainer,\n        nativeEvent\n      )\n    )\n      nativeEvent.stopPropagation();\n    else if (\n      (clearIfContinuousEvent(domEventName, nativeEvent),\n      eventSystemFlags & 4 &&\n        -1 < discreteReplayableEvents.indexOf(domEventName))\n    ) {\n      for (; null !== blockedOn; ) {\n        var fiber = getInstanceFromNode(blockedOn);\n        if (null !== fiber)\n          switch (fiber.tag) {\n            case 3:\n              fiber = fiber.stateNode;\n              if (fiber.current.memoizedState.isDehydrated) {\n                var lanes = getHighestPriorityLanes(fiber.pendingLanes);\n                if (0 !== lanes) {\n                  var root = fiber;\n                  root.pendingLanes |= 2;\n                  for (root.entangledLanes |= 2; lanes; ) {\n                    var lane = 1 << (31 - clz32(lanes));\n                    root.entanglements[1] |= lane;\n                    lanes &= ~lane;\n                  }\n                  ensureRootIsScheduled(fiber);\n                  0 === (executionContext & 6) &&\n                    ((workInProgressRootRenderTargetTime = now() + 500),\n                    flushSyncWorkAcrossRoots_impl(0, !1));\n                }\n              }\n              break;\n            case 31:\n            case 13:\n              (root = enqueueConcurrentRenderForLane(fiber, 2)),\n                null !== root && scheduleUpdateOnFiber(root, fiber, 2),\n                flushSyncWork$1(),\n                markRetryLaneIfNotHydrated(fiber, 2);\n          }\n        fiber = findInstanceBlockingEvent(nativeEvent);\n        null === fiber &&\n          dispatchEventForPluginEventSystem(\n            domEventName,\n            eventSystemFlags,\n            nativeEvent,\n            return_targetInst,\n            targetContainer\n          );\n        if (fiber === blockedOn) break;\n        blockedOn = fiber;\n      }\n      null !== blockedOn && nativeEvent.stopPropagation();\n    } else\n      dispatchEventForPluginEventSystem(\n        domEventName,\n        eventSystemFlags,\n        nativeEvent,\n        null,\n        targetContainer\n      );\n  }\n}\nfunction findInstanceBlockingEvent(nativeEvent) {\n  nativeEvent = getEventTarget(nativeEvent);\n  return findInstanceBlockingTarget(nativeEvent);\n}\nvar return_targetInst = null;\nfunction findInstanceBlockingTarget(targetNode) {\n  return_targetInst = null;\n  targetNode = getClosestInstanceFromNode(targetNode);\n  if (null !== targetNode) {\n    var nearestMounted = getNearestMountedFiber(targetNode);\n    if (null === nearestMounted) targetNode = null;\n    else {\n      var tag = nearestMounted.tag;\n      if (13 === tag) {\n        targetNode = getSuspenseInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (31 === tag) {\n        targetNode = getActivityInstanceFromFiber(nearestMounted);\n        if (null !== targetNode) return targetNode;\n        targetNode = null;\n      } else if (3 === tag) {\n        if (nearestMounted.stateNode.current.memoizedState.isDehydrated)\n          return 3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        targetNode = null;\n      } else nearestMounted !== targetNode && (targetNode = null);\n    }\n  }\n  return_targetInst = targetNode;\n  return null;\n}\nfunction getEventPriority(domEventName) {\n  switch (domEventName) {\n    case \"beforetoggle\":\n    case \"cancel\":\n    case \"click\":\n    case \"close\":\n    case \"contextmenu\":\n    case \"copy\":\n    case \"cut\":\n    case \"auxclick\":\n    case \"dblclick\":\n    case \"dragend\":\n    case \"dragstart\":\n    case \"drop\":\n    case \"focusin\":\n    case \"focusout\":\n    case \"input\":\n    case \"invalid\":\n    case \"keydown\":\n    case \"keypress\":\n    case \"keyup\":\n    case \"mousedown\":\n    case \"mouseup\":\n    case \"paste\":\n    case \"pause\":\n    case \"play\":\n    case \"pointercancel\":\n    case \"pointerdown\":\n    case \"pointerup\":\n    case \"ratechange\":\n    case \"reset\":\n    case \"resize\":\n    case \"seeked\":\n    case \"submit\":\n    case \"toggle\":\n    case \"touchcancel\":\n    case \"touchend\":\n    case \"touchstart\":\n    case \"volumechange\":\n    case \"change\":\n    case \"selectionchange\":\n    case \"textInput\":\n    case \"compositionstart\":\n    case \"compositionend\":\n    case \"compositionupdate\":\n    case \"beforeblur\":\n    case \"afterblur\":\n    case \"beforeinput\":\n    case \"blur\":\n    case \"fullscreenchange\":\n    case \"focus\":\n    case \"hashchange\":\n    case \"popstate\":\n    case \"select\":\n    case \"selectstart\":\n      return 2;\n    case \"drag\":\n    case \"dragenter\":\n    case \"dragexit\":\n    case \"dragleave\":\n    case \"dragover\":\n    case \"mousemove\":\n    case \"mouseout\":\n    case \"mouseover\":\n    case \"pointermove\":\n    case \"pointerout\":\n    case \"pointerover\":\n    case \"scroll\":\n    case \"touchmove\":\n    case \"wheel\":\n    case \"mouseenter\":\n    case \"mouseleave\":\n    case \"pointerenter\":\n    case \"pointerleave\":\n      return 8;\n    case \"message\":\n      switch (getCurrentPriorityLevel()) {\n        case ImmediatePriority:\n          return 2;\n        case UserBlockingPriority:\n          return 8;\n        case NormalPriority$1:\n        case LowPriority:\n          return 32;\n        case IdlePriority:\n          return 268435456;\n        default:\n          return 32;\n      }\n    default:\n      return 32;\n  }\n}\nvar hasScheduledReplayAttempt = !1,\n  queuedFocus = null,\n  queuedDrag = null,\n  queuedMouse = null,\n  queuedPointers = new Map(),\n  queuedPointerCaptures = new Map(),\n  queuedExplicitHydrationTargets = [],\n  discreteReplayableEvents =\n    \"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset\".split(\n      \" \"\n    );\nfunction clearIfContinuousEvent(domEventName, nativeEvent) {\n  switch (domEventName) {\n    case \"focusin\":\n    case \"focusout\":\n      queuedFocus = null;\n      break;\n    case \"dragenter\":\n    case \"dragleave\":\n      queuedDrag = null;\n      break;\n    case \"mouseover\":\n    case \"mouseout\":\n      queuedMouse = null;\n      break;\n    case \"pointerover\":\n    case \"pointerout\":\n      queuedPointers.delete(nativeEvent.pointerId);\n      break;\n    case \"gotpointercapture\":\n    case \"lostpointercapture\":\n      queuedPointerCaptures.delete(nativeEvent.pointerId);\n  }\n}\nfunction accumulateOrCreateContinuousQueuedReplayableEvent(\n  existingQueuedEvent,\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  if (\n    null === existingQueuedEvent ||\n    existingQueuedEvent.nativeEvent !== nativeEvent\n  )\n    return (\n      (existingQueuedEvent = {\n        blockedOn: blockedOn,\n        domEventName: domEventName,\n        eventSystemFlags: eventSystemFlags,\n        nativeEvent: nativeEvent,\n        targetContainers: [targetContainer]\n      }),\n      null !== blockedOn &&\n        ((blockedOn = getInstanceFromNode(blockedOn)),\n        null !== blockedOn && attemptContinuousHydration(blockedOn)),\n      existingQueuedEvent\n    );\n  existingQueuedEvent.eventSystemFlags |= eventSystemFlags;\n  blockedOn = existingQueuedEvent.targetContainers;\n  null !== targetContainer &&\n    -1 === blockedOn.indexOf(targetContainer) &&\n    blockedOn.push(targetContainer);\n  return existingQueuedEvent;\n}\nfunction queueIfContinuousEvent(\n  blockedOn,\n  domEventName,\n  eventSystemFlags,\n  targetContainer,\n  nativeEvent\n) {\n  switch (domEventName) {\n    case \"focusin\":\n      return (\n        (queuedFocus = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedFocus,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"dragenter\":\n      return (\n        (queuedDrag = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedDrag,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"mouseover\":\n      return (\n        (queuedMouse = accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedMouse,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )),\n        !0\n      );\n    case \"pointerover\":\n      var pointerId = nativeEvent.pointerId;\n      queuedPointers.set(\n        pointerId,\n        accumulateOrCreateContinuousQueuedReplayableEvent(\n          queuedPointers.get(pointerId) || null,\n          blockedOn,\n          domEventName,\n          eventSystemFlags,\n          targetContainer,\n          nativeEvent\n        )\n      );\n      return !0;\n    case \"gotpointercapture\":\n      return (\n        (pointerId = nativeEvent.pointerId),\n        queuedPointerCaptures.set(\n          pointerId,\n          accumulateOrCreateContinuousQueuedReplayableEvent(\n            queuedPointerCaptures.get(pointerId) || null,\n            blockedOn,\n            domEventName,\n            eventSystemFlags,\n            targetContainer,\n            nativeEvent\n          )\n        ),\n        !0\n      );\n  }\n  return !1;\n}\nfunction attemptExplicitHydrationTarget(queuedTarget) {\n  var targetInst = getClosestInstanceFromNode(queuedTarget.target);\n  if (null !== targetInst) {\n    var nearestMounted = getNearestMountedFiber(targetInst);\n    if (null !== nearestMounted)\n      if (((targetInst = nearestMounted.tag), 13 === targetInst)) {\n        if (\n          ((targetInst = getSuspenseInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            attemptHydrationAtCurrentPriority(nearestMounted);\n          });\n          return;\n        }\n      } else if (31 === targetInst) {\n        if (\n          ((targetInst = getActivityInstanceFromFiber(nearestMounted)),\n          null !== targetInst)\n        ) {\n          queuedTarget.blockedOn = targetInst;\n          runWithPriority(queuedTarget.priority, function () {\n            attemptHydrationAtCurrentPriority(nearestMounted);\n          });\n          return;\n        }\n      } else if (\n        3 === targetInst &&\n        nearestMounted.stateNode.current.memoizedState.isDehydrated\n      ) {\n        queuedTarget.blockedOn =\n          3 === nearestMounted.tag\n            ? nearestMounted.stateNode.containerInfo\n            : null;\n        return;\n      }\n  }\n  queuedTarget.blockedOn = null;\n}\nfunction attemptReplayContinuousQueuedEvent(queuedEvent) {\n  if (null !== queuedEvent.blockedOn) return !1;\n  for (\n    var targetContainers = queuedEvent.targetContainers;\n    0 < targetContainers.length;\n\n  ) {\n    var nextBlockedOn = findInstanceBlockingEvent(queuedEvent.nativeEvent);\n    if (null === nextBlockedOn) {\n      nextBlockedOn = queuedEvent.nativeEvent;\n      var nativeEventClone = new nextBlockedOn.constructor(\n        nextBlockedOn.type,\n        nextBlockedOn\n      );\n      currentReplayingEvent = nativeEventClone;\n      nextBlockedOn.target.dispatchEvent(nativeEventClone);\n      currentReplayingEvent = null;\n    } else\n      return (\n        (targetContainers = getInstanceFromNode(nextBlockedOn)),\n        null !== targetContainers &&\n          attemptContinuousHydration(targetContainers),\n        (queuedEvent.blockedOn = nextBlockedOn),\n        !1\n      );\n    targetContainers.shift();\n  }\n  return !0;\n}\nfunction attemptReplayContinuousQueuedEventInMap(queuedEvent, key, map) {\n  attemptReplayContinuousQueuedEvent(queuedEvent) && map.delete(key);\n}\nfunction replayUnblockedEvents() {\n  hasScheduledReplayAttempt = !1;\n  null !== queuedFocus &&\n    attemptReplayContinuousQueuedEvent(queuedFocus) &&\n    (queuedFocus = null);\n  null !== queuedDrag &&\n    attemptReplayContinuousQueuedEvent(queuedDrag) &&\n    (queuedDrag = null);\n  null !== queuedMouse &&\n    attemptReplayContinuousQueuedEvent(queuedMouse) &&\n    (queuedMouse = null);\n  queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap);\n  queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap);\n}\nfunction scheduleCallbackIfUnblocked(queuedEvent, unblocked) {\n  queuedEvent.blockedOn === unblocked &&\n    ((queuedEvent.blockedOn = null),\n    hasScheduledReplayAttempt ||\n      ((hasScheduledReplayAttempt = !0),\n      Scheduler.unstable_scheduleCallback(\n        Scheduler.unstable_NormalPriority,\n        replayUnblockedEvents\n      )));\n}\nvar lastScheduledReplayQueue = null;\nfunction scheduleReplayQueueIfNeeded(formReplayingQueue) {\n  lastScheduledReplayQueue !== formReplayingQueue &&\n    ((lastScheduledReplayQueue = formReplayingQueue),\n    Scheduler.unstable_scheduleCallback(\n      Scheduler.unstable_NormalPriority,\n      function () {\n        lastScheduledReplayQueue === formReplayingQueue &&\n          (lastScheduledReplayQueue = null);\n        for (var i = 0; i < formReplayingQueue.length; i += 3) {\n          var form = formReplayingQueue[i],\n            submitterOrAction = formReplayingQueue[i + 1],\n            formData = formReplayingQueue[i + 2];\n          if (\"function\" !== typeof submitterOrAction)\n            if (null === findInstanceBlockingTarget(submitterOrAction || form))\n              continue;\n            else break;\n          var formInst = getInstanceFromNode(form);\n          null !== formInst &&\n            (formReplayingQueue.splice(i, 3),\n            (i -= 3),\n            startHostTransition(\n              formInst,\n              {\n                pending: !0,\n                data: formData,\n                method: form.method,\n                action: submitterOrAction\n              },\n              submitterOrAction,\n              formData\n            ));\n        }\n      }\n    ));\n}\nfunction retryIfBlockedOn(unblocked) {\n  function unblock(queuedEvent) {\n    return scheduleCallbackIfUnblocked(queuedEvent, unblocked);\n  }\n  null !== queuedFocus && scheduleCallbackIfUnblocked(queuedFocus, unblocked);\n  null !== queuedDrag && scheduleCallbackIfUnblocked(queuedDrag, unblocked);\n  null !== queuedMouse && scheduleCallbackIfUnblocked(queuedMouse, unblocked);\n  queuedPointers.forEach(unblock);\n  queuedPointerCaptures.forEach(unblock);\n  for (var i = 0; i < queuedExplicitHydrationTargets.length; i++) {\n    var queuedTarget = queuedExplicitHydrationTargets[i];\n    queuedTarget.blockedOn === unblocked && (queuedTarget.blockedOn = null);\n  }\n  for (\n    ;\n    0 < queuedExplicitHydrationTargets.length &&\n    ((i = queuedExplicitHydrationTargets[0]), null === i.blockedOn);\n\n  )\n    attemptExplicitHydrationTarget(i),\n      null === i.blockedOn && queuedExplicitHydrationTargets.shift();\n  i = (unblocked.ownerDocument || unblocked).$$reactFormReplay;\n  if (null != i)\n    for (queuedTarget = 0; queuedTarget < i.length; queuedTarget += 3) {\n      var form = i[queuedTarget],\n        submitterOrAction = i[queuedTarget + 1],\n        formProps = form[internalPropsKey] || null;\n      if (\"function\" === typeof submitterOrAction)\n        formProps || scheduleReplayQueueIfNeeded(i);\n      else if (formProps) {\n        var action = null;\n        if (submitterOrAction && submitterOrAction.hasAttribute(\"formAction\"))\n          if (\n            ((form = submitterOrAction),\n            (formProps = submitterOrAction[internalPropsKey] || null))\n          )\n            action = formProps.formAction;\n          else {\n            if (null !== findInstanceBlockingTarget(form)) continue;\n          }\n        else action = formProps.action;\n        \"function\" === typeof action\n          ? (i[queuedTarget + 1] = action)\n          : (i.splice(queuedTarget, 3), (queuedTarget -= 3));\n        scheduleReplayQueueIfNeeded(i);\n      }\n    }\n}\nfunction defaultOnDefaultTransitionIndicator() {\n  function handleNavigate(event) {\n    event.canIntercept &&\n      \"react-transition\" === event.info &&\n      event.intercept({\n        handler: function () {\n          return new Promise(function (resolve) {\n            return (pendingResolve = resolve);\n          });\n        },\n        focusReset: \"manual\",\n        scroll: \"manual\"\n      });\n  }\n  function handleNavigateComplete() {\n    null !== pendingResolve && (pendingResolve(), (pendingResolve = null));\n    isCancelled || setTimeout(startFakeNavigation, 20);\n  }\n  function startFakeNavigation() {\n    if (!isCancelled && !navigation.transition) {\n      var currentEntry = navigation.currentEntry;\n      currentEntry &&\n        null != currentEntry.url &&\n        navigation.navigate(currentEntry.url, {\n          state: currentEntry.getState(),\n          info: \"react-transition\",\n          history: \"replace\"\n        });\n    }\n  }\n  if (\"object\" === typeof navigation) {\n    var isCancelled = !1,\n      pendingResolve = null;\n    navigation.addEventListener(\"navigate\", handleNavigate);\n    navigation.addEventListener(\"navigatesuccess\", handleNavigateComplete);\n    navigation.addEventListener(\"navigateerror\", handleNavigateComplete);\n    setTimeout(startFakeNavigation, 100);\n    return function () {\n      isCancelled = !0;\n      navigation.removeEventListener(\"navigate\", handleNavigate);\n      navigation.removeEventListener(\"navigatesuccess\", handleNavigateComplete);\n      navigation.removeEventListener(\"navigateerror\", handleNavigateComplete);\n      null !== pendingResolve && (pendingResolve(), (pendingResolve = null));\n    };\n  }\n}\nfunction ReactDOMRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.render = ReactDOMRoot.prototype.render =\n  function (children) {\n    var root = this._internalRoot;\n    if (null === root) throw Error(formatProdErrorMessage(409));\n    var current = root.current,\n      lane = requestUpdateLane();\n    updateContainerImpl(current, lane, children, root, null, null);\n  };\nReactDOMHydrationRoot.prototype.unmount = ReactDOMRoot.prototype.unmount =\n  function () {\n    var root = this._internalRoot;\n    if (null !== root) {\n      this._internalRoot = null;\n      var container = root.containerInfo;\n      updateContainerImpl(root.current, 2, null, root, null, null);\n      flushSyncWork$1();\n      container[internalContainerInstanceKey] = null;\n    }\n  };\nfunction ReactDOMHydrationRoot(internalRoot) {\n  this._internalRoot = internalRoot;\n}\nReactDOMHydrationRoot.prototype.unstable_scheduleHydration = function (target) {\n  if (target) {\n    var updatePriority = resolveUpdatePriority();\n    target = { blockedOn: null, target: target, priority: updatePriority };\n    for (\n      var i = 0;\n      i < queuedExplicitHydrationTargets.length &&\n      0 !== updatePriority &&\n      updatePriority < queuedExplicitHydrationTargets[i].priority;\n      i++\n    );\n    queuedExplicitHydrationTargets.splice(i, 0, target);\n    0 === i && attemptExplicitHydrationTarget(target);\n  }\n};\nvar isomorphicReactPackageVersion$jscomp$inline_1840 = React.version;\nif (\n  \"19.2.3\" !==\n  isomorphicReactPackageVersion$jscomp$inline_1840\n)\n  throw Error(\n    formatProdErrorMessage(\n      527,\n      isomorphicReactPackageVersion$jscomp$inline_1840,\n      \"19.2.3\"\n    )\n  );\nReactDOMSharedInternals.findDOMNode = function (componentOrElement) {\n  var fiber = componentOrElement._reactInternals;\n  if (void 0 === fiber) {\n    if (\"function\" === typeof componentOrElement.render)\n      throw Error(formatProdErrorMessage(188));\n    componentOrElement = Object.keys(componentOrElement).join(\",\");\n    throw Error(formatProdErrorMessage(268, componentOrElement));\n  }\n  componentOrElement = findCurrentFiberUsingSlowPath(fiber);\n  componentOrElement =\n    null !== componentOrElement\n      ? findCurrentHostFiberImpl(componentOrElement)\n      : null;\n  componentOrElement =\n    null === componentOrElement ? null : componentOrElement.stateNode;\n  return componentOrElement;\n};\nvar internals$jscomp$inline_2347 = {\n  bundleType: 0,\n  version: \"19.2.3\",\n  rendererPackageName: \"react-dom\",\n  currentDispatcherRef: ReactSharedInternals,\n  reconcilerVersion: \"19.2.3\"\n};\nif (\"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {\n  var hook$jscomp$inline_2348 = __REACT_DEVTOOLS_GLOBAL_HOOK__;\n  if (\n    !hook$jscomp$inline_2348.isDisabled &&\n    hook$jscomp$inline_2348.supportsFiber\n  )\n    try {\n      (rendererID = hook$jscomp$inline_2348.inject(\n        internals$jscomp$inline_2347\n      )),\n        (injectedHook = hook$jscomp$inline_2348);\n    } catch (err) {}\n}\nexports.createRoot = function (container, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError));\n  options = createFiberRoot(\n    container,\n    1,\n    !1,\n    null,\n    null,\n    isStrictMode,\n    identifierPrefix,\n    null,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    defaultOnDefaultTransitionIndicator\n  );\n  container[internalContainerInstanceKey] = options.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMRoot(options);\n};\nexports.hydrateRoot = function (container, initialChildren, options) {\n  if (!isValidContainer(container)) throw Error(formatProdErrorMessage(299));\n  var isStrictMode = !1,\n    identifierPrefix = \"\",\n    onUncaughtError = defaultOnUncaughtError,\n    onCaughtError = defaultOnCaughtError,\n    onRecoverableError = defaultOnRecoverableError,\n    formState = null;\n  null !== options &&\n    void 0 !== options &&\n    (!0 === options.unstable_strictMode && (isStrictMode = !0),\n    void 0 !== options.identifierPrefix &&\n      (identifierPrefix = options.identifierPrefix),\n    void 0 !== options.onUncaughtError &&\n      (onUncaughtError = options.onUncaughtError),\n    void 0 !== options.onCaughtError && (onCaughtError = options.onCaughtError),\n    void 0 !== options.onRecoverableError &&\n      (onRecoverableError = options.onRecoverableError),\n    void 0 !== options.formState && (formState = options.formState));\n  initialChildren = createFiberRoot(\n    container,\n    1,\n    !0,\n    initialChildren,\n    null != options ? options : null,\n    isStrictMode,\n    identifierPrefix,\n    formState,\n    onUncaughtError,\n    onCaughtError,\n    onRecoverableError,\n    defaultOnDefaultTransitionIndicator\n  );\n  initialChildren.context = getContextForSubtree(null);\n  options = initialChildren.current;\n  isStrictMode = requestUpdateLane();\n  isStrictMode = getBumpedLaneForHydrationByLane(isStrictMode);\n  identifierPrefix = createUpdate(isStrictMode);\n  identifierPrefix.callback = null;\n  enqueueUpdate(options, identifierPrefix, isStrictMode);\n  options = isStrictMode;\n  initialChildren.current.lanes = options;\n  markRootUpdated$1(initialChildren, options);\n  ensureRootIsScheduled(initialChildren);\n  container[internalContainerInstanceKey] = initialChildren.current;\n  listenToAllSupportedEvents(container);\n  return new ReactDOMHydrationRoot(initialChildren);\n};\nexports.version = \"19.2.3\";\n", "'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom-client.production.js');\n} else {\n  module.exports = require('./cjs/react-dom-client.development.js');\n}\n", "/**\r\n * constants.js - Core protocol constants (v5 Union Binary Protocol)\r\n *\r\n * Action code 1 (MOVE) uses a 16-byte extended packet with X/Y/Z coordinates.\r\n * All other action codes use the standard 8-byte packet.\r\n * Codes 10-15 are \"category headers\" whose value field carries a sub-ID\r\n * resolved from customAbilitiesMap / customActionsMap at runtime.\r\n */\r\n\r\nexport const MSG_TYPE = {\r\n  MOVE: 'move',\r\n  EVENT: 'event',\r\n  HEARTBEAT: 'heartbeat'\r\n};\r\n\r\n// \u2500\u2500 Action Codes (4-bit, 0-15) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * The hardcoded MOVE action code.  Action code 1 always uses the 16-byte\r\n * extended packet layout with X, Y, Z coordinates.\r\n */\r\nexport const MOVE_ACTION_CODE = 1;\r\n\r\nexport const ACTION_CODE = {\r\n  NONE:           0,\r\n  MOVE:           1,   // Extended 16-byte layout (x, y, z)\r\n  HEALTH_CHANGE:  2,\r\n  POWER_CHANGE:   3,\r\n  STAMINA_CHANGE: 4,\r\n  ARMOR_CHANGE:   5,\r\n  AMMO_CHANGE:    6,\r\n  SCORE_CHANGE:   7,\r\n  COLLECT_COIN:   8,\r\n  LANE_CHANGE:    9,\r\n  ABILITY:       10,   // Category header \u2014 sub-ID in value field\r\n  ITEM:          11,   // Category header \u2014 sub-ID in value field\r\n  STATUS:        12,   // Category header \u2014 sub-ID in value field\r\n  ACTION:        13,   // Category header \u2014 sub-ID in value field\r\n  EMOTE:         14,   // Category header \u2014 sub-ID in value field\r\n  SYSTEM:        15,   // Category header \u2014 sub-ID in value field\r\n};\r\n\r\nexport const ACTION_TO_CODE = {\r\n  none:           ACTION_CODE.NONE,\r\n  move:           ACTION_CODE.MOVE,\r\n  health_change:  ACTION_CODE.HEALTH_CHANGE,\r\n  power_change:   ACTION_CODE.POWER_CHANGE,\r\n  stamina_change: ACTION_CODE.STAMINA_CHANGE,\r\n  armor_change:   ACTION_CODE.ARMOR_CHANGE,\r\n  ammo_change:    ACTION_CODE.AMMO_CHANGE,\r\n  score_change:   ACTION_CODE.SCORE_CHANGE,\r\n  collect_coin:   ACTION_CODE.COLLECT_COIN,\r\n  lane_change:    ACTION_CODE.LANE_CHANGE,\r\n  ability:        ACTION_CODE.ABILITY,\r\n  item:           ACTION_CODE.ITEM,\r\n  status:         ACTION_CODE.STATUS,\r\n  action:         ACTION_CODE.ACTION,\r\n  emote:          ACTION_CODE.EMOTE,\r\n  system:         ACTION_CODE.SYSTEM,\r\n};\r\n\r\nexport const CODE_TO_ACTION = Object.fromEntries(\r\n  Object.entries(ACTION_TO_CODE).map(([k, v]) => [v, k])\r\n);\r\n\r\n/** Codes that use a sub-ID in the value field */\r\nexport const CATEGORY_CODES = new Set([\r\n  ACTION_CODE.ABILITY,\r\n  ACTION_CODE.ITEM,\r\n  ACTION_CODE.STATUS,\r\n  ACTION_CODE.ACTION,\r\n  ACTION_CODE.EMOTE,\r\n  ACTION_CODE.SYSTEM,\r\n]);\r\n\r\n// \u2500\u2500 Default Sub-Maps for category codes \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\nexport const DEFAULT_ABILITIES_MAP = Object.freeze({\r\n  shield: 1,\r\n  heal: 2,\r\n  boost: 3,\r\n});\r\n\r\nexport const DEFAULT_ACTIONS_MAP = Object.freeze({\r\n  attack: 1,\r\n  defend: 2,\r\n  dodge: 3,\r\n});\r\n\r\nexport const DEFAULT_ITEMS_MAP = Object.freeze({\r\n  potion: 1,\r\n  bomb: 2,\r\n  key: 3,\r\n});\r\n\r\nexport const DEFAULT_STATUS_MAP = Object.freeze({\r\n  stun: 1,\r\n  burn: 2,\r\n  freeze: 3,\r\n});\r\n\r\nexport const DEFAULT_EMOTES_MAP = Object.freeze({\r\n  wave: 1,\r\n  taunt: 2,\r\n  cheer: 3,\r\n});\r\n\r\nexport const DEFAULT_SYSTEM_MAP = Object.freeze({\r\n  ping: 1,\r\n  sync: 2,\r\n  ready: 3,\r\n});\r\n\r\n/**\r\n * Build merged action maps from defaults + custom overrides.\r\n *\r\n * @param {Object} [custom] - Developer-supplied overrides\r\n * @param {Object} [custom.actionMap]     - String\u2192code overrides for ACTION_TO_CODE\r\n * @param {Object} [custom.abilitiesMap]  - String\u2192subId overrides for ability category\r\n * @param {Object} [custom.actionsMap]    - String\u2192subId overrides for action category\r\n * @param {Object} [custom.itemsMap]      - String\u2192subId overrides for item category\r\n * @param {Object} [custom.statusMap]     - String\u2192subId overrides for status category\r\n * @param {Object} [custom.emotesMap]     - String\u2192subId overrides for emote category\r\n * @param {Object} [custom.systemMap]     - String\u2192subId overrides for system category\r\n * @returns {{ actionToCode, codeToAction, subMaps }}\r\n */\r\nexport function buildActionMaps(custom = {}) {\r\n  const actionToCode = { ...ACTION_TO_CODE, ...(custom.actionMap || {}) };\r\n  const codeToAction = Object.fromEntries(\r\n    Object.entries(actionToCode).map(([k, v]) => [v, k])\r\n  );\r\n\r\n  const subMaps = {\r\n    [ACTION_CODE.ABILITY]: { ...DEFAULT_ABILITIES_MAP, ...(custom.abilitiesMap || {}) },\r\n    [ACTION_CODE.ACTION]:  { ...DEFAULT_ACTIONS_MAP,   ...(custom.actionsMap   || {}) },\r\n    [ACTION_CODE.ITEM]:    { ...DEFAULT_ITEMS_MAP,     ...(custom.itemsMap     || {}) },\r\n    [ACTION_CODE.STATUS]:  { ...DEFAULT_STATUS_MAP,    ...(custom.statusMap    || {}) },\r\n    [ACTION_CODE.EMOTE]:   { ...DEFAULT_EMOTES_MAP,    ...(custom.emotesMap    || {}) },\r\n    [ACTION_CODE.SYSTEM]:  { ...DEFAULT_SYSTEM_MAP,    ...(custom.systemMap    || {}) },\r\n  };\r\n\r\n  // Build reverse sub-maps (id \u2192 string) for parsing\r\n  const reverseSubMaps = {};\r\n  for (const [code, map] of Object.entries(subMaps)) {\r\n    reverseSubMaps[code] = Object.fromEntries(\r\n      Object.entries(map).map(([k, v]) => [v, k])\r\n    );\r\n  }\r\n\r\n  return { actionToCode, codeToAction, subMaps, reverseSubMaps };\r\n}\r\n\r\n// \u2500\u2500 Coordinate helpers (14-bit signed fixed-point, 0.01 precision) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/** Encode a float coordinate to a 14-bit unsigned value (two's complement). */\r\nexport function encodeCoord14(value) {\r\n  let raw = Math.round((value ?? 0) * 100);\r\n  if (raw < -8192) raw = -8192;\r\n  if (raw > 8191) raw = 8191;\r\n  return raw < 0 ? raw + 16384 : raw;\r\n}\r\n\r\n/** Decode a 14-bit unsigned value back to a float coordinate. */\r\nexport function decodeCoord14(raw) {\r\n  const v = raw & 0x3FFF;\r\n  return (v >= 8192 ? v - 16384 : v) / 100;\r\n}\r\n\r\n// \u2500\u2500 Anchor / Protocol Constants \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\nexport const ANCHOR = Object.freeze({\r\n  VERSION: 5,\r\n  TYPE_GENESIS: 1,\r\n  TYPE_HEARTBEAT: 2,\r\n  TYPE_FINAL: 3,\r\n\r\n  HEADER_SIZE: 55,\r\n  GAME_ID_BYTES: 8,\r\n  BLOCK_HASH_BYTES: 16,\r\n  VRF_SEED_BYTES: 8,\r\n\r\n  /** Standard packet size (action codes 0, 2-15) */\r\n  MOVE_PACKET_SIZE: 8,\r\n  /** Extended packet size for MOVE (action code 1, x/y/z) */\r\n  MOVE_PACKET_SIZE_EXTENDED: 16,\r\n  VRF_FRAGMENT_BYTES: 4,\r\n  QRNG_PULSE_SIZE: 12,\r\n  QRNG_PULSE_FRAGMENT_BYTES: 8,\r\n\r\n  MAX_MOVES: 255,\r\n  MAX_QRNG_PULSES: 3,\r\n\r\n  TIME_DELTA_SCALE: 4,\r\n  TIME_DELTA_MAX: 255,\r\n  NOP_HEARTBEAT_MS: 1020,\r\n\r\n  BTC_BLOCK_COUNT: 6,\r\n\r\n  GENESIS_BASE_SIZE: 858,\r\n  /** v5 header: +2 bytes for movesSectionLength (was 68 in v4) */\r\n  HEARTBEAT_HEADER_SIZE: 70,\r\n  /** v4 header size \u2014 used for backward-compatible parsing */\r\n  HEARTBEAT_HEADER_SIZE_V4: 68,\r\n  HEARTBEAT_DELTA_BTC_SIZE: 32,\r\n  HEARTBEAT_DELTA_NIST_SIZE: 584,\r\n\r\n  DELTA_FLAG_NONE: 0,\r\n  DELTA_FLAG_BTC: 1,\r\n  DELTA_FLAG_NIST: 2,\r\n\r\n  FINAL_SIZE: 144,\r\n\r\n  OUTCOME_COMPLETE: 1,\r\n  OUTCOME_FORFEIT: 2,\r\n  OUTCOME_TIMEOUT: 3,\r\n  OUTCOME_CHEAT: 4,\r\n});\r\n\r\nexport const BLOCKCHAIN = Object.freeze({\r\n  ANCHOR_BATCH_MS: 500,\r\n  ANCHOR_AMOUNT: '0.5',\r\n  PREFIX_GAME_START: 'KKTP:GEN:',\r\n  PREFIX_HEARTBEAT: 'KKTP:HRT:',\r\n  PREFIX_GAME_END: 'KKTP:END:',\r\n  PREFIX_GAME_START_HEX: '4b47454e',\r\n  PREFIX_HEARTBEAT_HEX: '4b485254',\r\n  PREFIX_GAME_END_HEX: '4b454e44',\r\n\r\n  MOVE_COST_KAS: 0.0001,\r\n  MOVE_INTERVAL_MS: 500,\r\n  FULL_RACE_COST_KAS: 0.5,\r\n\r\n  // UTXO Pool Configuration\r\n  UTXO_SPLIT_COUNT: 10,\r\n  UTXO_LOW_THRESHOLD: 3,\r\n  UTXO_KEY_COUNT: 10,\r\n  UTXO_HEARTBEAT_MS: 2000,\r\n  UTXO_USABLE_THRESHOLD_KAS: 0.6,\r\n  UTXO_HEARTBEAT_FIRST_DELAY_MS: 0,\r\n});\r\n\r\n/**\r\n * Return the byte size of a single move packet given its action code.\r\n * @param {number} actionCode\r\n * @returns {number} 16 for MOVE (code 1), 8 for everything else\r\n */\r\nexport function movePacketSize(actionCode) {\r\n  return actionCode === MOVE_ACTION_CODE\r\n    ? ANCHOR.MOVE_PACKET_SIZE_EXTENDED\r\n    : ANCHOR.MOVE_PACKET_SIZE;\r\n}\r\n\r\nexport default {\r\n  MSG_TYPE,\r\n  MOVE_ACTION_CODE,\r\n  ACTION_CODE,\r\n  ACTION_TO_CODE,\r\n  CODE_TO_ACTION,\r\n  CATEGORY_CODES,\r\n  ANCHOR,\r\n  BLOCKCHAIN,\r\n  buildActionMaps,\r\n  encodeCoord14,\r\n  decodeCoord14,\r\n  movePacketSize,\r\n};\r\n", "/**\r\n * Strict RFC 8785 (JCS) Canonicalization\r\n * Core logic for KKTP Signature consistency.\r\n */\r\nexport function canonicalize(value) {\r\n  if (value === null) return \"null\";\r\n  const t = typeof value;\r\n\r\n  if (t === \"boolean\") return value ? \"true\" : \"false\";\r\n  if (t === \"number\") return serializeNumber(value);\r\n  if (t === \"string\") return serializeString(value);\r\n  if (Array.isArray(value)) return serializeArray(value);\r\n  if (t === \"object\") return serializeObject(value);\r\n\r\n  throw new Error(\"Unsupported type in canonical JSON\");\r\n}\r\n\r\n/**\r\n * Prepares a KKTP anchor for signing by omitting the signature field\r\n * and the non-signed metadata.\r\n */\r\nexport function prepareForSigning(\r\n  obj,\r\n  { omitKeys = [], excludeMeta = true } = {},\r\n) {\r\n  const clean = toPlainJson(obj);\r\n\r\n  function walk(v) {\r\n    if (v === null || typeof v !== \"object\") return v;\r\n    if (Array.isArray(v)) return v.map(walk);\r\n\r\n    const out = {};\r\n    for (const k of Object.keys(v)) {\r\n      if (omitKeys.includes(k)) continue;\r\n      if (excludeMeta && k === \"meta\") continue;\r\n      const child = walk(v[k]);\r\n      if (child !== undefined) out[k] = child;\r\n    }\r\n    return out;\r\n  }\r\n  return walk(clean);\r\n}\r\n\r\nfunction serializeNumber(n) {\r\n  if (!Number.isFinite(n)) throw new Error(\"Non-finite numbers not allowed\");\r\n  let s = n.toString();\r\n  if (s.includes(\"e\") || s.includes(\"E\")) s = toPlainString(n);\r\n  if (s === \"-0\") s = \"0\";\r\n  return s;\r\n}\r\n\r\nfunction toPlainString(n) {\r\n  const s = n.toString();\r\n  if (!/e/i.test(s)) return s;\r\n  const [mantissa, expStr] = s.split(/e/i);\r\n  const exp = parseInt(expStr, 10);\r\n  let [intPart, fracPart = \"\"] = mantissa.split(\".\");\r\n  if (exp > 0) {\r\n    const neededZeros = exp - fracPart.length;\r\n    if (neededZeros >= 0) return intPart + fracPart + \"0\".repeat(neededZeros);\r\n    const idx = fracPart.length + exp;\r\n    return intPart + fracPart.slice(0, idx) + \".\" + fracPart.slice(idx);\r\n  } else {\r\n    const zeros = \"0\".repeat(Math.abs(exp) - 1);\r\n    return \"0.\" + zeros + intPart + fracPart;\r\n  }\r\n}\r\n\r\nfunction serializeString(str) {\r\n  let out = '\"';\r\n  for (let i = 0; i < str.length; i++) {\r\n    const c = str.charCodeAt(i);\r\n    switch (c) {\r\n      case 0x22:\r\n        out += '\\\\\"';\r\n        break;\r\n      case 0x5c:\r\n        out += \"\\\\\\\\\";\r\n        break;\r\n      case 0x08:\r\n        out += \"\\\\b\";\r\n        break;\r\n      case 0x0c:\r\n        out += \"\\\\f\";\r\n        break;\r\n      case 0x0a:\r\n        out += \"\\\\n\";\r\n        break;\r\n      case 0x0d:\r\n        out += \"\\\\r\";\r\n        break;\r\n      case 0x09:\r\n        out += \"\\\\t\";\r\n        break;\r\n      default:\r\n        if (c < 0x20) out += \"\\\\u\" + c.toString(16).padStart(4, \"0\");\r\n        else out += str[i];\r\n    }\r\n  }\r\n  return out + '\"';\r\n}\r\n\r\nfunction serializeArray(arr) {\r\n  return \"[\" + arr.map((v) => canonicalize(v)).join(\",\") + \"]\";\r\n}\r\n\r\nfunction serializeObject(obj) {\r\n  const keys = Object.keys(obj).sort();\r\n  const parts = [];\r\n  for (const k of keys) {\r\n    const v = obj[k];\r\n    if (v === undefined) continue;\r\n    parts.push(serializeString(k) + \":\" + canonicalize(v));\r\n  }\r\n  return \"{\" + parts.join(\",\") + \"}\";\r\n}\r\n\r\n/**\r\n * Strips non-JSON types and creates a clean deep-clone POJO.\r\n */\r\nexport function toPlainJson(value) {\r\n  if (value === null || typeof value !== \"object\") return value;\r\n  if (Array.isArray(value)) return value.map(toPlainJson);\r\n\r\n  const out = {};\r\n  for (const key of Object.keys(value)) {\r\n    const child = toPlainJson(value[key]);\r\n    if (child !== undefined) out[key] = child;\r\n  }\r\n  return out;\r\n}\r\n\r\n/**\r\n * KKTP-Compliant Strict Parser\r\n * Replaces _safeParseJson to satisfy Section 7.9\r\n */\r\nexport function strictParseJson(text) {\r\n  try {\r\n    // 1. Convert string to object\r\n    const obj = JSON.parse(text);\r\n\r\n    // 2. Convert that object BACK to a string using your canonical rules\r\n    const verificationString = canonicalize(obj);\r\n\r\n    // 3. THE COMPLIANCE CHECK:\r\n    // If the input 'text' isn't EXACTLY the same as our 'verificationString',\r\n    // then the sender violated RFC 8785 (extra spaces, wrong order, etc.)\r\n    if (text !== verificationString) {\r\n      throw new Error(\"KKTP Section 7.9 Violation: Non-canonical input detected.\");\r\n    }\r\n\r\n    return obj;\r\n  } catch (e) {\r\n    // Return null to maintain the 'safe' behavior,\r\n    // but only if it's actually valid & canonical JSON.\r\n    return null;\r\n  }\r\n}\r\n", "import React from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport { SpaLayout } from './SpaLayout'\r\nimport { RelayVisualizer } from '../app/relay-demo/components/relay-visualizer'\r\n\r\nconst rootElement = document.getElementById('root')\r\nif (!rootElement) {\r\n  throw new Error('Relay SPA root element not found')\r\n}\r\n\r\nconst root = createRoot(rootElement)\r\nroot.render(\r\n  <SpaLayout\r\n    title=\"Relay Demo\"\r\n    description=\"Visualize how the Kaspa Relay enables CGNAT to CGNAT connectivity without traditional TURN or STUN servers.\"\r\n  >\r\n    <RelayVisualizer />\r\n  </SpaLayout>\r\n)\r\n", "import React from 'react'\r\n\r\ntype SpaLayoutProps = {\r\n  title: string\r\n  description: string\r\n  children: React.ReactNode\r\n}\r\n\r\nexport function SpaLayout({ title, description, children }: SpaLayoutProps) {\r\n  const pathname = typeof window !== 'undefined' ? window.location.pathname : ''\r\n\r\n  const navItems = [\r\n    { href: '/', label: 'Home' },\r\n    { href: '/spa/vrf-demo.html', label: 'VRF Demo' },\r\n    { href: '/spa/relay-demo.html', label: 'Relay Demo' },\r\n    { href: '/spa/nist-tests.html', label: 'NIST Tests' },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-foreground\">\r\n      <header className=\"border-b border-border/50 bg-card/60\">\r\n        <div className=\"container mx-auto px-4 py-6\">\r\n          <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <a href=\"/\" className=\"flex items-center gap-2 text-xl font-bold font-display\">\r\n                <span>\r\n                  <span className=\"text-primary\">\uA4D8</span>\r\n                  <span className=\"text-secondary\">K</span>\r\n                </span>\r\n              </a>\r\n              <span className=\"hidden sm:block text-muted-foreground\">/</span>\r\n              <span className=\"hidden sm:block text-sm font-medium text-muted-foreground\">{title}</span>\r\n            </div>\r\n\r\n            <nav className=\"flex flex-wrap gap-2\">\r\n              {navItems.map((item) => {\r\n                const isActive = pathname === item.href\r\n                return (\r\n                  <a\r\n                    key={item.href}\r\n                    href={item.href}\r\n                    aria-current={isActive ? 'page' : undefined}\r\n                    className={[\r\n                      'inline-flex items-center rounded-lg px-3 py-1.5 text-sm font-medium transition-colors border',\r\n                      isActive\r\n                        ? 'bg-primary/10 text-primary border-primary/30'\r\n                        : 'text-muted-foreground hover:text-foreground hover:bg-muted/50 border-transparent',\r\n                    ].join(' ')}\r\n                  >\r\n                    {item.label}\r\n                  </a>\r\n                )\r\n              })}\r\n            </nav>\r\n          </div>\r\n\r\n          <h1 className=\"text-3xl font-bold font-display mt-5\">{title}</h1>\r\n          <p className=\"text-muted-foreground mt-2 max-w-3xl\">{description}</p>\r\n        </div>\r\n      </header>\r\n      <main className=\"container mx-auto px-4 py-8\">{children}</main>\r\n    </div>\r\n  )\r\n}\r\n", "\"use client\";\r\nimport React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { KKGameEngine, GameEvent } from \"@/kktp/kkGameEngine.js\";\r\nimport { kaspaPortal } from \"@/kktp/engine/kaspa/kaspaPortal.js\";\r\n\r\ntype ChatMessage = {\r\n  id: number;\r\n  from: \"me\" | \"peer\" | \"system\";\r\n  text: string;\r\n  timestamp: Date;\r\n};\r\n\r\ntype DiscoveryItem = {\r\n  id: string;\r\n  label: string;\r\n  raw: any;\r\n};\r\n\r\ntype LobbyDiscoveryController = {\r\n  stop?: () => void;\r\n};\r\n\r\ntype WalletOption = {\r\n  id: string;\r\n  label: string;\r\n  value: string;\r\n};\r\n\r\n\r\nexport function RelayVisualizer() {\r\n  const lastWalletKey = \"kktp.lastWallet\";\r\n  const [walletName, setWalletName] = useState(\"\");\r\n  const [walletPassword, setWalletPassword] = useState(\"\");\r\n  const [networkId, setNetworkId] = useState(\"testnet-10\");\r\n  const [rpcEndpoint, setRpcEndpoint] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\r\n    () => `Player-${Math.random().toString(36).slice(2, 6)}`,\r\n  );\r\n  const [isConnecting, setIsConnecting] = useState(false);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n  const [isInitializing, setIsInitializing] = useState(false);\r\n  const [isReady, setIsReady] = useState(false);\r\n  const [address, setAddress] = useState<string | null>(null);\r\n  const [balance, setBalance] = useState<number | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [addressCopyState, setAddressCopyState] = useState<\r\n    \"idle\" | \"copying\" | \"copied\" | \"error\"\r\n  >(\"idle\");\r\n  const [joinCodeCopyState, setJoinCodeCopyState] = useState<\r\n    \"idle\" | \"copying\" | \"copied\" | \"error\"\r\n  >(\"idle\");\r\n\r\n  const [lobbyName, setLobbyName] = useState(\"\");\r\n  const [maxPlayers, setMaxPlayers] = useState(2);\r\n  const [hostResult, setHostResult] = useState<{\r\n    lobbyId: string | null;\r\n    joinCode: string | null;\r\n  } | null>(null);\r\n\r\n  const [isDiscovering, setIsDiscovering] = useState(false);\r\n  const [discoveries, setDiscoveries] = useState<DiscoveryItem[]>([]);\r\n  const [selectedDiscoveryId, setSelectedDiscoveryId] = useState<string | null>(\r\n    null,\r\n  );\r\n\r\n  const [joinCode, setJoinCode] = useState(\"\");\r\n  const [isInLobby, setIsInLobby] = useState(false);\r\n  const [chatInput, setChatInput] = useState(\"\");\r\n  const [chatMessages, setChatMessages] = useState<ChatMessage[]>([]);\r\n\r\n  const [isHostingLobby, setIsHostingLobby] = useState(false);\r\n  const [isJoiningLobby, setIsJoiningLobby] = useState(false);\r\n  const [isSendingChat, setIsSendingChat] = useState(false);\r\n\r\n  const messageIdRef = useRef(0);\r\n  const chatEndRef = useRef<HTMLDivElement | null>(null);\r\n  const discoveryRef = useRef<LobbyDiscoveryController | null>(null);\r\n  const gameRef = useRef<KKGameEngine | null>(null);\r\n  if (!gameRef.current) {\r\n    gameRef.current = new KKGameEngine();\r\n  }\r\n  const kkGame = gameRef.current;\r\n\r\n  // Wallet selection state\r\n  const [wallets, setWallets] = useState<WalletOption[]>([]);\r\n  const [engineReady, setEngineReady] = useState(false); // Track if engine is alive\r\n  const [lastWallet, setLastWallet] = useState<string>(\"\");\r\n\r\n  const normalizeBalance = useCallback((value: unknown) => {\r\n    if (typeof value === \"bigint\") {\r\n      return Number(value) / 100_000_000;\r\n    }\r\n    if (typeof value === \"string\" && value.trim() !== \"\") {\r\n      // wallet_service returns sompiToKaspaString() which is comma-formatted\r\n      // (e.g. \"1,000.1234\"). Strip commas so Number() can parse it.\r\n      const cleaned = value.replace(/,/g, \"\");\r\n      const parsed = Number(cleaned);\r\n      if (Number.isFinite(parsed)) return parsed;\r\n    }\r\n    if (typeof value === \"number\" && Number.isFinite(value)) {\r\n      return value;\r\n    }\r\n    return null;\r\n  }, []);\r\n\r\n\r\n  // 1. Define how to fetch wallets as a reusable callback\r\n  const fetchWallets = useCallback(async (options?: {\r\n    networkId?: string;\r\n    rpcUrl?: string;\r\n  }) => {\r\n    const bootstrapWalletName = \"__kk_wallets_bootstrap__\";\r\n    const bootstrapPassword = \"__kk_wallets_bootstrap_pw__\";\r\n    const effectiveNetworkId = options?.networkId || networkId;\r\n    const effectiveRpcUrl = options?.rpcUrl;\r\n\r\n    const listAndSet = async () => {\r\n      const list = await kaspaPortal.getAllWallets();\r\n      console.log(\"\u2705 [kaspaPortal] Wallets found:\", list);\r\n      if (Array.isArray(list)) {\r\n        const options = list\r\n          .map((item: any, index: number) => {\r\n            const filename =\r\n              typeof item === \"string\" ? item : item?.filename || item?.title;\r\n            const label =\r\n              typeof item === \"string\"\r\n                ? item\r\n                : item?.title || item?.filename || `Wallet ${index + 1}`;\r\n            if (!filename) return null;\r\n            return {\r\n              id: `${filename}-${index}`,\r\n              label,\r\n              value: filename,\r\n            };\r\n          })\r\n          .filter(\r\n            (option): option is WalletOption =>\r\n              option !== null && option.value !== bootstrapWalletName,\r\n          );\r\n        setWallets(options as WalletOption[]);\r\n      }\r\n    };\r\n\r\n    try {\r\n      console.log(\"\uD83D\uDCC2 [kaspaPortal] Fetching wallet list...\");\r\n      await kaspaPortal.init();\r\n      await listAndSet();\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : String(err);\r\n      if (message.includes(\"Wallet not initialized\")) {\r\n        try {\r\n          await kaspaPortal.connect({\r\n            networkId: effectiveNetworkId,\r\n            rpcUrl: effectiveRpcUrl,\r\n            startIntelligence: true,\r\n          });\r\n          await listAndSet();\r\n          return;\r\n        } catch (connectErr) {\r\n          console.error(\"\u274C [kaspaPortal] Failed to connect for wallets:\", connectErr);\r\n        }\r\n        try {\r\n          await kaspaPortal.createOrOpenWallet({\r\n            password: bootstrapPassword,\r\n            walletFilename: bootstrapWalletName,\r\n          });\r\n          await listAndSet();\r\n          return;\r\n        } catch (initErr) {\r\n          console.error(\"\u274C [kaspaPortal] Failed to bootstrap wallet list:\", initErr);\r\n          return;\r\n        }\r\n      }\r\n      console.error(\"\u274C [kaspaPortal] Failed to list wallets:\", err);\r\n    }\r\n  }, [networkId]);\r\n\r\n  // 2. Main Boot Sequence\r\n  useEffect(() => {\r\n    const storedWallet = typeof window !== \"undefined\"\r\n      ? window.localStorage.getItem(lastWalletKey) || \"\"\r\n      : \"\";\r\n    if (storedWallet) {\r\n      setLastWallet(storedWallet);\r\n    }\r\n    const bootEngine = async () => {\r\n      try {\r\n        console.log(\"\uD83D\uDE80 [kkGameEngine] Pre-initializing system hooks...\");\r\n        setEngineReady(true);\r\n      } catch (err) {\r\n        console.error(\"\uD83D\uDC80 [kkGameEngine] Critical boot failure:\", err);\r\n      }\r\n    };\r\n    bootEngine();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!walletName) return;\r\n    if (typeof window === \"undefined\") return;\r\n    window.localStorage.setItem(lastWalletKey, walletName);\r\n    setLastWallet(walletName);\r\n  }, [walletName]);\r\n\r\n  useEffect(() => {\r\n    if (!lastWallet || walletName) return;\r\n    const match = wallets.find((wallet) => wallet.value === lastWallet);\r\n    if (match) {\r\n      setWalletName(match.value);\r\n    }\r\n  }, [lastWallet, walletName, wallets]);\r\n\r\n  // (Wallets are now loaded by fetchWallets in the boot sequence)\r\n\r\n  const pushChatMessage = useCallback(\r\n    (from: ChatMessage[\"from\"], text: string, timestamp?: Date) => {\r\n      messageIdRef.current += 1;\r\n      setChatMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          id: messageIdRef.current,\r\n          from,\r\n          text,\r\n          timestamp: timestamp ?? new Date(),\r\n        },\r\n      ]);\r\n    },\r\n    [],\r\n  );\r\n\r\n  const normalizeIncomingChat = useCallback((msg: any) => {\r\n    const fromJsonString = (value: string) => {\r\n      const trimmed = value.trim();\r\n      if (!trimmed.startsWith(\"{\") || !trimmed.endsWith(\"}\")) return null;\r\n      try {\r\n        return JSON.parse(trimmed);\r\n      } catch {\r\n        return null;\r\n      }\r\n    };\r\n\r\n    const fromObject = (value: any) => {\r\n      const senderName =\r\n        value?.senderName ||\r\n        value?.displayName ||\r\n        value?.name ||\r\n        value?.from ||\r\n        null;\r\n      const body =\r\n        value?.text ??\r\n        value?.plaintext ??\r\n        value?.message ??\r\n        value?.content ??\r\n        null;\r\n\r\n      const tsRaw = value?.timestamp ?? value?.time ?? null;\r\n      const ts =\r\n        typeof tsRaw === \"number\"\r\n          ? new Date(tsRaw)\r\n          : typeof tsRaw === \"string\" && tsRaw.trim() !== \"\"\r\n            ? new Date(Number.isFinite(Number(tsRaw)) ? Number(tsRaw) : tsRaw)\r\n            : null;\r\n\r\n      if (typeof body === \"string\" && body.trim() !== \"\") {\r\n        return {\r\n          text: senderName ? `${senderName}: ${body}` : body,\r\n          timestamp: ts ?? new Date(),\r\n        };\r\n      }\r\n\r\n      // Fallback: show something readable without spamming huge JSON.\r\n      const fallback =\r\n        senderName && typeof senderName === \"string\"\r\n          ? `${senderName}: [message]`\r\n          : \"[message]\";\r\n      return { text: fallback, timestamp: ts ?? new Date() };\r\n    };\r\n\r\n    if (typeof msg === \"string\") {\r\n      const parsed = fromJsonString(msg);\r\n      if (parsed) return fromObject(parsed);\r\n      return { text: msg, timestamp: new Date() };\r\n    }\r\n\r\n    if (msg && typeof msg === \"object\") {\r\n      return fromObject(msg);\r\n    }\r\n\r\n    return { text: String(msg), timestamp: new Date() };\r\n  }, []);\r\n\r\n  const Spinner = ({ label }: { label?: string }) => (\r\n    <span className=\"inline-flex items-center gap-2\">\r\n      <span\r\n        className=\"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent\"\r\n        aria-label={label ?? \"Loading\"}\r\n      />\r\n    </span>\r\n  );\r\n\r\n  const copyText = useCallback(async (text: string) => {\r\n    if (!text) return false;\r\n\r\n    // Prefer modern async clipboard API.\r\n    try {\r\n      if (navigator?.clipboard?.writeText) {\r\n        await navigator.clipboard.writeText(text);\r\n        return true;\r\n      }\r\n    } catch {\r\n      // Fall through to legacy method.\r\n    }\r\n\r\n    // Legacy fallback (works in more WebViews / older mobile browsers).\r\n    try {\r\n      const textarea = document.createElement(\"textarea\");\r\n      textarea.value = text;\r\n      textarea.setAttribute(\"readonly\", \"\");\r\n      textarea.style.position = \"fixed\";\r\n      textarea.style.top = \"-1000px\";\r\n      textarea.style.left = \"-1000px\";\r\n      document.body.appendChild(textarea);\r\n      textarea.select();\r\n      textarea.setSelectionRange(0, textarea.value.length);\r\n      const ok = document.execCommand(\"copy\");\r\n      document.body.removeChild(textarea);\r\n      return ok;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }, []);\r\n\r\n  const copyAddress = useCallback(async () => {\r\n    if (!address) return;\r\n    setAddressCopyState(\"copying\");\r\n    const ok = await copyText(address);\r\n    setAddressCopyState(ok ? \"copied\" : \"error\");\r\n    window.setTimeout(() => setAddressCopyState(\"idle\"), 1500);\r\n  }, [address, copyText]);\r\n\r\n  const copyJoinCode = useCallback(async () => {\r\n    const code = hostResult?.joinCode || joinCode;\r\n    if (!code) return;\r\n    setJoinCodeCopyState(\"copying\");\r\n    const ok = await copyText(code);\r\n    setJoinCodeCopyState(ok ? \"copied\" : \"error\");\r\n    window.setTimeout(() => setJoinCodeCopyState(\"idle\"), 1500);\r\n  }, [copyText, hostResult?.joinCode, joinCode]);\r\n\r\n  const resolveRpcUrl = useCallback((value: string) => {\r\n    const trimmed = value.trim();\r\n    if (!trimmed) return undefined;\r\n    if (trimmed.includes(\"://\")) return trimmed;\r\n    return `ws://${trimmed}`;\r\n  }, []);\r\n\r\n  const connectKaspa = useCallback(async () => {\r\n    setError(null);\r\n    setIsConnecting(true);\r\n    try {\r\n      const rpcUrl = resolveRpcUrl(rpcEndpoint);\r\n      await kaspaPortal.init();\r\n      await kaspaPortal.connect({\r\n        networkId,\r\n        rpcUrl,\r\n        startIntelligence: true,\r\n      });\r\n      setIsConnected(true);\r\n      await fetchWallets({ networkId, rpcUrl });\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to connect\");\r\n      setIsConnected(false);\r\n    } finally {\r\n      setIsConnecting(false);\r\n    }\r\n  }, [fetchWallets, networkId, resolveRpcUrl, rpcEndpoint]);\r\n\r\n  // 3. Modify your existing initWallet to refresh the list (in case they just created a new one)\r\n  const initWallet = useCallback(async () => {\r\n    setError(null);\r\n    setIsInitializing(true);\r\n    try {\r\n      const result = await kkGame.init({\r\n        password: walletPassword,\r\n        walletName,\r\n        onBalanceChange: (nextBalance: number) => {\r\n          const normalized = normalizeBalance(nextBalance);\r\n          if (normalized !== null) {\r\n            setBalance(normalized);\r\n          }\r\n        },\r\n      });\r\n      setAddress(result.address.toString());\r\n      const normalizedResult = normalizeBalance(result.balance);\r\n      if (normalizedResult !== null) {\r\n        setBalance(normalizedResult);\r\n      }\r\n      setIsReady(true);\r\n      // Refresh the list after a successful init/creation\r\n      await fetchWallets();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to initialize wallet\");\r\n    } finally {\r\n      setIsInitializing(false);\r\n    }\r\n  }, [walletPassword, walletName, fetchWallets, normalizeBalance]);\r\n\r\n  useEffect(() => {\r\n    if (!isReady) return;\r\n    const handleBalance = (data: any) => {\r\n      const normalized = normalizeBalance(data?.balance ?? data);\r\n      if (normalized !== null) {\r\n        setBalance(normalized);\r\n      }\r\n    };\r\n\r\n    kkGame.on(GameEvent.BALANCE_CHANGED, handleBalance);\r\n    return () => {\r\n      kkGame.off(GameEvent.BALANCE_CHANGED, handleBalance);\r\n    };\r\n  }, [isReady, normalizeBalance]);\r\n\r\n  const refreshBalance = useCallback(async () => {\r\n    try {\r\n      const nextBalance = await kkGame.getBalance();\r\n      const normalized = normalizeBalance(nextBalance);\r\n      if (normalized !== null) {\r\n        setBalance(normalized);\r\n      }\r\n    } catch (err) {\r\n      setError(\r\n        err instanceof Error ? err.message : \"Failed to refresh balance\",\r\n      );\r\n    }\r\n  }, [normalizeBalance]);\r\n\r\n  const hostLobby = useCallback(async () => {\r\n    setError(null);\r\n    setIsHostingLobby(true);\r\n    try {\r\n      // KKGameEngine supports displayName, but the TS type for createLobby()\r\n      // in this demo is narrower than the runtime implementation.\r\n      const result = await kkGame.createLobby({\r\n        name: lobbyName || \"KKTP Lobby\",\r\n        maxPlayers,\r\n        displayName: displayName.trim() || undefined,\r\n      } as any);\r\n      setHostResult({\r\n        lobbyId: result.lobbyId ?? null,\r\n        joinCode: result.joinCode ?? null,\r\n      });\r\n      if (result.joinCode) {\r\n        setJoinCode(result.joinCode);\r\n      }\r\n      setIsInLobby(kkGame.isInLobby());\r\n      setIsInLobby(true);\r\n      pushChatMessage(\r\n        \"system\",\r\n        `Lobby hosted. Join code: ${result.joinCode ?? \"unknown\"}`,\r\n      );\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : \"Failed to host lobby\";\r\n      setError(message);\r\n    } finally {\r\n      setIsHostingLobby(false);\r\n    }\r\n  }, [kkGame, lobbyName, maxPlayers, displayName, pushChatMessage]);\r\n\r\n  const normalizeDiscoveries = useCallback((results: any): DiscoveryItem[] => {\r\n    if (!results) return [];\r\n    const list = Array.isArray(results)\r\n      ? results\r\n      : results.lobbies || results.results || results.items || [];\r\n\r\n    return list.map((item: any, index: number) => {\r\n      const id = item.lobbyId || item.id || item.joinCode || `lobby-${index}`;\r\n      const label =\r\n        item.name ||\r\n        item.lobbyName ||\r\n        item.joinCode ||\r\n        item.lobbyId ||\r\n        `Lobby ${index + 1}`;\r\n      return { id, label, raw: item };\r\n    });\r\n  }, []);\r\n\r\n  const startDiscovery = useCallback(async () => {\r\n    setError(null);\r\n    setIsDiscovering(true);\r\n    try {\r\n      const resultsBuffer: DiscoveryItem[] = [];\r\n      const unsubscribe = kkGame.searchLobbies((lobby: any) => {\r\n        resultsBuffer.push(...normalizeDiscoveries([lobby]));\r\n        const deduped = new Map(resultsBuffer.map((item) => [item.id, item]));\r\n        setDiscoveries(Array.from(deduped.values()));\r\n      });\r\n      discoveryRef.current = {\r\n        stop: () => {\r\n          (unsubscribe as (() => void) | undefined)?.();\r\n        },\r\n      };\r\n    } catch (err) {\r\n      setError(\r\n        err instanceof Error ? err.message : \"Failed to start discovery\",\r\n      );\r\n      setIsDiscovering(false);\r\n    }\r\n  }, [normalizeDiscoveries]);\r\n\r\n  const stopDiscovery = useCallback(() => {\r\n    discoveryRef.current?.stop?.();\r\n    discoveryRef.current = null;\r\n    setIsDiscovering(false);\r\n  }, []);\r\n\r\n  const joinLobby = useCallback(async () => {\r\n    setError(null);\r\n    setIsJoiningLobby(true);\r\n    try {\r\n      const selected = discoveries.find(\r\n        (item) => item.id === selectedDiscoveryId,\r\n      );\r\n      const lobbyOrCode = selected?.raw || joinCode;\r\n      if (!lobbyOrCode) {\r\n        setError(\"Provide a join code or select a discovered lobby\");\r\n        return;\r\n      }\r\n      await kkGame.joinLobby(lobbyOrCode, displayName);\r\n      setIsInLobby(true);\r\n      pushChatMessage(\"system\", \"Joined lobby. You can start chatting now.\");\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to join lobby\");\r\n    } finally {\r\n      setIsJoiningLobby(false);\r\n    }\r\n  }, [\r\n    kkGame,\r\n    discoveries,\r\n    selectedDiscoveryId,\r\n    joinCode,\r\n    displayName,\r\n    pushChatMessage,\r\n  ]);\r\n\r\n  const leaveLobby = useCallback(async () => {\r\n    try {\r\n      await kkGame.leaveLobby(\"user-left\");\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to leave lobby\");\r\n    } finally {\r\n      setIsInLobby(false);\r\n      setChatMessages([]);\r\n    }\r\n  }, []);\r\n\r\n  const sendChat = useCallback(async () => {\r\n    const trimmed = chatInput.trim();\r\n    if (!trimmed) return;\r\n    setChatInput(\"\");\r\n    pushChatMessage(\"me\", trimmed);\r\n    setIsSendingChat(true);\r\n    try {\r\n      await kkGame.sendLobbyMessage(trimmed);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to send message\");\r\n    } finally {\r\n      setIsSendingChat(false);\r\n    }\r\n  }, [kkGame, chatInput, pushChatMessage]);\r\n\r\n  useEffect(() => {\r\n    if (!isReady) return;\r\n    const handleMessage = (msg: any) => {\r\n      const normalized = normalizeIncomingChat(msg);\r\n      pushChatMessage(\"peer\", normalized.text, normalized.timestamp);\r\n    };\r\n    const handleJoin = (member: any) => {\r\n      pushChatMessage(\r\n        \"system\",\r\n        `${member?.name || \"A player\"} joined the lobby`,\r\n      );\r\n    };\r\n    const handleLeave = (member: any) => {\r\n      pushChatMessage(\"system\", `${member?.name || \"A player\"} left the lobby`);\r\n    };\r\n\r\n    const syncLobbyState = () => {\r\n      setIsInLobby(kkGame.isInLobby());\r\n    };\r\n\r\n    kkGame.on(GameEvent.MESSAGE_RECEIVED, handleMessage);\r\n    kkGame.on(GameEvent.PLAYER_JOINED, handleJoin);\r\n    kkGame.on(GameEvent.PLAYER_LEFT, handleLeave);\r\n    kkGame.on(GameEvent.LOBBY_UPDATED, syncLobbyState);\r\n    kkGame.on(GameEvent.LOBBY_CLOSED, syncLobbyState);\r\n\r\n    return () => {\r\n      kkGame.off(GameEvent.MESSAGE_RECEIVED, handleMessage);\r\n      kkGame.off(GameEvent.PLAYER_JOINED, handleJoin);\r\n      kkGame.off(GameEvent.PLAYER_LEFT, handleLeave);\r\n      kkGame.off(GameEvent.LOBBY_UPDATED, syncLobbyState);\r\n      kkGame.off(GameEvent.LOBBY_CLOSED, syncLobbyState);\r\n    };\r\n  }, [isReady, normalizeIncomingChat, pushChatMessage]);\r\n\r\n  useEffect(() => {\r\n    if (!isInLobby) return;\r\n    chatEndRef.current?.scrollIntoView({ block: \"end\", behavior: \"smooth\" });\r\n  }, [isInLobby, chatMessages.length]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      stopDiscovery();\r\n    };\r\n  }, [stopDiscovery]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      void kkGame.shutdown().catch(() => undefined);\r\n    };\r\n  }, [kkGame]);\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <section className=\"glass rounded-xl p-6 border border-border/50 space-y-4\">\r\n        <h2 className=\"text-lg font-semibold\">Connection</h2>\r\n        <div className=\"grid md:grid-cols-3 gap-4\">\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm text-muted-foreground\">\r\n              Direct RPC (ip:port)\r\n            </label>\r\n            <input\r\n              value={rpcEndpoint}\r\n              onChange={(e) => setRpcEndpoint(e.target.value)}\r\n              className=\"w-full input\"\r\n              placeholder=\"127.0.0.1:16110\"\r\n              style={{ color: \"#0d9488\" }}\r\n              disabled={isConnecting || isConnected}\r\n            />\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              Leave empty to use public nodes/resolver.\r\n            </p>\r\n          </div>\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm text-muted-foreground\">Network ID</label>\r\n            <select\r\n              className=\"w-full input\"\r\n              style={{ color: \"#0d9488\" }}\r\n              value={networkId}\r\n              onChange={(e) => setNetworkId(e.target.value)}\r\n              disabled={isConnecting || isConnected}\r\n            >\r\n              <option value=\"mainnet\">Mainnet</option>\r\n              <option value=\"testnet-10\">Testnet-10</option>\r\n              <option value=\"devnet\">Devnet</option>\r\n              <option value=\"simnet\">Simnet</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"flex items-end gap-2\">\r\n            <button\r\n              onClick={connectKaspa}\r\n              className=\"btn-primary w-full whitespace-nowrap\"\r\n              disabled={isConnecting || isConnected}\r\n            >\r\n              <span className=\"inline-flex items-center justify-center gap-2\">\r\n                {isConnecting && <Spinner label=\"Connecting to Kaspa\" />}\r\n                {isConnecting\r\n                  ? \"Connecting to Kaspa...\"\r\n                  : isConnected\r\n                    ? \"Connected\"\r\n                    : \"Connect\"}\r\n              </span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {isConnected && (\r\n        <section className=\"glass rounded-xl p-6 border border-border/50 space-y-4\">\r\n          <h2 className=\"text-lg font-semibold\">Wallet</h2>\r\n          <div className=\"grid md:grid-cols-3 gap-4\">\r\n            <div className=\"space-y-2\">\r\n              {wallets.length > 0 && (\r\n                <div className=\"mb-2\">\r\n                  <label className=\"text-sm text-muted-foreground\">\r\n                    Select Existing Wallet\r\n                  </label>\r\n                  <select\r\n                    className=\"w-full input\"\r\n                    style={{ color: \"#0d9488\" }}\r\n                    value={walletName}\r\n                    onChange={(e) => setWalletName(e.target.value)}\r\n                  >\r\n                    <option value=\"\">-- Choose a wallet --</option>\r\n                    {wallets.map((wallet) => (\r\n                      <option key={wallet.id} value={wallet.value}>\r\n                        {wallet.label}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n              <label className=\"text-sm text-muted-foreground\">Wallet Name</label>\r\n              <input\r\n                value={walletName}\r\n                onChange={(e) => setWalletName(e.target.value)}\r\n                className=\"w-full input\"\r\n                placeholder=\"my-wallet\"\r\n                style={{ color: \"#0d9488\" }}\r\n              />\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm text-muted-foreground\">\r\n                Wallet Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={walletPassword}\r\n                onChange={(e) => setWalletPassword(e.target.value)}\r\n                onKeyDown={(e) => {\r\n                  if (e.key === \"Enter\") {\r\n                    e.preventDefault();\r\n                    if (!isInitializing && walletName && walletPassword) {\r\n                      void initWallet();\r\n                    }\r\n                  }\r\n                }}\r\n                className=\"w-full input\"\r\n                placeholder=\"password\"\r\n                style={{ color: \"#0d9488\" }}\r\n              />\r\n            </div>\r\n            <div className=\"flex items-end gap-2\">\r\n              <button\r\n                onClick={initWallet}\r\n                className=\"btn-primary w-full whitespace-nowrap\"\r\n                disabled={isInitializing || !walletName || !walletPassword}\r\n              >\r\n                <span className=\"inline-flex items-center justify-center gap-2\">\r\n                  {isInitializing && <Spinner label=\"Initializing wallet\" />}\r\n                  {isInitializing ? \"Initializing...\" : \"Initialize Wallet\"}\r\n                </span>\r\n              </button>\r\n              <button\r\n                onClick={refreshBalance}\r\n                className=\"btn-secondary\"\r\n                disabled={!isReady}\r\n              >\r\n                Refresh Balance\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"grid md:grid-cols-2 gap-4\">\r\n            <div className=\"p-4 rounded-lg bg-muted/40\">\r\n              <div className=\"text-xs text-muted-foreground\">Address</div>\r\n              <div className=\"mt-1 flex items-start justify-between gap-3\">\r\n                <div className=\"font-mono break-all text-sm\">\r\n                  {address || \"Not initialized\"}\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={copyAddress}\r\n                  disabled={!address || addressCopyState === \"copying\"}\r\n                  className=\"btn-secondary shrink-0\"\r\n                  aria-label=\"Copy wallet address\"\r\n                >\r\n                  <span className=\"inline-flex items-center justify-center gap-2\">\r\n                    {addressCopyState === \"copying\" && (\r\n                      <Spinner label=\"Copying address\" />\r\n                    )}\r\n                    {addressCopyState === \"copied\"\r\n                      ? \"Copied\"\r\n                      : addressCopyState === \"error\"\r\n                        ? \"Copy failed\"\r\n                        : \"Copy\"}\r\n                  </span>\r\n                </button>\r\n              </div>\r\n              <div className=\"mt-2 text-xs text-muted-foreground\">\r\n                Copy this address, then visit the{\" \"}\r\n                <a\r\n                  href=\"https://faucet-tn10.kaspanet.io\"\r\n                  target=\"_blank\"\r\n                  rel=\"noreferrer\"\r\n                  className=\"underline hover:opacity-80\"\r\n                >\r\n                  testnet-10 faucet\r\n                </a>{\" \"}\r\n                to get coins.\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4 rounded-lg bg-muted/40\">\r\n              <div className=\"text-xs text-muted-foreground\">Balance (KAS)</div>\r\n              <div className=\"text-xl font-semibold\">\r\n                {balance !== null ? balance.toFixed(4) : \"--\"}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {isReady && (\r\n        <section className=\"glass rounded-xl p-6 border border-border/50 space-y-4\">\r\n          <h2 className=\"text-lg font-semibold\">Username</h2>\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm text-muted-foreground\">Username:</label>\r\n            <input\r\n              value={displayName}\r\n              onChange={(e) => setDisplayName(e.target.value)}\r\n              className=\"w-full input\"\r\n              placeholder=\"Player name\"\r\n              style={{ color: \"#0d9488\" }}\r\n            />\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {isReady && (\r\n        <section className=\"glass rounded-xl p-6 border border-border/50 space-y-6\">\r\n          <h2 className=\"text-lg font-semibold\">Lobbies</h2>\r\n\r\n          <div className=\"grid lg:grid-cols-3 gap-6\">\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium\">Host a Lobby</h3>\r\n              <input\r\n                value={lobbyName}\r\n                onChange={(e) => setLobbyName(e.target.value)}\r\n                className=\"w-full input\"\r\n                placeholder=\"Lobby name\"\r\n                disabled={!isReady}\r\n                style={{ color: \"#0d9488\" }}\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                min={2}\r\n                max={8}\r\n                value={maxPlayers}\r\n                onChange={(e) => setMaxPlayers(Number(e.target.value))}\r\n                className=\"w-full input\"\r\n                disabled={!isReady}\r\n                style={{ color: \"#0d9488\" }}\r\n              />\r\n              <button\r\n                onClick={hostLobby}\r\n                className=\"btn-primary w-full\"\r\n                disabled={!isReady || isHostingLobby}\r\n              >\r\n                <span className=\"inline-flex items-center justify-center gap-2\">\r\n                  {isHostingLobby && <Spinner label=\"Hosting lobby\" />}\r\n                  {isHostingLobby ? \"Hosting...\" : \"Host a Lobby\"}\r\n                </span>\r\n              </button>\r\n              {hostResult && (\r\n                <div className=\"text-sm text-muted-foreground space-y-2\">\r\n                  <div className=\"break-all\">\r\n                    <span className=\"font-medium\">Lobby ID:</span>{\" \"}\r\n                    <span className=\"font-mono\">{hostResult.lobbyId || \"unknown\"}</span>\r\n                  </div>\r\n                  <div className=\"flex flex-wrap items-start gap-2\">\r\n                    <div className=\"min-w-0 flex-1 break-all\">\r\n                      <span className=\"font-medium\">Join Code:</span>{\" \"}\r\n                      <span className=\"font-mono\">\r\n                        {hostResult.joinCode || \"unknown\"}\r\n                      </span>\r\n                    </div>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={copyJoinCode}\r\n                      disabled={\r\n                        !hostResult.joinCode || joinCodeCopyState === \"copying\"\r\n                      }\r\n                      className=\"btn-secondary shrink-0 self-start\"\r\n                    >\r\n                      {joinCodeCopyState === \"copying\"\r\n                        ? \"Copying...\"\r\n                        : joinCodeCopyState === \"copied\"\r\n                          ? \"Copied\"\r\n                          : joinCodeCopyState === \"error\"\r\n                            ? \"Copy failed\"\r\n                            : \"Copy\"}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium\">Discover Lobbies</h3>\r\n              <button\r\n                onClick={isDiscovering ? stopDiscovery : startDiscovery}\r\n                className=\"btn-secondary w-full\"\r\n                disabled={!isReady}\r\n              >\r\n                {isDiscovering ? \"Stop Discovering\" : \"Discover Lobbies\"}\r\n              </button>\r\n              <div className=\"rounded-lg border border-border/50 bg-card/40 p-2 max-h-56 overflow-y-auto\">\r\n                <div className=\"space-y-2\">\r\n                  {discoveries.length === 0 && (\r\n                    <div className=\"text-sm text-muted-foreground\">\r\n                      No lobbies found yet.\r\n                    </div>\r\n                  )}\r\n                  {discoveries.map((item) => (\r\n                    <label\r\n                      key={item.id}\r\n                      className=\"flex items-center gap-2 text-sm\"\r\n                    >\r\n                      <input\r\n                        type=\"radio\"\r\n                        name=\"lobby\"\r\n                        value={item.id}\r\n                        checked={selectedDiscoveryId === item.id}\r\n                        onChange={() => setSelectedDiscoveryId(item.id)}\r\n                        disabled={!isReady}\r\n                      />\r\n                      <span className=\"text-base font-medium\">{item.label}</span>\r\n                    </label>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-4\">\r\n              <h3 className=\"font-medium\">Join Lobby</h3>\r\n              <div className=\"flex gap-2\">\r\n                <input\r\n                  value={joinCode}\r\n                  onChange={(e) => setJoinCode(e.target.value)}\r\n                  className=\"flex-1 input\"\r\n                  placeholder=\"Join code or lobby anchor\"\r\n                  disabled={!isReady}\r\n                  style={{ color: \"#0d9488\" }}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={copyJoinCode}\r\n                  disabled={!joinCode || joinCodeCopyState === \"copying\"}\r\n                  className=\"btn-secondary shrink-0\"\r\n                >\r\n                  {joinCodeCopyState === \"copying\"\r\n                    ? \"Copying...\"\r\n                    : joinCodeCopyState === \"copied\"\r\n                      ? \"Copied\"\r\n                      : joinCodeCopyState === \"error\"\r\n                        ? \"Copy failed\"\r\n                        : \"Copy\"}\r\n                </button>\r\n              </div>\r\n              <button\r\n                onClick={joinLobby}\r\n                className=\"btn-primary w-full\"\r\n                disabled={!isReady || isJoiningLobby}\r\n              >\r\n                <span className=\"inline-flex items-center justify-center gap-2\">\r\n                  {isJoiningLobby && <Spinner label=\"Joining lobby\" />}\r\n                  {isJoiningLobby ? \"Joining...\" : \"Join Lobby\"}\r\n                </span>\r\n              </button>\r\n              {isInLobby && (\r\n                <button onClick={leaveLobby} className=\"btn-secondary w-full\">\r\n                  Leave Lobby\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {isInLobby && (\r\n        <section className=\"glass rounded-xl p-6 border border-border/50 space-y-4\">\r\n          <h2 className=\"text-lg font-semibold\">Lobby Chat</h2>\r\n          <div className=\"flex gap-2\">\r\n            <input\r\n              value={chatInput}\r\n              onChange={(e) => setChatInput(e.target.value)}\r\n              onKeyDown={(e) => {\r\n                if (e.key === \"Enter\") {\r\n                  e.preventDefault();\r\n                  void sendChat();\r\n                }\r\n              }}\r\n              className=\"flex-1 input\"\r\n              placeholder=\"Type a message\"\r\n              style={{ color: \"#0d9488\" }}\r\n            />\r\n            <button\r\n              onClick={sendChat}\r\n              className=\"btn-primary\"\r\n              disabled={!isInLobby || isSendingChat}\r\n            >\r\n              <span className=\"inline-flex items-center justify-center gap-2\">\r\n                {isSendingChat && <Spinner label=\"Sending message\" />}\r\n                {isSendingChat ? \"Sending...\" : \"Send\"}\r\n              </span>\r\n            </button>\r\n          </div>\r\n          <div className=\"space-y-2 max-h-56 overflow-y-auto\">\r\n            {chatMessages.length === 0 && (\r\n              <div className=\"text-sm text-muted-foreground\">\r\n                No messages yet.\r\n              </div>\r\n            )}\r\n            {chatMessages.map((msg) => (\r\n              <div\r\n                key={msg.id}\r\n                className={`rounded-lg px-3 py-2 text-sm ${\r\n                  msg.from === \"me\"\r\n                    ? \"bg-primary/10 text-primary ml-12\"\r\n                    : msg.from === \"peer\"\r\n                      ? \"bg-neon-green/10 text-neon-green mr-12\"\r\n                      : \"bg-muted/50 text-muted-foreground\"\r\n                }`}\r\n              >\r\n                <div className=\"text-xs opacity-60\">\r\n                  {msg.timestamp.toLocaleTimeString()}\r\n                </div>\r\n                <div>{msg.text}</div>\r\n              </div>\r\n            ))}\r\n            <div ref={chatEndRef} />\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {error && (\r\n        <div className=\"rounded-lg border border-red-500/30 bg-red-500/10 p-4 text-sm text-red-400\">\r\n          {error}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n", "// kktp/adapters/kaspaAdapter.js\r\n// Network Adapter Interface - Bridges KKTP components to KaspaPortal\r\n// This abstraction allows swapping the underlying network (e.g., Kaspa \u2192 another chain)\r\n\r\nimport { BLOCKCHAIN } from '../core/constants.js';\r\nimport { kaspaPortal } from '../engine/kaspa/kaspaPortal.js';\r\n\r\n/**\r\n * KaspaAdapter - Bridge between KKTP protocol components and KaspaPortal.\r\n *\r\n * All KKTP components should use this adapter instead of importing\r\n * kaspaPortal directly. This provides:\r\n * - Clean separation of concerns\r\n * - Testability (can mock the adapter)\r\n * - Single integration point\r\n * - Network-agnostic KKTP layer (swap this adapter for another chain)\r\n *\r\n * @example\r\n * ```javascript\r\n * // In SessionFacade constructor:\r\n * const adapter = new KaspaAdapter(kaspaPortal);\r\n *\r\n * // Pass to internal services:\r\n * const keyDeriver = new KeyDeriver({ adapter, persistence });\r\n * ```\r\n */\r\nexport class KaspaAdapter {\r\n  /**\r\n  * @param {import('@/kktp/engine/kaspa/kaspaPortal.js').KaspaPortal} [portal]\r\n   */\r\n  constructor(portal = kaspaPortal) {\r\n    if (!portal) {\r\n      throw new Error(\"KaspaAdapter: portal instance is required\");\r\n    }\r\n    this._portal = portal;\r\n    this._heartbeatAnchorsEnabled = true;\r\n  }\r\n\r\n  /**\r\n   * Enable or disable heartbeat anchor broadcasts.\r\n   * @param {boolean} enabled\r\n   */\r\n  setHeartbeatAnchorsEnabled(enabled = true) {\r\n    this._heartbeatAnchorsEnabled = enabled !== false;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // LIFECYCLE & STATE\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Initialize the underlying portal (WASM).\r\n   * @returns {Promise<void>}\r\n   */\r\n  async init() {\r\n    if (typeof this._portal.init === \"function\") {\r\n      await this._portal.init();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Connect to the network.\r\n   * @param {Object} [options]\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async connect(options = {}) {\r\n    if (typeof this._portal.connect === \"function\") {\r\n      return await this._portal.connect(options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disconnect from the network.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async disconnect() {\r\n    if (typeof this._portal.disconnect === \"function\") {\r\n      await this._portal.disconnect();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if the underlying network is connected and ready.\r\n   * @returns {boolean}\r\n   */\r\n  get isReady() {\r\n    return this._portal.isReady;\r\n  }\r\n\r\n  /**\r\n   * Get the current wallet address (sync getter).\r\n   * @returns {string|null}\r\n   */\r\n  get address() {\r\n    return this._portal.address;\r\n  }\r\n\r\n  /**\r\n   * Get the current wallet address (async method for consistency).\r\n   * @returns {Promise<string|null>}\r\n   */\r\n  async getAddress() {\r\n    return this._portal.address;\r\n  }\r\n\r\n  /**\r\n   * Check if the wallet is initialized.\r\n   * @returns {boolean}\r\n   */\r\n  get isWalletInitialized() {\r\n    return this._portal.wallet?.walletInitialized ?? false;\r\n  }\r\n\r\n  /**\r\n   * Create or open a wallet.\r\n   * @param {Object} options\r\n   * @returns {Promise<{address: string, mnemonic?: string}>}\r\n   */\r\n  async createOrOpenWallet(options) {\r\n    return await this._portal.createOrOpenWallet(options);\r\n  }\r\n\r\n  /**\r\n   * Get the wallet mnemonic phrase for the active wallet.\r\n   * @returns {Promise<string>}\r\n   */\r\n  async getMnemonic() {\r\n    return await this._portal.getMnemonic();\r\n  }\r\n\r\n  /**\r\n   * Close the active wallet and clear sensitive data from memory.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async closeWallet() {\r\n    return await this._portal.closeWallet();\r\n  }\r\n\r\n  /**\r\n   * Delete a wallet from browser storage.\r\n   * @param {string} filename\r\n   * @returns {Promise<void>}\r\n   */\r\n  async deleteWallet(filename) {\r\n    return await this._portal.deleteWallet(filename);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // IDENTITY & KEY MANAGEMENT\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Generate signing and DH key pairs for KKTP identity.\r\n   * @param {number} index - Derivation index\r\n   * @returns {Promise<{sig: {publicKey: string, privateKey: string}, dh: {publicKey: string, privateKey: string}}>}\r\n   */\r\n  async generateIdentityKeys(index) {\r\n    return await this._portal.generateIdentityKeys(index);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // CRYPTOGRAPHY\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Sign a message with a private key.\r\n   * @param {string} privateKeyHex - Private key as hex string\r\n   * @param {string} message - Message to sign\r\n   * @returns {Promise<string>} Signature\r\n   */\r\n  async signMessage(privateKeyHex, message) {\r\n    return await this._portal.signMessage(privateKeyHex, message);\r\n  }\r\n\r\n  /**\r\n   * Verify a message signature.\r\n   * @param {string} publicKey - Public key\r\n   * @param {string} body - Original message\r\n   * @param {string} signature - Signature to verify\r\n   * @returns {Promise<boolean>} True if valid\r\n   */\r\n  async verifyMessage(publicKey, body, signature) {\r\n    return await this._portal.verifyMessage(publicKey, body, signature);\r\n  }\r\n\r\n  /**\r\n   * Start a Diffie-Hellman session for encrypted communication.\r\n   * @param {number} keyIndex - Derivation index\r\n   * @param {string} [privateKey] - Existing private key (optional)\r\n   * @returns {Promise<Object>} DH session with deriveSharedSecret method\r\n   */\r\n  async startSession(keyIndex, privateKey) {\r\n    return await this._portal.startSession(keyIndex, privateKey);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // VRF & RANDOMNESS\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Initialize VRF (must be called before using VRF features).\r\n   */\r\n  async initVRF() {\r\n    if (typeof this._portal.initVRF === \"function\") {\r\n      await this._portal.initVRF();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate high-quality randomness from QRNG, Bitcoin, and Kaspa.\r\n   * @returns {Promise<string>} 64-character hex string\r\n   */\r\n  async generateFullRandomness() {\r\n    return await this._portal.generateFullRandomness();\r\n  }\r\n\r\n  /**\r\n   * Generate randomness from Bitcoin and Kaspa only (no QRNG).\r\n   * Use as fallback when QRNG is unavailable.\r\n   * @returns {Promise<string>} 64-character hex string\r\n   */\r\n  async generatePartialRandomness() {\r\n    return await this._portal.generatePartialRandomness();\r\n  }\r\n\r\n  /**\r\n   * Generate a verifiable random proof using blockchain entropy.\r\n   * @param {Object} options - VRF options\r\n   * @param {string} options.seedInput - Seed value\r\n   * @returns {Promise<{finalOutput: string, proof: Object}>}\r\n   */\r\n  async prove(options) {\r\n    return await this._portal.prove(options);\r\n  }\r\n\r\n  /**\r\n   * Verify a VRF proof.\r\n   * @param {string|Object} valueOrResult - Value or result object to verify\r\n   * @param {Object} [optionalProof] - Proof if not included in first param\r\n   * @param {string} [expectedInput] - Expected VRF input for validation\r\n   * @returns {Promise<boolean>} True if valid\r\n   */\r\n  async verify(valueOrResult, optionalProof, expectedInput) {\r\n    return await this._portal.verify(valueOrResult, optionalProof);\r\n  }\r\n\r\n  /**\r\n   * Shuffle an array using VRF randomness.\r\n   * @param {Array} array - Array to shuffle\r\n   * @returns {Promise<Array>} Shuffled array\r\n   */\r\n  async shuffle(array) {\r\n    return await this._portal.shuffle(array);\r\n  }\r\n\r\n  /**\r\n   * Fetch recent Kaspa block hashes for entropy.\r\n   * @param {number} n - Number of blocks\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getKaspaBlocks(n) {\r\n    return await this._portal.getKaspaBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Fetch recent Bitcoin block hashes for entropy.\r\n   * @param {number} n - Number of blocks\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getBitcoinBlocks(n) {\r\n    return await this._portal.getBitcoinBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Fetch quantum random numbers from a QRNG provider.\r\n   * @param {string} provider - 'nist', 'anu', or 'qrandom'\r\n   * @param {number} length - Number of bytes\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getQRNG(provider, length) {\r\n    return await this._portal.getQRNG(provider, length);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // TRANSACTION & BROADCASTING\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Send a transaction with a payload.\r\n   * @param {Object} options - Transaction options\r\n   * @param {string} options.toAddress - Destination address\r\n   * @param {string} [options.amount='1'] - Amount in KAS\r\n   * @param {string} [options.payload] - OP_RETURN payload\r\n   * @returns {Promise<Object>} Transaction result\r\n   */\r\n  async send(options) {\r\n    return await this._portal.send(options);\r\n  }\r\n\r\n  /**\r\n   * Get spendable wallet balance in sompi.\r\n   * @returns {Promise<bigint>}\r\n   */\r\n  async getBalance() {\r\n    return await this._portal.getBalance();\r\n  }\r\n\r\n  /**\r\n   * Get private keys for manual transaction signing.\r\n   * @param {Object} [options]\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getPrivateKeys(options) {\r\n    return await this._portal.getPrivateKeys(options);\r\n  }\r\n\r\n  /**\r\n   * Send a transaction with full UTXO control.\r\n   * @param {Object} options\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async manualSend(options) {\r\n    const payload = options?.payload;\r\n    const payloadStr = typeof payload === 'string' ? payload : '';\r\n    const payloadHex = payloadStr.startsWith('0x') ? payloadStr.slice(2) : payloadStr;\r\n    const isHeartbeatPayload =\r\n      payloadStr.startsWith(BLOCKCHAIN.PREFIX_HEARTBEAT) ||\r\n      payloadHex.toLowerCase().startsWith(BLOCKCHAIN.PREFIX_HEARTBEAT_HEX);\r\n    if (\r\n      isHeartbeatPayload &&\r\n      !this._heartbeatAnchorsEnabled\r\n    ) {\r\n      throw new Error('Heartbeat anchors disabled');\r\n    }\r\n    return await this._portal.manualSend(options);\r\n  }\r\n\r\n  /**\r\n   * Split UTXOs into multiple outputs.\r\n   * @param {Object} options\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async splitUtxos(options) {\r\n    return await this._portal.splitUtxos(options);\r\n  }\r\n\r\n  /**\r\n   * Consolidate many UTXOs into fewer outputs.\r\n   * @param {Object} options\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async consolidateUtxos(options) {\r\n    return await this._portal.consolidateUtxos(options);\r\n  }\r\n\r\n  /**\r\n   * Build a transaction without broadcasting it.\r\n   * @param {Object} options\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async buildManualTransaction(options) {\r\n    return await this._portal.buildManualTransaction(options);\r\n  }\r\n\r\n  /**\r\n   * Build a UTXO split transaction without broadcasting it.\r\n   * @param {Object} options\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async buildSplitUtxoTransaction(options) {\r\n    return await this._portal.buildSplitUtxoTransaction(options);\r\n  }\r\n\r\n  /**\r\n   * Estimate transaction fee.\r\n   * @param {number} inputCount\r\n   * @param {number} outputCount\r\n   * @param {number} [payloadBytes=0]\r\n   * @returns {bigint}\r\n   */\r\n  estimateFee(inputCount, outputCount, payloadBytes = 0) {\r\n    return this._portal.estimateFee(inputCount, outputCount, payloadBytes);\r\n  }\r\n\r\n  /**\r\n   * Pick the address that has the single largest UTXO.\r\n   * @param {Object} [options]\r\n   * @returns {Promise<string>}\r\n   */\r\n  async getAddressWithLargestUtxo(options) {\r\n    return await this._portal.getAddressWithLargestUtxo(options);\r\n  }\r\n\r\n  /**\r\n   * Fetch UTXOs for an address.\r\n   * @param {string} address\r\n   * @param {Object} [options]\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getUtxos(address, options) {\r\n    return await this._portal.getUtxos(address, options);\r\n  }\r\n\r\n  /**\r\n   * Analyze UTXOs for an address.\r\n   * @param {string} address\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async analyzeUtxos(address) {\r\n    return await this._portal.analyzeUtxos(address);\r\n  }\r\n\r\n  /**\r\n   * Mark UTXOs as spent for optimistic UI updates.\r\n   * @param {Array} entries\r\n   */\r\n  markUtxosAsSpent(entries) {\r\n    this._portal.markUtxosAsSpent(entries);\r\n  }\r\n\r\n  /**\r\n   * Clear spent UTXO tracking.\r\n   * @param {Array} [entries]\r\n   */\r\n  clearSpentUtxos(entries) {\r\n    this._portal.clearSpentUtxos(entries);\r\n  }\r\n\r\n  /**\r\n   * Invalidate cached UTXOs to force a fresh fetch.\r\n   * @param {string} [address]\r\n   */\r\n  invalidateUtxoCache(address) {\r\n    this._portal.invalidateUtxoCache(address);\r\n  }\r\n\r\n  /**\r\n   * Start automatic UTXO monitoring and replenishment.\r\n   * @param {Object} [options]\r\n   * @returns {Promise<void>}\r\n   */\r\n  async startHeartbeat(options = {}) {\r\n    return await this._portal.startHeartbeat(options);\r\n  }\r\n\r\n  /**\r\n   * Stop the heartbeat monitor.\r\n   */\r\n  stopHeartbeat() {\r\n    return this._portal.stopHeartbeat();\r\n  }\r\n\r\n  /**\r\n   * Check if the heartbeat monitor is running.\r\n   * @returns {boolean}\r\n   */\r\n  get isHeartbeatRunning() {\r\n    return this._portal.isHeartbeatRunning;\r\n  }\r\n\r\n  /**\r\n   * Get current heartbeat configuration (excludes private keys).\r\n   * @returns {Object|null}\r\n   */\r\n  get heartbeatConfig() {\r\n    return this._portal.heartbeatConfig;\r\n  }\r\n\r\n  /**\r\n   * Manually trigger a heartbeat check.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async triggerHeartbeat() {\r\n    return await this._portal.triggerHeartbeat();\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SCANNER & PREFIX MANAGEMENT\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Add a payload prefix to watch for on the blockchain.\r\n   * @param {string} prefix - Prefix to match (e.g., 'KKTP:abc123...')\r\n   */\r\n  addPrefix(prefix) {\r\n    this._portal.addPrefix?.(prefix);\r\n  }\r\n\r\n  /**\r\n   * Add a hex payload prefix to watch for on the blockchain.\r\n   * @param {string} prefixHex - Hex prefix to match\r\n   */\r\n  addPrefixHex(prefixHex) {\r\n    this._portal.addPrefixHex?.(prefixHex);\r\n  }\r\n\r\n  /**\r\n   * Remove a prefix from the watch list.\r\n   * @param {string} prefix - Prefix to stop watching\r\n   */\r\n  removePrefix(prefix) {\r\n    this._portal.removePrefix?.(prefix);\r\n  }\r\n\r\n  /**\r\n   * Remove a hex prefix from the watch list.\r\n   * @param {string} prefixHex - Hex prefix to stop watching\r\n   */\r\n  removePrefixHex(prefixHex) {\r\n    this._portal.removePrefixHex?.(prefixHex);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to a prefix (alias of addPrefix for compatibility).\r\n   * @param {string} prefix - Prefix to match\r\n   */\r\n  async subscribeToPrefix(prefix) {\r\n    this.addPrefix(prefix);\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe from a prefix (alias of removePrefix for compatibility).\r\n   * @param {string} prefix - Prefix to remove\r\n   */\r\n  async unsubscribeFromPrefix(prefix) {\r\n    this.removePrefix(prefix);\r\n  }\r\n\r\n  /**\r\n   * Set a single scanner prefix.\r\n   * @param {string} prefix - Prefix to match\r\n   */\r\n  setScannerPrefix(prefix) {\r\n    this._portal.setScannerPrefix?.(prefix);\r\n  }\r\n\r\n  /**\r\n   * Start the live blockchain scanner.\r\n   * @param {Function} [onBlock] - Called for each new block\r\n   * @returns {Promise<void>}\r\n   */\r\n  async startScanner(onBlock) {\r\n    if (typeof this._portal.startScanner === \"function\") {\r\n      return await this._portal.startScanner(onBlock);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Stop the live blockchain scanner.\r\n   */\r\n  stopScanner() {\r\n    this._portal.stopScanner?.();\r\n  }\r\n\r\n  /**\r\n   * Subscribe to new block events.\r\n   * @param {Function} cb - Callback receiving block data\r\n   * @returns {Function|undefined} Unsubscribe function if available\r\n   */\r\n  onNewBlock(cb) {\r\n    if (typeof this._portal.onNewBlock === \"function\") {\r\n      return this._portal.onNewBlock(cb);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Subscribe to matching transaction events from the scanner.\r\n   * @param {Function} cb - Callback receiving match data\r\n   * @returns {Function|undefined} Unsubscribe function if available\r\n   */\r\n  onNewTransactionMatch(cb) {\r\n    if (this._portal?.intelligence?.onNewTransactionMatch) {\r\n      return this._portal.intelligence.onNewTransactionMatch(cb);\r\n    }\r\n    if (typeof this._portal.onNewTransactionMatch === \"function\") {\r\n      this._portal.onNewTransactionMatch(cb);\r\n      return () => {};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the current scanner prefix.\r\n   * @returns {string|null}\r\n   */\r\n  getScannerPrefix() {\r\n    return this._portal.getScannerPrefix?.() || null;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // BLOCKCHAIN SEARCH\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Walk the DAG from startHash to endHash (or present).\r\n   * @param {Object} options\r\n   * @param {string} options.startHash - Block hash to start from\r\n   * @param {string} [options.endHash] - Optional block hash to end at\r\n   * @param {Array<string>} [options.prefixes] - Optional payload prefixes to match\r\n   * @param {function} options.onMatch - Callback for each matching transaction\r\n   * @param {number} [options.maxSeconds] - Max seconds to run (default 30)\r\n   * @param {number} [options.minTimestamp] - Min timestamp to consider (default 0)\r\n   * @param {function} [options.logFn] - Optional logging function\r\n   * @returns {Promise<void>}\r\n   */\r\n  async walkDagRange(options) {\r\n    return await this._portal.walkDagRange(options);\r\n  }\r\n}\r\n", "let wasm;\r\n\r\nconst heap = new Array(128).fill(undefined);\r\n\r\nheap.push(undefined, null, true, false);\r\n\r\nfunction getObject(idx) {\r\n  return heap[idx];\r\n}\r\n\r\nlet heap_next = heap.length;\r\n\r\nfunction addHeapObject(obj) {\r\n  if (heap_next === heap.length) heap.push(heap.length + 1);\r\n  const idx = heap_next;\r\n  heap_next = heap[idx];\r\n\r\n  heap[idx] = obj;\r\n  return idx;\r\n}\r\n\r\nfunction handleError(f, args) {\r\n  try {\r\n    return f.apply(this, args);\r\n  } catch (e) {\r\n    wasm.__wbindgen_export_0(addHeapObject(e));\r\n  }\r\n}\r\n\r\nlet WASM_VECTOR_LEN = 0;\r\n\r\nlet cachedUint8ArrayMemory0 = null;\r\n\r\nfunction getUint8ArrayMemory0() {\r\n  if (\r\n    cachedUint8ArrayMemory0 === null ||\r\n    cachedUint8ArrayMemory0.byteLength === 0\r\n  ) {\r\n    cachedUint8ArrayMemory0 = new Uint8Array(wasm.memory.buffer);\r\n  }\r\n  return cachedUint8ArrayMemory0;\r\n}\r\n\r\nconst cachedTextEncoder =\r\n  typeof TextEncoder !== \"undefined\"\r\n    ? new TextEncoder(\"utf-8\")\r\n    : {\r\n        encode: () => {\r\n          throw Error(\"TextEncoder not available\");\r\n        },\r\n      };\r\n\r\nconst encodeString =\r\n  typeof cachedTextEncoder.encodeInto === \"function\"\r\n    ? function (arg, view) {\r\n        return cachedTextEncoder.encodeInto(arg, view);\r\n      }\r\n    : function (arg, view) {\r\n        const buf = cachedTextEncoder.encode(arg);\r\n        view.set(buf);\r\n        return {\r\n          read: arg.length,\r\n          written: buf.length,\r\n        };\r\n      };\r\n\r\nfunction passStringToWasm0(arg, malloc, realloc) {\r\n  if (realloc === undefined) {\r\n    const buf = cachedTextEncoder.encode(arg);\r\n    const ptr = malloc(buf.length, 1) >>> 0;\r\n    getUint8ArrayMemory0()\r\n      .subarray(ptr, ptr + buf.length)\r\n      .set(buf);\r\n    WASM_VECTOR_LEN = buf.length;\r\n    return ptr;\r\n  }\r\n\r\n  let len = arg.length;\r\n  let ptr = malloc(len, 1) >>> 0;\r\n\r\n  const mem = getUint8ArrayMemory0();\r\n\r\n  let offset = 0;\r\n\r\n  for (; offset < len; offset++) {\r\n    const code = arg.charCodeAt(offset);\r\n    if (code > 0x7f) break;\r\n    mem[ptr + offset] = code;\r\n  }\r\n\r\n  if (offset !== len) {\r\n    if (offset !== 0) {\r\n      arg = arg.slice(offset);\r\n    }\r\n    ptr = realloc(ptr, len, (len = offset + arg.length * 3), 1) >>> 0;\r\n    const view = getUint8ArrayMemory0().subarray(ptr + offset, ptr + len);\r\n    const ret = encodeString(arg, view);\r\n\r\n    offset += ret.written;\r\n    ptr = realloc(ptr, len, offset, 1) >>> 0;\r\n  }\r\n\r\n  WASM_VECTOR_LEN = offset;\r\n  return ptr;\r\n}\r\n\r\nlet cachedDataViewMemory0 = null;\r\n\r\nfunction getDataViewMemory0() {\r\n  if (\r\n    cachedDataViewMemory0 === null ||\r\n    cachedDataViewMemory0.buffer.detached === true ||\r\n    (cachedDataViewMemory0.buffer.detached === undefined &&\r\n      cachedDataViewMemory0.buffer !== wasm.memory.buffer)\r\n  ) {\r\n    cachedDataViewMemory0 = new DataView(wasm.memory.buffer);\r\n  }\r\n  return cachedDataViewMemory0;\r\n}\r\n\r\nconst cachedTextDecoder =\r\n  typeof TextDecoder !== \"undefined\"\r\n    ? new TextDecoder(\"utf-8\", { ignoreBOM: true, fatal: true })\r\n    : {\r\n        decode: () => {\r\n          throw Error(\"TextDecoder not available\");\r\n        },\r\n      };\r\n\r\nif (typeof TextDecoder !== \"undefined\") {\r\n  cachedTextDecoder.decode();\r\n}\r\n\r\nfunction getStringFromWasm0(ptr, len) {\r\n  ptr = ptr >>> 0;\r\n  return cachedTextDecoder.decode(\r\n    getUint8ArrayMemory0().subarray(ptr, ptr + len),\r\n  );\r\n}\r\n\r\nfunction isLikeNone(x) {\r\n  return x === undefined || x === null;\r\n}\r\n\r\nfunction dropObject(idx) {\r\n  if (idx < 132) return;\r\n  heap[idx] = heap_next;\r\n  heap_next = idx;\r\n}\r\n\r\nfunction takeObject(idx) {\r\n  const ret = getObject(idx);\r\n  dropObject(idx);\r\n  return ret;\r\n}\r\n\r\nfunction getArrayU8FromWasm0(ptr, len) {\r\n  ptr = ptr >>> 0;\r\n  return getUint8ArrayMemory0().subarray(ptr / 1, ptr / 1 + len);\r\n}\r\n\r\nconst CLOSURE_DTORS =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((state) => {\r\n        wasm.__wbindgen_export_4.get(state.dtor)(state.a, state.b);\r\n      });\r\n\r\nfunction makeMutClosure(arg0, arg1, dtor, f) {\r\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\r\n  const real = (...args) => {\r\n    // First up with a closure we increment the internal reference\r\n    // count. This ensures that the Rust closure environment won't\r\n    // be deallocated while we're invoking it.\r\n    state.cnt++;\r\n    const a = state.a;\r\n    state.a = 0;\r\n    try {\r\n      return f(a, state.b, ...args);\r\n    } finally {\r\n      if (--state.cnt === 0) {\r\n        wasm.__wbindgen_export_4.get(state.dtor)(a, state.b);\r\n        CLOSURE_DTORS.unregister(state);\r\n      } else {\r\n        state.a = a;\r\n      }\r\n    }\r\n  };\r\n  real.original = state;\r\n  CLOSURE_DTORS.register(real, state, state);\r\n  return real;\r\n}\r\n\r\nfunction makeClosure(arg0, arg1, dtor, f) {\r\n  const state = { a: arg0, b: arg1, cnt: 1, dtor };\r\n  const real = (...args) => {\r\n    // First up with a closure we increment the internal reference\r\n    // count. This ensures that the Rust closure environment won't\r\n    // be deallocated while we're invoking it.\r\n    state.cnt++;\r\n    try {\r\n      return f(state.a, state.b, ...args);\r\n    } finally {\r\n      if (--state.cnt === 0) {\r\n        wasm.__wbindgen_export_4.get(state.dtor)(state.a, state.b);\r\n        state.a = 0;\r\n        CLOSURE_DTORS.unregister(state);\r\n      }\r\n    }\r\n  };\r\n  real.original = state;\r\n  CLOSURE_DTORS.register(real, state, state);\r\n  return real;\r\n}\r\n\r\nfunction debugString(val) {\r\n  // primitive types\r\n  const type = typeof val;\r\n  if (type == \"number\" || type == \"boolean\" || val == null) {\r\n    return `${val}`;\r\n  }\r\n  if (type == \"string\") {\r\n    return `\"${val}\"`;\r\n  }\r\n  if (type == \"symbol\") {\r\n    const description = val.description;\r\n    if (description == null) {\r\n      return \"Symbol\";\r\n    } else {\r\n      return `Symbol(${description})`;\r\n    }\r\n  }\r\n  if (type == \"function\") {\r\n    const name = val.name;\r\n    if (typeof name == \"string\" && name.length > 0) {\r\n      return `Function(${name})`;\r\n    } else {\r\n      return \"Function\";\r\n    }\r\n  }\r\n  // objects\r\n  if (Array.isArray(val)) {\r\n    const length = val.length;\r\n    let debug = \"[\";\r\n    if (length > 0) {\r\n      debug += debugString(val[0]);\r\n    }\r\n    for (let i = 1; i < length; i++) {\r\n      debug += \", \" + debugString(val[i]);\r\n    }\r\n    debug += \"]\";\r\n    return debug;\r\n  }\r\n  // Test for built-in\r\n  const builtInMatches = /\\[object ([^\\]]+)\\]/.exec(toString.call(val));\r\n  let className;\r\n  if (builtInMatches && builtInMatches.length > 1) {\r\n    className = builtInMatches[1];\r\n  } else {\r\n    // Failed to match the standard '[object ClassName]'\r\n    return toString.call(val);\r\n  }\r\n  if (className == \"Object\") {\r\n    // we're a user defined class or Object\r\n    // JSON.stringify avoids problems with cycles, and is generally much\r\n    // easier than looping through ownProperties of `val`.\r\n    try {\r\n      return \"Object(\" + JSON.stringify(val) + \")\";\r\n    } catch (_) {\r\n      return \"Object\";\r\n    }\r\n  }\r\n  // errors\r\n  if (val instanceof Error) {\r\n    return `${val.name}: ${val.message}\\n${val.stack}`;\r\n  }\r\n  // TODO we could test for more things here, like `Set`s and `Map`s.\r\n  return className;\r\n}\r\n\r\nfunction _assertClass(instance, klass) {\r\n  if (!(instance instanceof klass)) {\r\n    throw new Error(`expected instance of ${klass.name}`);\r\n  }\r\n}\r\n\r\nlet stack_pointer = 128;\r\n\r\nfunction addBorrowedObject(obj) {\r\n  if (stack_pointer == 1) throw new Error(\"out of js stack\");\r\n  heap[--stack_pointer] = obj;\r\n  return stack_pointer;\r\n}\r\n/**\r\n * Returns true if the script passed is a pay-to-script-hash (P2SH) format, false otherwise.\r\n * @param script - The script ({@link HexString} or Uint8Array).\r\n * @category Wallet SDK\r\n * @param {HexString | Uint8Array} script\r\n * @returns {boolean}\r\n */\r\nexport function isScriptPayToScriptHash(script) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.isScriptPayToScriptHash(retptr, addHeapObject(script));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return r0 !== 0;\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns returns true if the script passed is an ECDSA pay-to-pubkey.\r\n * @param script - The script ({@link HexString} or Uint8Array).\r\n * @category Wallet SDK\r\n * @param {HexString | Uint8Array} script\r\n * @returns {boolean}\r\n */\r\nexport function isScriptPayToPubkeyECDSA(script) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.isScriptPayToPubkeyECDSA(retptr, addHeapObject(script));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return r0 !== 0;\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns true if the script passed is a pay-to-pubkey.\r\n * @param script - The script ({@link HexString} or Uint8Array).\r\n * @category Wallet SDK\r\n * @param {HexString | Uint8Array} script\r\n * @returns {boolean}\r\n */\r\nexport function isScriptPayToPubkey(script) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.isScriptPayToPubkey(retptr, addHeapObject(script));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return r0 !== 0;\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the address encoded in a script public key.\r\n * @param script_public_key - The script public key ({@link ScriptPublicKey}).\r\n * @param network - The network type.\r\n * @category Wallet SDK\r\n * @param {ScriptPublicKey | HexString} script_public_key\r\n * @param {NetworkType | NetworkId | string} network\r\n * @returns {Address | undefined}\r\n */\r\nexport function addressFromScriptPublicKey(script_public_key, network) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.addressFromScriptPublicKey(\r\n      retptr,\r\n      addBorrowedObject(script_public_key),\r\n      addBorrowedObject(network),\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Generates a signature script that fits a pay-to-script-hash script.\r\n * @param redeem_script - The redeem script ({@link HexString} or Uint8Array).\r\n * @param signature - The signature ({@link HexString} or Uint8Array).\r\n * @category Wallet SDK\r\n * @param {HexString | Uint8Array} redeem_script\r\n * @param {HexString | Uint8Array} signature\r\n * @returns {HexString}\r\n */\r\nexport function payToScriptHashSignatureScript(redeem_script, signature) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.payToScriptHashSignatureScript(\r\n      retptr,\r\n      addHeapObject(redeem_script),\r\n      addHeapObject(signature),\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Takes a script and returns an equivalent pay-to-script-hash script.\r\n * @param redeem_script - The redeem script ({@link HexString} or Uint8Array).\r\n * @category Wallet SDK\r\n * @param {HexString | Uint8Array} redeem_script\r\n * @returns {ScriptPublicKey}\r\n */\r\nexport function payToScriptHashScript(redeem_script) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.payToScriptHashScript(retptr, addHeapObject(redeem_script));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return ScriptPublicKey.__wrap(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Creates a new script to pay a transaction output to the specified address.\r\n * @category Wallet SDK\r\n * @param {Address | string} address\r\n * @returns {ScriptPublicKey}\r\n */\r\nexport function payToAddressScript(address) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.payToAddressScript(retptr, addBorrowedObject(address));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return ScriptPublicKey.__wrap(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Calculates target from difficulty, based on set_difficulty function on\r\n * <https://github.com/tmrlvi/kaspa-miner/blob/bf361d02a46c580f55f46b5dfa773477634a5753/src/client/stratum.rs#L375>\r\n * @category Mining\r\n * @param {number} difficulty\r\n * @returns {bigint}\r\n */\r\nexport function calculateTarget(difficulty) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.calculateTarget(retptr, difficulty);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `argon2sha256iv` hash function.\r\n * @param text - The text string to hash.\r\n * @category Encryption\r\n * @param {string} text\r\n * @param {number} byteLength\r\n * @returns {HexString}\r\n */\r\nexport function argon2sha256ivFromText(text, byteLength) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      text,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.argon2sha256ivFromText(retptr, ptr0, len0, byteLength);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `argon2sha256iv` hash function.\r\n * @param data - The data to hash ({@link HexString} or Uint8Array).\r\n * @category Encryption\r\n * @param {HexString | Uint8Array} data\r\n * @param {number} hashLength\r\n * @returns {HexString}\r\n */\r\nexport function argon2sha256ivFromBinary(data, hashLength) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.argon2sha256ivFromBinary(retptr, addHeapObject(data), hashLength);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `SHA256d` hash function.\r\n * @param {string} text - The text string to hash.\r\n * @category Encryption\r\n * @param {string} text\r\n * @returns {HexString}\r\n */\r\nexport function sha256dFromText(text) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      text,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.sha256dFromText(retptr, ptr0, len0);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `SHA256d` hash function.\r\n * @param data - The data to hash ({@link HexString} or Uint8Array).\r\n * @category Encryption\r\n * @param {HexString | Uint8Array} data\r\n * @returns {HexString}\r\n */\r\nexport function sha256dFromBinary(data) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.sha256dFromBinary(retptr, addHeapObject(data));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `SHA256` hash function.\r\n * @param {string} text - The text string to hash.\r\n * @category Encryption\r\n * @param {string} text\r\n * @returns {HexString}\r\n */\r\nexport function sha256FromText(text) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      text,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.sha256FromText(retptr, ptr0, len0);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `SHA256` hash function.\r\n * @param data - The data to hash ({@link HexString} or Uint8Array).\r\n * @category Encryption\r\n * @param {HexString | Uint8Array} data\r\n * @returns {HexString}\r\n */\r\nexport function sha256FromBinary(data) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.sha256FromBinary(retptr, addHeapObject(data));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `decryptXChaCha20Poly1305` function.\r\n * @category Encryption\r\n * @param {string} base64string\r\n * @param {string} password\r\n * @returns {string}\r\n */\r\nexport function decryptXChaCha20Poly1305(base64string, password) {\r\n  let deferred4_0;\r\n  let deferred4_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      base64string,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ptr1 = passStringToWasm0(\r\n      password,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    wasm.decryptXChaCha20Poly1305(retptr, ptr0, len0, ptr1, len1);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    var ptr3 = r0;\r\n    var len3 = r1;\r\n    if (r3) {\r\n      ptr3 = 0;\r\n      len3 = 0;\r\n      throw takeObject(r2);\r\n    }\r\n    deferred4_0 = ptr3;\r\n    deferred4_1 = len3;\r\n    return getStringFromWasm0(ptr3, len3);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    wasm.__wbindgen_export_3(deferred4_0, deferred4_1, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * WASM32 binding for `encryptXChaCha20Poly1305` function.\r\n * @returns The encrypted text as a base64 string.\r\n * @category Encryption\r\n * @param {string} plainText\r\n * @param {string} password\r\n * @returns {string}\r\n */\r\nexport function encryptXChaCha20Poly1305(plainText, password) {\r\n  let deferred4_0;\r\n  let deferred4_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      plainText,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ptr1 = passStringToWasm0(\r\n      password,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    wasm.encryptXChaCha20Poly1305(retptr, ptr0, len0, ptr1, len1);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    var ptr3 = r0;\r\n    var len3 = r1;\r\n    if (r3) {\r\n      ptr3 = 0;\r\n      len3 = 0;\r\n      throw takeObject(r2);\r\n    }\r\n    deferred4_0 = ptr3;\r\n    deferred4_1 = len3;\r\n    return getStringFromWasm0(ptr3, len3);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    wasm.__wbindgen_export_3(deferred4_0, deferred4_1, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * `calculateStorageMass()` is a helper function to compute the storage mass of inputs and outputs.\r\n * This function can be use to calculate the storage mass of transaction inputs and outputs.\r\n * Note that the storage mass is only a component of the total transaction mass. You are not\r\n * meant to use this function by itself and should use `calculateTransactionMass()` instead.\r\n * This function purely exists for diagnostic purposes and to help with complex algorithms that\r\n * may require a manual UTXO selection for identifying UTXOs and outputs needed for low storage mass.\r\n *\r\n * @category Wallet SDK\r\n * @see {@link maximumStandardTransactionMass}\r\n * @see {@link calculateTransactionMass}\r\n * @param {NetworkId | string} network_id\r\n * @param {Array<number>} input_values\r\n * @param {Array<number>} output_values\r\n * @returns {bigint | undefined}\r\n */\r\nexport function calculateStorageMass(network_id, input_values, output_values) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-32);\r\n    wasm.calculateStorageMass(\r\n      retptr,\r\n      addHeapObject(network_id),\r\n      addBorrowedObject(input_values),\r\n      addBorrowedObject(output_values),\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r2 = getDataViewMemory0().getBigInt64(retptr + 8 * 1, true);\r\n    var r4 = getDataViewMemory0().getInt32(retptr + 4 * 4, true);\r\n    var r5 = getDataViewMemory0().getInt32(retptr + 4 * 5, true);\r\n    if (r5) {\r\n      throw takeObject(r4);\r\n    }\r\n    return r0 === 0 ? undefined : BigInt.asUintN(64, r2);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(32);\r\n    heap[stack_pointer++] = undefined;\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * `calculateTransactionFee()` returns minimum fees needed for the transaction to be\r\n * accepted by the network. If the transaction is invalid or the mass can not be calculated,\r\n * the function throws an error. If the mass exceeds the maximum standard transaction mass,\r\n * the function returns `undefined`.\r\n *\r\n * @category Wallet SDK\r\n * @see {@link maximumStandardTransactionMass}\r\n * @see {@link calculateTransactionMass}\r\n * @see {@link updateTransactionMass}\r\n * @param {NetworkId | string} network_id\r\n * @param {ITransaction | Transaction} tx\r\n * @param {number | null} [minimum_signatures]\r\n * @returns {bigint | undefined}\r\n */\r\nexport function calculateTransactionFee(network_id, tx, minimum_signatures) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-32);\r\n    wasm.calculateTransactionFee(\r\n      retptr,\r\n      addHeapObject(network_id),\r\n      addBorrowedObject(tx),\r\n      isLikeNone(minimum_signatures) ? 0xffffff : minimum_signatures,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r2 = getDataViewMemory0().getBigInt64(retptr + 8 * 1, true);\r\n    var r4 = getDataViewMemory0().getInt32(retptr + 4 * 4, true);\r\n    var r5 = getDataViewMemory0().getInt32(retptr + 4 * 5, true);\r\n    if (r5) {\r\n      throw takeObject(r4);\r\n    }\r\n    return r0 === 0 ? undefined : BigInt.asUintN(64, r2);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(32);\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * `updateTransactionMass()` updates the mass property of the passed transaction.\r\n * If the transaction is invalid, the function throws an error.\r\n *\r\n * The function returns `true` if the mass is within the maximum standard transaction mass and\r\n * the transaction mass is updated. Otherwise, the function returns `false`.\r\n *\r\n * This is similar to `calculateTransactionMass()` but modifies the supplied\r\n * `Transaction` object.\r\n *\r\n * @category Wallet SDK\r\n * @see {@link maximumStandardTransactionMass}\r\n * @see {@link calculateTransactionMass}\r\n * @see {@link calculateTransactionFee}\r\n * @param {NetworkId | string} network_id\r\n * @param {Transaction} tx\r\n * @param {number | null} [minimum_signatures]\r\n * @returns {boolean}\r\n */\r\nexport function updateTransactionMass(network_id, tx, minimum_signatures) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    _assertClass(tx, Transaction);\r\n    wasm.updateTransactionMass(\r\n      retptr,\r\n      addHeapObject(network_id),\r\n      tx.__wbg_ptr,\r\n      isLikeNone(minimum_signatures) ? 0xffffff : minimum_signatures,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return r0 !== 0;\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * `calculateTransactionMass()` returns the mass of the passed transaction.\r\n * If the transaction is invalid, or the mass can not be calculated\r\n * the function throws an error.\r\n *\r\n * The mass value must not exceed the maximum standard transaction mass\r\n * that can be obtained using `maximumStandardTransactionMass()`.\r\n *\r\n * @category Wallet SDK\r\n * @see {@link maximumStandardTransactionMass}\r\n * @param {NetworkId | string} network_id\r\n * @param {ITransaction | Transaction} tx\r\n * @param {number | null} [minimum_signatures]\r\n * @returns {bigint}\r\n */\r\nexport function calculateTransactionMass(network_id, tx, minimum_signatures) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.calculateTransactionMass(\r\n      retptr,\r\n      addHeapObject(network_id),\r\n      addBorrowedObject(tx),\r\n      isLikeNone(minimum_signatures) ? 0xffffff : minimum_signatures,\r\n    );\r\n    var r0 = getDataViewMemory0().getBigInt64(retptr + 8 * 0, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    if (r3) {\r\n      throw takeObject(r2);\r\n    }\r\n    return BigInt.asUintN(64, r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * `maximumStandardTransactionMass()` returns the maximum transaction\r\n * size allowed by the network.\r\n *\r\n * @category Wallet SDK\r\n * @see {@link calculateTransactionMass}\r\n * @see {@link updateTransactionMass}\r\n * @see {@link calculateTransactionFee}\r\n * @returns {bigint}\r\n */\r\nexport function maximumStandardTransactionMass() {\r\n  const ret = wasm.maximumStandardTransactionMass();\r\n  return BigInt.asUintN(64, ret);\r\n}\r\n\r\n/**\r\n * @category Wallet SDK\r\n * @param {any} script_hash\r\n * @param {PrivateKey} privkey\r\n * @returns {string}\r\n */\r\nexport function signScriptHash(script_hash, privkey) {\r\n  let deferred2_0;\r\n  let deferred2_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    _assertClass(privkey, PrivateKey);\r\n    wasm.signScriptHash(retptr, addHeapObject(script_hash), privkey.__wbg_ptr);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    var ptr1 = r0;\r\n    var len1 = r1;\r\n    if (r3) {\r\n      ptr1 = 0;\r\n      len1 = 0;\r\n      throw takeObject(r2);\r\n    }\r\n    deferred2_0 = ptr1;\r\n    deferred2_1 = len1;\r\n    return getStringFromWasm0(ptr1, len1);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * `createInputSignature()` is a helper function to sign a transaction input with a specific SigHash type using a private key.\r\n * @category Wallet SDK\r\n * @param {Transaction} tx\r\n * @param {number} input_index\r\n * @param {PrivateKey} private_key\r\n * @param {SighashType | null} [sighash_type]\r\n * @returns {HexString}\r\n */\r\nexport function createInputSignature(\r\n  tx,\r\n  input_index,\r\n  private_key,\r\n  sighash_type,\r\n) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    _assertClass(tx, Transaction);\r\n    _assertClass(private_key, PrivateKey);\r\n    wasm.createInputSignature(\r\n      retptr,\r\n      tx.__wbg_ptr,\r\n      input_index,\r\n      private_key.__wbg_ptr,\r\n      isLikeNone(sighash_type) ? 6 : sighash_type,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * `signTransaction()` is a helper function to sign a transaction using a private key array or a signer array.\r\n * @category Wallet SDK\r\n * @param {Transaction} tx\r\n * @param {(PrivateKey | HexString | Uint8Array)[]} signer\r\n * @param {boolean} verify_sig\r\n * @returns {Transaction}\r\n */\r\nexport function signTransaction(tx, signer, verify_sig) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    _assertClass(tx, Transaction);\r\n    wasm.signTransaction(\r\n      retptr,\r\n      tx.__wbg_ptr,\r\n      addBorrowedObject(signer),\r\n      verify_sig,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return Transaction.__wrap(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * @category Wallet SDK\r\n * @param {PublicKey | string} key\r\n * @param {NetworkType | NetworkId | string} network\r\n * @param {boolean | null} [ecdsa]\r\n * @param {AccountKind | null} [account_kind]\r\n * @returns {Address}\r\n */\r\nexport function createAddress(key, network, ecdsa, account_kind) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    let ptr0 = 0;\r\n    if (!isLikeNone(account_kind)) {\r\n      _assertClass(account_kind, AccountKind);\r\n      ptr0 = account_kind.__destroy_into_raw();\r\n    }\r\n    wasm.createAddress(\r\n      retptr,\r\n      addBorrowedObject(key),\r\n      addBorrowedObject(network),\r\n      isLikeNone(ecdsa) ? 0xffffff : ecdsa ? 1 : 0,\r\n      ptr0,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return Address.__wrap(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * @category Wallet SDK\r\n * @param {number} minimum_signatures\r\n * @param {(PublicKey | string)[]} keys\r\n * @param {NetworkType} network_type\r\n * @param {boolean | null} [ecdsa]\r\n * @param {AccountKind | null} [account_kind]\r\n * @returns {Address}\r\n */\r\nexport function createMultisigAddress(\r\n  minimum_signatures,\r\n  keys,\r\n  network_type,\r\n  ecdsa,\r\n  account_kind,\r\n) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    let ptr0 = 0;\r\n    if (!isLikeNone(account_kind)) {\r\n      _assertClass(account_kind, AccountKind);\r\n      ptr0 = account_kind.__destroy_into_raw();\r\n    }\r\n    wasm.createMultisigAddress(\r\n      retptr,\r\n      minimum_signatures,\r\n      addBorrowedObject(keys),\r\n      network_type,\r\n      isLikeNone(ecdsa) ? 0xffffff : ecdsa ? 1 : 0,\r\n      ptr0,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return Address.__wrap(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * @param {bigint} blockDaaScore\r\n * @param {bigint} currentDaaScore\r\n * @param {NetworkId | string} networkId\r\n * @param {boolean} isCoinbase\r\n * @returns {string}\r\n */\r\nexport function getTransactionMaturityProgress(\r\n  blockDaaScore,\r\n  currentDaaScore,\r\n  networkId,\r\n  isCoinbase,\r\n) {\r\n  let deferred2_0;\r\n  let deferred2_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.getTransactionMaturityProgress(\r\n      retptr,\r\n      addHeapObject(blockDaaScore),\r\n      addHeapObject(currentDaaScore),\r\n      addHeapObject(networkId),\r\n      isCoinbase,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    var ptr1 = r0;\r\n    var len1 = r1;\r\n    if (r3) {\r\n      ptr1 = 0;\r\n      len1 = 0;\r\n      throw takeObject(r2);\r\n    }\r\n    deferred2_0 = ptr1;\r\n    deferred2_1 = len1;\r\n    return getStringFromWasm0(ptr1, len1);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * @param {NetworkId | string} networkId\r\n * @returns {INetworkParams}\r\n */\r\nexport function getNetworkParams(networkId) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.getNetworkParams(retptr, addHeapObject(networkId));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * Format a Sompi amount to a string representation of the amount in Kaspa with a suffix\r\n * based on the network type (e.g. `KAS` for mainnet, `TKAS` for testnet,\r\n * `SKAS` for simnet, `DKAS` for devnet).\r\n *\r\n * @category Wallet SDK\r\n * @param {bigint | number | HexString} sompi\r\n * @param {NetworkType | NetworkId | string} network\r\n * @returns {string}\r\n */\r\nexport function sompiToKaspaStringWithSuffix(sompi, network) {\r\n  let deferred2_0;\r\n  let deferred2_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.sompiToKaspaStringWithSuffix(\r\n      retptr,\r\n      addHeapObject(sompi),\r\n      addBorrowedObject(network),\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    var ptr1 = r0;\r\n    var len1 = r1;\r\n    if (r3) {\r\n      ptr1 = 0;\r\n      len1 = 0;\r\n      throw takeObject(r2);\r\n    }\r\n    deferred2_0 = ptr1;\r\n    deferred2_1 = len1;\r\n    return getStringFromWasm0(ptr1, len1);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    heap[stack_pointer++] = undefined;\r\n    wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * Convert Sompi to a string representation of the amount in Kaspa.\r\n *\r\n * @category Wallet SDK\r\n * @param {bigint | number | HexString} sompi\r\n * @returns {string}\r\n */\r\nexport function sompiToKaspaString(sompi) {\r\n  let deferred2_0;\r\n  let deferred2_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.sompiToKaspaString(retptr, addHeapObject(sompi));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n    var ptr1 = r0;\r\n    var len1 = r1;\r\n    if (r3) {\r\n      ptr1 = 0;\r\n      len1 = 0;\r\n      throw takeObject(r2);\r\n    }\r\n    deferred2_0 = ptr1;\r\n    deferred2_1 = len1;\r\n    return getStringFromWasm0(ptr1, len1);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n  }\r\n}\r\n\r\n/**\r\n * Convert a Kaspa string to Sompi represented by bigint.\r\n * This function provides correct precision handling and\r\n * can be used to parse user input.\r\n * @category Wallet SDK\r\n * @param {string} kaspa\r\n * @returns {bigint | undefined}\r\n */\r\nexport function kaspaToSompi(kaspa) {\r\n  const ptr0 = passStringToWasm0(\r\n    kaspa,\r\n    wasm.__wbindgen_export_1,\r\n    wasm.__wbindgen_export_2,\r\n  );\r\n  const len0 = WASM_VECTOR_LEN;\r\n  const ret = wasm.kaspaToSompi(ptr0, len0);\r\n  return takeObject(ret);\r\n}\r\n\r\n/**\r\n * Helper function that creates an estimate using the transaction {@link Generator}\r\n * by producing only the {@link GeneratorSummary} containing the estimate.\r\n * @see {@link IGeneratorSettingsObject}, {@link Generator}, {@link createTransactions}\r\n * @category Wallet SDK\r\n * @param {IGeneratorSettingsObject} settings\r\n * @returns {Promise<GeneratorSummary>}\r\n */\r\nexport function estimateTransactions(settings) {\r\n  const ret = wasm.estimateTransactions(addHeapObject(settings));\r\n  return takeObject(ret);\r\n}\r\n\r\n/**\r\n * Helper function that creates a set of transactions using the transaction {@link Generator}.\r\n * @see {@link IGeneratorSettingsObject}, {@link Generator}, {@link estimateTransactions}\r\n * @category Wallet SDK\r\n * @param {IGeneratorSettingsObject} settings\r\n * @returns {Promise<ICreateTransactions>}\r\n */\r\nexport function createTransactions(settings) {\r\n  const ret = wasm.createTransactions(addHeapObject(settings));\r\n  return takeObject(ret);\r\n}\r\n\r\n/**\r\n * Create a basic transaction without any mass limit checks.\r\n * @category Wallet SDK\r\n * @param {IUtxoEntry[]} utxo_entry_source\r\n * @param {IPaymentOutput[]} outputs\r\n * @param {bigint} priority_fee\r\n * @param {HexString | Uint8Array | null} [payload]\r\n * @param {number | null} [sig_op_count]\r\n * @returns {Transaction}\r\n */\r\nexport function createTransaction(\r\n  utxo_entry_source,\r\n  outputs,\r\n  priority_fee,\r\n  payload,\r\n  sig_op_count,\r\n) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.createTransaction(\r\n      retptr,\r\n      addHeapObject(utxo_entry_source),\r\n      addHeapObject(outputs),\r\n      addHeapObject(priority_fee),\r\n      isLikeNone(payload) ? 0 : addHeapObject(payload),\r\n      isLikeNone(sig_op_count) ? 0xffffff : sig_op_count,\r\n    );\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return Transaction.__wrap(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Set a custom storage folder for the wallet SDK\r\n * subsystem.  Encrypted wallet files and transaction\r\n * data will be stored in this folder. If not set\r\n * the storage folder will default to `~/.kaspa`\r\n * (note that the folder is hidden).\r\n *\r\n * This must be called before using any other wallet\r\n * SDK functions.\r\n *\r\n * NOTE: This function will create a folder if it\r\n * doesn't exist. This function will have no effect\r\n * if invoked in the browser environment.\r\n *\r\n * @param {String} folder - the path to the storage folder\r\n *\r\n * @category Wallet API\r\n */\r\nexport function setDefaultStorageFolder(folder) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      folder,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.setDefaultStorageFolder(retptr, ptr0, len0);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    if (r1) {\r\n      throw takeObject(r0);\r\n    }\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Set the name of the default wallet file name\r\n * or the `localStorage` key.  If `Wallet::open`\r\n * is called without a wallet file name, this name\r\n * will be used.  Please note that this name\r\n * will be suffixed with `.wallet` suffix.\r\n *\r\n * This function should be called before using any\r\n * other wallet SDK functions.\r\n *\r\n * @param {String} folder - the name to the wallet file or key.\r\n *\r\n * @category Wallet API\r\n * @param {string} folder\r\n */\r\nexport function setDefaultWalletFile(folder) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    const ptr0 = passStringToWasm0(\r\n      folder,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.setDefaultWalletFile(retptr, ptr0, len0);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    if (r1) {\r\n      throw takeObject(r0);\r\n    }\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Verifies with a public key the signature of the given message\r\n * @category Message Signing\r\n */\r\nexport function verifyMessage(value) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.verifyMessage(retptr, addHeapObject(value));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return r0 !== 0;\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Signs a message with the given private key\r\n * @category Message Signing\r\n * @param {ISignMessage} value\r\n * @returns {HexString}\r\n */\r\nexport function signMessage(value) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.signMessage(retptr, addHeapObject(value));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n    if (r2) {\r\n      throw takeObject(r1);\r\n    }\r\n    return takeObject(r0);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the version of the Rusty Kaspa framework.\r\n * @category General\r\n * @returns {string}\r\n */\r\nexport function version() {\r\n  let deferred1_0;\r\n  let deferred1_1;\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.version(retptr);\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    deferred1_0 = r0;\r\n    deferred1_1 = r1;\r\n    return getStringFromWasm0(r0, r1);\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n    wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n  }\r\n}\r\n\r\nfunction passArrayJsValueToWasm0(array, malloc) {\r\n  const ptr = malloc(array.length * 4, 4) >>> 0;\r\n  const mem = getDataViewMemory0();\r\n  for (let i = 0; i < array.length; i++) {\r\n    mem.setUint32(ptr + 4 * i, addHeapObject(array[i]), true);\r\n  }\r\n  WASM_VECTOR_LEN = array.length;\r\n  return ptr;\r\n}\r\n\r\nfunction getArrayJsValueFromWasm0(ptr, len) {\r\n  ptr = ptr >>> 0;\r\n  const mem = getDataViewMemory0();\r\n  const result = [];\r\n  for (let i = ptr; i < ptr + 4 * len; i += 4) {\r\n    result.push(takeObject(mem.getUint32(i, true)));\r\n  }\r\n  return result;\r\n}\r\n/**\r\n * Set the logger log level using a string representation.\r\n * Available variants are: 'off', 'error', 'warn', 'info', 'debug', 'trace'\r\n * @category General\r\n * @param {\"off\" | \"error\" | \"warn\" | \"info\" | \"debug\" | \"trace\"} level\r\n */\r\nexport function setLogLevel(level) {\r\n  wasm.setLogLevel(addHeapObject(level));\r\n}\r\n\r\n/**\r\n * Configuration for the WASM32 bindings runtime interface.\r\n * @see {@link IWASM32BindingsConfig}\r\n * @category General\r\n * @param {IWASM32BindingsConfig} config\r\n */\r\nexport function initWASM32Bindings(config) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.initWASM32Bindings(retptr, addHeapObject(config));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    if (r1) {\r\n      throw takeObject(r0);\r\n    }\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\n/**\r\n * Initialize Rust panic handler in console mode.\r\n *\r\n * This will output additional debug information during a panic to the console.\r\n * This function should be called right after loading WASM libraries.\r\n * @category General\r\n */\r\nexport function initConsolePanicHook() {\r\n  wasm.initConsolePanicHook();\r\n}\r\n\r\n/**\r\n * Initialize Rust panic handler in browser mode.\r\n *\r\n * This will output additional debug information during a panic in the browser\r\n * by creating a full-screen `DIV`. This is useful on mobile devices or where\r\n * the user otherwise has no access to console/developer tools. Use\r\n * {@link presentPanicHookLogs} to activate the panic logs in the\r\n * browser environment.\r\n * @see {@link presentPanicHookLogs}\r\n * @category General\r\n */\r\nexport function initBrowserPanicHook() {\r\n  wasm.initBrowserPanicHook();\r\n}\r\n\r\n/**\r\n * Present panic logs to the user in the browser.\r\n *\r\n * This function should be called after a panic has occurred and the\r\n * browser-based panic hook has been activated. It will present the\r\n * collected panic logs in a full-screen `DIV` in the browser.\r\n * @see {@link initBrowserPanicHook}\r\n * @category General\r\n */\r\nexport function presentPanicHookLogs() {\r\n  wasm.presentPanicHookLogs();\r\n}\r\n\r\n/**\r\n * r\" Deferred promise - an object that has `resolve()` and `reject()`\r\n * r\" functions that can be called outside of the promise body.\r\n * r\" WARNING: This function uses `eval` and can not be used in environments\r\n * r\" where dynamically-created code can not be executed such as web browser\r\n * r\" extensions.\r\n * r\" @category General\r\n * @returns {Promise<any>}\r\n */\r\nexport function defer() {\r\n  const ret = wasm.defer();\r\n  return takeObject(ret);\r\n}\r\n\r\nfunction __wbg_adapter_66(arg0, arg1) {\r\n  wasm.__wbindgen_export_5(arg0, arg1);\r\n}\r\n\r\nfunction __wbg_adapter_69(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_6(arg0, arg1, addHeapObject(arg2));\r\n}\r\n\r\nfunction __wbg_adapter_72(arg0, arg1) {\r\n  wasm.__wbindgen_export_7(arg0, arg1);\r\n}\r\n\r\nfunction __wbg_adapter_75(arg0, arg1, arg2) {\r\n  try {\r\n    const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n    wasm.__wbindgen_export_8(retptr, arg0, arg1, addHeapObject(arg2));\r\n    var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n    var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n    if (r1) {\r\n      throw takeObject(r0);\r\n    }\r\n  } finally {\r\n    wasm.__wbindgen_add_to_stack_pointer(16);\r\n  }\r\n}\r\n\r\nfunction __wbg_adapter_78(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_9(arg0, arg1, addHeapObject(arg2));\r\n}\r\n\r\nfunction __wbg_adapter_81(arg0, arg1, arg2, arg3) {\r\n  const ret = wasm.__wbindgen_export_10(arg0, arg1, addHeapObject(arg2), arg3);\r\n  return takeObject(ret);\r\n}\r\n\r\nfunction __wbg_adapter_84(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_11(arg0, arg1, addHeapObject(arg2));\r\n}\r\n\r\nfunction __wbg_adapter_87(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_11(arg0, arg1, arg2);\r\n}\r\n\r\nfunction __wbg_adapter_90(arg0, arg1, arg2) {\r\n  wasm.__wbindgen_export_12(arg0, arg1, addHeapObject(arg2));\r\n}\r\n\r\nfunction __wbg_adapter_199(arg0, arg1, arg2, arg3) {\r\n  wasm.__wbindgen_export_13(\r\n    arg0,\r\n    arg1,\r\n    addHeapObject(arg2),\r\n    addHeapObject(arg3),\r\n  );\r\n}\r\n\r\n/**\r\n * @category Wallet API\r\n * @enum {0}\r\n */\r\nexport const AccountsDiscoveryKind = Object.freeze({\r\n  Bip44: 0,\r\n  0: \"Bip44\",\r\n});\r\n/**\r\n *\r\n *  Kaspa `Address` version (`PubKey`, `PubKey ECDSA`, `ScriptHash`)\r\n *\r\n * @category Address\r\n * @enum {0 | 1 | 8}\r\n */\r\nexport const AddressVersion = Object.freeze({\r\n  /**\r\n   * PubKey addresses always have the version byte set to 0\r\n   */\r\n  PubKey: 0,\r\n  0: \"PubKey\",\r\n  /**\r\n   * PubKey ECDSA addresses always have the version byte set to 1\r\n   */\r\n  PubKeyECDSA: 1,\r\n  1: \"PubKeyECDSA\",\r\n  /**\r\n   * ScriptHash addresses always have the version byte set to 8\r\n   */\r\n  ScriptHash: 8,\r\n  8: \"ScriptHash\",\r\n});\r\n/**\r\n * Specifies the type of an account address to be used in\r\n * commit reveal redeem script and also to spend reveal\r\n * operation to.\r\n *\r\n * @category Wallet API\r\n * @enum {0 | 1}\r\n */\r\nexport const CommitRevealAddressKind = Object.freeze({\r\n  Receive: 0,\r\n  0: \"Receive\",\r\n  Change: 1,\r\n  1: \"Change\",\r\n});\r\n/**\r\n * `ConnectionStrategy` specifies how the WebSocket `async fn connect()`\r\n * function should behave during the first-time connectivity phase.\r\n * @category WebSocket\r\n * @enum {0 | 1}\r\n */\r\nexport const ConnectStrategy = Object.freeze({\r\n  /**\r\n   * Continuously attempt to connect to the server. This behavior will\r\n   * block `connect()` function until the connection is established.\r\n   */\r\n  Retry: 0,\r\n  0: \"Retry\",\r\n  /**\r\n   * Causes `connect()` to return immediately if the first-time connection\r\n   * has failed.\r\n   */\r\n  Fallback: 1,\r\n  1: \"Fallback\",\r\n});\r\n/**\r\n * wRPC protocol encoding: `Borsh` or `JSON`\r\n * @category Transport\r\n * @enum {0 | 1}\r\n */\r\nexport const Encoding = Object.freeze({\r\n  Borsh: 0,\r\n  0: \"Borsh\",\r\n  SerdeJson: 1,\r\n  1: \"SerdeJson\",\r\n});\r\n/**\r\n *\r\n * @see {@link IFees}, {@link IGeneratorSettingsObject}, {@link Generator}, {@link estimateTransactions}, {@link createTransactions}\r\n * @category Wallet SDK\r\n * @enum {0 | 1}\r\n */\r\nexport const FeeSource = Object.freeze({\r\n  SenderPays: 0,\r\n  0: \"SenderPays\",\r\n  ReceiverPays: 1,\r\n  1: \"ReceiverPays\",\r\n});\r\n/**\r\n *\r\n * Languages supported by BIP39.\r\n *\r\n * Presently only English is specified by the BIP39 standard.\r\n *\r\n * @see {@link Mnemonic}\r\n *\r\n * @category Wallet SDK\r\n * @enum {0}\r\n */\r\nexport const Language = Object.freeze({\r\n  /**\r\n   * English is presently the only supported language\r\n   */\r\n  English: 0,\r\n  0: \"English\",\r\n});\r\n/**\r\n * @category Consensus\r\n * @enum {0 | 1 | 2 | 3}\r\n */\r\nexport const NetworkType = Object.freeze({\r\n  Mainnet: 0,\r\n  0: \"Mainnet\",\r\n  Testnet: 1,\r\n  1: \"Testnet\",\r\n  Devnet: 2,\r\n  2: \"Devnet\",\r\n  Simnet: 3,\r\n  3: \"Simnet\",\r\n});\r\n/**\r\n * Specifies the type of an account address to create.\r\n * The address can bea receive address or a change address.\r\n *\r\n * @category Wallet API\r\n * @enum {0 | 1}\r\n */\r\nexport const NewAddressKind = Object.freeze({\r\n  Receive: 0,\r\n  0: \"Receive\",\r\n  Change: 1,\r\n  1: \"Change\",\r\n});\r\n/**\r\n * Kaspa Transaction Script Opcodes\r\n * @see {@link ScriptBuilder}\r\n * @category Consensus\r\n * @enum {0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 | 32 | 33 | 34 | 35 | 36 | 37 | 38 | 39 | 40 | 41 | 42 | 43 | 44 | 45 | 46 | 47 | 48 | 49 | 50 | 51 | 52 | 53 | 54 | 55 | 56 | 57 | 58 | 59 | 60 | 61 | 62 | 63 | 64 | 65 | 66 | 67 | 68 | 69 | 70 | 71 | 72 | 73 | 74 | 75 | 76 | 77 | 78 | 79 | 80 | 81 | 82 | 83 | 84 | 85 | 86 | 87 | 88 | 89 | 90 | 91 | 92 | 93 | 94 | 95 | 96 | 97 | 98 | 99 | 100 | 101 | 102 | 103 | 104 | 105 | 106 | 107 | 108 | 109 | 110 | 111 | 112 | 113 | 114 | 115 | 116 | 117 | 118 | 119 | 120 | 121 | 122 | 123 | 124 | 125 | 126 | 127 | 128 | 129 | 130 | 131 | 132 | 133 | 134 | 135 | 136 | 137 | 138 | 139 | 140 | 141 | 142 | 143 | 144 | 145 | 146 | 147 | 148 | 149 | 150 | 151 | 152 | 153 | 154 | 155 | 156 | 157 | 158 | 159 | 160 | 161 | 162 | 163 | 164 | 165 | 166 | 167 | 168 | 169 | 170 | 171 | 172 | 173 | 174 | 175 | 176 | 177 | 178 | 179 | 180 | 181 | 182 | 183 | 184 | 185 | 186 | 187 | 188 | 189 | 190 | 191 | 192 | 193 | 194 | 195 | 196 | 197 | 198 | 199 | 200 | 201 | 202 | 203 | 204 | 205 | 206 | 207 | 208 | 209 | 210 | 211 | 212 | 213 | 214 | 215 | 216 | 217 | 218 | 219 | 220 | 221 | 222 | 223 | 224 | 225 | 226 | 227 | 228 | 229 | 230 | 231 | 232 | 233 | 234 | 235 | 236 | 237 | 238 | 239 | 240 | 241 | 242 | 243 | 244 | 245 | 246 | 247 | 248 | 249 | 250 | 251 | 252 | 253 | 254 | 255}\r\n */\r\nexport const Opcodes = Object.freeze({\r\n  OpFalse: 0,\r\n  0: \"OpFalse\",\r\n  OpData1: 1,\r\n  1: \"OpData1\",\r\n  OpData2: 2,\r\n  2: \"OpData2\",\r\n  OpData3: 3,\r\n  3: \"OpData3\",\r\n  OpData4: 4,\r\n  4: \"OpData4\",\r\n  OpData5: 5,\r\n  5: \"OpData5\",\r\n  OpData6: 6,\r\n  6: \"OpData6\",\r\n  OpData7: 7,\r\n  7: \"OpData7\",\r\n  OpData8: 8,\r\n  8: \"OpData8\",\r\n  OpData9: 9,\r\n  9: \"OpData9\",\r\n  OpData10: 10,\r\n  10: \"OpData10\",\r\n  OpData11: 11,\r\n  11: \"OpData11\",\r\n  OpData12: 12,\r\n  12: \"OpData12\",\r\n  OpData13: 13,\r\n  13: \"OpData13\",\r\n  OpData14: 14,\r\n  14: \"OpData14\",\r\n  OpData15: 15,\r\n  15: \"OpData15\",\r\n  OpData16: 16,\r\n  16: \"OpData16\",\r\n  OpData17: 17,\r\n  17: \"OpData17\",\r\n  OpData18: 18,\r\n  18: \"OpData18\",\r\n  OpData19: 19,\r\n  19: \"OpData19\",\r\n  OpData20: 20,\r\n  20: \"OpData20\",\r\n  OpData21: 21,\r\n  21: \"OpData21\",\r\n  OpData22: 22,\r\n  22: \"OpData22\",\r\n  OpData23: 23,\r\n  23: \"OpData23\",\r\n  OpData24: 24,\r\n  24: \"OpData24\",\r\n  OpData25: 25,\r\n  25: \"OpData25\",\r\n  OpData26: 26,\r\n  26: \"OpData26\",\r\n  OpData27: 27,\r\n  27: \"OpData27\",\r\n  OpData28: 28,\r\n  28: \"OpData28\",\r\n  OpData29: 29,\r\n  29: \"OpData29\",\r\n  OpData30: 30,\r\n  30: \"OpData30\",\r\n  OpData31: 31,\r\n  31: \"OpData31\",\r\n  OpData32: 32,\r\n  32: \"OpData32\",\r\n  OpData33: 33,\r\n  33: \"OpData33\",\r\n  OpData34: 34,\r\n  34: \"OpData34\",\r\n  OpData35: 35,\r\n  35: \"OpData35\",\r\n  OpData36: 36,\r\n  36: \"OpData36\",\r\n  OpData37: 37,\r\n  37: \"OpData37\",\r\n  OpData38: 38,\r\n  38: \"OpData38\",\r\n  OpData39: 39,\r\n  39: \"OpData39\",\r\n  OpData40: 40,\r\n  40: \"OpData40\",\r\n  OpData41: 41,\r\n  41: \"OpData41\",\r\n  OpData42: 42,\r\n  42: \"OpData42\",\r\n  OpData43: 43,\r\n  43: \"OpData43\",\r\n  OpData44: 44,\r\n  44: \"OpData44\",\r\n  OpData45: 45,\r\n  45: \"OpData45\",\r\n  OpData46: 46,\r\n  46: \"OpData46\",\r\n  OpData47: 47,\r\n  47: \"OpData47\",\r\n  OpData48: 48,\r\n  48: \"OpData48\",\r\n  OpData49: 49,\r\n  49: \"OpData49\",\r\n  OpData50: 50,\r\n  50: \"OpData50\",\r\n  OpData51: 51,\r\n  51: \"OpData51\",\r\n  OpData52: 52,\r\n  52: \"OpData52\",\r\n  OpData53: 53,\r\n  53: \"OpData53\",\r\n  OpData54: 54,\r\n  54: \"OpData54\",\r\n  OpData55: 55,\r\n  55: \"OpData55\",\r\n  OpData56: 56,\r\n  56: \"OpData56\",\r\n  OpData57: 57,\r\n  57: \"OpData57\",\r\n  OpData58: 58,\r\n  58: \"OpData58\",\r\n  OpData59: 59,\r\n  59: \"OpData59\",\r\n  OpData60: 60,\r\n  60: \"OpData60\",\r\n  OpData61: 61,\r\n  61: \"OpData61\",\r\n  OpData62: 62,\r\n  62: \"OpData62\",\r\n  OpData63: 63,\r\n  63: \"OpData63\",\r\n  OpData64: 64,\r\n  64: \"OpData64\",\r\n  OpData65: 65,\r\n  65: \"OpData65\",\r\n  OpData66: 66,\r\n  66: \"OpData66\",\r\n  OpData67: 67,\r\n  67: \"OpData67\",\r\n  OpData68: 68,\r\n  68: \"OpData68\",\r\n  OpData69: 69,\r\n  69: \"OpData69\",\r\n  OpData70: 70,\r\n  70: \"OpData70\",\r\n  OpData71: 71,\r\n  71: \"OpData71\",\r\n  OpData72: 72,\r\n  72: \"OpData72\",\r\n  OpData73: 73,\r\n  73: \"OpData73\",\r\n  OpData74: 74,\r\n  74: \"OpData74\",\r\n  OpData75: 75,\r\n  75: \"OpData75\",\r\n  OpPushData1: 76,\r\n  76: \"OpPushData1\",\r\n  OpPushData2: 77,\r\n  77: \"OpPushData2\",\r\n  OpPushData4: 78,\r\n  78: \"OpPushData4\",\r\n  Op1Negate: 79,\r\n  79: \"Op1Negate\",\r\n  OpReserved: 80,\r\n  80: \"OpReserved\",\r\n  OpTrue: 81,\r\n  81: \"OpTrue\",\r\n  Op2: 82,\r\n  82: \"Op2\",\r\n  Op3: 83,\r\n  83: \"Op3\",\r\n  Op4: 84,\r\n  84: \"Op4\",\r\n  Op5: 85,\r\n  85: \"Op5\",\r\n  Op6: 86,\r\n  86: \"Op6\",\r\n  Op7: 87,\r\n  87: \"Op7\",\r\n  Op8: 88,\r\n  88: \"Op8\",\r\n  Op9: 89,\r\n  89: \"Op9\",\r\n  Op10: 90,\r\n  90: \"Op10\",\r\n  Op11: 91,\r\n  91: \"Op11\",\r\n  Op12: 92,\r\n  92: \"Op12\",\r\n  Op13: 93,\r\n  93: \"Op13\",\r\n  Op14: 94,\r\n  94: \"Op14\",\r\n  Op15: 95,\r\n  95: \"Op15\",\r\n  Op16: 96,\r\n  96: \"Op16\",\r\n  OpNop: 97,\r\n  97: \"OpNop\",\r\n  OpVer: 98,\r\n  98: \"OpVer\",\r\n  OpIf: 99,\r\n  99: \"OpIf\",\r\n  OpNotIf: 100,\r\n  100: \"OpNotIf\",\r\n  OpVerIf: 101,\r\n  101: \"OpVerIf\",\r\n  OpVerNotIf: 102,\r\n  102: \"OpVerNotIf\",\r\n  OpElse: 103,\r\n  103: \"OpElse\",\r\n  OpEndIf: 104,\r\n  104: \"OpEndIf\",\r\n  OpVerify: 105,\r\n  105: \"OpVerify\",\r\n  OpReturn: 106,\r\n  106: \"OpReturn\",\r\n  OpToAltStack: 107,\r\n  107: \"OpToAltStack\",\r\n  OpFromAltStack: 108,\r\n  108: \"OpFromAltStack\",\r\n  Op2Drop: 109,\r\n  109: \"Op2Drop\",\r\n  Op2Dup: 110,\r\n  110: \"Op2Dup\",\r\n  Op3Dup: 111,\r\n  111: \"Op3Dup\",\r\n  Op2Over: 112,\r\n  112: \"Op2Over\",\r\n  Op2Rot: 113,\r\n  113: \"Op2Rot\",\r\n  Op2Swap: 114,\r\n  114: \"Op2Swap\",\r\n  OpIfDup: 115,\r\n  115: \"OpIfDup\",\r\n  OpDepth: 116,\r\n  116: \"OpDepth\",\r\n  OpDrop: 117,\r\n  117: \"OpDrop\",\r\n  OpDup: 118,\r\n  118: \"OpDup\",\r\n  OpNip: 119,\r\n  119: \"OpNip\",\r\n  OpOver: 120,\r\n  120: \"OpOver\",\r\n  OpPick: 121,\r\n  121: \"OpPick\",\r\n  OpRoll: 122,\r\n  122: \"OpRoll\",\r\n  OpRot: 123,\r\n  123: \"OpRot\",\r\n  OpSwap: 124,\r\n  124: \"OpSwap\",\r\n  OpTuck: 125,\r\n  125: \"OpTuck\",\r\n  /**\r\n   * Splice opcodes.\r\n   */\r\n  OpCat: 126,\r\n  126: \"OpCat\",\r\n  OpSubStr: 127,\r\n  127: \"OpSubStr\",\r\n  OpLeft: 128,\r\n  128: \"OpLeft\",\r\n  OpRight: 129,\r\n  129: \"OpRight\",\r\n  OpSize: 130,\r\n  130: \"OpSize\",\r\n  /**\r\n   * Bitwise logic opcodes.\r\n   */\r\n  OpInvert: 131,\r\n  131: \"OpInvert\",\r\n  OpAnd: 132,\r\n  132: \"OpAnd\",\r\n  OpOr: 133,\r\n  133: \"OpOr\",\r\n  OpXor: 134,\r\n  134: \"OpXor\",\r\n  OpEqual: 135,\r\n  135: \"OpEqual\",\r\n  OpEqualVerify: 136,\r\n  136: \"OpEqualVerify\",\r\n  OpReserved1: 137,\r\n  137: \"OpReserved1\",\r\n  OpReserved2: 138,\r\n  138: \"OpReserved2\",\r\n  /**\r\n   * Numeric related opcodes.\r\n   */\r\n  Op1Add: 139,\r\n  139: \"Op1Add\",\r\n  Op1Sub: 140,\r\n  140: \"Op1Sub\",\r\n  Op2Mul: 141,\r\n  141: \"Op2Mul\",\r\n  Op2Div: 142,\r\n  142: \"Op2Div\",\r\n  OpNegate: 143,\r\n  143: \"OpNegate\",\r\n  OpAbs: 144,\r\n  144: \"OpAbs\",\r\n  OpNot: 145,\r\n  145: \"OpNot\",\r\n  Op0NotEqual: 146,\r\n  146: \"Op0NotEqual\",\r\n  OpAdd: 147,\r\n  147: \"OpAdd\",\r\n  OpSub: 148,\r\n  148: \"OpSub\",\r\n  OpMul: 149,\r\n  149: \"OpMul\",\r\n  OpDiv: 150,\r\n  150: \"OpDiv\",\r\n  OpMod: 151,\r\n  151: \"OpMod\",\r\n  OpLShift: 152,\r\n  152: \"OpLShift\",\r\n  OpRShift: 153,\r\n  153: \"OpRShift\",\r\n  OpBoolAnd: 154,\r\n  154: \"OpBoolAnd\",\r\n  OpBoolOr: 155,\r\n  155: \"OpBoolOr\",\r\n  OpNumEqual: 156,\r\n  156: \"OpNumEqual\",\r\n  OpNumEqualVerify: 157,\r\n  157: \"OpNumEqualVerify\",\r\n  OpNumNotEqual: 158,\r\n  158: \"OpNumNotEqual\",\r\n  OpLessThan: 159,\r\n  159: \"OpLessThan\",\r\n  OpGreaterThan: 160,\r\n  160: \"OpGreaterThan\",\r\n  OpLessThanOrEqual: 161,\r\n  161: \"OpLessThanOrEqual\",\r\n  OpGreaterThanOrEqual: 162,\r\n  162: \"OpGreaterThanOrEqual\",\r\n  OpMin: 163,\r\n  163: \"OpMin\",\r\n  OpMax: 164,\r\n  164: \"OpMax\",\r\n  OpWithin: 165,\r\n  165: \"OpWithin\",\r\n  /**\r\n   * Undefined opcodes.\r\n   */\r\n  OpUnknown166: 166,\r\n  166: \"OpUnknown166\",\r\n  OpUnknown167: 167,\r\n  167: \"OpUnknown167\",\r\n  /**\r\n   * Crypto opcodes.\r\n   */\r\n  OpSHA256: 168,\r\n  168: \"OpSHA256\",\r\n  OpCheckMultiSigECDSA: 169,\r\n  169: \"OpCheckMultiSigECDSA\",\r\n  OpBlake2b: 170,\r\n  170: \"OpBlake2b\",\r\n  OpCheckSigECDSA: 171,\r\n  171: \"OpCheckSigECDSA\",\r\n  OpCheckSig: 172,\r\n  172: \"OpCheckSig\",\r\n  OpCheckSigVerify: 173,\r\n  173: \"OpCheckSigVerify\",\r\n  OpCheckMultiSig: 174,\r\n  174: \"OpCheckMultiSig\",\r\n  OpCheckMultiSigVerify: 175,\r\n  175: \"OpCheckMultiSigVerify\",\r\n  OpCheckLockTimeVerify: 176,\r\n  176: \"OpCheckLockTimeVerify\",\r\n  OpCheckSequenceVerify: 177,\r\n  177: \"OpCheckSequenceVerify\",\r\n  /**\r\n   * Undefined opcodes.\r\n   */\r\n  OpUnknown178: 178,\r\n  178: \"OpUnknown178\",\r\n  OpUnknown179: 179,\r\n  179: \"OpUnknown179\",\r\n  OpUnknown180: 180,\r\n  180: \"OpUnknown180\",\r\n  OpUnknown181: 181,\r\n  181: \"OpUnknown181\",\r\n  OpUnknown182: 182,\r\n  182: \"OpUnknown182\",\r\n  OpUnknown183: 183,\r\n  183: \"OpUnknown183\",\r\n  OpUnknown184: 184,\r\n  184: \"OpUnknown184\",\r\n  OpUnknown185: 185,\r\n  185: \"OpUnknown185\",\r\n  OpUnknown186: 186,\r\n  186: \"OpUnknown186\",\r\n  OpUnknown187: 187,\r\n  187: \"OpUnknown187\",\r\n  OpUnknown188: 188,\r\n  188: \"OpUnknown188\",\r\n  OpUnknown189: 189,\r\n  189: \"OpUnknown189\",\r\n  OpUnknown190: 190,\r\n  190: \"OpUnknown190\",\r\n  OpUnknown191: 191,\r\n  191: \"OpUnknown191\",\r\n  OpUnknown192: 192,\r\n  192: \"OpUnknown192\",\r\n  OpUnknown193: 193,\r\n  193: \"OpUnknown193\",\r\n  OpUnknown194: 194,\r\n  194: \"OpUnknown194\",\r\n  OpUnknown195: 195,\r\n  195: \"OpUnknown195\",\r\n  OpUnknown196: 196,\r\n  196: \"OpUnknown196\",\r\n  OpUnknown197: 197,\r\n  197: \"OpUnknown197\",\r\n  OpUnknown198: 198,\r\n  198: \"OpUnknown198\",\r\n  OpUnknown199: 199,\r\n  199: \"OpUnknown199\",\r\n  OpUnknown200: 200,\r\n  200: \"OpUnknown200\",\r\n  OpUnknown201: 201,\r\n  201: \"OpUnknown201\",\r\n  OpUnknown202: 202,\r\n  202: \"OpUnknown202\",\r\n  OpUnknown203: 203,\r\n  203: \"OpUnknown203\",\r\n  OpUnknown204: 204,\r\n  204: \"OpUnknown204\",\r\n  OpUnknown205: 205,\r\n  205: \"OpUnknown205\",\r\n  OpUnknown206: 206,\r\n  206: \"OpUnknown206\",\r\n  OpUnknown207: 207,\r\n  207: \"OpUnknown207\",\r\n  OpUnknown208: 208,\r\n  208: \"OpUnknown208\",\r\n  OpUnknown209: 209,\r\n  209: \"OpUnknown209\",\r\n  OpUnknown210: 210,\r\n  210: \"OpUnknown210\",\r\n  OpUnknown211: 211,\r\n  211: \"OpUnknown211\",\r\n  OpUnknown212: 212,\r\n  212: \"OpUnknown212\",\r\n  OpUnknown213: 213,\r\n  213: \"OpUnknown213\",\r\n  OpUnknown214: 214,\r\n  214: \"OpUnknown214\",\r\n  OpUnknown215: 215,\r\n  215: \"OpUnknown215\",\r\n  OpUnknown216: 216,\r\n  216: \"OpUnknown216\",\r\n  OpUnknown217: 217,\r\n  217: \"OpUnknown217\",\r\n  OpUnknown218: 218,\r\n  218: \"OpUnknown218\",\r\n  OpUnknown219: 219,\r\n  219: \"OpUnknown219\",\r\n  OpUnknown220: 220,\r\n  220: \"OpUnknown220\",\r\n  OpUnknown221: 221,\r\n  221: \"OpUnknown221\",\r\n  OpUnknown222: 222,\r\n  222: \"OpUnknown222\",\r\n  OpUnknown223: 223,\r\n  223: \"OpUnknown223\",\r\n  OpUnknown224: 224,\r\n  224: \"OpUnknown224\",\r\n  OpUnknown225: 225,\r\n  225: \"OpUnknown225\",\r\n  OpUnknown226: 226,\r\n  226: \"OpUnknown226\",\r\n  OpUnknown227: 227,\r\n  227: \"OpUnknown227\",\r\n  OpUnknown228: 228,\r\n  228: \"OpUnknown228\",\r\n  OpUnknown229: 229,\r\n  229: \"OpUnknown229\",\r\n  OpUnknown230: 230,\r\n  230: \"OpUnknown230\",\r\n  OpUnknown231: 231,\r\n  231: \"OpUnknown231\",\r\n  OpUnknown232: 232,\r\n  232: \"OpUnknown232\",\r\n  OpUnknown233: 233,\r\n  233: \"OpUnknown233\",\r\n  OpUnknown234: 234,\r\n  234: \"OpUnknown234\",\r\n  OpUnknown235: 235,\r\n  235: \"OpUnknown235\",\r\n  OpUnknown236: 236,\r\n  236: \"OpUnknown236\",\r\n  OpUnknown237: 237,\r\n  237: \"OpUnknown237\",\r\n  OpUnknown238: 238,\r\n  238: \"OpUnknown238\",\r\n  OpUnknown239: 239,\r\n  239: \"OpUnknown239\",\r\n  OpUnknown240: 240,\r\n  240: \"OpUnknown240\",\r\n  OpUnknown241: 241,\r\n  241: \"OpUnknown241\",\r\n  OpUnknown242: 242,\r\n  242: \"OpUnknown242\",\r\n  OpUnknown243: 243,\r\n  243: \"OpUnknown243\",\r\n  OpUnknown244: 244,\r\n  244: \"OpUnknown244\",\r\n  OpUnknown245: 245,\r\n  245: \"OpUnknown245\",\r\n  OpUnknown246: 246,\r\n  246: \"OpUnknown246\",\r\n  OpUnknown247: 247,\r\n  247: \"OpUnknown247\",\r\n  OpUnknown248: 248,\r\n  248: \"OpUnknown248\",\r\n  OpUnknown249: 249,\r\n  249: \"OpUnknown249\",\r\n  OpSmallInteger: 250,\r\n  250: \"OpSmallInteger\",\r\n  OpPubKeys: 251,\r\n  251: \"OpPubKeys\",\r\n  OpUnknown252: 252,\r\n  252: \"OpUnknown252\",\r\n  OpPubKeyHash: 253,\r\n  253: \"OpPubKeyHash\",\r\n  OpPubKey: 254,\r\n  254: \"OpPubKey\",\r\n  OpInvalidOpCode: 255,\r\n  255: \"OpInvalidOpCode\",\r\n});\r\n/**\r\n * Kaspa Sighash types allowed by consensus\r\n * @category Consensus\r\n * @enum {0 | 1 | 2 | 3 | 4 | 5}\r\n */\r\nexport const SighashType = Object.freeze({\r\n  All: 0,\r\n  0: \"All\",\r\n  None: 1,\r\n  1: \"None\",\r\n  Single: 2,\r\n  2: \"Single\",\r\n  AllAnyOneCanPay: 3,\r\n  3: \"AllAnyOneCanPay\",\r\n  NoneAnyOneCanPay: 4,\r\n  4: \"NoneAnyOneCanPay\",\r\n  SingleAnyOneCanPay: 5,\r\n  5: \"SingleAnyOneCanPay\",\r\n});\r\n\r\nconst __wbindgen_enum_BinaryType = [\"blob\", \"arraybuffer\"];\r\n\r\nconst __wbindgen_enum_IdbCursorDirection = [\r\n  \"next\",\r\n  \"nextunique\",\r\n  \"prev\",\r\n  \"prevunique\",\r\n];\r\n\r\nconst __wbindgen_enum_IdbRequestReadyState = [\"pending\", \"done\"];\r\n\r\nconst __wbindgen_enum_IdbTransactionMode = [\r\n  \"readonly\",\r\n  \"readwrite\",\r\n  \"versionchange\",\r\n  \"readwriteflush\",\r\n  \"cleanup\",\r\n];\r\n\r\nconst __wbindgen_enum_RequestCredentials = [\"omit\", \"same-origin\", \"include\"];\r\n\r\nconst __wbindgen_enum_RequestMode = [\r\n  \"same-origin\",\r\n  \"no-cors\",\r\n  \"cors\",\r\n  \"navigate\",\r\n];\r\n\r\nconst AbortableFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_abortable_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Abortable trigger wraps an `Arc<AtomicBool>`, which can be cloned\r\n * to signal task terminating using an atomic bool.\r\n *\r\n * ```text\r\n * let abortable = Abortable::default();\r\n * let result = my_task(abortable).await?;\r\n * // ... elsewhere\r\n * abortable.abort();\r\n * ```\r\n *\r\n * @category General\r\n */\r\nexport class Abortable {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AbortableFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_abortable_free(ptr, 0);\r\n  }\r\n  constructor() {\r\n    const ret = wasm.abortable_new();\r\n    this.__wbg_ptr = ret >>> 0;\r\n    AbortableFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  isAborted() {\r\n    const ret = wasm.abortable_isAborted(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  abort() {\r\n    wasm.abortable_abort(this.__wbg_ptr);\r\n  }\r\n  check() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.abortable_check(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  reset() {\r\n    wasm.abortable_reset(this.__wbg_ptr);\r\n  }\r\n}\r\n\r\nconst AbortedFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_aborted_free(ptr >>> 0, 1));\r\n/**\r\n * Error emitted by [`Abortable`].\r\n * @category General\r\n */\r\nexport class Aborted {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Aborted.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    AbortedFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AbortedFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_aborted_free(ptr, 0);\r\n  }\r\n}\r\n\r\nconst AccountKindFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_accountkind_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Account kind is a string signature that represents an account type.\r\n * Account kind is used to identify the account type during\r\n * serialization, deserialization and various API calls.\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class AccountKind {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(AccountKind.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    AccountKindFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AccountKindFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_accountkind_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} kind\r\n   */\r\n  constructor(kind) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        kind,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.accountkind_ctor(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      AccountKindFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.accountkind_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst AddressFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_address_free(ptr >>> 0, 1));\r\n/**\r\n * Kaspa [`Address`] struct that serializes to and from an address format string: `kaspa:qz0s...t8cv`.\r\n *\r\n * @category Address\r\n */\r\nexport class Address {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Address.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    AddressFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      version: this.version,\r\n      prefix: this.prefix,\r\n      payload: this.payload,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AddressFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_address_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} address\r\n   */\r\n  constructor(address) {\r\n    const ptr0 = passStringToWasm0(\r\n      address,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.address_constructor(ptr0, len0);\r\n    this.__wbg_ptr = ret >>> 0;\r\n    AddressFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @param {string} address\r\n   * @returns {boolean}\r\n   */\r\n  static validate(address) {\r\n    const ptr0 = passStringToWasm0(\r\n      address,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.address_validate(ptr0, len0);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * Convert an address to a string.\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.address_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get version() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.address_version(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get prefix() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.address_prefix(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} prefix\r\n   */\r\n  set setPrefix(prefix) {\r\n    const ptr0 = passStringToWasm0(\r\n      prefix,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.address_set_setPrefix(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get payload() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.address_payload(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number} n\r\n   * @returns {string}\r\n   */\r\n  short(n) {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.address_short(retptr, this.__wbg_ptr, n);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst AgentConstructorOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_agentconstructoroptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class AgentConstructorOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AgentConstructorOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_agentconstructoroptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get keep_alive_msecs() {\r\n    const ret = wasm.agentconstructoroptions_keep_alive_msecs(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} value\r\n   */\r\n  set keep_alive_msecs(value) {\r\n    wasm.agentconstructoroptions_set_keep_alive_msecs(this.__wbg_ptr, value);\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  get keep_alive() {\r\n    const ret = wasm.agentconstructoroptions_keep_alive(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean} value\r\n   */\r\n  set keep_alive(value) {\r\n    wasm.agentconstructoroptions_set_keep_alive(this.__wbg_ptr, value);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get max_free_sockets() {\r\n    const ret = wasm.agentconstructoroptions_max_free_sockets(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} value\r\n   */\r\n  set max_free_sockets(value) {\r\n    wasm.agentconstructoroptions_set_max_free_sockets(this.__wbg_ptr, value);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get max_sockets() {\r\n    const ret = wasm.agentconstructoroptions_max_sockets(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} value\r\n   */\r\n  set max_sockets(value) {\r\n    wasm.agentconstructoroptions_set_max_sockets(this.__wbg_ptr, value);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get timeout() {\r\n    const ret = wasm.agentconstructoroptions_timeout(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} value\r\n   */\r\n  set timeout(value) {\r\n    wasm.agentconstructoroptions_set_timeout(this.__wbg_ptr, value);\r\n  }\r\n}\r\n\r\nconst AppendFileOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_appendfileoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class AppendFileOptions {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(AppendFileOptions.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    AppendFileOptionsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AppendFileOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_appendfileoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | null} [encoding]\r\n   * @param {number | null} [mode]\r\n   * @param {string | null} [flag]\r\n   */\r\n  constructor(encoding, mode, flag) {\r\n    const ret = wasm.appendfileoptions_new_with_values(\r\n      isLikeNone(encoding) ? 0 : addHeapObject(encoding),\r\n      isLikeNone(mode) ? 0x100000001 : mode >>> 0,\r\n      isLikeNone(flag) ? 0 : addHeapObject(flag),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    AppendFileOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {AppendFileOptions}\r\n   */\r\n  static new() {\r\n    const ret = wasm.appendfileoptions_new();\r\n    return AppendFileOptions.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get encoding() {\r\n    const ret = wasm.appendfileoptions_encoding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set encoding(value) {\r\n    wasm.appendfileoptions_set_encoding(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get mode() {\r\n    const ret = wasm.appendfileoptions_mode(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set mode(value) {\r\n    wasm.appendfileoptions_set_mode(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0x100000001 : value >>> 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get flag() {\r\n    const ret = wasm.appendfileoptions_flag(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set flag(value) {\r\n    wasm.appendfileoptions_set_flag(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst AssertionErrorOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_assertionerroroptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class AssertionErrorOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    AssertionErrorOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_assertionerroroptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | null | undefined} message\r\n   * @param {any} actual\r\n   * @param {any} expected\r\n   * @param {string} operator\r\n   */\r\n  constructor(message, actual, expected, operator) {\r\n    const ret = wasm.assertionerroroptions_new(\r\n      isLikeNone(message) ? 0 : addHeapObject(message),\r\n      addHeapObject(actual),\r\n      addHeapObject(expected),\r\n      addHeapObject(operator),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    AssertionErrorOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * If provided, the error message is set to this value.\r\n   * @returns {string | undefined}\r\n   */\r\n  get message() {\r\n    const ret = wasm.assertionerroroptions_message(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set message(value) {\r\n    wasm.assertionerroroptions_set_message(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * The actual property on the error instance.\r\n   * @returns {any}\r\n   */\r\n  get actual() {\r\n    const ret = wasm.assertionerroroptions_actual(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} value\r\n   */\r\n  set actual(value) {\r\n    wasm.assertionerroroptions_set_actual(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * The expected property on the error instance.\r\n   * @returns {any}\r\n   */\r\n  get expected() {\r\n    const ret = wasm.assertionerroroptions_expected(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} value\r\n   */\r\n  set expected(value) {\r\n    wasm.assertionerroroptions_set_expected(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * The operator property on the error instance.\r\n   * @returns {string}\r\n   */\r\n  get operator() {\r\n    const ret = wasm.assertionerroroptions_operator(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string} value\r\n   */\r\n  set operator(value) {\r\n    wasm.assertionerroroptions_set_operator(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst BalanceFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_balance_free(ptr >>> 0, 1));\r\n/**\r\n *\r\n * Represents a {@link UtxoContext} (account) balance.\r\n *\r\n * @see {@link IBalance}, {@link UtxoContext}\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class Balance {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Balance.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    BalanceFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    BalanceFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_balance_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Confirmed amount of funds available for spending.\r\n   * @returns {bigint}\r\n   */\r\n  get mature() {\r\n    const ret = wasm.balance_mature(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Amount of funds that are being received and are not yet confirmed.\r\n   * @returns {bigint}\r\n   */\r\n  get pending() {\r\n    const ret = wasm.balance_pending(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Amount of funds that are being send and are not yet accepted by the network.\r\n   * @returns {bigint}\r\n   */\r\n  get outgoing() {\r\n    const ret = wasm.balance_outgoing(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {NetworkType | NetworkId | string} network_type\r\n   * @returns {BalanceStrings}\r\n   */\r\n  toBalanceStrings(network_type) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.balance_toBalanceStrings(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network_type),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return BalanceStrings.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nconst BalanceStringsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_balancestrings_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Formatted string representation of the {@link Balance}.\r\n *\r\n * The value is formatted as `123,456.789`.\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class BalanceStrings {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(BalanceStrings.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    BalanceStringsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    BalanceStringsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_balancestrings_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get mature() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.balancestrings_mature(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get pending() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.balancestrings_pending(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst ConsoleConstructorOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_consoleconstructoroptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class ConsoleConstructorOptions {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(ConsoleConstructorOptions.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    ConsoleConstructorOptionsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    ConsoleConstructorOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_consoleconstructoroptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {any} stdout\r\n   * @param {any} stderr\r\n   * @param {boolean | null | undefined} ignore_errors\r\n   * @param {any} color_mod\r\n   * @param {object | null} [inspect_options]\r\n   */\r\n  constructor(stdout, stderr, ignore_errors, color_mod, inspect_options) {\r\n    const ret = wasm.consoleconstructoroptions_new_with_values(\r\n      addHeapObject(stdout),\r\n      addHeapObject(stderr),\r\n      isLikeNone(ignore_errors) ? 0xffffff : ignore_errors ? 1 : 0,\r\n      addHeapObject(color_mod),\r\n      isLikeNone(inspect_options) ? 0 : addHeapObject(inspect_options),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    ConsoleConstructorOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @param {any} stdout\r\n   * @param {any} stderr\r\n   * @returns {ConsoleConstructorOptions}\r\n   */\r\n  static new(stdout, stderr) {\r\n    const ret = wasm.consoleconstructoroptions_new(\r\n      addHeapObject(stdout),\r\n      addHeapObject(stderr),\r\n    );\r\n    return ConsoleConstructorOptions.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get stdout() {\r\n    const ret = wasm.consoleconstructoroptions_stdout(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} value\r\n   */\r\n  set stdout(value) {\r\n    wasm.consoleconstructoroptions_set_stdout(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get stderr() {\r\n    const ret = wasm.consoleconstructoroptions_stderr(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} value\r\n   */\r\n  set stderr(value) {\r\n    wasm.consoleconstructoroptions_set_stderr(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get ignore_errors() {\r\n    const ret = wasm.consoleconstructoroptions_ignore_errors(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set ignore_errors(value) {\r\n    wasm.consoleconstructoroptions_set_ignore_errors(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get color_mod() {\r\n    const ret = wasm.consoleconstructoroptions_color_mod(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} value\r\n   */\r\n  set color_mod(value) {\r\n    wasm.consoleconstructoroptions_set_color_mod(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {object | undefined}\r\n   */\r\n  get inspect_options() {\r\n    const ret = wasm.consoleconstructoroptions_inspect_options(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {object | null} [value]\r\n   */\r\n  set inspect_options(value) {\r\n    wasm.consoleconstructoroptions_set_inspect_options(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateHookCallbacksFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_createhookcallbacks_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class CreateHookCallbacks {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    CreateHookCallbacksFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_createhookcallbacks_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Function} init\r\n   * @param {Function} before\r\n   * @param {Function} after\r\n   * @param {Function} destroy\r\n   * @param {Function} promise_resolve\r\n   */\r\n  constructor(init, before, after, destroy, promise_resolve) {\r\n    try {\r\n      const ret = wasm.createhookcallbacks_new(\r\n        addBorrowedObject(init),\r\n        addBorrowedObject(before),\r\n        addBorrowedObject(after),\r\n        addBorrowedObject(destroy),\r\n        addBorrowedObject(promise_resolve),\r\n      );\r\n      this.__wbg_ptr = ret >>> 0;\r\n      CreateHookCallbacksFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n      heap[stack_pointer++] = undefined;\r\n      heap[stack_pointer++] = undefined;\r\n      heap[stack_pointer++] = undefined;\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get init() {\r\n    const ret = wasm.createhookcallbacks_init(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set init(value) {\r\n    wasm.createhookcallbacks_set_init(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get before() {\r\n    const ret = wasm.createhookcallbacks_before(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set before(value) {\r\n    wasm.createhookcallbacks_set_before(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get after() {\r\n    const ret = wasm.createhookcallbacks_after(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set after(value) {\r\n    wasm.createhookcallbacks_set_after(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get destroy() {\r\n    const ret = wasm.createhookcallbacks_destroy(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set destroy(value) {\r\n    wasm.createhookcallbacks_set_destroy(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get promise_resolve() {\r\n    const ret = wasm.createhookcallbacks_promise_resolve(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set promise_resolve(value) {\r\n    wasm.createhookcallbacks_set_promise_resolve(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateReadStreamOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_createreadstreamoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class CreateReadStreamOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    CreateReadStreamOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_createreadstreamoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {boolean | null} [auto_close]\r\n   * @param {boolean | null} [emit_close]\r\n   * @param {string | null} [encoding]\r\n   * @param {number | null} [end]\r\n   * @param {number | null} [fd]\r\n   * @param {string | null} [flags]\r\n   * @param {number | null} [high_water_mark]\r\n   * @param {number | null} [mode]\r\n   * @param {number | null} [start]\r\n   */\r\n  constructor(\r\n    auto_close,\r\n    emit_close,\r\n    encoding,\r\n    end,\r\n    fd,\r\n    flags,\r\n    high_water_mark,\r\n    mode,\r\n    start,\r\n  ) {\r\n    const ret = wasm.createreadstreamoptions_new_with_values(\r\n      isLikeNone(auto_close) ? 0xffffff : auto_close ? 1 : 0,\r\n      isLikeNone(emit_close) ? 0xffffff : emit_close ? 1 : 0,\r\n      isLikeNone(encoding) ? 0 : addHeapObject(encoding),\r\n      !isLikeNone(end),\r\n      isLikeNone(end) ? 0 : end,\r\n      isLikeNone(fd) ? 0x100000001 : fd >>> 0,\r\n      isLikeNone(flags) ? 0 : addHeapObject(flags),\r\n      !isLikeNone(high_water_mark),\r\n      isLikeNone(high_water_mark) ? 0 : high_water_mark,\r\n      isLikeNone(mode) ? 0x100000001 : mode >>> 0,\r\n      !isLikeNone(start),\r\n      isLikeNone(start) ? 0 : start,\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    CreateReadStreamOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get auto_close() {\r\n    const ret = wasm.createreadstreamoptions_auto_close(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set auto_close(value) {\r\n    wasm.createreadstreamoptions_set_auto_close(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get emit_close() {\r\n    const ret = wasm.createreadstreamoptions_emit_close(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set emit_close(value) {\r\n    wasm.createreadstreamoptions_set_emit_close(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get encoding() {\r\n    const ret = wasm.createreadstreamoptions_encoding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set encoding(value) {\r\n    wasm.createreadstreamoptions_set_encoding(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get end() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.createreadstreamoptions_end(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r2 = getDataViewMemory0().getFloat64(retptr + 8 * 1, true);\r\n      return r0 === 0 ? undefined : r2;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set end(value) {\r\n    wasm.createreadstreamoptions_set_end(\r\n      this.__wbg_ptr,\r\n      !isLikeNone(value),\r\n      isLikeNone(value) ? 0 : value,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get fd() {\r\n    const ret = wasm.createreadstreamoptions_fd(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set fd(value) {\r\n    wasm.createreadstreamoptions_set_fd(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0x100000001 : value >>> 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get flags() {\r\n    const ret = wasm.createreadstreamoptions_flags(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set flags(value) {\r\n    wasm.createreadstreamoptions_set_flags(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get high_water_mark() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.createreadstreamoptions_high_water_mark(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r2 = getDataViewMemory0().getFloat64(retptr + 8 * 1, true);\r\n      return r0 === 0 ? undefined : r2;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set high_water_mark(value) {\r\n    wasm.createreadstreamoptions_set_high_water_mark(\r\n      this.__wbg_ptr,\r\n      !isLikeNone(value),\r\n      isLikeNone(value) ? 0 : value,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get mode() {\r\n    const ret = wasm.createreadstreamoptions_mode(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set mode(value) {\r\n    wasm.createreadstreamoptions_set_mode(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0x100000001 : value >>> 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get start() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.createreadstreamoptions_start(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r2 = getDataViewMemory0().getFloat64(retptr + 8 * 1, true);\r\n      return r0 === 0 ? undefined : r2;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set start(value) {\r\n    wasm.createreadstreamoptions_set_start(\r\n      this.__wbg_ptr,\r\n      !isLikeNone(value),\r\n      isLikeNone(value) ? 0 : value,\r\n    );\r\n  }\r\n}\r\n\r\nconst CreateWriteStreamOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_createwritestreamoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class CreateWriteStreamOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    CreateWriteStreamOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_createwritestreamoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {boolean | null} [auto_close]\r\n   * @param {boolean | null} [emit_close]\r\n   * @param {string | null} [encoding]\r\n   * @param {number | null} [fd]\r\n   * @param {string | null} [flags]\r\n   * @param {number | null} [mode]\r\n   * @param {number | null} [start]\r\n   */\r\n  constructor(auto_close, emit_close, encoding, fd, flags, mode, start) {\r\n    const ret = wasm.createwritestreamoptions_new_with_values(\r\n      isLikeNone(auto_close) ? 0xffffff : auto_close ? 1 : 0,\r\n      isLikeNone(emit_close) ? 0xffffff : emit_close ? 1 : 0,\r\n      isLikeNone(encoding) ? 0 : addHeapObject(encoding),\r\n      isLikeNone(fd) ? 0x100000001 : fd >>> 0,\r\n      isLikeNone(flags) ? 0 : addHeapObject(flags),\r\n      isLikeNone(mode) ? 0x100000001 : mode >>> 0,\r\n      !isLikeNone(start),\r\n      isLikeNone(start) ? 0 : start,\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    CreateWriteStreamOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get auto_close() {\r\n    const ret = wasm.createwritestreamoptions_auto_close(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set auto_close(value) {\r\n    wasm.createwritestreamoptions_set_auto_close(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get emit_close() {\r\n    const ret = wasm.createwritestreamoptions_emit_close(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set emit_close(value) {\r\n    wasm.createwritestreamoptions_set_emit_close(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get encoding() {\r\n    const ret = wasm.createwritestreamoptions_encoding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set encoding(value) {\r\n    wasm.createwritestreamoptions_set_encoding(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get fd() {\r\n    const ret = wasm.createwritestreamoptions_fd(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set fd(value) {\r\n    wasm.createwritestreamoptions_set_fd(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0x100000001 : value >>> 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get flags() {\r\n    const ret = wasm.createwritestreamoptions_flags(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set flags(value) {\r\n    wasm.createwritestreamoptions_set_flags(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get mode() {\r\n    const ret = wasm.createwritestreamoptions_mode(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set mode(value) {\r\n    wasm.createwritestreamoptions_set_mode(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0x100000001 : value >>> 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get start() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.createwritestreamoptions_start(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r2 = getDataViewMemory0().getFloat64(retptr + 8 * 1, true);\r\n      return r0 === 0 ? undefined : r2;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set start(value) {\r\n    wasm.createwritestreamoptions_set_start(\r\n      this.__wbg_ptr,\r\n      !isLikeNone(value),\r\n      isLikeNone(value) ? 0 : value,\r\n    );\r\n  }\r\n}\r\n\r\nconst CryptoBoxFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_cryptobox_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * CryptoBox allows for encrypting and decrypting messages using the `crypto_box` crate.\r\n *\r\n * <https://docs.rs/crypto_box/0.9.1/crypto_box/>\r\n *\r\n *  @category Wallet SDK\r\n */\r\nexport class CryptoBox {\r\n  toJSON() {\r\n    return {\r\n      publicKey: this.publicKey,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    CryptoBoxFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_cryptobox_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {CryptoBoxPrivateKey | HexString | Uint8Array} secretKey\r\n   * @param {CryptoBoxPublicKey | HexString | Uint8Array} peerPublicKey\r\n   */\r\n  constructor(secretKey, peerPublicKey) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.cryptobox_ctor(\r\n        retptr,\r\n        addBorrowedObject(secretKey),\r\n        addBorrowedObject(peerPublicKey),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      CryptoBoxFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get publicKey() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.cryptobox_publicKey(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} plaintext\r\n   * @returns {string}\r\n   */\r\n  encrypt(plaintext) {\r\n    let deferred3_0;\r\n    let deferred3_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        plaintext,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.cryptobox_encrypt(retptr, this.__wbg_ptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr2 = r0;\r\n      var len2 = r1;\r\n      if (r3) {\r\n        ptr2 = 0;\r\n        len2 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred3_0 = ptr2;\r\n      deferred3_1 = len2;\r\n      return getStringFromWasm0(ptr2, len2);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred3_0, deferred3_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} base64string\r\n   * @returns {string}\r\n   */\r\n  decrypt(base64string) {\r\n    let deferred3_0;\r\n    let deferred3_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        base64string,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.cryptobox_decrypt(retptr, this.__wbg_ptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr2 = r0;\r\n      var len2 = r1;\r\n      if (r3) {\r\n        ptr2 = 0;\r\n        len2 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred3_0 = ptr2;\r\n      deferred3_1 = len2;\r\n      return getStringFromWasm0(ptr2, len2);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred3_0, deferred3_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst CryptoBoxPrivateKeyFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_cryptoboxprivatekey_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class CryptoBoxPrivateKey {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    CryptoBoxPrivateKeyFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_cryptoboxprivatekey_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {HexString | Uint8Array} secretKey\r\n   */\r\n  constructor(secretKey) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.cryptoboxprivatekey_ctor(retptr, addHeapObject(secretKey));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      CryptoBoxPrivateKeyFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {CryptoBoxPublicKey}\r\n   */\r\n  to_public_key() {\r\n    const ret = wasm.cryptoboxprivatekey_to_public_key(this.__wbg_ptr);\r\n    return CryptoBoxPublicKey.__wrap(ret);\r\n  }\r\n}\r\n\r\nconst CryptoBoxPublicKeyFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_cryptoboxpublickey_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class CryptoBoxPublicKey {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(CryptoBoxPublicKey.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    CryptoBoxPublicKeyFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    CryptoBoxPublicKeyFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_cryptoboxpublickey_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {HexString | Uint8Array} publicKey\r\n   */\r\n  constructor(publicKey) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.cryptoboxpublickey_ctor(retptr, addHeapObject(publicKey));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      CryptoBoxPublicKeyFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.cryptoboxpublickey_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst DerivationPathFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_derivationpath_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Key derivation path\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class DerivationPath {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(DerivationPath.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    DerivationPathFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    DerivationPathFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_derivationpath_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} path\r\n   */\r\n  constructor(path) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        path,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.derivationpath_new(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      DerivationPathFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Is this derivation path empty? (i.e. the root)\r\n   * @returns {boolean}\r\n   */\r\n  isEmpty() {\r\n    const ret = wasm.derivationpath_isEmpty(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * Get the count of [`ChildNumber`] values in this derivation path.\r\n   * @returns {number}\r\n   */\r\n  length() {\r\n    const ret = wasm.derivationpath_length(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * Get the parent [`DerivationPath`] for the current one.\r\n   *\r\n   * Returns `Undefined` if this is already the root path.\r\n   * @returns {DerivationPath | undefined}\r\n   */\r\n  parent() {\r\n    const ret = wasm.derivationpath_parent(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : DerivationPath.__wrap(ret);\r\n  }\r\n  /**\r\n   * Push a [`ChildNumber`] onto an existing derivation path.\r\n   * @param {number} child_number\r\n   * @param {boolean | null} [hardened]\r\n   */\r\n  push(child_number, hardened) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.derivationpath_push(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        child_number,\r\n        isLikeNone(hardened) ? 0xffffff : hardened ? 1 : 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.derivationpath_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst FormatInputPathObjectFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_formatinputpathobject_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class FormatInputPathObject {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(FormatInputPathObject.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    FormatInputPathObjectFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    FormatInputPathObjectFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_formatinputpathobject_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | null} [base]\r\n   * @param {string | null} [dir]\r\n   * @param {string | null} [ext]\r\n   * @param {string | null} [name]\r\n   * @param {string | null} [root]\r\n   */\r\n  constructor(base, dir, ext, name, root) {\r\n    const ret = wasm.formatinputpathobject_new_with_values(\r\n      isLikeNone(base) ? 0 : addHeapObject(base),\r\n      isLikeNone(dir) ? 0 : addHeapObject(dir),\r\n      isLikeNone(ext) ? 0 : addHeapObject(ext),\r\n      isLikeNone(name) ? 0 : addHeapObject(name),\r\n      isLikeNone(root) ? 0 : addHeapObject(root),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    FormatInputPathObjectFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {FormatInputPathObject}\r\n   */\r\n  static new() {\r\n    const ret = wasm.formatinputpathobject_new();\r\n    return FormatInputPathObject.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get base() {\r\n    const ret = wasm.formatinputpathobject_base(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set base(value) {\r\n    wasm.formatinputpathobject_set_base(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get dir() {\r\n    const ret = wasm.formatinputpathobject_dir(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set dir(value) {\r\n    wasm.formatinputpathobject_set_dir(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get ext() {\r\n    const ret = wasm.formatinputpathobject_ext(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set ext(value) {\r\n    wasm.formatinputpathobject_set_ext(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get name() {\r\n    const ret = wasm.formatinputpathobject_name(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set name(value) {\r\n    wasm.formatinputpathobject_set_name(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get root() {\r\n    const ret = wasm.formatinputpathobject_root(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set root(value) {\r\n    wasm.formatinputpathobject_set_root(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst GeneratorFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_generator_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Generator is a type capable of generating transactions based on a supplied\r\n * set of UTXO entries or a UTXO entry producer (such as {@link UtxoContext}). The Generator\r\n * accumulates UTXO entries until it can generate a transaction that meets the\r\n * requested amount or until the total mass of created inputs exceeds the allowed\r\n * transaction mass, at which point it will produce a compound transaction by forwarding\r\n * all selected UTXO entries to the supplied change address and prepare to start generating\r\n * a new transaction.  Such sequence of daisy-chained transactions is known as a \"batch\".\r\n * Each compound transaction results in a new UTXO, which is immediately reused in the\r\n * subsequent transaction.\r\n *\r\n * The Generator constructor accepts a single {@link IGeneratorSettingsObject} object.\r\n *\r\n * ```javascript\r\n *\r\n * let generator = new Generator({\r\n *     utxoEntries : [...],\r\n *     changeAddress : \"kaspa:...\",\r\n *     outputs : [\r\n *         { amount : kaspaToSompi(10.0), address: \"kaspa:...\"},\r\n *         { amount : kaspaToSompi(20.0), address: \"kaspa:...\"},\r\n *         ...\r\n *     ],\r\n *     priorityFee : 1000n,\r\n * });\r\n *\r\n * let pendingTransaction;\r\n * while(pendingTransaction = await generator.next()) {\r\n *     await pendingTransaction.sign(privateKeys);\r\n *     await pendingTransaction.submit(rpc);\r\n * }\r\n *\r\n * let summary = generator.summary();\r\n * console.log(summary);\r\n *\r\n * ```\r\n * @see\r\n *     {@link IGeneratorSettingsObject},\r\n *     {@link PendingTransaction},\r\n *     {@link UtxoContext},\r\n *     {@link createTransactions},\r\n *     {@link estimateTransactions},\r\n * @category Wallet SDK\r\n */\r\nexport class Generator {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    GeneratorFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_generator_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {IGeneratorSettingsObject} args\r\n   */\r\n  constructor(args) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.generator_ctor(retptr, addHeapObject(args));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      GeneratorFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate next transaction\r\n   * @returns {Promise<any>}\r\n   */\r\n  next() {\r\n    const ret = wasm.generator_next(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<GeneratorSummary>}\r\n   */\r\n  estimate() {\r\n    const ret = wasm.generator_estimate(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {GeneratorSummary}\r\n   */\r\n  summary() {\r\n    const ret = wasm.generator_summary(this.__wbg_ptr);\r\n    return GeneratorSummary.__wrap(ret);\r\n  }\r\n}\r\n\r\nconst GeneratorSummaryFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_generatorsummary_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * A class containing a summary produced by transaction {@link Generator}.\r\n * This class contains the number of transactions, the aggregated fees,\r\n * the aggregated UTXOs and the final transaction amount that includes\r\n * both network and QoS (priority) fees.\r\n *\r\n * @see {@link createTransactions}, {@link IGeneratorSettingsObject}, {@link Generator}\r\n * @category Wallet SDK\r\n */\r\nexport class GeneratorSummary {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(GeneratorSummary.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    GeneratorSummaryFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      networkType: this.networkType,\r\n      utxos: this.utxos,\r\n      fees: this.fees,\r\n      mass: this.mass,\r\n      transactions: this.transactions,\r\n      finalAmount: this.finalAmount,\r\n      finalTransactionId: this.finalTransactionId,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    GeneratorSummaryFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_generatorsummary_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {NetworkType}\r\n   */\r\n  get networkType() {\r\n    const ret = wasm.generatorsummary_networkType(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get utxos() {\r\n    const ret = wasm.generatorsummary_utxos(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get fees() {\r\n    const ret = wasm.generatorsummary_fees(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get mass() {\r\n    const ret = wasm.generatorsummary_mass(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get transactions() {\r\n    const ret = wasm.generatorsummary_transactions(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @returns {bigint | undefined}\r\n   */\r\n  get finalAmount() {\r\n    const ret = wasm.generatorsummary_finalAmount(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get finalTransactionId() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.generatorsummary_finalTransactionId(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst GetNameOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_getnameoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class GetNameOptions {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(GetNameOptions.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    GetNameOptionsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    GetNameOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_getnameoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {number | null | undefined} family\r\n   * @param {string} host\r\n   * @param {string} local_address\r\n   * @param {number} port\r\n   * @returns {GetNameOptions}\r\n   */\r\n  static new(family, host, local_address, port) {\r\n    const ret = wasm.getnameoptions_new(\r\n      isLikeNone(family) ? 0xffffff : family,\r\n      addHeapObject(host),\r\n      addHeapObject(local_address),\r\n      port,\r\n    );\r\n    return GetNameOptions.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get family() {\r\n    const ret = wasm.getnameoptions_family(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set family(value) {\r\n    wasm.getnameoptions_set_family(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get host() {\r\n    const ret = wasm.getnameoptions_host(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string} value\r\n   */\r\n  set host(value) {\r\n    wasm.getnameoptions_set_host(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get local_address() {\r\n    const ret = wasm.getnameoptions_local_address(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string} value\r\n   */\r\n  set local_address(value) {\r\n    wasm.getnameoptions_set_local_address(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get port() {\r\n    const ret = wasm.getnameoptions_port(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @param {number} value\r\n   */\r\n  set port(value) {\r\n    wasm.getnameoptions_set_port(this.__wbg_ptr, value);\r\n  }\r\n}\r\n\r\nconst HashFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_hash_free(ptr >>> 0, 1));\r\n/**\r\n * @category General\r\n */\r\nexport class Hash {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Hash.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    HashFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    HashFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_hash_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} hex_str\r\n   */\r\n  constructor(hex_str) {\r\n    const ptr0 = passStringToWasm0(\r\n      hex_str,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.hash_constructor(ptr0, len0);\r\n    this.__wbg_ptr = ret >>> 0;\r\n    HashFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.hash_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst HeaderFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_header_free(ptr >>> 0, 1));\r\n/**\r\n * Kaspa Block Header\r\n *\r\n * @category Consensus\r\n */\r\nexport class Header {\r\n  toJSON() {\r\n    return {\r\n      version: this.version,\r\n      timestamp: this.timestamp,\r\n      bits: this.bits,\r\n      nonce: this.nonce,\r\n      daaScore: this.daaScore,\r\n      blueScore: this.blueScore,\r\n      hash: this.hash,\r\n      hashMerkleRoot: this.hashMerkleRoot,\r\n      acceptedIdMerkleRoot: this.acceptedIdMerkleRoot,\r\n      utxoCommitment: this.utxoCommitment,\r\n      pruningPoint: this.pruningPoint,\r\n      parentsByLevel: this.parentsByLevel,\r\n      blueWork: this.blueWork,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    HeaderFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_header_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Header | IHeader | IRawHeader} js_value\r\n   */\r\n  constructor(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_constructor(retptr, addHeapObject(js_value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      HeaderFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Finalizes the header and recomputes (updates) the header hash\r\n   * @return { String } header hash\r\n   * @returns {string}\r\n   */\r\n  finalize() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_finalize(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Obtain `JSON` representation of the header. JSON representation\r\n   * should be obtained using WASM, to ensure proper serialization of\r\n   * big integers.\r\n   * @returns {string}\r\n   */\r\n  asJSON() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_asJSON(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get version() {\r\n    const ret = wasm.header_get_version(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} version\r\n   */\r\n  set version(version) {\r\n    wasm.header_set_version(this.__wbg_ptr, version);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get timestamp() {\r\n    const ret = wasm.header_get_timestamp(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} timestamp\r\n   */\r\n  set timestamp(timestamp) {\r\n    wasm.header_set_timestamp(this.__wbg_ptr, timestamp);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get bits() {\r\n    const ret = wasm.header_bits(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @param {number} bits\r\n   */\r\n  set bits(bits) {\r\n    wasm.header_set_bits(this.__wbg_ptr, bits);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get nonce() {\r\n    const ret = wasm.header_nonce(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} nonce\r\n   */\r\n  set nonce(nonce) {\r\n    wasm.header_set_nonce(this.__wbg_ptr, nonce);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get daaScore() {\r\n    const ret = wasm.header_daa_score(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} daa_score\r\n   */\r\n  set daaScore(daa_score) {\r\n    wasm.header_set_daa_score(this.__wbg_ptr, daa_score);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get blueScore() {\r\n    const ret = wasm.header_blue_score(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} blue_score\r\n   */\r\n  set blueScore(blue_score) {\r\n    wasm.header_set_blue_score(this.__wbg_ptr, blue_score);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get hash() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_get_hash_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get hashMerkleRoot() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_get_hash_merkle_root_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set hashMerkleRoot(js_value) {\r\n    wasm.header_set_hash_merkle_root_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get acceptedIdMerkleRoot() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_get_accepted_id_merkle_root_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set acceptedIdMerkleRoot(js_value) {\r\n    wasm.header_set_accepted_id_merkle_root_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get utxoCommitment() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_get_utxo_commitment_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set utxoCommitment(js_value) {\r\n    wasm.header_set_utxo_commitment_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get pruningPoint() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_get_pruning_point_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set pruningPoint(js_value) {\r\n    wasm.header_set_pruning_point_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get parentsByLevel() {\r\n    const ret = wasm.header_get_parents_by_level_as_js_value(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set parentsByLevel(js_value) {\r\n    wasm.header_set_parents_by_level_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get blueWork() {\r\n    const ret = wasm.header_blue_work(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  getBlueWorkAsHex() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.header_getBlueWorkAsHex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set blueWork(js_value) {\r\n    wasm.header_set_blue_work_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n}\r\n\r\nconst KeypairFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_keypair_free(ptr >>> 0, 1));\r\n/**\r\n * Data structure that contains a secret and public keys.\r\n * @category Wallet SDK\r\n */\r\nexport class Keypair {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Keypair.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    KeypairFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      publicKey: this.publicKey,\r\n      privateKey: this.privateKey,\r\n      xOnlyPublicKey: this.xOnlyPublicKey,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    KeypairFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_keypair_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Get the [`PublicKey`] of this [`Keypair`].\r\n   * @returns {string}\r\n   */\r\n  get publicKey() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.keypair_get_public_key(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Get the [`PrivateKey`] of this [`Keypair`].\r\n   * @returns {string}\r\n   */\r\n  get privateKey() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.keypair_get_private_key(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Get the `XOnlyPublicKey` of this [`Keypair`].\r\n   * @returns {any}\r\n   */\r\n  get xOnlyPublicKey() {\r\n    const ret = wasm.keypair_get_xonly_public_key(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Get the [`Address`] of this Keypair's [`PublicKey`].\r\n   * Receives a [`NetworkType`](kaspa_consensus_core::network::NetworkType)\r\n   * to determine the prefix of the address.\r\n   * JavaScript: `let address = keypair.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddress(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.keypair_toAddress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Get `ECDSA` [`Address`] of this Keypair's [`PublicKey`].\r\n   * Receives a [`NetworkType`](kaspa_consensus_core::network::NetworkType)\r\n   * to determine the prefix of the address.\r\n   * JavaScript: `let address = keypair.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddressECDSA(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.keypair_toAddressECDSA(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Create a new random [`Keypair`].\r\n   * JavaScript: `let keypair = Keypair::random();`.\r\n   * @returns {Keypair}\r\n   */\r\n  static random() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.keypair_random(retptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Keypair.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Create a new [`Keypair`] from a [`PrivateKey`].\r\n   * JavaScript: `let privkey = new PrivateKey(hexString); let keypair = privkey.toKeypair();`.\r\n   * @param {PrivateKey} secret_key\r\n   * @returns {Keypair}\r\n   */\r\n  static fromPrivateKey(secret_key) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      _assertClass(secret_key, PrivateKey);\r\n      wasm.keypair_fromPrivateKey(retptr, secret_key.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Keypair.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst MkdtempSyncOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_mkdtempsyncoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class MkdtempSyncOptions {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(MkdtempSyncOptions.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    MkdtempSyncOptionsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    MkdtempSyncOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_mkdtempsyncoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | null} [encoding]\r\n   */\r\n  constructor(encoding) {\r\n    const ret = wasm.mkdtempsyncoptions_new_with_values(\r\n      isLikeNone(encoding) ? 0 : addHeapObject(encoding),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    MkdtempSyncOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {MkdtempSyncOptions}\r\n   */\r\n  static new() {\r\n    const ret = wasm.mkdtempsyncoptions_new();\r\n    return MkdtempSyncOptions.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get encoding() {\r\n    const ret = wasm.mkdtempsyncoptions_encoding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set encoding(value) {\r\n    wasm.mkdtempsyncoptions_set_encoding(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst MnemonicFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_mnemonic_free(ptr >>> 0, 1));\r\n/**\r\n * BIP39 mnemonic phrases: sequences of words representing cryptographic keys.\r\n * @category Wallet SDK\r\n */\r\nexport class Mnemonic {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Mnemonic.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    MnemonicFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      entropy: this.entropy,\r\n      phrase: this.phrase,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    MnemonicFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_mnemonic_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} phrase\r\n   * @param {Language | null} [language]\r\n   */\r\n  constructor(phrase, language) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        phrase,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.mnemonic_constructor(\r\n        retptr,\r\n        ptr0,\r\n        len0,\r\n        isLikeNone(language) ? 1 : language,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      MnemonicFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Validate mnemonic phrase. Returns `true` if the phrase is valid, `false` otherwise.\r\n   * @param {string} phrase\r\n   * @param {Language | null} [language]\r\n   * @returns {boolean}\r\n   */\r\n  static validate(phrase, language) {\r\n    const ptr0 = passStringToWasm0(\r\n      phrase,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.mnemonic_validate(\r\n      ptr0,\r\n      len0,\r\n      isLikeNone(language) ? 1 : language,\r\n    );\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get entropy() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.mnemonic_entropy(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} entropy\r\n   */\r\n  set entropy(entropy) {\r\n    const ptr0 = passStringToWasm0(\r\n      entropy,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.mnemonic_set_entropy(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @param {number | null} [word_count]\r\n   * @returns {Mnemonic}\r\n   */\r\n  static random(word_count) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.mnemonic_random(\r\n        retptr,\r\n        isLikeNone(word_count) ? 0x100000001 : word_count >>> 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Mnemonic.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get phrase() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.mnemonic_phrase(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} phrase\r\n   */\r\n  set phrase(phrase) {\r\n    const ptr0 = passStringToWasm0(\r\n      phrase,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.mnemonic_set_phrase(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @param {string | null} [password]\r\n   * @returns {string}\r\n   */\r\n  toSeed(password) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      var ptr0 = isLikeNone(password)\r\n        ? 0\r\n        : passStringToWasm0(\r\n            password,\r\n            wasm.__wbindgen_export_1,\r\n            wasm.__wbindgen_export_2,\r\n          );\r\n      var len0 = WASM_VECTOR_LEN;\r\n      wasm.mnemonic_toSeed(retptr, this.__wbg_ptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred2_0 = r0;\r\n      deferred2_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst NetServerOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_netserveroptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class NetServerOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    NetServerOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_netserveroptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get allow_half_open() {\r\n    const ptr = this.__destroy_into_raw();\r\n    const ret = wasm.netserveroptions_allow_half_open(ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set allow_half_open(value) {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.netserveroptions_set_allow_half_open(\r\n      ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get pause_on_connect() {\r\n    const ptr = this.__destroy_into_raw();\r\n    const ret = wasm.netserveroptions_pause_on_connect(ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set pause_on_connect(value) {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.netserveroptions_set_allow_half_open(\r\n      ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n}\r\n\r\nconst NetworkIdFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_networkid_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * NetworkId is a unique identifier for a kaspa network instance.\r\n * It is composed of a network type and an optional suffix.\r\n *\r\n * @category Consensus\r\n */\r\nexport class NetworkId {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(NetworkId.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    NetworkIdFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      type: this.type,\r\n      suffix: this.suffix,\r\n      id: this.id,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    NetworkIdFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_networkid_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {NetworkType}\r\n   */\r\n  get type() {\r\n    const ret = wasm.__wbg_get_networkid_type(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {NetworkType} arg0\r\n   */\r\n  set type(arg0) {\r\n    wasm.__wbg_set_networkid_type(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get suffix() {\r\n    const ret = wasm.__wbg_get_networkid_suffix(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [arg0]\r\n   */\r\n  set suffix(arg0) {\r\n    wasm.__wbg_set_networkid_suffix(\r\n      this.__wbg_ptr,\r\n      isLikeNone(arg0) ? 0x100000001 : arg0 >>> 0,\r\n    );\r\n  }\r\n  /**\r\n   * @param {any} value\r\n   */\r\n  constructor(value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.networkid_ctor(retptr, addBorrowedObject(value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      NetworkIdFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get id() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.networkid_id(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.networkid_id(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  addressPrefix() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.networkid_addressPrefix(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst NodeDescriptorFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_nodedescriptor_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Data structure representing a Node connection endpoint\r\n * as provided by the {@link Resolver}.\r\n *\r\n * @category Node RPC\r\n */\r\nexport class NodeDescriptor {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(NodeDescriptor.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    NodeDescriptorFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      uid: this.uid,\r\n      url: this.url,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    NodeDescriptorFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_nodedescriptor_free(ptr, 0);\r\n  }\r\n  /**\r\n   * The unique identifier of the node.\r\n   * @returns {string}\r\n   */\r\n  get uid() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_nodedescriptor_uid(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * The unique identifier of the node.\r\n   * @param {string} arg0\r\n   */\r\n  set uid(arg0) {\r\n    const ptr0 = passStringToWasm0(\r\n      arg0,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_nodedescriptor_uid(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * The URL of the node WebSocket (wRPC URL).\r\n   * @returns {string}\r\n   */\r\n  get url() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_nodedescriptor_url(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * The URL of the node WebSocket (wRPC URL).\r\n   * @param {string} arg0\r\n   */\r\n  set url(arg0) {\r\n    const ptr0 = passStringToWasm0(\r\n      arg0,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_nodedescriptor_url(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n}\r\n\r\nconst PSKBFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_pskb_free(ptr >>> 0, 1));\r\n\r\nexport class PSKB {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PSKB.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PSKBFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PSKBFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_pskb_free(ptr, 0);\r\n  }\r\n  constructor() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskb_new(retptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PSKBFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  serialize() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskb_serialize(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {NetworkId | string} network_id\r\n   * @returns {string}\r\n   */\r\n  displayFormat(network_id) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskb_displayFormat(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network_id),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} hex_data\r\n   * @returns {PSKB}\r\n   */\r\n  static deserialize(hex_data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        hex_data,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.pskb_deserialize(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKB.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get length() {\r\n    const ret = wasm.pskb_length(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @param {PSKT} pskt\r\n   */\r\n  add(pskt) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      _assertClass(pskt, PSKT);\r\n      wasm.pskb_add(retptr, this.__wbg_ptr, pskt.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {PSKB} other\r\n   */\r\n  merge(other) {\r\n    _assertClass(other, PSKB);\r\n    wasm.pskb_merge(this.__wbg_ptr, other.__wbg_ptr);\r\n  }\r\n}\r\n\r\nconst PSKTFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_pskt_free(ptr >>> 0, 1));\r\n\r\nexport class PSKT {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PSKT.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PSKTFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      role: this.role,\r\n      payload: this.payload,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PSKTFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_pskt_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {PSKT | Transaction | string | undefined} payload\r\n   */\r\n  constructor(payload) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_new(retptr, addHeapObject(payload));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PSKTFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get role() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_role(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get payload() {\r\n    const ret = wasm.pskt_payload(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  serialize() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_serialize(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `CREATOR`\r\n   * #[wasm_bindgen(js_name = toCreator)]\r\n   * @returns {PSKT}\r\n   */\r\n  creator() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_creator(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `CONSTRUCTOR`\r\n   * @returns {PSKT}\r\n   */\r\n  toConstructor() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_toConstructor(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `UPDATER`\r\n   * @returns {PSKT}\r\n   */\r\n  toUpdater() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_toUpdater(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `SIGNER`\r\n   * @returns {PSKT}\r\n   */\r\n  toSigner() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_toSigner(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `COMBINER`\r\n   * @returns {PSKT}\r\n   */\r\n  toCombiner() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_toCombiner(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `FINALIZER`\r\n   * @returns {PSKT}\r\n   */\r\n  toFinalizer() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_toFinalizer(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Change role to `EXTRACTOR`\r\n   * @returns {PSKT}\r\n   */\r\n  toExtractor() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_toExtractor(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {bigint} lock_time\r\n   * @returns {PSKT}\r\n   */\r\n  fallbackLockTime(lock_time) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_fallbackLockTime(retptr, this.__wbg_ptr, lock_time);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PSKT}\r\n   */\r\n  inputsModifiable() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_inputsModifiable(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PSKT}\r\n   */\r\n  outputsModifiable() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_outputsModifiable(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PSKT}\r\n   */\r\n  noMoreInputs() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_noMoreInputs(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PSKT}\r\n   */\r\n  noMoreOutputs() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_noMoreOutputs(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {ITransactionInput | TransactionInput} input\r\n   * @param {any} data\r\n   * @returns {PSKT}\r\n   */\r\n  inputAndRedeemScript(input, data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_inputAndRedeemScript(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(input),\r\n        addBorrowedObject(data),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {ITransactionInput | TransactionInput} input\r\n   * @returns {PSKT}\r\n   */\r\n  input(input) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_input(retptr, this.__wbg_ptr, addBorrowedObject(input));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {ITransactionOutput | TransactionOutput} output\r\n   * @returns {PSKT}\r\n   */\r\n  output(output) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_output(retptr, this.__wbg_ptr, addBorrowedObject(output));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {bigint} n\r\n   * @param {number} input_index\r\n   * @returns {PSKT}\r\n   */\r\n  setSequence(n, input_index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_setSequence(retptr, this.__wbg_ptr, n, input_index);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PSKT.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {Hash}\r\n   */\r\n  calculateId() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_calculateId(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Hash.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} data\r\n   * @returns {bigint}\r\n   */\r\n  calculateMass(data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pskt_calculateMass(retptr, this.__wbg_ptr, addBorrowedObject(data));\r\n      var r0 = getDataViewMemory0().getBigInt64(retptr + 8 * 0, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      if (r3) {\r\n        throw takeObject(r2);\r\n      }\r\n      return BigInt.asUintN(64, r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nconst PaymentOutputFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_paymentoutput_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * A Rust data structure representing a single payment\r\n * output containing a destination address and amount.\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class PaymentOutput {\r\n  toJSON() {\r\n    return {\r\n      address: this.address,\r\n      amount: this.amount,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PaymentOutputFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_paymentoutput_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {Address}\r\n   */\r\n  get address() {\r\n    const ret = wasm.__wbg_get_paymentoutput_address(this.__wbg_ptr);\r\n    return Address.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {Address} arg0\r\n   */\r\n  set address(arg0) {\r\n    _assertClass(arg0, Address);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_paymentoutput_address(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get amount() {\r\n    const ret = wasm.__wbg_get_paymentoutput_amount(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} arg0\r\n   */\r\n  set amount(arg0) {\r\n    wasm.__wbg_set_paymentoutput_amount(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @param {Address} address\r\n   * @param {bigint} amount\r\n   */\r\n  constructor(address, amount) {\r\n    _assertClass(address, Address);\r\n    var ptr0 = address.__destroy_into_raw();\r\n    const ret = wasm.paymentoutput_new(ptr0, amount);\r\n    this.__wbg_ptr = ret >>> 0;\r\n    PaymentOutputFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n}\r\n\r\nconst PaymentOutputsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_paymentoutputs_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class PaymentOutputs {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PaymentOutputsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_paymentoutputs_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {IPaymentOutput[]} output_array\r\n   */\r\n  constructor(output_array) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.paymentoutputs_constructor(retptr, addHeapObject(output_array));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PaymentOutputsFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst PendingTransactionFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_pendingtransaction_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class PendingTransaction {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PendingTransaction.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PendingTransactionFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      id: this.id,\r\n      paymentAmount: this.paymentAmount,\r\n      changeAmount: this.changeAmount,\r\n      feeAmount: this.feeAmount,\r\n      mass: this.mass,\r\n      minimumSignatures: this.minimumSignatures,\r\n      aggregateInputAmount: this.aggregateInputAmount,\r\n      aggregateOutputAmount: this.aggregateOutputAmount,\r\n      type: this.type,\r\n      transaction: this.transaction,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PendingTransactionFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_pendingtransaction_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Transaction Id\r\n   * @returns {string}\r\n   */\r\n  get id() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_id(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Total amount transferred to the destination (aggregate output - change).\r\n   * @returns {any}\r\n   */\r\n  get paymentAmount() {\r\n    const ret = wasm.pendingtransaction_paymentAmount(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Change amount (if any).\r\n   * @returns {bigint}\r\n   */\r\n  get changeAmount() {\r\n    const ret = wasm.pendingtransaction_changeAmount(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Total transaction fees (network fees + priority fees).\r\n   * @returns {bigint}\r\n   */\r\n  get feeAmount() {\r\n    const ret = wasm.pendingtransaction_feeAmount(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Calculated transaction mass.\r\n   * @returns {bigint}\r\n   */\r\n  get mass() {\r\n    const ret = wasm.pendingtransaction_mass(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Minimum number of signatures required by the transaction.\r\n   * (as specified during the transaction creation).\r\n   * @returns {number}\r\n   */\r\n  get minimumSignatures() {\r\n    const ret = wasm.pendingtransaction_minimumSignatures(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * Total aggregate input amount.\r\n   * @returns {bigint}\r\n   */\r\n  get aggregateInputAmount() {\r\n    const ret = wasm.pendingtransaction_aggregateInputAmount(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Total aggregate output amount.\r\n   * @returns {bigint}\r\n   */\r\n  get aggregateOutputAmount() {\r\n    const ret = wasm.pendingtransaction_aggregateOutputAmount(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Transaction type (\"batch\" or \"final\").\r\n   * @returns {string}\r\n   */\r\n  get type() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_type(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * List of unique addresses used by transaction inputs.\r\n   * This method can be used to determine addresses used by transaction inputs\r\n   * in order to select private keys needed for transaction signing.\r\n   * @returns {Array<any>}\r\n   */\r\n  addresses() {\r\n    const ret = wasm.pendingtransaction_addresses(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Provides a list of UTXO entries used by the transaction.\r\n   * @returns {Array<any>}\r\n   */\r\n  getUtxoEntries() {\r\n    const ret = wasm.pendingtransaction_getUtxoEntries(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Creates and returns a signature for the input at the specified index.\r\n   * @param {number} input_index\r\n   * @param {PrivateKey} private_key\r\n   * @param {SighashType | null} [sighash_type]\r\n   * @returns {HexString}\r\n   */\r\n  createInputSignature(input_index, private_key, sighash_type) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      _assertClass(private_key, PrivateKey);\r\n      wasm.pendingtransaction_createInputSignature(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        input_index,\r\n        private_key.__wbg_ptr,\r\n        isLikeNone(sighash_type) ? 6 : sighash_type,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Sets a signature to the input at the specified index.\r\n   * @param {number} input_index\r\n   * @param {HexString | Uint8Array} signature_script\r\n   */\r\n  fillInput(input_index, signature_script) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_fillInput(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        input_index,\r\n        addHeapObject(signature_script),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Signs the input at the specified index with the supplied private key\r\n   * and an optional SighashType.\r\n   * @param {number} input_index\r\n   * @param {PrivateKey} private_key\r\n   * @param {SighashType | null} [sighash_type]\r\n   */\r\n  signInput(input_index, private_key, sighash_type) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      _assertClass(private_key, PrivateKey);\r\n      wasm.pendingtransaction_signInput(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        input_index,\r\n        private_key.__wbg_ptr,\r\n        isLikeNone(sighash_type) ? 6 : sighash_type,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Signs transaction with supplied [`Array`] or [`PrivateKey`] or an array of\r\n   * raw private key bytes (encoded as `Uint8Array` or as hex strings)\r\n   * @param {(PrivateKey | HexString | Uint8Array)[]} js_value\r\n   * @param {boolean | null} [check_fully_signed]\r\n   */\r\n  sign(js_value, check_fully_signed) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_sign(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(js_value),\r\n        isLikeNone(check_fully_signed) ? 0xffffff : check_fully_signed ? 1 : 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Submit transaction to the supplied [`RpcClient`]\r\n   * **IMPORTANT:** This method will remove UTXOs from the associated\r\n   * {@link UtxoContext} if one was used to create the transaction\r\n   * and will return UTXOs back to {@link UtxoContext} in case of\r\n   * a failed submission.\r\n   *\r\n   * # Important\r\n   *\r\n   * Make sure to consume the returned `txid` value. Always invoke this method\r\n   * as follows `let txid = await pendingTransaction.submit(rpc);`. If you do not\r\n   * consume the returned value and the rpc object is temporary, the GC will\r\n   * collect the `rpc` object passed to submit() potentially causing a panic.\r\n   *\r\n   * @see {@link RpcClient.submitTransaction}\r\n   * @param {RpcClient} wasm_rpc_client\r\n   * @returns {Promise<string>}\r\n   */\r\n  submit(wasm_rpc_client) {\r\n    _assertClass(wasm_rpc_client, RpcClient);\r\n    const ret = wasm.pendingtransaction_submit(\r\n      this.__wbg_ptr,\r\n      wasm_rpc_client.__wbg_ptr,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Returns encapsulated network [`Transaction`]\r\n   * @returns {Transaction}\r\n   */\r\n  get transaction() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_transaction(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Transaction.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Serializes the transaction to a pure JavaScript Object.\r\n   * The schema of the JavaScript object is defined by {@link ISerializableTransaction}.\r\n   * @see {@link ISerializableTransaction}\r\n   * @see {@link Transaction}, {@link ISerializableTransaction}\r\n   * @returns {ITransaction | Transaction}\r\n   */\r\n  serializeToObject() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_serializeToObject(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Serializes the transaction to a JSON string.\r\n   * The schema of the JSON is defined by {@link ISerializableTransaction}.\r\n   * Once serialized, the transaction can be deserialized using {@link Transaction.deserializeFromJSON}.\r\n   * @see {@link Transaction}, {@link ISerializableTransaction}\r\n   * @returns {string}\r\n   */\r\n  serializeToJSON() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_serializeToJSON(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Serializes the transaction to a \"Safe\" JSON schema where it converts all `bigint` values to `string` to avoid potential client-side precision loss.\r\n   * Once serialized, the transaction can be deserialized using {@link Transaction.deserializeFromSafeJSON}.\r\n   * @see {@link Transaction}, {@link ISerializableTransaction}\r\n   * @returns {string}\r\n   */\r\n  serializeToSafeJSON() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pendingtransaction_serializeToSafeJSON(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst PipeOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_pipeoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class PipeOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PipeOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_pipeoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {boolean | null} [end]\r\n   */\r\n  constructor(end) {\r\n    const ret = wasm.pipeoptions_new(isLikeNone(end) ? 0xffffff : end ? 1 : 0);\r\n    this.__wbg_ptr = ret >>> 0;\r\n    PipeOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get end() {\r\n    const ptr = this.__destroy_into_raw();\r\n    const ret = wasm.pipeoptions_end(ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set end(value) {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.pipeoptions_set_end(ptr, isLikeNone(value) ? 0xffffff : value ? 1 : 0);\r\n  }\r\n}\r\n\r\nconst PoWFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_pow_free(ptr >>> 0, 1));\r\n/**\r\n * Represents a Kaspa header PoW manager\r\n * @category Mining\r\n */\r\nexport class PoW {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PoW.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PoWFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      target: this.target,\r\n      prePoWHash: this.prePoWHash,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PoWFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_pow_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Header | IHeader | IRawHeader} header\r\n   * @param {bigint | null} [timestamp]\r\n   */\r\n  constructor(header, timestamp) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pow_new(\r\n        retptr,\r\n        addBorrowedObject(header),\r\n        !isLikeNone(timestamp),\r\n        isLikeNone(timestamp) ? BigInt(0) : timestamp,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PoWFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * The target based on the provided bits.\r\n   * @returns {bigint}\r\n   */\r\n  get target() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pow_target(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Checks if the computed target meets or exceeds the difficulty specified in the template.\r\n   * @returns A boolean indicating if it reached the target and a bigint representing the reached target.\r\n   * @param {bigint} nonce\r\n   * @returns {[boolean, bigint]}\r\n   */\r\n  checkWork(nonce) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pow_checkWork(retptr, this.__wbg_ptr, nonce);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Hash of the header without timestamp and nonce.\r\n   * @returns {string}\r\n   */\r\n  get prePoWHash() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.pow_get_pre_pow_hash(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Can be used for parsing Stratum templates.\r\n   * @param {string} pre_pow_hash\r\n   * @param {bigint} timestamp\r\n   * @param {number | null} [target_bits]\r\n   * @returns {PoW}\r\n   */\r\n  static fromRaw(pre_pow_hash, timestamp, target_bits) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        pre_pow_hash,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.pow_fromRaw(\r\n        retptr,\r\n        ptr0,\r\n        len0,\r\n        timestamp,\r\n        isLikeNone(target_bits) ? 0x100000001 : target_bits >>> 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PoW.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst PrivateKeyFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_privatekey_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Data structure that envelops a Private Key.\r\n * @category Wallet SDK\r\n */\r\nexport class PrivateKey {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PrivateKey.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PrivateKeyFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PrivateKeyFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_privatekey_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Create a new [`PrivateKey`] from a hex-encoded string.\r\n   * @param {string} key\r\n   */\r\n  constructor(key) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        key,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.privatekey_try_new(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PrivateKeyFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Returns the [`PrivateKey`] key encoded as a hex string.\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekey_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a [`Keypair`] from this [`PrivateKey`].\r\n   * @returns {Keypair}\r\n   */\r\n  toKeypair() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekey_toKeypair(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Keypair.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PublicKey}\r\n   */\r\n  toPublicKey() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekey_toPublicKey(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PublicKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Get the [`Address`] of the PublicKey generated from this PrivateKey.\r\n   * Receives a [`NetworkType`](kaspa_consensus_core::network::NetworkType)\r\n   * to determine the prefix of the address.\r\n   * JavaScript: `let address = privateKey.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddress(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekey_toAddress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Get `ECDSA` [`Address`] of the PublicKey generated from this PrivateKey.\r\n   * Receives a [`NetworkType`](kaspa_consensus_core::network::NetworkType)\r\n   * to determine the prefix of the address.\r\n   * JavaScript: `let address = privateKey.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddressECDSA(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekey_toAddressECDSA(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nconst PrivateKeyGeneratorFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_privatekeygenerator_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Helper class to generate private keys from an extended private key (XPrv).\r\n * This class accepts the master Kaspa XPrv string (e.g. `xprv1...`) and generates\r\n * private keys for the receive and change paths given the pre-set parameters\r\n * such as account index, multisig purpose and cosigner index.\r\n *\r\n * Please note that in Kaspa master private keys use `kprv` prefix.\r\n *\r\n * @see {@link PublicKeyGenerator}, {@link XPub}, {@link XPrv}, {@link Mnemonic}\r\n * @category Wallet SDK\r\n */\r\nexport class PrivateKeyGenerator {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PrivateKeyGeneratorFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_privatekeygenerator_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {XPrv | string} xprv\r\n   * @param {boolean} is_multisig\r\n   * @param {bigint} account_index\r\n   * @param {number | null} [cosigner_index]\r\n   */\r\n  constructor(xprv, is_multisig, account_index, cosigner_index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekeygenerator_new(\r\n        retptr,\r\n        addBorrowedObject(xprv),\r\n        is_multisig,\r\n        account_index,\r\n        isLikeNone(cosigner_index) ? 0x100000001 : cosigner_index >>> 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PrivateKeyGeneratorFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {number} index\r\n   * @returns {PrivateKey}\r\n   */\r\n  receiveKey(index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekeygenerator_receiveKey(retptr, this.__wbg_ptr, index);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PrivateKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number} index\r\n   * @returns {PrivateKey}\r\n   */\r\n  changeKey(index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.privatekeygenerator_changeKey(retptr, this.__wbg_ptr, index);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PrivateKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst ProcessSendOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_processsendoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class ProcessSendOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    ProcessSendOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_processsendoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {boolean | null} [swallow_errors]\r\n   */\r\n  constructor(swallow_errors) {\r\n    const ret = wasm.processsendoptions_new(\r\n      isLikeNone(swallow_errors) ? 0xffffff : swallow_errors ? 1 : 0,\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    ProcessSendOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {boolean | undefined}\r\n   */\r\n  get swallow_errors() {\r\n    const ret = wasm.processsendoptions_swallow_errors(this.__wbg_ptr);\r\n    return ret === 0xffffff ? undefined : ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean | null} [value]\r\n   */\r\n  set swallow_errors(value) {\r\n    wasm.processsendoptions_set_swallow_errors(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0xffffff : value ? 1 : 0,\r\n    );\r\n  }\r\n}\r\n\r\nconst PrvKeyDataInfoFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_prvkeydatainfo_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class PrvKeyDataInfo {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PrvKeyDataInfoFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_prvkeydatainfo_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get id() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.prvkeydatainfo_id(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get name() {\r\n    const ret = wasm.prvkeydatainfo_name(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get isEncrypted() {\r\n    const ret = wasm.prvkeydatainfo_isEncrypted(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string} _name\r\n   */\r\n  setName(_name) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        _name,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.prvkeydatainfo_setName(retptr, this.__wbg_ptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst PublicKeyFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_publickey_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Data structure that envelopes a PublicKey.\r\n * Only supports Schnorr-based addresses.\r\n * @category Wallet SDK\r\n */\r\nexport class PublicKey {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PublicKey.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PublicKeyFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PublicKeyFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_publickey_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Create a new [`PublicKey`] from a hex-encoded string.\r\n   * @param {string} key\r\n   */\r\n  constructor(key) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        key,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.publickey_try_new(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      PublicKeyFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickey_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Get the [`Address`] of this PublicKey.\r\n   * Receives a [`NetworkType`] to determine the prefix of the address.\r\n   * JavaScript: `let address = publicKey.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddress(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickey_toAddress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Get `ECDSA` [`Address`] of this PublicKey.\r\n   * Receives a [`NetworkType`] to determine the prefix of the address.\r\n   * JavaScript: `let address = publicKey.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddressECDSA(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickey_toAddressECDSA(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {XOnlyPublicKey}\r\n   */\r\n  toXOnlyPublicKey() {\r\n    const ret = wasm.publickey_toXOnlyPublicKey(this.__wbg_ptr);\r\n    return XOnlyPublicKey.__wrap(ret);\r\n  }\r\n  /**\r\n   * Compute a 4-byte key fingerprint for this public key as a hex string.\r\n   * Default implementation uses `RIPEMD160(SHA256(public_key))`.\r\n   * @returns {HexString | undefined}\r\n   */\r\n  fingerprint() {\r\n    const ret = wasm.publickey_fingerprint(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n}\r\n\r\nconst PublicKeyGeneratorFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_publickeygenerator_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Helper class to generate public keys from an extended public key (XPub)\r\n * that has been derived up to the co-signer index.\r\n *\r\n * Please note that in Kaspa master public keys use `kpub` prefix.\r\n *\r\n * @see {@link PrivateKeyGenerator}, {@link XPub}, {@link XPrv}, {@link Mnemonic}\r\n * @category Wallet SDK\r\n */\r\nexport class PublicKeyGenerator {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(PublicKeyGenerator.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    PublicKeyGeneratorFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    PublicKeyGeneratorFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_publickeygenerator_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {XPub | string} kpub\r\n   * @param {number | null} [cosigner_index]\r\n   * @returns {PublicKeyGenerator}\r\n   */\r\n  static fromXPub(kpub, cosigner_index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_fromXPub(\r\n        retptr,\r\n        addBorrowedObject(kpub),\r\n        isLikeNone(cosigner_index) ? 0x100000001 : cosigner_index >>> 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PublicKeyGenerator.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {XPrv | string} xprv\r\n   * @param {boolean} is_multisig\r\n   * @param {bigint} account_index\r\n   * @param {number | null} [cosigner_index]\r\n   * @returns {PublicKeyGenerator}\r\n   */\r\n  static fromMasterXPrv(xprv, is_multisig, account_index, cosigner_index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_fromMasterXPrv(\r\n        retptr,\r\n        addBorrowedObject(xprv),\r\n        is_multisig,\r\n        account_index,\r\n        isLikeNone(cosigner_index) ? 0x100000001 : cosigner_index >>> 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PublicKeyGenerator.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate Receive Public Key derivations for a given range.\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {(PublicKey | string)[]}\r\n   */\r\n  receivePubkeys(start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receivePubkeys(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Receive Public Key derivation at a given index.\r\n   * @param {number} index\r\n   * @returns {PublicKey}\r\n   */\r\n  receivePubkey(index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receivePubkey(retptr, this.__wbg_ptr, index);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PublicKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a range of Receive Public Key derivations and return them as strings.\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {Array<string>}\r\n   */\r\n  receivePubkeysAsStrings(start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receivePubkeysAsStrings(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Receive Public Key derivation at a given index and return it as a string.\r\n   * @param {number} index\r\n   * @returns {string}\r\n   */\r\n  receivePubkeyAsString(index) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receivePubkeyAsString(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        index,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Generate Receive Address derivations for a given range.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {Address[]}\r\n   */\r\n  receiveAddresses(networkType, start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receiveAddresses(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Receive Address derivation at a given index.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} index\r\n   * @returns {Address}\r\n   */\r\n  receiveAddress(networkType, index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receiveAddress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        index,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate a range of Receive Address derivations and return them as strings.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {Array<string>}\r\n   */\r\n  receiveAddressAsStrings(networkType, start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receiveAddressAsStrings(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Receive Address derivation at a given index and return it as a string.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} index\r\n   * @returns {string}\r\n   */\r\n  receiveAddressAsString(networkType, index) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_receiveAddressAsString(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        index,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Generate Change Public Key derivations for a given range.\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {(PublicKey | string)[]}\r\n   */\r\n  changePubkeys(start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changePubkeys(retptr, this.__wbg_ptr, start, end);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Change Public Key derivation at a given index.\r\n   * @param {number} index\r\n   * @returns {PublicKey}\r\n   */\r\n  changePubkey(index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changePubkey(retptr, this.__wbg_ptr, index);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PublicKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a range of Change Public Key derivations and return them as strings.\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {Array<string>}\r\n   */\r\n  changePubkeysAsStrings(start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changePubkeysAsStrings(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Change Public Key derivation at a given index and return it as a string.\r\n   * @param {number} index\r\n   * @returns {string}\r\n   */\r\n  changePubkeyAsString(index) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changePubkeyAsString(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        index,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Generate Change Address derivations for a given range.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {Address[]}\r\n   */\r\n  changeAddresses(networkType, start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changeAddresses(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Change Address derivation at a given index.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} index\r\n   * @returns {Address}\r\n   */\r\n  changeAddress(networkType, index) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changeAddress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        index,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate a range of Change Address derivations and return them as strings.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} start\r\n   * @param {number} end\r\n   * @returns {Array<string>}\r\n   */\r\n  changeAddressAsStrings(networkType, start, end) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changeAddressAsStrings(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        start,\r\n        end,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Generate a single Change Address derivation at a given index and return it as a string.\r\n   * @param {NetworkType | NetworkId | string} networkType\r\n   * @param {number} index\r\n   * @returns {string}\r\n   */\r\n  changeAddressAsString(networkType, index) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_changeAddressAsString(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(networkType),\r\n        index,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.publickeygenerator_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst ReadStreamFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_readstream_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class ReadStream {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    ReadStreamFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_readstream_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  add_listener_with_open(listener) {\r\n    try {\r\n      const ret = wasm.readstream_add_listener_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  add_listener_with_close(listener) {\r\n    try {\r\n      const ret = wasm.readstream_add_listener_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  on_with_open(listener) {\r\n    try {\r\n      const ret = wasm.readstream_on_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  on_with_close(listener) {\r\n    try {\r\n      const ret = wasm.readstream_on_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  once_with_open(listener) {\r\n    try {\r\n      const ret = wasm.readstream_once_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  once_with_close(listener) {\r\n    try {\r\n      const ret = wasm.readstream_once_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_listener_with_open(listener) {\r\n    try {\r\n      const ret = wasm.readstream_prepend_listener_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_listener_with_close(listener) {\r\n    try {\r\n      const ret = wasm.readstream_prepend_listener_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_once_listener_with_open(listener) {\r\n    try {\r\n      const ret = wasm.readstream_prepend_once_listener_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_once_listener_with_close(listener) {\r\n    try {\r\n      const ret = wasm.readstream_prepend_once_listener_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nconst ResolverFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_resolver_free(ptr >>> 0, 1));\r\n/**\r\n *\r\n * Resolver is a client for obtaining public Kaspa wRPC URL.\r\n *\r\n * Resolver queries a list of public Kaspa Resolver URLs using HTTP to fetch\r\n * wRPC endpoints for the given encoding, network identifier and other\r\n * parameters. It then provides this information to the {@link RpcClient}.\r\n *\r\n * Each time {@link RpcClient} disconnects, it will query the resolver\r\n * to fetch a new wRPC URL.\r\n *\r\n * ```javascript\r\n * // using integrated public URLs\r\n * let rpc = RpcClient({\r\n *     resolver: new Resolver(),\r\n *     networkId : \"mainnet\"\r\n * });\r\n *\r\n * // specifying custom resolver URLs\r\n * let rpc = RpcClient({\r\n *     resolver: new Resolver({urls: [\"<resolver-url>\",...]}),\r\n *     networkId : \"mainnet\"\r\n * });\r\n * ```\r\n *\r\n * @see {@link IResolverConfig}, {@link IResolverConnect}, {@link RpcClient}\r\n * @category Node RPC\r\n */\r\nexport class Resolver {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Resolver.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    ResolverFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      urls: this.urls,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    ResolverFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_resolver_free(ptr, 0);\r\n  }\r\n  /**\r\n   * List of public Kaspa Resolver URLs.\r\n   * @returns {string[] | undefined}\r\n   */\r\n  get urls() {\r\n    const ret = wasm.resolver_urls(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Fetches a public Kaspa wRPC endpoint for the given encoding and network identifier.\r\n   * @see {@link Encoding}, {@link NetworkId}, {@link Node}\r\n   * @param {Encoding} encoding\r\n   * @param {NetworkId | string} network_id\r\n   * @returns {Promise<NodeDescriptor>}\r\n   */\r\n  getNode(encoding, network_id) {\r\n    const ret = wasm.resolver_getNode(\r\n      this.__wbg_ptr,\r\n      encoding,\r\n      addHeapObject(network_id),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Fetches a public Kaspa wRPC endpoint URL for the given encoding and network identifier.\r\n   * @see {@link Encoding}, {@link NetworkId}\r\n   * @param {Encoding} encoding\r\n   * @param {NetworkId | string} network_id\r\n   * @returns {Promise<string>}\r\n   */\r\n  getUrl(encoding, network_id) {\r\n    const ret = wasm.resolver_getUrl(\r\n      this.__wbg_ptr,\r\n      encoding,\r\n      addHeapObject(network_id),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Connect to a public Kaspa wRPC endpoint for the given encoding and network identifier\r\n   * supplied via {@link IResolverConnect} interface.\r\n   * @see {@link IResolverConnect}, {@link RpcClient}\r\n   * @param {IResolverConnect | NetworkId | string} options\r\n   * @returns {Promise<RpcClient>}\r\n   */\r\n  connect(options) {\r\n    const ret = wasm.resolver_connect(this.__wbg_ptr, addHeapObject(options));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Creates a new Resolver client with the given\r\n   * configuration supplied as {@link IResolverConfig}\r\n   * interface. If not supplied, the default configuration\r\n   * containing a list of community-operated resolvers\r\n   * will be used.\r\n   * @param {IResolverConfig | string[] | null} [args]\r\n   */\r\n  constructor(args) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.resolver_ctor(retptr, isLikeNone(args) ? 0 : addHeapObject(args));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      ResolverFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst RpcClientFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_rpcclient_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n *\r\n * Kaspa RPC client uses ([wRPC](https://github.com/workflow-rs/workflow-rs/tree/master/rpc))\r\n * interface to connect directly with Kaspa Node. wRPC supports\r\n * two types of encodings: `borsh` (binary, default) and `json`.\r\n *\r\n * There are two ways to connect: Directly to any Kaspa Node or to a\r\n * community-maintained public node infrastructure using the {@link Resolver} class.\r\n *\r\n * **Connecting to a public node using a resolver**\r\n *\r\n * ```javascript\r\n * let rpc = new RpcClient({\r\n *    resolver : new Resolver(),\r\n *    networkId : \"mainnet\",\r\n * });\r\n *\r\n * await rpc.connect();\r\n * ```\r\n *\r\n * **Connecting to a Kaspa Node directly**\r\n *\r\n * ```javascript\r\n * let rpc = new RpcClient({\r\n *    // if port is not provided it will default\r\n *    // to the default port for the networkId\r\n *    url : \"127.0.0.1\",\r\n *    networkId : \"mainnet\",\r\n * });\r\n * ```\r\n *\r\n * **Example usage**\r\n *\r\n * ```javascript\r\n *\r\n * // Create a new RPC client with a URL\r\n * let rpc = new RpcClient({ url : \"wss://<node-wrpc-address>\" });\r\n *\r\n * // Create a new RPC client with a resolver\r\n * // (networkId is required when using a resolver)\r\n * let rpc = new RpcClient({\r\n *     resolver : new Resolver(),\r\n *     networkId : \"mainnet\",\r\n * });\r\n *\r\n * rpc.addEventListener(\"connect\", async (event) => {\r\n *     console.log(\"Connected to\", rpc.url);\r\n *     await rpc.subscribeDaaScore();\r\n * });\r\n *\r\n * rpc.addEventListener(\"disconnect\", (event) => {\r\n *     console.log(\"Disconnected from\", rpc.url);\r\n * });\r\n *\r\n * try {\r\n *     await rpc.connect();\r\n * } catch(err) {\r\n *     console.log(\"Error connecting:\", err);\r\n * }\r\n *\r\n * ```\r\n *\r\n * You can register event listeners to receive notifications from the RPC client\r\n * using {@link RpcClient.addEventListener} and {@link RpcClient.removeEventListener} functions.\r\n *\r\n * **IMPORTANT:** If RPC is disconnected, upon reconnection you do not need\r\n * to re-register event listeners, but your have to re-subscribe for Kaspa node\r\n * notifications:\r\n *\r\n * ```typescript\r\n * rpc.addEventListener(\"connect\", async (event) => {\r\n *     console.log(\"Connected to\", rpc.url);\r\n *     // re-subscribe each time we connect\r\n *     await rpc.subscribeDaaScore();\r\n *     // ... perform wallet address subscriptions\r\n * });\r\n *\r\n * ```\r\n *\r\n * If using NodeJS, it is important that {@link RpcClient.disconnect} is called before\r\n * the process exits to ensure that the WebSocket connection is properly closed.\r\n * Failure to do this will prevent the process from exiting.\r\n *\r\n * @category Node RPC\r\n */\r\nexport class RpcClient {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(RpcClient.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    RpcClientFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      url: this.url,\r\n      resolver: this.resolver,\r\n      isConnected: this.isConnected,\r\n      encoding: this.encoding,\r\n      nodeId: this.nodeId,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    RpcClientFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_rpcclient_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Retrieves the current number of blocks in the Kaspa BlockDAG.\r\n   * This is not a block count, not a \"block height\" and can not be\r\n   * used for transaction validation.\r\n   * Returned information: Current block count.\r\n   * @see {@link IGetBlockCountRequest}, {@link IGetBlockCountResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetBlockCountRequest | null} [request]\r\n   * @returns {Promise<IGetBlockCountResponse>}\r\n   */\r\n  getBlockCount(request) {\r\n    const ret = wasm.rpcclient_getBlockCount(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Provides information about the Directed Acyclic Graph (DAG)\r\n   * structure of the Kaspa BlockDAG.\r\n   * Returned information: Number of blocks in the DAG,\r\n   * number of tips in the DAG, hash of the selected parent block,\r\n   * difficulty of the selected parent block, selected parent block\r\n   * blue score, selected parent block time.\r\n   * @see {@link IGetBlockDagInfoRequest}, {@link IGetBlockDagInfoResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetBlockDagInfoRequest | null} [request]\r\n   * @returns {Promise<IGetBlockDagInfoResponse>}\r\n   */\r\n  getBlockDagInfo(request) {\r\n    const ret = wasm.rpcclient_getBlockDagInfo(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Returns the total current coin supply of Kaspa network.\r\n   * Returned information: Total coin supply.\r\n   * @see {@link IGetCoinSupplyRequest}, {@link IGetCoinSupplyResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetCoinSupplyRequest | null} [request]\r\n   * @returns {Promise<IGetCoinSupplyResponse>}\r\n   */\r\n  getCoinSupply(request) {\r\n    const ret = wasm.rpcclient_getCoinSupply(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves information about the peers connected to the Kaspa node.\r\n   * Returned information: Peer ID, IP address and port, connection\r\n   * status, protocol version.\r\n   * @see {@link IGetConnectedPeerInfoRequest}, {@link IGetConnectedPeerInfoResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetConnectedPeerInfoRequest | null} [request]\r\n   * @returns {Promise<IGetConnectedPeerInfoResponse>}\r\n   */\r\n  getConnectedPeerInfo(request) {\r\n    const ret = wasm.rpcclient_getConnectedPeerInfo(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves general information about the Kaspa node.\r\n   * Returned information: Version of the Kaspa node, protocol\r\n   * version, network identifier.\r\n   * This call is primarily used by gRPC clients.\r\n   * For wRPC clients, use {@link RpcClient.getServerInfo}.\r\n   * @see {@link IGetInfoRequest}, {@link IGetInfoResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetInfoRequest | null} [request]\r\n   * @returns {Promise<IGetInfoResponse>}\r\n   */\r\n  getInfo(request) {\r\n    const ret = wasm.rpcclient_getInfo(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Provides a list of addresses of known peers in the Kaspa\r\n   * network that the node can potentially connect to.\r\n   * Returned information: List of peer addresses.\r\n   * @see {@link IGetPeerAddressesRequest}, {@link IGetPeerAddressesResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetPeerAddressesRequest | null} [request]\r\n   * @returns {Promise<IGetPeerAddressesResponse>}\r\n   */\r\n  getPeerAddresses(request) {\r\n    const ret = wasm.rpcclient_getPeerAddresses(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves various metrics and statistics related to the\r\n   * performance and status of the Kaspa node.\r\n   * Returned information: Memory usage, CPU usage, network activity.\r\n   * @see {@link IGetMetricsRequest}, {@link IGetMetricsResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetMetricsRequest | null} [request]\r\n   * @returns {Promise<IGetMetricsResponse>}\r\n   */\r\n  getMetrics(request) {\r\n    const ret = wasm.rpcclient_getMetrics(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves current number of network connections\r\n   * @see {@link IGetConnectionsRequest}, {@link IGetConnectionsResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetConnectionsRequest | null} [request]\r\n   * @returns {Promise<IGetConnectionsResponse>}\r\n   */\r\n  getConnections(request) {\r\n    const ret = wasm.rpcclient_getConnections(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves the current sink block, which is the block with\r\n   * the highest cumulative difficulty in the Kaspa BlockDAG.\r\n   * Returned information: Sink block hash, sink block height.\r\n   * @see {@link IGetSinkRequest}, {@link IGetSinkResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetSinkRequest | null} [request]\r\n   * @returns {Promise<IGetSinkResponse>}\r\n   */\r\n  getSink(request) {\r\n    const ret = wasm.rpcclient_getSink(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Returns the blue score of the current sink block, indicating\r\n   * the total amount of work that has been done on the main chain\r\n   * leading up to that block.\r\n   * Returned information: Blue score of the sink block.\r\n   * @see {@link IGetSinkBlueScoreRequest}, {@link IGetSinkBlueScoreResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetSinkBlueScoreRequest | null} [request]\r\n   * @returns {Promise<IGetSinkBlueScoreResponse>}\r\n   */\r\n  getSinkBlueScore(request) {\r\n    const ret = wasm.rpcclient_getSinkBlueScore(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Tests the connection and responsiveness of a Kaspa node.\r\n   * Returned information: None.\r\n   * @see {@link IPingRequest}, {@link IPingResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IPingRequest | null} [request]\r\n   * @returns {Promise<IPingResponse>}\r\n   */\r\n  ping(request) {\r\n    const ret = wasm.rpcclient_ping(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Gracefully shuts down the Kaspa node.\r\n   * Returned information: None.\r\n   * @see {@link IShutdownRequest}, {@link IShutdownResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IShutdownRequest | null} [request]\r\n   * @returns {Promise<IShutdownResponse>}\r\n   */\r\n  shutdown(request) {\r\n    const ret = wasm.rpcclient_shutdown(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves information about the Kaspa server.\r\n   * Returned information: Version of the Kaspa server, protocol\r\n   * version, network identifier.\r\n   * @see {@link IGetServerInfoRequest}, {@link IGetServerInfoResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetServerInfoRequest | null} [request]\r\n   * @returns {Promise<IGetServerInfoResponse>}\r\n   */\r\n  getServerInfo(request) {\r\n    const ret = wasm.rpcclient_getServerInfo(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Obtains basic information about the synchronization status of the Kaspa node.\r\n   * Returned information: Syncing status.\r\n   * @see {@link IGetSyncStatusRequest}, {@link IGetSyncStatusResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetSyncStatusRequest | null} [request]\r\n   * @returns {Promise<IGetSyncStatusResponse>}\r\n   */\r\n  getSyncStatus(request) {\r\n    const ret = wasm.rpcclient_getSyncStatus(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Feerate estimates\r\n   * @see {@link IGetFeeEstimateRequest}, {@link IGetFeeEstimateResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetFeeEstimateRequest | null} [request]\r\n   * @returns {Promise<IGetFeeEstimateResponse>}\r\n   */\r\n  getFeeEstimate(request) {\r\n    const ret = wasm.rpcclient_getFeeEstimate(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves the current network configuration.\r\n   * Returned information: Current network configuration.\r\n   * @see {@link IGetCurrentNetworkRequest}, {@link IGetCurrentNetworkResponse}\r\n   * @throws `string` on an RPC error or a server-side error.\r\n   * @param {IGetCurrentNetworkRequest | null} [request]\r\n   * @returns {Promise<IGetCurrentNetworkResponse>}\r\n   */\r\n  getCurrentNetwork(request) {\r\n    const ret = wasm.rpcclient_getCurrentNetwork(\r\n      this.__wbg_ptr,\r\n      isLikeNone(request) ? 0 : addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Adds a peer to the Kaspa node's list of known peers.\r\n   * Returned information: None.\r\n   * @see {@link IAddPeerRequest}, {@link IAddPeerResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IAddPeerRequest} request\r\n   * @returns {Promise<IAddPeerResponse>}\r\n   */\r\n  addPeer(request) {\r\n    const ret = wasm.rpcclient_addPeer(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Bans a peer from connecting to the Kaspa node for a specified duration.\r\n   * Returned information: None.\r\n   * @see {@link IBanRequest}, {@link IBanResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IBanRequest} request\r\n   * @returns {Promise<IBanResponse>}\r\n   */\r\n  ban(request) {\r\n    const ret = wasm.rpcclient_ban(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Estimates the network's current hash rate in hashes per second.\r\n   * Returned information: Estimated network hashes per second.\r\n   * @see {@link IEstimateNetworkHashesPerSecondRequest}, {@link IEstimateNetworkHashesPerSecondResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IEstimateNetworkHashesPerSecondRequest} request\r\n   * @returns {Promise<IEstimateNetworkHashesPerSecondResponse>}\r\n   */\r\n  estimateNetworkHashesPerSecond(request) {\r\n    const ret = wasm.rpcclient_estimateNetworkHashesPerSecond(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves the balance of a specific address in the Kaspa BlockDAG.\r\n   * Returned information: Balance of the address.\r\n   * @see {@link IGetBalanceByAddressRequest}, {@link IGetBalanceByAddressResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetBalanceByAddressRequest} request\r\n   * @returns {Promise<IGetBalanceByAddressResponse>}\r\n   */\r\n  getBalanceByAddress(request) {\r\n    const ret = wasm.rpcclient_getBalanceByAddress(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves balances for multiple addresses in the Kaspa BlockDAG.\r\n   * Returned information: Balances of the addresses.\r\n   * @see {@link IGetBalancesByAddressesRequest}, {@link IGetBalancesByAddressesResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetBalancesByAddressesRequest | Address[] | string[]} request\r\n   * @returns {Promise<IGetBalancesByAddressesResponse>}\r\n   */\r\n  getBalancesByAddresses(request) {\r\n    const ret = wasm.rpcclient_getBalancesByAddresses(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves a specific block from the Kaspa BlockDAG.\r\n   * Returned information: Block information.\r\n   * @see {@link IGetBlockRequest}, {@link IGetBlockResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetBlockRequest} request\r\n   * @returns {Promise<IGetBlockResponse>}\r\n   */\r\n  getBlock(request) {\r\n    const ret = wasm.rpcclient_getBlock(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves multiple blocks from the Kaspa BlockDAG.\r\n   * Returned information: List of block information.\r\n   * @see {@link IGetBlocksRequest}, {@link IGetBlocksResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetBlocksRequest} request\r\n   * @returns {Promise<IGetBlocksResponse>}\r\n   */\r\n  getBlocks(request) {\r\n    const ret = wasm.rpcclient_getBlocks(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Generates a new block template for mining.\r\n   * Returned information: Block template information.\r\n   * @see {@link IGetBlockTemplateRequest}, {@link IGetBlockTemplateResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetBlockTemplateRequest} request\r\n   * @returns {Promise<IGetBlockTemplateResponse>}\r\n   */\r\n  getBlockTemplate(request) {\r\n    const ret = wasm.rpcclient_getBlockTemplate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Checks if block is blue or not.\r\n   * Returned information: Block blueness.\r\n   * @see {@link IGetCurrentBlockColorRequest}, {@link IGetCurrentBlockColorResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetCurrentBlockColorRequest} request\r\n   * @returns {Promise<IGetCurrentBlockColorResponse>}\r\n   */\r\n  getCurrentBlockColor(request) {\r\n    const ret = wasm.rpcclient_getCurrentBlockColor(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves the estimated DAA (Difficulty Adjustment Algorithm)\r\n   * score timestamp estimate.\r\n   * Returned information: DAA score timestamp estimate.\r\n   * @see {@link IGetDaaScoreTimestampEstimateRequest}, {@link IGetDaaScoreTimestampEstimateResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetDaaScoreTimestampEstimateRequest} request\r\n   * @returns {Promise<IGetDaaScoreTimestampEstimateResponse>}\r\n   */\r\n  getDaaScoreTimestampEstimate(request) {\r\n    const ret = wasm.rpcclient_getDaaScoreTimestampEstimate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Feerate estimates (experimental)\r\n   * @see {@link IGetFeeEstimateExperimentalRequest}, {@link IGetFeeEstimateExperimentalResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetFeeEstimateExperimentalRequest} request\r\n   * @returns {Promise<IGetFeeEstimateExperimentalResponse>}\r\n   */\r\n  getFeeEstimateExperimental(request) {\r\n    const ret = wasm.rpcclient_getFeeEstimateExperimental(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves block headers from the Kaspa BlockDAG.\r\n   * Returned information: List of block headers.\r\n   * @see {@link IGetHeadersRequest}, {@link IGetHeadersResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetHeadersRequest} request\r\n   * @returns {Promise<IGetHeadersResponse>}\r\n   */\r\n  getHeaders(request) {\r\n    const ret = wasm.rpcclient_getHeaders(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves mempool entries from the Kaspa node's mempool.\r\n   * Returned information: List of mempool entries.\r\n   * @see {@link IGetMempoolEntriesRequest}, {@link IGetMempoolEntriesResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetMempoolEntriesRequest} request\r\n   * @returns {Promise<IGetMempoolEntriesResponse>}\r\n   */\r\n  getMempoolEntries(request) {\r\n    const ret = wasm.rpcclient_getMempoolEntries(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves mempool entries associated with specific addresses.\r\n   * Returned information: List of mempool entries.\r\n   * @see {@link IGetMempoolEntriesByAddressesRequest}, {@link IGetMempoolEntriesByAddressesResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetMempoolEntriesByAddressesRequest} request\r\n   * @returns {Promise<IGetMempoolEntriesByAddressesResponse>}\r\n   */\r\n  getMempoolEntriesByAddresses(request) {\r\n    const ret = wasm.rpcclient_getMempoolEntriesByAddresses(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves a specific mempool entry by transaction ID.\r\n   * Returned information: Mempool entry information.\r\n   * @see {@link IGetMempoolEntryRequest}, {@link IGetMempoolEntryResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetMempoolEntryRequest} request\r\n   * @returns {Promise<IGetMempoolEntryResponse>}\r\n   */\r\n  getMempoolEntry(request) {\r\n    const ret = wasm.rpcclient_getMempoolEntry(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves information about a subnetwork in the Kaspa BlockDAG.\r\n   * Returned information: Subnetwork information.\r\n   * @see {@link IGetSubnetworkRequest}, {@link IGetSubnetworkResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetSubnetworkRequest} request\r\n   * @returns {Promise<IGetSubnetworkResponse>}\r\n   */\r\n  getSubnetwork(request) {\r\n    const ret = wasm.rpcclient_getSubnetwork(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves unspent transaction outputs (UTXOs) associated with\r\n   * specific addresses.\r\n   * Returned information: List of UTXOs.\r\n   * @see {@link IGetUtxosByAddressesRequest}, {@link IGetUtxosByAddressesResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetUtxosByAddressesRequest | Address[] | string[]} request\r\n   * @returns {Promise<IGetUtxosByAddressesResponse>}\r\n   */\r\n  getUtxosByAddresses(request) {\r\n    const ret = wasm.rpcclient_getUtxosByAddresses(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Retrieves the virtual chain corresponding to a specified block hash.\r\n   * Returned information: Virtual chain information.\r\n   * @see {@link IGetVirtualChainFromBlockRequest}, {@link IGetVirtualChainFromBlockResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IGetVirtualChainFromBlockRequest} request\r\n   * @returns {Promise<IGetVirtualChainFromBlockResponse>}\r\n   */\r\n  getVirtualChainFromBlock(request) {\r\n    const ret = wasm.rpcclient_getVirtualChainFromBlock(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Resolves a finality conflict in the Kaspa BlockDAG.\r\n   * Returned information: None.\r\n   * @see {@link IResolveFinalityConflictRequest}, {@link IResolveFinalityConflictResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IResolveFinalityConflictRequest} request\r\n   * @returns {Promise<IResolveFinalityConflictResponse>}\r\n   */\r\n  resolveFinalityConflict(request) {\r\n    const ret = wasm.rpcclient_resolveFinalityConflict(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Submits a block to the Kaspa network.\r\n   * Returned information: None.\r\n   * @see {@link ISubmitBlockRequest}, {@link ISubmitBlockResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {ISubmitBlockRequest} request\r\n   * @returns {Promise<ISubmitBlockResponse>}\r\n   */\r\n  submitBlock(request) {\r\n    const ret = wasm.rpcclient_submitBlock(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Submits a transaction to the Kaspa network.\r\n   * Returned information: Submitted Transaction Id.\r\n   * @see {@link ISubmitTransactionRequest}, {@link ISubmitTransactionResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {ISubmitTransactionRequest} request\r\n   * @returns {Promise<ISubmitTransactionResponse>}\r\n   */\r\n  submitTransaction(request) {\r\n    const ret = wasm.rpcclient_submitTransaction(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Submits an RBF transaction to the Kaspa network.\r\n   * Returned information: Submitted Transaction Id, Transaction that was replaced.\r\n   * @see {@link ISubmitTransactionReplacementRequest}, {@link ISubmitTransactionReplacementResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {ISubmitTransactionReplacementRequest} request\r\n   * @returns {Promise<ISubmitTransactionReplacementResponse>}\r\n   */\r\n  submitTransactionReplacement(request) {\r\n    const ret = wasm.rpcclient_submitTransactionReplacement(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Unbans a previously banned peer, allowing it to connect\r\n   * to the Kaspa node again.\r\n   * Returned information: None.\r\n   * @see {@link IUnbanRequest}, {@link IUnbanResponse}\r\n   * @throws `string` on an RPC error, a server-side error or when supplying incorrect arguments.\r\n   * @param {IUnbanRequest} request\r\n   * @returns {Promise<IUnbanResponse>}\r\n   */\r\n  unban(request) {\r\n    const ret = wasm.rpcclient_unban(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a block added notification event.\r\n   * Block added notification event is produced when a new\r\n   * block is added to the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeBlockAdded() {\r\n    const ret = wasm.rpcclient_subscribeBlockAdded(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeBlockAdded() {\r\n    const ret = wasm.rpcclient_unsubscribeBlockAdded(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a finality conflict notification event.\r\n   * Finality conflict notification event is produced when a finality\r\n   * conflict occurs in the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeFinalityConflict() {\r\n    const ret = wasm.rpcclient_subscribeFinalityConflict(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeFinalityConflict() {\r\n    const ret = wasm.rpcclient_unsubscribeFinalityConflict(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a finality conflict resolved notification event.\r\n   * Finality conflict resolved notification event is produced when a finality\r\n   * conflict in the Kaspa BlockDAG is resolved.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeFinalityConflictResolved() {\r\n    const ret = wasm.rpcclient_subscribeFinalityConflictResolved(\r\n      this.__wbg_ptr,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeFinalityConflictResolved() {\r\n    const ret = wasm.rpcclient_unsubscribeFinalityConflictResolved(\r\n      this.__wbg_ptr,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a sink blue score changed notification event.\r\n   * Sink blue score changed notification event is produced when the blue\r\n   * score of the sink block changes in the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeSinkBlueScoreChanged() {\r\n    const ret = wasm.rpcclient_subscribeSinkBlueScoreChanged(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeSinkBlueScoreChanged() {\r\n    const ret = wasm.rpcclient_unsubscribeSinkBlueScoreChanged(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a pruning point UTXO set override notification event.\r\n   * Pruning point UTXO set override notification event is produced when the\r\n   * UTXO set override for the pruning point changes in the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribePruningPointUtxoSetOverride() {\r\n    const ret = wasm.rpcclient_subscribePruningPointUtxoSetOverride(\r\n      this.__wbg_ptr,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribePruningPointUtxoSetOverride() {\r\n    const ret = wasm.rpcclient_unsubscribePruningPointUtxoSetOverride(\r\n      this.__wbg_ptr,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a new block template notification event.\r\n   * New block template notification event is produced when a new block\r\n   * template is generated for mining in the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeNewBlockTemplate() {\r\n    const ret = wasm.rpcclient_subscribeNewBlockTemplate(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeNewBlockTemplate() {\r\n    const ret = wasm.rpcclient_unsubscribeNewBlockTemplate(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a virtual DAA score changed notification event.\r\n   * Virtual DAA score changed notification event is produced when the virtual\r\n   * Difficulty Adjustment Algorithm (DAA) score changes in the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeVirtualDaaScoreChanged() {\r\n    const ret = wasm.rpcclient_subscribeVirtualDaaScoreChanged(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a virtual DAA score changed notification event.\r\n   * Virtual DAA score changed notification event is produced when the virtual\r\n   * Difficulty Adjustment Algorithm (DAA) score changes in the Kaspa BlockDAG.\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeVirtualDaaScoreChanged() {\r\n    const ret = wasm.rpcclient_unsubscribeVirtualDaaScoreChanged(\r\n      this.__wbg_ptr,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Subscribe for a UTXOs changed notification event.\r\n   * UTXOs changed notification event is produced when the set\r\n   * of unspent transaction outputs (UTXOs) changes in the\r\n   * Kaspa BlockDAG. The event notification will be scoped to the\r\n   * provided list of addresses.\r\n   * @param {(Address | string)[]} addresses\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeUtxosChanged(addresses) {\r\n    const ret = wasm.rpcclient_subscribeUtxosChanged(\r\n      this.__wbg_ptr,\r\n      addHeapObject(addresses),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Unsubscribe from UTXOs changed notification event\r\n   * for a specific set of addresses.\r\n   * @param {(Address | string)[]} addresses\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeUtxosChanged(addresses) {\r\n    const ret = wasm.rpcclient_unsubscribeUtxosChanged(\r\n      this.__wbg_ptr,\r\n      addHeapObject(addresses),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a virtual chain changed notification event.\r\n   * Virtual chain changed notification event is produced when the virtual\r\n   * chain changes in the Kaspa BlockDAG.\r\n   * @param {boolean} include_accepted_transaction_ids\r\n   * @returns {Promise<void>}\r\n   */\r\n  subscribeVirtualChainChanged(include_accepted_transaction_ids) {\r\n    const ret = wasm.rpcclient_subscribeVirtualChainChanged(\r\n      this.__wbg_ptr,\r\n      include_accepted_transaction_ids,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Manage subscription for a virtual chain changed notification event.\r\n   * Virtual chain changed notification event is produced when the virtual\r\n   * chain changes in the Kaspa BlockDAG.\r\n   * @param {boolean} include_accepted_transaction_ids\r\n   * @returns {Promise<void>}\r\n   */\r\n  unsubscribeVirtualChainChanged(include_accepted_transaction_ids) {\r\n    const ret = wasm.rpcclient_unsubscribeVirtualChainChanged(\r\n      this.__wbg_ptr,\r\n      include_accepted_transaction_ids,\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Encoding} encoding\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {number}\r\n   */\r\n  static defaultPort(encoding, network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_defaultPort(retptr, encoding, addBorrowedObject(network));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return r0;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Constructs an WebSocket RPC URL given the partial URL or an IP, RPC encoding\r\n   * and a network type.\r\n   *\r\n   * # Arguments\r\n   *\r\n   * * `url` - Partial URL or an IP address\r\n   * * `encoding` - RPC encoding\r\n   * * `network_type` - Network type\r\n   * @param {string} url\r\n   * @param {Encoding} encoding\r\n   * @param {NetworkId} network\r\n   * @returns {string}\r\n   */\r\n  static parseUrl(url, encoding, network) {\r\n    let deferred4_0;\r\n    let deferred4_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        url,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      _assertClass(network, NetworkId);\r\n      var ptr1 = network.__destroy_into_raw();\r\n      wasm.rpcclient_parseUrl(retptr, ptr0, len0, encoding, ptr1);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr3 = r0;\r\n      var len3 = r1;\r\n      if (r3) {\r\n        ptr3 = 0;\r\n        len3 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred4_0 = ptr3;\r\n      deferred4_1 = len3;\r\n      return getStringFromWasm0(ptr3, len3);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred4_0, deferred4_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * Create a new RPC client with optional {@link Encoding} and a `url`.\r\n   *\r\n   * @see {@link IRpcConfig} interface for more details.\r\n   * @param {IRpcConfig | null} [config]\r\n   */\r\n  constructor(config) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_ctor(\r\n        retptr,\r\n        isLikeNone(config) ? 0 : addHeapObject(config),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      RpcClientFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * The current URL of the RPC client.\r\n   * @returns {string | undefined}\r\n   */\r\n  get url() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_url(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Current rpc resolver\r\n   * @returns {Resolver | undefined}\r\n   */\r\n  get resolver() {\r\n    const ret = wasm.rpcclient_resolver(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : Resolver.__wrap(ret);\r\n  }\r\n  /**\r\n   * Set the resolver for the RPC client.\r\n   * This setting will take effect on the next connection.\r\n   * @param {Resolver} resolver\r\n   */\r\n  setResolver(resolver) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      _assertClass(resolver, Resolver);\r\n      var ptr0 = resolver.__destroy_into_raw();\r\n      wasm.rpcclient_setResolver(retptr, this.__wbg_ptr, ptr0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Set the network id for the RPC client.\r\n   * This setting will take effect on the next connection.\r\n   * @param {NetworkId | string} network_id\r\n   */\r\n  setNetworkId(network_id) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_setNetworkId(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network_id),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * The current connection status of the RPC client.\r\n   * @returns {boolean}\r\n   */\r\n  get isConnected() {\r\n    const ret = wasm.rpcclient_isConnected(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * The current protocol encoding.\r\n   * @returns {string}\r\n   */\r\n  get encoding() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_encoding(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Optional: Resolver node id.\r\n   * @returns {string | undefined}\r\n   */\r\n  get nodeId() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_nodeId(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Connect to the Kaspa RPC server. This function starts a background\r\n   * task that connects and reconnects to the server if the connection\r\n   * is terminated.  Use [`disconnect()`](Self::disconnect()) to\r\n   * terminate the connection.\r\n   * @see {@link IConnectOptions} interface for more details.\r\n   * @param {IConnectOptions | undefined | null} [args]\r\n   * @returns {Promise<void>}\r\n   */\r\n  connect(args) {\r\n    const ret = wasm.rpcclient_connect(\r\n      this.__wbg_ptr,\r\n      isLikeNone(args) ? 0 : addHeapObject(args),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Disconnect from the Kaspa RPC server.\r\n   * @returns {Promise<void>}\r\n   */\r\n  disconnect() {\r\n    const ret = wasm.rpcclient_disconnect(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Start background RPC services (automatically started when invoking {@link RpcClient.connect}).\r\n   * @returns {Promise<void>}\r\n   */\r\n  start() {\r\n    const ret = wasm.rpcclient_start(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Stop background RPC services (automatically stopped when invoking {@link RpcClient.disconnect}).\r\n   * @returns {Promise<void>}\r\n   */\r\n  stop() {\r\n    const ret = wasm.rpcclient_stop(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Triggers a disconnection on the underlying WebSocket\r\n   * if the WebSocket is in connected state.\r\n   * This is intended for debug purposes only.\r\n   * Can be used to test application reconnection logic.\r\n   */\r\n  triggerAbort() {\r\n    wasm.rpcclient_triggerAbort(this.__wbg_ptr);\r\n  }\r\n  /**\r\n   *\r\n   * Register an event listener callback.\r\n   *\r\n   * Registers a callback function to be executed when a specific event occurs.\r\n   * The callback function will receive an {@link RpcEvent} object with the event `type` and `data`.\r\n   *\r\n   * **RPC Subscriptions vs Event Listeners**\r\n   *\r\n   * Subscriptions are used to receive notifications from the RPC client.\r\n   * Event listeners are client-side application registrations that are\r\n   * triggered when notifications are received.\r\n   *\r\n   * If node is disconnected, upon reconnection you do not need to re-register event listeners,\r\n   * however, you have to re-subscribe for Kaspa node notifications. As such, it is recommended\r\n   * to register event listeners when the RPC `open` event is received.\r\n   *\r\n   * ```javascript\r\n   * rpc.addEventListener(\"connect\", async (event) => {\r\n   *     console.log(\"Connected to\", rpc.url);\r\n   *     await rpc.subscribeDaaScore();\r\n   *     // ... perform wallet address subscriptions\r\n   * });\r\n   * ```\r\n   *\r\n   * **Multiple events and listeners**\r\n   *\r\n   * `addEventListener` can be used to register multiple event listeners for the same event\r\n   * as well as the same event listener for multiple events.\r\n   *\r\n   * ```javascript\r\n   * // Registering a single event listener for multiple events:\r\n   * rpc.addEventListener([\"connect\", \"disconnect\"], (event) => {\r\n   *     console.log(event);\r\n   * });\r\n   *\r\n   * // Registering event listener for all events:\r\n   * // (by omitting the event type)\r\n   * rpc.addEventListener((event) => {\r\n   *     console.log(event);\r\n   * });\r\n   *\r\n   * // Registering multiple event listeners for the same event:\r\n   * rpc.addEventListener(\"connect\", (event) => { // first listener\r\n   *     console.log(event);\r\n   * });\r\n   * rpc.addEventListener(\"connect\", (event) => { // second listener\r\n   *     console.log(event);\r\n   * });\r\n   * ```\r\n   *\r\n   * **Use of context objects**\r\n   *\r\n   * You can also register an event with a `context` object. When the event is triggered,\r\n   * the `handleEvent` method of the `context` object will be called while `this` value\r\n   * will be set to the `context` object.\r\n   * ```javascript\r\n   * // Registering events with a context object:\r\n   *\r\n   * const context = {\r\n   *     someProperty: \"someValue\",\r\n   *     handleEvent: (event) => {\r\n   *         // the following will log \"someValue\"\r\n   *         console.log(this.someProperty);\r\n   *         console.log(event);\r\n   *     }\r\n   * };\r\n   * rpc.addEventListener([\"connect\",\"disconnect\"], context);\r\n   *\r\n   * ```\r\n   *\r\n   * **General use examples**\r\n   *\r\n   * In TypeScript you can use {@link RpcEventType} enum (such as `RpcEventType.Connect`)\r\n   * or `string` (such as \"connect\") to register event listeners.\r\n   * In JavaScript you can only use `string`.\r\n   *\r\n   * ```typescript\r\n   * // Example usage (TypeScript):\r\n   *\r\n   * rpc.addEventListener(RpcEventType.Connect, (event) => {\r\n   *     console.log(\"Connected to\", rpc.url);\r\n   * });\r\n   *\r\n   * rpc.addEventListener(RpcEventType.VirtualDaaScoreChanged, (event) => {\r\n   *     console.log(event.type,event.data);\r\n   * });\r\n   * await rpc.subscribeDaaScore();\r\n   *\r\n   * rpc.addEventListener(RpcEventType.BlockAdded, (event) => {\r\n   *     console.log(event.type,event.data);\r\n   * });\r\n   * await rpc.subscribeBlockAdded();\r\n   *\r\n   * // Example usage (JavaScript):\r\n   *\r\n   * rpc.addEventListener(\"virtual-daa-score-changed\", (event) => {\r\n   *     console.log(event.type,event.data);\r\n   * });\r\n   *\r\n   * await rpc.subscribeDaaScore();\r\n   * rpc.addEventListener(\"block-added\", (event) => {\r\n   *     console.log(event.type,event.data);\r\n   * });\r\n   * await rpc.subscribeBlockAdded();\r\n   * ```\r\n   *\r\n   * @see {@link RpcEventType} for a list of supported events.\r\n   * @see {@link RpcEventData} for the event data interface specification.\r\n   * @see {@link RpcClient.removeEventListener}, {@link RpcClient.removeAllEventListeners}\r\n   * @param {RpcEventType | string | RpcEventCallback} event\r\n   * @param {RpcEventCallback | null} [callback]\r\n   */\r\n  addEventListener(event, callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_addEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(event),\r\n        isLikeNone(callback) ? 0 : addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * Unregister an event listener.\r\n   * This function will remove the callback for the specified event.\r\n   * If the `callback` is not supplied, all callbacks will be\r\n   * removed for the specified event.\r\n   *\r\n   * @see {@link RpcClient.addEventListener}\r\n   * @param {RpcEventType | string} event\r\n   * @param {RpcEventCallback | null} [callback]\r\n   */\r\n  removeEventListener(event, callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_removeEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(event),\r\n        isLikeNone(callback) ? 0 : addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * Unregister a single event listener callback from all events.\r\n   *\r\n   *\r\n   * @param {RpcEventCallback} callback\r\n   */\r\n  clearEventListener(callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_clearEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * Unregister all notification callbacks for all events.\r\n   */\r\n  removeAllEventListeners() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.rpcclient_removeAllEventListeners(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst ScriptBuilderFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_scriptbuilder_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * ScriptBuilder provides a facility for building custom scripts. It allows\r\n * you to push opcodes, ints, and data while respecting canonical encoding. In\r\n * general it does not ensure the script will execute correctly, however any\r\n * data pushes which would exceed the maximum allowed script engine limits and\r\n * are therefore guaranteed not to execute will not be pushed and will result in\r\n * the Script function returning an error.\r\n * @category Consensus\r\n */\r\nexport class ScriptBuilder {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(ScriptBuilder.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    ScriptBuilderFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {};\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    ScriptBuilderFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_scriptbuilder_free(ptr, 0);\r\n  }\r\n  constructor() {\r\n    const ret = wasm.scriptbuilder_new();\r\n    this.__wbg_ptr = ret >>> 0;\r\n    ScriptBuilderFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * Creates a new ScriptBuilder over an existing script.\r\n   * Supplied script can be represented as an `Uint8Array` or a `HexString`.\r\n   * @param {HexString | Uint8Array} script\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  static fromScript(script) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_fromScript(retptr, addHeapObject(script));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Pushes the passed opcode to the end of the script. The script will not\r\n   * be modified if pushing the opcode would cause the script to exceed the\r\n   * maximum allowed script engine size.\r\n   * @param {number} op\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  addOp(op) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_addOp(retptr, this.__wbg_ptr, op);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Adds the passed opcodes to the end of the script.\r\n   * Supplied opcodes can be represented as an `Uint8Array` or a `HexString`.\r\n   * @param {HexString | Uint8Array} opcodes\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  addOps(opcodes) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_addOps(retptr, this.__wbg_ptr, addHeapObject(opcodes));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * AddData pushes the passed data to the end of the script. It automatically\r\n   * chooses canonical opcodes depending on the length of the data.\r\n   *\r\n   * A zero length buffer will lead to a push of empty data onto the stack (Op0 = OpFalse)\r\n   * and any push of data greater than [`MAX_SCRIPT_ELEMENT_SIZE`](kaspa_txscript::MAX_SCRIPT_ELEMENT_SIZE) will not modify\r\n   * the script since that is not allowed by the script engine.\r\n   *\r\n   * Also, the script will not be modified if pushing the data would cause the script to\r\n   * exceed the maximum allowed script engine size [`MAX_SCRIPTS_SIZE`](kaspa_txscript::MAX_SCRIPTS_SIZE).\r\n   * @param {HexString | Uint8Array} data\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  addData(data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_addData(retptr, this.__wbg_ptr, addHeapObject(data));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {bigint} value\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  addI64(value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_addI64(retptr, this.__wbg_ptr, value);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {bigint} lock_time\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  addLockTime(lock_time) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_addLockTime(retptr, this.__wbg_ptr, lock_time);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {bigint} sequence\r\n   * @returns {ScriptBuilder}\r\n   */\r\n  addSequence(sequence) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_addLockTime(retptr, this.__wbg_ptr, sequence);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return ScriptBuilder.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {HexString | Uint8Array} data\r\n   * @returns {number}\r\n   */\r\n  static canonicalDataSize(data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_canonicalDataSize(retptr, addHeapObject(data));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return r0 >>> 0;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Get script bytes represented by a hex string.\r\n   * @returns {HexString}\r\n   */\r\n  toString() {\r\n    const ret = wasm.scriptbuilder_toString(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Drains (empties) the script builder, returning the\r\n   * script bytes represented by a hex string.\r\n   * @returns {HexString}\r\n   */\r\n  drain() {\r\n    const ret = wasm.scriptbuilder_drain(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Creates an equivalent pay-to-script-hash script.\r\n   * Can be used to create an P2SH address.\r\n   * @see {@link addressFromScriptPublicKey}\r\n   * @returns {ScriptPublicKey}\r\n   */\r\n  createPayToScriptHashScript() {\r\n    const ret = wasm.scriptbuilder_createPayToScriptHashScript(this.__wbg_ptr);\r\n    return ScriptPublicKey.__wrap(ret);\r\n  }\r\n  /**\r\n   * Generates a signature script that fits a pay-to-script-hash script.\r\n   * @param {HexString | Uint8Array} signature\r\n   * @returns {HexString}\r\n   */\r\n  encodePayToScriptHashSignatureScript(signature) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_encodePayToScriptHashSignatureScript(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(signature),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {IHexViewConfig | null} [args]\r\n   * @returns {string}\r\n   */\r\n  hexView(args) {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptbuilder_hexView(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        isLikeNone(args) ? 0 : addHeapObject(args),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst ScriptPublicKeyFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_scriptpublickey_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Represents a Kaspad ScriptPublicKey\r\n * @category Consensus\r\n */\r\nexport class ScriptPublicKey {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(ScriptPublicKey.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    ScriptPublicKeyFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      version: this.version,\r\n      script: this.script,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    ScriptPublicKeyFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_scriptpublickey_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get version() {\r\n    const ret = wasm.__wbg_get_scriptpublickey_version(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} arg0\r\n   */\r\n  set version(arg0) {\r\n    wasm.__wbg_set_scriptpublickey_version(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @param {number} version\r\n   * @param {any} script\r\n   */\r\n  constructor(version, script) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptpublickey_constructor(retptr, version, addHeapObject(script));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      ScriptPublicKeyFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get script() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.scriptpublickey_script_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst SetAadOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_setaadoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class SetAadOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    SetAadOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_setaadoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Function} flush\r\n   * @param {number} plaintext_length\r\n   * @param {Function} transform\r\n   */\r\n  constructor(flush, plaintext_length, transform) {\r\n    const ret = wasm.setaadoptions_new(\r\n      addHeapObject(flush),\r\n      plaintext_length,\r\n      addHeapObject(transform),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    SetAadOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get flush() {\r\n    const ret = wasm.setaadoptions_flush(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set flush(value) {\r\n    wasm.setaadoptions_set_flush(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get plaintextLength() {\r\n    const ret = wasm.setaadoptions_plaintextLength(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} value\r\n   */\r\n  set plaintext_length(value) {\r\n    wasm.setaadoptions_set_plaintext_length(this.__wbg_ptr, value);\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get transform() {\r\n    const ret = wasm.setaadoptions_transform(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set transform(value) {\r\n    wasm.setaadoptions_set_transform(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n}\r\n\r\nconst SigHashTypeFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_sighashtype_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class SigHashType {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    SigHashTypeFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_sighashtype_free(ptr, 0);\r\n  }\r\n}\r\n\r\nconst StorageFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_storage_free(ptr >>> 0, 1));\r\n/**\r\n * Wallet file storage interface\r\n * @category Wallet SDK\r\n */\r\nexport class Storage {\r\n  toJSON() {\r\n    return {\r\n      filename: this.filename,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    StorageFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_storage_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get filename() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.storage_filename(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst StreamTransformOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_streamtransformoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class StreamTransformOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    StreamTransformOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_streamtransformoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Function} flush\r\n   * @param {Function} transform\r\n   */\r\n  constructor(flush, transform) {\r\n    const ret = wasm.streamtransformoptions_new(\r\n      addHeapObject(flush),\r\n      addHeapObject(transform),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    StreamTransformOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get flush() {\r\n    const ret = wasm.streamtransformoptions_flush(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set flush(value) {\r\n    wasm.streamtransformoptions_set_flush(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n  /**\r\n   * @returns {Function}\r\n   */\r\n  get transform() {\r\n    const ret = wasm.streamtransformoptions_transform(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {Function} value\r\n   */\r\n  set transform(value) {\r\n    wasm.streamtransformoptions_set_transform(\r\n      this.__wbg_ptr,\r\n      addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst TransactionFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transaction_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Represents a Kaspa transaction.\r\n * This is an artificial construct that includes additional\r\n * transaction-related data such as additional data from UTXOs\r\n * used by transaction inputs.\r\n * @category Consensus\r\n */\r\nexport class Transaction {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(Transaction.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    TransactionFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      id: this.id,\r\n      inputs: this.inputs,\r\n      outputs: this.outputs,\r\n      version: this.version,\r\n      lockTime: this.lockTime,\r\n      gas: this.gas,\r\n      subnetworkId: this.subnetworkId,\r\n      payload: this.payload,\r\n      mass: this.mass,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transaction_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Determines whether or not a transaction is a coinbase transaction. A coinbase\r\n   * transaction is a special transaction created by miners that distributes fees and block subsidy\r\n   * to the previous blocks' miners, and specifies the script_pub_key that will be used to pay the current\r\n   * miner in future blocks.\r\n   * @returns {boolean}\r\n   */\r\n  is_coinbase() {\r\n    const ret = wasm.transaction_is_coinbase(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * Recompute and finalize the tx id based on updated tx fields\r\n   * @returns {Hash}\r\n   */\r\n  finalize() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_finalize(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Hash.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Returns the transaction ID\r\n   * @returns {string}\r\n   */\r\n  get id() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_id(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {ITransaction | Transaction} js_value\r\n   */\r\n  constructor(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_constructor(retptr, addBorrowedObject(js_value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      TransactionFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {TransactionInput[]}\r\n   */\r\n  get inputs() {\r\n    const ret = wasm.transaction_get_inputs_as_js_array(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Returns a list of unique addresses used by transaction inputs.\r\n   * This method can be used to determine addresses used by transaction inputs\r\n   * in order to select private keys needed for transaction signing.\r\n   * @param {NetworkType | NetworkId | string} network_type\r\n   * @returns {Address[]}\r\n   */\r\n  addresses(network_type) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_addresses(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network_type),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {(ITransactionInput | TransactionInput)[]} js_value\r\n   */\r\n  set inputs(js_value) {\r\n    try {\r\n      wasm.transaction_set_inputs_from_js_array(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(js_value),\r\n      );\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {TransactionOutput[]}\r\n   */\r\n  get outputs() {\r\n    const ret = wasm.transaction_get_outputs_as_js_array(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {(ITransactionOutput | TransactionOutput)[]} js_value\r\n   */\r\n  set outputs(js_value) {\r\n    try {\r\n      wasm.transaction_set_outputs_from_js_array(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(js_value),\r\n      );\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get version() {\r\n    const ret = wasm.transaction_version(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} v\r\n   */\r\n  set version(v) {\r\n    wasm.transaction_set_version(this.__wbg_ptr, v);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get lockTime() {\r\n    const ret = wasm.transaction_lockTime(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} v\r\n   */\r\n  set lockTime(v) {\r\n    wasm.transaction_set_lockTime(this.__wbg_ptr, v);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get gas() {\r\n    const ret = wasm.transaction_gas(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} v\r\n   */\r\n  set gas(v) {\r\n    wasm.transaction_set_gas(this.__wbg_ptr, v);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get subnetworkId() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_get_subnetwork_id_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set subnetworkId(js_value) {\r\n    wasm.transaction_set_subnetwork_id_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get payload() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_get_payload_as_hex_string(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set payload(js_value) {\r\n    wasm.transaction_set_payload_from_js_value(\r\n      this.__wbg_ptr,\r\n      addHeapObject(js_value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get mass() {\r\n    const ret = wasm.transaction_get_mass(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} v\r\n   */\r\n  set mass(v) {\r\n    wasm.transaction_set_mass(this.__wbg_ptr, v);\r\n  }\r\n  /**\r\n   * Serializes the transaction to a pure JavaScript Object.\r\n   * The schema of the JavaScript object is defined by {@link ISerializableTransaction}.\r\n   * @see {@link ISerializableTransaction}\r\n   * @returns {ISerializableTransaction}\r\n   */\r\n  serializeToObject() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_serializeToObject(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Serializes the transaction to a JSON string.\r\n   * The schema of the JSON is defined by {@link ISerializableTransaction}.\r\n   * @returns {string}\r\n   */\r\n  serializeToJSON() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_serializeToJSON(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Serializes the transaction to a \"Safe\" JSON schema where it converts all `bigint` values to `string` to avoid potential client-side precision loss.\r\n   * @returns {string}\r\n   */\r\n  serializeToSafeJSON() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_serializeToSafeJSON(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Deserialize the {@link Transaction} Object from a pure JavaScript Object.\r\n   * @param {any} js_value\r\n   * @returns {Transaction}\r\n   */\r\n  static deserializeFromObject(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transaction_deserializeFromObject(\r\n        retptr,\r\n        addBorrowedObject(js_value),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Transaction.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Deserialize the {@link Transaction} Object from a JSON string.\r\n   * @param {string} json\r\n   * @returns {Transaction}\r\n   */\r\n  static deserializeFromJSON(json) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        json,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.transaction_deserializeFromJSON(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Transaction.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Deserialize the {@link Transaction} Object from a \"Safe\" JSON schema where all `bigint` values are represented as `string`.\r\n   * @param {string} json\r\n   * @returns {Transaction}\r\n   */\r\n  static deserializeFromSafeJSON(json) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        json,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.transaction_deserializeFromSafeJSON(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Transaction.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst TransactionInputFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactioninput_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Represents a Kaspa transaction input\r\n * @category Consensus\r\n */\r\nexport class TransactionInput {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(TransactionInput.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    TransactionInputFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      previousOutpoint: this.previousOutpoint,\r\n      signatureScript: this.signatureScript,\r\n      sequence: this.sequence,\r\n      sigOpCount: this.sigOpCount,\r\n      utxo: this.utxo,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionInputFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactioninput_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {ITransactionInput | TransactionInput} value\r\n   */\r\n  constructor(value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactioninput_constructor(retptr, addBorrowedObject(value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      TransactionInputFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {TransactionOutpoint}\r\n   */\r\n  get previousOutpoint() {\r\n    const ret = wasm.transactioninput_get_previous_outpoint(this.__wbg_ptr);\r\n    return TransactionOutpoint.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set previousOutpoint(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactioninput_set_previous_outpoint(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(js_value),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get signatureScript() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactioninput_get_signature_script_as_hex(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set signatureScript(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactioninput_set_signature_script_from_js_value(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(js_value),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get sequence() {\r\n    const ret = wasm.transactioninput_get_sequence(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} sequence\r\n   */\r\n  set sequence(sequence) {\r\n    wasm.transactioninput_set_sequence(this.__wbg_ptr, sequence);\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get sigOpCount() {\r\n    const ret = wasm.transactioninput_get_sig_op_count(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @param {number} sig_op_count\r\n   */\r\n  set sigOpCount(sig_op_count) {\r\n    wasm.transactioninput_set_sig_op_count(this.__wbg_ptr, sig_op_count);\r\n  }\r\n  /**\r\n   * @returns {UtxoEntryReference | undefined}\r\n   */\r\n  get utxo() {\r\n    const ret = wasm.transactioninput_get_utxo(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : UtxoEntryReference.__wrap(ret);\r\n  }\r\n}\r\n\r\nconst TransactionOutpointFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionoutpoint_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Represents a Kaspa transaction outpoint.\r\n * NOTE: This struct is immutable - to create a custom outpoint\r\n * use the `TransactionOutpoint::new` constructor. (in JavaScript\r\n * use `new TransactionOutpoint(transactionId, index)`).\r\n * @category Consensus\r\n */\r\nexport class TransactionOutpoint {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(TransactionOutpoint.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    TransactionOutpointFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      transactionId: this.transactionId,\r\n      index: this.index,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionOutpointFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionoutpoint_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Hash} transaction_id\r\n   * @param {number} index\r\n   */\r\n  constructor(transaction_id, index) {\r\n    _assertClass(transaction_id, Hash);\r\n    var ptr0 = transaction_id.__destroy_into_raw();\r\n    const ret = wasm.transactionoutpoint_ctor(ptr0, index);\r\n    this.__wbg_ptr = ret >>> 0;\r\n    TransactionOutpointFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  getId() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionoutpoint_getId(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get transactionId() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionoutpoint_transactionId(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get index() {\r\n    const ret = wasm.transactionoutpoint_index(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n}\r\n\r\nconst TransactionOutputFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionoutput_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Represents a Kaspad transaction output\r\n * @category Consensus\r\n */\r\nexport class TransactionOutput {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(TransactionOutput.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    TransactionOutputFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      value: this.value,\r\n      scriptPublicKey: this.scriptPublicKey,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionOutputFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionoutput_free(ptr, 0);\r\n  }\r\n  /**\r\n   * TransactionOutput constructor\r\n   * @param {bigint} value\r\n   * @param {ScriptPublicKey} script_public_key\r\n   */\r\n  constructor(value, script_public_key) {\r\n    _assertClass(script_public_key, ScriptPublicKey);\r\n    const ret = wasm.transactionoutput_ctor(value, script_public_key.__wbg_ptr);\r\n    this.__wbg_ptr = ret >>> 0;\r\n    TransactionOutputFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get value() {\r\n    const ret = wasm.transactionoutput_value(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} v\r\n   */\r\n  set value(v) {\r\n    wasm.transactionoutput_set_value(this.__wbg_ptr, v);\r\n  }\r\n  /**\r\n   * @returns {ScriptPublicKey}\r\n   */\r\n  get scriptPublicKey() {\r\n    const ret = wasm.transactionoutput_scriptPublicKey(this.__wbg_ptr);\r\n    return ScriptPublicKey.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {ScriptPublicKey} v\r\n   */\r\n  set scriptPublicKey(v) {\r\n    _assertClass(v, ScriptPublicKey);\r\n    wasm.transactionoutput_set_scriptPublicKey(this.__wbg_ptr, v.__wbg_ptr);\r\n  }\r\n}\r\n\r\nconst TransactionRecordFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionrecord_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class TransactionRecord {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(TransactionRecord.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    TransactionRecordFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      id: this.id,\r\n      unixtimeMsec: this.unixtimeMsec,\r\n      network: this.network,\r\n      note: this.note,\r\n      metadata: this.metadata,\r\n      value: this.value,\r\n      blockDaaScore: this.blockDaaScore,\r\n      binding: this.binding,\r\n      data: this.data,\r\n      type: this.type,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionRecordFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionrecord_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {Hash}\r\n   */\r\n  get id() {\r\n    const ret = wasm.__wbg_get_transactionrecord_id(this.__wbg_ptr);\r\n    return Hash.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {Hash} arg0\r\n   */\r\n  set id(arg0) {\r\n    _assertClass(arg0, Hash);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_transactionrecord_id(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * Unix time in milliseconds\r\n   * @returns {bigint | undefined}\r\n   */\r\n  get unixtimeMsec() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_transactionrecord_unixtimeMsec(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r2 = getDataViewMemory0().getBigInt64(retptr + 8 * 1, true);\r\n      return r0 === 0 ? undefined : BigInt.asUintN(64, r2);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Unix time in milliseconds\r\n   * @param {bigint | null} [arg0]\r\n   */\r\n  set unixtimeMsec(arg0) {\r\n    wasm.__wbg_set_transactionrecord_unixtimeMsec(\r\n      this.__wbg_ptr,\r\n      !isLikeNone(arg0),\r\n      isLikeNone(arg0) ? BigInt(0) : arg0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {NetworkId}\r\n   */\r\n  get network() {\r\n    const ret = wasm.__wbg_get_transactionrecord_network(this.__wbg_ptr);\r\n    return NetworkId.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {NetworkId} arg0\r\n   */\r\n  set network(arg0) {\r\n    _assertClass(arg0, NetworkId);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_transactionrecord_network(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get note() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_transactionrecord_note(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string | null} [arg0]\r\n   */\r\n  set note(arg0) {\r\n    var ptr0 = isLikeNone(arg0)\r\n      ? 0\r\n      : passStringToWasm0(\r\n          arg0,\r\n          wasm.__wbindgen_export_1,\r\n          wasm.__wbindgen_export_2,\r\n        );\r\n    var len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_transactionrecord_note(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get metadata() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_transactionrecord_metadata(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string | null} [arg0]\r\n   */\r\n  set metadata(arg0) {\r\n    var ptr0 = isLikeNone(arg0)\r\n      ? 0\r\n      : passStringToWasm0(\r\n          arg0,\r\n          wasm.__wbindgen_export_1,\r\n          wasm.__wbindgen_export_2,\r\n        );\r\n    var len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_transactionrecord_metadata(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @param {bigint} currentDaaScore\r\n   * @returns {string}\r\n   */\r\n  maturityProgress(currentDaaScore) {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionrecord_maturityProgress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(currentDaaScore),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get value() {\r\n    const ret = wasm.transactionrecord_value(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get blockDaaScore() {\r\n    const ret = wasm.transactionrecord_blockDaaScore(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {IBinding}\r\n   */\r\n  get binding() {\r\n    const ret = wasm.transactionrecord_binding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {ITransactionData}\r\n   */\r\n  get data() {\r\n    const ret = wasm.transactionrecord_data(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get type() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionrecord_type(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Check if the transaction record has the given address within the associated UTXO set.\r\n   * @param {Address} address\r\n   * @returns {boolean}\r\n   */\r\n  hasAddress(address) {\r\n    _assertClass(address, Address);\r\n    const ret = wasm.transactionrecord_hasAddress(\r\n      this.__wbg_ptr,\r\n      address.__wbg_ptr,\r\n    );\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * Serialize the transaction record to a JavaScript object.\r\n   * @returns {any}\r\n   */\r\n  serialize() {\r\n    const ret = wasm.transactionrecord_serialize(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n}\r\n\r\nconst TransactionRecordNotificationFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionrecordnotification_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class TransactionRecordNotification {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(TransactionRecordNotification.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    TransactionRecordNotificationFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      type: this.type,\r\n      data: this.data,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionRecordNotificationFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionrecordnotification_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get type() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_transactionrecordnotification_type(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} arg0\r\n   */\r\n  set type(arg0) {\r\n    const ptr0 = passStringToWasm0(\r\n      arg0,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_transactionrecordnotification_type(\r\n      this.__wbg_ptr,\r\n      ptr0,\r\n      len0,\r\n    );\r\n  }\r\n  /**\r\n   * @returns {TransactionRecord}\r\n   */\r\n  get data() {\r\n    const ret = wasm.__wbg_get_transactionrecordnotification_data(\r\n      this.__wbg_ptr,\r\n    );\r\n    return TransactionRecord.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {TransactionRecord} arg0\r\n   */\r\n  set data(arg0) {\r\n    _assertClass(arg0, TransactionRecord);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_transactionrecordnotification_data(this.__wbg_ptr, ptr0);\r\n  }\r\n}\r\n\r\nconst TransactionSigningHashFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionsigninghash_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class TransactionSigningHash {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionSigningHashFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionsigninghash_free(ptr, 0);\r\n  }\r\n  constructor() {\r\n    const ret = wasm.transactionsigninghash_new();\r\n    this.__wbg_ptr = ret >>> 0;\r\n    TransactionSigningHashFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @param {HexString | Uint8Array} data\r\n   */\r\n  update(data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionsigninghash_update(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(data),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  finalize() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionsigninghash_finalize(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst TransactionSigningHashECDSAFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionsigninghashecdsa_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet SDK\r\n */\r\nexport class TransactionSigningHashECDSA {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionSigningHashECDSAFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionsigninghashecdsa_free(ptr, 0);\r\n  }\r\n  constructor() {\r\n    const ret = wasm.transactionsigninghashecdsa_new();\r\n    this.__wbg_ptr = ret >>> 0;\r\n    TransactionSigningHashECDSAFinalization.register(\r\n      this,\r\n      this.__wbg_ptr,\r\n      this,\r\n    );\r\n    return this;\r\n  }\r\n  /**\r\n   * @param {HexString | Uint8Array} data\r\n   */\r\n  update(data) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionsigninghashecdsa_update(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(data),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  finalize() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.transactionsigninghashecdsa_finalize(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst TransactionUtxoEntryFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_transactionutxoentry_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * Holds details about an individual transaction output in a utxo\r\n * set such as whether or not it was contained in a coinbase tx, the daa\r\n * score of the block that accepts the tx, its public key script, and how\r\n * much it pays.\r\n * @category Consensus\r\n */\r\nexport class TransactionUtxoEntry {\r\n  toJSON() {\r\n    return {\r\n      amount: this.amount,\r\n      scriptPublicKey: this.scriptPublicKey,\r\n      blockDaaScore: this.blockDaaScore,\r\n      isCoinbase: this.isCoinbase,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    TransactionUtxoEntryFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_transactionutxoentry_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get amount() {\r\n    const ret = wasm.__wbg_get_transactionutxoentry_amount(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} arg0\r\n   */\r\n  set amount(arg0) {\r\n    wasm.__wbg_set_transactionutxoentry_amount(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @returns {ScriptPublicKey}\r\n   */\r\n  get scriptPublicKey() {\r\n    const ret = wasm.__wbg_get_transactionutxoentry_scriptPublicKey(\r\n      this.__wbg_ptr,\r\n    );\r\n    return ScriptPublicKey.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {ScriptPublicKey} arg0\r\n   */\r\n  set scriptPublicKey(arg0) {\r\n    _assertClass(arg0, ScriptPublicKey);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_transactionutxoentry_scriptPublicKey(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get blockDaaScore() {\r\n    const ret = wasm.__wbg_get_transactionutxoentry_blockDaaScore(\r\n      this.__wbg_ptr,\r\n    );\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} arg0\r\n   */\r\n  set blockDaaScore(arg0) {\r\n    wasm.__wbg_set_transactionutxoentry_blockDaaScore(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  get isCoinbase() {\r\n    const ret = wasm.__wbg_get_transactionutxoentry_isCoinbase(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean} arg0\r\n   */\r\n  set isCoinbase(arg0) {\r\n    wasm.__wbg_set_transactionutxoentry_isCoinbase(this.__wbg_ptr, arg0);\r\n  }\r\n}\r\n\r\nconst UserInfoOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_userinfooptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class UserInfoOptions {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(UserInfoOptions.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    UserInfoOptionsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    UserInfoOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_userinfooptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | null} [encoding]\r\n   */\r\n  constructor(encoding) {\r\n    const ret = wasm.userinfooptions_new_with_values(\r\n      isLikeNone(encoding) ? 0 : addHeapObject(encoding),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    UserInfoOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {UserInfoOptions}\r\n   */\r\n  static new() {\r\n    const ret = wasm.userinfooptions_new();\r\n    return UserInfoOptions.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get encoding() {\r\n    const ret = wasm.userinfooptions_encoding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set encoding(value) {\r\n    wasm.userinfooptions_set_encoding(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n}\r\n\r\nconst UtxoContextFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_utxocontext_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * UtxoContext is a class that provides a way to track addresses activity\r\n * on the Kaspa network.  When an address is registered with UtxoContext\r\n * it aggregates all UTXO entries for that address and emits events when\r\n * any activity against these addresses occurs.\r\n *\r\n * UtxoContext constructor accepts {@link IUtxoContextArgs} interface that\r\n * can contain an optional id parameter.  If supplied, this `id` parameter\r\n * will be included in all notifications emitted by the UtxoContext as\r\n * well as included as a part of {@link ITransactionRecord} emitted when\r\n * transactions occur. If not provided, a random id will be generated. This id\r\n * typically represents an account id in the context of a wallet application.\r\n * The integrated Wallet API uses UtxoContext to represent wallet accounts.\r\n *\r\n * **Exchanges:** if you are building an exchange wallet, it is recommended\r\n * to use UtxoContext for each user account.  This way you can track and isolate\r\n * each user activity (use address set, balances, transaction records).\r\n *\r\n * UtxoContext maintains a real-time cumulative balance of all addresses\r\n * registered against it and provides balance update notification events\r\n * when the balance changes.\r\n *\r\n * The UtxoContext balance is comprised of 3 values:\r\n * - `mature`: amount of funds available for spending.\r\n * - `pending`: amount of funds that are being received.\r\n * - `outgoing`: amount of funds that are being sent but are not yet accepted by the network.\r\n *\r\n * Please see {@link IBalance} interface for more details.\r\n *\r\n * UtxoContext can be supplied as a UTXO source to the transaction {@link Generator}\r\n * allowing the {@link Generator} to create transactions using the\r\n * UTXO entries it manages.\r\n *\r\n * **IMPORTANT:** UtxoContext is meant to represent a single account.  It is not\r\n * designed to be used as a global UTXO manager for all addresses in a very large\r\n * wallet (such as an exchange wallet). For such use cases, it is recommended to\r\n * perform manual UTXO management by subscribing to UTXO notifications using\r\n * {@link RpcClient.subscribeUtxosChanged} and {@link RpcClient.getUtxosByAddresses}.\r\n *\r\n * @see {@link IUtxoContextArgs},\r\n * {@link UtxoProcessor},\r\n * {@link Generator},\r\n * {@link createTransactions},\r\n * {@link IBalance},\r\n * {@link IBalanceEvent},\r\n * {@link IPendingEvent},\r\n * {@link IReorgEvent},\r\n * {@link IStasisEvent},\r\n * {@link IMaturityEvent},\r\n * {@link IDiscoveryEvent},\r\n * {@link IBalanceEvent},\r\n * {@link ITransactionRecord}\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class UtxoContext {\r\n  toJSON() {\r\n    return {\r\n      isActive: this.isActive,\r\n      matureLength: this.matureLength,\r\n      balance: this.balance,\r\n      balanceStrings: this.balanceStrings,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    UtxoContextFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_utxocontext_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {IUtxoContextArgs} js_value\r\n   */\r\n  constructor(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxocontext_ctor(retptr, addHeapObject(js_value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      UtxoContextFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Performs a scan of the given addresses and registers them in the context for event notifications.\r\n   * @param {(Address | string)[]} addresses\r\n   * @param {bigint | null} [optional_current_daa_score]\r\n   * @returns {Promise<void>}\r\n   */\r\n  trackAddresses(addresses, optional_current_daa_score) {\r\n    const ret = wasm.utxocontext_trackAddresses(\r\n      this.__wbg_ptr,\r\n      addHeapObject(addresses),\r\n      isLikeNone(optional_current_daa_score)\r\n        ? 0\r\n        : addHeapObject(optional_current_daa_score),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Unregister a list of addresses from the context. This will stop tracking of these addresses.\r\n   * @param {(Address | string)[]} addresses\r\n   * @returns {Promise<void>}\r\n   */\r\n  unregisterAddresses(addresses) {\r\n    const ret = wasm.utxocontext_unregisterAddresses(\r\n      this.__wbg_ptr,\r\n      addHeapObject(addresses),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Clear the UtxoContext.  Unregister all addresses and clear all UTXO entries.\r\n   * IMPORTANT: This function must be manually called when disconnecting or re-connecting to the node\r\n   * (followed by address re-registration).\r\n   * @returns {Promise<void>}\r\n   */\r\n  clear() {\r\n    const ret = wasm.utxocontext_clear(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  get isActive() {\r\n    const ret = wasm.utxocontext_isActive(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   *\r\n   * Returns a range of mature UTXO entries that are currently\r\n   * managed by the UtxoContext and are available for spending.\r\n   *\r\n   * NOTE: This function is provided for informational purposes only.\r\n   * **You should not manage UTXO entries manually if they are owned by UtxoContext.**\r\n   *\r\n   * The resulting range may be less than requested if UTXO entries\r\n   * have been spent asynchronously by UtxoContext or by other means\r\n   * (i.e. UtxoContext has received notification from the network that\r\n   * UtxoEntries have been spent externally).\r\n   *\r\n   * UtxoEntries are kept in in the ascending sorted order by their amount.\r\n   * @param {number} from\r\n   * @param {number} to\r\n   * @returns {UtxoEntryReference[]}\r\n   */\r\n  getMatureRange(from, to) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxocontext_getMatureRange(retptr, this.__wbg_ptr, from, to);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Obtain the length of the mature UTXO entries that are currently\r\n   * managed by the UtxoContext.\r\n   * @returns {number}\r\n   */\r\n  get matureLength() {\r\n    const ret = wasm.utxocontext_matureLength(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * Returns pending UTXO entries that are currently managed by the UtxoContext.\r\n   * @returns {UtxoEntryReference[]}\r\n   */\r\n  getPending() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxocontext_getPending(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Current {@link Balance} of the UtxoContext.\r\n   * @returns {Balance | undefined}\r\n   */\r\n  get balance() {\r\n    const ret = wasm.utxocontext_balance(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : Balance.__wrap(ret);\r\n  }\r\n  /**\r\n   * Current {@link BalanceStrings} of the UtxoContext.\r\n   * @returns {BalanceStrings | undefined}\r\n   */\r\n  get balanceStrings() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxocontext_balanceStrings(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return r0 === 0 ? undefined : BalanceStrings.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst UtxoEntriesFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_utxoentries_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * A simple collection of UTXO entries. This struct is used to\r\n * retain a set of UTXO entries in the WASM memory for faster\r\n * processing. This struct keeps a list of entries represented\r\n * by `UtxoEntryReference` struct. This data structure is used\r\n * internally by the framework, but is exposed for convenience.\r\n * Please consider using `UtxoContext` instead.\r\n * @category Wallet SDK\r\n */\r\nexport class UtxoEntries {\r\n  toJSON() {\r\n    return {\r\n      items: this.items,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    UtxoEntriesFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_utxoentries_free(ptr, 0);\r\n  }\r\n  /**\r\n   * Create a new `UtxoEntries` struct with a set of entries.\r\n   * @param {any} js_value\r\n   */\r\n  constructor(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoentries_js_ctor(retptr, addHeapObject(js_value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      UtxoEntriesFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {any}\r\n   */\r\n  get items() {\r\n    const ret = wasm.utxoentries_get_items_as_js_array(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {any} js_value\r\n   */\r\n  set items(js_value) {\r\n    try {\r\n      wasm.utxoentries_set_items_from_js_array(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(js_value),\r\n      );\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Sort the contained entries by amount. Please note that\r\n   * this function is not intended for use with large UTXO sets\r\n   * as it duplicates the whole contained UTXO set while sorting.\r\n   */\r\n  sort() {\r\n    wasm.utxoentries_sort(this.__wbg_ptr);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  amount() {\r\n    const ret = wasm.utxoentries_amount(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n}\r\n\r\nconst UtxoEntryFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_utxoentry_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * [`UtxoEntry`] struct represents a client-side UTXO entry.\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class UtxoEntry {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(UtxoEntry.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    UtxoEntryFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      address: this.address,\r\n      outpoint: this.outpoint,\r\n      amount: this.amount,\r\n      scriptPublicKey: this.scriptPublicKey,\r\n      blockDaaScore: this.blockDaaScore,\r\n      isCoinbase: this.isCoinbase,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    UtxoEntryFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_utxoentry_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {Address | undefined}\r\n   */\r\n  get address() {\r\n    const ret = wasm.__wbg_get_utxoentry_address(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : Address.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {Address | null} [arg0]\r\n   */\r\n  set address(arg0) {\r\n    let ptr0 = 0;\r\n    if (!isLikeNone(arg0)) {\r\n      _assertClass(arg0, Address);\r\n      ptr0 = arg0.__destroy_into_raw();\r\n    }\r\n    wasm.__wbg_set_utxoentry_address(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * @returns {TransactionOutpoint}\r\n   */\r\n  get outpoint() {\r\n    const ret = wasm.__wbg_get_utxoentry_outpoint(this.__wbg_ptr);\r\n    return TransactionOutpoint.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {TransactionOutpoint} arg0\r\n   */\r\n  set outpoint(arg0) {\r\n    _assertClass(arg0, TransactionOutpoint);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_utxoentry_outpoint(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get amount() {\r\n    const ret = wasm.__wbg_get_utxoentry_amount(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} arg0\r\n   */\r\n  set amount(arg0) {\r\n    wasm.__wbg_set_utxoentry_amount(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @returns {ScriptPublicKey}\r\n   */\r\n  get scriptPublicKey() {\r\n    const ret = wasm.__wbg_get_utxoentry_scriptPublicKey(this.__wbg_ptr);\r\n    return ScriptPublicKey.__wrap(ret);\r\n  }\r\n  /**\r\n   * @param {ScriptPublicKey} arg0\r\n   */\r\n  set scriptPublicKey(arg0) {\r\n    _assertClass(arg0, ScriptPublicKey);\r\n    var ptr0 = arg0.__destroy_into_raw();\r\n    wasm.__wbg_set_utxoentry_scriptPublicKey(this.__wbg_ptr, ptr0);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get blockDaaScore() {\r\n    const ret = wasm.__wbg_get_utxoentry_blockDaaScore(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @param {bigint} arg0\r\n   */\r\n  set blockDaaScore(arg0) {\r\n    wasm.__wbg_set_utxoentry_blockDaaScore(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  get isCoinbase() {\r\n    const ret = wasm.__wbg_get_utxoentry_isCoinbase(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @param {boolean} arg0\r\n   */\r\n  set isCoinbase(arg0) {\r\n    wasm.__wbg_set_utxoentry_isCoinbase(this.__wbg_ptr, arg0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoentry_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst UtxoEntryReferenceFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_utxoentryreference_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * [`Arc`] reference to a [`UtxoEntry`] used by the wallet subsystems.\r\n *\r\n * @category Wallet SDK\r\n */\r\nexport class UtxoEntryReference {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(UtxoEntryReference.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    UtxoEntryReferenceFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      entry: this.entry,\r\n      outpoint: this.outpoint,\r\n      address: this.address,\r\n      amount: this.amount,\r\n      isCoinbase: this.isCoinbase,\r\n      blockDaaScore: this.blockDaaScore,\r\n      scriptPublicKey: this.scriptPublicKey,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    UtxoEntryReferenceFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_utxoentryreference_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoentryreference_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return takeObject(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {UtxoEntry}\r\n   */\r\n  get entry() {\r\n    const ret = wasm.utxoentryreference_entry(this.__wbg_ptr);\r\n    return UtxoEntry.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {TransactionOutpoint}\r\n   */\r\n  get outpoint() {\r\n    const ret = wasm.utxoentryreference_outpoint(this.__wbg_ptr);\r\n    return TransactionOutpoint.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {Address | undefined}\r\n   */\r\n  get address() {\r\n    const ret = wasm.utxoentryreference_address(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : Address.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get amount() {\r\n    const ret = wasm.utxoentryreference_amount(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  get isCoinbase() {\r\n    const ret = wasm.utxoentryreference_isCoinbase(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @returns {bigint}\r\n   */\r\n  get blockDaaScore() {\r\n    const ret = wasm.utxoentryreference_blockDaaScore(this.__wbg_ptr);\r\n    return BigInt.asUintN(64, ret);\r\n  }\r\n  /**\r\n   * @returns {ScriptPublicKey}\r\n   */\r\n  get scriptPublicKey() {\r\n    const ret = wasm.utxoentryreference_scriptPublicKey(this.__wbg_ptr);\r\n    return ScriptPublicKey.__wrap(ret);\r\n  }\r\n}\r\n\r\nconst UtxoProcessorFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_utxoprocessor_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * UtxoProcessor class is the main coordinator that manages UTXO processing\r\n * between multiple UtxoContext instances. It acts as a bridge between the\r\n * Kaspa node RPC connection, address subscriptions and UtxoContext instances.\r\n *\r\n * @see {@link IUtxoProcessorArgs},\r\n * {@link UtxoContext},\r\n * {@link RpcClient},\r\n * {@link NetworkId},\r\n * {@link IConnectEvent}\r\n * {@link IDisconnectEvent}\r\n * @category Wallet SDK\r\n */\r\nexport class UtxoProcessor {\r\n  toJSON() {\r\n    return {\r\n      rpc: this.rpc,\r\n      networkId: this.networkId,\r\n      isActive: this.isActive,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    UtxoProcessorFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_utxoprocessor_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | UtxoProcessorNotificationCallback} event\r\n   * @param {UtxoProcessorNotificationCallback | null} [callback]\r\n   */\r\n  addEventListener(event, callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_addEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(event),\r\n        isLikeNone(callback) ? 0 : addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {UtxoProcessorEventType | UtxoProcessorEventType[] | string | string[]} event\r\n   * @param {UtxoProcessorNotificationCallback | null} [callback]\r\n   */\r\n  removeEventListener(event, callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_removeEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(event),\r\n        isLikeNone(callback) ? 0 : addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * UtxoProcessor constructor.\r\n   *\r\n   *\r\n   *\r\n   * @see {@link IUtxoProcessorArgs}\r\n   * @param {IUtxoProcessorArgs} js_value\r\n   */\r\n  constructor(js_value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_ctor(retptr, addHeapObject(js_value));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      UtxoProcessorFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Starts the UtxoProcessor and begins processing UTXO and other notifications.\r\n   * @returns {Promise<void>}\r\n   */\r\n  start() {\r\n    const ret = wasm.utxoprocessor_start(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * Stops the UtxoProcessor and ends processing UTXO and other notifications.\r\n   * @returns {Promise<void>}\r\n   */\r\n  stop() {\r\n    const ret = wasm.utxoprocessor_stop(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {RpcClient}\r\n   */\r\n  get rpc() {\r\n    const ret = wasm.utxoprocessor_rpc(this.__wbg_ptr);\r\n    return RpcClient.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get networkId() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_networkId(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {NetworkId | string} network_id\r\n   */\r\n  setNetworkId(network_id) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_setNetworkId(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network_id),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @returns {boolean}\r\n   */\r\n  get isActive() {\r\n    const ret = wasm.utxoprocessor_isActive(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   *\r\n   * Set the coinbase transaction maturity period DAA score for a given network.\r\n   * This controls the DAA period after which the user transactions are considered mature\r\n   * and the wallet subsystem emits the transaction maturity event.\r\n   *\r\n   * @see {@link TransactionRecord}\r\n   * @see {@link IUtxoProcessorEvent}\r\n   *\r\n   * @category Wallet SDK\r\n   * @param {NetworkId | string} network_id\r\n   * @param {bigint} value\r\n   */\r\n  static setCoinbaseTransactionMaturityDAA(network_id, value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_setCoinbaseTransactionMaturityDAA(\r\n        retptr,\r\n        addBorrowedObject(network_id),\r\n        value,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   * Set the user transaction maturity period DAA score for a given network.\r\n   * This controls the DAA period after which the user transactions are considered mature\r\n   * and the wallet subsystem emits the transaction maturity event.\r\n   *\r\n   * @see {@link TransactionRecord}\r\n   * @see {@link IUtxoProcessorEvent}\r\n   *\r\n   * @category Wallet SDK\r\n   * @param {NetworkId | string} network_id\r\n   * @param {bigint} value\r\n   */\r\n  static setUserTransactionMaturityDAA(network_id, value) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.utxoprocessor_setUserTransactionMaturityDAA(\r\n        retptr,\r\n        addBorrowedObject(network_id),\r\n        value,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nconst WalletFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_wallet_free(ptr >>> 0, 1));\r\n/**\r\n *\r\n * Wallet class is the main coordinator that manages integrated wallet operations.\r\n *\r\n * The Wallet class encapsulates {@link UtxoProcessor} and provides internal\r\n * account management using {@link UtxoContext} instances. It acts as a bridge\r\n * between the integrated Wallet subsystem providing a high-level interface\r\n * for wallet key and account management.\r\n *\r\n * The Rusty Kaspa is developed in Rust, and the Wallet class is a Rust implementation\r\n * exposed to the JavaScript/TypeScript environment using the WebAssembly (WASM32) interface.\r\n * As such, the Wallet implementation can be powered up using native Rust or built\r\n * as a WebAssembly module and used in the browser or Node.js environment.\r\n *\r\n * When using Rust native or NodeJS environment, all wallet data is stored on the local\r\n * filesystem.  When using WASM32 build in the web browser, the wallet data is stored\r\n * in the browser's `localStorage` and transaction records are stored in the `IndexedDB`.\r\n *\r\n * The Wallet API can create multiple wallet instances, however, only one wallet instance\r\n * can be active at a time.\r\n *\r\n * The wallet implementation is designed to be efficient and support a large number\r\n * of accounts. Accounts reside in storage and can be loaded and activated as needed.\r\n * A `loaded` account contains all account information loaded from the permanent storage\r\n * whereas an `active` account monitors the UTXO set and provides notifications for\r\n * incoming and outgoing transactions as well as balance updates.\r\n *\r\n * The Wallet API communicates with the client using resource identifiers. These include\r\n * account IDs, private key IDs, transaction IDs, etc. It is the responsibility of the\r\n * client to track these resource identifiers at runtime.\r\n *\r\n * @see {@link IWalletConfig},\r\n *\r\n * @category Wallet API\r\n */\r\nexport class Wallet {\r\n  toJSON() {\r\n    return {\r\n      rpc: this.rpc,\r\n      isOpen: this.isOpen,\r\n      isSynced: this.isSynced,\r\n      descriptor: this.descriptor,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    WalletFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_wallet_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {IWalletConfig} config\r\n   */\r\n  constructor(config) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.wallet_constructor(retptr, addHeapObject(config));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      WalletFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {RpcClient}\r\n   */\r\n  get rpc() {\r\n    const ret = wasm.wallet_rpc(this.__wbg_ptr);\r\n    return RpcClient.__wrap(ret);\r\n  }\r\n  /**\r\n   * @remarks This is a local property indicating\r\n   * if the wallet is currently open.\r\n   * @returns {boolean}\r\n   */\r\n  get isOpen() {\r\n    const ret = wasm.wallet_isOpen(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @remarks This is a local property indicating\r\n   * if the node is currently synced.\r\n   * @returns {boolean}\r\n   */\r\n  get isSynced() {\r\n    const ret = wasm.wallet_isSynced(this.__wbg_ptr);\r\n    return ret !== 0;\r\n  }\r\n  /**\r\n   * @returns {WalletDescriptor | undefined}\r\n   */\r\n  get descriptor() {\r\n    const ret = wasm.wallet_descriptor(this.__wbg_ptr);\r\n    return ret === 0 ? undefined : WalletDescriptor.__wrap(ret);\r\n  }\r\n  /**\r\n   * Check if a wallet with a given name exists.\r\n   * @param {string | null} [name]\r\n   * @returns {Promise<boolean>}\r\n   */\r\n  exists(name) {\r\n    var ptr0 = isLikeNone(name)\r\n      ? 0\r\n      : passStringToWasm0(\r\n          name,\r\n          wasm.__wbindgen_export_1,\r\n          wasm.__wbindgen_export_2,\r\n        );\r\n    var len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.wallet_exists(this.__wbg_ptr, ptr0, len0);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  start() {\r\n    const ret = wasm.wallet_start(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  stop() {\r\n    const ret = wasm.wallet_stop(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {IConnectOptions | undefined | null} [args]\r\n   * @returns {Promise<void>}\r\n   */\r\n  connect(args) {\r\n    const ret = wasm.wallet_connect(\r\n      this.__wbg_ptr,\r\n      isLikeNone(args) ? 0 : addHeapObject(args),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  disconnect() {\r\n    const ret = wasm.wallet_disconnect(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | WalletNotificationCallback} event\r\n   * @param {WalletNotificationCallback | null} [callback]\r\n   */\r\n  addEventListener(event, callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.wallet_addEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(event),\r\n        isLikeNone(callback) ? 0 : addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {WalletEventType | WalletEventType[] | string | string[]} event\r\n   * @param {WalletNotificationCallback | null} [callback]\r\n   */\r\n  removeEventListener(event, callback) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.wallet_removeEventListener(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(event),\r\n        isLikeNone(callback) ? 0 : addHeapObject(callback),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {NetworkId | string} network_id\r\n   */\r\n  setNetworkId(network_id) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.wallet_setNetworkId(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addHeapObject(network_id),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      if (r1) {\r\n        throw takeObject(r0);\r\n      }\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Ping backend\r\n   * @see {@link IBatchRequest} {@link IBatchResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IBatchRequest} request\r\n   * @returns {Promise<IBatchResponse>}\r\n   */\r\n  batch(request) {\r\n    const ret = wasm.wallet_batch(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IFlushRequest} {@link IFlushResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IFlushRequest} request\r\n   * @returns {Promise<IFlushResponse>}\r\n   */\r\n  flush(request) {\r\n    const ret = wasm.wallet_flush(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IRetainContextRequest} {@link IRetainContextResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IRetainContextRequest} request\r\n   * @returns {Promise<IRetainContextResponse>}\r\n   */\r\n  retainContext(request) {\r\n    const ret = wasm.wallet_retainContext(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IGetStatusRequest} {@link IGetStatusResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IGetStatusRequest} request\r\n   * @returns {Promise<IGetStatusResponse>}\r\n   */\r\n  getStatus(request) {\r\n    const ret = wasm.wallet_getStatus(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletEnumerateRequest} {@link IWalletEnumerateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletEnumerateRequest} request\r\n   * @returns {Promise<IWalletEnumerateResponse>}\r\n   */\r\n  walletEnumerate(request) {\r\n    const ret = wasm.wallet_walletEnumerate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletCreateRequest} {@link IWalletCreateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletCreateRequest} request\r\n   * @returns {Promise<IWalletCreateResponse>}\r\n   */\r\n  walletCreate(request) {\r\n    const ret = wasm.wallet_walletCreate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletOpenRequest} {@link IWalletOpenResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletOpenRequest} request\r\n   * @returns {Promise<IWalletOpenResponse>}\r\n   */\r\n  walletOpen(request) {\r\n    const ret = wasm.wallet_walletOpen(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletReloadRequest} {@link IWalletReloadResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletReloadRequest} request\r\n   * @returns {Promise<IWalletReloadResponse>}\r\n   */\r\n  walletReload(request) {\r\n    const ret = wasm.wallet_walletReload(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletCloseRequest} {@link IWalletCloseResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletCloseRequest} request\r\n   * @returns {Promise<IWalletCloseResponse>}\r\n   */\r\n  walletClose(request) {\r\n    const ret = wasm.wallet_walletClose(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletChangeSecretRequest} {@link IWalletChangeSecretResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletChangeSecretRequest} request\r\n   * @returns {Promise<IWalletChangeSecretResponse>}\r\n   */\r\n  walletChangeSecret(request) {\r\n    const ret = wasm.wallet_walletChangeSecret(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletExportRequest} {@link IWalletExportResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletExportRequest} request\r\n   * @returns {Promise<IWalletExportResponse>}\r\n   */\r\n  walletExport(request) {\r\n    const ret = wasm.wallet_walletExport(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IWalletImportRequest} {@link IWalletImportResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IWalletImportRequest} request\r\n   * @returns {Promise<IWalletImportResponse>}\r\n   */\r\n  walletImport(request) {\r\n    const ret = wasm.wallet_walletImport(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IPrvKeyDataEnumerateRequest} {@link IPrvKeyDataEnumerateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IPrvKeyDataEnumerateRequest} request\r\n   * @returns {Promise<IPrvKeyDataEnumerateResponse>}\r\n   */\r\n  prvKeyDataEnumerate(request) {\r\n    const ret = wasm.wallet_prvKeyDataEnumerate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IPrvKeyDataCreateRequest} {@link IPrvKeyDataCreateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IPrvKeyDataCreateRequest} request\r\n   * @returns {Promise<IPrvKeyDataCreateResponse>}\r\n   */\r\n  prvKeyDataCreate(request) {\r\n    const ret = wasm.wallet_prvKeyDataCreate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IPrvKeyDataRemoveRequest} {@link IPrvKeyDataRemoveResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IPrvKeyDataRemoveRequest} request\r\n   * @returns {Promise<IPrvKeyDataRemoveResponse>}\r\n   */\r\n  prvKeyDataRemove(request) {\r\n    const ret = wasm.wallet_prvKeyDataRemove(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IPrvKeyDataGetRequest} {@link IPrvKeyDataGetResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IPrvKeyDataGetRequest} request\r\n   * @returns {Promise<IPrvKeyDataGetResponse>}\r\n   */\r\n  prvKeyDataGet(request) {\r\n    const ret = wasm.wallet_prvKeyDataGet(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsEnumerateRequest} {@link IAccountsEnumerateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsEnumerateRequest} request\r\n   * @returns {Promise<IAccountsEnumerateResponse>}\r\n   */\r\n  accountsEnumerate(request) {\r\n    const ret = wasm.wallet_accountsEnumerate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsRenameRequest} {@link IAccountsRenameResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsRenameRequest} request\r\n   * @returns {Promise<IAccountsRenameResponse>}\r\n   */\r\n  accountsRename(request) {\r\n    const ret = wasm.wallet_accountsRename(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsDiscoveryRequest} {@link IAccountsDiscoveryResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsDiscoveryRequest} request\r\n   * @returns {Promise<IAccountsDiscoveryResponse>}\r\n   */\r\n  accountsDiscovery(request) {\r\n    const ret = wasm.wallet_accountsDiscovery(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsCreateRequest} {@link IAccountsCreateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsCreateRequest} request\r\n   * @returns {Promise<IAccountsCreateResponse>}\r\n   */\r\n  accountsCreate(request) {\r\n    const ret = wasm.wallet_accountsCreate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsEnsureDefaultRequest} {@link IAccountsEnsureDefaultResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsEnsureDefaultRequest} request\r\n   * @returns {Promise<IAccountsEnsureDefaultResponse>}\r\n   */\r\n  accountsEnsureDefault(request) {\r\n    const ret = wasm.wallet_accountsEnsureDefault(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsImportRequest} {@link IAccountsImportResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsImportRequest} request\r\n   * @returns {Promise<IAccountsImportResponse>}\r\n   */\r\n  accountsImport(request) {\r\n    const ret = wasm.wallet_accountsImport(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsActivateRequest} {@link IAccountsActivateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsActivateRequest} request\r\n   * @returns {Promise<IAccountsActivateResponse>}\r\n   */\r\n  accountsActivate(request) {\r\n    const ret = wasm.wallet_accountsActivate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsDeactivateRequest} {@link IAccountsDeactivateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsDeactivateRequest} request\r\n   * @returns {Promise<IAccountsDeactivateResponse>}\r\n   */\r\n  accountsDeactivate(request) {\r\n    const ret = wasm.wallet_accountsDeactivate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsGetRequest} {@link IAccountsGetResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsGetRequest} request\r\n   * @returns {Promise<IAccountsGetResponse>}\r\n   */\r\n  accountsGet(request) {\r\n    const ret = wasm.wallet_accountsGet(this.__wbg_ptr, addHeapObject(request));\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsCreateNewAddressRequest} {@link IAccountsCreateNewAddressResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsCreateNewAddressRequest} request\r\n   * @returns {Promise<IAccountsCreateNewAddressResponse>}\r\n   */\r\n  accountsCreateNewAddress(request) {\r\n    const ret = wasm.wallet_accountsCreateNewAddress(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsSendRequest} {@link IAccountsSendResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsSendRequest} request\r\n   * @returns {Promise<IAccountsSendResponse>}\r\n   */\r\n  accountsSend(request) {\r\n    const ret = wasm.wallet_accountsSend(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsPskbSignRequest} {@link IAccountsPskbSignResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsPskbSignRequest} request\r\n   * @returns {Promise<IAccountsPskbSignResponse>}\r\n   */\r\n  accountsPskbSign(request) {\r\n    const ret = wasm.wallet_accountsPskbSign(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsPskbBroadcastRequest} {@link IAccountsPskbBroadcastResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsPskbBroadcastRequest} request\r\n   * @returns {Promise<IAccountsPskbBroadcastResponse>}\r\n   */\r\n  accountsPskbBroadcast(request) {\r\n    const ret = wasm.wallet_accountsPskbBroadcast(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsPskbSendRequest} {@link IAccountsPskbSendResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsPskbSendRequest} request\r\n   * @returns {Promise<IAccountsPskbSendResponse>}\r\n   */\r\n  accountsPskbSend(request) {\r\n    const ret = wasm.wallet_accountsPskbSend(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsGetUtxosRequest} {@link IAccountsGetUtxosResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsGetUtxosRequest} request\r\n   * @returns {Promise<IAccountsGetUtxosResponse>}\r\n   */\r\n  accountsGetUtxos(request) {\r\n    const ret = wasm.wallet_accountsGetUtxos(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsTransferRequest} {@link IAccountsTransferResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsTransferRequest} request\r\n   * @returns {Promise<IAccountsTransferResponse>}\r\n   */\r\n  accountsTransfer(request) {\r\n    const ret = wasm.wallet_accountsTransfer(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsEstimateRequest} {@link IAccountsEstimateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsEstimateRequest} request\r\n   * @returns {Promise<IAccountsEstimateResponse>}\r\n   */\r\n  accountsEstimate(request) {\r\n    const ret = wasm.wallet_accountsEstimate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link ITransactionsDataGetRequest} {@link ITransactionsDataGetResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {ITransactionsDataGetRequest} request\r\n   * @returns {Promise<ITransactionsDataGetResponse>}\r\n   */\r\n  transactionsDataGet(request) {\r\n    const ret = wasm.wallet_transactionsDataGet(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link ITransactionsReplaceNoteRequest} {@link ITransactionsReplaceNoteResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {ITransactionsReplaceNoteRequest} request\r\n   * @returns {Promise<ITransactionsReplaceNoteResponse>}\r\n   */\r\n  transactionsReplaceNote(request) {\r\n    const ret = wasm.wallet_transactionsReplaceNote(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link ITransactionsReplaceMetadataRequest} {@link ITransactionsReplaceMetadataResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {ITransactionsReplaceMetadataRequest} request\r\n   * @returns {Promise<ITransactionsReplaceMetadataResponse>}\r\n   */\r\n  transactionsReplaceMetadata(request) {\r\n    const ret = wasm.wallet_transactionsReplaceMetadata(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAddressBookEnumerateRequest} {@link IAddressBookEnumerateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAddressBookEnumerateRequest} request\r\n   * @returns {Promise<IAddressBookEnumerateResponse>}\r\n   */\r\n  addressBookEnumerate(request) {\r\n    const ret = wasm.wallet_addressBookEnumerate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IFeeRateEstimateRequest} {@link IFeeRateEstimateResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IFeeRateEstimateRequest} request\r\n   * @returns {Promise<IFeeRateEstimateResponse>}\r\n   */\r\n  feeRateEstimate(request) {\r\n    const ret = wasm.wallet_feeRateEstimate(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IFeeRatePollerEnableRequest} {@link IFeeRatePollerEnableResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IFeeRatePollerEnableRequest} request\r\n   * @returns {Promise<IFeeRatePollerEnableResponse>}\r\n   */\r\n  feeRatePollerEnable(request) {\r\n    const ret = wasm.wallet_feeRatePollerEnable(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IFeeRatePollerDisableRequest} {@link IFeeRatePollerDisableResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IFeeRatePollerDisableRequest} request\r\n   * @returns {Promise<IFeeRatePollerDisableResponse>}\r\n   */\r\n  feeRatePollerDisable(request) {\r\n    const ret = wasm.wallet_feeRatePollerDisable(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsCommitRevealRequest} {@link IAccountsCommitRevealResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsCommitRevealRequest} request\r\n   * @returns {Promise<IAccountsCommitRevealResponse>}\r\n   */\r\n  accountsCommitReveal(request) {\r\n    const ret = wasm.wallet_accountsCommitReveal(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @see {@link IAccountsCommitRevealManualRequest} {@link IAccountsCommitRevealManualResponse}\r\n   * @throws `string` in case of an error.\r\n   * @param {IAccountsCommitRevealManualRequest} request\r\n   * @returns {Promise<IAccountsCommitRevealManualResponse>}\r\n   */\r\n  accountsCommitRevealManual(request) {\r\n    const ret = wasm.wallet_accountsCommitRevealManual(\r\n      this.__wbg_ptr,\r\n      addHeapObject(request),\r\n    );\r\n    return takeObject(ret);\r\n  }\r\n}\r\n\r\nconst WalletDescriptorFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_walletdescriptor_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n * @category Wallet API\r\n */\r\nexport class WalletDescriptor {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(WalletDescriptor.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    WalletDescriptorFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      title: this.title,\r\n      filename: this.filename,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    WalletDescriptorFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_walletdescriptor_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get title() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_walletdescriptor_title(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getStringFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 1, 1);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string | null} [arg0]\r\n   */\r\n  set title(arg0) {\r\n    var ptr0 = isLikeNone(arg0)\r\n      ? 0\r\n      : passStringToWasm0(\r\n          arg0,\r\n          wasm.__wbindgen_export_1,\r\n          wasm.__wbindgen_export_2,\r\n        );\r\n    var len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_walletdescriptor_title(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get filename() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.__wbg_get_walletdescriptor_filename(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} arg0\r\n   */\r\n  set filename(arg0) {\r\n    const ptr0 = passStringToWasm0(\r\n      arg0,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len0 = WASM_VECTOR_LEN;\r\n    wasm.__wbg_set_walletdescriptor_filename(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n}\r\n\r\nconst WasiOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_wasioptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class WasiOptions {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(WasiOptions.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    WasiOptionsFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    WasiOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_wasioptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {any[] | null | undefined} args\r\n   * @param {object | null | undefined} env\r\n   * @param {object} preopens\r\n   */\r\n  constructor(args, env, preopens) {\r\n    var ptr0 = isLikeNone(args)\r\n      ? 0\r\n      : passArrayJsValueToWasm0(args, wasm.__wbindgen_export_1);\r\n    var len0 = WASM_VECTOR_LEN;\r\n    const ret = wasm.wasioptions_new_with_values(\r\n      ptr0,\r\n      len0,\r\n      isLikeNone(env) ? 0 : addHeapObject(env),\r\n      addHeapObject(preopens),\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    WasiOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @param {object} preopens\r\n   * @returns {WasiOptions}\r\n   */\r\n  static new(preopens) {\r\n    const ret = wasm.wasioptions_new(addHeapObject(preopens));\r\n    return WasiOptions.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {any[] | undefined}\r\n   */\r\n  get args() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.wasioptions_args(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      let v1;\r\n      if (r0 !== 0) {\r\n        v1 = getArrayJsValueFromWasm0(r0, r1).slice();\r\n        wasm.__wbindgen_export_3(r0, r1 * 4, 4);\r\n      }\r\n      return v1;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any[] | null} [value]\r\n   */\r\n  set args(value) {\r\n    var ptr0 = isLikeNone(value)\r\n      ? 0\r\n      : passArrayJsValueToWasm0(value, wasm.__wbindgen_export_1);\r\n    var len0 = WASM_VECTOR_LEN;\r\n    wasm.wasioptions_set_args(this.__wbg_ptr, ptr0, len0);\r\n  }\r\n  /**\r\n   * @returns {object | undefined}\r\n   */\r\n  get env() {\r\n    const ret = wasm.wasioptions_env(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {object | null} [value]\r\n   */\r\n  set env(value) {\r\n    wasm.wasioptions_set_env(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {object}\r\n   */\r\n  get preopens() {\r\n    const ret = wasm.wasioptions_preopens(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {object} value\r\n   */\r\n  set preopens(value) {\r\n    wasm.wasioptions_set_preopens(this.__wbg_ptr, addHeapObject(value));\r\n  }\r\n}\r\n\r\nconst WriteFileSyncOptionsFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_writefilesyncoptions_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class WriteFileSyncOptions {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    WriteFileSyncOptionsFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_writefilesyncoptions_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string | null} [encoding]\r\n   * @param {string | null} [flag]\r\n   * @param {number | null} [mode]\r\n   */\r\n  constructor(encoding, flag, mode) {\r\n    const ret = wasm.writefilesyncoptions_new(\r\n      isLikeNone(encoding) ? 0 : addHeapObject(encoding),\r\n      isLikeNone(flag) ? 0 : addHeapObject(flag),\r\n      isLikeNone(mode) ? 0x100000001 : mode >>> 0,\r\n    );\r\n    this.__wbg_ptr = ret >>> 0;\r\n    WriteFileSyncOptionsFinalization.register(this, this.__wbg_ptr, this);\r\n    return this;\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get encoding() {\r\n    const ret = wasm.writefilesyncoptions_encoding(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set encoding(value) {\r\n    wasm.writefilesyncoptions_set_encoding(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {string | undefined}\r\n   */\r\n  get flag() {\r\n    const ret = wasm.writefilesyncoptions_flag(this.__wbg_ptr);\r\n    return takeObject(ret);\r\n  }\r\n  /**\r\n   * @param {string | null} [value]\r\n   */\r\n  set flag(value) {\r\n    wasm.writefilesyncoptions_set_flag(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0 : addHeapObject(value),\r\n    );\r\n  }\r\n  /**\r\n   * @returns {number | undefined}\r\n   */\r\n  get mode() {\r\n    const ret = wasm.writefilesyncoptions_mode(this.__wbg_ptr);\r\n    return ret === 0x100000001 ? undefined : ret;\r\n  }\r\n  /**\r\n   * @param {number | null} [value]\r\n   */\r\n  set mode(value) {\r\n    wasm.writefilesyncoptions_set_mode(\r\n      this.__wbg_ptr,\r\n      isLikeNone(value) ? 0x100000001 : value >>> 0,\r\n    );\r\n  }\r\n}\r\n\r\nconst WriteStreamFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_writestream_free(ptr >>> 0, 1),\r\n      );\r\n\r\nexport class WriteStream {\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    WriteStreamFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_writestream_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  add_listener_with_open(listener) {\r\n    try {\r\n      const ret = wasm.writestream_add_listener_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  add_listener_with_close(listener) {\r\n    try {\r\n      const ret = wasm.writestream_add_listener_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  on_with_open(listener) {\r\n    try {\r\n      const ret = wasm.writestream_on_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  on_with_close(listener) {\r\n    try {\r\n      const ret = wasm.writestream_on_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  once_with_open(listener) {\r\n    try {\r\n      const ret = wasm.writestream_once_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  once_with_close(listener) {\r\n    try {\r\n      const ret = wasm.writestream_once_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_listener_with_open(listener) {\r\n    try {\r\n      const ret = wasm.writestream_prepend_listener_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_listener_with_close(listener) {\r\n    try {\r\n      const ret = wasm.writestream_prepend_listener_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_once_listener_with_open(listener) {\r\n    try {\r\n      const ret = wasm.writestream_prepend_once_listener_with_open(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Function} listener\r\n   * @returns {any}\r\n   */\r\n  prepend_once_listener_with_close(listener) {\r\n    try {\r\n      const ret = wasm.writestream_prepend_once_listener_with_close(\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(listener),\r\n      );\r\n      return takeObject(ret);\r\n    } finally {\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n}\r\n\r\nconst XOnlyPublicKeyFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) =>\r\n        wasm.__wbg_xonlypublickey_free(ptr >>> 0, 1),\r\n      );\r\n/**\r\n *\r\n * Data structure that envelopes a XOnlyPublicKey.\r\n *\r\n * XOnlyPublicKey is used as a payload part of the {@link Address}.\r\n *\r\n * @see {@link PublicKey}\r\n * @category Wallet SDK\r\n */\r\nexport class XOnlyPublicKey {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(XOnlyPublicKey.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    XOnlyPublicKeyFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    XOnlyPublicKeyFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_xonlypublickey_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} key\r\n   */\r\n  constructor(key) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        key,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.xonlypublickey_try_new(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      XOnlyPublicKeyFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xonlypublickey_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * Get the [`Address`] of this XOnlyPublicKey.\r\n   * Receives a [`NetworkType`] to determine the prefix of the address.\r\n   * JavaScript: `let address = xOnlyPublicKey.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddress(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xonlypublickey_toAddress(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * Get `ECDSA` [`Address`] of this XOnlyPublicKey.\r\n   * Receives a [`NetworkType`] to determine the prefix of the address.\r\n   * JavaScript: `let address = xOnlyPublicKey.toAddress(NetworkType.MAINNET);`.\r\n   * @param {NetworkType | NetworkId | string} network\r\n   * @returns {Address}\r\n   */\r\n  toAddressECDSA(network) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xonlypublickey_toAddressECDSA(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        addBorrowedObject(network),\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return Address.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {Address} address\r\n   * @returns {XOnlyPublicKey}\r\n   */\r\n  static fromAddress(address) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      _assertClass(address, Address);\r\n      wasm.xonlypublickey_fromAddress(retptr, address.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XOnlyPublicKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n}\r\n\r\nconst XPrvFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_xprv_free(ptr >>> 0, 1));\r\n/**\r\n *\r\n * Extended private key (XPrv).\r\n *\r\n * This class allows accepts a master seed and provides\r\n * functions for derivation of dependent child private keys.\r\n *\r\n * Please note that Kaspa extended private keys use `kprv` prefix.\r\n *\r\n * @see {@link PrivateKeyGenerator}, {@link PublicKeyGenerator}, {@link XPub}, {@link Mnemonic}\r\n * @category Wallet SDK\r\n */\r\nexport class XPrv {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(XPrv.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    XPrvFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      xprv: this.xprv,\r\n      privateKey: this.privateKey,\r\n      depth: this.depth,\r\n      parentFingerprint: this.parentFingerprint,\r\n      childNumber: this.childNumber,\r\n      chainCode: this.chainCode,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    XPrvFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_xprv_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {HexString} seed\r\n   */\r\n  constructor(seed) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_try_new(retptr, addHeapObject(seed));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      XPrvFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * Create {@link XPrv} from `xprvxxxx..` string\r\n   * @param {string} xprv\r\n   * @returns {XPrv}\r\n   */\r\n  static fromXPrv(xprv) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        xprv,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.xprv_fromXPrv(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XPrv.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number} child_number\r\n   * @param {boolean | null} [hardened]\r\n   * @returns {XPrv}\r\n   */\r\n  deriveChild(child_number, hardened) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_deriveChild(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        child_number,\r\n        isLikeNone(hardened) ? 0xffffff : hardened ? 1 : 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XPrv.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} path\r\n   * @returns {XPrv}\r\n   */\r\n  derivePath(path) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_derivePath(retptr, this.__wbg_ptr, addBorrowedObject(path));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XPrv.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} prefix\r\n   * @returns {string}\r\n   */\r\n  intoString(prefix) {\r\n    let deferred3_0;\r\n    let deferred3_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        prefix,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.xprv_intoString(retptr, this.__wbg_ptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr2 = r0;\r\n      var len2 = r1;\r\n      if (r3) {\r\n        ptr2 = 0;\r\n        len2 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred3_0 = ptr2;\r\n      deferred3_1 = len2;\r\n      return getStringFromWasm0(ptr2, len2);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred3_0, deferred3_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  toString() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {XPub}\r\n   */\r\n  toXPub() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_toXPub(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XPub.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PrivateKey}\r\n   */\r\n  toPrivateKey() {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_toPrivateKey(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return PrivateKey.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get xprv() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_toString(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get privateKey() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_privateKey(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get depth() {\r\n    const ret = wasm.xprv_depth(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get parentFingerprint() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_parentFingerprint(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get childNumber() {\r\n    const ret = wasm.xprv_childNumber(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get chainCode() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xprv_chainCode(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nconst XPubFinalization =\r\n  typeof FinalizationRegistry === \"undefined\"\r\n    ? { register: () => {}, unregister: () => {} }\r\n    : new FinalizationRegistry((ptr) => wasm.__wbg_xpub_free(ptr >>> 0, 1));\r\n/**\r\n *\r\n * Extended public key (XPub).\r\n *\r\n * This class allows accepts another XPub and and provides\r\n * functions for derivation of dependent child public keys.\r\n *\r\n * Please note that Kaspa extended public keys use `kpub` prefix.\r\n *\r\n * @see {@link PrivateKeyGenerator}, {@link PublicKeyGenerator}, {@link XPrv}, {@link Mnemonic}\r\n * @category Wallet SDK\r\n */\r\nexport class XPub {\r\n  static __wrap(ptr) {\r\n    ptr = ptr >>> 0;\r\n    const obj = Object.create(XPub.prototype);\r\n    obj.__wbg_ptr = ptr;\r\n    XPubFinalization.register(obj, obj.__wbg_ptr, obj);\r\n    return obj;\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      xpub: this.xpub,\r\n      depth: this.depth,\r\n      parentFingerprint: this.parentFingerprint,\r\n      childNumber: this.childNumber,\r\n      chainCode: this.chainCode,\r\n    };\r\n  }\r\n\r\n  toString() {\r\n    return JSON.stringify(this);\r\n  }\r\n\r\n  __destroy_into_raw() {\r\n    const ptr = this.__wbg_ptr;\r\n    this.__wbg_ptr = 0;\r\n    XPubFinalization.unregister(this);\r\n    return ptr;\r\n  }\r\n\r\n  free() {\r\n    const ptr = this.__destroy_into_raw();\r\n    wasm.__wbg_xpub_free(ptr, 0);\r\n  }\r\n  /**\r\n   * @param {string} xpub\r\n   */\r\n  constructor(xpub) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        xpub,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.xpub_try_new(retptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      this.__wbg_ptr = r0 >>> 0;\r\n      XPubFinalization.register(this, this.__wbg_ptr, this);\r\n      return this;\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {number} child_number\r\n   * @param {boolean | null} [hardened]\r\n   * @returns {XPub}\r\n   */\r\n  deriveChild(child_number, hardened) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xpub_deriveChild(\r\n        retptr,\r\n        this.__wbg_ptr,\r\n        child_number,\r\n        isLikeNone(hardened) ? 0xffffff : hardened ? 1 : 0,\r\n      );\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XPub.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n    }\r\n  }\r\n  /**\r\n   * @param {any} path\r\n   * @returns {XPub}\r\n   */\r\n  derivePath(path) {\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xpub_derivePath(retptr, this.__wbg_ptr, addBorrowedObject(path));\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      if (r2) {\r\n        throw takeObject(r1);\r\n      }\r\n      return XPub.__wrap(r0);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      heap[stack_pointer++] = undefined;\r\n    }\r\n  }\r\n  /**\r\n   * @param {string} prefix\r\n   * @returns {string}\r\n   */\r\n  intoString(prefix) {\r\n    let deferred3_0;\r\n    let deferred3_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      const ptr0 = passStringToWasm0(\r\n        prefix,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len0 = WASM_VECTOR_LEN;\r\n      wasm.xpub_intoString(retptr, this.__wbg_ptr, ptr0, len0);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr2 = r0;\r\n      var len2 = r1;\r\n      if (r3) {\r\n        ptr2 = 0;\r\n        len2 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred3_0 = ptr2;\r\n      deferred3_1 = len2;\r\n      return getStringFromWasm0(ptr2, len2);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred3_0, deferred3_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {PublicKey}\r\n   */\r\n  toPublicKey() {\r\n    const ret = wasm.xpub_toPublicKey(this.__wbg_ptr);\r\n    return PublicKey.__wrap(ret);\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get xpub() {\r\n    let deferred2_0;\r\n    let deferred2_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xpub_xpub(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      var r2 = getDataViewMemory0().getInt32(retptr + 4 * 2, true);\r\n      var r3 = getDataViewMemory0().getInt32(retptr + 4 * 3, true);\r\n      var ptr1 = r0;\r\n      var len1 = r1;\r\n      if (r3) {\r\n        ptr1 = 0;\r\n        len1 = 0;\r\n        throw takeObject(r2);\r\n      }\r\n      deferred2_0 = ptr1;\r\n      deferred2_1 = len1;\r\n      return getStringFromWasm0(ptr1, len1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred2_0, deferred2_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get depth() {\r\n    const ret = wasm.xpub_depth(this.__wbg_ptr);\r\n    return ret;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get parentFingerprint() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xpub_parentFingerprint(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n  /**\r\n   * @returns {number}\r\n   */\r\n  get childNumber() {\r\n    const ret = wasm.xpub_childNumber(this.__wbg_ptr);\r\n    return ret >>> 0;\r\n  }\r\n  /**\r\n   * @returns {string}\r\n   */\r\n  get chainCode() {\r\n    let deferred1_0;\r\n    let deferred1_1;\r\n    try {\r\n      const retptr = wasm.__wbindgen_add_to_stack_pointer(-16);\r\n      wasm.xpub_chainCode(retptr, this.__wbg_ptr);\r\n      var r0 = getDataViewMemory0().getInt32(retptr + 4 * 0, true);\r\n      var r1 = getDataViewMemory0().getInt32(retptr + 4 * 1, true);\r\n      deferred1_0 = r0;\r\n      deferred1_1 = r1;\r\n      return getStringFromWasm0(r0, r1);\r\n    } finally {\r\n      wasm.__wbindgen_add_to_stack_pointer(16);\r\n      wasm.__wbindgen_export_3(deferred1_0, deferred1_1, 1);\r\n    }\r\n  }\r\n}\r\n\r\nasync function __wbg_load(module, imports) {\r\n  if (typeof Response === \"function\" && module instanceof Response) {\r\n    if (typeof WebAssembly.instantiateStreaming === \"function\") {\r\n      try {\r\n        return await WebAssembly.instantiateStreaming(module, imports);\r\n      } catch (e) {\r\n        if (module.headers.get(\"Content-Type\") != \"application/wasm\") {\r\n          console.warn(\r\n            \"`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\\n\",\r\n            e,\r\n          );\r\n        } else {\r\n          throw e;\r\n        }\r\n      }\r\n    }\r\n\r\n    const bytes = await module.arrayBuffer();\r\n    return await WebAssembly.instantiate(bytes, imports);\r\n  } else {\r\n    const instance = await WebAssembly.instantiate(module, imports);\r\n\r\n    if (instance instanceof WebAssembly.Instance) {\r\n      return { instance, module };\r\n    } else {\r\n      return instance;\r\n    }\r\n  }\r\n}\r\n\r\nfunction __wbg_get_imports() {\r\n  const imports = {};\r\n  imports.wbg = {};\r\n  imports.wbg.__wbg_BigInt_470dd987b8190f8e = function (arg0) {\r\n    const ret = BigInt(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_BigInt_ddea6d2f55558acb = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = BigInt(getObject(arg0));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_String_8f0eb39a4a4c2f66 = function (arg0, arg1) {\r\n    const ret = String(getObject(arg1));\r\n    const ptr1 = passStringToWasm0(\r\n      ret,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbg_Window_b0044ac7db258535 = function (arg0) {\r\n    const ret = getObject(arg0).Window;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_WorkerGlobalScope_b74cefefc62a37da = function (arg0) {\r\n    const ret = getObject(arg0).WorkerGlobalScope;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_abort_775ef1d17fc65868 = function (arg0) {\r\n    getObject(arg0).abort();\r\n  };\r\n  imports.wbg.__wbg_aborted_new = function (arg0) {\r\n    const ret = Aborted.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_accountkind_new = function (arg0) {\r\n    const ret = AccountKind.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_addListener_d78339dd4535b756 = function (\r\n    arg0,\r\n    arg1,\r\n    arg2,\r\n    arg3,\r\n  ) {\r\n    const ret = getObject(arg0).addListener(\r\n      getStringFromWasm0(arg1, arg2),\r\n      getObject(arg3),\r\n    );\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_address_new = function (arg0) {\r\n    const ret = Address.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_advance_b3ccc91b80962d79 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).advance(arg1 >>> 0);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_appendChild_8204974b7328bf98 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).appendChild(getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_append_8c7dd8d641a5f01b = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).append(\r\n        getStringFromWasm0(arg1, arg2),\r\n        getStringFromWasm0(arg3, arg4),\r\n      );\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_body_942ea927546a04ba = function (arg0) {\r\n    const ret = getObject(arg0).body;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_buffer_609cc3eee51ed158 = function (arg0) {\r\n    const ret = getObject(arg0).buffer;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_call_672a4d21634d4a24 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).call(getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_call_7cccdd69e0791ae2 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).call(getObject(arg1), getObject(arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_cancelAnimationFrame_032049cb190240a7 = function (arg0) {\r\n    cancelAnimationFrame(takeObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_clearInterval_d472232e2fb5e5e4 = function () {\r\n    return handleError(function (arg0) {\r\n      clearInterval(getObject(arg0));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_clearTimeout_c5ac0f4b6a07b59e = function () {\r\n    return handleError(function (arg0) {\r\n      clearTimeout(getObject(arg0));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_close_0880036443561527 = function () {\r\n    return handleError(function (arg0) {\r\n      getObject(arg0).close();\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_continue_c46c11d3dbe1b030 = function () {\r\n    return handleError(function (arg0) {\r\n      getObject(arg0).continue();\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_count_613cb921d67a4f26 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).count();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_createElement_8c9931a732ee2fea = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).createElement(getStringFromWasm0(arg1, arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_createIndex_873ac48adc772309 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      const ret = getObject(arg0).createIndex(\r\n        getStringFromWasm0(arg1, arg2),\r\n        getObject(arg3),\r\n        getObject(arg4),\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_createObjectStore_e566459f7161f82f = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).createObjectStore(\r\n        getStringFromWasm0(arg1, arg2),\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_createObjectURL_6e98d2f9c7bd9764 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = URL.createObjectURL(getObject(arg1));\r\n      const ptr1 = passStringToWasm0(\r\n        ret,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len1 = WASM_VECTOR_LEN;\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_crypto_ed58b8e10a292839 = function (arg0) {\r\n    const ret = getObject(arg0).crypto;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_data_432d9c3df2630942 = function (arg0) {\r\n    const ret = getObject(arg0).data;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_delete_200677093b4cf756 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).delete(getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_delete_36c8630e530a2a1a = function (arg0, arg1) {\r\n    const ret = getObject(arg0).delete(getObject(arg1));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_document_d249400bd7bd996d = function (arg0) {\r\n    const ret = getObject(arg0).document;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_done_769e5ede4b31c67b = function (arg0) {\r\n    const ret = getObject(arg0).done;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_entries_3265d4158b33e5dc = function (arg0) {\r\n    const ret = Object.entries(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_entries_c8a90a7ed73e84ce = function (arg0) {\r\n    const ret = getObject(arg0).entries();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_error_5edc95999c70d386 = function (arg0, arg1) {\r\n    let deferred0_0;\r\n    let deferred0_1;\r\n    try {\r\n      deferred0_0 = arg0;\r\n      deferred0_1 = arg1;\r\n      console.error(getStringFromWasm0(arg0, arg1));\r\n    } finally {\r\n      wasm.__wbindgen_export_3(deferred0_0, deferred0_1, 1);\r\n    }\r\n  };\r\n  imports.wbg.__wbg_error_b5d62a6100a65a3b = function (arg0, arg1) {\r\n    console.error(getStringFromWasm0(arg0, arg1));\r\n  };\r\n  imports.wbg.__wbg_error_ff4ddaabdfc5dbb3 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).error;\r\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_existsSync_6b2031627aea3e5a = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).existsSync(getStringFromWasm0(arg1, arg2));\r\n      return ret;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_fetch_509096533071c657 = function (arg0, arg1) {\r\n    const ret = getObject(arg0).fetch(getObject(arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_fetch_7bb58c5ed3c31810 = function (arg0) {\r\n    const ret = fetch(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_fromCodePoint_f37c25c172f2e8b5 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = String.fromCodePoint(arg0 >>> 0);\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_from_2a5d3e218e67aa85 = function (arg0) {\r\n    const ret = Array.from(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_from_d608a04300bfd9ac = function (arg0) {\r\n    const ret = Buffer.from(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_generatorsummary_new = function (arg0) {\r\n    const ret = GeneratorSummary.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_getItem_17f98dee3b43fa7e = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      const ret = getObject(arg1).getItem(getStringFromWasm0(arg2, arg3));\r\n      var ptr1 = isLikeNone(ret)\r\n        ? 0\r\n        : passStringToWasm0(\r\n            ret,\r\n            wasm.__wbindgen_export_1,\r\n            wasm.__wbindgen_export_2,\r\n          );\r\n      var len1 = WASM_VECTOR_LEN;\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_getRandomValues_bcb4912f16000dc4 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).getRandomValues(getObject(arg1));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_get_13495dac72693ecc = function (arg0, arg1) {\r\n    const ret = getObject(arg0).get(getObject(arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_get_67b2ba62fc30de12 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = Reflect.get(getObject(arg0), getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_get_8da03f81f6a1111e = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).get(getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_get_a8e28596722a45ff = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      let deferred0_0;\r\n      let deferred0_1;\r\n      try {\r\n        deferred0_0 = arg0;\r\n        deferred0_1 = arg1;\r\n        const ret = chrome.storage.local.get(getStringFromWasm0(arg0, arg1));\r\n        return addHeapObject(ret);\r\n      } finally {\r\n        wasm.__wbindgen_export_3(deferred0_0, deferred0_1, 1);\r\n      }\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_get_b9b93047fe3cf45b = function (arg0, arg1) {\r\n    const ret = getObject(arg0)[arg1 >>> 0];\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_get_f1f75752f252b231 = function () {\r\n    return handleError(function () {\r\n      const ret = chrome.storage.local.get();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_getwithrefkey_1dc361bd10053bfe = function (arg0, arg1) {\r\n    const ret = getObject(arg0)[getObject(arg1)];\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_global_b6f5c73312f62313 = function (arg0) {\r\n    const ret = getObject(arg0).global;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_has_a5ea9117f258a0ec = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = Reflect.has(getObject(arg0), getObject(arg1));\r\n      return ret;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_hash_new = function (arg0) {\r\n    const ret = Hash.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_headers_9cb51cfd2ac780a4 = function (arg0) {\r\n    const ret = getObject(arg0).headers;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_index_e00ca5fff206ee3e = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).index(getStringFromWasm0(arg1, arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_indexedDB_601ec26c63e333de = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).indexedDB;\r\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_indexedDB_b1f49280282046f8 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).indexedDB;\r\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_indexedDB_f6b47b0dc333fd2f = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).indexedDB;\r\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_innerHTML_e1553352fe93921a = function (arg0, arg1) {\r\n    const ret = getObject(arg1).innerHTML;\r\n    const ptr1 = passStringToWasm0(\r\n      ret,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbg_instanceof_ArrayBuffer_e14585432e3737fc = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof ArrayBuffer;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_instanceof_Map_f3469ce2244d2430 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Map;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_instanceof_Object_7f2dcef8f78644a4 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Object;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_instanceof_Response_f2cc20d9f7dfd644 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Response;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_instanceof_Uint8Array_17156bcf118086a9 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Uint8Array;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_instanceof_Window_def73ea0955fc569 = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = getObject(arg0) instanceof Window;\r\n    } catch (_) {\r\n      result = false;\r\n    }\r\n    const ret = result;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_isArray_a1eab7e0d067391b = function (arg0) {\r\n    const ret = Array.isArray(getObject(arg0));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_isSafeInteger_343e2beeeece1bb0 = function (arg0) {\r\n    const ret = Number.isSafeInteger(getObject(arg0));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_is_c7481c65e7e5df9e = function (arg0, arg1) {\r\n    const ret = Object.is(getObject(arg0), getObject(arg1));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_iterator_9a24c88df860dc65 = function () {\r\n    const ret = Symbol.iterator;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_key_c5e0a01cf450dca2 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg1).key(arg2 >>> 0);\r\n      var ptr1 = isLikeNone(ret)\r\n        ? 0\r\n        : passStringToWasm0(\r\n            ret,\r\n            wasm.__wbindgen_export_1,\r\n            wasm.__wbindgen_export_2,\r\n          );\r\n      var len1 = WASM_VECTOR_LEN;\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_keys_5c77a08ddc2fb8a6 = function (arg0) {\r\n    const ret = Object.keys(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_length_a446193dc22c12f8 = function (arg0) {\r\n    const ret = getObject(arg0).length;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_length_e2d2a49132c1b256 = function (arg0) {\r\n    const ret = getObject(arg0).length;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_length_ed4a84b02b798bda = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).length;\r\n      return ret;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_localStorage_1406c99c39728187 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).localStorage;\r\n      return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_location_350d99456c2f3693 = function (arg0) {\r\n    const ret = getObject(arg0).location;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_log_6c164928aa7b57f4 = function (arg0, arg1) {\r\n    console.log(getStringFromWasm0(arg0, arg1));\r\n  };\r\n  imports.wbg.__wbg_mkdirSync_29d1fd92bf140bd0 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      getObject(arg0).mkdirSync(\r\n        getStringFromWasm0(arg1, arg2),\r\n        takeObject(arg3),\r\n      );\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_msCrypto_0a36e2ec3a343d26 = function (arg0) {\r\n    const ret = getObject(arg0).msCrypto;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_navigator_1577371c070c8947 = function (arg0) {\r\n    const ret = getObject(arg0).navigator;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_networkid_new = function (arg0) {\r\n    const ret = NetworkId.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new0_f788a2397c7ca929 = function () {\r\n    const ret = new Date();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_018dcc2d6c8c2f6a = function () {\r\n    return handleError(function () {\r\n      const ret = new Headers();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_new_0b790fd655ff1a97 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = new WebSocket(getStringFromWasm0(arg0, arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_new_23a2665fac83c611 = function (arg0, arg1) {\r\n    try {\r\n      var state0 = { a: arg0, b: arg1 };\r\n      var cb0 = (arg0, arg1) => {\r\n        const a = state0.a;\r\n        state0.a = 0;\r\n        try {\r\n          return __wbg_adapter_199(a, state0.b, arg0, arg1);\r\n        } finally {\r\n          state0.a = a;\r\n        }\r\n      };\r\n      const ret = new Promise(cb0);\r\n      return addHeapObject(ret);\r\n    } finally {\r\n      state0.a = state0.b = 0;\r\n    }\r\n  };\r\n  imports.wbg.__wbg_new_405e22f390576ce2 = function () {\r\n    const ret = new Object();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_5e0be73521bc8c17 = function () {\r\n    const ret = new Map();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_757fd34d47ff40d2 = function (arg0) {\r\n    const ret = new ArrayBuffer(arg0 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_78feb108b6472713 = function () {\r\n    const ret = new Array();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_a12002a7f91c75be = function (arg0) {\r\n    const ret = new Uint8Array(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_new_b1a33e5095abf678 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = new Worker(getStringFromWasm0(arg0, arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_new_e25e5aab09ff45db = function () {\r\n    return handleError(function () {\r\n      const ret = new AbortController();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_new_f5f8a7325e1cb479 = function () {\r\n    const ret = new Error();\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_newnoargs_105ed471475aaf50 = function (arg0, arg1) {\r\n    const ret = new Function(getStringFromWasm0(arg0, arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_newwithbyteoffsetandlength_d97e637ebe145a9a = function (\r\n    arg0,\r\n    arg1,\r\n    arg2,\r\n  ) {\r\n    const ret = new Uint8Array(getObject(arg0), arg1 >>> 0, arg2 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_newwithlength_a381634e90c276d4 = function (arg0) {\r\n    const ret = new Uint8Array(arg0 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_newwithnodejsconfigimpl_b0a2d4e5b0763676 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4, arg5, arg6) {\r\n      const ret = new WebSocket(\r\n        getStringFromWasm0(arg0, arg1),\r\n        takeObject(arg2),\r\n        takeObject(arg3),\r\n        takeObject(arg4),\r\n        takeObject(arg5),\r\n        takeObject(arg6),\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_newwithstrandinit_06c535e0a867c635 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = new Request(getStringFromWasm0(arg0, arg1), getObject(arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_newwithstrsequenceandoptions_aaff55b467c81b63 =\r\n    function () {\r\n      return handleError(function (arg0, arg1) {\r\n        const ret = new Blob(getObject(arg0), getObject(arg1));\r\n        return addHeapObject(ret);\r\n      }, arguments);\r\n    };\r\n  imports.wbg.__wbg_next_25feadfc0913fea9 = function (arg0) {\r\n    const ret = getObject(arg0).next;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_next_6574e1a8a62d1055 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).next();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_node_02999533c4ea02e3 = function (arg0) {\r\n    const ret = getObject(arg0).node;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_nodedescriptor_new = function (arg0) {\r\n    const ret = NodeDescriptor.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_now_807e54c39636c349 = function () {\r\n    const ret = Date.now();\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_now_d18023d54d4e5500 = function (arg0) {\r\n    const ret = getObject(arg0).now();\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_objectStore_21878d46d25b64b6 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).objectStore(getStringFromWasm0(arg1, arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_oldVersion_e8337811e52861c6 = function (arg0) {\r\n    const ret = getObject(arg0).oldVersion;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_on_9ef8de87725b93b5 = function (arg0, arg1, arg2, arg3) {\r\n    const ret = getObject(arg0).on(\r\n      getStringFromWasm0(arg1, arg2),\r\n      getObject(arg3),\r\n    );\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_once_8901720a31f56808 = function (arg0, arg1, arg2, arg3) {\r\n    const ret = getObject(arg0).once(\r\n      getStringFromWasm0(arg1, arg2),\r\n      getObject(arg3),\r\n    );\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_openCursor_d8ea5d621ec422f8 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).openCursor(\r\n        getObject(arg1),\r\n        __wbindgen_enum_IdbCursorDirection[arg2],\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_open_e0c0b2993eb596e1 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      const ret = getObject(arg0).open(\r\n        getStringFromWasm0(arg1, arg2),\r\n        arg3 >>> 0,\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_pendingtransaction_new = function (arg0) {\r\n    const ret = PendingTransaction.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_postMessage_6edafa8f7b9c2f52 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).postMessage(getObject(arg1));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_prependListener_dc1e8b094d0f731e = function (\r\n    arg0,\r\n    arg1,\r\n    arg2,\r\n    arg3,\r\n  ) {\r\n    const ret = getObject(arg0).prependListener(\r\n      getStringFromWasm0(arg1, arg2),\r\n      getObject(arg3),\r\n    );\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_prependOnceListener_93873dc17dd2fcad = function (\r\n    arg0,\r\n    arg1,\r\n    arg2,\r\n    arg3,\r\n  ) {\r\n    const ret = getObject(arg0).prependOnceListener(\r\n      getStringFromWasm0(arg1, arg2),\r\n      getObject(arg3),\r\n    );\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_process_5c1d670bc53614b8 = function (arg0) {\r\n    const ret = getObject(arg0).process;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_protocol_faa0494a9b2554cb = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg1).protocol;\r\n      const ptr1 = passStringToWasm0(\r\n        ret,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len1 = WASM_VECTOR_LEN;\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_publickey_new = function (arg0) {\r\n    const ret = PublicKey.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_push_737cfc8c1432c2c6 = function (arg0, arg1) {\r\n    const ret = getObject(arg0).push(getObject(arg1));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_put_066faa31a6a88f5b = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).put(getObject(arg1), getObject(arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_queueMicrotask_97d92b4fcc8a61c5 = function (arg0) {\r\n    queueMicrotask(getObject(arg0));\r\n  };\r\n  imports.wbg.__wbg_queueMicrotask_d3219def82552485 = function (arg0) {\r\n    const ret = getObject(arg0).queueMicrotask;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_randomFillSync_ab2cfe79ebbf2740 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).randomFillSync(takeObject(arg1));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_readFileSync_42b340d959241f2b = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      const ret = getObject(arg0).readFileSync(\r\n        getStringFromWasm0(arg1, arg2),\r\n        takeObject(arg3),\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_readdir_319d9b13a44c9af9 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).readdir(getStringFromWasm0(arg1, arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_readyState_4013cfdf4f22afb0 = function (arg0) {\r\n    const ret = getObject(arg0).readyState;\r\n    return (__wbindgen_enum_IdbRequestReadyState.indexOf(ret) + 1 || 3) - 1;\r\n  };\r\n  imports.wbg.__wbg_readyState_6c28968f3e6c1e47 = function (arg0) {\r\n    const ret = getObject(arg0).readyState;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_removeAttribute_e419cd6726b4c62f = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      getObject(arg0).removeAttribute(getStringFromWasm0(arg1, arg2));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_removeItem_9d2669ee3bba6f7d = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      getObject(arg0).removeItem(getStringFromWasm0(arg1, arg2));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_remove_cb9af65ab98197c5 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      let deferred0_0;\r\n      let deferred0_1;\r\n      try {\r\n        deferred0_0 = arg0;\r\n        deferred0_1 = arg1;\r\n        const ret = chrome.storage.local.remove(getStringFromWasm0(arg0, arg1));\r\n        return addHeapObject(ret);\r\n      } finally {\r\n        wasm.__wbindgen_export_3(deferred0_0, deferred0_1, 1);\r\n      }\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_renameSync_86e78b84a05e4a0b = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).renameSync(\r\n        getStringFromWasm0(arg1, arg2),\r\n        getStringFromWasm0(arg3, arg4),\r\n      );\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_requestAnimationFrame_63a812187303a02c = function (arg0) {\r\n    const ret = requestAnimationFrame(takeObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_require_05f2f70e92254dbb = function (arg0, arg1) {\r\n    //const ret = require(getStringFromWasm0(arg0, arg1));\r\n    return undefined; // addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_require_11fc9008c54f5b90 = function (arg0, arg1) {\r\n    //const ret = require(getStringFromWasm0(arg0, arg1));\r\n    return undefined; //addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_require_79b1e9274cde3c87 = function () {\r\n    return handleError(function () {\r\n      const ret = module.require;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_resolve_4851785c9c5f573d = function (arg0) {\r\n    const ret = Promise.resolve(getObject(arg0));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_result_f29afabdf2c05826 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).result;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_rpcclient_new = function (arg0) {\r\n    const ret = RpcClient.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_send_17f8c8c8e084cc5e = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      getObject(arg0).send(getArrayU8FromWasm0(arg1, arg2));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_send_9a57107cc0d7eafa = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      getObject(arg0).send(getStringFromWasm0(arg1, arg2));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_send_afb0c27f2d9698e3 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      getObject(arg0).send(getObject(arg1));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setAttribute_2704501201f15687 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).setAttribute(\r\n        getStringFromWasm0(arg1, arg2),\r\n        getStringFromWasm0(arg3, arg4),\r\n      );\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setInterval_160c4baec24e25f6 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = setInterval(getObject(arg0), arg1 >>> 0);\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setItem_212ecc915942ab0a = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).setItem(\r\n        getStringFromWasm0(arg1, arg2),\r\n        getStringFromWasm0(arg3, arg4),\r\n      );\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setTime_8afa2faa26e7eb59 = function (arg0, arg1) {\r\n    const ret = getObject(arg0).setTime(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_setTimeout_430dd4984e76f6c3 = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = setTimeout(getObject(arg0), arg1 >>> 0);\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_set_005c36bbcfafb768 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = chrome.storage.local.set(takeObject(arg0));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_set_37837023f3d740e8 = function (arg0, arg1, arg2) {\r\n    getObject(arg0)[arg1 >>> 0] = takeObject(arg2);\r\n  };\r\n  imports.wbg.__wbg_set_3f1d0b984ed272ed = function (arg0, arg1, arg2) {\r\n    getObject(arg0)[takeObject(arg1)] = takeObject(arg2);\r\n  };\r\n  imports.wbg.__wbg_set_65595bdd868b3009 = function (arg0, arg1, arg2) {\r\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\r\n  };\r\n  imports.wbg.__wbg_set_8fc6bf8a5b1071d1 = function (arg0, arg1, arg2) {\r\n    const ret = getObject(arg0).set(getObject(arg1), getObject(arg2));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_set_bb8cecf6a62b9f46 = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = Reflect.set(\r\n        getObject(arg0),\r\n        getObject(arg1),\r\n        getObject(arg2),\r\n      );\r\n      return ret;\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_setbinaryType_9981a6ba2bd58b94 = function (arg0, arg1) {\r\n    getObject(arg0).binaryType = __wbindgen_enum_BinaryType[arg1];\r\n  };\r\n  imports.wbg.__wbg_setbody_5923b78a95eedf29 = function (arg0, arg1) {\r\n    getObject(arg0).body = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setcredentials_c3a22f1cd105a2c6 = function (arg0, arg1) {\r\n    getObject(arg0).credentials = __wbindgen_enum_RequestCredentials[arg1];\r\n  };\r\n  imports.wbg.__wbg_setheaders_834c0bdb6a8949ad = function (arg0, arg1) {\r\n    getObject(arg0).headers = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setinnerHTML_31bde41f835786f7 = function (\r\n    arg0,\r\n    arg1,\r\n    arg2,\r\n  ) {\r\n    getObject(arg0).innerHTML = getStringFromWasm0(arg1, arg2);\r\n  };\r\n  imports.wbg.__wbg_setmethod_3c5280fe5d890842 = function (arg0, arg1, arg2) {\r\n    getObject(arg0).method = getStringFromWasm0(arg1, arg2);\r\n  };\r\n  imports.wbg.__wbg_setmode_5dc300b865044b65 = function (arg0, arg1) {\r\n    getObject(arg0).mode = __wbindgen_enum_RequestMode[arg1];\r\n  };\r\n  imports.wbg.__wbg_setonabort_3bf4db6614fa98e9 = function (arg0, arg1) {\r\n    getObject(arg0).onabort = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonblocked_aebf64bd39f1eca8 = function (arg0, arg1) {\r\n    getObject(arg0).onblocked = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonclose_b15bdabd419b6357 = function (arg0, arg1) {\r\n    getObject(arg0).onclose = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setoncomplete_4d19df0dadb7c4d4 = function (arg0, arg1) {\r\n    getObject(arg0).oncomplete = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonerror_b0d9d723b8fddbbb = function (arg0, arg1) {\r\n    getObject(arg0).onerror = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonerror_d7e3056cc6e56085 = function (arg0, arg1) {\r\n    getObject(arg0).onerror = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonerror_e2c5c0fa6fbf6d99 = function (arg0, arg1) {\r\n    getObject(arg0).onerror = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonmessage_007594843a0b97e8 = function (arg0, arg1) {\r\n    getObject(arg0).onmessage = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonmessage_5a885b16bdc6dca6 = function (arg0, arg1) {\r\n    getObject(arg0).onmessage = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonopen_c42cfdbb28b087c4 = function (arg0, arg1) {\r\n    getObject(arg0).onopen = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonsuccess_afa464ee777a396d = function (arg0, arg1) {\r\n    getObject(arg0).onsuccess = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonupgradeneeded_fcf7ce4f2eb0cb5f = function (\r\n    arg0,\r\n    arg1,\r\n  ) {\r\n    getObject(arg0).onupgradeneeded = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setonversionchange_6ee07fa49ee1e3a5 = function (\r\n    arg0,\r\n    arg1,\r\n  ) {\r\n    getObject(arg0).onversionchange = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_setsignal_75b21ef3a81de905 = function (arg0, arg1) {\r\n    getObject(arg0).signal = getObject(arg1);\r\n  };\r\n  imports.wbg.__wbg_settype_39ed370d3edd403c = function (arg0, arg1, arg2) {\r\n    getObject(arg0).type = getStringFromWasm0(arg1, arg2);\r\n  };\r\n  imports.wbg.__wbg_setunique_dd24c422aa05df89 = function (arg0, arg1) {\r\n    getObject(arg0).unique = arg1 !== 0;\r\n  };\r\n  imports.wbg.__wbg_signal_aaf9ad74119f20a4 = function (arg0) {\r\n    const ret = getObject(arg0).signal;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_stack_c99a96ed42647c4c = function (arg0, arg1) {\r\n    const ret = getObject(arg1).stack;\r\n    const ptr1 = passStringToWasm0(\r\n      ret,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbg_statSync_9a429acc496bafda = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      const ret = getObject(arg0).statSync(getStringFromWasm0(arg1, arg2));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07 = function () {\r\n    const ret = typeof global === \"undefined\" ? null : global;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0 = function () {\r\n    const ret = typeof globalThis === \"undefined\" ? null : globalThis;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819 = function () {\r\n    const ret = typeof self === \"undefined\" ? null : self;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40 = function () {\r\n    const ret = typeof window === \"undefined\" ? null : window;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_status_f6360336ca686bf0 = function (arg0) {\r\n    const ret = getObject(arg0).status;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbg_stringify_f7ed6987935b4a24 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = JSON.stringify(getObject(arg0));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_subarray_aa9065fa9dc5df96 = function (arg0, arg1, arg2) {\r\n    const ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_target_0a62d9d79a2a1ede = function (arg0) {\r\n    const ret = getObject(arg0).target;\r\n    return isLikeNone(ret) ? 0 : addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_text_7805bea50de2af49 = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).text();\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_then_44b73946d2fb3e7d = function (arg0, arg1) {\r\n    const ret = getObject(arg0).then(getObject(arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_then_48b406749878a531 = function (arg0, arg1, arg2) {\r\n    const ret = getObject(arg0).then(getObject(arg1), getObject(arg2));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_toString_2f76f493957b63da = function (arg0, arg1, arg2) {\r\n    const ret = getObject(arg1).toString(arg2);\r\n    const ptr1 = passStringToWasm0(\r\n      ret,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbg_toString_b5d4438bc26b267c = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).toString(arg1);\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_transaction_babc423936946a37 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3) {\r\n      const ret = getObject(arg0).transaction(\r\n        getStringFromWasm0(arg1, arg2),\r\n        __wbindgen_enum_IdbTransactionMode[arg3],\r\n      );\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_transaction_new = function (arg0) {\r\n    const ret = Transaction.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_transactioninput_new = function (arg0) {\r\n    const ret = TransactionInput.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_transactionoutput_new = function (arg0) {\r\n    const ret = TransactionOutput.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_transactionrecordnotification_new = function (arg0) {\r\n    const ret = TransactionRecordNotification.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_unlinkSync_656392e8d747415f = function () {\r\n    return handleError(function (arg0, arg1, arg2) {\r\n      getObject(arg0).unlinkSync(getStringFromWasm0(arg1, arg2));\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_update_acd72607f506872a = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg0).update(getObject(arg1));\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_url_ae10c34ca209681d = function (arg0, arg1) {\r\n    const ret = getObject(arg1).url;\r\n    const ptr1 = passStringToWasm0(\r\n      ret,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbg_userAgent_12e9d8e62297563f = function () {\r\n    return handleError(function (arg0, arg1) {\r\n      const ret = getObject(arg1).userAgent;\r\n      const ptr1 = passStringToWasm0(\r\n        ret,\r\n        wasm.__wbindgen_export_1,\r\n        wasm.__wbindgen_export_2,\r\n      );\r\n      const len1 = WASM_VECTOR_LEN;\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n      getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_utxoentryreference_new = function (arg0) {\r\n    const ret = UtxoEntryReference.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_value_68c4e9a54bb7fd5e = function () {\r\n    return handleError(function (arg0) {\r\n      const ret = getObject(arg0).value;\r\n      return addHeapObject(ret);\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbg_value_cd1ffa7b1ab794f1 = function (arg0) {\r\n    const ret = getObject(arg0).value;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_versions_c71aa1626a93e0a1 = function (arg0) {\r\n    const ret = getObject(arg0).versions;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_walletdescriptor_new = function (arg0) {\r\n    const ret = WalletDescriptor.__wrap(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbg_warn_28319e260c89a4f8 = function (arg0, arg1) {\r\n    console.warn(getStringFromWasm0(arg0, arg1));\r\n  };\r\n  imports.wbg.__wbg_writeFileSync_6325b339950ab342 = function () {\r\n    return handleError(function (arg0, arg1, arg2, arg3, arg4) {\r\n      getObject(arg0).writeFileSync(\r\n        getStringFromWasm0(arg1, arg2),\r\n        takeObject(arg3),\r\n        takeObject(arg4),\r\n      );\r\n    }, arguments);\r\n  };\r\n  imports.wbg.__wbindgen_array_new = function () {\r\n    const ret = [];\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_array_push = function (arg0, arg1) {\r\n    getObject(arg0).push(takeObject(arg1));\r\n  };\r\n  imports.wbg.__wbindgen_as_number = function (arg0) {\r\n    const ret = +getObject(arg0);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_bigint_from_i64 = function (arg0) {\r\n    const ret = arg0;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_bigint_from_u64 = function (arg0) {\r\n    const ret = BigInt.asUintN(64, arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_bigint_get_as_i64 = function (arg0, arg1) {\r\n    const v = getObject(arg1);\r\n    const ret = typeof v === \"bigint\" ? v : undefined;\r\n    getDataViewMemory0().setBigInt64(\r\n      arg0 + 8 * 1,\r\n      isLikeNone(ret) ? BigInt(0) : ret,\r\n      true,\r\n    );\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, !isLikeNone(ret), true);\r\n  };\r\n  imports.wbg.__wbindgen_boolean_get = function (arg0) {\r\n    const v = getObject(arg0);\r\n    const ret = typeof v === \"boolean\" ? (v ? 1 : 0) : 2;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_cb_drop = function (arg0) {\r\n    const obj = takeObject(arg0).original;\r\n    if (obj.cnt-- == 1) {\r\n      obj.a = 0;\r\n      return true;\r\n    }\r\n    const ret = false;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper16385 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 6406, __wbg_adapter_78);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper17150 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 6436, __wbg_adapter_81);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper17152 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 6436, __wbg_adapter_84);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper17154 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 6436, __wbg_adapter_87);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper17515 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 6560, __wbg_adapter_90);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper17516 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 6560, __wbg_adapter_90);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper4216 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 1320, __wbg_adapter_75);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper826 = function (arg0, arg1, arg2) {\r\n    const ret = makeMutClosure(arg0, arg1, 182, __wbg_adapter_66);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper947 = function (arg0, arg1, arg2) {\r\n    const ret = makeClosure(arg0, arg1, 237, __wbg_adapter_69);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_closure_wrapper949 = function (arg0, arg1, arg2) {\r\n    const ret = makeClosure(arg0, arg1, 237, __wbg_adapter_72);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_debug_string = function (arg0, arg1) {\r\n    const ret = debugString(getObject(arg1));\r\n    const ptr1 = passStringToWasm0(\r\n      ret,\r\n      wasm.__wbindgen_export_1,\r\n      wasm.__wbindgen_export_2,\r\n    );\r\n    const len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbindgen_error_new = function (arg0, arg1) {\r\n    const ret = new Error(getStringFromWasm0(arg0, arg1));\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_in = function (arg0, arg1) {\r\n    const ret = getObject(arg0) in getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_array = function (arg0) {\r\n    const ret = Array.isArray(getObject(arg0));\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_bigint = function (arg0) {\r\n    const ret = typeof getObject(arg0) === \"bigint\";\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_falsy = function (arg0) {\r\n    const ret = !getObject(arg0);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_function = function (arg0) {\r\n    const ret = typeof getObject(arg0) === \"function\";\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_null = function (arg0) {\r\n    const ret = getObject(arg0) === null;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_object = function (arg0) {\r\n    const val = getObject(arg0);\r\n    const ret = typeof val === \"object\" && val !== null;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_string = function (arg0) {\r\n    const ret = typeof getObject(arg0) === \"string\";\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_is_undefined = function (arg0) {\r\n    const ret = getObject(arg0) === undefined;\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_jsval_eq = function (arg0, arg1) {\r\n    const ret = getObject(arg0) === getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_jsval_loose_eq = function (arg0, arg1) {\r\n    const ret = getObject(arg0) == getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_lt = function (arg0, arg1) {\r\n    const ret = getObject(arg0) < getObject(arg1);\r\n    return ret;\r\n  };\r\n  imports.wbg.__wbindgen_memory = function () {\r\n    const ret = wasm.memory;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_neg = function (arg0) {\r\n    const ret = -getObject(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_number_get = function (arg0, arg1) {\r\n    const obj = getObject(arg1);\r\n    const ret = typeof obj === \"number\" ? obj : undefined;\r\n    getDataViewMemory0().setFloat64(\r\n      arg0 + 8 * 1,\r\n      isLikeNone(ret) ? 0 : ret,\r\n      true,\r\n    );\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, !isLikeNone(ret), true);\r\n  };\r\n  imports.wbg.__wbindgen_number_new = function (arg0) {\r\n    const ret = arg0;\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_object_clone_ref = function (arg0) {\r\n    const ret = getObject(arg0);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_object_drop_ref = function (arg0) {\r\n    takeObject(arg0);\r\n  };\r\n  imports.wbg.__wbindgen_string_get = function (arg0, arg1) {\r\n    const obj = getObject(arg1);\r\n    const ret = typeof obj === \"string\" ? obj : undefined;\r\n    var ptr1 = isLikeNone(ret)\r\n      ? 0\r\n      : passStringToWasm0(\r\n          ret,\r\n          wasm.__wbindgen_export_1,\r\n          wasm.__wbindgen_export_2,\r\n        );\r\n    var len1 = WASM_VECTOR_LEN;\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 1, len1, true);\r\n    getDataViewMemory0().setInt32(arg0 + 4 * 0, ptr1, true);\r\n  };\r\n  imports.wbg.__wbindgen_string_new = function (arg0, arg1) {\r\n    const ret = getStringFromWasm0(arg0, arg1);\r\n    return addHeapObject(ret);\r\n  };\r\n  imports.wbg.__wbindgen_throw = function (arg0, arg1) {\r\n    throw new Error(getStringFromWasm0(arg0, arg1));\r\n  };\r\n  imports.wbg.__wbindgen_try_into_number = function (arg0) {\r\n    let result;\r\n    try {\r\n      result = +getObject(arg0);\r\n    } catch (e) {\r\n      result = e;\r\n    }\r\n    const ret = result;\r\n    return addHeapObject(ret);\r\n  };\r\n\r\n  return imports;\r\n}\r\n\r\nfunction __wbg_init_memory(imports, memory) {}\r\n\r\nfunction __wbg_finalize_init(instance, module) {\r\n  wasm = instance.exports;\r\n  __wbg_init.__wbindgen_wasm_module = module;\r\n  cachedDataViewMemory0 = null;\r\n  cachedUint8ArrayMemory0 = null;\r\n\r\n  return wasm;\r\n}\r\n\r\nfunction initSync(module) {\r\n  if (wasm !== undefined) return wasm;\r\n\r\n  if (typeof module !== \"undefined\") {\r\n    if (Object.getPrototypeOf(module) === Object.prototype) {\r\n      ({ module } = module);\r\n    } else {\r\n      console.warn(\r\n        \"using deprecated parameters for `initSync()`; pass a single object instead\",\r\n      );\r\n    }\r\n  }\r\n\r\n  const imports = __wbg_get_imports();\r\n\r\n  __wbg_init_memory(imports);\r\n\r\n  if (!(module instanceof WebAssembly.Module)) {\r\n    module = new WebAssembly.Module(module);\r\n  }\r\n\r\n  const instance = new WebAssembly.Instance(module, imports);\r\n\r\n  return __wbg_finalize_init(instance, module);\r\n}\r\n\r\nasync function __wbg_init(module_or_path) {\r\n  if (wasm !== undefined) return wasm;\r\n\r\n  if (typeof module_or_path !== \"undefined\") {\r\n    if (Object.getPrototypeOf(module_or_path) === Object.prototype) {\r\n      ({ module_or_path } = module_or_path);\r\n    } else {\r\n      console.warn(\r\n        \"using deprecated parameters for the initialization function; pass a single object instead\",\r\n      );\r\n    }\r\n  }\r\n\r\n  if (typeof module_or_path === \"undefined\") {\r\n    module_or_path = new URL(\"kaspa_bg.wasm\", import.meta.url);\r\n  }\r\n  const imports = __wbg_get_imports();\r\n\r\n  if (\r\n    typeof module_or_path === \"string\" ||\r\n    (typeof Request === \"function\" && module_or_path instanceof Request) ||\r\n    (typeof URL === \"function\" && module_or_path instanceof URL)\r\n  ) {\r\n    module_or_path = fetch(module_or_path);\r\n  }\r\n\r\n  __wbg_init_memory(imports);\r\n\r\n  const { instance, module } = await __wbg_load(await module_or_path, imports);\r\n\r\n  return __wbg_finalize_init(instance, module);\r\n}\r\n\r\nexport { initSync };\r\nexport default __wbg_init;\r\n", "let _enabled = true;\r\nconst _modules = {}; // e.g. { \"transport\": true, \"transport.txBuilder\": false }\r\n\r\nexport const LogModule = Object.freeze({\r\n  core: Object.freeze({\r\n    root: \"core\",\r\n    eventEmitter: \"core.eventEmitter\",\r\n  }),\r\n  transport: Object.freeze({\r\n    root: \"transport\",\r\n    heartbeat: \"transport.heartbeat\",\r\n    kaspaClient: \"transport.kaspaClient\",\r\n    rpcRunner: \"transport.rpcRunner\",\r\n    transportFacade: \"transport.transportFacade\",\r\n    txBuilder: \"transport.txBuilder\",\r\n    utxoManager: \"transport.utxoManager\",\r\n    utxoOperations: \"transport.utxoOperations\",\r\n  }),\r\n  intelligence: Object.freeze({\r\n    root: \"intelligence\",\r\n    dagWalk: \"intelligence.dagWalk\",\r\n    indexer: \"intelligence.indexer\",\r\n    intelligenceFacade: \"intelligence.intelligenceFacade\",\r\n    scanner: \"intelligence.scanner\",\r\n  }),\r\n  identity: Object.freeze({\r\n    root: \"identity\",\r\n    identityFacade: \"identity.identityFacade\",\r\n    storage: \"identity.storage\",\r\n    walletService: \"identity.walletService\",\r\n  }),\r\n  crypto: Object.freeze({\r\n    root: \"crypto\",\r\n    cryptoFacade: \"crypto.cryptoFacade\",\r\n    dhEncryption: \"crypto.dhEncryption\",\r\n    encryption: \"crypto.encryption\",\r\n  }),\r\n  vrf: Object.freeze({\r\n    root: \"vrf\",\r\n    vrfFacade: \"vrf.vrfFacade\",\r\n    core: Object.freeze({\r\n      root: \"vrf.core\",\r\n      config: \"vrf.core.config\",\r\n      constants: \"vrf.core.constants\",\r\n      crypto: \"vrf.core.crypto\",\r\n      errors: \"vrf.core.errors\",\r\n      extractor: \"vrf.core.extractor\",\r\n      folding: \"vrf.core.folding\",\r\n      logger: \"vrf.core.logger\",\r\n      nist: \"vrf.core.nist\",\r\n      nistVerifier: \"vrf.core.nistVerifier\",\r\n      fetcher: Object.freeze({\r\n        root: \"vrf.core.fetcher\",\r\n        bitcoin: \"vrf.core.fetcher.bitcoin\",\r\n        cache: \"vrf.core.fetcher.cache\",\r\n        index: \"vrf.core.fetcher.index\",\r\n        kaspa: \"vrf.core.fetcher.kaspa\",\r\n        qrngFetcher: \"vrf.core.fetcher.qrngFetcher\",\r\n        qrng: \"vrf.core.fetcher.qrng\",\r\n        utilities: \"vrf.core.fetcher.utilities\",\r\n      }),\r\n      logs: Object.freeze({\r\n        root: \"vrf.core.logs\",\r\n        logger: \"vrf.core.logs.logger\",\r\n      }),\r\n      models: Object.freeze({\r\n        root: \"vrf.core.models\",\r\n        block: \"vrf.core.models.block\",\r\n        vrfProof: \"vrf.core.models.vrfProof\",\r\n      }),\r\n      tests: Object.freeze({\r\n        root: \"vrf.core.tests\",\r\n        basic: \"vrf.core.tests.basic\",\r\n        binaryMatrixRank: \"vrf.core.tests.binaryMatrixRank\",\r\n        gamma: \"vrf.core.tests.gamma\",\r\n        linearComplexity: \"vrf.core.tests.linearComplexity\",\r\n        maurerUniversal: \"vrf.core.tests.maurerUniversal\",\r\n        randomExcursions: \"vrf.core.tests.randomExcursions\",\r\n        spectralDft: \"vrf.core.tests.spectralDft\",\r\n        templateMatching: \"vrf.core.tests.templateMatching\",\r\n        utilities: \"vrf.core.tests.utilities\",\r\n      }),\r\n      unitTests: Object.freeze({\r\n        root: \"vrf.core.unitTests\",\r\n        bitcoinUnitTest: \"vrf.core.unitTests.bitcoinUnitTest\",\r\n        cachePersistUnitTest: \"vrf.core.unitTests.cachePersistUnitTest\",\r\n        foldingUnitTest: \"vrf.core.unitTests.foldingUnitTest\",\r\n        kaspaUnitTest: \"vrf.core.unitTests.kaspaUnitTest\",\r\n        qrngUnitTest: \"vrf.core.unitTests.qrngUnitTest\",\r\n        testDashboard: \"vrf.core.unitTests.testDashboard\",\r\n        vrfTests: \"vrf.core.unitTests.vrfTests\",\r\n      }),\r\n    }),\r\n  }),\r\n  kktp: Object.freeze({\r\n    root: \"kktp\",\r\n    kkGameEngine: \"kktp.kkGameEngine\",\r\n    kaspaPortal: \"kktp.kaspaPortal\",\r\n  }),\r\n  protocol: Object.freeze({\r\n    root: \"protocol\",\r\n    sessions: Object.freeze({\r\n      root: \"protocol.sessions\",\r\n      sessionFacade: \"protocol.sessions.sessionFacade\",\r\n      sessionVault: \"protocol.sessions.sessionVault\",\r\n      keyDeriver: \"protocol.sessions.keyDeriver\",\r\n    }),\r\n  }),\r\n  lobby: Object.freeze({\r\n    root: \"lobby\",\r\n    lobbyManager: \"lobby.lobbyManager\",\r\n    lobbyMessageHandler: \"lobby.lobbyMessageHandler\",\r\n    index: \"lobby.index\",\r\n    lobbyCodec: \"lobby.lobbyCodec\",\r\n    lobbyFacade: \"lobby.lobbyFacade\",\r\n    lobbySchemas: \"lobby.lobbySchemas\",\r\n    parts: Object.freeze({\r\n      root: \"lobby.parts\",\r\n      index: \"lobby.parts.index\",\r\n      lobbyContext: \"lobby.parts.lobbyContext\",\r\n      lobbyDiscovery: \"lobby.parts.lobbyDiscovery\",\r\n      lobbyDmBuffer: \"lobby.parts.lobbyDmBuffer\",\r\n      lobbyJoins: \"lobby.parts.lobbyJoins\",\r\n      lobbyKeys: \"lobby.parts.lobbyKeys\",\r\n      lobbyMessaging: \"lobby.parts.lobbyMessaging\",\r\n      lobbyPersistence: \"lobby.parts.lobbyPersistence\",\r\n      lobbyRoster: \"lobby.parts.lobbyRoster\",\r\n      lobbyRouting: \"lobby.parts.lobbyRouting\",\r\n      lobbySessionEnd: \"lobby.parts.lobbySessionEnd\",\r\n      lobbySubscriptions: \"lobby.parts.lobbySubscriptions\",\r\n      lobbyUtils: \"lobby.parts.lobbyUtils\",\r\n      lobbyUtxo: \"lobby.parts.lobbyUtxo\",\r\n    }),\r\n  }),\r\n  anchor: Object.freeze({\r\n    root: \"anchor\",\r\n    anchorFinal: \"anchor.anchorFinal\",\r\n    anchorGenesis: \"anchor.anchorGenesis\",\r\n    anchorHeartbeat: \"anchor.anchorHeartbeat\",\r\n    auditTrail: \"anchor.auditTrail\",\r\n    binaryPacking: \"anchor.binaryPacking\",\r\n    hashing: \"anchor.hashing\",\r\n    kaspaAnchorFacade: \"anchor.kaspaAnchorFacade\",\r\n    moveProcessor: \"anchor.moveProcessor\",\r\n    stateSerializer: \"anchor.stateSerializer\",\r\n    utxoManager: \"anchor.utxoManager\",\r\n    utxoPool: \"anchor.utxoPool\",\r\n    vrfOperations: \"anchor.vrfOperations\",\r\n  }),\r\n});\r\n\r\nexport const Logger = {\r\n  setEnabled: (val) => {\r\n    _enabled = !!val;\r\n  },\r\n\r\n  resetModules: () => {\r\n    for (const key of Object.keys(_modules)) {\r\n      delete _modules[key];\r\n    }\r\n  },\r\n\r\n  setModuleEnabled: (name, enabled) => {\r\n    _modules[name] = !!enabled;\r\n  },\r\n\r\n  isModuleEnabled: (name) => {\r\n    if (!name) return _enabled;\r\n    if (name in _modules) return _modules[name];\r\n    const parts = String(name).split(\".\");\r\n    while (parts.length > 1) {\r\n      parts.pop();\r\n      const parent = parts.join(\".\");\r\n      if (parent in _modules) return _modules[parent];\r\n    }\r\n    return _enabled;\r\n  },\r\n\r\n  enableModule: (name) => {\r\n    Logger.setModuleEnabled(name, true);\r\n  },\r\n\r\n  disableModule: (name) => {\r\n    Logger.setModuleEnabled(name, false);\r\n  },\r\n\r\n  enableTransportLogs: () => Logger.enableModule(LogModule.transport.root),\r\n  disableTransportLogs: () => Logger.disableModule(LogModule.transport.root),\r\n  enableIntelligenceLogs: () => Logger.enableModule(LogModule.intelligence.root),\r\n  disableIntelligenceLogs: () => Logger.disableModule(LogModule.intelligence.root),\r\n  enableIdentityLogs: () => Logger.enableModule(LogModule.identity.root),\r\n  disableIdentityLogs: () => Logger.disableModule(LogModule.identity.root),\r\n  enableCryptoLogs: () => Logger.enableModule(LogModule.crypto.root),\r\n  disableCryptoLogs: () => Logger.disableModule(LogModule.crypto.root),\r\n  enableVrfLogs: () => Logger.enableModule(LogModule.vrf.root),\r\n  disableVrfLogs: () => Logger.disableModule(LogModule.vrf.root),\r\n  enableKktpLogs: () => Logger.enableModule(LogModule.kktp.root),\r\n  disableKktpLogs: () => Logger.disableModule(LogModule.kktp.root),\r\n  enableLobbyLogs: () => Logger.enableModule(LogModule.lobby.root),\r\n  disableLobbyLogs: () => Logger.disableModule(LogModule.lobby.root),\r\n  enableAnchorLogs: () => Logger.enableModule(LogModule.anchor.root),\r\n  disableAnchorLogs: () => Logger.disableModule(LogModule.anchor.root),\r\n\r\n  create: (name = 'KKTP') => {\r\n    const prefix = (level) => `[${level}] ${name}:`;\r\n\r\n    return {\r\n      log:   (...args) => { if (Logger.isModuleEnabled(name)) console.log(prefix('LOG'), ...args); },\r\n      debug: (...args) => { if (Logger.isModuleEnabled(name)) console.debug(prefix('DEBUG'), ...args); },\r\n      info:  (...args) => { if (Logger.isModuleEnabled(name)) console.info(prefix('INFO'), ...args); },\r\n      warn:  (...args) => { if (Logger.isModuleEnabled(name)) console.warn(prefix('WARN'), ...args); },\r\n      error: (...args) => { if (Logger.isModuleEnabled(name)) console.error(prefix('ERROR'), ...args); },\r\n      trace: (...args) => { if (Logger.isModuleEnabled(name)) console.trace(prefix('TRACE'), ...args); }\r\n    };\r\n  }\r\n};\r\n\r\nexport default Logger;\r\n", "// kaspa_client.js\r\nimport {\r\n  RpcClient,\r\n  Resolver,\r\n  ConnectStrategy,\r\n} from \"../kas-wasm/kaspa.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.transport.kaspaClient);\r\n\r\nlet client = null;\r\nlet currentRpcUrl = null;\r\nlet currentNetworkId = null;\r\n\r\nexport async function connect({\r\n  rpcUrl,\r\n  networkId = \"testnet-10\",\r\n  onDisconnect,\r\n} = {}) {\r\n  // 1. Shut down existing client\r\n  if (client) {\r\n    try {\r\n      await client.disconnect();\r\n      client.free(); // Many Rust-based WASM modules need this to release the \"Heap\"\r\n      client = null; // Garbage Collect the JS reference\r\n    } catch (e) {\r\n      log.warn(\"Cleanup error:\", e);\r\n    }\r\n    client = null;\r\n  }\r\n\r\n  // Store connection details for reconnect\r\n  currentRpcUrl = rpcUrl;\r\n  currentNetworkId = networkId;\r\n\r\n  // 2. Set options\r\n  const options = {\r\n    networkId: networkId,\r\n    resolver: rpcUrl ? undefined : new Resolver(),\r\n    url: rpcUrl || undefined,\r\n  };\r\n\r\n  // 3. Create a single client and let the SDK handle node resolution\r\n  client = new RpcClient(options);\r\n\r\n  const connectOptions = {\r\n    blockAsyncConnect: true,         // block until actually connected\r\n    strategy: ConnectStrategy.Retry, // try nodes, don't persist-loop forever\r\n    retryInterval: 1000,\r\n    timeoutDuration: 5000,           // give up after 5s\r\n  };\r\n\r\n  try {\r\n    await client.connect(connectOptions);\r\n  } catch (err) {\r\n    log.warn(\"Connect error (blockAsync):\", err);\r\n  }\r\n\r\n  // If blockAsync didn't yield a connection, poll briefly as a fallback\r\n  if (!client.isConnected) {\r\n    const pollEnd = Date.now() + 5000;\r\n    while (!client.isConnected && Date.now() < pollEnd) {\r\n      await new Promise((r) => setTimeout(r, 200));\r\n    }\r\n  }\r\n\r\n  if (!client.isConnected) {\r\n    log.error(\"Could not connect to any Kaspa node within timeout\");\r\n    try { await client.disconnect(); } catch (_) { /* */ }\r\n    try { client.free(); } catch (_) { /* */ }\r\n    client = null;\r\n    throw new Error(\"Kaspa node connection timeout\");\r\n  }\r\n\r\n  // Subscribe to disconnect event\r\n  if (client && typeof client.on === \"function\") {\r\n    client.on(\"disconnect\", async () => {\r\n      log.warn(\"Disconnected from Kaspa node\");\r\n      if (typeof onDisconnect === \"function\") {\r\n        await onDisconnect();\r\n      }\r\n    });\r\n  }\r\n\r\n  if (rpcUrl) {\r\n    log.log(\r\n      `Connected to Kaspa node at ${rpcUrl} on network ${currentNetworkId}`,\r\n    );\r\n  } else {\r\n    log.log(\r\n      `Connected to public Kaspa node via resolver on network ${currentNetworkId}`,\r\n    );\r\n  }\r\n\r\n  return client;\r\n}\r\n", "import * as secp from \"https://esm.sh/@noble/secp256k1\";\r\nimport {\r\n  signMessage,\r\n  verifyMessage,\r\n  XPrv,\r\n  PrivateKeyGenerator,\r\n  PublicKeyGenerator,\r\n  Address,\r\n  NetworkType,\r\n} from \"../kas-wasm/kaspa.js\";\r\n\r\nconst MAX_PAYLOAD_BYTES = 32 * 1024; // 32KB\r\nconst NETWORK = \"testnet\";\r\n\r\n/** * Validate and normalize a Kaspa address.\r\n * @param {string|Address} address - The address to validate.\r\n * @returns {Address} The validated Address object.\r\n * @throws {Error} If the address is invalid.\r\n */\r\nexport function validateAddress(address) {\r\n  if (address == null || address === \"\") {\r\n    throw new Error(\"Invalid address: \" + address);\r\n  }\r\n  if (typeof address === \"string\") {\r\n    try {\r\n      address = new Address(address);\r\n      return address;\r\n    } catch (err) {\r\n      throw new Error(\"Invalid address format: \" + address);\r\n    }\r\n  }\r\n  return address;\r\n}\r\n\r\n/**\r\n * Validate a payload string for Kaspa transaction (must be string and <= 32KB).\r\n * @param {string} payload - The payload string to validate.\r\n * @returns {boolean} True if valid, false otherwise.\r\n */\r\nexport function validatePayload(payload) {\r\n  if (typeof payload !== \"string\") return false;\r\n  if (payload.length > MAX_PAYLOAD_BYTES * 2) return false;\r\n  return true;\r\n}\r\n\r\n/**\r\n * Convert optional payload string to hex (or accept already-hex).\r\n * Returns undefined when no payload.\r\n */\r\nexport function payloadToHex(payload) {\r\n  if (!payload) return undefined;\r\n\r\n  let str = String(payload).trim();\r\n\r\n  // ADD THIS: Handle the 0x prefix if the dev sends it\r\n  if (str.startsWith(\"0x\")) str = str.slice(2);\r\n\r\n  // If already hex and even length, keep it\r\n  if (/^[0-9a-fA-F]*$/.test(str) && str.length % 2 === 0)\r\n    return str.toLowerCase();\r\n\r\n  // Otherwise treat as UTF-8 text\r\n  return stringToHex(str).toLowerCase();\r\n}\r\n\r\n/**\r\n * Convert a JS string to a hex-encoded byte string (UTF-8).\r\n * @param {string} str - The string to encode.\r\n * @returns {string} Hex-encoded string.\r\n */\r\nexport function stringToHex(str) {\r\n  // Convert a JS string to a hex-encoded byte string (UTF-8)\r\n  return Array.from(new TextEncoder().encode(str))\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n\r\n/**\r\n * Convert a hex-encoded string (UTF-8) to a JS string.\r\n * @param {string} hex - The hex string to decode.\r\n * @returns {string} Decoded string.\r\n */\r\nexport function hexToString(hex) {\r\n  // Remove optional \"0x\" prefix\r\n  if (hex.startsWith(\"0x\")) hex = hex.slice(2);\r\n\r\n  // Convert hex \u2192 bytes \u2192 UTF\u20118 string\r\n  const bytes = new Uint8Array(\r\n    hex.match(/.{1,2}/g).map((byte) => parseInt(byte, 16)),\r\n  );\r\n\r\n  return new TextDecoder().decode(bytes);\r\n}\r\n\r\n/**\r\n * Convert a Uint8Array or array of bytes to a hex string.\r\n * @param {Uint8Array|Array<number>} bytes - The bytes to convert.\r\n * @returns {string} Hex string.\r\n */\r\nexport function bytesToHex(bytes) {\r\n  return Array.from(bytes)\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n\r\n/**\r\n * Convert a hex string to a Uint8Array of bytes.\r\n * @param {string} hex - The hex string to convert.\r\n * @returns {Uint8Array} Byte array.\r\n */\r\nexport function hexToBytes(hex) {\r\n  if (hex.startsWith(\"0x\")) hex = hex.slice(2);\r\n  if (hex.length !== 64 && hex.length !== 66) {\r\n    throw new Error(\r\n      \"Key must be 32 bytes (64 hex chars) or compressed secp256k1 public key (66 hex chars)\",\r\n    );\r\n  }\r\n  const arr = new Uint8Array(hex.length / 2);\r\n  for (let i = 0; i < arr.length; i++) {\r\n    arr[i] = parseInt(hex.substr(i * 2, 2), 16);\r\n  }\r\n  return arr;\r\n}\r\n\r\n/**\r\n * Convert a hex string to a UTF-8 string.\r\n * @param {string} hex\r\n * @returns {string}\r\n */\r\nexport function hexToUtf8(hex) {\r\n  if (typeof hex !== \"string\" || hex.length === 0) return \"\";\r\n  if (hex.length % 2 !== 0) throw new Error(\"Invalid hex string length\");\r\n  const bytes = new Uint8Array(hex.length / 2);\r\n  for (let i = 0; i < hex.length; i += 2) {\r\n    bytes[i / 2] = parseInt(hex.substring(i, i + 2), 16);\r\n  }\r\n  return new TextDecoder().decode(bytes);\r\n}\r\n\r\n/** Dehydrate a transaction object into a lightweight summary.\r\n * @param {Object} tx - The transaction object.\r\n * @param {Object} block - The block containing the transaction.\r\n * @return {Object} Dehydrated transaction summary.\r\n */\r\nexport function dehydrateTx({ tx, block, decodedPayload }) {\r\n  if (!tx) {\r\n    return null;\r\n  }\r\n  const txData = {\r\n    txid: tx.verboseData.transactionId,\r\n    timestamp: tx.verboseData.blockTime,\r\n    payload: tx.payload,\r\n  };\r\n  if (decodedPayload) {\r\n    txData.decodedPayload = decodedPayload;\r\n  }\r\n  if (block) {\r\n    txData.blockHash = block.header.hash;\r\n    txData.blueScore = block.header.blueScore;\r\n    txData.blockDaaScore = block.header.daaScore;\r\n  }\r\n  return txData;\r\n}\r\n\r\n/** * Dehydrate a block object into a lightweight summary.\r\n * Ensures UI fields like hash, timestamp, and txCount are preserved\r\n * without carrying the massive transaction payload.\r\n * * @param {Object} block - The raw block object from RPC or Indexer.\r\n * @return {Object|null} Dehydrated block summary.\r\n */\r\nexport function dehydrateBlock(block) {\r\n  if (!block) return null;\r\n\r\n  // Use the header if it exists, otherwise the root\r\n  const h = block.header || block;\r\n\r\n  // OPTIMIZATION: Extract parents only if they exist at Level 0\r\n  // Avoiding Array.from if possible saves allocation cycles\r\n  // causes higher cpu usage\r\n  /*const rawParents = h.parentsByLevel?.[0] || h.parents;\r\n  const parentHashes = rawParents\r\n    ? (Array.isArray(rawParents) ? rawParents : Array.from(rawParents)).map(\r\n        (p) => p.toString(),\r\n      )\r\n    : [];\r\n  */\r\n\r\n  // Create a clean, flat object with NO references to the original WASM block\r\n  const result = {\r\n    hash: (h.hash || \"\").toString(),\r\n    timestamp: Number(h.timestamp || 0),\r\n    blueScore: Number(h.blueScore || 0),\r\n    daaScore: Number(h.daaScore || 0),\r\n    parents: [],\r\n    txCount: Number(\r\n      block.txCount ?? h.transactionCount ?? (block.transactions?.length || 0),\r\n    ),\r\n    isChainBlock: !!(block.isChainBlock || block.verboseData?.isChainBlock),\r\n  };\r\n\r\n  // HELP THE GARBAGE COLLECTOR:\r\n  // We return the clean object. The original 'block' goes out of scope.\r\n  return result;\r\n}\r\n\r\n/**\r\n * Get the compressed public key bytes from a private key hex string.\r\n * @param {string} prvKeyHex - Private key as hex string.\r\n * @returns {Uint8Array} Compressed public key bytes.\r\n */\r\nexport function getPublicKeyBytes(prvKeyHex) {\r\n  const prvKeyBytes = hexToBytes(prvKeyHex);\r\n  const pubKeyBytes = secp.getPublicKey(prvKeyBytes, true); // compressed\r\n  return pubKeyBytes;\r\n}\r\n\r\n/**\r\n * Get the compressed public key as a hex string from a private key hex string.\r\n * @param {string} prvKeyHex - Private key as hex string.\r\n * @returns {string} Compressed public key as hex string.\r\n */\r\nexport function getPublicKeyHex(prvKeyHex) {\r\n  const pubKeyBytes = getPublicKeyBytes(prvKeyHex);\r\n  return bytesToHex(pubKeyBytes);\r\n}\r\n\r\n/**\r\n * Get the private key bytes from an XPrv instance or hex string.\r\n * @param {XPrv|string} xPrv - XPrv instance or hex string.\r\n * @returns {Uint8Array} Private key bytes.\r\n */\r\nexport function getPrivateKeyBytes(xPrv) {\r\n  if (xPrv instanceof XPrv) {\r\n    // xPrv.privateKey is a hex string\r\n    return hexToBytes(xPrv.privateKey);\r\n  }\r\n  if (typeof xPrv === \"string\") {\r\n    return hexToBytes(xPrv);\r\n  }\r\n  throw new TypeError(\r\n    \"getPrivateKeyBytes requires an XPrv instance or hex string\",\r\n  );\r\n}\r\n\r\n/**\r\n * Get the private key as a hex string from an XPrv, hex string, or Uint8Array.\r\n * @param {XPrv|string|Uint8Array} xPrv - XPrv, hex string, or byte array.\r\n * @returns {string} Private key as hex string.\r\n */\r\nexport function getPrivateKeyHex(xPrv) {\r\n  if (xPrv instanceof XPrv) {\r\n    return xPrv.privateKey;\r\n  }\r\n  if (typeof xPrv === \"string\") {\r\n    return xPrv;\r\n  }\r\n  if (typeof xPrv === \"Uint8Array\") {\r\n    return bytesToHex(xPrv);\r\n  }\r\n  throw new TypeError(\r\n    \"getPrivateKeyHex requires an XPrv instance, hex string, or Uint8Array\",\r\n  );\r\n}\r\n\r\n/**\r\n * Derive a receiving child key pair and address from an XPrv hex.\r\n * @param {Object} params\r\n * @param {string} params.xprvHex - Extended private key as hex string.\r\n * @param {string} [params.network=NETWORK] - Network name or ID.\r\n * @param {bigint} [params.accountIndex=0n] - Account index (BigInt).\r\n * @param {number} [params.index=0] - Child index.\r\n * @returns {Promise<{privateKey: string, publicKey: string, address: string}>} Key pair and address.\r\n */\r\nexport async function deriveReceivingChildKeyPair({\r\n  xprvHex,\r\n  network = NETWORK,\r\n  accountIndex = 0n,\r\n  index = 0,\r\n  branch = 0,\r\n}) {\r\n  if (typeof index !== \"number\" || index < 0) {\r\n    throw new Error(\"Index must be a non-negative integer\");\r\n  }\r\n\r\n  // Generate private key\r\n  const gen = new PrivateKeyGenerator(xprvHex, false, accountIndex);\r\n  const privKey = gen.receiveKey(index);\r\n\r\n  // Generate public key\r\n  const pubKey = privKey.toPublicKey();\r\n\r\n  // Generate address\r\n  const pubGen = PublicKeyGenerator.fromMasterXPrv(\r\n    xprvHex,\r\n    false,\r\n    accountIndex,\r\n  );\r\n  const addr = pubGen.receiveAddressAsString(network, index);\r\n\r\n  return {\r\n    privateKey: privKey.toString(),\r\n    publicKey: pubKey.toString(),\r\n    address: addr,\r\n  };\r\n}\r\n\r\n/**\r\n * Manually derive keys using raw XPrv derivation.\r\n */\r\nexport async function deriveChildKeyPair({\r\n  xprvHex,\r\n  network = \"testnet-10\",\r\n  accountIndex = 0n,\r\n  branch = 0,\r\n  index = 0,\r\n}) {\r\n  const masterXPrv = XPrv.fromXPrv(xprvHex);\r\n\r\n  // Chain the derivation and free the intermediate objects\r\n  const p = masterXPrv.deriveChild(44, true);\r\n  const c = p.deriveChild(111111, true);\r\n  const a = c.deriveChild(Number(accountIndex), true);\r\n  const b = a.deriveChild(branch, false);\r\n  const leaf = b.deriveChild(index, false);\r\n\r\n  const privKey = leaf.toPrivateKey();\r\n  const pubKey = privKey.toPublicKey();\r\n\r\n  const networkType = network.includes(\"mainnet\")\r\n    ? NetworkType.Mainnet\r\n    : NetworkType.Testnet;\r\n  const address = privKey.toAddress(networkType).toString();\r\n\r\n  const result = {\r\n    privateKey: privKey.toString(),\r\n    publicKey: pubKey.toString(),\r\n    address: address,\r\n  };\r\n\r\n  // CLEANUP: Essential for WASM\r\n  [masterXPrv, p, c, a, b, leaf].forEach((obj) => obj.free());\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Sign a message with a private key hex string.\r\n * @param {string} privateKeyHex - Private key as hex string.\r\n * @param {string} message - Message to sign.\r\n * @returns {Promise<string>} Signature as hex string.\r\n */\r\nexport async function signMessageWithPrivateKeyHex(privateKeyHex, message) {\r\n  const signature = await signMessage({ privateKey: privateKeyHex, message });\r\n  return signature;\r\n}\r\n\r\n/**\r\n * Verify a message signature with a public key hex string.\r\n * @param {string} publicKeyHex - Public key as hex string.\r\n * @param {string} message - Message to verify.\r\n * @param {string} signatureHex - Signature as hex string.\r\n * @returns {Promise<boolean>} True if valid, false otherwise.\r\n */\r\nexport async function verifyMessageWithPublicKeyHex(\r\n  publicKeyHex,\r\n  message,\r\n  signatureHex,\r\n) {\r\n  const isValid = await verifyMessage({\r\n    publicKey: publicKeyHex,\r\n    message,\r\n    signature: signatureHex,\r\n  });\r\n  return isValid;\r\n}\r\n", "import { kaspaToSompi } from \"../kas-wasm/kaspa.js\";\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Constants\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\nconst SOMPI_PER_KAS = 100000000n;\r\nconst DUST_THRESHOLD = 100000n; // 0.001 KAS\r\nconst SMALL_THRESHOLD = 100000000n; // 1 KAS\r\nconst MEDIUM_THRESHOLD = 10000000000n; // 100 KAS\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Normalization Helpers\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Normalize UTXO result to a flat array of entries.\r\n * Wallet RPC commonly returns either:\r\n *  - Array<entry>\r\n *  - { entries: Array<entry> }\r\n */\r\nexport function normalizeUtxoEntries(utxoResult) {\r\n  if (Array.isArray(utxoResult)) return utxoResult;\r\n  if (Array.isArray(utxoResult?.entries)) return utxoResult.entries;\r\n  if (Array.isArray(utxoResult?.utxoEntries)) return utxoResult.utxoEntries;\r\n  return [];\r\n}\r\n\r\n/**\r\n * Extract amount in sompi from various UTXO entry formats.\r\n * Handles nested 'entry' wrapper from RPC responses AND WASM UtxoEntryReference objects.\r\n *\r\n * WASM objects use getter-based property access which may throw if accessed incorrectly.\r\n * This function uses try/catch to safely extract amounts from all known formats.\r\n *\r\n * @param {Object} entry - UTXO entry object (RPC response or WASM UtxoEntryReference)\r\n * @returns {bigint} Amount in sompi\r\n */\r\nexport function entryAmountSompi(entry) {\r\n  if (!entry) return 0n;\r\n\r\n  // Try direct access patterns with try/catch for WASM getter safety\r\n  const tryGetAmount = (obj) => {\r\n    if (!obj) return null;\r\n    try {\r\n      // Direct amount property (most common)\r\n      if (typeof obj.amount === \"bigint\") return obj.amount;\r\n      if (typeof obj.amount === \"number\") return BigInt(Math.trunc(obj.amount));\r\n      if (typeof obj.amount === \"string\" && obj.amount.trim() !== \"\") return BigInt(obj.amount);\r\n    } catch { /* WASM getter may throw */ }\r\n    return null;\r\n  };\r\n\r\n  // 1. Try the entry directly (e.g., { amount: 100n })\r\n  let result = tryGetAmount(entry);\r\n  if (result !== null) return result;\r\n\r\n  // 2. Handle nested 'entry' wrapper from RPC (e.g., { entry: { amount: 100n } })\r\n  try {\r\n    if (entry.entry) {\r\n      result = tryGetAmount(entry.entry);\r\n      if (result !== null) return result;\r\n    }\r\n  } catch { /* WASM getter may throw */ }\r\n\r\n  // 3. Handle WASM UtxoEntryReference with .utxoEntry.amount\r\n  try {\r\n    if (entry.utxoEntry) {\r\n      result = tryGetAmount(entry.utxoEntry);\r\n      if (result !== null) return result;\r\n    }\r\n  } catch { /* WASM getter may throw */ }\r\n\r\n  // 4. Handle nested entry.utxoEntry (from RPC wrapper)\r\n  try {\r\n    if (entry.entry?.utxoEntry) {\r\n      result = tryGetAmount(entry.entry.utxoEntry);\r\n      if (result !== null) return result;\r\n    }\r\n  } catch { /* WASM getter may throw */ }\r\n\r\n  // 5. Handle .utxo.amount pattern\r\n  try {\r\n    if (entry.utxo) {\r\n      result = tryGetAmount(entry.utxo);\r\n      if (result !== null) return result;\r\n    }\r\n  } catch { /* WASM getter may throw */ }\r\n\r\n  // 6. Handle .output.amount pattern\r\n  try {\r\n    if (entry.output) {\r\n      result = tryGetAmount(entry.output);\r\n      if (result !== null) return result;\r\n    }\r\n  } catch { /* WASM getter may throw */ }\r\n\r\n  return 0n;\r\n}\r\n\r\n/**\r\n * Get the outpoint (txid + index) from a UTXO entry.\r\n * Handles various WASM/RPC formats including nested 'entry' wrapper.\r\n * @param {Object} entry - UTXO entry object\r\n * @returns {{ transactionId: string, index: number }|null}\r\n */\r\nexport function getEntryOutpoint(entry) {\r\n  // Handle nested 'entry' wrapper from RPC (e.g., { entry: { outpoint, ... } })\r\n  const inner = entry?.entry ?? entry;\r\n\r\n  // Various WASM/RPC formats\r\n  const outpoint =\r\n    inner?.outpoint ||\r\n    inner?.utxoEntry?.outpoint ||\r\n    inner?.utxo?.outpoint ||\r\n    null;\r\n\r\n  if (outpoint) {\r\n    return {\r\n      transactionId: outpoint.transactionId || outpoint.txid || outpoint.txId,\r\n      index: outpoint.index ?? outpoint.outputIndex ?? 0,\r\n    };\r\n  }\r\n\r\n  // Flat format\r\n  if (inner?.transactionId || inner?.txid) {\r\n    return {\r\n      transactionId: inner.transactionId || inner.txid || inner.txId,\r\n      index: inner.index ?? inner.outputIndex ?? 0,\r\n    };\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Create a unique key for a UTXO entry (for deduplication and tracking).\r\n * @param {Object} entry - UTXO entry object\r\n * @returns {string}\r\n */\r\nexport function getEntryKey(entry) {\r\n  const outpoint = getEntryOutpoint(entry);\r\n  if (!outpoint) return `unknown_${Math.random().toString(36).slice(2)}`;\r\n  return `${outpoint.transactionId}:${outpoint.index}`;\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// UTXO Fetching\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Fetch UTXOs for an account's receive+change addresses using wallet.rpc.getUtxosByAddresses(addresses).\r\n * @returns {Promise<{ receiveAddress: string, changeAddress: string, entries: Array }>}\r\n */\r\nexport async function getAccountUtxos({\r\n  wallet,\r\n  accountDescriptor,\r\n  logger,\r\n} = {}) {\r\n  if (!wallet) throw new Error(\"getAccountUtxos: wallet is required.\");\r\n  if (!accountDescriptor)\r\n    throw new Error(\"getAccountUtxos: accountDescriptor is required.\");\r\n  if (!wallet.rpc?.getUtxosByAddresses)\r\n    throw new Error(\r\n      \"getAccountUtxos: wallet.rpc.getUtxosByAddresses not available.\",\r\n    );\r\n\r\n  const log = typeof logger === \"function\" ? logger : () => {};\r\n\r\n  const receiveAddress = String(accountDescriptor.receiveAddress || \"\");\r\n  const changeAddress = String(accountDescriptor.changeAddress || \"\");\r\n\r\n  const addresses = [receiveAddress, changeAddress].filter(Boolean);\r\n  if (addresses.length === 0)\r\n    throw new Error(\"No receive/change address available for this account.\");\r\n\r\n  log(`Fetching UTXOs for: ${addresses.join(\", \")}`);\r\n  const utxoResult = await wallet.rpc.getUtxosByAddresses(addresses);\r\n  const entries = normalizeUtxoEntries(utxoResult);\r\n\r\n  return { receiveAddress, changeAddress, entries };\r\n}\r\n\r\n/**\r\n * Fetch UTXOs directly via RPC client for a single address.\r\n * @param {Object} client - Kaspa RPC client\r\n * @param {string} address - Address to fetch UTXOs for\r\n * @returns {Promise<Array>} Array of UTXO entries\r\n */\r\nexport async function getUtxosByAddress(client, address) {\r\n  if (!client?.getUtxosByAddresses) {\r\n    throw new Error(\"getUtxosByAddress: client.getUtxosByAddresses not available.\");\r\n  }\r\n  if (!address) {\r\n    throw new Error(\"getUtxosByAddress: address is required.\");\r\n  }\r\n\r\n  const result = await client.getUtxosByAddresses([address]);\r\n  return normalizeUtxoEntries(result);\r\n}\r\n\r\n/**\r\n * Fetch UTXOs directly via RPC client for multiple addresses.\r\n * Deduplicates entries by outpoint to avoid double-counting.\r\n * @param {Object} client - Kaspa RPC client\r\n * @param {string[]} addresses - Addresses to fetch UTXOs for\r\n * @returns {Promise<Array>} Array of UTXO entries (deduplicated)\r\n */\r\nexport async function getUtxosByAddresses(client, addresses) {\r\n  if (!client?.getUtxosByAddresses) {\r\n    throw new Error(\"getUtxosByAddresses: client.getUtxosByAddresses not available.\");\r\n  }\r\n  if (!Array.isArray(addresses) || addresses.length === 0) {\r\n    throw new Error(\"getUtxosByAddresses: addresses array is required.\");\r\n  }\r\n\r\n  // Filter out empty/null addresses and convert to strings\r\n  const validAddresses = addresses\r\n    .filter(a => a != null && a !== '')\r\n    .map(a => String(a));\r\n\r\n  if (validAddresses.length === 0) {\r\n    return [];\r\n  }\r\n\r\n  const result = await client.getUtxosByAddresses(validAddresses);\r\n  const entries = normalizeUtxoEntries(result);\r\n\r\n  // Deduplicate by outpoint key (same UTXO shouldn't appear twice)\r\n  const seen = new Set();\r\n  const deduplicated = [];\r\n  for (const entry of entries) {\r\n    const key = getEntryKey(entry);\r\n    if (!seen.has(key)) {\r\n      seen.add(key);\r\n      deduplicated.push(entry);\r\n    }\r\n  }\r\n\r\n  return deduplicated;\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// UTXO Selection Strategies\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Largest-first selection: minimizes number of inputs (usually best for mass).\r\n * Note: This does NOT account for fees; use Generator/estimate or try-build loop.\r\n * @param {Array} entries - Array of UTXO entries\r\n * @param {Object} options - Selection options\r\n * @param {bigint} [options.targetSompi=0n] - Target amount to select\r\n * @param {number} [options.maxInputs=50] - Maximum number of inputs\r\n * @returns {{ selected: Array, total: bigint }}\r\n */\r\nexport function selectUtxosLargestFirst(\r\n  entries,\r\n  { targetSompi = 0n, maxInputs = 50 } = {},\r\n) {\r\n  const sorted = [...(entries || [])].sort((a, b) => {\r\n    const aa = entryAmountSompi(a);\r\n    const bb = entryAmountSompi(b);\r\n    return aa === bb ? 0 : aa > bb ? -1 : 1;\r\n  });\r\n\r\n  const selected = [];\r\n  let total = 0n;\r\n\r\n  for (const e of sorted) {\r\n    if (selected.length >= maxInputs) break;\r\n    const amt = entryAmountSompi(e);\r\n    if (amt <= 0n) continue;\r\n    selected.push(e);\r\n    total += amt;\r\n    if (total >= targetSompi) break;\r\n  }\r\n\r\n  return { selected, total };\r\n}\r\n\r\n/**\r\n * Round-robin UTXO selection for parallel transaction engines.\r\n * Assigns UTXOs to engines to avoid UTXO contention during rapid-fire sends.\r\n *\r\n * @param {Array} entries - Array of UTXO entries\r\n * @param {number} engineIndex - The engine index (0-based)\r\n * @param {number} totalEngines - Total number of engines\r\n * @param {bigint} [minAmount=0n] - Minimum UTXO amount to consider\r\n * @returns {{ entry: Object|null, amount: bigint }}\r\n */\r\nexport function selectUtxoForEngine(\r\n  entries,\r\n  engineIndex,\r\n  totalEngines,\r\n  minAmount = 0n,\r\n) {\r\n  // Filter to usable UTXOs and sort by amount (largest first)\r\n  const usable = (entries || [])\r\n    .map((e, idx) => ({ entry: e, amount: entryAmountSompi(e), originalIndex: idx }))\r\n    .filter((x) => x.amount >= minAmount)\r\n    .sort((a, b) => (a.amount > b.amount ? -1 : a.amount < b.amount ? 1 : 0));\r\n\r\n  if (usable.length === 0) {\r\n    return { entry: null, amount: 0n };\r\n  }\r\n\r\n  // Assign UTXOs to engines in round-robin fashion\r\n  // Engine 0 gets indices 0, totalEngines, 2*totalEngines, ...\r\n  // Engine 1 gets indices 1, totalEngines+1, 2*totalEngines+1, ...\r\n  const myUtxos = usable.filter((_, idx) => idx % totalEngines === engineIndex);\r\n\r\n  if (myUtxos.length === 0) {\r\n    return { entry: null, amount: 0n };\r\n  }\r\n\r\n  // Return the largest UTXO assigned to this engine\r\n  return { entry: myUtxos[0].entry, amount: myUtxos[0].amount };\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Balance & Analysis\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Calculate total balance from UTXO entries.\r\n * @param {Array} entries - Array of UTXO entries\r\n * @returns {bigint} Total balance in sompi\r\n */\r\nexport function calculateTotalBalance(entries) {\r\n  let total = 0n;\r\n  for (const e of entries || []) {\r\n    total += entryAmountSompi(e);\r\n  }\r\n  return total;\r\n}\r\n\r\n/**\r\n * Group UTXOs by size category for analysis.\r\n * @param {Array} entries - Array of UTXO entries\r\n * @returns {{ dust: Array, small: Array, medium: Array, large: Array }}\r\n */\r\nexport function categorizeUtxos(entries) {\r\n  const dust = [];\r\n  const small = [];\r\n  const medium = [];\r\n  const large = [];\r\n\r\n  for (const e of entries || []) {\r\n    const amt = entryAmountSompi(e);\r\n    if (amt < DUST_THRESHOLD) {\r\n      dust.push(e);\r\n    } else if (amt < SMALL_THRESHOLD) {\r\n      small.push(e);\r\n    } else if (amt < MEDIUM_THRESHOLD) {\r\n      medium.push(e);\r\n    } else {\r\n      large.push(e);\r\n    }\r\n  }\r\n\r\n  return { dust, small, medium, large };\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Conversion Helpers\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Convenience helper for parsing KAS string to sompi bigint.\r\n * @param {string|number} amountKas - Amount in KAS\r\n * @returns {bigint} Amount in sompi\r\n */\r\nexport function kasToSompi(amountKas) {\r\n  return kaspaToSompi(String(amountKas));\r\n}\r\n\r\n/**\r\n * Convert sompi to KAS string with proper decimal handling.\r\n * @param {bigint} sompi - Amount in sompi\r\n * @param {number} [decimals=8] - Number of decimal places to show\r\n * @returns {string} Amount in KAS\r\n */\r\nexport function sompiToKas(sompi, decimals = 8) {\r\n  if (typeof sompi !== \"bigint\") {\r\n    sompi = BigInt(sompi || 0);\r\n  }\r\n\r\n  const whole = sompi / SOMPI_PER_KAS;\r\n  const frac = sompi % SOMPI_PER_KAS;\r\n\r\n  if (frac === 0n) {\r\n    return whole.toString();\r\n  }\r\n\r\n  const fracStr = frac.toString().padStart(8, \"0\").slice(0, decimals);\r\n  return `${whole}.${fracStr}`.replace(/\\.?0+$/, \"\");\r\n}\r\n", "import {\r\n  createTransactions,\r\n  Generator,\r\n  PrivateKey,\r\n  sompiToKaspaString,\r\n  kaspaToSompi,\r\n  UtxoEntries,\r\n} from \"../kas-wasm/kaspa.js\";\r\nimport { payloadToHex } from \"../utilities/utilities.js\";\r\nimport { entryAmountSompi, calculateTotalBalance } from \"./utxo_manager.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Constants\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\nconst log = Logger.create(LogModule.transport.txBuilder);\r\n\r\n// Minimum output amount (dust threshold) in sompi\r\nconst MIN_OUTPUT_SOMPI = 10000n; // 0.0001 KAS\r\n\r\n// Estimated fee per input/output in sompi (conservative estimate)\r\nconst ESTIMATED_FEE_PER_INPUT = 3000n;\r\nconst ESTIMATED_FEE_PER_OUTPUT = 3000n;\r\nconst ESTIMATED_BASE_FEE = 5000n;\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Fee Estimation\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Estimate transaction fee based on inputs/outputs count.\r\n * This is a conservative estimate; actual fees depend on mass.\r\n * @param {number} inputCount - Number of inputs\r\n * @param {number} outputCount - Number of outputs\r\n * @param {number} [payloadBytes=0] - Payload size in bytes\r\n * @returns {bigint} Estimated fee in sompi\r\n */\r\nexport function estimateFee(inputCount, outputCount, payloadBytes = 0) {\r\n  const inputFee = BigInt(inputCount) * ESTIMATED_FEE_PER_INPUT;\r\n  const outputFee = BigInt(outputCount) * ESTIMATED_FEE_PER_OUTPUT;\r\n  const payloadFee = BigInt(payloadBytes) * 10n; // ~10 sompi per byte\r\n  return ESTIMATED_BASE_FEE + inputFee + outputFee + payloadFee;\r\n}\r\n\r\n/**\r\n * Estimate mass/fees for a prospective transaction using the WASM Generator.\r\n * Generic + reusable: caller provides UTXO entries + outputs + changeAddress.\r\n */\r\nexport async function estimateTransaction({\r\n  entries,\r\n  outputs,\r\n  priorityFee = 0n,\r\n  changeAddress,\r\n  networkId,\r\n  payload, // string (utf8 or hex)\r\n} = {}) {\r\n  if (!Array.isArray(entries) || entries.length === 0)\r\n    throw new Error(\"estimateTransaction: entries required.\");\r\n  if (!Array.isArray(outputs) || outputs.length === 0)\r\n    throw new Error(\"estimateTransaction: outputs required.\");\r\n  if (!changeAddress)\r\n    throw new Error(\"estimateTransaction: changeAddress required.\");\r\n  if (!networkId) throw new Error(\"estimateTransaction: networkId required.\");\r\n\r\n  const payloadHex = payloadToHex(payload);\r\n\r\n  // Convert entries to WASM if needed (same logic as buildPendingTransaction)\r\n  let wasmEntries = entries;\r\n  if (entries.length > 0) {\r\n    const e = entries[0];\r\n    const isWasmObject = e.__wbg_ptr !== undefined;\r\n    if (!isWasmObject) {\r\n      // Plain JS objects from RPC - wrap in UtxoEntries to convert to WASM\r\n      const utxoEntriesWrapper = new UtxoEntries(entries);\r\n      wasmEntries = utxoEntriesWrapper.items;\r\n    }\r\n  }\r\n\r\n  const settings = {\r\n    // SDK examples commonly use utxoEntries; some wrappers also pass entries.\r\n    utxoEntries: wasmEntries,\r\n    entries: wasmEntries,\r\n    outputs,\r\n    changeAddress: String(changeAddress),\r\n    priorityFee,\r\n    payload: payloadHex,\r\n    networkId,\r\n  };\r\n\r\n  let generator;\r\n  try {\r\n    generator = new Generator(settings);\r\n    const summary = await generator.estimate();\r\n\r\n    const fees = summary?.fees ?? 0n;\r\n    const mass = summary?.mass ?? 0n;\r\n    const finalAmount = summary?.finalAmount;\r\n    const txCount = summary?.transactions ?? 0;\r\n    const utxoCount = summary?.utxos ?? 0;\r\n    const finalTransactionId = summary?.finalTransactionId;\r\n\r\n    // free WASM summary if available\r\n    try {\r\n      summary?.free?.();\r\n    } catch {\r\n      /* ignore */\r\n    }\r\n\r\n    const baseFee = fees - (priorityFee ?? 0n);\r\n\r\n    return {\r\n      mass,\r\n      fees,\r\n      feesKas: sompiToKaspaString(fees),\r\n      priorityFee,\r\n      baseFee,\r\n      baseFeeKas: sompiToKaspaString(baseFee),\r\n      finalAmount,\r\n      finalAmountKas:\r\n        finalAmount != null ? sompiToKaspaString(finalAmount) : null,\r\n      transactions: txCount,\r\n      utxos: utxoCount,\r\n      finalTransactionId: finalTransactionId ?? null,\r\n      payloadBytes: payloadHex ? Math.floor(payloadHex.length / 2) : 0,\r\n    };\r\n  } finally {\r\n    try {\r\n      generator?.free?.();\r\n    } catch {\r\n      /* ignore */\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Attempt to sign a PendingTransaction with keys.\r\n * Some builds accept WASM PrivateKey objects, others accept strings.\r\n */\r\nexport async function signPendingTransaction(pendingTx, privateKeys) {\r\n  if (!pendingTx?.sign)\r\n    throw new Error(\"PendingTransaction.sign is not available.\");\r\n\r\n  const keys = Array.isArray(privateKeys) ? privateKeys : [];\r\n  if (keys.length === 0)\r\n    throw new Error(\"No private keys provided for signing.\");\r\n\r\n  // Prefer WASM PrivateKey objects\r\n  try {\r\n    const wasmKeys = keys.map((k) =>\r\n      k instanceof PrivateKey ? k : new PrivateKey(String(k)),\r\n    );\r\n    await pendingTx.sign(wasmKeys);\r\n    return;\r\n  } catch {\r\n    // Fallback: try hex strings\r\n    await pendingTx.sign(keys.map((k) => String(k)));\r\n  }\r\n}\r\n\r\n/**\r\n * Build transactions via WASM createTransactions.\r\n * Returns the first PendingTransaction (common case).\r\n */\r\nexport async function buildPendingTransaction({\r\n  entries,\r\n  outputs,\r\n  priorityFee = 0n,\r\n  changeAddress,\r\n  networkId,\r\n  payload, // string (utf8 or hex)\r\n} = {}) {\r\n  if (!Array.isArray(entries) || entries.length === 0)\r\n    throw new Error(\"buildPendingTransaction: entries required.\");\r\n  if (!Array.isArray(outputs) || outputs.length === 0)\r\n    throw new Error(\"buildPendingTransaction: outputs required.\");\r\n  if (!changeAddress)\r\n    throw new Error(\"buildPendingTransaction: changeAddress required.\");\r\n  if (!networkId)\r\n    throw new Error(\"buildPendingTransaction: networkId required.\");\r\n\r\n  const payloadHex = payloadToHex(payload);\r\n\r\n  // Log entry info for debugging\r\n  log.log(\"[buildPendingTransaction] Calling SDK createTransactions with:\", {\r\n    entriesCount: entries.length,\r\n    outputsCount: outputs.length,\r\n    changeAddress: String(changeAddress),\r\n    networkId,\r\n    priorityFee,\r\n    payloadHex: payloadHex?.slice(0, 40),\r\n  });\r\n\r\n  // Check if entries need conversion to WASM UtxoEntries\r\n  // RPC returns plain JS objects or UtxoEntryReference objects that need proper handling\r\n  let wasmEntries;\r\n  if (entries.length > 0) {\r\n    const e = entries[0];\r\n    const isWasmObject = e.__wbg_ptr !== undefined;\r\n    const hasEntryGetter = typeof e.entry === 'object' || typeof Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e) || {}, 'entry')?.get === 'function';\r\n\r\n    // Detailed debug: extract actual values from the entry\r\n    let entryAmount, entryOutpoint, entryAddress;\r\n    try {\r\n      entryAmount = e.amount;\r\n    } catch { entryAmount = \"error\"; }\r\n    try {\r\n      const op = e.outpoint;\r\n      entryOutpoint = op ? { txId: op.transactionId?.slice(0, 16), idx: op.index } : \"null\";\r\n    } catch { entryOutpoint = \"error\"; }\r\n    try {\r\n      entryAddress = e.address?.toString?.() || String(e.address);\r\n    } catch { entryAddress = \"error\"; }\r\n\r\n    log.log(\"[buildPendingTransaction] Entry analysis:\", {\r\n      isWasmObject,\r\n      hasEntryGetter,\r\n      hasOutpoint: typeof e.outpoint !== 'undefined',\r\n      protoName: e?.constructor?.name,\r\n      amount: entryAmount,\r\n      outpoint: entryOutpoint,\r\n      address: entryAddress?.slice(0, 30),\r\n    });\r\n\r\n    // If entries are UtxoEntryReference WASM objects, the SDK should handle them directly\r\n    // If they're plain JS objects, wrap them in UtxoEntries\r\n    if (isWasmObject) {\r\n      // Already WASM objects - pass directly\r\n      wasmEntries = entries;\r\n    } else {\r\n      // Plain JS objects from RPC - wrap in UtxoEntries to convert to WASM\r\n      log.log(\"[buildPendingTransaction] Converting plain JS entries to WASM UtxoEntries\");\r\n      wasmEntries = new UtxoEntries(entries);\r\n      // Get the items array from UtxoEntries\r\n      wasmEntries = wasmEntries.items;\r\n    }\r\n  } else {\r\n    wasmEntries = entries;\r\n  }\r\n\r\n  // Log outputs for debugging\r\n  log.log(\"[buildPendingTransaction] Outputs:\", outputs.map(o => ({\r\n    address: String(o.address)?.slice(0, 30),\r\n    amount: o.amount,\r\n    amountType: typeof o.amount,\r\n  })));\r\n\r\n  let result;\r\n  try {\r\n    result = await createTransactions({\r\n      // SDK expects 'entries' for Generator settings\r\n      entries: wasmEntries,\r\n      outputs,\r\n      priorityFee,\r\n      changeAddress: String(changeAddress),\r\n      networkId,\r\n      payload: payloadHex,\r\n    });\r\n  } catch (err) {\r\n    log.error(\"[buildPendingTransaction] SDK createTransactions error:\", err.message || err);\r\n    throw err;\r\n  }\r\n\r\n  const { transactions } = result;\r\n\r\n  if (!transactions || transactions.length === 0) {\r\n    throw new Error(\"Failed to create transactions (empty result).\");\r\n  }\r\n\r\n  return transactions[0];\r\n}\r\n\r\n/**\r\n * Sign + submit a pending transaction.\r\n * Returns a normalized result with txid if available.\r\n */\r\nexport async function submitPendingTransaction({\r\n  pendingTx,\r\n  privateKeys,\r\n  client,\r\n} = {}) {\r\n  if (!pendingTx)\r\n    throw new Error(\"submitPendingTransaction: pendingTx required.\");\r\n  if (!client) throw new Error(\"submitPendingTransaction: client required.\");\r\n\r\n  if (privateKeys && privateKeys.length > 0) {\r\n    await signPendingTransaction(pendingTx, privateKeys);\r\n  }\r\n\r\n  if (typeof pendingTx.submit !== \"function\") {\r\n    throw new Error(\r\n      \"PendingTransaction.submit is not available in this WASM build.\",\r\n    );\r\n  }\r\n\r\n  const submitRes = await pendingTx.submit(client);\r\n  const txid =\r\n    pendingTx.id ?? submitRes?.transactionId ?? submitRes?.txid ?? null;\r\n\r\n  return { txid, submitRes, pendingTx };\r\n}\r\n\r\n/**\r\n * One-shot convenience: build + sign + submit.\r\n */\r\nexport async function buildSignSubmitTransaction({\r\n  entries,\r\n  outputs,\r\n  priorityFee = 0n,\r\n  changeAddress,\r\n  networkId,\r\n  payload,\r\n  privateKeys,\r\n  client,\r\n} = {}) {\r\n  const pendingTx = await buildPendingTransaction({\r\n    entries,\r\n    outputs,\r\n    priorityFee,\r\n    changeAddress,\r\n    networkId,\r\n    payload,\r\n  });\r\n\r\n  return await submitPendingTransaction({ pendingTx, privateKeys, client });\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Manual Transaction Building (with explicit change handling)\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Build a transaction with explicit outputs including change.\r\n *\r\n * CRITICAL: This function properly handles change outputs to prevent\r\n * losing funds to miners. If you have a 10 KAS UTXO and send 1 KAS,\r\n * the remaining ~9 KAS (minus fees) is sent back to your change address.\r\n *\r\n * @param {Object} options\r\n * @param {Array} options.entries - UTXO entries to spend\r\n * @param {Array} options.outputs - Output specifications [{ address, amount }]\r\n * @param {string} options.changeAddress - Address for change output\r\n * @param {string} options.networkId - Network ID\r\n * @param {string} [options.payload] - Optional payload string\r\n * @param {bigint} [options.priorityFee=0n] - Priority fee in sompi\r\n * @param {boolean} [options.autoChange=true] - Automatically add change output\r\n * @returns {Promise<Object>} Transaction details\r\n */\r\nexport async function buildManualTransaction({\r\n  entries,\r\n  outputs,\r\n  changeAddress,\r\n  networkId,\r\n  payload,\r\n  priorityFee = 0n,\r\n  autoChange = true,\r\n} = {}) {\r\n  if (!Array.isArray(entries) || entries.length === 0) {\r\n    throw new Error(\"buildManualTransaction: entries required.\");\r\n  }\r\n  if (!Array.isArray(outputs) || outputs.length === 0) {\r\n    throw new Error(\"buildManualTransaction: outputs required.\");\r\n  }\r\n  if (!changeAddress) {\r\n    throw new Error(\"buildManualTransaction: changeAddress required.\");\r\n  }\r\n  if (!networkId) {\r\n    throw new Error(\"buildManualTransaction: networkId required.\");\r\n  }\r\n\r\n  // Calculate total input value\r\n  const totalInput = calculateTotalBalance(entries);\r\n\r\n  log.log(`[buildManualTransaction] entries=${entries.length}, totalInput=${totalInput}`);\r\n\r\n  // Calculate total output value\r\n  let totalOutput = 0n;\r\n  for (const out of outputs) {\r\n    const amt = typeof out.amount === \"bigint\"\r\n      ? out.amount\r\n      : kaspaToSompi(String(out.amount));\r\n    totalOutput += amt;\r\n  }\r\n\r\n  // Estimate fee\r\n  const payloadBytes = payload ? new TextEncoder().encode(payload).length : 0;\r\n  const outputCount = autoChange ? outputs.length + 1 : outputs.length;\r\n  const estimatedFee = estimateFee(entries.length, outputCount, payloadBytes) + priorityFee;\r\n\r\n  // Calculate change\r\n  const change = totalInput - totalOutput - estimatedFee;\r\n\r\n  log.log(`[buildManualTransaction] totalOutput=${totalOutput}, estimatedFee=${estimatedFee}, change=${change}`);\r\n\r\n  if (change < 0n) {\r\n    throw new Error(\r\n      `Insufficient funds: input=${totalInput}, output=${totalOutput}, fee=${estimatedFee}, shortfall=${-change}`\r\n    );\r\n  }\r\n\r\n  // Build final outputs array (just the actual outputs, NOT change)\r\n  // The SDK's createTransactions will compute and add change automatically\r\n  const finalOutputs = outputs.map((out) => ({\r\n    address: String(out.address),\r\n    amount: typeof out.amount === \"bigint\"\r\n      ? out.amount\r\n      : kaspaToSompi(String(out.amount)),\r\n  }));\r\n\r\n  // Note: We do NOT add change output here - createTransactions handles it via changeAddress\r\n  // The change calculation above is just for validation and return value\r\n\r\n  // Build the transaction using the SDK\r\n  const pendingTx = await buildPendingTransaction({\r\n    entries,\r\n    outputs: finalOutputs,\r\n    changeAddress,\r\n    networkId,\r\n    payload,\r\n    priorityFee,\r\n  });\r\n\r\n  return {\r\n    pendingTx,\r\n    totalInput,\r\n    totalOutput,\r\n    estimatedFee,\r\n    change: autoChange ? change : 0n,\r\n    outputs: finalOutputs,\r\n    inputCount: entries.length,\r\n    outputCount: finalOutputs.length,\r\n  };\r\n}\r\n\r\n/**\r\n * Build a UTXO split transaction.\r\n * Takes all available UTXOs and splits them into N equal outputs.\r\n * This is essential for rapid-fire transactions to avoid UTXO contention.\r\n *\r\n * @param {Object} options\r\n * @param {Array} options.entries - UTXO entries to consolidate and split\r\n * @param {string} options.address - Address for all outputs (usually your own)\r\n * @param {number} options.splitCount - Number of outputs to create (2-100)\r\n * @param {string} options.networkId - Network ID\r\n * @param {bigint} [options.priorityFee=0n] - Priority fee in sompi\r\n * @returns {Promise<Object>} Split transaction details\r\n */\r\nexport async function buildSplitUtxoTransaction({\r\n  entries,\r\n  address,\r\n  splitCount,\r\n  networkId,\r\n  priorityFee = 0n,\r\n} = {}) {\r\n  if (!Array.isArray(entries) || entries.length === 0) {\r\n    throw new Error(\"buildSplitUtxoTransaction: entries required.\");\r\n  }\r\n  if (!address) {\r\n    throw new Error(\"buildSplitUtxoTransaction: address required.\");\r\n  }\r\n  if (!splitCount || splitCount < 2 || splitCount > 100) {\r\n    throw new Error(\"buildSplitUtxoTransaction: splitCount must be 2-100.\");\r\n  }\r\n  if (!networkId) {\r\n    throw new Error(\"buildSplitUtxoTransaction: networkId required.\");\r\n  }\r\n\r\n  // Calculate total input value\r\n  const totalInput = calculateTotalBalance(entries);\r\n\r\n  // Estimate fee for this transaction\r\n  const estimatedFee = estimateFee(entries.length, splitCount, 0) + priorityFee;\r\n\r\n  // Calculate available balance after fees\r\n  const availableBalance = totalInput - estimatedFee;\r\n\r\n  if (availableBalance < MIN_OUTPUT_SOMPI * BigInt(splitCount)) {\r\n    throw new Error(\r\n      `Insufficient funds to split into ${splitCount} outputs. ` +\r\n      `Available: ${availableBalance}, minimum needed: ${MIN_OUTPUT_SOMPI * BigInt(splitCount)}`\r\n    );\r\n  }\r\n\r\n  // Calculate equal split amount\r\n  const splitAmount = availableBalance / BigInt(splitCount);\r\n\r\n  // Handle remainder (add to first output to ensure all funds are used)\r\n  const remainder = availableBalance % BigInt(splitCount);\r\n\r\n  // Build outputs - all going to the same address\r\n  const outputs = [];\r\n  for (let i = 0; i < splitCount; i++) {\r\n    outputs.push({\r\n      address: String(address),\r\n      amount: i === 0 ? splitAmount + remainder : splitAmount,\r\n    });\r\n  }\r\n\r\n  // Build the transaction (no additional change needed - we're using all funds)\r\n  const pendingTx = await buildPendingTransaction({\r\n    entries,\r\n    outputs,\r\n    changeAddress: address, // Required but won't create extra output\r\n    networkId,\r\n    priorityFee,\r\n  });\r\n\r\n  return {\r\n    pendingTx,\r\n    totalInput,\r\n    estimatedFee,\r\n    splitAmount,\r\n    remainder,\r\n    outputs,\r\n    inputCount: entries.length,\r\n    outputCount: splitCount,\r\n  };\r\n}\r\n", "/**\r\n * High-level UTXO operations for rapid transactions.\r\n * Handles consolidation, splitting, and manual sends with janitor mode.\r\n *\r\n * IMPORTANT: SDK's createTransactions() handles change automatically via changeAddress.\r\n * We only pass the send output; SDK creates change outputs automatically.\r\n */\r\n\r\nimport * as txBuilder from \"./tx_builder.js\";\r\nimport * as utxoManager from \"./utxo_manager.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Constants\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\nconst log = Logger.create(LogModule.transport.utxoOperations);\r\nconst DEFAULT_SMALL_THRESHOLD = 100000000n; // 1 KAS\r\nconst DEFAULT_MAX_SMALL_SWEEP = 5;\r\nconst DEFAULT_MAX_INPUTS_PER_TX = 80;\r\nconst MIN_OUTPUT_AMOUNT = 50000000n; // 0.5 KAS\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Manual Send with Janitor Mode\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Build and send a transaction with full UTXO control.\r\n * Supports janitor mode (dust sweeping as extra inputs).\r\n *\r\n * SDK handles change automatically via changeAddress parameter.\r\n * We only pass the send output - no manual change calculation needed.\r\n *\r\n * @param {Object} options\r\n * @param {Object} options.client - RPC client\r\n * @param {string} options.networkId - Network ID\r\n * @param {string} options.fromAddress - Source address\r\n * @param {string} options.toAddress - Destination address\r\n * @param {bigint} options.amountSompi - Amount to send in sompi\r\n * @param {string} [options.payload] - Optional payload\r\n * @param {Array} options.privateKeys - Private keys for signing\r\n * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n * @param {number} [options.engineIndex] - Engine index for multi-engine\r\n * @param {number} [options.totalEngines] - Total engines\r\n * @param {Array} options.utxoEntries - Available UTXO entries\r\n * @param {boolean} [options.janitorMode=true] - Enable dust sweeping\r\n * @param {bigint} [options.smallThreshold] - Threshold for \"small\" UTXOs\r\n * @param {number} [options.maxSmallSweep=5] - Max small UTXOs to sweep\r\n * @returns {Promise<Object>} Transaction result\r\n */\r\nexport async function manualSend({\r\n  client,\r\n  networkId,\r\n  fromAddress,\r\n  toAddress,\r\n  amountSompi,\r\n  payload,\r\n  privateKeys,\r\n  priorityFee = 0n,\r\n  engineIndex,\r\n  totalEngines,\r\n  utxoEntries,\r\n  janitorMode = true,\r\n  smallThreshold = DEFAULT_SMALL_THRESHOLD,\r\n  maxSmallSweep = DEFAULT_MAX_SMALL_SWEEP,\r\n} = {}) {\r\n  if (!client) throw new Error(\"manualSend: client required.\");\r\n  if (!networkId) throw new Error(\"manualSend: networkId required.\");\r\n  if (!fromAddress) throw new Error(\"manualSend: fromAddress required.\");\r\n  if (!toAddress) throw new Error(\"manualSend: toAddress required.\");\r\n  if (amountSompi === undefined || amountSompi === null) {\r\n    throw new Error(\"manualSend: amountSompi required.\");\r\n  }\r\n\r\n  const allEntries = utxoEntries || [];\r\n  const logPrefix = `[manualSend E${engineIndex ?? \"?\"}]`;\r\n  const utxoCount = allEntries.length;\r\n\r\n  if (utxoCount === 0) {\r\n    throw new Error(\"No UTXOs available (all may be pending).\");\r\n  }\r\n\r\n  // Categorize UTXOs\r\n  const { smallUtxos, largeUtxos } = categorizeByThreshold(allEntries, smallThreshold);\r\n\r\n  log.log(\r\n    `${logPrefix} UTXOs: ${largeUtxos.length} large, ${smallUtxos.length} small, total=${utxoCount}`\r\n  );\r\n\r\n  // Select UTXOs based on mode\r\n  const selection = selectUtxosForSend({\r\n    largeUtxos,\r\n    smallUtxos,\r\n    amountSompi,\r\n    engineIndex,\r\n    totalEngines,\r\n    janitorMode,\r\n    maxSmallSweep,\r\n    logPrefix,\r\n  });\r\n\r\n  const { selectedEntries, selectedTotal, isJanitorRun, consolidatedCount } = selection;\r\n\r\n  // Calculate estimated fee for validation\r\n  const payloadBytes = payload ? new TextEncoder().encode(payload).length : 0;\r\n  const estimatedFee = txBuilder.estimateFee(selectedEntries.length, 2, payloadBytes) + priorityFee;\r\n\r\n  // Validate we have enough funds (send amount + estimated fee)\r\n  const requiredTotal = amountSompi + estimatedFee;\r\n  if (selectedTotal < requiredTotal) {\r\n    throw new Error(\r\n      `Insufficient funds: have ${utxoManager.sompiToKas(selectedTotal)} KAS, ` +\r\n      `need ${utxoManager.sompiToKas(requiredTotal)} KAS ` +\r\n      `(send: ${utxoManager.sompiToKas(amountSompi)}, fee: ~${utxoManager.sompiToKas(estimatedFee)})`\r\n    );\r\n  }\r\n\r\n  // ONLY pass the send output - SDK handles change automatically via changeAddress\r\n  const outputs = [{ address: toAddress, amount: amountSompi }];\r\n\r\n  log.log(\r\n    `${logPrefix} Building tx: inputs=${selectedEntries.length}, ` +\r\n    `total=${utxoManager.sompiToKas(selectedTotal)} KAS, ` +\r\n    `sending=${utxoManager.sompiToKas(amountSompi)} KAS` +\r\n    (isJanitorRun ? `, swept=${consolidatedCount} dust` : \"\")\r\n  );\r\n\r\n  // Build and submit transaction - SDK creates change output automatically\r\n  const pendingTx = await txBuilder.buildPendingTransaction({\r\n    entries: selectedEntries,\r\n    outputs,\r\n    changeAddress: fromAddress,\r\n    networkId,\r\n    payload,\r\n    priorityFee,\r\n  });\r\n\r\n  const result = await txBuilder.submitPendingTransaction({\r\n    pendingTx,\r\n    privateKeys,\r\n    client,\r\n  });\r\n\r\n  // Calculate actual change (input - send - estimated fee)\r\n  const estimatedChange = selectedTotal - amountSompi - estimatedFee;\r\n\r\n  return {\r\n    transactionId: result.txid,\r\n    submitRes: result.submitRes,\r\n    inputCount: selectedEntries.length,\r\n    outputCount: 2, // send + change (SDK creates change)\r\n    totalInput: selectedTotal,\r\n    totalOutput: amountSompi,\r\n    estimatedFee,\r\n    change: estimatedChange,\r\n    usedEntries: selectedEntries,\r\n    isJanitorRun,\r\n    consolidatedCount,\r\n    utxoCount,\r\n  };\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Consolidate UTXOs\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Consolidate many UTXOs into fewer large ones.\r\n * Handles batching for large UTXO counts.\r\n *\r\n * @param {Object} options\r\n * @param {Object} options.client - RPC client\r\n * @param {string} options.networkId - Network ID\r\n * @param {string} options.address - Address for UTXOs\r\n * @param {Array} options.privateKeys - Private keys\r\n * @param {Array} options.entries - UTXO entries to consolidate\r\n * @param {number} [options.targetCount=5] - Target output count\r\n * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n * @param {number} [options.maxInputsPerTx=80] - Max inputs per batch\r\n * @param {function} [options.onProgress] - Progress callback\r\n * @returns {Promise<Object>} Consolidation result\r\n */\r\nexport async function consolidateUtxos({\r\n  client,\r\n  networkId,\r\n  address,\r\n  privateKeys,\r\n  entries,\r\n  targetCount = 5,\r\n  priorityFee = 0n,\r\n  maxInputsPerTx = DEFAULT_MAX_INPUTS_PER_TX,\r\n  onProgress,\r\n} = {}) {\r\n  if (!client) throw new Error(\"consolidateUtxos: client required.\");\r\n  if (!networkId) throw new Error(\"consolidateUtxos: networkId required.\");\r\n  if (!address) throw new Error(\"consolidateUtxos: address required.\");\r\n  if (!privateKeys?.length) throw new Error(\"consolidateUtxos: privateKeys required.\");\r\n  if (!entries?.length) throw new Error(\"No UTXOs available to consolidate.\");\r\n\r\n  if (targetCount < 1 || targetCount > 100) {\r\n    throw new Error(\"consolidateUtxos: targetCount must be 1-100.\");\r\n  }\r\n\r\n  const initialCount = entries.length;\r\n\r\n  // If we already have fewer UTXOs than target, nothing to consolidate\r\n  // Return early with a no-op result (not an error)\r\n  if (initialCount <= targetCount) {\r\n    log.log(\r\n      `[consolidateUtxos] Already have ${initialCount} UTXOs (<= target ${targetCount}). No consolidation needed.`\r\n    );\r\n    return {\r\n      transactionIds: [],\r\n      rounds: 0,\r\n      totalConsolidated: 0,\r\n      previousUtxoCount: initialCount,\r\n      finalUtxoCount: initialCount,\r\n      spentKeys: [],\r\n      noOpReason: \"already_at_or_below_target\",\r\n    };\r\n  }\r\n\r\n  const txids = [];\r\n  let totalConsolidated = 0;\r\n  let round = 0;\r\n  let currentMaxInputs = maxInputsPerTx;\r\n\r\n  // Track spent UTXOs locally to avoid double-spending\r\n  const spentInSession = new Set();\r\n\r\n  const filterAvailable = (utxos) => {\r\n    return utxos.filter((entry) => {\r\n      const key = utxoManager.getEntryKey(entry);\r\n      return key && !spentInSession.has(key);\r\n    });\r\n  };\r\n\r\n  const estimatedRounds = Math.ceil(\r\n    Math.log(entries.length / targetCount) / Math.log(currentMaxInputs)\r\n  );\r\n\r\n  log.log(\r\n    `[consolidateUtxos] Starting: ${entries.length} UTXOs \u2192 ${targetCount} target, ` +\r\n    `~${estimatedRounds} rounds estimated`\r\n  );\r\n\r\n  let availableEntries = filterAvailable(entries);\r\n\r\n  while (availableEntries.length > targetCount) {\r\n    round++;\r\n\r\n    const inputCount = Math.min(availableEntries.length, currentMaxInputs);\r\n    const remainingAfterBatch = availableEntries.length - inputCount + 1;\r\n    const isLastRound = remainingAfterBatch <= targetCount;\r\n    const outputCount = isLastRound ? targetCount : 1;\r\n\r\n    // Sort smallest first for dust cleanup priority\r\n    const sortedEntries = [...availableEntries].sort((a, b) => {\r\n      const aa = utxoManager.entryAmountSompi(a);\r\n      const bb = utxoManager.entryAmountSompi(b);\r\n      return aa < bb ? -1 : aa > bb ? 1 : 0;\r\n    });\r\n\r\n    const batchEntries = sortedEntries.slice(0, inputCount);\r\n    const batchTotal = utxoManager.calculateTotalBalance(batchEntries);\r\n    const estimatedFee = txBuilder.estimateFee(inputCount, outputCount, 0) + priorityFee;\r\n    const availableBalance = batchTotal - estimatedFee;\r\n\r\n    if (availableBalance < MIN_OUTPUT_AMOUNT * BigInt(outputCount)) {\r\n      log.warn(\r\n        `[consolidateUtxos] Round ${round}: Insufficient funds after fees. ` +\r\n        `Batch: ${utxoManager.sompiToKas(batchTotal)} KAS, Fee: ${utxoManager.sompiToKas(estimatedFee)} KAS`\r\n      );\r\n      // Mark these as spent to skip them\r\n      for (const entry of batchEntries) {\r\n        const key = utxoManager.getEntryKey(entry);\r\n        if (key) spentInSession.add(key);\r\n      }\r\n      availableEntries = filterAvailable(entries);\r\n      if (availableEntries.length === 0) break;\r\n      continue;\r\n    }\r\n\r\n    const outputs = buildConsolidationOutputs(address, availableBalance, outputCount);\r\n\r\n    log.log(\r\n      `[consolidateUtxos] Round ${round}: Merging ${inputCount} \u2192 ${outputCount} output(s) ` +\r\n      `(~${utxoManager.sompiToKas(availableBalance / BigInt(outputCount))} KAS each)`\r\n    );\r\n\r\n    try {\r\n      const pendingTx = await txBuilder.buildPendingTransaction({\r\n        entries: batchEntries,\r\n        outputs,\r\n        changeAddress: address,\r\n        networkId,\r\n        priorityFee,\r\n      });\r\n\r\n      const result = await txBuilder.submitPendingTransaction({\r\n        pendingTx,\r\n        privateKeys,\r\n        client,\r\n      });\r\n\r\n      txids.push(result.txid);\r\n      totalConsolidated += inputCount;\r\n\r\n      // Mark batch as spent locally\r\n      for (const entry of batchEntries) {\r\n        const key = utxoManager.getEntryKey(entry);\r\n        if (key) spentInSession.add(key);\r\n      }\r\n\r\n      log.log(`[consolidateUtxos] Round ${round} complete: txid=${result.txid?.slice(0, 16)}\u2026`);\r\n\r\n      if (typeof onProgress === \"function\") {\r\n        onProgress({ round, estimatedRounds, txid: result.txid, inputCount, outputCount });\r\n      }\r\n\r\n      if (isLastRound) break;\r\n\r\n      availableEntries = filterAvailable(entries);\r\n\r\n      if (availableEntries.length === 0 || round > 50) {\r\n        log.warn(`[consolidateUtxos] Stopping: no progress or too many rounds.`);\r\n        break;\r\n      }\r\n\r\n    } catch (err) {\r\n      log.error(`[consolidateUtxos] Round ${round} failed:`, err.message);\r\n\r\n      // Reduce batch size on mass errors\r\n      if (err.message?.includes(\"mass exceeds\") && currentMaxInputs > 20) {\r\n        currentMaxInputs = Math.floor(currentMaxInputs * 0.6);\r\n        log.log(`[consolidateUtxos] Reducing batch size to ${currentMaxInputs}`);\r\n        continue;\r\n      }\r\n\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  return {\r\n    transactionId: txids[txids.length - 1],\r\n    transactionIds: txids,\r\n    rounds: round,\r\n    inputCount: totalConsolidated,\r\n    previousUtxoCount: initialCount,\r\n    spentKeys: spentInSession,\r\n  };\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Split UTXOs\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Split UTXOs into multiple equal outputs.\r\n *\r\n * @param {Object} options\r\n * @param {Object} options.client - RPC client\r\n * @param {string} options.networkId - Network ID\r\n * @param {string} options.address - Address for outputs\r\n * @param {Array} options.privateKeys - Private keys\r\n * @param {Array} options.entries - UTXO entries to split\r\n * @param {number} options.splitCount - Number of outputs\r\n * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n * @returns {Promise<Object>} Split result\r\n */\r\nexport async function splitUtxos({\r\n  client,\r\n  networkId,\r\n  address,\r\n  privateKeys,\r\n  entries,\r\n  splitCount,\r\n  priorityFee = 0n,\r\n} = {}) {\r\n  if (!client) throw new Error(\"splitUtxos: client required.\");\r\n  if (!networkId) throw new Error(\"splitUtxos: networkId required.\");\r\n  if (!address) throw new Error(\"splitUtxos: address required.\");\r\n  if (!privateKeys?.length) throw new Error(\"splitUtxos: privateKeys required.\");\r\n  if (!entries?.length) throw new Error(\"No UTXOs available to split.\");\r\n  if (!splitCount || splitCount < 2 || splitCount > 100) {\r\n    throw new Error(\"splitUtxos: splitCount must be 2-100.\");\r\n  }\r\n\r\n  const txDetails = await txBuilder.buildSplitUtxoTransaction({\r\n    entries,\r\n    address,\r\n    splitCount,\r\n    networkId,\r\n    priorityFee,\r\n  });\r\n\r\n  const result = await txBuilder.submitPendingTransaction({\r\n    pendingTx: txDetails.pendingTx,\r\n    privateKeys,\r\n    client,\r\n  });\r\n\r\n  return {\r\n    transactionId: result.txid,\r\n    submitRes: result.submitRes,\r\n    splitCount,\r\n    totalInput: txDetails.totalInput,\r\n    splitAmount: txDetails.splitAmount,\r\n    amountPerOutput: utxoManager.sompiToKas(txDetails.splitAmount),\r\n    estimatedFee: txDetails.estimatedFee,\r\n    outputCount: txDetails.outputCount,\r\n    outputs: txDetails.outputs,\r\n    previousUtxoCount: entries.length,\r\n  };\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Private Helper Functions\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Categorize UTXOs by threshold into small and large.\r\n */\r\nfunction categorizeByThreshold(entries, threshold) {\r\n  const smallUtxos = [];\r\n  const largeUtxos = [];\r\n\r\n  for (const entry of entries) {\r\n    const amt = utxoManager.entryAmountSompi(entry);\r\n    if (amt < threshold) {\r\n      smallUtxos.push({ entry, amount: amt });\r\n    } else {\r\n      largeUtxos.push({ entry, amount: amt });\r\n    }\r\n  }\r\n\r\n  // Sort both by amount descending\r\n  largeUtxos.sort((a, b) => (a.amount > b.amount ? -1 : 1));\r\n  smallUtxos.sort((a, b) => (a.amount > b.amount ? -1 : 1));\r\n\r\n  return { smallUtxos, largeUtxos };\r\n}\r\n\r\n/**\r\n * Compute a stable slot for a UTXO based on its transaction ID.\r\n * This ensures the same UTXO always maps to the same engine,\r\n * even when the array order changes.\r\n * @param {Object} utxoWithEntry - { entry, amount } object\r\n * @param {number} totalEngines - Total number of engines\r\n * @returns {number} Engine slot (0 to totalEngines-1)\r\n */\r\nfunction getUtxoSlot(utxoWithEntry, totalEngines) {\r\n  const outpoint = utxoManager.getEntryOutpoint(utxoWithEntry.entry);\r\n  if (!outpoint?.transactionId) return 0;\r\n\r\n  // Simple hash: sum of char codes modulo totalEngines\r\n  const txid = outpoint.transactionId;\r\n  let hash = 0;\r\n  for (let i = 0; i < txid.length; i++) {\r\n    hash = (hash * 31 + txid.charCodeAt(i)) >>> 0; // Keep as unsigned 32-bit\r\n  }\r\n  // Include output index for uniqueness\r\n  hash = (hash * 31 + (outpoint.index || 0)) >>> 0;\r\n\r\n  return hash % totalEngines;\r\n}\r\n\r\n/**\r\n * Select UTXOs for a send operation.\r\n * Uses stable slot assignment based on UTXO transaction ID hash\r\n * to prevent collisions between parallel engines.\r\n */\r\nfunction selectUtxosForSend({\r\n  largeUtxos,\r\n  smallUtxos,\r\n  amountSompi,\r\n  engineIndex,\r\n  totalEngines,\r\n  janitorMode,\r\n  maxSmallSweep,\r\n  logPrefix,\r\n}) {\r\n  const selectedEntries = [];\r\n  let selectedTotal = 0n;\r\n  let isJanitorRun = false;\r\n  let consolidatedCount = 0;\r\n\r\n  if (typeof engineIndex === \"number\" && typeof totalEngines === \"number\") {\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    // Multi-engine mode: STABLE slot assignment by UTXO hash\r\n    // Each UTXO is permanently assigned to an engine based on its txid hash.\r\n    // This prevents collisions even when the UTXO array order changes.\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n    // Filter large UTXOs that belong to THIS engine's slot\r\n    const myLargeUtxos = largeUtxos.filter(\r\n      (u) => getUtxoSlot(u, totalEngines) === engineIndex\r\n    );\r\n\r\n    // Filter small UTXOs that belong to THIS engine's slot (Smart Janitor)\r\n    const mySmallUtxos = janitorMode\r\n      ? smallUtxos\r\n          .filter((u) => getUtxoSlot(u, totalEngines) === engineIndex)\r\n          .slice(0, maxSmallSweep)\r\n      : [];\r\n\r\n    const minRequired = amountSompi + 100000n; // Buffer for fees\r\n\r\n    if (myLargeUtxos.length === 0) {\r\n      throw new Error(\r\n        `Engine ${engineIndex}: No large UTXO in my slot. ` +\r\n        `Total large: ${largeUtxos.length}, need more UTXOs (try splitting).`\r\n      );\r\n    }\r\n\r\n    // Pick the largest from my slot\r\n    const primaryUtxo = myLargeUtxos.reduce((best, curr) =>\r\n      curr.amount > best.amount ? curr : best\r\n    );\r\n\r\n    if (primaryUtxo.amount < minRequired) {\r\n      throw new Error(\r\n        `Engine ${engineIndex}: Primary UTXO too small. ` +\r\n        `Need ${utxoManager.sompiToKas(minRequired)} KAS, ` +\r\n        `have ${utxoManager.sompiToKas(primaryUtxo.amount)} KAS.`\r\n      );\r\n    }\r\n\r\n    selectedEntries.push(primaryUtxo.entry);\r\n    selectedTotal = primaryUtxo.amount;\r\n\r\n    // Smart Janitor: Sweep only small UTXOs in MY slot\r\n    if (mySmallUtxos.length > 0) {\r\n      isJanitorRun = true;\r\n      let smallTotal = 0n;\r\n\r\n      for (const small of mySmallUtxos) {\r\n        selectedEntries.push(small.entry);\r\n        selectedTotal += small.amount;\r\n        smallTotal += small.amount;\r\n        consolidatedCount++;\r\n      }\r\n\r\n      log.log(\r\n        `${logPrefix} \uD83E\uDDF9 SMART JANITOR: Swept ${mySmallUtxos.length} dust in my slot ` +\r\n        `(+${utxoManager.sompiToKas(smallTotal)} KAS)`\r\n      );\r\n    }\r\n\r\n  } else {\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    // Standard mode (single engine) - no sharding needed\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    if (janitorMode && smallUtxos.length > 0 && largeUtxos.length > 0) {\r\n      isJanitorRun = true;\r\n\r\n      // Pick the largest UTXO\r\n      const primaryUtxo = largeUtxos.reduce((best, curr) =>\r\n        curr.amount > best.amount ? curr : best\r\n      );\r\n      selectedEntries.push(primaryUtxo.entry);\r\n      selectedTotal = primaryUtxo.amount;\r\n\r\n      const toSweep = smallUtxos.slice(0, maxSmallSweep);\r\n      let smallTotal = 0n;\r\n\r\n      for (const small of toSweep) {\r\n        selectedEntries.push(small.entry);\r\n        selectedTotal += small.amount;\r\n        smallTotal += small.amount;\r\n        consolidatedCount++;\r\n      }\r\n\r\n      log.log(\r\n        `${logPrefix} \uD83E\uDDF9 JANITOR: Sweeping ${toSweep.length} small UTXO(s) ` +\r\n        `(${utxoManager.sompiToKas(smallTotal)} KAS)`\r\n      );\r\n\r\n    } else if (largeUtxos.length > 0) {\r\n      // Use largest UTXO\r\n      const primaryUtxo = largeUtxos.reduce((best, curr) =>\r\n        curr.amount > best.amount ? curr : best\r\n      );\r\n      selectedEntries.push(primaryUtxo.entry);\r\n      selectedTotal = primaryUtxo.amount;\r\n    } else if (smallUtxos.length > 0) {\r\n      // No large UTXOs \u2014 combine small UTXOs to cover the amount\r\n      log.log(\r\n        `${logPrefix} No large UTXOs, combining ${smallUtxos.length} small UTXO(s)`\r\n      );\r\n      const minRequired = amountSompi + 100000n; // Buffer for fees\r\n      for (const small of smallUtxos) {\r\n        selectedEntries.push(small.entry);\r\n        selectedTotal += small.amount;\r\n        consolidatedCount++;\r\n        if (selectedTotal >= minRequired) break;\r\n      }\r\n    } else {\r\n      throw new Error(\"No UTXOs available.\");\r\n    }\r\n  }\r\n\r\n  return { selectedEntries, selectedTotal, isJanitorRun, consolidatedCount };\r\n}\r\n\r\n/**\r\n * Build consolidation outputs.\r\n */\r\nfunction buildConsolidationOutputs(address, availableBalance, outputCount) {\r\n  const outputs = [];\r\n\r\n  if (outputCount === 1) {\r\n    outputs.push({ address: String(address), amount: availableBalance });\r\n  } else {\r\n    const splitAmount = availableBalance / BigInt(outputCount);\r\n    const remainder = availableBalance % BigInt(outputCount);\r\n\r\n    for (let i = 0; i < outputCount; i++) {\r\n      outputs.push({\r\n        address: String(address),\r\n        amount: i === 0 ? splitAmount + remainder : splitAmount,\r\n      });\r\n    }\r\n  }\r\n\r\n  return outputs;\r\n}\r\n", "// rpc_runner.js\r\n\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.transport.rpcRunner);\r\n\r\n/**\r\n * Run a JSON-RPC command on the given Kaspa RPC client.\r\n * The provided RPC Client must already be connected.\r\n * @param {Object} client - The Kaspa RPC client instance (must be connected).\r\n * @param {string} cmdText - JSON string with { method, params } for the RPC call.\r\n * @returns {Promise<string>} The result of the RPC call as a string, or error message.\r\n */\r\nexport async function runRpcCommand(client, cmdText) {\r\n  if (!client || !client.isConnected) {\r\n    return \"Not connected to any RPC\";\r\n  }\r\n\r\n  try {\r\n    if (!cmdText) return \"No command provided\";\r\n    const cmd = JSON.parse(cmdText);\r\n\r\n    const methodName = cmd.method;\r\n    const params = cmd.params || {};\r\n\r\n    if (typeof client[methodName] !== \"function\") {\r\n      return `Method ${methodName} not found on RpcClient`;\r\n    }\r\n\r\n    const result = await client[methodName](params);\r\n\r\n    if (typeof result === \"object\") {\r\n      return Object.entries(result)\r\n        .map(([k, v]) => `${k}: ${v}`)\r\n        .join(\"\\n\");\r\n    } else {\r\n      return String(result);\r\n    }\r\n  } catch (err) {\r\n    log.error(\"[RpcRunner] Error running RPC command:\", err);\r\n    return \"Error: \" + err;\r\n  }\r\n}\r\n", "/**\r\n * Heartbeat: Automatic UTXO monitoring and replenishment.\r\n *\r\n * CRITICAL: Monitors USABLE UTXOs (large enough for sends), not just total count.\r\n * This prevents the \"2000 small UTXOs, no large ones\" problem where the wallet\r\n * has plenty of total UTXOs but none are large enough for actual transactions.\r\n *\r\n * Two-priority system:\r\n * 1. CONSOLIDATE if too many small UTXOs (prevents fragmentation)\r\n * 2. SPLIT if not enough usable UTXOs (ensures parallel engine availability)\r\n *\r\n * MULTI-ADDRESS SUPPORT:\r\n * Monitors both receive and change addresses since funds often end up in change\r\n * outputs after transactions. Pass `addresses` array or `address` + `changeAddress`.\r\n */\r\n\r\nimport * as utxoManager from \"./utxo_manager.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.transport.heartbeat);\r\n\r\n// Default minimum UTXO size to be considered \"usable\" for rapid sends\r\n// Must be larger than send amount + fees (0.5 KAS send + ~0.01 fees = ~0.6 KAS minimum)\r\nconst DEFAULT_USABLE_THRESHOLD = 100000000n; // 1 KAS\r\n\r\n/**\r\n * HeartbeatMonitor class for UTXO health monitoring.\r\n * Designed as a standalone module to keep TransportFacade thin.\r\n */\r\nexport class HeartbeatMonitor {\r\n  /**\r\n   * @param {Object} facade - TransportFacade instance for UTXO operations\r\n   */\r\n  constructor(facade) {\r\n    this._facade = facade;\r\n    this._timer = null;\r\n    this._config = null;\r\n    this._checkInProgress = false;\r\n  }\r\n\r\n  /**\r\n   * Start the heartbeat monitor.\r\n   *\r\n   * @param {Object} options\r\n   * @param {string} [options.address] - Primary address to monitor (receive address)\r\n   * @param {string} [options.changeAddress] - Change address to also monitor\r\n   * @param {string[]} [options.addresses] - Alternative: array of all addresses to monitor\r\n   * @param {Array} options.privateKeys - Private keys for splitting/consolidating\r\n   * @param {number} [options.intervalMs=15000] - Check interval (default 15s for fast response)\r\n   * @param {number} [options.targetUtxoCount=10] - Minimum USABLE UTXO count threshold\r\n   * @param {number} [options.splitCount=15] - Number of UTXOs to create when splitting\r\n   * @param {bigint} [options.priorityFee=0n] - Priority fee for transactions\r\n   * @param {bigint} [options.usableThreshold=1 KAS] - Minimum amount for a UTXO to be \"usable\"\r\n   * @param {boolean} [options.autoConsolidate=true] - Auto-consolidate when too many small UTXOs\r\n   * @param {number} [options.maxSmallUtxos=50] - Trigger consolidation when small count exceeds this\r\n   * @param {function} [options.onCheck] - Callback on each check\r\n   * @param {function} [options.onSplit] - Callback when split is triggered\r\n   * @param {function} [options.onConsolidate] - Callback when consolidation is triggered\r\n   * @param {function} [options.onError] - Callback on error\r\n   */\r\n  start({\r\n    address,\r\n    changeAddress,\r\n    addresses,\r\n    privateKeys,\r\n    intervalMs = 15000,\r\n    targetUtxoCount = 10,\r\n    splitCount = 15,\r\n    priorityFee = 0n,\r\n    usableThreshold = DEFAULT_USABLE_THRESHOLD,\r\n    autoConsolidate = true,\r\n    maxSmallUtxos = 50,\r\n    onCheck,\r\n    onSplit,\r\n    onConsolidate,\r\n    onError,\r\n  } = {}) {\r\n    // Build addresses array from various input options\r\n    let allAddresses = [];\r\n    if (Array.isArray(addresses) && addresses.length > 0) {\r\n      allAddresses = addresses\r\n        .filter(a => a != null && a !== '')\r\n        .map(a => String(a));\r\n    } else {\r\n      if (address) allAddresses.push(String(address));\r\n      if (changeAddress && String(changeAddress) !== String(address)) {\r\n        allAddresses.push(String(changeAddress));\r\n      }\r\n    }\r\n\r\n    if (allAddresses.length === 0) {\r\n      throw new Error(\"HeartbeatMonitor: at least one address required.\");\r\n    }\r\n    if (!privateKeys?.length) {\r\n      throw new Error(\"HeartbeatMonitor: privateKeys required.\");\r\n    }\r\n\r\n    // Stop any existing heartbeat first\r\n    this.stop();\r\n\r\n    this._config = {\r\n      addresses: allAddresses,\r\n      address: allAddresses[0], // Primary address for operations\r\n      privateKeys,\r\n      intervalMs,\r\n      targetUtxoCount,\r\n      splitCount,\r\n      priorityFee,\r\n      usableThreshold,\r\n      autoConsolidate,\r\n      maxSmallUtxos,\r\n      onCheck,\r\n      onSplit,\r\n      onConsolidate,\r\n      onError,\r\n    };\r\n\r\n    const usableKas = utxoManager.sompiToKas(usableThreshold);\r\n    const addrDisplay = allAddresses.length > 1\r\n      ? `${allAddresses.length} addresses (${allAddresses[0].slice(0, 16)}... + ${allAddresses.length - 1} more)`\r\n      : allAddresses[0].slice(0, 24) + '...';\r\n\r\n    log.log(\r\n      `[Heartbeat] Starting: check every ${intervalMs / 1000}s, ` +\r\n      `monitoring ${addrDisplay}, ` +\r\n      `threshold=${targetUtxoCount} USABLE UTXOs (>= ${usableKas} KAS), ` +\r\n      `split into ${splitCount}, autoConsolidate=${autoConsolidate} (max ${maxSmallUtxos} small)`\r\n    );\r\n\r\n    // Run first check immediately, then set interval\r\n    this._runCheck();\r\n    this._timer = setInterval(() => this._runCheck(), intervalMs);\r\n  }\r\n\r\n  /**\r\n   * Stop the heartbeat monitor.\r\n   */\r\n  stop() {\r\n    if (this._timer) {\r\n      clearInterval(this._timer);\r\n      this._timer = null;\r\n      log.log(\"[Heartbeat] Stopped.\");\r\n    }\r\n    this._config = null;\r\n  }\r\n\r\n  /**\r\n   * Check if heartbeat is currently running.\r\n   * @returns {boolean}\r\n   */\r\n  get isRunning() {\r\n    return this._timer !== null;\r\n  }\r\n\r\n  /**\r\n   * Get current heartbeat configuration (safe copy).\r\n   * @returns {Object|null}\r\n   */\r\n  get config() {\r\n    if (!this._config) return null;\r\n    // Return copy without privateKeys for security\r\n    const { privateKeys, ...safeConfig } = this._config;\r\n    return { ...safeConfig, hasPrivateKeys: !!privateKeys?.length };\r\n  }\r\n\r\n  /**\r\n   * Manually trigger a heartbeat check.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async trigger() {\r\n    if (!this._config) {\r\n      throw new Error(\"Heartbeat not configured. Call start() first.\");\r\n    }\r\n    await this._runCheck();\r\n  }\r\n\r\n  /**\r\n   * Internal: Run a single heartbeat check.\r\n   * @private\r\n   */\r\n  async _runCheck() {\r\n    // Guard: prevent concurrent checks\r\n    if (!this._config || this._checkInProgress) return;\r\n\r\n    // Guard: ensure connected\r\n    if (!this._facade.isConnected) {\r\n      log.warn(\"[Heartbeat] Skipping check - not connected.\");\r\n      return;\r\n    }\r\n\r\n    const {\r\n      addresses,\r\n      address, // Primary address for operations\r\n      privateKeys,\r\n      targetUtxoCount,\r\n      splitCount,\r\n      priorityFee,\r\n      usableThreshold,\r\n      autoConsolidate,\r\n      maxSmallUtxos,\r\n      onCheck,\r\n      onSplit,\r\n      onConsolidate,\r\n      onError,\r\n    } = this._config;\r\n\r\n    this._checkInProgress = true;\r\n\r\n    try {\r\n      // Fetch fresh UTXO data for ALL addresses (exclude spent from cache)\r\n      let entries;\r\n      if (addresses.length > 1) {\r\n        entries = await this._facade.getUtxosForAddresses(addresses, {\r\n          useCache: false,\r\n          excludeSpent: true,\r\n        });\r\n      } else {\r\n        entries = await this._facade.getUtxos(addresses[0], {\r\n          useCache: false,\r\n          excludeSpent: true,\r\n        });\r\n      }\r\n\r\n      const totalCount = entries.length;\r\n      const totalBalance = this._facade.calculateTotalBalance(entries);\r\n\r\n      // Categorize UTXOs by usability\r\n      let usableCount = 0;\r\n      let usableBalance = 0n;\r\n      let smallCount = 0;\r\n      let smallBalance = 0n;\r\n\r\n      for (const entry of entries) {\r\n        const amt = utxoManager.entryAmountSompi(entry);\r\n        if (amt >= usableThreshold) {\r\n          usableCount++;\r\n          usableBalance += amt;\r\n        } else {\r\n          smallCount++;\r\n          smallBalance += amt;\r\n        }\r\n      }\r\n\r\n      const addrInfo = addresses.length > 1 ? ` (across ${addresses.length} addresses)` : '';\r\n      log.log(\r\n        `[Heartbeat] Check: ${usableCount} usable (>= ${utxoManager.sompiToKas(usableThreshold)} KAS), ` +\r\n        `${smallCount} small, total: ${utxoManager.sompiToKas(totalBalance)} KAS${addrInfo}`\r\n      );\r\n\r\n      // Invoke onCheck callback with detailed info\r\n      if (typeof onCheck === \"function\") {\r\n        try {\r\n          onCheck({\r\n            totalCount,\r\n            usableCount,\r\n            smallCount,\r\n            targetUtxoCount,\r\n            totalBalance,\r\n            usableBalance,\r\n            smallBalance,\r\n            entries,\r\n            addresses,\r\n          });\r\n        } catch (cbErr) {\r\n          log.warn(\"[Heartbeat] onCheck callback error:\", cbErr);\r\n        }\r\n      }\r\n\r\n      // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n      // PRIORITY 1: Emergency - NO usable UTXOs\r\n      // This is critical - wallet is effectively unusable for sends\r\n      // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n      if (usableCount === 0 && totalCount > 0) {\r\n        log.warn(\r\n          `[Heartbeat] \uD83D\uDEA8 CRITICAL: No usable UTXOs! Have ${totalCount} small UTXOs ` +\r\n          `(${utxoManager.sompiToKas(totalBalance)} KAS). Checking options...`\r\n        );\r\n\r\n        // Can we consolidate? Need at least 2 UTXOs to merge\r\n        if (totalCount >= 2 && autoConsolidate) {\r\n          log.log(`[Heartbeat] \uD83D\uDD27 Attempting emergency consolidation: ${totalCount} UTXOs \u2192 1`);\r\n          await this._doConsolidate({\r\n            address,\r\n            addresses, // Multi-address support\r\n            privateKeys,\r\n            targetCount: 1, // Merge ALL into 1 to maximize the single output\r\n            priorityFee,\r\n            onConsolidate,\r\n            onError,\r\n            emergency: true,\r\n          });\r\n        } else if (totalCount === 1) {\r\n          // Only 1 UTXO and it's too small - nothing we can do\r\n          log.warn(\r\n            `[Heartbeat] \u26A0\uFE0F Only 1 small UTXO (${utxoManager.sompiToKas(totalBalance)} KAS). ` +\r\n            `Cannot consolidate or split. Need more funds or wait for confirmations.`\r\n          );\r\n          // Notify via error callback so UI can show status\r\n          this._invokeErrorCallback(onError, \"insufficient_utxos\", new Error(\r\n            `Only 1 small UTXO (${utxoManager.sompiToKas(totalBalance)} KAS). Need more funds.`\r\n          ), true);\r\n        }\r\n\r\n        // Exit early - don't also try to split in same cycle\r\n        this._checkInProgress = false;\r\n        return;\r\n      }\r\n\r\n      // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n      // PRIORITY 2: Consolidate if too many small UTXOs (fragmentation)\r\n      // Prevents the \"2000 small UTXOs\" problem\r\n      // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n      if (autoConsolidate && smallCount > maxSmallUtxos) {\r\n        log.log(\r\n          `[Heartbeat] \u26A0\uFE0F Fragmentation detected: ${smallCount} small UTXOs (> ${maxSmallUtxos}). ` +\r\n          `Consolidating to prevent wallet degradation...`\r\n        );\r\n\r\n        await this._doConsolidate({\r\n          address,\r\n          addresses, // Multi-address support\r\n          privateKeys,\r\n          targetCount: splitCount,\r\n          priorityFee,\r\n          onConsolidate,\r\n          onError,\r\n          emergency: false,\r\n        });\r\n\r\n        // Exit early - let next cycle check if more action needed\r\n        this._checkInProgress = false;\r\n        return;\r\n      }\r\n\r\n      // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n      // PRIORITY 3: Split if not enough USABLE UTXOs for parallel engines\r\n      //\r\n      // SAFEGUARDS:\r\n      // 1. Only split if usableCount < targetUtxoCount (we need more)\r\n      // 2. Only split if we can create MORE UTXOs than we currently have\r\n      // 3. Only split if resulting UTXOs will still be >= usableThreshold\r\n      // 4. Calculate optimal splitCount to reach targetUtxoCount\r\n      // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n      if (usableCount > 0 && usableCount < targetUtxoCount) {\r\n        // Calculate how many UTXOs we can create while keeping each >= usableThreshold\r\n        // Account for fees: ~0.01 KAS per output\r\n        const feePerOutput = 1000000n; // 0.01 KAS conservative estimate\r\n        const totalFees = feePerOutput * BigInt(targetUtxoCount);\r\n        const availableForSplit = usableBalance - totalFees;\r\n\r\n        // Maximum outputs we can create while keeping each >= usableThreshold\r\n        const maxPossibleOutputs = availableForSplit > 0n\r\n          ? Number(availableForSplit / usableThreshold)\r\n          : 0;\r\n\r\n        // Target: create enough UTXOs to reach targetUtxoCount, but not more than we can afford\r\n        const desiredOutputs = Math.min(targetUtxoCount, maxPossibleOutputs);\r\n\r\n        // Check if splitting would actually increase our usable UTXO count\r\n        const wouldIncreaseCount = desiredOutputs > usableCount;\r\n\r\n        // Calculate what each output would be worth\r\n        const amountPerOutput = desiredOutputs > 0\r\n          ? (usableBalance - totalFees) / BigInt(desiredOutputs)\r\n          : 0n;\r\n\r\n        // Final check: outputs must be >= usableThreshold to be worth creating\r\n        const outputsWillBeUsable = amountPerOutput >= usableThreshold;\r\n\r\n        if (wouldIncreaseCount && outputsWillBeUsable && desiredOutputs >= 2) {\r\n          log.log(\r\n            `[Heartbeat] \u26A1 Low usable UTXO count (${usableCount} < ${targetUtxoCount}). ` +\r\n            `Splitting ${usableCount} UTXOs into ${desiredOutputs} @ ~${utxoManager.sompiToKas(amountPerOutput)} KAS each...`\r\n          );\r\n\r\n          await this._doSplit({\r\n            address,\r\n            addresses, // Multi-address support\r\n            privateKeys,\r\n            splitCount: desiredOutputs, // Use calculated count, not config splitCount\r\n            priorityFee,\r\n            minUtxoAmount: usableThreshold, // Only split usable UTXOs\r\n            previousCount: usableCount,\r\n            onSplit,\r\n            onError,\r\n          });\r\n        } else if (!wouldIncreaseCount) {\r\n          // Already have as many UTXOs as we can create - nothing to do\r\n          log.log(\r\n            `[Heartbeat] \u2139\uFE0F Have ${usableCount} usable UTXOs (target: ${targetUtxoCount}). ` +\r\n            `Can only create ${maxPossibleOutputs} from current balance - skipping split.`\r\n          );\r\n        } else if (!outputsWillBeUsable) {\r\n          // UTXOs would be too small to be usable\r\n          log.log(\r\n            `[Heartbeat] \u2139\uFE0F Have ${usableCount} usable UTXOs (target: ${targetUtxoCount}). ` +\r\n            `Splitting would create outputs of ${utxoManager.sompiToKas(amountPerOutput)} KAS ` +\r\n            `(below ${utxoManager.sompiToKas(usableThreshold)} KAS threshold) - skipping.`\r\n          );\r\n        } else {\r\n          log.log(\r\n            `[Heartbeat] \u2139\uFE0F Have ${usableCount} usable UTXOs (target: ${targetUtxoCount}). ` +\r\n            `Insufficient balance to split further.`\r\n          );\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      log.error(`[Heartbeat] Check failed: ${err?.message || err}`);\r\n      this._invokeErrorCallback(onError, \"check\", err);\r\n    } finally {\r\n      this._checkInProgress = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Internal: Perform UTXO consolidation.\r\n   * @private\r\n   */\r\n  async _doConsolidate({\r\n    address,\r\n    addresses,\r\n    privateKeys,\r\n    targetCount,\r\n    priorityFee,\r\n    onConsolidate,\r\n    onError,\r\n    emergency = false,\r\n  }) {\r\n    const prefix = emergency ? \"\uD83D\uDEA8 EMERGENCY\" : \"\uD83E\uDDF9\";\r\n\r\n    try {\r\n      const result = await this._facade.consolidateUtxos({\r\n        address,\r\n        addresses, // Pass addresses array for multi-address fetching\r\n        privateKeys,\r\n        targetCount,\r\n        priorityFee,\r\n      });\r\n\r\n      // Handle no-op result (already at or below target)\r\n      if (result.noOpReason) {\r\n        log.log(`[Heartbeat] ${prefix} Consolidation skipped: ${result.noOpReason}`);\r\n        if (typeof onConsolidate === \"function\") {\r\n          try {\r\n            onConsolidate({\r\n              previousCount: result.previousUtxoCount,\r\n              newCount: result.finalUtxoCount,\r\n              transactionId: null,\r\n              result,\r\n              emergency,\r\n              noOpReason: result.noOpReason,\r\n            });\r\n          } catch (cbErr) {\r\n            log.warn(\"[Heartbeat] onConsolidate callback error:\", cbErr);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      log.log(\r\n        `[Heartbeat] ${prefix} Consolidation complete: ` +\r\n        `${result.previousUtxoCount} \u2192 ${result.finalUtxoCount} UTXOs`\r\n      );\r\n\r\n      if (typeof onConsolidate === \"function\") {\r\n        try {\r\n          onConsolidate({\r\n            previousCount: result.previousUtxoCount,\r\n            newCount: result.finalUtxoCount,\r\n            transactionId: result.transactionId,\r\n            result,\r\n            emergency,\r\n          });\r\n        } catch (cbErr) {\r\n          log.warn(\"[Heartbeat] onConsolidate callback error:\", cbErr);\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      log.error(`[Heartbeat] ${prefix} Consolidation failed: ${err?.message || err}`);\r\n      this._invokeErrorCallback(onError, \"consolidate\", err, emergency);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Internal: Perform UTXO split.\r\n   * @private\r\n   */\r\n  async _doSplit({\r\n    address,\r\n    addresses,\r\n    privateKeys,\r\n    splitCount,\r\n    priorityFee,\r\n    minUtxoAmount,\r\n    previousCount,\r\n    onSplit,\r\n    onError,\r\n  }) {\r\n    try {\r\n      const result = await this._facade.splitUtxos({\r\n        address,\r\n        addresses, // Pass addresses array for multi-address fetching\r\n        splitCount,\r\n        privateKeys,\r\n        priorityFee,\r\n        minUtxoAmount, // Filter to only usable UTXOs\r\n      });\r\n\r\n      log.log(\r\n        `[Heartbeat] \u2713 Split complete: txid=${result.transactionId?.slice(0, 16)}\u2026, ` +\r\n        `created ${result.splitCount} UTXOs @ ${result.amountPerOutput} KAS each`\r\n      );\r\n\r\n      if (typeof onSplit === \"function\") {\r\n        try {\r\n          onSplit({\r\n            previousCount,\r\n            newCount: splitCount,\r\n            transactionId: result.transactionId,\r\n            result,\r\n          });\r\n        } catch (cbErr) {\r\n          log.warn(\"[Heartbeat] onSplit callback error:\", cbErr);\r\n        }\r\n      }\r\n\r\n    } catch (err) {\r\n      log.error(`[Heartbeat] Split failed: ${err?.message || err}`);\r\n      this._invokeErrorCallback(onError, \"split\", err);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Internal: Safely invoke error callback.\r\n   * @private\r\n   */\r\n  _invokeErrorCallback(onError, type, error, emergency = false) {\r\n    if (typeof onError === \"function\") {\r\n      try {\r\n        onError({ type, error, emergency });\r\n      } catch (cbErr) {\r\n        log.warn(\"[Heartbeat] onError callback error:\", cbErr);\r\n      }\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * TransportFacade: Thin wrapper for transport operations.\r\n * Delegates to specialized modules for business logic.\r\n */\r\n\r\nimport { connect } from \"./kaspa_client.js\";\r\nimport * as txBuilder from \"./tx_builder.js\";\r\nimport * as utxoManager from \"./utxo_manager.js\";\r\nimport * as utxoOps from \"./utxo_operations.js\";\r\nimport { runRpcCommand } from \"./rpc_runner.js\";\r\nimport { HeartbeatMonitor } from \"./heartbeat.js\";\r\n\r\nexport class TransportFacade {\r\n  constructor() {\r\n    this.client = null;\r\n    this.networkId = null;\r\n    this._utxoCache = new Map();\r\n    this._utxoCacheTtlMs = 500;\r\n    this._spentUtxos = new Set();\r\n    this._heartbeat = new HeartbeatMonitor(this);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Connection\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async connect(options = {}) {\r\n    const { rpcUrl, networkId = \"testnet-10\", onDisconnect } = options || {};\r\n    this.client = await connect({ rpcUrl, networkId, onDisconnect });\r\n    this.networkId = networkId;\r\n    return this.client;\r\n  }\r\n\r\n  async disconnect() {\r\n    this._heartbeat.stop();\r\n    if (this.client) {\r\n      await this.client.disconnect();\r\n      this.client = null;\r\n    }\r\n    this._utxoCache.clear();\r\n    this._spentUtxos.clear();\r\n  }\r\n\r\n  get isConnected() {\r\n    return !!(this.client && this.client.isConnected);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // UTXO Cache & Tracking\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async getUtxos(address, { useCache = false, excludeSpent = true } = {}) {\r\n    this._checkConnected();\r\n\r\n    if (useCache) {\r\n      const cached = this._utxoCache.get(address);\r\n      if (cached && Date.now() - cached.timestamp < this._utxoCacheTtlMs) {\r\n        return excludeSpent ? this._filterSpentUtxos(cached.entries) : cached.entries;\r\n      }\r\n    }\r\n\r\n    const entries = await utxoManager.getUtxosByAddress(this.client, address);\r\n    this._utxoCache.set(address, { entries, timestamp: Date.now() });\r\n\r\n    return excludeSpent ? this._filterSpentUtxos(entries) : entries;\r\n  }\r\n\r\n  /**\r\n   * Fetch UTXOs for multiple addresses (e.g., receive + change).\r\n   * Results are deduplicated and cached per-address.\r\n   * @param {string[]} addresses - Array of addresses to query\r\n   * @param {Object} [options] - { useCache, excludeSpent }\r\n   * @returns {Promise<Array>} Deduplicated UTXO entries\r\n   */\r\n  async getUtxosForAddresses(addresses, { useCache = false, excludeSpent = true } = {}) {\r\n    this._checkConnected();\r\n\r\n    const validAddresses = (addresses || [])\r\n      .filter(a => a != null && a !== '')\r\n      .map(a => String(a));\r\n\r\n    if (validAddresses.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // For single address, use existing method\r\n    if (validAddresses.length === 1) {\r\n      return this.getUtxos(validAddresses[0], { useCache, excludeSpent });\r\n    }\r\n\r\n    // Check cache for all addresses\r\n    if (useCache) {\r\n      const now = Date.now();\r\n      const allCached = validAddresses.every(addr => {\r\n        const cached = this._utxoCache.get(addr);\r\n        return cached && now - cached.timestamp < this._utxoCacheTtlMs;\r\n      });\r\n\r\n      if (allCached) {\r\n        // Merge and deduplicate from cache\r\n        const allEntries = [];\r\n        const seen = new Set();\r\n        for (const addr of validAddresses) {\r\n          const cached = this._utxoCache.get(addr);\r\n          for (const entry of cached.entries) {\r\n            const key = utxoManager.getEntryKey(entry);\r\n            if (!seen.has(key)) {\r\n              seen.add(key);\r\n              allEntries.push(entry);\r\n            }\r\n          }\r\n        }\r\n        return excludeSpent ? this._filterSpentUtxos(allEntries) : allEntries;\r\n      }\r\n    }\r\n\r\n    // Fetch from RPC (single call with all addresses)\r\n    const entries = await utxoManager.getUtxosByAddresses(this.client, validAddresses);\r\n\r\n    // Update cache per-address (group entries by address for caching)\r\n    const now = Date.now();\r\n    // For multi-address fetch, we cache the combined result under a composite key\r\n    // and also invalidate per-address caches since we have fresh data\r\n    const compositeKey = validAddresses.sort().join('|');\r\n    this._utxoCache.set(compositeKey, { entries, timestamp: now });\r\n\r\n    // Clear individual address caches to prevent stale data\r\n    for (const addr of validAddresses) {\r\n      this._utxoCache.delete(addr);\r\n    }\r\n\r\n    return excludeSpent ? this._filterSpentUtxos(entries) : entries;\r\n  }\r\n\r\n  _filterSpentUtxos(entries) {\r\n    return entries.filter((e) => !this._spentUtxos.has(utxoManager.getEntryKey(e)));\r\n  }\r\n\r\n  markUtxosAsSpent(entries) {\r\n    for (const e of entries || []) {\r\n      this._spentUtxos.add(utxoManager.getEntryKey(e));\r\n    }\r\n  }\r\n\r\n  clearSpentUtxos(entries) {\r\n    if (entries) {\r\n      for (const e of entries) {\r\n        this._spentUtxos.delete(utxoManager.getEntryKey(e));\r\n      }\r\n    } else {\r\n      this._spentUtxos.clear();\r\n    }\r\n  }\r\n\r\n  invalidateUtxoCache(address) {\r\n    if (!address) {\r\n      this._utxoCache.clear();\r\n    } else if (Array.isArray(address)) {\r\n      for (const addr of address) {\r\n        this._utxoCache.delete(String(addr));\r\n      }\r\n      // Also invalidate any composite keys containing these addresses\r\n      for (const key of this._utxoCache.keys()) {\r\n        if (key.includes('|') && address.some(a => key.includes(String(a)))) {\r\n          this._utxoCache.delete(key);\r\n        }\r\n      }\r\n    } else {\r\n      this._utxoCache.delete(String(address));\r\n      // Also invalidate any composite keys containing this address\r\n      for (const key of this._utxoCache.keys()) {\r\n        if (key.includes('|') && key.includes(String(address))) {\r\n          this._utxoCache.delete(key);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // UTXO Manager Proxies\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async getAccountUtxos(accountDescriptor) {\r\n    this._checkConnected();\r\n    return utxoManager.getAccountUtxos({ wallet: { rpc: this.client }, accountDescriptor });\r\n  }\r\n\r\n  selectUtxosLargestFirst(entries, options) {\r\n    return utxoManager.selectUtxosLargestFirst(entries, options);\r\n  }\r\n\r\n  selectUtxoForEngine(entries, engineIndex, totalEngines, minAmount) {\r\n    return utxoManager.selectUtxoForEngine(entries, engineIndex, totalEngines, minAmount);\r\n  }\r\n\r\n  calculateTotalBalance(entries) {\r\n    return utxoManager.calculateTotalBalance(entries);\r\n  }\r\n\r\n  categorizeUtxos(entries) {\r\n    return utxoManager.categorizeUtxos(entries);\r\n  }\r\n\r\n  getEntryAmount(entry) {\r\n    return utxoManager.entryAmountSompi(entry);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // TX Builder Proxies\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async estimateTransaction(args) {\r\n    return txBuilder.estimateTransaction(args);\r\n  }\r\n\r\n  estimateFee(inputCount, outputCount, payloadBytes = 0) {\r\n    return txBuilder.estimateFee(inputCount, outputCount, payloadBytes);\r\n  }\r\n\r\n  async buildPendingTransaction(args) {\r\n    return txBuilder.buildPendingTransaction(args);\r\n  }\r\n\r\n  async buildManualTransaction(options) {\r\n    this._checkConnected();\r\n    return txBuilder.buildManualTransaction({ ...options, networkId: this.networkId });\r\n  }\r\n\r\n  async buildSplitUtxoTransaction(options) {\r\n    this._checkConnected();\r\n    return txBuilder.buildSplitUtxoTransaction({ ...options, networkId: this.networkId });\r\n  }\r\n\r\n  async signPendingTransaction(pendingTx, privateKeys) {\r\n    return txBuilder.signPendingTransaction(pendingTx, privateKeys);\r\n  }\r\n\r\n  async submitPendingTransaction(pendingTx, privateKeys = []) {\r\n    this._checkConnected();\r\n    return txBuilder.submitPendingTransaction({ pendingTx, privateKeys, client: this.client });\r\n  }\r\n\r\n  async buildSignSubmitTransaction(args) {\r\n    this._checkConnected();\r\n    return txBuilder.buildSignSubmitTransaction({ ...args, client: this.client });\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // High-Level UTXO Operations (Delegate to utxo_operations.js)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Manually build and send a transaction with full control.\r\n   * Supports janitor mode (dust sweeping).\r\n   */\r\n  async manualSend({\r\n    fromAddress,\r\n    toAddress,\r\n    amount,\r\n    payload,\r\n    privateKeys,\r\n    priorityFee = 0n,\r\n    engineIndex,\r\n    totalEngines,\r\n    optimisticSpend = true,\r\n    janitorMode = true,\r\n    smallThreshold = 100000000n,\r\n    maxSmallSweep = 5,\r\n    addresses,\r\n  } = {}) {\r\n    this._checkConnected();\r\n\r\n    if (!fromAddress) throw new Error(\"manualSend: fromAddress required.\");\r\n    if (!toAddress) throw new Error(\"manualSend: toAddress required.\");\r\n    if (amount === undefined || amount === null) throw new Error(\"manualSend: amount required.\");\r\n\r\n    const amountSompi = typeof amount === \"bigint\" ? amount : utxoManager.kasToSompi(amount);\r\n\r\n    // Query UTXOs from all provided addresses (receive + change) to find funds\r\n    const allAddresses = (Array.isArray(addresses) && addresses.length > 0)\r\n      ? addresses.filter(a => a != null && a !== '').map(a => String(a))\r\n      : null;\r\n\r\n    let utxoEntries;\r\n    if (allAddresses && allAddresses.length > 1) {\r\n      utxoEntries = await this.getUtxosForAddresses(allAddresses, {\r\n        useCache: true,\r\n        excludeSpent: optimisticSpend,\r\n      });\r\n    } else {\r\n      utxoEntries = await this.getUtxos(fromAddress, {\r\n        useCache: true,\r\n        excludeSpent: optimisticSpend,\r\n      });\r\n    }\r\n\r\n    const result = await utxoOps.manualSend({\r\n      client: this.client,\r\n      networkId: this.networkId,\r\n      fromAddress,\r\n      toAddress,\r\n      amountSompi,\r\n      payload,\r\n      privateKeys,\r\n      priorityFee,\r\n      engineIndex,\r\n      totalEngines,\r\n      utxoEntries,\r\n      janitorMode,\r\n      smallThreshold,\r\n      maxSmallSweep,\r\n    });\r\n\r\n    // Mark spent optimistically\r\n    if (optimisticSpend && result.usedEntries) {\r\n      this.markUtxosAsSpent(result.usedEntries);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Split UTXOs into multiple equal outputs for parallel transactions.\r\n   * Supports multi-address mode: pass `addresses` array to fetch from all addresses.\r\n   * @param {Object} options\r\n   * @param {string} [options.address] - Primary address (for single-address mode)\r\n   * @param {string[]} [options.addresses] - Array of addresses (for multi-address mode)\r\n   * @param {number} options.splitCount - Number of outputs to create\r\n   * @param {Array} options.privateKeys - Private keys for signing\r\n   * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n   * @param {bigint} [options.minUtxoAmount] - Minimum UTXO amount to include (filters small UTXOs)\r\n   */\r\n  async splitUtxos({ address, addresses, splitCount, privateKeys, priorityFee = 0n, minUtxoAmount = 0n } = {}) {\r\n    this._checkConnected();\r\n\r\n    // Build addresses array\r\n    const allAddresses = Array.isArray(addresses) && addresses.length > 0\r\n      ? addresses.filter(a => a != null && a !== '').map(a => String(a))\r\n      : (address ? [String(address)] : []);\r\n\r\n    if (allAddresses.length === 0) throw new Error(\"splitUtxos: address or addresses required.\");\r\n    if (!splitCount || splitCount < 2 || splitCount > 100) {\r\n      throw new Error(\"splitUtxos: splitCount must be 2-100.\");\r\n    }\r\n    if (!privateKeys?.length) throw new Error(\"splitUtxos: privateKeys required.\");\r\n\r\n    const primaryAddress = allAddresses[0];\r\n\r\n    this.clearSpentUtxos();\r\n    this.invalidateUtxoCache(allAddresses);\r\n\r\n    // Fetch UTXOs from all addresses\r\n    let entries;\r\n    if (allAddresses.length > 1) {\r\n      entries = await this.getUtxosForAddresses(allAddresses, { useCache: false, excludeSpent: false });\r\n    } else {\r\n      entries = await this.getUtxos(primaryAddress, { useCache: false, excludeSpent: false });\r\n    }\r\n\r\n    if (entries.length === 0) throw new Error(\"No UTXOs available to split.\");\r\n\r\n    // Filter to only usable UTXOs if minUtxoAmount is specified\r\n    let usableEntries = entries;\r\n    if (minUtxoAmount > 0n) {\r\n      usableEntries = entries.filter(e => utxoManager.entryAmountSompi(e) >= minUtxoAmount);\r\n      if (usableEntries.length === 0) {\r\n        const totalBalance = this.calculateTotalBalance(entries);\r\n        throw new Error(\r\n          `No usable UTXOs (>= ${utxoManager.sompiToKas(minUtxoAmount)} KAS). ` +\r\n          `Have ${entries.length} UTXOs totaling ${utxoManager.sompiToKas(totalBalance)} KAS but all are too small.`\r\n        );\r\n      }\r\n    }\r\n\r\n    // Validate split is worthwhile\r\n    const totalUsable = this.calculateTotalBalance(usableEntries);\r\n    const feeEstimate = 1000000n * BigInt(splitCount); // ~0.01 KAS per output\r\n    const amountPerOutput = (totalUsable - feeEstimate) / BigInt(splitCount);\r\n    if (amountPerOutput < 50000000n) { // 0.5 KAS minimum per output\r\n      throw new Error(\r\n        `Split would create outputs too small (${utxoManager.sompiToKas(amountPerOutput)} KAS each). ` +\r\n        `Need more funds or fewer splits.`\r\n      );\r\n    }\r\n\r\n    const result = await utxoOps.splitUtxos({\r\n      client: this.client,\r\n      networkId: this.networkId,\r\n      address: primaryAddress,\r\n      privateKeys,\r\n      entries: usableEntries,\r\n      splitCount,\r\n      priorityFee,\r\n    });\r\n\r\n    this.clearSpentUtxos();\r\n    this.invalidateUtxoCache(allAddresses);\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Consolidate all UTXOs into a target number of equal outputs.\r\n   * Supports multi-address mode: pass `addresses` array to fetch from all addresses.\r\n   * @param {Object} options\r\n   * @param {string} [options.address] - Primary address (for single-address mode)\r\n   * @param {string[]} [options.addresses] - Array of addresses (for multi-address mode)\r\n   * @param {Array} options.privateKeys - Private keys for signing\r\n   * @param {number} [options.targetCount=5] - Target number of output UTXOs\r\n   * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n   * @param {number} [options.maxInputsPerTx=80] - Maximum inputs per transaction\r\n   * @param {function} [options.onProgress] - Progress callback\r\n   */\r\n  async consolidateUtxos({\r\n    address,\r\n    addresses,\r\n    privateKeys,\r\n    targetCount = 5,\r\n    priorityFee = 0n,\r\n    maxInputsPerTx = 80,\r\n    onProgress,\r\n  } = {}) {\r\n    this._checkConnected();\r\n\r\n    // Build addresses array\r\n    const allAddresses = Array.isArray(addresses) && addresses.length > 0\r\n      ? addresses.filter(a => a != null && a !== '').map(a => String(a))\r\n      : (address ? [String(address)] : []);\r\n\r\n    if (allAddresses.length === 0) throw new Error(\"consolidateUtxos: address or addresses required.\");\r\n    if (!privateKeys?.length) throw new Error(\"consolidateUtxos: privateKeys required.\");\r\n    if (targetCount < 1 || targetCount > 100) {\r\n      throw new Error(\"consolidateUtxos: targetCount must be 1-100.\");\r\n    }\r\n\r\n    const primaryAddress = allAddresses[0];\r\n\r\n    this.clearSpentUtxos();\r\n    this.invalidateUtxoCache(allAddresses);\r\n\r\n    // Fetch UTXOs from all addresses\r\n    let entries;\r\n    if (allAddresses.length > 1) {\r\n      entries = await this.getUtxosForAddresses(allAddresses, { useCache: false, excludeSpent: false });\r\n    } else {\r\n      entries = await this.getUtxos(primaryAddress, { useCache: false, excludeSpent: false });\r\n    }\r\n\r\n    if (entries.length === 0) throw new Error(\"No UTXOs available to consolidate.\");\r\n\r\n    const result = await utxoOps.consolidateUtxos({\r\n      client: this.client,\r\n      networkId: this.networkId,\r\n      address: primaryAddress,\r\n      privateKeys,\r\n      entries,\r\n      targetCount,\r\n      priorityFee,\r\n      maxInputsPerTx,\r\n      onProgress,\r\n    });\r\n\r\n    // Update spent tracking from consolidation\r\n    if (result.spentKeys) {\r\n      for (const key of result.spentKeys) {\r\n        this._spentUtxos.add(key);\r\n      }\r\n    }\r\n\r\n    this.clearSpentUtxos();\r\n    this.invalidateUtxoCache(allAddresses);\r\n\r\n    // Wait for settlement then fetch final state\r\n    await new Promise(resolve => setTimeout(resolve, 2000));\r\n\r\n    // Fetch from all addresses to get accurate final count\r\n    let finalEntries;\r\n    if (allAddresses.length > 1) {\r\n      finalEntries = await this.getUtxosForAddresses(allAddresses, { useCache: false, excludeSpent: false });\r\n    } else {\r\n      finalEntries = await this.getUtxos(primaryAddress, { useCache: false, excludeSpent: false });\r\n    }\r\n    const finalBalance = this.calculateTotalBalance(finalEntries);\r\n\r\n    return {\r\n      ...result,\r\n      outputCount: finalEntries.length,\r\n      finalUtxoCount: finalEntries.length,\r\n      totalInput: finalBalance,\r\n      totalInputKas: utxoManager.sompiToKas(finalBalance),\r\n      amountPerOutput: utxoManager.sompiToKas(\r\n        finalBalance / BigInt(Math.max(1, finalEntries.length))\r\n      ),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get UTXO analysis for an address.\r\n   */\r\n  async analyzeUtxos(address) {\r\n    this._checkConnected();\r\n\r\n    const entries = await this.getUtxos(address, { useCache: false, excludeSpent: false });\r\n    const categories = this.categorizeUtxos(entries);\r\n    const totalBalance = this.calculateTotalBalance(entries);\r\n\r\n    return {\r\n      address,\r\n      totalBalance,\r\n      totalBalanceKas: utxoManager.sompiToKas(totalBalance),\r\n      utxoCount: entries.length,\r\n      pendingSpent: this._spentUtxos.size,\r\n      categories: {\r\n        dust: { count: categories.dust.length, total: this.calculateTotalBalance(categories.dust) },\r\n        small: { count: categories.small.length, total: this.calculateTotalBalance(categories.small) },\r\n        medium: { count: categories.medium.length, total: this.calculateTotalBalance(categories.medium) },\r\n        large: { count: categories.large.length, total: this.calculateTotalBalance(categories.large) },\r\n      },\r\n      entries,\r\n    };\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // RPC\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async runRpcCommand(cmdText) {\r\n    return runRpcCommand(this.client, cmdText);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Heartbeat Proxies (delegates to HeartbeatMonitor)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  startHeartbeat(options) {\r\n    return this._heartbeat.start(options);\r\n  }\r\n\r\n  stopHeartbeat() {\r\n    return this._heartbeat.stop();\r\n  }\r\n\r\n  get isHeartbeatRunning() {\r\n    return this._heartbeat.isRunning;\r\n  }\r\n\r\n  get heartbeatConfig() {\r\n    return this._heartbeat.config;\r\n  }\r\n\r\n  async triggerHeartbeat() {\r\n    return await this._heartbeat.trigger();\r\n  }\r\n\r\n  _checkConnected() {\r\n    if (!this.client) throw new Error(\"TransportFacade: Not connected to Kaspa node.\");\r\n  }\r\n}\r\n", "// wallet_service.js\r\nimport {\r\n  Wallet,\r\n  Resolver,\r\n  kaspaToSompi,\r\n  sompiToKaspaString,\r\n  AccountsDiscoveryKind,\r\n  Generator,\r\n  XPrv,\r\n  Mnemonic,\r\n  PrivateKeyGenerator,\r\n} from \"../kas-wasm/kaspa.js\";\r\nimport { storeWalletData, loadWalletData } from \"./storage.js\";\r\nimport * as utilities from \"../utilities/utilities.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst DEFAULT_FILENAME = \"default_wallet\";\r\nconst defaultLogger = Logger.create(LogModule.identity.walletService);\r\nlet wallet = null;\r\nlet walletInitialized = false;\r\nlet walletSecret = null;\r\nlet accountId = null;\r\nlet filename = DEFAULT_FILENAME;\r\nlet currentNetworkId = null;\r\nlet currentAccountIndex = 0;\r\nlet currentReceivingAddress = null;\r\nlet log = (...args) => defaultLogger.log(...args);\r\nlet warn = (...args) => defaultLogger.warn(...args);\r\n// Mutable balance callback \u2013 can be (re-)set after init via setOnBalanceChange()\r\nlet _onBalanceChange = null;\r\n// State flags\r\nlet walletOpened = false;\r\nlet walletConnected = false;\r\nlet walletStarted = false;\r\n\r\n/**\r\n * Get internal wallet context for advanced flows (UTXO selection, WASM tx builder, etc.)\r\n */\r\nexport function getWalletContext() {\r\n  if (!wallet) return null;\r\n\r\n  return {\r\n    ...wallet, // Spread all properties/methods from the Wallet instance\r\n    walletInitialized,\r\n    accountId,\r\n    filename,\r\n    currentNetworkId,\r\n    currentAccountIndex,\r\n    currentReceivingAddress,\r\n    log\r\n  };\r\n}\r\n\r\n/** Get the current receiving address for the active account */\r\nexport function getReceivingAddress() {\r\n  return currentReceivingAddress;\r\n}\r\n\r\n/**\r\n * Get the active account's receive and change addresses.\r\n * @returns {Promise<{ receiveAddress: string|null, changeAddress: string|null }>}\r\n */\r\nexport async function getActiveAccountAddresses() {\r\n  if (!walletInitialized || !wallet) {\r\n    return { receiveAddress: currentReceivingAddress || null, changeAddress: null };\r\n  }\r\n\r\n  try {\r\n    const accounts = await wallet.accountsEnumerate({});\r\n    if (!accounts?.accountDescriptors?.length) {\r\n      return { receiveAddress: currentReceivingAddress || null, changeAddress: null };\r\n    }\r\n\r\n    const activeAccount = accounts.accountDescriptors[currentAccountIndex || 0];\r\n    return {\r\n      receiveAddress: activeAccount.receiveAddress ? String(activeAccount.receiveAddress) : null,\r\n      changeAddress: activeAccount.changeAddress ? String(activeAccount.changeAddress) : null,\r\n    };\r\n  } catch (err) {\r\n    warn(\"[WalletService] getActiveAccountAddresses failed:\", err.message);\r\n    // Fallback to cached receive address\r\n    return { receiveAddress: currentReceivingAddress || null, changeAddress: null };\r\n  }\r\n}\r\n\r\n/** Get the current wallet secret (password)\r\n * @returns {string|null} walletSecret\r\n */\r\nexport function getWalletSecret() {\r\n  return walletSecret;\r\n}\r\n\r\n/**\r\n * Get a list of all wallet files/descriptors available.\r\n * @returns {Promise<Array>} Array of wallet descriptors (each has filename, title, etc.)\r\n */\r\nexport async function getAllWallets() {\r\n  if (!wallet) {\r\n    throw new Error(\"Wallet not initialized. Call init() first.\");\r\n  }\r\n  try {\r\n    const result = await wallet.walletEnumerate({});\r\n    return result.walletDescriptors || [];\r\n  } catch (err) {\r\n    throw new Error(\r\n      \"Failed to enumerate wallets: \" +\r\n        (err && err.message ? err.message : err),\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Get the mnemonic phrase from storage for the given wallet filename and password.\r\n * @param {string} filename - Wallet filename.\r\n * @param {string} password - Password to decrypt wallet data.\r\n * @returns {Promise<string>} - The mnemonic phrase.\r\n */\r\nexport async function getMnemonic({ theFilename = \"\", password = \"\" } = {}) {\r\n  if (theFilename.length === 0) {\r\n    theFilename = filename;\r\n  }\r\n  if (password.length === 0) {\r\n    password = walletSecret;\r\n  }\r\n  const walletData = await loadWalletData(theFilename, password);\r\n  return walletData.mnemonic;\r\n}\r\n\r\n/**\r\n * Get the extended private key (XPrv) for the current wallet.\r\n * @returns {Promise<string>} - The XPrv as a string.\r\n */\r\nexport async function getXprv() {\r\n  if (!walletInitialized || !wallet) {\r\n    throw new Error(\"Wallet not initialized. Call init() first.\");\r\n  }\r\n  const walletData = await loadWalletData(filename, walletSecret);\r\n  const xPrv = XPrv.fromXPrv(walletData.xprv);\r\n  return xPrv.toString();\r\n}\r\n\r\n/**\r\n * Get private keys for signing transactions.\r\n * This derives private keys from the wallet's xprv for the active account.\r\n * @param {number} [keyCount=10] - Number of receive keys to generate.\r\n * @param {number} [changeKeyCount=5] - Number of change keys to generate.\r\n * @returns {Promise<Array>} - Array of PrivateKey objects (WASM).\r\n */\r\nexport async function getPrivateKeys({ keyCount = 10, changeKeyCount = 5 } = {}) {\r\n  if (!walletInitialized || !wallet) {\r\n    throw new Error(\"Wallet not initialized. Call init() first.\");\r\n  }\r\n  const walletData = await loadWalletData(filename, walletSecret);\r\n  if (!walletData?.xprv) {\r\n    throw new Error(\"No xprv found in wallet data. Cannot derive private keys.\");\r\n  }\r\n\r\n  const xPrv = XPrv.fromXPrv(walletData.xprv);\r\n  const keyGen = new PrivateKeyGenerator(xPrv, false, BigInt(currentAccountIndex), null);\r\n\r\n  const keys = [];\r\n  // Generate receive keys\r\n  for (let i = 0; i < keyCount; i++) {\r\n    keys.push(keyGen.receiveKey(i));\r\n  }\r\n  // Generate change keys\r\n  for (let i = 0; i < changeKeyCount; i++) {\r\n    keys.push(keyGen.changeKey(i));\r\n  }\r\n\r\n  return keys;\r\n}\r\n\r\n/**\r\n * Get the spendable (mature) balance for the current wallet account.\r\n * @returns {Promise<BigInt>} - The spendable balance in sompi (BigInt).\r\n */\r\nexport async function getSpendableBalance() {\r\n  const res = await wallet.accountsGet({ accountId });\r\n\r\n  let bal = null;\r\n\r\n  if (res.account?.balance) {\r\n    bal = res.account.balance;\r\n  } else if (res.accounts?.[0]?.balance) {\r\n    bal = res.accounts[0].balance;\r\n  } else if (res.accountDescriptor?.balance) {\r\n    bal = res.accountDescriptor.balance;\r\n  }\r\n\r\n  if (!bal || !bal.mature) {\r\n    return 0n;\r\n  }\r\n\r\n  return BigInt(bal.mature);\r\n}\r\n\r\n/**\r\n * Initialize the Kaspa wallet with the given RPC client and network.\r\n * The provided rpcClient must already be connected.\r\n * Adds a balance event listener for UI/callback updates.\r\n * @param {Object} params\r\n * @param {Object} params.rpcClient - The Kaspa RPC client instance (must be connected).\r\n * @param {string} params.networkId - Network ID (e.g., 'mainnet', 'testnet-10').\r\n * @param {string|null} [params.balanceElementId] - Optional DOM element ID to update balance.\r\n * @param {function|null} [params.onBalanceChange] - Optional callback to receive balance updates.\r\n */\r\nexport function init({\r\n  rpcClient,\r\n  networkId,\r\n  balanceElementId = null,\r\n  onBalanceChange = null,\r\n  logger = null,\r\n} = {}) {\r\n  if (walletInitialized) return walletInitialized;\r\n\r\n  // Use the provided logger, or the module logger if not supplied\r\n  if (typeof logger === \"function\") {\r\n    log = logger;\r\n    warn = logger;\r\n  } else {\r\n    log = (...args) => defaultLogger.log(...args);\r\n    warn = (...args) => defaultLogger.warn(...args);\r\n  }\r\n\r\n  // Store the initial callback (if any) in the module-level variable\r\n  if (typeof onBalanceChange === \"function\") {\r\n    _onBalanceChange = onBalanceChange;\r\n  }\r\n\r\n  currentNetworkId = networkId;\r\n\r\n  // 1. Construct wallet with proper options (use own Resolver in resolver mode to avoid cross-module class mismatch)\r\n  wallet = new Wallet({\r\n    resident: false,\r\n    networkId,\r\n    url: rpcClient?.url || undefined,\r\n    resolver: rpcClient?.url ? undefined : new Resolver(),\r\n  });\r\n\r\n  if (rpcClient?.url) {\r\n    log(\"Initializing wallet with direct connect to RPC URL:\", rpcClient.url);\r\n  } else {\r\n    log(\"Initializing wallet with public node using RPC resolver.\");\r\n  }\r\n\r\n  // 2. Add the balance event listener to update balance on changes.\r\n  //    Uses the module-level _onBalanceChange so it always calls\r\n  //    the latest registered callback (even if set after init).\r\n  wallet.addEventListener(\"balance\", (event) => {\r\n    const bal = event?.data?.balance;\r\n\r\n    if (bal && typeof bal.mature !== \"undefined\") {\r\n      const matureBalance = sompiToKaspaString(bal.mature);\r\n\r\n      // You can update your UI or call a callback here\r\n      log(\"Balance changed:\", matureBalance, \"KAS\");\r\n\r\n      try {\r\n        // Example: update a DOM element\r\n        let balanceResult = null;\r\n        if (balanceElementId) {\r\n          balanceResult = document.getElementById(balanceElementId);\r\n          balanceResult.textContent = `Balance:\\n${matureBalance} KAS`;\r\n        }\r\n      } catch (err) {\r\n        log(\"Error updating balance element:\", err);\r\n      }\r\n\r\n      if (typeof _onBalanceChange === \"function\") {\r\n        _onBalanceChange(matureBalance);\r\n      }\r\n    }\r\n  });\r\n\r\n  walletInitialized = true;\r\n  return walletInitialized;\r\n}\r\n\r\n/**\r\n * Update (or set for the first time) the balance-change callback.\r\n * This is safe to call before or after init(). If the wallet is already\r\n * initialized the existing event listener will start calling the new callback\r\n * immediately on the next balance event.\r\n *\r\n * @param {Function|null} cb - The new callback, or null to clear it.\r\n */\r\nexport function setOnBalanceChange(cb) {\r\n  _onBalanceChange = typeof cb === \"function\" ? cb : null;\r\n}\r\n\r\n/**\r\n * Close the wallet and reset internal state.\r\n */\r\nexport async function closeWallet() {\r\n  try {\r\n    await wallet.walletClose();\r\n  } catch (err) {\r\n    log(\"Error closing wallet:\", err);\r\n    throw err;\r\n  }\r\n  wallet = null;\r\n  walletInitialized = false;\r\n  walletSecret = null;\r\n  accountId = null;\r\n  currentAccountIndex = 0;\r\n  filename = DEFAULT_FILENAME;\r\n  log = () => {};\r\n  walletOpened = false;\r\n  walletConnected = false;\r\n  walletStarted = false;\r\n}\r\n\r\n/**\r\n * Create a new wallet or import from mnemonic. Stores wallet data securely.\r\n * @param {Object} params\r\n * @param {string} params.password - Password to encrypt wallet data.\r\n * @param {string} [params.filename] - Optional wallet filename.\r\n * @param {string} [params.userHint] - Optional user hint for wallet.\r\n * @param {string|null} [params.mnemonic] - Optional mnemonic phrase to import.\r\n * @param {boolean} [params.storeMnemonic] - Whether to store mnemonic in storage.\r\n * @param {boolean} [params.discoverAddresses] - Whether to perform address discovery.\r\n * @returns {Promise<{mnemonic: string, address: string}>} - The mnemonic and receiving address.\r\n */\r\nexport async function createWallet({\r\n  password,\r\n  walletFilename = DEFAULT_FILENAME,\r\n  userHint = \"\",\r\n  mnemonic = null,\r\n  storeMnemonic = false,\r\n  discoverAddresses = true,\r\n}) {\r\n  if (!walletInitialized) {\r\n    throw new Error(\"Wallet not initialized. Call init() first.\");\r\n  }\r\n\r\n  // 1. Set wallet secret and filename\r\n  walletSecret = password;\r\n  filename = walletFilename || DEFAULT_FILENAME;\r\n\r\n  // 2. Try to open the wallet (if it exists)\r\n  try {\r\n    if (!walletOpened) {\r\n      log(\"Opening wallet...\");\r\n      const descriptors = await wallet.walletOpen({\r\n        accountDescriptors: true,\r\n        filename,\r\n        walletSecret,\r\n      });\r\n      log(\"Wallet accounts:\", descriptors);\r\n      if (descriptors) {\r\n        walletOpened = true;\r\n        log(\"Wallet opened.\");\r\n      }\r\n    }\r\n\r\n    if (!walletConnected) {\r\n      // 3. Connect and start wallet\r\n      log(\"Connecting wallet...\");\r\n      await wallet.connect();\r\n      walletConnected = true;\r\n      log(\"Wallet connected.\");\r\n    }\r\n\r\n    if (!walletStarted) {\r\n      log(\"Starting wallet...\");\r\n      await wallet.start();\r\n      walletStarted = true;\r\n      log(\"Wallet started.\");\r\n    }\r\n\r\n    // 4. Activate the account to get events like balance changes\r\n    const address = await activateAccount();\r\n\r\n    return { address: address.toString() };\r\n  } catch (err) {\r\n    // If wallet doesn't exist, create a new one\r\n    return await _createNewWallet({\r\n      password,\r\n      walletFilename,\r\n      userHint,\r\n      mnemonic,\r\n      storeMnemonic,\r\n      discoverAddresses,\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Internal function to create a new wallet.\r\n * @param {Object} params\r\n * @param {string} params.password - Password to encrypt wallet data.\r\n * @param {string} params.filename - Wallet filename.\r\n * @param {string} params.userHint - User hint for wallet.\r\n * @param {string|null} params.mnemonic - Mnemonic phrase to import.\r\n * @param {boolean} params.storeMnemonic - Whether to store mnemonic in storage.\r\n * @param {boolean} params.discoverAddresses - Whether to perform address discovery.\r\n * @returns {Promise<{mnemonic: string, address: string}>} - The mnemonic and receiving address.\r\n */\r\nasync function _createNewWallet({\r\n  password,\r\n  walletFilename = DEFAULT_FILENAME,\r\n  userHint = \"\",\r\n  mnemonic = null,\r\n  storeMnemonic = false,\r\n  discoverAddresses = true,\r\n}) {\r\n  log(\"Creating new wallet...\");\r\n\r\n  // 1. Create or import mnemonic\r\n  const mnemonicPhrase = mnemonic || _generateMnemonic(24);\r\n\r\n  // 2. Create wallet file\r\n  filename = walletFilename;\r\n  try {\r\n    const descriptor = await wallet.walletCreate({\r\n      filename,\r\n      overwriteWalletStorage: false,\r\n      title: filename,\r\n      userHint,\r\n      walletSecret: password,\r\n    });\r\n  } catch (err) {\r\n    const msg = err && err.message ? err.message : String(err);\r\n    if (msg.includes(\"Wallet already exists\")) {\r\n      // Suppress this specific error, do nothing\r\n    } else {\r\n      // Propogate the unknown error\r\n      throw new Error(\"Error creating wallet: \" + msg);\r\n    }\r\n  }\r\n\r\n  // 3. Open wallet\r\n  if (!walletOpened) {\r\n    log(\"Opening newly created wallet...\");\r\n    await wallet.walletOpen({ filename, walletSecret });\r\n    walletOpened = true;\r\n    log(\"Wallet opened.\");\r\n  }\r\n\r\n  // 4. Insert mnemonic key\r\n  let prvKeyData = await wallet.prvKeyDataCreate({\r\n    walletSecret,\r\n    kind: \"mnemonic\",\r\n    mnemonic: mnemonicPhrase,\r\n  });\r\n\r\n  // 5. Create account\r\n  let account = await wallet.accountsCreate({\r\n    walletSecret,\r\n    type: \"bip32\",\r\n    accountName: \"Account-B\",\r\n    prvKeyDataId: prvKeyData.prvKeyDataId,\r\n  });\r\n\r\n  accountId = account.accountDescriptor.accountId;\r\n\r\n  // 6. Get extended private key for address derivation and diffie-hellman encryption\r\n  const xprv = await _getXPrv(mnemonicPhrase);\r\n  const xPrvString = xprv.toString();\r\n\r\n  // 7. Store XPrv and optionally mnemonic securely in IndexedDB\r\n  if (storeMnemonic) {\r\n    await storeWalletData(\r\n      { filename, mnemonic: mnemonicPhrase, xprv: xPrvString },\r\n      password,\r\n    );\r\n  } else {\r\n    await storeWalletData({ filename, xprv: xPrvString }, password);\r\n  }\r\n\r\n  // 8. Connect and start wallet\r\n  if (!walletConnected) {\r\n    log(\"Connecting wallet...\");\r\n    await wallet.connect();\r\n    walletConnected = true;\r\n    log(\"Wallet connected.\");\r\n  }\r\n\r\n  if (!walletStarted) {\r\n    log(\"Starting wallet...\");\r\n    await wallet.start();\r\n    walletStarted = true;\r\n    log(\"Wallet started.\");\r\n  }\r\n\r\n  // 9. Optionally, perform accounts discovery to sync with network\r\n  // if you are importing existing wallet\r\n  if (discoverAddresses) {\r\n    log(\"Performing accounts discovery...\");\r\n    const results = await wallet.accountsDiscovery({\r\n      accountScanExtent: 10, // scan first 10 accounts\r\n      addressScanExtent: 50, // scan first 50 addresses per account\r\n      bip39_mnemonic: mnemonicPhrase,\r\n      discoveryKind: AccountsDiscoveryKind.BIP44,\r\n    });\r\n    log(\"Accounts discovery completed.\");\r\n  }\r\n\r\n  // 10. Activate the account to get events like balance changes\r\n  const address = await activateAccount();\r\n\r\n  log(\"Wallet created and data stored securely.\");\r\n\r\n  return { address: address.toString(), mnemonic: mnemonicPhrase };\r\n}\r\n\r\n/**\r\n * Activate the specified account index (default 0) to enable balance tracking.\r\n * @param {number} [accountIndex=0] - The account index to activate.\r\n * @returns {Promise<string>} - The receiving address of the activated account.\r\n */\r\nexport async function activateAccount(accountIndex = 0) {\r\n  // 10. Activate account to enable balance tracking\r\n  log(\"Activating account...\");\r\n  currentAccountIndex = accountIndex;\r\n  const accounts = await wallet.accountsEnumerate();\r\n  accountId = accounts.accountDescriptors[accountIndex].accountId;\r\n  const address = accounts.accountDescriptors[accountIndex].receiveAddress;\r\n  await wallet.accountsActivate({ accountId });\r\n  log(\"Account activated. Receiving address:\", address);\r\n  currentReceivingAddress = address.toString();\r\n  return address;\r\n}\r\n\r\n/**\r\n * Estimate the transaction fee for a send operation.\r\n * Uses the SDK's Generator to calculate accurate mass and fees based on actual UTXOs.\r\n * @param {Object} params\r\n * @param {string} params.amount - Amount in KAS to send\r\n * @param {string} params.toAddress - Destination address\r\n * @param {string} [params.payload] - Optional payload (hex string or UTF-8 text)\r\n * @param {string} [params.priorityFeeKas] - Optional priority fee in KAS (extra on top of base fee)\r\n * @returns {Promise<{ mass: bigint, fees: bigint, feesKas: string, priorityFee: bigint, baseFee: bigint }>}\r\n */\r\nexport async function estimateTransactionFee({\r\n  amount,\r\n  toAddress,\r\n  payload,\r\n  priorityFeeKas,\r\n}) {\r\n  // Validate inputs\r\n  if (toAddress == null || toAddress === \"\") {\r\n    throw new Error(\"Invalid address: \" + toAddress);\r\n  }\r\n  if (amount == null || isNaN(Number(amount))) {\r\n    throw new Error(amount, \" Kas, Amount must be >= MIN_KAS_AMOUNT\");\r\n  }\r\n\r\n  // Get account info\r\n  const accounts = await wallet.accountsEnumerate({});\r\n  if (!accounts.accountDescriptors?.length) {\r\n    throw new Error(\"No accounts found in wallet.\");\r\n  }\r\n  const activeAccount = accounts.accountDescriptors[currentAccountIndex];\r\n  const changeAddress = activeAccount.changeAddress;\r\n  const receiveAddress = activeAccount.receiveAddress;\r\n\r\n  // Validate addresses but keep them as strings to avoid cross-WASM-instance class mismatches.\r\n  utilities.validateAddress(changeAddress);\r\n  utilities.validateAddress(toAddress);\r\n\r\n  // Get UTXOs for the account addresses\r\n  log(\"Fetching UTXOs for addresses...\");\r\n  const addresses = [receiveAddress, changeAddress].filter(Boolean);\r\n  const utxoResult = await wallet.rpc.getUtxosByAddresses(addresses);\r\n  const utxoEntries = Array.isArray(utxoResult)\r\n    ? utxoResult\r\n    : Array.isArray(utxoResult?.entries)\r\n      ? utxoResult.entries\r\n      : [];\r\n\r\n  if (utxoEntries.length === 0) throw new Error(\"No UTXOs...\");\r\n\r\n  // Match the official SDK example: sort by amount ascending.\r\n  utxoEntries.sort((a, b) => (a.amount > b.amount ? 1 : -1));\r\n\r\n  log(`UTXOs fetched: ${utxoEntries.length} entries.`);\r\n\r\n  // Build output\r\n  const amountSompi = kaspaToSompi(amount);\r\n  const outputs = [\r\n    {\r\n      // Pass as string (validated above)\r\n      address: String(toAddress),\r\n      amount: amountSompi,\r\n    },\r\n  ];\r\n\r\n  // Priority fee (extra on top of base network fee)\r\n  let priorityFee = 0n;\r\n  if (priorityFeeKas != null && priorityFeeKas !== \"\") {\r\n    priorityFee = kaspaToSompi(priorityFeeKas);\r\n  }\r\n\r\n  // Prepare payload if provided\r\n  let payloadHex = undefined;\r\n  if (payload) {\r\n    // Check if it's already hex or needs conversion\r\n    if (/^[0-9a-fA-F]*$/.test(payload) && payload.length % 2 === 0) {\r\n      payloadHex = payload;\r\n    } else {\r\n      // Convert UTF-8 to hex\r\n      payloadHex = utilities.stringToHex(payload);\r\n    }\r\n  }\r\n\r\n  const settings = {\r\n    entries: utxoEntries,\r\n    utxoEntries: utxoEntries,\r\n    outputs,\r\n    changeAddress: String(changeAddress),\r\n    priorityFee,\r\n    payload: payloadHex,\r\n    networkId: currentNetworkId,\r\n  };\r\n\r\n  let estimate;\r\n  try {\r\n    const generator = new Generator(settings);\r\n    estimate = await generator.estimate();\r\n    try {\r\n      generator.free();\r\n    } catch {\r\n      /* ignore */\r\n    }\r\n    log(\"Generator estimate completed.\");\r\n  } catch (err) {\r\n    throw new Error(\r\n      \"Generator estimate failed: \" +\r\n        (err && err.message ? err.message : String(err)),\r\n    );\r\n  }\r\n\r\n  // estimate contains: { mass, fees, ... } from GeneratorSummary\r\n  const totalFees = estimate.fees ?? 0n;\r\n  const mass = estimate.mass ?? 0n;\r\n  const baseFee = totalFees - priorityFee;\r\n\r\n  return {\r\n    mass,\r\n    fees: totalFees,\r\n    feesKas: sompiToKaspaString(totalFees),\r\n    priorityFee,\r\n    baseFee,\r\n    utxos: utxoEntries,\r\n  };\r\n}\r\n\r\n/**\r\n * Send a transaction from the wallet.\r\n * @param {Object} params\r\n * @param {string|number|BigInt} params.amount - Amount in KAS to send.\r\n * @param {string|Object} params.toAddress - Destination address (string or Address object).\r\n * @param {string} [params.payload] - Optional payload string (will be hex encoded).\r\n * @param {string|number|BigInt} [params.priorityFeeKas] - Optional extra priority fee in KAS.\r\n * @returns {Promise<Object>} - The transaction result.\r\n */\r\nexport async function send({ amount, toAddress, payload, priorityFeeKas }) {\r\n  if (!walletInitialized || !wallet) {\r\n    throw new Error(\"Wallet not initialized. Call init() first.\");\r\n  }\r\n\r\n  // Normalize toAddress\r\n  const toAddressObj = utilities.validateAddress(toAddress);\r\n\r\n  // Determine priority fee:\r\n  // - If custom fee provided: use it as extra priority fee on top of base network fee\r\n  // - If no custom fee: use 0 (dust-floor / minimum required by network based on mass)\r\n  // - Smallest amount I've seen send successfully is 0.0000019 KAS without any payload\r\n  let priorityFeeSompi = 0n;\r\n  if (priorityFeeKas > 0) {\r\n    priorityFeeSompi = kaspaToSompi(priorityFeeKas);\r\n  }\r\n\r\n  // Convert amount to sompi and ensure BigInt\r\n  let amountSompi;\r\n  amountSompi = kaspaToSompi(amount.toString());\r\n  if (amountSompi <= 0n) {\r\n    throw new Error(\"Amount must be greater than zero.\");\r\n  }\r\n\r\n  // Ensure priorityFeeSompi is BigInt\r\n  let priorityFeeSompiChecked = priorityFeeSompi;\r\n  if (typeof priorityFeeSompiChecked !== \"bigint\") {\r\n    priorityFeeSompiChecked = BigInt(priorityFeeSompiChecked);\r\n  }\r\n\r\n  // Build request - priorityFeeSompi is extra fee on top of the base network fee\r\n  const sendRequest = {\r\n    walletSecret: walletSecret,\r\n    accountId: accountId,\r\n    priorityFeeSompi: priorityFeeSompiChecked,\r\n    destination: [\r\n      {\r\n        address: toAddressObj,\r\n        amount: amountSompi,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // Payload\r\n  if (payload) {\r\n    if (!utilities.validatePayload(payload)) {\r\n      throw new Error(\"Payload must be a string and <= 32KB\");\r\n    }\r\n    const hex = utilities.stringToHex(payload);\r\n    if (hex.length % 2 !== 0) {\r\n      throw new Error(\"Invalid hex payload\");\r\n    }\r\n    if (hex.length / 2 > 32 * 1024) {\r\n      throw new Error(\"Payload too large\");\r\n    }\r\n    sendRequest.payload = hex;\r\n  }\r\n\r\n  try {\r\n    return await wallet.accountsSend(sendRequest);\r\n  } catch (err) {\r\n    const causeMsg = err && err.message ? err.message : String(err);\r\n    throw new Error(`Transaction failed: ${causeMsg}`, { cause: err });\r\n  }\r\n}\r\n\r\n/**\r\n * Generate a new receiving or change address for the current account.\r\n * @param {boolean} [change=false] - If true, generate a change address; otherwise, receiving address.\r\n * @returns {Promise<string>} - The new address as a string.\r\n */\r\nexport async function generateNewAddress(change = false) {\r\n  const addr = await wallet.accountsCreateNewAddress({\r\n    accountId: accountId,\r\n    networkId: wallet.networkId,\r\n    addressKind: change ? \"change\" : \"receive\",\r\n  });\r\n  return addr.address;\r\n}\r\n\r\n/**\r\n * Delete wallet data from IndexedDB by filename\r\n * @param {string} filename - key for the stored wallet\r\n * @returns {Promise<void>} Resolves when deletion is complete\r\n */\r\nexport async function deleteWalletData(filename) {\r\n  // 1. Remove localStorage entries\r\n  for (let i = 0; i < localStorage.length; i++) {\r\n    const key = localStorage.key(i);\r\n    if (key && key.includes(filename)) {\r\n      localStorage.removeItem(key);\r\n    }\r\n  }\r\n\r\n  // 2. Delete IndexedDB database used by Kaspa WASM\r\n  return new Promise((resolve, reject) => {\r\n    const req = indexedDB.deleteDatabase(\"kaspa_wallet_db\");\r\n    req.onsuccess = () => resolve();\r\n    req.onerror = () => reject(req.error);\r\n    req.onblocked = () => reject(new Error(\"Delete blocked\"));\r\n  });\r\n}\r\n\r\n/**\r\n * Generate a random BIP39 mnemonic phrase.\r\n * @param {number} [wordCount=24] - Number of words in the mnemonic.\r\n * @returns {string} The generated mnemonic phrase.\r\n */\r\nfunction _generateMnemonic(wordCount = 24) {\r\n  const mnemonic = Mnemonic.random(wordCount);\r\n  return mnemonic.phrase;\r\n}\r\n\r\n/**\r\n * Derive an XPrv from a mnemonic phrase and optional passphrase.\r\n * @param {string} mnemonicPhrase - BIP39 mnemonic phrase.\r\n * @param {string|null} [passphrase=null] - Optional passphrase.\r\n * @returns {XPrv} The derived XPrv object.\r\n */\r\nfunction _getXPrv(mnemonicPhrase, passphrase = null) {\r\n  const seed = passphrase\r\n    ? new Mnemonic(mnemonicPhrase).toSeed(passphrase)\r\n    : new Mnemonic(mnemonicPhrase).toSeed();\r\n  const xPrv = new XPrv(seed);\r\n  return xPrv;\r\n}\r\n", "// storage.js\r\nimport { encryptMessage, decryptMessage } from \"../crypto/encryption.js\";\r\n\r\nconst DB_NAME = \"KaspaWalletDB\";\r\nconst STORE_NAME = \"MetaDataStore\";\r\nconst DB_VERSION = 2;\r\n\r\n/**\r\n * Initialize IndexedDB\r\n */\r\nfunction openDB() {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n    request.onupgradeneeded = (event) => {\r\n      const db = event.target.result;\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        db.createObjectStore(STORE_NAME, { keyPath: \"filename\" });\r\n      }\r\n    };\r\n\r\n    request.onsuccess = () => resolve(request.result);\r\n    request.onerror = () => reject(request.error);\r\n  });\r\n}\r\n\r\n/**\r\n * Store wallet data securely in IndexedDB\r\n * @param {object} walletData - { filename, mnemonic, xprv }\r\n * @param {string} masterPassword - encryption key\r\n */\r\nexport async function storeWalletData(walletData, masterPassword) {\r\n  const db = await openDB();\r\n  const tx = db.transaction(STORE_NAME, \"readwrite\");\r\n  const store = tx.objectStore(STORE_NAME);\r\n\r\n  const encryptedPayload = encryptMessage(\r\n    JSON.stringify(walletData),\r\n    masterPassword,\r\n  );\r\n\r\n  store.put({\r\n    filename: walletData.filename,\r\n    payload: encryptedPayload,\r\n  });\r\n\r\n  return tx.complete;\r\n}\r\n\r\n/**\r\n * Load and decrypt wallet data from IndexedDB\r\n * @param {string} filename - key for the stored wallet\r\n * @param {string} masterPassword - decryption key\r\n * @returns {object} walletData\r\n */\r\nexport async function loadWalletData(filename, masterPassword) {\r\n  const db = await openDB();\r\n  const tx = db.transaction(STORE_NAME, \"readonly\");\r\n  const store = tx.objectStore(STORE_NAME);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const request = store.get(filename);\r\n    request.onsuccess = () => {\r\n      const record = request.result;\r\n      if (!record) {\r\n        return reject(new Error(`No wallet found for filename: ${filename}`));\r\n      }\r\n      try {\r\n        const plaintext = decryptMessage(record.payload, masterPassword);\r\n        resolve(JSON.parse(plaintext));\r\n      } catch (err) {\r\n        reject(new Error(`Failed to decrypt wallet data: ${err.message}`));\r\n      }\r\n    };\r\n    request.onerror = () => reject(request.error);\r\n  });\r\n}\r\n\r\n/**\r\n * Delete wallet data from IndexedDB by filename\r\n * @param {string} filename - key for the stored wallet\r\n * @returns {Promise<void>} Resolves when deletion is complete\r\n */\r\nexport async function deleteWalletData(filename) {\r\n  // 1. Remove localStorage entries\r\n  for (let i = 0; i < localStorage.length; i++) {\r\n    const key = localStorage.key(i);\r\n    if (key && key.includes(filename)) {\r\n      localStorage.removeItem(key);\r\n    }\r\n  }\r\n\r\n  // 2. Delete IndexedDB database used by Kaspa WASM\r\n  return new Promise((resolve, reject) => {\r\n    const req = indexedDB.deleteDatabase(\"kaspa_wallet_db\");\r\n    req.onsuccess = () => resolve();\r\n    req.onerror = () => reject(req.error);\r\n    req.onblocked = () => reject(new Error(\"Delete blocked\"));\r\n  });\r\n}\r\n", "// encryption.js\r\nimport {\r\n  encryptXChaCha20Poly1305,\r\n  decryptXChaCha20Poly1305,\r\n} from \"../kas-wasm/kaspa.js\";\r\n\r\n/**\r\n * Enterprise-grade encryption wrapper using Kaspa WASM XChaCha20-Poly1305\r\n * @param {string} plaintext - The message to encrypt\r\n * @param {string} password - The password/key material\r\n * @returns {object} { version, cipherText }\r\n */\r\nexport function encryptMessage(plaintext, password) {\r\n  if (typeof plaintext !== \"string\" || typeof password !== \"string\") {\r\n    throw new TypeError(\"encryptMessage requires string inputs\");\r\n  }\r\n\r\n  try {\r\n    const cipherText = encryptXChaCha20Poly1305(plaintext, password);\r\n    return {\r\n      version: 1, // bump if you change format later\r\n      cipherText,\r\n    };\r\n  } catch (err) {\r\n    throw new Error(`Encryption failed: ${err.message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Enterprise-grade decryption wrapper using Kaspa WASM XChaCha20-Poly1305\r\n * @param {object|string} payload - Either raw cipherText string or {version, cipherText}\r\n * @param {string} password - The password/key material\r\n * @returns {string} plaintext\r\n */\r\nexport function decryptMessage(payload, password) {\r\n  if (!password || typeof password !== \"string\") {\r\n    throw new TypeError(\"decryptMessage requires a string password\");\r\n  }\r\n\r\n  let cipherText;\r\n  if (typeof payload === \"string\") {\r\n    cipherText = payload;\r\n  } else if (payload && typeof payload === \"object\" && payload.cipherText) {\r\n    if (payload.version !== 1) {\r\n      throw new Error(`Unsupported payload version: ${payload.version}`);\r\n    }\r\n    cipherText = payload.cipherText;\r\n  } else {\r\n    throw new TypeError(\r\n      \"decryptMessage requires a cipherText string or payload object\",\r\n    );\r\n  }\r\n\r\n  try {\r\n    return decryptXChaCha20Poly1305(cipherText, password);\r\n  } catch (err) {\r\n    let msg = err && err.message ? err.message : String(err);\r\n    // Check for the specific \"Unable to decrypt\" failure\r\n    if (msg.includes(\"Unable to decrypt\")) {\r\n      msg += \" (likely due to the wrong password or corrupted data)\";\r\n    }\r\n    throw new Error(`Decryption failed: ${msg}`);\r\n  }\r\n}\r\n", "import * as walletService from \"./wallet_service.js\";\r\nimport * as storage from \"./storage.js\";\r\n\r\nexport class IdentityFacade {\r\n  constructor() {\r\n    // Expose the raw service and storage modules for advanced usage\r\n    this.walletService = walletService;\r\n    this.storage = storage;\r\n  }\r\n\r\n  /**\r\n   * Initialize the wallet service with an RPC client.\r\n   * @param {Object} options\r\n   * @param {Object} options.client - The Kaspa RPC client.\r\n   * @param {string} [options.networkId] - Network ID (e.g. 'testnet-10').\r\n   * @param {string} [options.balanceElementId] - Optional DOM ID for auto-updating balance.\r\n   * @param {function} [options.onBalanceChange] - Optional callback for balance changes.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async init({ client, networkId, balanceElementId, onBalanceChange } = {}) {\r\n    // Map 'client' to 'rpcClient' as expected by wallet_service\r\n    return await walletService.init({\r\n      rpcClient: client,\r\n      networkId,\r\n      balanceElementId,\r\n      onBalanceChange,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update (or set) the balance-change callback after init.\r\n   * @param {Function|null} cb\r\n   */\r\n  setOnBalanceChange(cb) {\r\n    walletService.setOnBalanceChange(cb);\r\n  }\r\n\r\n  /**\r\n   * Create a new wallet or open an existing one.\r\n   * @param {Object} options\r\n   * @param {string} options.password - Wallet password.\r\n   * @param {string} [options.walletFilename] - Filename to save/load.\r\n   * @param {string} [options.mnemonic] - Mnemonic to import (optional).\r\n   * @param {boolean} [options.storeMnemonic] - Whether to store the mnemonic (default false).\r\n   * @returns {Promise<{address: string, mnemonic: string}>}\r\n   */\r\n  async createOrOpenWallet(options) {\r\n    return await walletService.createWallet(options);\r\n  }\r\n\r\n  /** Close the active wallet.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async closeWallet() {\r\n    return await walletService.closeWallet();\r\n  }\r\n\r\n  /** Set the active account by index.\r\n   * @param {number} index - Account index to activate.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async setActiveAccount(index) {\r\n    return await walletService.activateAccount(index);\r\n  }\r\n\r\n  /** Generate a new receive address for the current wallet.\r\n   * @returns {Promise<string>} New address.\r\n   */\r\n  async generateNewAddress() {\r\n    return await walletService.generateNewAddress();\r\n  }\r\n\r\n  /** Estimate transaction fee.\r\n   * @param {number|string} amount - Amount in KAS.\r\n   * @param {string} toAddress - Recipient address.\r\n   * @param {string} [payload] - Optional transaction payload.\r\n   * @param {number} [priorityFeeKas] - Priority fee in KAS.\r\n   * @returns {Promise<number>} Estimated fee in KAS.\r\n   */\r\n  async estimateTransactionFee(amount, toAddress, payload, priorityFeeKas) {\r\n    return await walletService.estimateTransactionFee(\r\n      amount,\r\n      toAddress,\r\n      payload,\r\n      priorityFeeKas,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Send a transaction.\r\n   * @param {Object} options\r\n   * @param {string} options.toAddress - Recipient address.\r\n   * @param {number|string} options.amount - Amount in KAS.\r\n   * @param {string} [options.payload] - Optional transaction payload.\r\n   * @param {string} [options.password] - Wallet password (if required by service).\r\n   * @param {number} [options.priorityFeeKas] - Priority fee in KAS.\r\n   * @returns {Promise<Object>} Transaction result.\r\n   */\r\n  async send(options) {\r\n    return await walletService.send(options);\r\n  }\r\n\r\n  /**\r\n   * Delete a wallet from storage.\r\n   * @param {string} filename\r\n   */\r\n  async deleteWallet(filename) {\r\n    return await storage.deleteWalletData(filename);\r\n  }\r\n\r\n  /** Get the extended private key (XPrv) of the active wallet.\r\n   * @returns {Promise<string>} XPrv as hex string.\r\n   */\r\n  async getXprv() {\r\n    return await walletService.getXprv();\r\n  }\r\n\r\n  /**\r\n   * Get private keys for signing transactions manually.\r\n   * Derives keys from the wallet's xprv for the active account.\r\n   * @param {Object} [options] - Options\r\n   * @param {number} [options.keyCount=10] - Number of receive keys\r\n   * @param {number} [options.changeKeyCount=5] - Number of change keys\r\n   * @returns {Promise<Array>} Array of PrivateKey objects\r\n   */\r\n  async getPrivateKeys(options) {\r\n    return await walletService.getPrivateKeys(options);\r\n  }\r\n\r\n  /**\r\n   * Access the mnemonic of the active wallet.\r\n   */\r\n  async getMnemonic() {\r\n    return await walletService.getMnemonic();\r\n  }\r\n\r\n  /**\r\n   * Access the spendable balance of the active wallet.\r\n   */\r\n  async getSpendableBalance() {\r\n    return await walletService.getSpendableBalance();\r\n  }\r\n\r\n  /**\r\n   * Access the active wallet instance if exposed by the service.\r\n   */\r\n  async getAllWallets() {\r\n    return await walletService.getAllWallets();\r\n  }\r\n\r\n  /**\r\n   * Access the Wallet class definition if available.\r\n   * This allows advanced users to instantiate Wallet directly if needed.\r\n   */\r\n  get wallet() {\r\n    return walletService.getWalletContext();\r\n  }\r\n\r\n  /** Access the receiving address of the active wallet. */\r\n  get address() {\r\n    return walletService.getReceivingAddress();\r\n  }\r\n\r\n  /**\r\n   * Get the active account descriptor with receive and change addresses.\r\n   * @returns {Promise<{ receiveAddress: string|null, changeAddress: string|null }>}\r\n   */\r\n  async getActiveAccount() {\r\n    return await walletService.getActiveAccountAddresses();\r\n  }\r\n\r\n  /**\r\n   * Access the wallet secret of the active wallet.\r\n   */\r\n  get walletSecret() {\r\n    return walletService.getWalletSecret();\r\n  }\r\n}\r\n", "import {\r\n  dehydrateTx,\r\n  dehydrateBlock,\r\n  payloadToHex,\r\n  hexToString\r\n} from \"../utilities/utilities.js\";\r\n\r\n/**\r\n * Production-ready forward DAG walker.\r\n * Supports start/end hashes, blueScore boundaries, and timestamp filtering.\r\n */\r\nexport async function walkDagRange({\r\n  client,\r\n  startHash,\r\n  endHash = null,\r\n  prefixes = [],\r\n  onMatch,\r\n  maxSeconds = 30,\r\n  minTimestamp = 0,\r\n  logFn = () => {},\r\n} = {}) {\r\n  const startedAt = Date.now();\r\n  const deadline = startedAt + maxSeconds * 1000;\r\n\r\n  // Normalize prefixes once (hex)\r\n  const hexPrefixes = prefixes.map(p => payloadToHex(p)).filter(Boolean);\r\n\r\n  let stopScore = Infinity;\r\n  if (endHash) {\r\n    try {\r\n      const endResp = await client.getBlock({\r\n        hash: endHash,\r\n        includeTransactions: true,\r\n      });\r\n      logFn(\"[walkDagRange] endHash getBlock response:\", endResp);\r\n      const endBlockSafe = dehydrateBlock(endResp?.block);\r\n      stopScore = endBlockSafe?.blueScore ?? Infinity;\r\n      logFn(\"[walkDagRange] stopScore set to:\", stopScore);\r\n    } catch (err) {\r\n      logFn(`[WARN] Could not resolve endHash score, walking to present.`);\r\n    }\r\n  }\r\n\r\n  let lowHash = startHash;\r\n  let loopCount = 0;\r\n\r\n  while (Date.now() < deadline) {\r\n    loopCount++;\r\n    let resp;\r\n    try {\r\n      logFn(`[walkDagRange] Fetching blocks with lowHash: ${lowHash}`);\r\n      resp = await client.getBlocks({\r\n        lowHash,\r\n        includeBlocks: true,\r\n        includeTransactions: true,\r\n      });\r\n      logFn(`[walkDagRange] getBlocks response:`, resp);\r\n    } catch (err) {\r\n      logFn(`[RPC ERROR] ${err.message}`);\r\n      logFn(\"[walkDagRange] getBlocks RPC ERROR:\", err);\r\n      break;\r\n    }\r\n\r\n    if (!resp?.blocks?.length) {\r\n      logFn(\"[walkDagRange] No blocks returned, breaking.\");\r\n      break;\r\n    }\r\n\r\n    for (const block of resp.blocks) {\r\n      const safeBlock = dehydrateBlock(block);\r\n      logFn(`[walkDagRange] Processing block:`, safeBlock);\r\n\r\n      if (safeBlock.blueScore > stopScore) {\r\n        logFn(`[END] Reached blue score ${safeBlock.blueScore}`);\r\n        logFn(\r\n          `[walkDagRange] Exiting: blueScore ${safeBlock.blueScore} > stopScore ${stopScore}`,\r\n        );\r\n        return;\r\n      }\r\n\r\n      if (safeBlock.timestamp < minTimestamp) {\r\n        if (block.transactions) {\r\n          for (const tx of block.transactions) if (tx.free) tx.free();\r\n        }\r\n        logFn(\r\n          `[walkDagRange] Skipping block (timestamp too old):`,\r\n          safeBlock.timestamp,\r\n        );\r\n        continue;\r\n      }\r\n\r\n      const txs = block.transactions || [];\r\n      for (const tx of txs) {\r\n        const payload = (tx.payload || \"\").toLowerCase();\r\n        if (\r\n          hexPrefixes.length === 0 ||\r\n          hexPrefixes.some((preHex) => payload.startsWith(preHex))\r\n        ) {\r\n          // Decode payload to string\r\n          let decodedPayload = undefined;\r\n          if (tx.payload) {\r\n            try {\r\n              decodedPayload = hexToString(tx.payload);\r\n            } catch (e) {\r\n              decodedPayload = undefined;\r\n            }\r\n          }\r\n          const safeTx = dehydrateTx({ tx, block, decodedPayload });\r\n          logFn(`[walkDagRange] Matching tx:`, safeTx);\r\n          if (onMatch && (await onMatch(safeTx, safeBlock)) === true) {\r\n            tx.free?.();\r\n            return;\r\n          }\r\n        }\r\n        if (typeof tx.free === \"function\") tx.free();\r\n      }\r\n    }\r\n\r\n    const lastBlock = resp.blocks[resp.blocks.length - 1];\r\n    const newLow = (lastBlock.hash || lastBlock.header?.hash).toString();\r\n    logFn(\r\n      `[walkDagRange] lastBlock.hash: ${newLow}, previous lowHash: ${lowHash}`,\r\n    );\r\n    if (newLow === lowHash) {\r\n      logFn(\"[walkDagRange] newLow equals lowHash, breaking.\");\r\n      break;\r\n    }\r\n    lowHash = newLow;\r\n  }\r\n  logFn(`[walkDagRange] Exiting main loop after ${loopCount} iterations.`);\r\n}\r\n", "// indexer.js - Kaspa Transaction Indexer (browser version)\r\n\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.intelligence.indexer);\r\n\r\nexport const IndexerEventType = Object.freeze({\r\n  TRANSACTION_IN_MEMORY: \"transaction-in-memory\",\r\n  MATCHING_TRANSACTION_IN_MEMORY: \"matching-transaction-in-memory\",\r\n  BLOCK_IN_MEMORY: \"block-in-memory\",\r\n  TRANSACTION_CACHED: \"transaction-cached\",\r\n  MATCHING_TRANSACTION_CACHED: \"matching-transaction-cached\",\r\n  BLOCK_CACHED: \"block-cached\",\r\n  EVICT: \"evict\",\r\n  FLUSH_COMPLETED: \"flush-completed\",\r\n  EVICT_CYCLE_COMPLETED: \"evict-cycle-completed\",\r\n});\r\n\r\nexport const MatchMode = Object.freeze({\r\n  ALL: \"all\",\r\n  TRANSACTIONS: \"transactions\",\r\n  MATCHING: \"matching\",\r\n  BLOCKS: \"blocks\",\r\n  CUSTOM: \"custom\",\r\n});\r\n\r\nexport const EvictionReason = Object.freeze({\r\n  TTL: \"ttl\",\r\n  SIZE: \"size\",\r\n  IN_MEMORY_TRANSACTION: \"in_memory_transaction\",\r\n  IN_MEMORY_BLOCK: \"in_memory_block\",\r\n});\r\n\r\nexport const IndexerStore = Object.freeze({\r\n  TRANSACTIONS: \"transactions\",\r\n  MATCHING_TRANSACTIONS: \"matching_transactions\",\r\n  BLOCKS: \"blocks\",\r\n});\r\n\r\n/** KaspaIndexer class for indexing transactions and blocks in the browser using IndexedDB.\r\n */\r\nexport class KaspaIndexer {\r\n  // Metrics for observability\r\n  _metrics = {\r\n    transactionsIndexed: 0,\r\n    blocksIndexed: 0,\r\n    evictions: { ttl: 0, size: 0 },\r\n    cacheHits: 0,\r\n    cacheMisses: 0,\r\n  };\r\n\r\n  // Default cap for cursor-based queries to avoid loading massive datasets into memory\r\n  _defaultQueryLimit = 1000;\r\n\r\n  // In-memory rolling cache for deduplication\r\n  _txidCacheSet = new Set();\r\n  _txidCacheQueue = [];\r\n  _txidCacheMax = 1000;\r\n\r\n  // In-memory buffers for batch flush\r\n  _pendingTxs = [];\r\n  _pendingBlocks = [];\r\n  _inMemoryMaxTxs = 1000; // max in-memory txs/blocks before deduplication kicks in\r\n  _inMemoryMaxBlocks = 1000;\r\n  _flushInterval = 5000; // ms\r\n  _flushTimer = null;\r\n\r\n  // Prevent overlapping async operations\r\n  _flushPromise = null;\r\n  _evictPromise = null;\r\n\r\n  // Prevent multiple initDB calls\r\n  _initPromise = null;\r\n\r\n  constructor({\r\n    ttlMinutes = null,\r\n    flushInterval = 5000,\r\n    maxSize = null,\r\n    batchThresholdRatio = 0.1,\r\n    priorityTTL = true,\r\n    inMemoryMaxTxs = 1000,\r\n    inMemoryMaxBlocks = 1000,\r\n    dbName = \"kaspaIndexer\",\r\n    matchMode = MatchMode.ALL,\r\n    indexAllTransactions = true,\r\n    indexAllMatchingTransactions = true,\r\n    indexAllBlocks = false,\r\n    onIndexerUpdate = null,\r\n  } = {}) {\r\n    this.active = false;\r\n    this.ttlMs = ttlMinutes ? ttlMinutes * 60 * 1000 : null;\r\n    this._flushInterval = flushInterval;\r\n    this.maxSize = maxSize;\r\n    this.batchThresholdRatio = batchThresholdRatio;\r\n    this.priorityTTL = priorityTTL;\r\n    this.dbName = dbName;\r\n    this.db = null;\r\n    this._evictionInterval = null;\r\n    this.onIndexerUpdate =\r\n      typeof onIndexerUpdate === \"function\" ? onIndexerUpdate : null;\r\n    this.matchMode = matchMode;\r\n    this.indexAllTransactions = indexAllTransactions;\r\n    this.indexAllMatchingTransactions = indexAllMatchingTransactions;\r\n    this.indexAllBlocks = indexAllBlocks;\r\n    this._inMemoryMaxTxs = inMemoryMaxTxs;\r\n    this._inMemoryMaxBlocks = inMemoryMaxBlocks;\r\n\r\n    // Use maxSize as default query cap for cached UI\r\n    if (typeof maxSize === \"number\" && maxSize > 0) {\r\n      this._defaultQueryLimit = maxSize;\r\n    }\r\n\r\n    this._dbReady = new Promise((resolve) => {\r\n      this._resolveDbReady = resolve;\r\n    });\r\n  }\r\n\r\n  get flushInterval() {\r\n    return this._flushInterval;\r\n  }\r\n\r\n  async initDB() {\r\n    if (this.db) return this.db;\r\n    if (this._initPromise) return this._initPromise;\r\n    this._initPromise = new Promise((resolve, reject) => {\r\n      const request = indexedDB.open(this.dbName, 2);\r\n      request.onupgradeneeded = (e) => {\r\n        const db = e.target.result;\r\n        if (!db.objectStoreNames.contains(IndexerStore.MATCHING_TRANSACTIONS)) {\r\n          const store = db.createObjectStore(\r\n            IndexerStore.MATCHING_TRANSACTIONS,\r\n            { keyPath: \"txid\" },\r\n          );\r\n          store.createIndex(\"timestamp\", \"timestamp\");\r\n        }\r\n        if (!db.objectStoreNames.contains(IndexerStore.TRANSACTIONS)) {\r\n          const txStore = db.createObjectStore(IndexerStore.TRANSACTIONS, {\r\n            keyPath: \"txid\",\r\n          });\r\n          txStore.createIndex(\"timestamp\", \"timestamp\");\r\n        }\r\n        if (!db.objectStoreNames.contains(IndexerStore.BLOCKS)) {\r\n          const blockStore = db.createObjectStore(IndexerStore.BLOCKS, {\r\n            keyPath: \"hash\",\r\n          });\r\n          blockStore.createIndex(\"timestamp\", \"timestamp\");\r\n        }\r\n      };\r\n      request.onsuccess = async (e) => {\r\n        this.db = e.target.result;\r\n        await this._preloadTxidCache();\r\n        if (this._resolveDbReady) this._resolveDbReady();\r\n        resolve(this.db);\r\n      };\r\n      request.onerror = (e) => reject(e);\r\n      request.onblocked = () =>\r\n        reject(new Error(\"IndexedDB open blocked (another tab/connection?)\"));\r\n    });\r\n    return this._initPromise;\r\n  }\r\n\r\n  /**\r\n   * Reset both IndexedDB stores and all in-memory buffers/metrics.\r\n   * Note: the DB connection must be open before clearing stores.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async resetEverything() {\r\n    // Ensure the DB connection is established before clearing stores.\r\n    await this.initDB();\r\n\r\n    // Stop background work first so we don't race writes while clearing.\r\n    this.active = false;\r\n    this._stopEvictionTimer();\r\n    this._stopFlushTimer();\r\n\r\n    // Clear persistent stores.\r\n    for (const storeName of Object.values(IndexerStore)) {\r\n      await this.clearStore(storeName);\r\n    }\r\n\r\n    // Clear all in-memory state.\r\n    this._pendingTxs = [];\r\n    this._pendingBlocks = [];\r\n    this._txidCacheSet.clear();\r\n    this._txidCacheQueue = [];\r\n\r\n    // Reset metrics.\r\n    this._metrics = {\r\n      transactionsIndexed: 0,\r\n      blocksIndexed: 0,\r\n      evictions: { ttl: 0, size: 0 },\r\n      cacheHits: 0,\r\n      cacheMisses: 0,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Fresh-start sequence:\r\n   * 1) Init DB (must be open to clear)\r\n   * 2) Reset everything (DB + memory)\r\n   * 3) Start normal indexing\r\n   * @returns {Promise<void>}\r\n   */\r\n  async freshStart() {\r\n    await this.initDB();\r\n    await this.resetEverything();\r\n    this.start();\r\n  }\r\n\r\n  start() {\r\n    this.active = true;\r\n    this._startEvictionTimer();\r\n    this._startFlushTimer();\r\n  }\r\n\r\n  stop() {\r\n    this.active = false;\r\n    this._stopEvictionTimer();\r\n    this._stopFlushTimer();\r\n    this.flush(); // flush any remaining data\r\n  }\r\n\r\n  /* Indexing methods */\r\n\r\n  /**\r\n   * Add a transaction to the indexer.\r\n   * @param {Object} tx - The transaction object to index.\r\n   * @param {boolean} isMatch - Whether this transaction is a matching transaction.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async addTransaction(tx, isMatch = true) {\r\n    // CRITICAL: WASM pointers cannot be indexed.\r\n    // They must be dehydrated before reaching the indexer.\r\n    if (tx && typeof tx.free === \"function\") {\r\n      throw new Error(\r\n        `KaspaIndexer Error: Received raw WASM transaction (txid: ${tx.verboseData?.transactionId}). ` +\r\n          `Transactions must be dehydrated using utilities.dehydrateTx() before indexing to ensure memory safety and storage compatibility.`,\r\n      );\r\n    }\r\n\r\n    // Respect matchMode\r\n    if (this.matchMode === MatchMode.BLOCKS) return;\r\n    if (this.matchMode === MatchMode.MATCHING && !isMatch) return;\r\n    if (this.matchMode === MatchMode.TRANSACTIONS && isMatch) return;\r\n    if (this.matchMode === MatchMode.CUSTOM) {\r\n      if (!this.indexAllTransactions && !this.indexAllMatchingTransactions)\r\n        return;\r\n      if (!this.indexAllTransactions && !isMatch) return;\r\n      if (!this.indexAllMatchingTransactions && isMatch) return;\r\n    }\r\n    const now = Number(tx.timestamp);\r\n    const txid = tx.txid;\r\n    if (!txid) {\r\n      this._metrics.cacheMisses++;\r\n      return;\r\n    }\r\n    // In-memory deduplication only\r\n    if (this._txidCacheSet.has(txid)) {\r\n      this._metrics.cacheHits++;\r\n      return;\r\n    }\r\n    // Buffer in memory\r\n    this._txidCacheSet.add(txid);\r\n    this._txidCacheQueue.push(txid);\r\n    if (this._txidCacheQueue.length > this._txidCacheMax) {\r\n      const oldest = this._txidCacheQueue.shift();\r\n      this._txidCacheSet.delete(oldest);\r\n    }\r\n    const entry = { ...tx, timestamp: now };\r\n    this._pendingTxs.push({ entry, isMatch });\r\n\r\n    // Enforce in-memory cap immediately (rolling buffer)\r\n    if (this._inMemoryMaxTxs && this._inMemoryMaxTxs > 0) {\r\n      this._pruneInMemoryBuffer(\r\n        this._pendingTxs,\r\n        this._inMemoryMaxTxs,\r\n        EvictionReason.IN_MEMORY_TRANSACTION,\r\n        IndexerStore.TRANSACTIONS,\r\n        \"txid\",\r\n      );\r\n    }\r\n\r\n    // Notify for all transactions added in-memory, respecting matchMode and indexAll* flags\r\n    if (typeof this.onIndexerUpdate === \"function\") {\r\n      // Only emit if user wants all transactions in memory\r\n      if (\r\n        this.matchMode === MatchMode.ALL ||\r\n        this.matchMode === MatchMode.TRANSACTIONS ||\r\n        (this.matchMode === MatchMode.CUSTOM && this.indexAllTransactions)\r\n      ) {\r\n        this.onIndexerUpdate({\r\n          type: IndexerEventType.TRANSACTION_IN_MEMORY,\r\n          data: entry,\r\n        });\r\n      }\r\n      // Only emit if user wants matching transactions in memory\r\n      if (\r\n        isMatch &&\r\n        (this.matchMode === MatchMode.ALL ||\r\n          this.matchMode === MatchMode.MATCHING ||\r\n          (this.matchMode === MatchMode.CUSTOM &&\r\n            this.indexAllMatchingTransactions))\r\n      ) {\r\n        this.onIndexerUpdate({\r\n          type: IndexerEventType.MATCHING_TRANSACTION_IN_MEMORY,\r\n          data: entry,\r\n        });\r\n      }\r\n    }\r\n\r\n    this._metrics.transactionsIndexed++;\r\n\r\n    // Flush if buffer is full\r\n    if (this._pendingTxs.length >= this._inMemoryMaxTxs) {\r\n      await this.flush();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a batch of transactions to the indexer.\r\n   * @param {Object[]} txs - Array of transaction objects to index.\r\n   * @param {boolean} isMatch - Whether these transactions are matching transactions.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async addTransactionsBatch(txs, isMatch = true) {\r\n    // Buffer all txs in memory, then flush\r\n    for (const tx of txs) {\r\n      await this.addTransaction(tx, isMatch);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add a block to the indexer.\r\n   * @param {Object} block - The block object to index.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async addBlock(block) {\r\n    // Respect matchMode\r\n    if (\r\n      this.matchMode === MatchMode.ALL ||\r\n      this.matchMode === MatchMode.BLOCKS ||\r\n      (this.matchMode === MatchMode.CUSTOM && this.indexAllBlocks)\r\n    ) {\r\n      const now = Number(block.header?.timestamp ?? block.timestamp);\r\n      const hash = block.header?.hash || block.hash;\r\n      if (!hash) {\r\n        log.error(\"Block has no hash, cannot index.\", block);\r\n        return;\r\n      }\r\n      const txCount = Number(\r\n        block.txCount ??\r\n        block.header?.transactionCount ??\r\n        block.header?.txCount ??\r\n        (Array.isArray(block.transactions) ? block.transactions.length : 0)\r\n      );\r\n      const blockEntry = { ...block, timestamp: now, hash, txCount };\r\n      this._pendingBlocks.push(blockEntry);\r\n\r\n      // Enforce in-memory cap immediately (rolling buffer)\r\n      if (this._inMemoryMaxBlocks && this._inMemoryMaxBlocks > 0) {\r\n        this._pruneInMemoryBuffer(\r\n          this._pendingBlocks,\r\n          this._inMemoryMaxBlocks,\r\n          EvictionReason.IN_MEMORY_BLOCK,\r\n          IndexerStore.BLOCKS,\r\n          \"hash\",\r\n        );\r\n      }\r\n      this._metrics.blocksIndexed++;\r\n\r\n      // Only emit if user wants blocks in memory\r\n      if (typeof this.onIndexerUpdate === \"function\") {\r\n        if (\r\n          this.matchMode === MatchMode.ALL ||\r\n          this.matchMode === MatchMode.BLOCKS ||\r\n          (this.matchMode === MatchMode.CUSTOM && this.indexAllBlocks)\r\n        ) {\r\n          this.onIndexerUpdate({\r\n            type: IndexerEventType.BLOCK_IN_MEMORY,\r\n            data: blockEntry,\r\n          });\r\n        }\r\n      }\r\n      // Flush if buffer is full\r\n      if (this._pendingBlocks.length >= this._inMemoryMaxBlocks) {\r\n        await this.flush();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Flush pending transactions and blocks to IndexedDB.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async flush() {\r\n    if (this._flushPromise) return this._flushPromise;\r\n\r\n    this._flushPromise = (async () => {\r\n      await this._dbReady;\r\n\r\n      // Enforce caps before writing (keeps in-memory UI within limits)\r\n      if (this._inMemoryMaxTxs && this._inMemoryMaxTxs > 0) {\r\n        this._pruneInMemoryBuffer(\r\n          this._pendingTxs,\r\n          this._inMemoryMaxTxs,\r\n          EvictionReason.IN_MEMORY_TRANSACTION,\r\n          IndexerStore.TRANSACTIONS,\r\n          \"txid\",\r\n        );\r\n      }\r\n      if (this._inMemoryMaxBlocks && this._inMemoryMaxBlocks > 0) {\r\n        this._pruneInMemoryBuffer(\r\n          this._pendingBlocks,\r\n          this._inMemoryMaxBlocks,\r\n          EvictionReason.IN_MEMORY_BLOCK,\r\n          IndexerStore.BLOCKS,\r\n          \"hash\",\r\n        );\r\n      }\r\n\r\n      // Temporary arrays to collect items for batched emission\r\n      const batchTxs = [];\r\n      const batchMatchingTxs = [];\r\n      const batchBlocks = [];\r\n\r\n      const txPromises = [];\r\n\r\n      // 1. Batch flush transactions\r\n      if (this._pendingTxs.length) {\r\n        const txReqMatching = this.db.transaction(\r\n          IndexerStore.MATCHING_TRANSACTIONS,\r\n          \"readwrite\",\r\n        );\r\n        const storeMatching = txReqMatching.objectStore(\r\n          IndexerStore.MATCHING_TRANSACTIONS,\r\n        );\r\n        const txReqAll = this.db.transaction(\r\n          IndexerStore.TRANSACTIONS,\r\n          \"readwrite\",\r\n        );\r\n        const storeAll = txReqAll.objectStore(IndexerStore.TRANSACTIONS);\r\n\r\n        for (const { entry, isMatch } of this._pendingTxs) {\r\n          // Matching txs go ONLY to MATCHING_TRANSACTIONS (do not change this behavior).\r\n          if (isMatch) storeMatching.put(entry);\r\n          else storeAll.put(entry);\r\n\r\n          // Collect for Batch Notification (Respecting filters)\r\n          if (\r\n            this.matchMode === MatchMode.ALL ||\r\n            this.matchMode === MatchMode.TRANSACTIONS ||\r\n            (this.matchMode === MatchMode.CUSTOM && this.indexAllTransactions)\r\n          ) {\r\n            batchTxs.push(entry);\r\n          }\r\n\r\n          if (\r\n            isMatch &&\r\n            (this.matchMode === MatchMode.ALL ||\r\n              this.matchMode === MatchMode.MATCHING ||\r\n              (this.matchMode === MatchMode.CUSTOM &&\r\n                this.indexAllMatchingTransactions))\r\n          ) {\r\n            batchMatchingTxs.push(entry);\r\n          }\r\n        }\r\n\r\n        this._pendingTxs = [];\r\n        txPromises.push(this._awaitIDBTransaction(txReqMatching));\r\n        txPromises.push(this._awaitIDBTransaction(txReqAll));\r\n      }\r\n\r\n      // 2. Batch flush blocks\r\n      if (this._pendingBlocks.length) {\r\n        const blockReq = this.db.transaction(IndexerStore.BLOCKS, \"readwrite\");\r\n        const store = blockReq.objectStore(IndexerStore.BLOCKS);\r\n\r\n        for (const blockEntry of this._pendingBlocks) {\r\n          store.put(blockEntry);\r\n\r\n          // Collect for Batch Notification\r\n          if (\r\n            this.matchMode === MatchMode.ALL ||\r\n            this.matchMode === MatchMode.BLOCKS ||\r\n            (this.matchMode === MatchMode.CUSTOM && this.indexAllBlocks)\r\n          ) {\r\n            batchBlocks.push(blockEntry);\r\n          }\r\n        }\r\n\r\n        this._pendingBlocks = [];\r\n        txPromises.push(this._awaitIDBTransaction(blockReq));\r\n      }\r\n\r\n      // Ensure all writes are committed before we emit cached events or enforce maxSize.\r\n      if (txPromises.length) await Promise.all(txPromises);\r\n\r\n      // 3. Emit Batch Events\r\n      // This happens once per flush cycle, drastically reducing serialization overhead\r\n      if (typeof this.onIndexerUpdate === \"function\") {\r\n        if (batchTxs.length > 0) {\r\n          this.onIndexerUpdate({\r\n            type: IndexerEventType.TRANSACTION_CACHED,\r\n            data: batchTxs,\r\n          });\r\n        }\r\n        if (batchMatchingTxs.length > 0) {\r\n          this.onIndexerUpdate({\r\n            type: IndexerEventType.MATCHING_TRANSACTION_CACHED,\r\n            data: batchMatchingTxs,\r\n          });\r\n        }\r\n        if (batchBlocks.length > 0) {\r\n          this.onIndexerUpdate({\r\n            type: IndexerEventType.BLOCK_CACHED,\r\n            data: batchBlocks,\r\n          });\r\n        }\r\n      }\r\n\r\n      // 4. Enforce maxSize immediately after flush (production-safe cap)\r\n      await this._enforceMaxSizeAfterFlush();\r\n\r\n      // Signal flush cycle completion for UI refresh\r\n      if (typeof this.onIndexerUpdate === \"function\") {\r\n        this.onIndexerUpdate({\r\n          type: IndexerEventType.FLUSH_COMPLETED,\r\n          data: { ts: Date.now() },\r\n        });\r\n      }\r\n    })();\r\n\r\n    try {\r\n      await this._flushPromise;\r\n    } finally {\r\n      this._flushPromise = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Evict old entries based on TTL and max size.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async evict() {\r\n    if (this._evictPromise) return this._evictPromise;\r\n\r\n    this._evictPromise = (async () => {\r\n      await this._dbReady;\r\n      const now = Date.now();\r\n\r\n      // If priority is SIZE, skip the whole eviction cycle unless we're at/over maxSize.\r\n      if (!this.priorityTTL && this.maxSize && this.maxSize > 0) {\r\n        const over = await this._isAnyRelevantStoreOverMaxSize();\r\n        if (!over) return;\r\n      }\r\n      const stdOnEvict = (storeName) => (evictInfo) => {\r\n        if (this.onIndexerUpdate) {\r\n          this.onIndexerUpdate({\r\n            type: IndexerEventType.EVICT,\r\n            data: {\r\n              key: evictInfo.key,\r\n              reason: evictInfo.reason,\r\n              storeName,\r\n            },\r\n          });\r\n        }\r\n      };\r\n\r\n      if (\r\n        this.matchMode === MatchMode.ALL ||\r\n        this.matchMode === MatchMode.MATCHING\r\n      ) {\r\n        await this._evictStore(\r\n          IndexerStore.MATCHING_TRANSACTIONS,\r\n          \"txid\",\r\n          stdOnEvict(IndexerStore.MATCHING_TRANSACTIONS),\r\n          now,\r\n        );\r\n      }\r\n      if (\r\n        this.matchMode === MatchMode.ALL ||\r\n        this.matchMode === MatchMode.TRANSACTIONS\r\n      ) {\r\n        await this._evictStore(\r\n          IndexerStore.TRANSACTIONS,\r\n          \"txid\",\r\n          stdOnEvict(IndexerStore.TRANSACTIONS),\r\n          now,\r\n        );\r\n      }\r\n      if (\r\n        this.matchMode === MatchMode.ALL ||\r\n        this.matchMode === MatchMode.BLOCKS\r\n      ) {\r\n        await this._evictStore(\r\n          IndexerStore.BLOCKS,\r\n          \"hash\",\r\n          stdOnEvict(IndexerStore.BLOCKS),\r\n          now,\r\n        );\r\n      }\r\n      if (this.matchMode === MatchMode.CUSTOM) {\r\n        if (this.indexAllMatchingTransactions) {\r\n          await this._evictStore(\r\n            IndexerStore.MATCHING_TRANSACTIONS,\r\n            \"txid\",\r\n            stdOnEvict(IndexerStore.MATCHING_TRANSACTIONS),\r\n            now,\r\n          );\r\n        }\r\n        if (this.indexAllTransactions) {\r\n          await this._evictStore(\r\n            IndexerStore.TRANSACTIONS,\r\n            \"txid\",\r\n            stdOnEvict(IndexerStore.TRANSACTIONS),\r\n            now,\r\n          );\r\n        }\r\n        if (this.indexAllBlocks) {\r\n          await this._evictStore(\r\n            IndexerStore.BLOCKS,\r\n            \"hash\",\r\n            stdOnEvict(IndexerStore.BLOCKS),\r\n            now,\r\n          );\r\n        }\r\n      }\r\n\r\n      // Signal eviction cycle completion for UI refresh\r\n      if (typeof this.onIndexerUpdate === \"function\") {\r\n        this.onIndexerUpdate({\r\n          type: IndexerEventType.EVICT_CYCLE_COMPLETED,\r\n          data: { ts: Date.now() },\r\n        });\r\n      }\r\n    })();\r\n\r\n    try {\r\n      await this._evictPromise;\r\n    } finally {\r\n      this._evictPromise = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear all entries from a specific object store.\r\n   * @param {string} storeName - The name of the store (use IndexerStore constant).\r\n   * @returns {Promise<void>}\r\n   */\r\n  async clearStore(storeName) {\r\n    // If clearStore is called before initDB(), _dbReady will never resolve.\r\n    // Ensure we have an open connection first.\r\n    if (!this.db) {\r\n      await this.initDB();\r\n    }\r\n    await this._dbReady;\r\n\r\n    // Validation: ensure storeName is one of the known constants\r\n    if (!Object.values(IndexerStore).includes(storeName)) {\r\n      throw new Error(`Invalid storeName: ${storeName}`);\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        const tx = this.db.transaction(storeName, \"readwrite\");\r\n        const store = tx.objectStore(storeName);\r\n        store.clear();\r\n\r\n        // Transaction-level completion handling\r\n        tx.oncomplete = () => {\r\n          // Metrics / observability\r\n          if (this._metrics) {\r\n            this._metrics.storesCleared =\r\n              (this._metrics.storesCleared || 0) + 1;\r\n            this._metrics.clearsByStore = this._metrics.clearsByStore || {};\r\n            this._metrics.clearsByStore[storeName] =\r\n              (this._metrics.clearsByStore[storeName] || 0) + 1;\r\n          }\r\n          resolve();\r\n        };\r\n\r\n        tx.onerror = (e) => {\r\n          log.error(\r\n            `IndexedDB clear failed for store ${storeName}:`,\r\n            e.target.error,\r\n          );\r\n          reject(e.target.error);\r\n        };\r\n        tx.onabort = (e) => {\r\n          log.error(\r\n            `IndexedDB transaction aborted for store ${storeName}:`,\r\n            e.target.error,\r\n          );\r\n          reject(e.target.error);\r\n        };\r\n      } catch (err) {\r\n        log.error(`IndexedDB clear failed for store ${storeName}:`, err);\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a snapshot of current metrics.\r\n   * @returns {Object}\r\n   */\r\n  getMetrics() {\r\n    return { ...this._metrics, evictions: { ...this._metrics.evictions } };\r\n  }\r\n\r\n  /* In-memory Getters */\r\n\r\n  /**\r\n   * Get matching transactions in memory.\r\n   * @returns {Object[]}\r\n   */\r\n  getAllMatchingTransactions() {\r\n    return this._pendingTxs\r\n      .filter(({ isMatch }) => isMatch)\r\n      .map(({ entry }) => entry);\r\n  }\r\n\r\n  /**\r\n   * Get all transactions in memory.\r\n   * @returns {Object[]}\r\n   */\r\n  getAllTransactions() {\r\n    return this._pendingTxs.map(({ entry }) => entry);\r\n  }\r\n\r\n  /** Get all blocks in memory.\r\n   * @returns {Object[]}\r\n   */\r\n  getAllBlocks() {\r\n    return this._pendingBlocks.slice();\r\n  }\r\n\r\n  /**\r\n   * Get a transaction by its txid from in-memory buffer.\r\n   * @param {string} txid - The transaction ID.\r\n   * @returns {Object|null} - The matching transaction or null.\r\n   */\r\n  getTransaction(txid) {\r\n    const match = this._pendingTxs.find(({ entry }) => entry.txid === txid);\r\n    return match ? match.entry : null;\r\n  }\r\n\r\n  /* IndexedDB Getters */\r\n\r\n  /**\r\n   * Get a transaction by its txid.\r\n   * @param {string} txid - The transaction ID.\r\n   * @returns {Promise<Object|null>} - The matching transaction or null.\r\n   */\r\n  async getCachedTransaction(txid) {\r\n    return this._queryStore(\r\n      IndexerStore.MATCHING_TRANSACTIONS,\r\n      (txs) => txs.find((tx) => tx.txid === txid) || null,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get all matching indexed transactions.\r\n   * @returns {Promise<Object[]>} - Array of all transactions.\r\n   */\r\n  async getAllCachedMatchingTransactions() {\r\n    return this._getRecentFromStore(\r\n      IndexerStore.MATCHING_TRANSACTIONS,\r\n      this._defaultQueryLimit,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get all indexed transactions.\r\n   * @returns {Promise<Object[]>} - Array of all blocks.\r\n   */\r\n  async getAllCachedTransactions() {\r\n    return this._getRecentFromStore(\r\n      IndexerStore.TRANSACTIONS,\r\n      this._defaultQueryLimit,\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get all indexed blocks.\r\n   * @returns {Promise<Object[]>} - Array of all blocks.\r\n   */\r\n  async getAllCachedBlocks() {\r\n    return this._getRecentFromStore(IndexerStore.BLOCKS, this._defaultQueryLimit);\r\n  }\r\n\r\n  /**\r\n   * Get the most recent transaction matching the given criteria.\r\n   * @param {string} sender - Sender address.\r\n   * @param {string} receiver - Receiver address.\r\n   * @param {number} blockDaaScore - Block DAA score.\r\n   * @param {bigint} amount - Amount transferred.\r\n   * @returns {Promise<Object|null>} - The most recent matching transaction or null.\r\n   */\r\n  async getMostRecentCachedTransaction(\r\n    sender,\r\n    receiver,\r\n    blockDaaScore,\r\n    amount,\r\n  ) {\r\n    return this._queryStore(IndexerStore.MATCHING_TRANSACTIONS, (txs) => {\r\n      const matches = txs\r\n        .filter(\r\n          (tx) =>\r\n            tx.sender === sender &&\r\n            tx.receiver === receiver &&\r\n            tx.blockDaaScore === blockDaaScore &&\r\n            tx.amount === amount,\r\n        )\r\n        .sort((a, b) => b.timestamp - a.timestamp);\r\n      return matches[0] || null;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get transactions with a Block DAA score greater than the specified minimum.\r\n   * @param {number} minBlockDaaScore - The minimum Block DAA score.\r\n   * @returns {Promise<Object[]>} - Array of matching transactions.\r\n   */\r\n  async getCachedTransactionsAfterBlockDaaScore(minBlockDaaScore) {\r\n    return this._queryStore(IndexerStore.MATCHING_TRANSACTIONS, (txs) =>\r\n      txs.filter((tx) => tx.blockDaaScore > minBlockDaaScore),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get transactions for a specific address, optionally within a recent time frame.\r\n   * @param {string} address - The address to query.\r\n   * @param {number|null} [recentSeconds=null] - If provided, only transactions within this many seconds from now are returned.\r\n   * @returns {Promise<Object[]>} - Array of matching transactions.\r\n   */\r\n  async getCachedTransactionsForAddress(\r\n    address,\r\n    recentSeconds = null,\r\n    limit = this._defaultQueryLimit,\r\n  ) {\r\n    await this._dbReady;\r\n\r\n    const now = Date.now();\r\n    const cutoff = recentSeconds ? now - recentSeconds * 1000 : null;\r\n    const max = limit == null ? this._defaultQueryLimit : limit;\r\n\r\n    return new Promise((resolve) => {\r\n      const out = [];\r\n      try {\r\n        const tx = this.db.transaction(\r\n          IndexerStore.MATCHING_TRANSACTIONS,\r\n          \"readonly\",\r\n        );\r\n        const store = tx.objectStore(IndexerStore.MATCHING_TRANSACTIONS);\r\n        const index = store.index(\"timestamp\");\r\n        const req = index.openCursor(null, \"prev\"); // newest -> oldest\r\n\r\n        req.onsuccess = (e) => {\r\n          const cursor = e.target.result;\r\n          if (!cursor) {\r\n            resolve(out);\r\n            return;\r\n          }\r\n\r\n          const entry = cursor.value;\r\n\r\n          // Because we traverse newest -> oldest, stop once we cross the cutoff.\r\n          if (cutoff && entry.timestamp < cutoff) {\r\n            resolve(out);\r\n            return;\r\n          }\r\n\r\n          if (entry.sender === address || entry.receiver === address) {\r\n            out.push(entry);\r\n            if (out.length >= max) {\r\n              resolve(out);\r\n              return;\r\n            }\r\n          }\r\n\r\n          cursor.continue();\r\n        };\r\n\r\n        req.onerror = () => resolve(out);\r\n        tx.onabort = () => resolve(out);\r\n        tx.onerror = () => resolve(out);\r\n      } catch {\r\n        resolve(out);\r\n      }\r\n    });\r\n  }\r\n\r\n  /* Internal helpers */\r\n\r\n  _startEvictionTimer() {\r\n    if (this._evictionInterval) clearInterval(this._evictionInterval);\r\n    const interval = this.ttlMs && this.ttlMs > 0 ? this.ttlMs : 600000;\r\n    this._evictionInterval = setInterval(() => {\r\n      this.evict();\r\n    }, interval);\r\n  }\r\n\r\n  _startFlushTimer() {\r\n    if (this._flushTimer) clearInterval(this._flushTimer);\r\n    this._flushTimer = setInterval(() => this.flush(), this._flushInterval);\r\n  }\r\n\r\n  _stopEvictionTimer() {\r\n    if (this._evictionInterval) {\r\n      clearInterval(this._evictionInterval);\r\n      this._evictionInterval = null;\r\n    }\r\n  }\r\n\r\n  _stopFlushTimer() {\r\n    if (this._flushTimer) {\r\n      clearInterval(this._flushTimer);\r\n      this._flushTimer = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * (Internal) Preload recent txids into in-memory cache for deduplication.\r\n   */\r\n  async _preloadTxidCache() {\r\n    const loadRecentKeysByTimestamp = async (storeName, max) => {\r\n      return new Promise((resolve) => {\r\n        try {\r\n          const txReq = this.db.transaction(storeName, \"readonly\");\r\n          const store = txReq.objectStore(storeName);\r\n\r\n          // Prefer timestamp index if present (it is created in initDB)\r\n          const index = store.index(\"timestamp\");\r\n          const keys = [];\r\n\r\n          const cursorReq = index.openCursor(null, \"prev\"); // newest -> oldest\r\n          cursorReq.onsuccess = (e) => {\r\n            const cursor = e.target.result;\r\n            if (!cursor || keys.length >= max) {\r\n              resolve(keys);\r\n              return;\r\n            }\r\n            // primaryKey is the object store key (txid)\r\n            keys.push(cursor.primaryKey);\r\n            cursor.continue();\r\n          };\r\n          cursorReq.onerror = () => resolve(keys);\r\n\r\n          txReq.onerror = () => resolve(keys);\r\n          txReq.onabort = () => resolve(keys);\r\n        } catch (err) {\r\n          // Store/index might not exist yet\r\n          resolve([]);\r\n        }\r\n      });\r\n    };\r\n\r\n    // Pull recent txids from both stores to avoid duplicates across modes\r\n    const [recentAll, recentMatching] = await Promise.all([\r\n      loadRecentKeysByTimestamp(IndexerStore.TRANSACTIONS, this._txidCacheMax),\r\n      loadRecentKeysByTimestamp(\r\n        IndexerStore.MATCHING_TRANSACTIONS,\r\n        this._txidCacheMax,\r\n      ),\r\n    ]);\r\n\r\n    const combined = [...recentAll, ...recentMatching];\r\n\r\n    // Keep insertion order, cap to _txidCacheMax\r\n    this._txidCacheSet = new Set();\r\n    this._txidCacheQueue = [];\r\n\r\n    for (const key of combined) {\r\n      if (!key || this._txidCacheSet.has(key)) continue;\r\n      this._txidCacheSet.add(key);\r\n      this._txidCacheQueue.push(key);\r\n      if (this._txidCacheQueue.length >= this._txidCacheMax) break;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * (Internal) Generic helper to query any object store.\r\n   * @param {string} storeName - The name of the object store.\r\n   * @param {function(Object[]): any} processFn - Function to process the full result set.\r\n   * @returns {Promise<any>}\r\n   */\r\n  async _queryStore(storeName, processFn) {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        const tx = this.db.transaction(storeName, \"readonly\");\r\n        const store = tx.objectStore(storeName);\r\n        const req = store.getAll();\r\n\r\n        const finalize = (fn) => {\r\n          try {\r\n            resolve(fn());\r\n          } catch (err) {\r\n            reject(err);\r\n          }\r\n        };\r\n\r\n        req.onsuccess = () => finalize(() => processFn(req.result || []));\r\n        req.onerror = () =>\r\n          reject(req.error || new Error(\"IndexedDB getAll() failed\"));\r\n\r\n        tx.onabort = () =>\r\n          reject(tx.error || new Error(\"IndexedDB transaction aborted\"));\r\n        tx.onerror = () =>\r\n          reject(tx.error || new Error(\"IndexedDB transaction error\"));\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * (Internal) Read most-recent items using the \"timestamp\" index without loading the whole store.\r\n   */\r\n  async _getRecentFromStore(storeName, limit = this._defaultQueryLimit) {\r\n    await this._dbReady;\r\n\r\n    return new Promise((resolve) => {\r\n      const out = [];\r\n      try {\r\n        const tx = this.db.transaction(storeName, \"readonly\");\r\n        const store = tx.objectStore(storeName);\r\n\r\n        // Requires the timestamp index (you create it in initDB)\r\n        const index = store.index(\"timestamp\");\r\n        const req = index.openCursor(null, \"prev\"); // newest -> oldest\r\n\r\n        req.onsuccess = (e) => {\r\n          const cursor = e.target.result;\r\n          if (!cursor || out.length >= limit) {\r\n            resolve(out);\r\n            return;\r\n          }\r\n          out.push(cursor.value);\r\n          cursor.continue();\r\n        };\r\n        req.onerror = () => resolve(out);\r\n\r\n        tx.onabort = () => resolve(out);\r\n        tx.onerror = () => resolve(out);\r\n      } catch {\r\n        resolve(out);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * (Internal) Helper to prune in-memory buffer to max size.\r\n   * @param {Array} buffer - The in-memory buffer array.\r\n   * @param {number} max - The maximum allowed size.\r\n   * @param {string} evictionReason - Reason for eviction.\r\n   * @param {string} storeName - Name of the store.\r\n   * @param {string} keyField - Key field name.\r\n   */\r\n  _pruneInMemoryBuffer(buffer, max, evictionReason, storeName, keyField) {\r\n    while (buffer.length > max) {\r\n      const removed = buffer.shift();\r\n      if (this.onIndexerUpdate && removed) {\r\n        this.onIndexerUpdate({\r\n          type: IndexerEventType.EVICT,\r\n          data: {\r\n            key: removed.entry ? removed.entry[keyField] : removed[keyField],\r\n            reason: evictionReason,\r\n            storeName,\r\n          },\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  _awaitIDBTransaction(tx) {\r\n    return new Promise((resolve, reject) => {\r\n      tx.oncomplete = () => resolve();\r\n      tx.onabort = () =>\r\n        reject(tx.error || new Error(\"IndexedDB transaction aborted\"));\r\n      tx.onerror = () =>\r\n        reject(tx.error || new Error(\"IndexedDB transaction error\"));\r\n    });\r\n  }\r\n\r\n  _getRelevantStoresForCurrentMode() {\r\n    if (this.matchMode === MatchMode.ALL) {\r\n      return [\r\n        { name: IndexerStore.MATCHING_TRANSACTIONS, keyField: \"txid\" },\r\n        { name: IndexerStore.TRANSACTIONS, keyField: \"txid\" },\r\n        { name: IndexerStore.BLOCKS, keyField: \"hash\" },\r\n      ];\r\n    }\r\n    if (this.matchMode === MatchMode.MATCHING) {\r\n      return [{ name: IndexerStore.MATCHING_TRANSACTIONS, keyField: \"txid\" }];\r\n    }\r\n    if (this.matchMode === MatchMode.TRANSACTIONS) {\r\n      return [{ name: IndexerStore.TRANSACTIONS, keyField: \"txid\" }];\r\n    }\r\n    if (this.matchMode === MatchMode.BLOCKS) {\r\n      return [{ name: IndexerStore.BLOCKS, keyField: \"hash\" }];\r\n    }\r\n    if (this.matchMode === MatchMode.CUSTOM) {\r\n      const stores = [];\r\n      if (this.indexAllMatchingTransactions)\r\n        stores.push({\r\n          name: IndexerStore.MATCHING_TRANSACTIONS,\r\n          keyField: \"txid\",\r\n        });\r\n      if (this.indexAllTransactions)\r\n        stores.push({ name: IndexerStore.TRANSACTIONS, keyField: \"txid\" });\r\n      if (this.indexAllBlocks)\r\n        stores.push({ name: IndexerStore.BLOCKS, keyField: \"hash\" });\r\n      return stores;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  async _countStore(storeName) {\r\n    await this._dbReady;\r\n    return new Promise((resolve) => {\r\n      try {\r\n        const tx = this.db.transaction(storeName, \"readonly\");\r\n        const store = tx.objectStore(storeName);\r\n        const req = store.count();\r\n        req.onsuccess = () => resolve(req.result || 0);\r\n        req.onerror = () => resolve(0);\r\n      } catch {\r\n        resolve(0);\r\n      }\r\n    });\r\n  }\r\n\r\n  async _isAnyRelevantStoreOverMaxSize() {\r\n    if (!this.maxSize || this.maxSize <= 0) return false;\r\n    const stores = this._getRelevantStoresForCurrentMode();\r\n    for (const { name } of stores) {\r\n      const count = await this._countStore(name);\r\n      if (count > this.maxSize) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async _enforceMaxSizeAfterFlush() {\r\n    if (!this.maxSize || this.maxSize <= 0) return;\r\n\r\n    const now = Date.now();\r\n    const stdOnEvict = (storeName) => (evictInfo) => {\r\n      if (this.onIndexerUpdate) {\r\n        this.onIndexerUpdate({\r\n          type: IndexerEventType.EVICT,\r\n          data: { key: evictInfo.key, reason: evictInfo.reason, storeName },\r\n        });\r\n      }\r\n    };\r\n\r\n    const stores = this._getRelevantStoresForCurrentMode();\r\n    for (const { name, keyField } of stores) {\r\n      // Size-only enforcement; TTL eviction runs on the eviction timer.\r\n      await this._evictStoreBySizeOnly(name, keyField, stdOnEvict(name), now);\r\n    }\r\n  }\r\n\r\n  async _evictStoreBySizeOnly(storeName, keyField, onEvict, now) {\r\n    await this._dbReady;\r\n    if (!this.maxSize || this.maxSize <= 0) return;\r\n\r\n    const txReq = this.db.transaction(storeName, \"readwrite\");\r\n    const store = txReq.objectStore(storeName);\r\n\r\n    const removeFromCache = (key) => {\r\n      if (this._txidCacheSet.has(key)) {\r\n        this._txidCacheSet.delete(key);\r\n        const idx = this._txidCacheQueue.indexOf(key);\r\n        if (idx !== -1) this._txidCacheQueue.splice(idx, 1);\r\n      }\r\n    };\r\n\r\n    const onEvictAndRemove = (evictInfo) => {\r\n      removeFromCache(evictInfo.key);\r\n      if (onEvict) onEvict(evictInfo);\r\n    };\r\n\r\n    await this._evictBySize(\r\n      store,\r\n      keyField,\r\n      this.maxSize,\r\n      onEvictAndRemove,\r\n      now,\r\n    );\r\n    await this._awaitIDBTransaction(txReq);\r\n  }\r\n\r\n  /**\r\n   * Prune an IndexedDB store by TTL and/or max size.\r\n   * @param {string} storeName - The name of the store (use IndexerStore constant).\r\n   * @param {string} keyField - The key field name (e.g., \"txid\" or \"hash\").\r\n   * @param {function} onEvict - Callback for each evicted item.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async _pruneIndexedDBStore(storeName, keyField, onEvict) {\r\n    await this._dbReady;\r\n    const now = Date.now();\r\n    const storeTx = this.db.transaction(storeName, \"readwrite\");\r\n    const store = storeTx.objectStore(storeName);\r\n\r\n    if (this.priorityTTL) {\r\n      if (this.ttlMs)\r\n        await this._evictByTTL(store, keyField, now, this.ttlMs, onEvict);\r\n      if (this.maxSize)\r\n        await this._evictBySize(store, keyField, this.maxSize, onEvict, now);\r\n    } else {\r\n      if (this.maxSize)\r\n        await this._evictBySize(store, keyField, this.maxSize, onEvict, now);\r\n      if (this.ttlMs)\r\n        await this._evictByTTL(store, keyField, now, this.ttlMs, onEvict);\r\n    }\r\n\r\n    await this._awaitIDBTransaction(storeTx);\r\n  }\r\n\r\n  /**\r\n   * (Internal) Helper to evict from a given store, enforcing eviction priority.\r\n   */\r\n  async _evictStore(storeName, keyField, onEvict, now) {\r\n    await this._dbReady;\r\n    const txReq = this.db.transaction(storeName, \"readwrite\");\r\n    const store = txReq.objectStore(storeName);\r\n\r\n    const removeFromCache = (key) => {\r\n      if (this._txidCacheSet.has(key)) {\r\n        this._txidCacheSet.delete(key);\r\n        const idx = this._txidCacheQueue.indexOf(key);\r\n        if (idx !== -1) this._txidCacheQueue.splice(idx, 1);\r\n      }\r\n    };\r\n\r\n    const onEvictAndRemove = (evictInfo) => {\r\n      removeFromCache(evictInfo.key);\r\n      if (onEvict) onEvict(evictInfo);\r\n    };\r\n\r\n    if (this.priorityTTL) {\r\n      if (this.ttlMs)\r\n        await this._evictByTTL(\r\n          store,\r\n          keyField,\r\n          now,\r\n          this.ttlMs,\r\n          onEvictAndRemove,\r\n        );\r\n      if (this.maxSize)\r\n        await this._evictBySize(\r\n          store,\r\n          keyField,\r\n          this.maxSize,\r\n          onEvictAndRemove,\r\n          now,\r\n        );\r\n    } else {\r\n      if (this.maxSize)\r\n        await this._evictBySize(\r\n          store,\r\n          keyField,\r\n          this.maxSize,\r\n          onEvictAndRemove,\r\n          now,\r\n        );\r\n      if (this.ttlMs)\r\n        await this._evictByTTL(\r\n          store,\r\n          keyField,\r\n          now,\r\n          this.ttlMs,\r\n          onEvictAndRemove,\r\n        );\r\n    }\r\n\r\n    await this._awaitIDBTransaction(txReq);\r\n  }\r\n\r\n  /**\r\n   * (Internal) Evict items from a store by TTL.\r\n   */\r\n  async _evictByTTL(store, keyField, now, ttlMs, onEvict) {\r\n    const cutoff = now - ttlMs;\r\n    const index = store.index(\"timestamp\");\r\n    const range = IDBKeyRange.upperBound(cutoff);\r\n\r\n    // First, count total items and expired items\r\n    const totalCount = await new Promise((resolve) => {\r\n      const req = store.count();\r\n      req.onsuccess = () => resolve(req.result);\r\n      req.onerror = () => resolve(0);\r\n    });\r\n\r\n    const expiredCount = await new Promise((resolve) => {\r\n      let count = 0;\r\n      const req = index.openCursor(range);\r\n      req.onsuccess = (e) => {\r\n        const cursor = e.target.result;\r\n        if (cursor) {\r\n          count++;\r\n          cursor.continue();\r\n        } else {\r\n          resolve(count);\r\n        }\r\n      };\r\n      req.onerror = () => resolve(0);\r\n    });\r\n\r\n    const batchThreshold = Math.floor(totalCount * this.batchThresholdRatio);\r\n\r\n    // Now, batch remove if expiredCount >= batchThreshold\r\n    if (expiredCount >= batchThreshold) {\r\n      await new Promise((resolve) => {\r\n        const req = index.openCursor(range);\r\n        req.onsuccess = (e) => {\r\n          const cursor = e.target.result;\r\n          if (cursor) {\r\n            const entry = cursor.value;\r\n            if (entry.timestamp <= cutoff) {\r\n              const delReq = store.delete(cursor.primaryKey);\r\n              delReq.onerror = (err) => {\r\n                log.error(\r\n                  \"IndexedDB delete failed (TTL eviction):\",\r\n                  err.target.error,\r\n                );\r\n              };\r\n              if (onEvict)\r\n                onEvict({ key: cursor.primaryKey, reason: EvictionReason.TTL });\r\n              this._metrics.evictions.ttl++;\r\n            }\r\n            cursor.continue();\r\n          } else {\r\n            resolve();\r\n          }\r\n        };\r\n        req.onerror = (e) => {\r\n          log.error(\r\n            \"IndexedDB openCursor failed (TTL eviction):\",\r\n            e.target.error,\r\n          );\r\n          resolve();\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * (Internal) Evict items from a store by max size.\r\n   */\r\n  async _evictBySize(store, keyField, maxSize, onEvict, now) {\r\n    if (!maxSize || maxSize <= 0) return;\r\n\r\n    const total = await new Promise((resolve) => {\r\n      const req = store.count();\r\n      req.onsuccess = () => resolve(req.result || 0);\r\n      req.onerror = (e) => {\r\n        log.error(\r\n          \"IndexedDB count failed (Size eviction):\",\r\n          e.target.error,\r\n        );\r\n        resolve(0);\r\n      };\r\n    });\r\n\r\n    if (total <= maxSize) return;\r\n    const excess = total - maxSize;\r\n\r\n    await new Promise((resolve) => {\r\n      const index = store.index(\"timestamp\");\r\n      const cursorReq = index.openCursor();\r\n      let deleted = 0;\r\n\r\n      cursorReq.onerror = (err) => {\r\n        log.error(\r\n          \"IndexedDB openCursor failed (Size eviction):\",\r\n          err.target.error,\r\n        );\r\n        resolve();\r\n      };\r\n\r\n      cursorReq.onsuccess = (ev) => {\r\n        const cursor = ev.target.result;\r\n        if (!cursor || deleted >= excess) {\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        const delReq = store.delete(cursor.primaryKey);\r\n        delReq.onerror = (err) => {\r\n          log.error(\r\n            \"IndexedDB delete failed (Size eviction):\",\r\n            err.target.error,\r\n          );\r\n        };\r\n\r\n        if (onEvict)\r\n          onEvict({ key: cursor.primaryKey, reason: EvictionReason.SIZE });\r\n        this._metrics.evictions.size++;\r\n        deleted++;\r\n        cursor.continue();\r\n      };\r\n    });\r\n  }\r\n}\r\n", "import {\r\n  stringToHex,\r\n  hexToString,\r\n  dehydrateTx,\r\n  dehydrateBlock,\r\n} from \"../utilities/utilities.js\";\r\nimport { KaspaIndexer, MatchMode } from \"./indexer.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.intelligence.scanner);\r\n\r\nexport const BlockScannerEvent = Object.freeze({\r\n  BLOCK_ADDED: \"block-added\",\r\n});\r\n\r\nexport const SearchMode = Object.freeze({\r\n  INCLUDES: \"includes\",\r\n  STARTS_WITH: \"startsWith\",\r\n  EXACT: \"exact\",\r\n  ENDS_WITH: \"endsWith\",\r\n});\r\n\r\nexport class KaspaBlockScanner {\r\n  #prefixes = new Set();\r\n  #blockSubscribers = new Set();\r\n  #matchSubscribers = new Set();\r\n  #blockListener = null;\r\n  #reconnectHandler = null;\r\n  #lastBlockTime = null;\r\n  #pendingBlockEnrichment = new Set();\r\n  indexer = null;\r\n\r\n  constructor(\r\n    client,\r\n    {\r\n      prefixes = [],\r\n      addresses = [],\r\n      mode = SearchMode.INCLUDES,\r\n      indexerOptions = {},\r\n      onMatch = null,\r\n      onBlock = null,\r\n    } = {},\r\n  ) {\r\n    this.client = client;\r\n    this.scanning = false;\r\n\r\n    if (typeof onBlock === \"function\") this.#blockSubscribers.add(onBlock);\r\n    if (typeof onMatch === \"function\") this.#matchSubscribers.add(onMatch);\r\n\r\n    if (Array.isArray(prefixes)) {\r\n      prefixes.forEach((p) => this.addPrefix(p));\r\n    } else if (prefixes) {\r\n      this.addPrefix(prefixes);\r\n    }\r\n\r\n    this.addresses = Array.isArray(addresses) ? addresses : [];\r\n    this.searchMode = Object.values(SearchMode).includes(mode)\r\n      ? mode\r\n      : SearchMode.INCLUDES;\r\n\r\n    this.indexer = new KaspaIndexer(indexerOptions);\r\n    // Async DB init with callback binding\r\n    this.indexer.initDB().then(() => {\r\n      if (typeof indexerOptions.onIndexerUpdate === \"function\") {\r\n        this.indexer.onIndexerUpdate = indexerOptions.onIndexerUpdate;\r\n      }\r\n    });\r\n  }\r\n\r\n  // --- Getters & Setters ---\r\n  get prefixes() {\r\n    return Array.from(this.#prefixes);\r\n  }\r\n  set prefixes(values) {\r\n    this.#prefixes.clear();\r\n    const arr = Array.isArray(values) ? values : [values];\r\n    arr.forEach((v) => this.addPrefix(v));\r\n  }\r\n\r\n  addPrefix(prefix) {\r\n    if (prefix) this.#prefixes.add(stringToHex(prefix));\r\n  }\r\n  addPrefixHex(prefixHex) {\r\n    const normalized = normalizeHexPrefix(prefixHex);\r\n    if (normalized) this.#prefixes.add(normalized);\r\n  }\r\n  removePrefix(prefix) {\r\n    this.#prefixes.delete(stringToHex(prefix));\r\n  }\r\n  removePrefixHex(prefixHex) {\r\n    const normalized = normalizeHexPrefix(prefixHex);\r\n    if (normalized) this.#prefixes.delete(normalized);\r\n  }\r\n  addAddress(address) {\r\n    if (!this.addresses.includes(address)) this.addresses.push(address);\r\n  }\r\n  removeAddress(address) {\r\n    this.addresses = this.addresses.filter((a) => a !== address);\r\n  }\r\n\r\n  // --- Subscription API ---\r\n  subscribeBlock(fn) {\r\n    if (typeof fn !== \"function\") return () => {};\r\n    this.#blockSubscribers.add(fn);\r\n    return () => this.#blockSubscribers.delete(fn);\r\n  }\r\n\r\n  subscribeMatch(fn) {\r\n    if (typeof fn !== \"function\") return () => {};\r\n    this.#matchSubscribers.add(fn);\r\n    return () => this.#matchSubscribers.delete(fn);\r\n  }\r\n\r\n  // --- Health & Status ---\r\n  checkHealth() {\r\n    if (!this.scanning) return true;\r\n    if (!this.#lastBlockTime) return false;\r\n    return Date.now() - this.#lastBlockTime <= 60_000;\r\n  }\r\n\r\n  get status() {\r\n    return {\r\n      scanning: this.scanning,\r\n      matchSubscribers: this.#matchSubscribers.size,\r\n      blockSubscribers: this.#blockSubscribers.size,\r\n      prefixes: this.#prefixes.size,\r\n      lastBlockTime: this.#lastBlockTime,\r\n      health: this.checkHealth(),\r\n    };\r\n  }\r\n\r\n  async start(onBlock) {\r\n    if (!this.client) throw new Error(\"Kaspa client required\");\r\n    if (this.scanning) return;\r\n    this.scanning = true;\r\n    this.#lastBlockTime = Date.now();\r\n\r\n    if (onBlock && typeof onBlock === \"function\")\r\n      this.#blockSubscribers.add(onBlock);\r\n\r\n    // FIX: Guarded subscription\r\n    const subscribeSafely = async () => {\r\n      try {\r\n        if (this.scanning) await this.client.subscribeBlockAdded();\r\n      } catch (e) {\r\n        log.warn(\"Scanner: Subscription failed.\");\r\n      }\r\n    };\r\n\r\n    await subscribeSafely();\r\n\r\n    if (!this.#reconnectHandler) {\r\n      this.#reconnectHandler = () => {\r\n        if (this.scanning) subscribeSafely();\r\n      };\r\n      this.client.addEventListener(\"connect\", this.#reconnectHandler);\r\n    }\r\n\r\n    this.#blockListener = (event) => {\r\n      if (!this.scanning || !event?.data?.block) return;\r\n\r\n      const rawBlock = event.data.block;\r\n      this.#lastBlockTime = Date.now();\r\n\r\n      // 1. DEHYDRATE: This converts WASM to JS. Still necessary for your stream.\r\n      const cleanBlock = dehydrateBlock(rawBlock);\r\n\r\n      // 2. CONDITIONAL TX PROCESSING:\r\n      // Only loop through thousands of transactions if the Indexer is active\r\n      // or if the user is actually searching for a prefix/address.\r\n      const shouldScanTXs =\r\n        this.#prefixes.size > 0 ||\r\n        this.addresses.length > 0 ||\r\n        this.indexer?.active;\r\n\r\n      let matches = [];\r\n      let txCount = 0;\r\n\r\n      if (shouldScanTXs) {\r\n        txCount = this._processBlockTransactions(rawBlock, matches);\r\n        cleanBlock.txCount = txCount;\r\n      } else {\r\n        // If not scanning TXs, just grab the count from the header to save CPU\r\n        cleanBlock.txCount = Number(rawBlock.header?.transactionCount || 0);\r\n      }\r\n\r\n      // 3. INDEXER: Only touches the DB if active\r\n      if (this.indexer?.active) {\r\n        this.indexer.addBlock(cleanBlock);\r\n      }\r\n\r\n      // 4. BROADCAST: Send the clean block to your VRF buffer\r\n      for (const subscriber of this.#blockSubscribers) {\r\n        try {\r\n          subscriber(cleanBlock, matches);\r\n        } catch (err) {\r\n          log.error(err);\r\n        }\r\n      }\r\n    };\r\n\r\n    this.client.addEventListener(\r\n      BlockScannerEvent.BLOCK_ADDED,\r\n      this.#blockListener,\r\n    );\r\n  }\r\n\r\n  _processBlockTransactions(rawBlock, matches) {\r\n    const txs = rawBlock?.transactions;\r\n    if (!txs) return null;\r\n\r\n    const shouldMatch = this.#prefixes.size > 0 || this.addresses.length > 0;\r\n    const indexerActive = !!this.indexer?.active;\r\n    let txCount = 0;\r\n\r\n    // Standardized iteration with mandatory cleanup\r\n    for (const tx of txs) {\r\n      txCount++;\r\n      try {\r\n        if (shouldMatch) {\r\n          const { matchObj, isMatch } = this._analyzeTransaction(tx, rawBlock);\r\n          if (isMatch) {\r\n            matches.push(matchObj);\r\n            this._indexMatchingTransactionIfNeeded(matchObj);\r\n            for (const subscriber of this.#matchSubscribers) {\r\n              try {\r\n                subscriber(rawBlock, matchObj);\r\n              } catch (err) {}\r\n            }\r\n          }\r\n        }\r\n        if (indexerActive) this._indexAllTransactionIfNeeded(tx, rawBlock);\r\n      } finally {\r\n        if (tx && typeof tx.free === \"function\") tx.free();\r\n      }\r\n    }\r\n    return txCount;\r\n  }\r\n\r\n  _analyzeTransaction(tx, rawBlock) {\r\n    const { payloadMatch, decodedPayload } = this._matchPayload(tx);\r\n    const addressMatch = this._matchAddress(tx);\r\n    const isMatch = payloadMatch || addressMatch;\r\n\r\n    let matchObj = null;\r\n    if (isMatch) {\r\n      matchObj = this._buildMatchObject(\r\n        tx,\r\n        rawBlock,\r\n        payloadMatch,\r\n        addressMatch,\r\n        decodedPayload,\r\n      );\r\n    }\r\n    return { matchObj, isMatch };\r\n  }\r\n\r\n  _matchPayload(tx) {\r\n    const payloadHex = tx.payload;\r\n    if (this.#prefixes.size === 0 || !payloadHex)\r\n      return { payloadMatch: false, decodedPayload: null };\r\n\r\n    // Normalize payload to lowercase for case-insensitive matching\r\n    // Prefixes are already normalized to lowercase in addPrefixHex\r\n    const payloadLower = payloadHex.toLowerCase();\r\n\r\n    let payloadMatch = false;\r\n    for (const prefixHex of this.#prefixes) {\r\n      if (this.searchMode === SearchMode.INCLUDES)\r\n        payloadMatch = payloadLower.includes(prefixHex);\r\n      else if (this.searchMode === SearchMode.STARTS_WITH)\r\n        payloadMatch = payloadLower.startsWith(prefixHex);\r\n      else if (this.searchMode === SearchMode.EXACT)\r\n        payloadMatch = payloadLower === prefixHex;\r\n      else if (this.searchMode === SearchMode.ENDS_WITH)\r\n        payloadMatch = payloadLower.endsWith(prefixHex);\r\n      if (payloadMatch) break;\r\n    }\r\n\r\n    let decodedPayload = null;\r\n    if (payloadMatch) {\r\n      try {\r\n        decodedPayload = hexToString(payloadHex);\r\n      } catch (e) {}\r\n    }\r\n    return { payloadMatch, decodedPayload };\r\n  }\r\n\r\n  _matchAddress(tx) {\r\n    if (this.addresses.length === 0) return false;\r\n    // Check outputs\r\n    if (Array.isArray(tx.outputs)) {\r\n      for (const out of tx.outputs) {\r\n        if (this.addresses.includes(out.verboseData?.scriptPublicKeyAddress))\r\n          return true;\r\n      }\r\n    }\r\n    // Check inputs\r\n    if (Array.isArray(tx.inputs)) {\r\n      for (const input of tx.inputs) {\r\n        if (this.addresses.includes(input.previousOutpointAddress)) return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  _buildMatchObject(tx, rawBlock, payloadMatch, addressMatch, decodedPayload) {\r\n    // FIX: Passing rawBlock so dehydrateTx finds .hash\r\n    const dehydratedTx = dehydrateTx({ tx, block: rawBlock, decodedPayload });\r\n    dehydratedTx.payloadMatch = payloadMatch;\r\n    dehydratedTx.addressMatch = addressMatch;\r\n    return dehydratedTx;\r\n  }\r\n\r\n  _indexMatchingTransactionIfNeeded(matchObj) {\r\n    if (!this.indexer.active) return;\r\n    const mode = this.indexer.matchMode;\r\n    if (\r\n      mode === MatchMode.ALL ||\r\n      mode === MatchMode.MATCHING ||\r\n      (mode === MatchMode.CUSTOM && this.indexer.indexAllMatchingTransactions)\r\n    ) {\r\n      this.indexer.addTransaction(matchObj, true);\r\n    }\r\n  }\r\n\r\n  _indexAllTransactionIfNeeded(tx, rawBlock) {\r\n    if (!this.indexer.active) return;\r\n    const mode = this.indexer.matchMode;\r\n    if (\r\n      mode === MatchMode.ALL ||\r\n      mode === MatchMode.TRANSACTIONS ||\r\n      (mode === MatchMode.CUSTOM && this.indexer.indexAllTransactions)\r\n    ) {\r\n      const obj = this._buildMatchObject(tx, rawBlock, false, false, null);\r\n      this.indexer.addTransaction(obj, false);\r\n    }\r\n  }\r\n\r\n  _indexBlockIfNeeded(rawBlock, txCountOverride = null) {\r\n    if (!this.indexer.active) return;\r\n    const mode = this.indexer.matchMode;\r\n\r\n    if (\r\n      mode === MatchMode.ALL ||\r\n      mode === MatchMode.BLOCKS ||\r\n      (mode === MatchMode.CUSTOM && this.indexer.indexAllBlocks)\r\n    ) {\r\n      const summary = dehydrateBlock(rawBlock);\r\n      if (summary) {\r\n        const headerCount = Number(\r\n          rawBlock?.header?.transactionCount ?? rawBlock?.header?.txCount,\r\n        );\r\n        summary.txCount = Number.isFinite(txCountOverride)\r\n          ? txCountOverride\r\n          : headerCount;\r\n        this.indexer.addBlock(summary);\r\n\r\n        if (summary.hash && (!summary.txCount || summary.txCount <= 0)) {\r\n          this._enrichBlockTxCount(summary.hash);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async _enrichBlockTxCount(hash) {\r\n    if (!hash || this.#pendingBlockEnrichment.has(hash)) return;\r\n    this.#pendingBlockEnrichment.add(hash);\r\n    try {\r\n      const full = await this._fetchBlockWithTransactions(hash);\r\n      if (full?.transactions) {\r\n        const summary = dehydrateBlock(full);\r\n        summary.txCount = full.transactions.length;\r\n        this.indexer.addBlock(summary);\r\n      }\r\n    } catch (err) {\r\n    } finally {\r\n      this.#pendingBlockEnrichment.delete(hash);\r\n    }\r\n  }\r\n\r\n  async _fetchBlockWithTransactions(hash) {\r\n    try {\r\n      if (typeof this.client.getBlock === \"function\")\r\n        return await this.client.getBlock({ hash, includeTransactions: true });\r\n    } catch {}\r\n    return null;\r\n  }\r\n\r\n  stop() {\r\n    this.scanning = false;\r\n    if (this.#blockListener) {\r\n      this.client.removeEventListener(\r\n        BlockScannerEvent.BLOCK_ADDED,\r\n        this.#blockListener,\r\n      );\r\n      this.#blockListener = null;\r\n    }\r\n    if (this.#reconnectHandler) {\r\n      this.client.removeEventListener(\"connect\", this.#reconnectHandler);\r\n      this.#reconnectHandler = null;\r\n    }\r\n    try {\r\n      this.client.unsubscribeBlockAdded();\r\n    } catch (e) {}\r\n    this.#blockSubscribers.clear();\r\n    this.#matchSubscribers.clear();\r\n    this.#prefixes = new Set();\r\n    this.addresses = [];\r\n  }\r\n}\r\n\r\nfunction normalizeHexPrefix(prefixHex) {\r\n  if (!prefixHex) return null;\r\n  if (typeof prefixHex !== \"string\") return null;\r\n  const trimmed = prefixHex.trim();\r\n  if (!trimmed) return null;\r\n  const hex = trimmed.startsWith(\"0x\") ? trimmed.slice(2) : trimmed;\r\n  if (hex.length === 0 || hex.length % 2 !== 0) return null;\r\n  if (!/^[0-9a-fA-F]+$/.test(hex)) return null;\r\n  return hex.toLowerCase();\r\n}\r\n", "import { walkDagRange } from \"./dag_walk.js\";\r\nimport { KaspaBlockScanner, SearchMode } from \"./scanner.js\";\r\nimport {\r\n  IndexerEventType,\r\n  MatchMode,\r\n  EvictionReason,\r\n  IndexerStore,\r\n} from \"./indexer.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.intelligence.intelligenceFacade);\r\n\r\n// Re-export indexer enums\r\nexport {\r\n  IndexerEventType,\r\n  MatchMode,\r\n  EvictionReason,\r\n  IndexerStore,\r\n  SearchMode,\r\n};\r\n\r\nexport class IntelligenceFacade {\r\n  /**\r\n   * @param {Object} client - Kaspa RPC client\r\n   * @param {Object} scannerOptions - { prefix, addresses, mode }\r\n   * @param {Object} indexerOptions - { dbName, matchMode, onIndexerUpdate, ttlMinutes, etc. }\r\n   */\r\n  constructor(client, scannerOptions = {}, indexerOptions = {}) {\r\n    this.client = client;\r\n    this._subscribers = new Map();\r\n\r\n    const onIndexerUpdate = (event) => {\r\n      this._handleIndexerUpdate(event);\r\n    };\r\n\r\n    // The Scanner is the \"Worker\" - it creates and owns the Indexer\r\n    // We pass the indexerOptions straight through as the scanner expects.\r\n    this.scanner = new KaspaBlockScanner(client, {\r\n      ...scannerOptions,\r\n      indexerOptions: { ...indexerOptions, onIndexerUpdate },\r\n    });\r\n\r\n    // Expose the indexer for direct queries (getMetrics, getAllCachedBlocks, etc.)\r\n    this.indexer = this.scanner.indexer;\r\n\r\n    this._activeTasks = new AbortController();\r\n  }\r\n\r\n  _handleIndexerUpdate = (event) => {\r\n    const { type, data } = event;\r\n\r\n    switch (type) {\r\n      case IndexerEventType.TRANSACTION_IN_MEMORY:\r\n        this._trigger(\"onNewTransaction\", data);\r\n        break;\r\n      case IndexerEventType.MATCHING_TRANSACTION_IN_MEMORY:\r\n        this._trigger(\"onNewTransactionMatch\", data);\r\n        break;\r\n      case IndexerEventType.BLOCK_IN_MEMORY:\r\n        this._trigger(\"onNewBlock\", data);\r\n        break;\r\n      case IndexerEventType.TRANSACTION_CACHED:\r\n        this._trigger(\"onCachedTransaction\", data);\r\n        break;\r\n      case IndexerEventType.MATCHING_TRANSACTION_CACHED:\r\n        this._trigger(\"onCachedTransactionMatch\", data);\r\n        break;\r\n      case IndexerEventType.BLOCK_CACHED:\r\n        this._trigger(\"onCachedBlock\", data);\r\n        break;\r\n      case IndexerEventType.FLUSH_COMPLETED:\r\n        this._trigger(\"onFlushCompleted\", data);\r\n        break;\r\n      case IndexerEventType.EVICT_CYCLE_COMPLETED:\r\n        this._trigger(\"onEvictCycleCompleted\", data);\r\n        break;\r\n      case IndexerEventType.EVICT:\r\n        // Differentiate between cache evictions and full evictions\r\n        if (\r\n          data?.reason === EvictionReason.TTL ||\r\n          data?.reason === EvictionReason.SIZE\r\n        ) {\r\n          this._trigger(\"onCacheEvict\", data);\r\n        } else {\r\n          this._trigger(\"onEvict\", data);\r\n        }\r\n        break;\r\n      default:\r\n        log.warn(\"IntelligenceFacade: Unknown event type:\", type);\r\n    }\r\n  };\r\n\r\n  _trigger(name, data) {\r\n    const subs = this._subscribers.get(name);\r\n    if (!subs || subs.size === 0) return;\r\n    for (const cb of subs) {\r\n      try {\r\n        cb(data);\r\n      } catch (err) {\r\n        log.error(`IntelligenceFacade ${name} subscriber error`, err);\r\n      }\r\n    }\r\n  }\r\n\r\n  _getSubscriberSet(name) {\r\n    if (!this._subscribers.has(name)) {\r\n      this._subscribers.set(name, new Set());\r\n    }\r\n    return this._subscribers.get(name);\r\n  }\r\n\r\n  _addSubscriber(name, cb) {\r\n    if (typeof cb !== \"function\") return () => {};\r\n    const set = this._getSubscriberSet(name);\r\n    set.add(cb);\r\n    return () => set.delete(cb);\r\n  }\r\n\r\n  onNewBlock(cb) {\r\n    // Now only registers once.\r\n    // Fires when Indexer confirms it has the block in memory.\r\n    return this._addSubscriber(\"onNewBlock\", cb);\r\n  }\r\n  onNewTransaction(cb) {\r\n    return this._addSubscriber(\"onNewTransaction\", cb);\r\n  }\r\n  onNewTransactionMatch(cb) {\r\n    return this._addSubscriber(\"onNewTransactionMatch\", cb);\r\n  }\r\n  onCachedBlock(cb) {\r\n    return this._addSubscriber(\"onCachedBlock\", cb);\r\n  }\r\n  onCachedTransaction(cb) {\r\n    return this._addSubscriber(\"onCachedTransaction\", cb);\r\n  }\r\n  onCachedTransactionMatch(cb) {\r\n    return this._addSubscriber(\"onCachedTransactionMatch\", cb);\r\n  }\r\n  onEvict(cb) {\r\n    return this._addSubscriber(\"onEvict\", cb);\r\n  }\r\n  onCacheEvict(cb) {\r\n    return this._addSubscriber(\"onCacheEvict\", cb);\r\n  }\r\n\r\n  async init() {\r\n    await this.indexer.initDB();\r\n  }\r\n\r\n  /**\r\n   * Starts the system.\r\n   * The scanner will listen to the network, feed the indexer,\r\n   * and the indexer will fire the 'onIndexerUpdate' events.\r\n   */\r\n  async start() {\r\n    await this.indexer.initDB();\r\n    this.indexer.start();\r\n\r\n    // Start the scanner. We don't need a separate callback here because\r\n    // the user is listening via the indexer's onIndexerUpdate events.\r\n    await this.scanner.start();\r\n  }\r\n\r\n  getIndexerTimings() {\r\n    return {\r\n      ttlMs: this.indexer?.ttlMs ?? null,\r\n      flushInterval: this.indexer?.flushInterval ?? null,\r\n    };\r\n  }\r\n\r\n  async startIndexer() {\r\n    await this.init();\r\n    this.indexer.start();\r\n    return this.getIndexerTimings();\r\n  }\r\n\r\n  stopIndexer() {\r\n    this.indexer.stop();\r\n  }\r\n\r\n  setSearchMode(mode) {\r\n    if (this.scanner) this.scanner.searchMode = mode;\r\n  }\r\n\r\n  async startScanner(onBlock) {\r\n    return this.scanner.start(onBlock);\r\n  }\r\n\r\n  stopScanner() {\r\n    this.scanner.stop();\r\n  }\r\n\r\n  async getCachedSnapshot() {\r\n    const [allTxs, matchingTxs, blocks] = await Promise.all([\r\n      this.indexer.getAllCachedTransactions(),\r\n      this.indexer.getAllCachedMatchingTransactions(),\r\n      this.indexer.getAllCachedBlocks(),\r\n    ]);\r\n    return { allTxs, matchingTxs, blocks };\r\n  }\r\n\r\n  getInMemorySnapshot() {\r\n    return {\r\n      allTxs: this.indexer.getAllTransactions(),\r\n      matchingTxs: this.indexer.getAllMatchingTransactions(),\r\n      blocks: this.indexer.getAllBlocks(),\r\n    };\r\n  }\r\n\r\n  async clearIndexerStore(storeName) {\r\n    return this.indexer.clearStore(storeName);\r\n  }\r\n\r\n  /** Walk the DAG from startHash to endHash (or present).\r\n   * @param {Object} options\r\n   * @param {string} options.startHash - Block hash to start from\r\n   * @param {string} [options.endHash] - Optional block hash to end at\r\n   * @param {Array<string>} [options.prefixes] - Optional payload prefixes to match\r\n   * @param {function} options.onMatch - Callback for each matching transaction\r\n   * @param {number} [options.maxSeconds] - Max seconds to run (default 30)\r\n   * @param {number} [options.minTimestamp] - Min timestamp to consider (default 0)\r\n   * @param {function} [options.logFn] - Optional logging function\r\n   * @returns {Promise<void>}\r\n   */\r\n  async walkDagRange(options) {\r\n    return await walkDagRange({ client: this.client, ...options });\r\n  }\r\n\r\n  /**\r\n   * Add an address to the watch list\r\n   * @param {string} address - Kaspa address to watch\r\n   */\r\n  addAddress(address) {\r\n    this.scanner?.addAddress(address);\r\n  }\r\n\r\n  /** Remove an address from the watch list\r\n   * @param {string} address - Kaspa address to remove\r\n   */\r\n  removeAddress(address) {\r\n    this.scanner?.removeAddress(address);\r\n  }\r\n\r\n  /** Set the list of addresses to watch\r\n   * @param {Array<string>|string} addresses - Array of addresses or single address\r\n   */\r\n  setAddresses(addresses) {\r\n    if (!this.scanner) return;\r\n    // Remove all current addresses\r\n    if (Array.isArray(this.scanner.addresses)) {\r\n      for (const addr of [...this.scanner.addresses]) {\r\n        this.scanner.removeAddress(addr);\r\n      }\r\n    }\r\n    // Add new addresses\r\n    const addrs = Array.isArray(addresses) ? addresses : [addresses];\r\n    for (const addr of addrs) {\r\n      this.scanner.addAddress(addr);\r\n    }\r\n  }\r\n\r\n  /** Add a payload prefix to the watch list\r\n   * @param {string} prefix - Payload prefix to add\r\n   */\r\n  addPrefix(prefix) {\r\n    this.scanner?.addPrefix(prefix);\r\n  }\r\n\r\n  /** Add a hex payload prefix to the watch list\r\n   * @param {string} prefixHex - Hex prefix to add\r\n   */\r\n  addPrefixHex(prefixHex) {\r\n    this.scanner?.addPrefixHex?.(prefixHex);\r\n  }\r\n\r\n  /** Remove a payload prefix from the watch list\r\n   * @param {string} prefix - Payload prefix to remove\r\n   */\r\n  removePrefix(prefix) {\r\n    this.scanner?.removePrefix(prefix);\r\n  }\r\n\r\n  /** Remove a hex payload prefix from the watch list\r\n   * @param {string} prefixHex - Hex prefix to remove\r\n   */\r\n  removePrefixHex(prefixHex) {\r\n    this.scanner?.removePrefixHex?.(prefixHex);\r\n  }\r\n\r\n  /** Set the list of payload prefixes to watch\r\n   * @param {Array<string>|string} prefixes - Array of prefixes or single prefix\r\n   */\r\n  setPrefixes(prefixes) {\r\n    if (!this.scanner) return;\r\n    // Remove all current prefixes\r\n    if (Array.isArray(this.scanner.prefixes)) {\r\n      for (const prefix of [...this.scanner.prefixes]) {\r\n        this.scanner.removePrefix(prefix);\r\n      }\r\n    }\r\n    // Add new prefixes\r\n    const pfxs = Array.isArray(prefixes) ? prefixes : [prefixes];\r\n    for (const prefix of pfxs) {\r\n      this.scanner.addPrefix(prefix);\r\n    }\r\n  }\r\n\r\n  shutdown() {\r\n    this._activeTasks.abort();\r\n    this.scanner.stop();\r\n    this.indexer.stop();\r\n    for (const set of this._subscribers.values()) {\r\n      set.clear();\r\n    }\r\n    this._subscribers.clear();\r\n  }\r\n}\r\n", "// dh_encryption.js\r\nimport {\r\n  encryptXChaCha20Poly1305,\r\n  decryptXChaCha20Poly1305,\r\n} from \"../kas-wasm/kaspa.js\";\r\nimport * as utilities from \"../utilities/utilities.js\";\r\nimport * as secp from \"https://esm.sh/@noble/secp256k1\";\r\n\r\n/**\r\n * Diffie\u2013Hellman Session Manager\r\n * Handles handshake, shared secret derivation, and message encryption/decryption.\r\n */\r\nexport class DHSession {\r\n  constructor() {\r\n    this.myPrivateKeyHex = null;\r\n    this.myPublicKeyHex = null;\r\n    this.myPrivateKeyBytes = null;\r\n    this.myPublicKeyBytes = null;\r\n    this.sharedSecretBytes = null;\r\n    this.sessionKey = null;\r\n    this.peerPublicKeyHex = null;\r\n    this.peerPublicKeyBytes = null;\r\n  }\r\n\r\n  /**\r\n   * Initiate handshake: send your public key to peer\r\n   */\r\n  initiateHandshake(privateKeyHex, publicKeyHex) {\r\n    if (!privateKeyHex) {\r\n      throw new Error(\"initiateHandshake requires privateKeyHex\");\r\n    }\r\n    this.myPrivateKeyHex = privateKeyHex;\r\n\r\n    // Ensure public key consistency using utilities\r\n    if (publicKeyHex) {\r\n      this.myPublicKeyHex = publicKeyHex;\r\n    } else {\r\n      this.myPublicKeyHex = utilities.getPublicKeyHex(privateKeyHex);\r\n    }\r\n\r\n    this.myPrivateKeyBytes = utilities.hexToBytes(privateKeyHex);\r\n    this.myPublicKeyBytes = utilities.hexToBytes(this.myPublicKeyHex);\r\n\r\n    return {\r\n      type: \"DH_INIT\",\r\n      publicKey: this.myPublicKeyHex,\r\n      timestamp: Date.now(),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Respond to handshake: accept peer public key and derive shared secret\r\n   */\r\n  async respondToHandshake(peerPublicKeyHex) {\r\n    this.peerPublicKeyHex = peerPublicKeyHex;\r\n    this.peerPublicKeyBytes = utilities.hexToBytes(peerPublicKeyHex);\r\n\r\n    // Derive shared secret using noble\r\n    this.sharedSecretBytes = secp.getSharedSecret(\r\n      this.myPrivateKeyBytes,\r\n      this.peerPublicKeyBytes,\r\n      true,\r\n    );\r\n\r\n    // Derive session key (hash the shared secret)\r\n    const digest = await window.crypto.subtle.digest(\r\n      \"SHA-256\",\r\n      this.sharedSecretBytes,\r\n    );\r\n    const sessionKey = new Uint8Array(digest);\r\n    this.sessionKey = sessionKey;\r\n\r\n    return {\r\n      type: \"DH_ACK\",\r\n      publicKey: this.myPublicKeyHex,\r\n      timestamp: Date.now(),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Derives the raw shared secret (for KKTP HKDF).\r\n   */\r\n  deriveSharedSecret(peerPublicKeyHex) {\r\n    this.peerPublicKeyHex = peerPublicKeyHex;\r\n    this.peerPublicKeyBytes = utilities.hexToBytes(peerPublicKeyHex);\r\n    this.sharedSecretBytes = secp.getSharedSecret(\r\n      this.myPrivateKeyBytes,\r\n      this.peerPublicKeyBytes,\r\n      true,\r\n    );\r\n    return this.sharedSecretBytes;\r\n  }\r\n\r\n  setSessionKey(key) {\r\n    this.sessionKey = key;\r\n  }\r\n\r\n  /**\r\n   * Encrypt a message with the session key\r\n   */\r\n  encryptMessage(plaintext) {\r\n    if (!this.sessionKey) throw new Error(\"Session not established\");\r\n    const sessionKeyHex = utilities.bytesToHex(this.sessionKey);\r\n    return encryptXChaCha20Poly1305(plaintext, sessionKeyHex);\r\n  }\r\n\r\n  /**\r\n   * Decrypt a message with the session key\r\n   */\r\n  decryptMessage(cipherText) {\r\n    if (!this.sessionKey) throw new Error(\"Session not established\");\r\n    const sessionKeyHex = utilities.bytesToHex(this.sessionKey);\r\n    return decryptXChaCha20Poly1305(cipherText, sessionKeyHex);\r\n  }\r\n}\r\n", "import { encryptMessage, decryptMessage } from \"./encryption.js\";\r\nimport { DHSession } from \"./dh_encryption.js\";\r\nimport {\r\n  signMessageWithPrivateKeyHex,\r\n  verifyMessageWithPublicKeyHex,\r\n  deriveChildKeyPair,\r\n} from \"../utilities/utilities.js\";\r\n\r\nexport class CryptoFacade {\r\n\r\n  // Symmetric Encryption (Standard)\r\n  encrypt(text, password) {\r\n    return encryptMessage(text, password);\r\n  }\r\n\r\n  decrypt(encrypted, password) {\r\n    return decryptMessage(encrypted, password);\r\n  }\r\n\r\n  /**\r\n   * Create DH Session.\r\n   */\r\n  createDHSession(privateKey, publicKey) {\r\n    if(!privateKey && !publicKey) {\r\n      throw new Error(\"Cannot create DH session without private key and public key\");\r\n    }\r\n    const session = new DHSession();\r\n    if (privateKey) {\r\n      session.initiateHandshake(privateKey, publicKey);\r\n    }\r\n    return session;\r\n  }\r\n\r\n  /**\r\n   * Generates KKTP Identity Keys (Branch 0 and 100).\r\n   */\r\n  async generateIdentityKeys(xprvHex, index) {\r\n    const sigRaw = await deriveChildKeyPair({ xprvHex, branch: 0, index });\r\n    const dhRaw = await deriveChildKeyPair({ xprvHex, branch: 100, index });\r\n    return {\r\n      sig: { privateKey: sigRaw.privateKey, publicKey: sigRaw.publicKey },\r\n      dh: { privateKey: dhRaw.privateKey, publicKey: dhRaw.publicKey },\r\n    };\r\n  }\r\n\r\n  // --- Signing & Verification ---\r\n\r\n  async signMessage(privateKeyHex, message) {\r\n    return await signMessageWithPrivateKeyHex(privateKeyHex, message);\r\n  }\r\n\r\n  async verifyMessage(publicKeyHex, message, signatureHex) {\r\n    return await verifyMessageWithPublicKeyHex(\r\n      publicKeyHex,\r\n      message,\r\n      signatureHex,\r\n    );\r\n  }\r\n}\r\n", "// errors.js\r\n// Centralized error classes for folding/extraction\r\n\r\nexport class GammaValidationError extends Error {\r\n  constructor(message, meta) {\r\n    super(message);\r\n    this.name = \"GammaValidationError\";\r\n    this.meta = meta;\r\n  }\r\n}\r\n\r\nexport class FoldingValidationError extends Error {\r\n  constructor(message, meta) {\r\n    super(message);\r\n    this.name = \"FoldingValidationError\";\r\n    this.meta = meta;\r\n  }\r\n}\r\n\r\nexport class FoldingExtractionError extends Error {\r\n  constructor(message, meta) {\r\n    super(message);\r\n    this.name = \"FoldingExtractionError\";\r\n    this.meta = meta;\r\n  }\r\n}\r\n", "// logger.js\r\n\r\nlet currentProvider = console;\r\n\r\nconst noopLogger = {\r\n  log: () => {},\r\n  error: () => {},\r\n};\r\n\r\n/**\r\n * Internal helper to ensure metadata/objects don't render as [object Object]\r\n */\r\nconst formatMeta = (meta) => {\r\n  if (meta === \"\" || meta === undefined) return \"\";\r\n  return typeof meta === \"object\" ? JSON.stringify(meta) : meta;\r\n};\r\n\r\nexport function setLoggerProvider(provider) {\r\n  if (provider === true) {\r\n    currentProvider = console;\r\n  } else if (provider === false) {\r\n    currentProvider = noopLogger;\r\n  } else if (\r\n    provider &&\r\n    typeof provider.log === \"function\" &&\r\n    typeof provider.error === \"function\"\r\n  ) {\r\n    currentProvider = provider;\r\n  } else {\r\n    throw new Error(\r\n      \"Invalid logger provider: must implement .log() and .error(), or pass true/false.\",\r\n    );\r\n  }\r\n}\r\n\r\nexport function logInfo(msg, meta = \"\") {\r\n  const message = typeof msg === \"string\" ? msg : JSON.stringify(msg);\r\n  // Now meta is stringified before being passed to the provider\r\n  currentProvider.log(\r\n    `[INFO] ${new Date().toISOString()} - ${message}`,\r\n    formatMeta(meta),\r\n  );\r\n}\r\n\r\nexport function logError(msg, meta = \"\") {\r\n  const message = typeof msg === \"string\" ? msg : JSON.stringify(msg);\r\n  // Now meta is stringified before being passed to the provider\r\n  currentProvider.error(\r\n    `[ERROR] ${new Date().toISOString()} - ${message}`,\r\n    formatMeta(meta),\r\n  );\r\n}\r\n", "import { logError } from \"./logs/logger.js\";\r\n// Core cryptographic and conversion helpers for the beacon\r\n\r\n// Throws on error, never silently falls back\r\nexport async function sha256Hash(input) {\r\n  // Accepts: string (hex or utf8) or Uint8Array\r\n  let data;\r\n  if (typeof input === \"string\") {\r\n    // If hex string, convert to bytes\r\n    if (/^[0-9a-fA-F]+$/.test(input) && input.length % 2 === 0) {\r\n      data = hexToBytes(input);\r\n    } else {\r\n      data = new TextEncoder().encode(input);\r\n    }\r\n  } else if (input instanceof Uint8Array) {\r\n    data = input;\r\n  } else {\r\n    throw new Error(\"sha256Hash: input must be string or Uint8Array\");\r\n  }\r\n  // Browser only: use Web Crypto API\r\n  if (\r\n    typeof window !== \"undefined\" &&\r\n    window.crypto &&\r\n    window.crypto.subtle &&\r\n    window.crypto.subtle.digest\r\n  ) {\r\n    try {\r\n      const hashBuffer = await window.crypto.subtle.digest(\"SHA-256\", data);\r\n      const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n      return hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\r\n    } catch (e) {\r\n      logError({ msg: \"sha256Hash (browser) failed\", error: e });\r\n      throw e;\r\n    }\r\n  }\r\n  throw new Error(\r\n    \"sha256Hash: No supported crypto backend found (browser only)\",\r\n  );\r\n}\r\n\r\n// Convert hex string to byte array (validates input)\r\nexport function hexToBytes(hex) {\r\n  if (\r\n    typeof hex !== \"string\" ||\r\n    hex.length % 2 !== 0 ||\r\n    !/^[0-9a-fA-F]+$/.test(hex)\r\n  ) {\r\n    logError({ msg: \"hexToBytes: Invalid hex input\", hex });\r\n    throw new Error(\"hexToBytes: Input must be even-length hex string\");\r\n  }\r\n  const bytes = [];\r\n  for (let i = 0; i < hex.length; i += 2) {\r\n    const byte = parseInt(hex.substr(i, 2), 16);\r\n    if (isNaN(byte)) {\r\n      logError({\r\n        msg: \"hexToBytes: Invalid byte\",\r\n        index: i,\r\n        byte: hex.substr(i, 2),\r\n      });\r\n      throw new Error(\"hexToBytes: Invalid byte\");\r\n    }\r\n    bytes.push(byte);\r\n  }\r\n  return new Uint8Array(bytes);\r\n}\r\n\r\n// Convert byte array to position array\r\nexport function bytesToPositions(bytes, count) {\r\n  const positions = [];\r\n  for (let i = 0; i < count && i < bytes.length; i++) {\r\n    positions.push(bytes[i]);\r\n  }\r\n  while (positions.length < count) {\r\n    const index = positions.length % bytes.length;\r\n    const offset = Math.floor(positions.length / bytes.length);\r\n    positions.push((bytes[index] + offset * 17) % 256);\r\n  }\r\n  return positions;\r\n}\r\n\r\n// Convert hex to binary string (4 bits per hex char)\r\nexport function hexToBinary(hex) {\r\n  return hex\r\n    .split(\"\")\r\n    .map((char) => {\r\n      return parseInt(char, 16).toString(2).padStart(4, \"0\");\r\n    })\r\n    .join(\"\");\r\n}\r\n\r\n// Convert binary string to hex\r\nexport function binaryToHex(bin) {\r\n  let hex = \"\";\r\n  for (let i = 0; i < bin.length; i += 4) {\r\n    const nibble = bin.substr(i, 4);\r\n    hex += parseInt(nibble, 2).toString(16);\r\n  }\r\n  return hex;\r\n}\r\n\r\n/**\r\n * Extract a single bit from a hex hash at a given position (0-255)\r\n * Bit ordering: 0 = most significant bit (MSB), 255 = least significant bit (LSB)\r\n * @param {string} hexHash - 64-char hex string (256 bits)\r\n * @param {number} pos - Bit position (0 = MSB, 255 = LSB)\r\n * @returns {'0'|'1'}\r\n */\r\nexport function getBitFromHash(hexHash, pos) {\r\n  if (\r\n    typeof hexHash !== \"string\" ||\r\n    hexHash.length !== 64 ||\r\n    !/^[0-9a-fA-F]+$/.test(hexHash)\r\n  ) {\r\n    logError({ msg: \"getBitFromHash: Invalid hexHash\", hexHash });\r\n    throw new Error(\"getBitFromHash: hexHash must be 64-char hex string\");\r\n  }\r\n  if (typeof pos !== \"number\" || pos < 0 || pos > 255) {\r\n    logError({ msg: \"getBitFromHash: Invalid pos\", pos });\r\n    throw new Error(\"getBitFromHash: pos must be 0-255\");\r\n  }\r\n  const bytes = hexToBytes(hexHash);\r\n  const bitIndex = pos % (bytes.length * 8);\r\n  const byteIndex = Math.floor(bitIndex / 8);\r\n  const bitOffset = 7 - (bitIndex % 8); // MSB first\r\n  const byte = bytes[byteIndex];\r\n  return ((byte >> bitOffset) & 1).toString();\r\n}\r\n// --- Test vectors for SHA-256 correctness ---\r\nexport async function runSha256TestVectors() {\r\n  const vectors = [\r\n    {\r\n      input: \"\",\r\n      expected:\r\n        \"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855\",\r\n    },\r\n    {\r\n      input: \"abc\",\r\n      expected:\r\n        \"ba7816bf8f01cfea414140de5dae2223b00361a396177a9cb410ff61f20015ad\",\r\n    },\r\n    {\r\n      input: \"The quick brown fox jumps over the lazy dog\",\r\n      expected:\r\n        \"d7a8fbb307d7809469ca9abcb0082e4f8d5651e46d3cdb762d02d0bf37c9e592\",\r\n    },\r\n    {\r\n      input: \"The quick brown fox jumps over the lazy dog.\",\r\n      expected:\r\n        \"ef537f25c895bfa782526529a9b63d97aa631564d5d789c2b765448c8635fb6c\",\r\n    },\r\n  ];\r\n  for (const v of vectors) {\r\n    const actual = await sha256Hash(v.input);\r\n    if (actual !== v.expected) {\r\n      logError({\r\n        msg: \"SHA-256 test vector failed\",\r\n        input: v.input,\r\n        expected: v.expected,\r\n        got: actual,\r\n      });\r\n      throw new Error(\"SHA-256 test vector failed\");\r\n    }\r\n  }\r\n  LogInfo({ msg: \"SHA-256 test vectors passed\" });\r\n}\r\n\r\n// Convert byte array to hex string\r\nexport function bytesToHex(bytes) {\r\n  return Array.from(bytes)\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n", "import { getBitFromHash } from \"./crypto.js\";\r\nimport { logError } from \"./logs/logger.js\";\r\nimport { FoldingExtractionError } from \"./errors.js\";\r\n\r\n// Extract bits from blocks at given positions\r\n// Accepts optional opts: { iteration }\r\nexport async function extractBits(blocks, positions, logAnomaly, opts = {}) {\r\n  const outputBits = [];\r\n  const auditTrail = [];\r\n  const anomalyBuffer = [];\r\n  for (let i = 0; i < positions.length; i++) {\r\n    const block = blocks[i % blocks.length];\r\n    const pos = positions[i];\r\n    let bit = null;\r\n    let anomaly = null;\r\n    // Only extract if block is final and valid\r\n    if (!block || !block.hash || typeof block.hash !== \"string\") {\r\n      anomaly = \"missing_or_malformed_block\";\r\n      anomalyBuffer.push({ type: anomaly, index: i, block });\r\n      logError(anomaly, { index: i, block });\r\n      continue;\r\n    }\r\n    if (!/^[0-9a-fA-F]{64}$/.test(block.hash)) {\r\n      anomaly = \"invalid_hash_format\";\r\n      anomalyBuffer.push({ type: anomaly, index: i, block });\r\n      logError(anomaly, { index: i, block });\r\n      continue;\r\n    }\r\n    if (!block.isFinal) {\r\n      anomaly = \"block_not_final\";\r\n      anomalyBuffer.push({ type: anomaly, index: i, block });\r\n      logError(anomaly, { index: i, block });\r\n      continue;\r\n    }\r\n    try {\r\n      bit = getBitFromHash(block.hash, pos);\r\n      if (bit === \"0\" || bit === \"1\") {\r\n        outputBits.push(bit);\r\n      } else {\r\n        anomaly = \"invalid_bit\";\r\n        anomalyBuffer.push({ type: anomaly, index: i, block, bit });\r\n        logError(anomaly, { index: i, block, bit });\r\n        // Do not push anything if invalid\r\n      }\r\n    } catch (e) {\r\n      anomaly = \"extraction_failed\";\r\n      anomalyBuffer.push({ type: anomaly, index: i, block, error: e.message });\r\n      logError(anomaly, { index: i, block, error: e.message });\r\n      // Do not push anything on error\r\n    }\r\n    auditTrail.push({\r\n      blockIndex: i % blocks.length,\r\n      blockHash: block ? block.hash : null,\r\n      bitPosition: pos,\r\n      bitValue: bit,\r\n      extractionIndex: i,\r\n      anomaly,\r\n    });\r\n  }\r\n  const bitstring = outputBits.join(\"\");\r\n  if (anomalyBuffer.length > 0) {\r\n    await logError(anomalyBuffer);\r\n  }\r\n  if (bitstring.length === 0) {\r\n    await logError([{ type: \"fatal_no_bits_extracted\", blocks, positions }]);\r\n    // Throw FoldingExtractionError with meta for upstream error handling\r\n    const meta = { blocks, positions };\r\n    if (typeof opts.iteration !== \"undefined\") meta.iteration = opts.iteration;\r\n    throw new FoldingExtractionError(\r\n      \"No bits could be extracted: all blocks or hashes invalid\",\r\n      meta,\r\n    );\r\n  }\r\n  return { bitstring, auditTrail };\r\n}\r\n", "// Folding logic for VRF randomness extraction\r\nimport { FoldingValidationError, FoldingExtractionError } from \"./errors.js\";\r\nimport { extractBits } from \"./extractor.js\";\r\nimport { sha256Hash, hexToBytes, bytesToPositions } from \"./crypto.js\";\r\nimport { logInfo, logError } from \"./logs/logger.js\";\r\n\r\n/**\r\n * SHA-256 Folding Rule\r\n * Hash the previous output to generate new positions\r\n * @param {string} previousOutput - Previous bitstring output\r\n * @param {number} numPositions - Number of positions needed\r\n * @returns {Promise<number[]>} - New position array\r\n */\r\nexport async function sha256FoldingRule(previousOutput, numPositions) {\r\n  // Input validation\r\n  if (\r\n    typeof previousOutput !== \"string\" ||\r\n    !/^[01]+$/.test(previousOutput) ||\r\n    previousOutput.length < 8\r\n  ) {\r\n    logError({\r\n      msg: \"sha256FoldingRule: Invalid previousOutput\",\r\n      previousOutput,\r\n      numPositions,\r\n    });\r\n    throw new Error(\r\n      \"sha256FoldingRule: previousOutput must be a non-empty bitstring\",\r\n    );\r\n  }\r\n  if (\r\n    typeof numPositions !== \"number\" ||\r\n    numPositions <= 0 ||\r\n    numPositions > 4096\r\n  ) {\r\n    logError({ msg: \"sha256FoldingRule: Invalid numPositions\", numPositions });\r\n    throw new Error(\r\n      \"sha256FoldingRule: numPositions must be a positive integer <= 4096\",\r\n    );\r\n  }\r\n  // Hash the previous output repeatedly to get enough bytes\r\n  let hashInput = previousOutput;\r\n  let hashLength = 0;\r\n  let bytesNeeded = numPositions;\r\n  let hashBytes = [];\r\n  try {\r\n    // Pre-allocate for performance\r\n    while (hashBytes.length < bytesNeeded) {\r\n      const hash = await sha256Hash(hashInput);\r\n      const chunk = Array.from(hexToBytes(hash));\r\n      if (!hashLength) hashLength = chunk.length * 8;\r\n      for (let b of chunk) hashBytes.push(b);\r\n      hashInput = hash; // chain hashes\r\n    }\r\n  } catch (e) {\r\n    try {\r\n      logError({\r\n        msg: \"sha256FoldingRule: sha256Hash failed\",\r\n        error: e,\r\n        previousOutput,\r\n        numPositions,\r\n      });\r\n    } catch {}\r\n    throw new FoldingExtractionError(\"sha256FoldingRule: sha256Hash failed\", {\r\n      cause: e,\r\n      previousOutput,\r\n      numPositions,\r\n    });\r\n  }\r\n  const positions = bytesToPositions(hashBytes, numPositions);\r\n  try {\r\n    logInfo({ previousOutput, rule: \"sha256\", positions });\r\n  } catch {} // fire-and-forget, robust\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Get initial positions (before first folding)\r\n * @param {number} numPositions - Number of positions needed\r\n * @param {string} seed - Optional seed for deterministic generation\r\n * @returns {number[]} - Initial position array\r\n */\r\nexport async function getInitialPositions(numPositions, seed = \"beacon\") {\r\n  if (\r\n    typeof numPositions !== \"number\" ||\r\n    numPositions <= 0 ||\r\n    numPositions > 4096\r\n  ) {\r\n    logError({\r\n      msg: \"getInitialPositions: Invalid numPositions\",\r\n      numPositions,\r\n    });\r\n    throw new FoldingValidationError(\r\n      \"getInitialPositions: numPositions must be a positive integer <= 4096\",\r\n      { numPositions },\r\n    );\r\n  }\r\n  if (typeof seed !== \"string\" || seed.length < 1 || seed.length > 128) {\r\n    logError({ msg: \"getInitialPositions: Invalid seed\", seed });\r\n    throw new FoldingValidationError(\r\n      \"getInitialPositions: seed must be a non-empty string <= 128 chars\",\r\n      { seed },\r\n    );\r\n  }\r\n  let hash, bytes;\r\n  try {\r\n    hash = await sha256Hash(seed);\r\n    bytes = Array.from(hexToBytes(hash));\r\n  } catch (e) {\r\n    try {\r\n      logError({\r\n        msg: \"getInitialPositions: sha256Hash failed\",\r\n        error: e,\r\n        seed,\r\n      });\r\n    } catch {}\r\n    throw new FoldingExtractionError(\"getInitialPositions: sha256Hash failed\", {\r\n      cause: e,\r\n      seed,\r\n    });\r\n  }\r\n  const positions = [];\r\n  for (let i = 0; i < numPositions; i++) {\r\n    positions.push(bytes[i % bytes.length]);\r\n  }\r\n  try {\r\n    logInfo({ seed, rule: \"initial\", positions });\r\n  } catch {} // fire-and-forget\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Main folding function - applies the selected rule\r\n * @param {string} previousOutput - Previous bitstring output (null for first iteration)\r\n * @param {string} rule - Folding rule: 'sha256' only\r\n * @param {number} numPositions - Number of positions needed\r\n * @returns {Promise<number[]>} - New position array\r\n */\r\nexport async function updatePositions(previousOutput, rule, numPositions) {\r\n  // First iteration - use initial positions\r\n  if (!previousOutput) {\r\n    return getInitialPositions(numPositions);\r\n  }\r\n  if (rule !== \"sha256\") {\r\n    try {\r\n      logError({ msg: \"updatePositions: Unsupported folding rule\", rule });\r\n    } catch {}\r\n    throw new FoldingValidationError(\"Only sha256 folding rule is supported.\", {\r\n      rule,\r\n    });\r\n  }\r\n  return await sha256FoldingRule(previousOutput, numPositions);\r\n}\r\n\r\n/**\r\n * Normalize input into a canonical 64-char hex hash.\r\n * Accepts: 64-char hex, binary string, or arbitrary hex.\r\n */\r\nexport async function ensureCanonicalHash(input) {\r\n  if (typeof input === \"string\" && /^[0-9a-fA-F]{64}$/.test(input)) {\r\n    return input;\r\n  }\r\n  if (typeof input === \"string\" && /^[01]+$/.test(input)) {\r\n    const padded = input.padEnd(256, \"0\").slice(0, 256);\r\n    let hex = \"\";\r\n    for (let i = 0; i < 256; i += 4) {\r\n      hex += parseInt(padded.slice(i, i + 4), 2).toString(16);\r\n    }\r\n    return await sha256Hash(hex);\r\n  }\r\n  if (typeof input === \"string\" && /^[0-9a-fA-F]+$/.test(input)) {\r\n    return await sha256Hash(input);\r\n  }\r\n  throw new Error(\"Invalid input for canonical hash\");\r\n}\r\n\r\n/**\r\n * Explicit Bit Rotation\r\n * Maps raw positions to the available entropy space (hashLength)\r\n * This is the \"shuffling\" phase of the VRF.\r\n */\r\nexport function rotatePositions(positions, hashLength) {\r\n  if (!Array.isArray(positions)) {\r\n    throw new Error(\"Positions must be an array\");\r\n  }\r\n  if (typeof hashLength !== \"number\" || hashLength <= 0) {\r\n    throw new Error(\"hashLength must be a positive number\");\r\n  }\r\n\r\n  const rotated = positions.map((pos) => pos % hashLength);\r\n  try {\r\n    logInfo({ msg: \"Positions rotated\", count: rotated.length, hashLength });\r\n  } catch {}\r\n  return rotated;\r\n}\r\n\r\n/**\r\n * Final Whitening\r\n * Ensures the final bitstring is statistically uniform via a final SHA-256 pass.\r\n */\r\nexport async function whitenEntropy(bitstring) {\r\n  if (typeof bitstring !== \"string\" || !/^[01]+$/.test(bitstring)) {\r\n    throw new Error(\"bitstring must be a binary string\");\r\n  }\r\n  const hash = await sha256Hash(bitstring);\r\n  const bytes = hexToBytes(hash);\r\n  const whitened = Array.from(bytes)\r\n    .map((b) => b.toString(2).padStart(8, \"0\"))\r\n    .join(\"\");\r\n\r\n  try {\r\n    logInfo({ msg: \"Final whitening complete\", originalLength: bitstring.length });\r\n  } catch {}\r\n  return whitened;\r\n}\r\n\r\n/**\r\n * Canonical recursive folding: at each round, update positions and re-extract bits\r\n * @param {Object[]} blocks - Array of block info objects (must have .hash)\r\n * @param {string} initialOutput - Initial extracted bitstring\r\n * @param {string} rule - Folding rule to apply ('sha256' recommended)\r\n * @param {number} iterations - Number of folding iterations\r\n * @param {number} numPositions - Number of positions for each iteration\r\n * @returns {Promise<Object>} - { finalPositions, finalOutput, history }\r\n */\r\nexport async function recursiveFolding(\r\n  blocks,\r\n  initialOutput,\r\n  rule,\r\n  iterations,\r\n  numPositions,\r\n) {\r\n  // Input validation\r\n  if (\r\n    !Array.isArray(blocks) ||\r\n    blocks.length === 0 ||\r\n    blocks.length > 32 ||\r\n    !blocks.every(\r\n      (b) =>\r\n        b && typeof b.hash === \"string\" && /^[0-9a-fA-F]{64}$/.test(b.hash),\r\n    )\r\n  ) {\r\n    try {\r\n      logError({ msg: \"recursiveFolding: Invalid blocks\", blocks });\r\n    } catch {}\r\n    throw new FoldingValidationError(\r\n      \"recursiveFolding: blocks must be array of 1-32 objects with 64-char hex .hash\",\r\n      { blocks },\r\n    );\r\n  }\r\n  if (\r\n    typeof initialOutput !== \"string\" ||\r\n    !/^[01]+$/.test(initialOutput) ||\r\n    initialOutput.length < 8\r\n  ) {\r\n    try {\r\n      logError({\r\n        msg: \"recursiveFolding: Invalid initialOutput\",\r\n        initialOutput,\r\n      });\r\n    } catch {}\r\n    throw new FoldingValidationError(\r\n      \"recursiveFolding: initialOutput must be a non-empty bitstring\",\r\n      { initialOutput },\r\n    );\r\n  }\r\n  if (typeof iterations !== \"number\" || iterations < 1 || iterations > 32) {\r\n    try {\r\n      logError({ msg: \"recursiveFolding: Invalid iterations\", iterations });\r\n    } catch {}\r\n    throw new FoldingValidationError(\r\n      \"recursiveFolding: iterations must be 1-32\",\r\n      { iterations },\r\n    );\r\n  }\r\n  if (\r\n    typeof numPositions !== \"number\" ||\r\n    numPositions <= 0 ||\r\n    numPositions > 4096\r\n  ) {\r\n    try {\r\n      logError({ msg: \"recursiveFolding: Invalid numPositions\", numPositions });\r\n    } catch {}\r\n    throw new FoldingValidationError(\r\n      \"recursiveFolding: numPositions must be a positive integer <= 4096\",\r\n      { numPositions },\r\n    );\r\n  }\r\n  let currentOutput = initialOutput;\r\n  let positions = await getInitialPositions(numPositions);\r\n  let hashLength = 256; // fallback, will be updated\r\n  const history = [\r\n    {\r\n      iteration: 0,\r\n      output: initialOutput,\r\n      positions: positions.slice(),\r\n      rule: \"initial\",\r\n      audit: [],\r\n    },\r\n  ];\r\n  let allAnomalies = [];\r\n  for (let i = 1; i <= iterations; i++) {\r\n    try {\r\n      positions = await updatePositions(currentOutput, rule, numPositions);\r\n      // Dynamically determine hash length from first block\r\n      if (blocks[0] && typeof blocks[0].hash === \"string\") {\r\n        hashLength = blocks[0].hash.length * 4;\r\n      }\r\n      const safePositions = rotatePositions(positions, hashLength);\r\n      // Extract new bits using safe positions\r\n      // Always pass iteration in opts to extractBits\r\n      const { bitstring, auditTrail } = await extractBits(\r\n        blocks,\r\n        safePositions,\r\n        (anomaly, details) => {\r\n          try {\r\n            logInfo({ anomaly, ...details });\r\n          } catch {}\r\n        },\r\n        { iteration: i },\r\n      );\r\n      try {\r\n        logInfo({ iteration: i, positions: safePositions.slice(), bitstring });\r\n      } catch {} // fire-and-forget, robust\r\n      if (!bitstring || bitstring.length === 0) {\r\n        try {\r\n          logError({\r\n            msg: \"recursiveFolding: No bits extracted\",\r\n            iteration: i,\r\n            positions: safePositions,\r\n            blocks,\r\n          });\r\n        } catch {}\r\n        // Always include iteration in meta for FoldingExtractionError\r\n        throw new FoldingExtractionError(\r\n          \"recursiveFolding: No bits extracted at iteration \" + i,\r\n          { iteration: i, positions: safePositions, blocks },\r\n        );\r\n      }\r\n      currentOutput = bitstring;\r\n      history.push({\r\n        iteration: i,\r\n        output: currentOutput,\r\n        positions: safePositions.slice(),\r\n        rule,\r\n        audit: auditTrail,\r\n      });\r\n      // Aggregate anomalies from auditTrail\r\n      allAnomalies.push(...auditTrail.filter((a) => a.anomaly));\r\n    } catch (e) {\r\n      try {\r\n        logError({\r\n          msg: \"recursiveFolding: Error in iteration\",\r\n          error: e,\r\n          iteration: i,\r\n          rule,\r\n          numPositions,\r\n        });\r\n      } catch {}\r\n      // Always set meta.iteration for FoldingExtractionError\r\n      if (e instanceof FoldingExtractionError) {\r\n        e.meta = { ...(e.meta || {}), iteration: i };\r\n      }\r\n      throw e;\r\n    }\r\n  }\r\n  return {\r\n    finalPositions: positions,\r\n    finalOutput: currentOutput,\r\n    history,\r\n    anomalies: allAnomalies,\r\n  };\r\n}\r\n\r\n/**\r\n * Get folding statistics\r\n * @param {Object} foldingResult - Result from recursiveFolding\r\n * @returns {Object} - Statistics about the folding process\r\n */\r\nexport function getFoldingStats(foldingResult) {\r\n  const { history, finalPositions } = foldingResult;\r\n  // Use dynamic hash length if available\r\n  let hashLength = 256;\r\n  if (\r\n    finalPositions &&\r\n    finalPositions.length > 0 &&\r\n    foldingResult.finalPositions\r\n  ) {\r\n    // Try to infer from max position value\r\n    const maxPos = Math.max(...finalPositions);\r\n    hashLength = Math.max(256, Math.ceil((maxPos + 1) / 64) * 64); // round up to next 64\r\n  }\r\n  const unique = new Set(finalPositions).size;\r\n  const distribution = finalPositions.reduce((acc, pos) => {\r\n    const bucket = Math.floor(pos / 64); // 4 buckets\r\n    acc[bucket] = (acc[bucket] || 0) + 1;\r\n    return acc;\r\n  }, {});\r\n  return {\r\n    iterations: history.length - 1,\r\n    totalPositions: finalPositions.length,\r\n    uniquePositions: unique,\r\n    coverage: ((unique / hashLength) * 100).toFixed(2) + \"%\",\r\n    distribution: distribution,\r\n  };\r\n}\r\n\r\n/**\r\n * High-level fold function to combine two randomness sources\r\n * @param {string} randA - First source (hex or binary string)\r\n * @param {string} randB - Second source (hex or binary string)\r\n * @param {Object} options - { iterations, numPositions }\r\n * @returns {Promise<string>} - Final folded bitstring\r\n */\r\nexport async function fold(randA, randB, options = {}) {\r\n  // randA, randB: hex or binary strings\r\n  // Default: 2 rounds, 256 positions, sha256 folding\r\n  const hashA = await ensureCanonicalHash(randA);\r\n  const hashB = await ensureCanonicalHash(randB);\r\n  const blocks = [\r\n    { hash: hashA, isFinal: true },\r\n    { hash: hashB, isFinal: true },\r\n  ];\r\n  // Initial extraction: derive positions from seed if provided,\r\n  // otherwise use static sequential positions (backwards-compatible)\r\n  const positions = options.seed\r\n    ? await getInitialPositions(\r\n        256,\r\n        typeof options.seed === \"string\" && options.seed.length > 0\r\n          ? options.seed.slice(0, 128)\r\n          : \"beacon\",\r\n      )\r\n    : Array.from({ length: 256 }, (_, i) => i);\r\n  const { bitstring: initialBits } = await extractBits(blocks, positions);\r\n  const foldingResult = await recursiveFolding(\r\n    blocks,\r\n    initialBits,\r\n    \"sha256\",\r\n    options.iterations || 2,\r\n    options.numPositions || 256,\r\n  );\r\n  return await whitenEntropy(foldingResult.finalOutput);\r\n}\r\n", "export class Block {\r\n  constructor(data) {\r\n    // --- CORE IDENTITY ---\r\n    this.hash = data.hash;\r\n    this.source = data.source || \"kaspa\";\r\n    this.pulseIndex = data.pulseIndex || 0;\r\n\r\n    // Temporal Data (MS from Kaspa)\r\n    this.timestamp = data.timestamp || data.time || data.timeStamp || 0;\r\n\r\n    // --- PROVABILITY & DAG DATA ---\r\n    this.blueScore = data.blueScore || 0;\r\n    this.daaScore = data.daaScore || 0; // Essential for window-based VRF\r\n    this.parents = data.parents || [];\r\n\r\n    // Cryptographic signature/proof\r\n    this.signature = data.signatureValue || data.signature || \"\";\r\n\r\n    // VRF Seed: Entropy source\r\n    this.seedValue = data.seedValue || data.hash;\r\n\r\n    // --- CONSENSUS STATE ---\r\n    this.confirms = data.confirms || 0;\r\n    this.isFinal =\r\n      this.source === \"nist\" || this.confirms >= 20 || !!this.blueScore;\r\n  }\r\n\r\n  /**\r\n   * Static helper for Kaspa WASM integration\r\n   */\r\n  static fromKaspa(rawBlock, blueScore) {\r\n    // Extract header safely\r\n    const header = rawBlock.header || rawBlock;\r\n\r\n    // Extract parents safely\r\n    const parents = header.parents\r\n      ? Array.from(header.parents).map((p) => p.toString())\r\n      : [];\r\n\r\n    return new Block({\r\n      hash: header.hash?.toString() || rawBlock.hash?.toString(),\r\n      timestamp: Number(header.timestamp || rawBlock.timestamp),\r\n      blueScore: Number(blueScore || header.blueScore || 0),\r\n      daaScore: Number(header.daaScore || 0),\r\n      parents: parents,\r\n      source: \"kaspa\"\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Split NIST 512-bit hashes for 256-bit compatibility\r\n   */\r\n  static fromNistSplit(qrngBlock) {\r\n    const metadata = {\r\n      timestamp: qrngBlock.time || qrngBlock.timeStamp,\r\n      source: \"nist\",\r\n      pulseIndex: qrngBlock.pulseIndex || qrngBlock.index || 0,\r\n      signature: qrngBlock.signatureValue || qrngBlock.signature,\r\n      seedValue: qrngBlock.seedValue,\r\n      daaScore: 0, // Not applicable to NIST\r\n      parents: [],\r\n    };\r\n\r\n    return [\r\n      new Block({ ...metadata, hash: qrngBlock.hash.substring(0, 64) }),\r\n      new Block({ ...metadata, hash: qrngBlock.hash.substring(64, 128) }),\r\n    ];\r\n  }\r\n}\r\n", "// config.js\r\n// Centralized configuration for tunable parameters and endpoints\r\n\r\nexport const CONFIG = {\r\n  // Tunable block counts\r\n  BTC_BLOCK_COUNT: 6, // default, can be overridden\r\n  KASPA_BLOCK_COUNT: 6, // default, can be overridden\r\n\r\n  // Finality\r\n  BTC_FINALITY_CONFIRMATIONS: 6,\r\n  KASPA_FINALITY_DAG_DEPTH: 60,\r\n\r\n  // Cache durations (ms)\r\n  BTC_CACHE_DURATION: 10 * 60 * 1000, // 10 minutes\r\n  QRNG_CACHE_DURATION: 60 * 1000, // 1 minute\r\n\r\n  // API call throttling (ms)\r\n  BTC_API_THROTTLE: 2000, // 2 seconds between calls\r\n  QRNG_API_THROTTLE: 60000, // 1 minute between calls\r\n};\r\n", "// API endpoints and parsing config for supported chains\r\nimport { Block } from \"./models/Block.js\";\r\n\r\nimport { CONFIG } from \"./config.js\";\r\n\r\nexport const API_CONFIG = {\r\n  bitcoin: {\r\n    endpoint: \"https://mempool.space/api\",\r\n    latestBlockUrl: \"/blocks/tip/height\",\r\n    blockByHeightUrl: \"/block-height/\",\r\n    blockByHashUrl: \"/block/\",\r\n    parseLatest: (data) => (typeof data === \"number\" ? data : parseInt(data)),\r\n    parseBlock: (data) => {\r\n      return new Block({\r\n        hash: data.id,\r\n        height: data.height,\r\n        time: data.timestamp,\r\n        source: \"bitcoin\",\r\n        confirms: data.confirmations || 0,\r\n      });\r\n    },\r\n  },\r\n  kaspa: {\r\n    endpoint: \"https://api.kaspa.org\",\r\n    latestBlockUrl: \"/blocks/head\",\r\n    blockByHashUrl: \"/blocks/\",\r\n    blueScoreUrl: \"/info/virtual-chain-blue-score\",\r\n    blocksFromBlueScoreUrl: \"/blocks-from-bluescore\",\r\n    parseLatest: (data) => data.blockHashes?.[0] || data.blockHash,\r\n    parseBlock: (data) => {\r\n      return new Block({\r\n        hash: data.hash,\r\n        blueScore: data.blueScore,\r\n        timestamp: data.timestamp,\r\n        parents: data.parents,\r\n        source: \"kaspa\",\r\n        confirms: data.confirmations || 0,\r\n      });\r\n    },\r\n  },\r\n};\r\n\r\n// Storage keys for randomness bitstrings\r\nexport const STORAGE_KEY = \"randomness_cumulative_bits\";\r\nexport const NIST_STORAGE_KEY = \"nist_cumulative_bits\";\r\n\r\n// Default number of blocks to fetch for randomness\r\n\r\n// Tunable block counts (from config)\r\nexport const KASPA_BLOCK_COUNT = CONFIG.KASPA_BLOCK_COUNT;\r\nexport const BTC_BLOCK_COUNT = CONFIG.BTC_BLOCK_COUNT;\r\n\r\n// Core project-wide constants\r\n// These are enforced to ensure only finalized blocks are used\r\n// Finality (from config)\r\nexport const FINALITY = {\r\n  bitcoin: { confirmations: CONFIG.BTC_FINALITY_CONFIRMATIONS },\r\n  kaspa: { dagDepth: CONFIG.KASPA_FINALITY_DAG_DEPTH },\r\n};\r\n", "// cache.js\r\n// Unified cache for BTC blocks and QRNG (in-memory + persistent)\r\nimport { logInfo, logError } from \"../logs/logger.js\";\r\n\r\nconst BTC_KEY = \"btc_block_cache\";\r\nconst QRNG_KEY = \"qrng_cache\";\r\n\r\n// In-memory cache\r\nlet btcBlockCache = { blocks: [], timestamp: 0 };\r\nlet qrngCache = { provider: null, length: null, result: null, timestamp: 0 };\r\n\r\n// --- BTC Block Cache ---\r\n\r\nexport function getBtcBlockCache() {\r\n  try {\r\n    const raw = localStorage.getItem(BTC_KEY);\r\n    if (raw) {\r\n      const data = JSON.parse(raw);\r\n      btcBlockCache = data;\r\n      logInfo(\"Read BTC block cache\", { BTC_KEY });\r\n      return data;\r\n    }\r\n  } catch (err) {\r\n    logError(\"Failed to read BTC block cache\", { BTC_KEY, error: err.message });\r\n  }\r\n  return btcBlockCache;\r\n}\r\n\r\nexport function setBtcBlockCache(blocks) {\r\n  const cacheObj = { blocks, timestamp: Date.now() };\r\n  btcBlockCache = cacheObj;\r\n  try {\r\n    localStorage.setItem(BTC_KEY, JSON.stringify(cacheObj));\r\n    logInfo(\"Wrote BTC block cache\", { BTC_KEY });\r\n  } catch (err) {\r\n    logError(\"Failed to write BTC block cache\", { BTC_KEY, error: err.message });\r\n  }\r\n}\r\n\r\n// --- QRNG Cache ---\r\n\r\nexport function getQrngCache() {\r\n  try {\r\n    const raw = localStorage.getItem(QRNG_KEY);\r\n    if (raw) {\r\n      const data = JSON.parse(raw);\r\n      qrngCache = data;\r\n      logInfo(\"Read QRNG cache\", { QRNG_KEY });\r\n      return data;\r\n    }\r\n  } catch (err) {\r\n    logError(\"Failed to read QRNG cache\", { QRNG_KEY, error: err.message });\r\n  }\r\n  return qrngCache;\r\n}\r\n\r\nexport function setQrngCache(provider, length, result) {\r\n  const cacheObj = { provider, length, result, timestamp: Date.now() };\r\n  qrngCache = cacheObj;\r\n  try {\r\n    localStorage.setItem(QRNG_KEY, JSON.stringify(cacheObj));\r\n    logInfo(\"Wrote QRNG cache\", { QRNG_KEY });\r\n  } catch (err) {\r\n    logError(\"Failed to write QRNG cache\", { QRNG_KEY, error: err.message });\r\n  }\r\n}\r\n", "// bitcoin.js\r\n// Bitcoin block fetching logic with Cache and Throttle integration\r\nimport { BTC_BLOCK_COUNT } from \"../constants.js\";\r\nimport { CONFIG } from \"../config.js\";\r\nimport { Block } from \"../models/Block.js\";\r\nimport { getBtcBlockCache, setBtcBlockCache } from \"./cache.js\";\r\nimport { logInfo, logError } from \"../logs/logger.js\";\r\n\r\n// --- Constants ---\r\nconst PROXY = \"https://api.allorigins.win/raw?url=\";\r\nconst API_URL = \"https://mempool.space/api/v1/blocks\";\r\n\r\n// State variable for throttling\r\nlet lastBtcApiCall = 0;\r\n\r\n/**\r\n * Fetch N recent Bitcoin blocks using a one-shot proxy call + local caching.\r\n * @param {number} n - Number of blocks to fetch (defaults to BTC_BLOCK_COUNT)\r\n * @returns {Promise<Object[]>} - Array of universal Block objects\r\n */\r\nexport async function getBitcoinBlocks(n = BTC_BLOCK_COUNT) {\r\n  if (!Number.isInteger(n) || n <= 0)\r\n    throw new Error(\"BTC block count must be a positive integer\");\r\n\r\n  const now = Date.now();\r\n  const cache = getBtcBlockCache();\r\n\r\n  // 1. Check Cache Validity\r\n  if (\r\n    cache &&\r\n    now - cache.timestamp < CONFIG.BTC_CACHE_DURATION &&\r\n    cache.blocks.length >= n\r\n  ) {\r\n    logInfo(\"BTC block cache hit\", { n });\r\n    return cache.blocks.slice(0, n);\r\n  }\r\n\r\n  // 2. Check Throttle State\r\n  // If we're inside the throttle window, return cache (even if stale) or throw.\r\n  if (now - lastBtcApiCall < CONFIG.BTC_API_THROTTLE) {\r\n    if (cache && cache.blocks && cache.blocks.length >= n) {\r\n      logInfo(\"BTC API throttled, returning cached data (stale allowed)\", {\r\n        n,\r\n      });\r\n      return cache.blocks.slice(0, n);\r\n    }\r\n    const waitTime = Math.ceil(\r\n      (CONFIG.BTC_API_THROTTLE - (now - lastBtcApiCall)) / 1000,\r\n    );\r\n    throw new Error(`BTC API throttled and no cached data: wait ${waitTime}s`);\r\n  }\r\n\r\n  // Auto-retry with exponential backoff (production-ready)\r\n  const MAX_RETRIES = 3;\r\n  let lastErr = null;\r\n\r\n  for (let attempt = 1; attempt <= MAX_RETRIES; attempt++) {\r\n    try {\r\n      // Set throttle timestamp before the call to prevent double-firing\r\n      lastBtcApiCall = Date.now();\r\n      logInfo(`Requesting BTC blocks via Proxy (attempt ${attempt}/${MAX_RETRIES})...`);\r\n\r\n      // 3. The Working \"One-Shot\" Fetch\r\n      const response = await fetch(`${PROXY}${encodeURIComponent(API_URL)}`);\r\n\r\n      if (!response.ok)\r\n        throw new Error(\r\n          `Proxy/API Error: ${response.status} ${response.statusText}`,\r\n        );\r\n\r\n      const latestBatch = await response.json();\r\n\r\n      if (!Array.isArray(latestBatch) || latestBatch.length === 0)\r\n        throw new Error(\"Invalid or empty data format from Mempool\");\r\n\r\n      const latestHeight = latestBatch[0].height;\r\n\r\n      // 4. Map to Universal Block Model\r\n      // We only take the first 'n' blocks from the batch\r\n      const blocks = latestBatch.slice(0, n).map((b) => {\r\n        return new Block({\r\n          hash: b.id,\r\n          height: b.height,\r\n          time: b.timestamp,\r\n          source: \"mempool.space\",\r\n          confirms: latestHeight - b.height + 1,\r\n        });\r\n      });\r\n\r\n      // 5. Update Cache and Return\r\n      setBtcBlockCache(blocks);\r\n      logInfo(\"BTC blocks successfully fetched and cached\", {\r\n        count: blocks.length,\r\n      });\r\n      return blocks;\r\n    } catch (err) {\r\n      lastErr = err;\r\n      lastBtcApiCall = 0; // Reset throttle to allow immediate retry\r\n      logError(`BTC fetch error (attempt ${attempt}/${MAX_RETRIES})`, { n, error: err.message });\r\n\r\n      if (attempt < MAX_RETRIES) {\r\n        const delay = 1000 * Math.pow(2, attempt - 1); // 1s, 2s\r\n        logInfo(`Retrying BTC fetch in ${delay}ms...`);\r\n        await new Promise((r) => setTimeout(r, delay));\r\n      }\r\n    }\r\n  }\r\n\r\n  // All retries exhausted \u2014 return stale cache if available\r\n  const staleCache = getBtcBlockCache();\r\n  if (staleCache?.blocks?.length >= n) {\r\n    logInfo(\"All BTC fetch retries failed, returning stale cache\", {\r\n      n,\r\n      cacheAge: Math.round((Date.now() - staleCache.timestamp) / 1000) + \"s\",\r\n    });\r\n    return staleCache.blocks.slice(0, n);\r\n  }\r\n\r\n  throw lastErr;\r\n}\r\n\r\n// Helper: Convert BTC API block to universal Block\r\nexport function btcApiToBlock(block, latestHeight) {\r\n  const confirms = latestHeight - block.height + 1;\r\n  return new Block({\r\n    hash: block.id,\r\n    height: block.height,\r\n    time: block.timestamp,\r\n    source: \"bitcoin\",\r\n    confirms,\r\n  });\r\n}\r\n", "// kaspa.js\r\n// Kaspa block fetching logic - Uses live block subscription (no API during gameplay)\r\n\r\nimport { KASPA_BLOCK_COUNT } from \"../constants.js\";\r\nimport { Block } from \"../models/Block.js\";\r\nimport { logInfo } from \"../logs/logger.js\";\r\nimport { kaspaPortal } from \"../../../kaspaPortal.js\";\r\n// Rolling buffer of recent blocks (newest first)\r\nconst BUFFER_SIZE = 20;\r\nlet _blockBuffer = [];\r\nlet _subscribed = false;\r\nlet _unsubscribe = null;\r\n\r\n/**\r\n * Subscribe to live blocks from kaspaPortal\r\n * Call this once during initialization\r\n * @param {Object} kaspaPortal - The kaspaPortal singleton\r\n */\r\nexport async function subscribeToBlocks() {\r\n  if (_subscribed) {\r\n    logInfo(\"Already subscribed to Kaspa blocks\");\r\n    return;\r\n  }\r\n\r\n  _unsubscribe = await kaspaPortal?.onNewBlock((block) => {\r\n    _addBlockToBuffer(block);\r\n  });\r\n\r\n  _subscribed = true;\r\n  logInfo(\"Subscribed to Kaspa blocks for VRF entropy\", {\r\n    bufferSize: BUFFER_SIZE,\r\n  });\r\n}\r\n\r\n/**\r\n * Unsubscribe from live blocks\r\n */\r\nexport function unsubscribeFromBlocks() {\r\n  if (_unsubscribe && typeof _unsubscribe === \"function\") {\r\n    _unsubscribe();\r\n    _unsubscribe = null;\r\n  }\r\n  _subscribed = false;\r\n  logInfo(\"Unsubscribed from Kaspa blocks\");\r\n}\r\n\r\n/**\r\n * Add a block to the rolling buffer\r\n * @param {Object} cleanBlock - Already dehydrated block from scanner\r\n */\r\nfunction _addBlockToBuffer(cleanBlock) {\r\n  if (!cleanBlock || !cleanBlock.hash) return;\r\n\r\n  // Check for duplicates (Simple check)\r\n  if (_blockBuffer.length > 0 && _blockBuffer[0].hash === cleanBlock.hash) {\r\n    return;\r\n  }\r\n\r\n  // Since cleanBlock is already a flat JS object,\r\n  // we just wrap it in our Model for VRF helper methods.\r\n  const vrfBlock = new Block(cleanBlock);\r\n\r\n  // Set defaults for live buffer\r\n  vrfBlock.isFinal = true;\r\n  vrfBlock.confirms = 1;\r\n\r\n  // Add to front, remove from back (O(1) operations)\r\n  _blockBuffer.unshift(vrfBlock);\r\n  if (_blockBuffer.length > BUFFER_SIZE) {\r\n    _blockBuffer.pop();\r\n  }\r\n\r\n  // Optional: only update if you really need the 'confirms' property updated in real-time\r\n  _updateConfirmations();\r\n}\r\n\r\n/**\r\n * Update confirmation counts based on buffer position\r\n */\r\nfunction _updateConfirmations() {\r\n  for (let i = 0; i < _blockBuffer.length; i++) {\r\n    _blockBuffer[i].confirms = i + 1;\r\n  }\r\n}\r\n\r\n/**\r\n * Get the current block buffer (for debugging)\r\n * @returns {Block[]}\r\n */\r\nexport function getBlockBuffer() {\r\n  return [..._blockBuffer];\r\n}\r\n\r\n/**\r\n * Clear the block buffer (for testing)\r\n */\r\nexport function clearBlockBuffer() {\r\n  _blockBuffer = [];\r\n}\r\n\r\n/**\r\n * Check if we have enough blocks in buffer\r\n * @param {number} n - Number of blocks needed\r\n * @returns {boolean}\r\n */\r\nexport function hasEnoughBlocks(n) {\r\n  return _blockBuffer.length >= n;\r\n}\r\n\r\n/**\r\n * Fetch N recent Kaspa block hashes\r\n * Priority: 1) Rolling buffer (preferred - no API calls) 2) API fallback\r\n * @param {number} n - Number of blocks to fetch (defaults to KASPA_BLOCK_COUNT)\r\n * @returns {Promise<Object[]>} - Array of block info objects\r\n */\r\nexport async function getKaspaBlocks(n = KASPA_BLOCK_COUNT) {\r\n  if (!Number.isInteger(n) || n <= 0) {\r\n    throw new Error(\"Kaspa block count must be a positive integer\");\r\n  }\r\n\r\n  // 1. Try rolling buffer first (preferred always fresh)\r\n  if (_blockBuffer.length >= n) {\r\n    const blocks = _blockBuffer.slice(0, n);\r\n    logInfo(\"Kaspa blocks from buffer\", {\r\n      count: blocks.length,\r\n      tipBlueScore: blocks[0]?.blueScore,\r\n      bufferSize: _blockBuffer.length,\r\n    });\r\n    return blocks;\r\n  }\r\n\r\n  // 2. If buffer insufficient but has some blocks, use what we have\r\n  if (_blockBuffer.length > 0) {\r\n    logInfo(\"Buffer has partial blocks, returning partial buffer\", {\r\n      have: _blockBuffer.length,\r\n      need: n,\r\n    });\r\n\r\n    return _blockBuffer.slice(0, Math.min(n, _blockBuffer.length));\r\n  }\r\n\r\n  // 3. No buffer\r\n  logInfo(\"No buffer available\");\r\n  throw new Error(\r\n    \"No Kaspa blocks, you likely forgot to connect to a Kaspa node first.\",\r\n  );\r\n}\r\n", "// server/core/QRNG-fetcher.js\r\n\r\nimport { Logger, LogModule } from \"../../../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.vrf.core.fetcher.qrngFetcher);\r\n\r\nexport class QRNGProvider {\r\n  constructor(name, baseUrl) {\r\n    this.name = name;\r\n    this.baseUrl = baseUrl;\r\n  }\r\n\r\n  async fetchRandomness(params = {}) {\r\n    throw new Error(\"fetchRandomness() must be implemented by subclass\");\r\n  }\r\n\r\n  async request(url, options = {}) {\r\n    try {\r\n      const res = await fetch(url, options);\r\n      if (!res.ok) {\r\n        throw new Error(`${this.name} API error: ${res.status}`);\r\n      }\r\n      return await res.json();\r\n    } catch (err) {\r\n      // In browser, just log to console\r\n      log.error(`[${this.name}] Request failed:`, err.message);\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n\r\n// Example provider: ANU QRNG\r\nexport class ANUQRNG extends QRNGProvider {\r\n  constructor() {\r\n    // Use CORS proxy for browser compatibility\r\n    super(\r\n      \"ANU QRNG\",\r\n      \"https://corsproxy.io/?http://qrng.anu.edu.au/API/jsonI.php\",\r\n    );\r\n  }\r\n\r\n  async fetchRandomness(length = 16) {\r\n    const url = `${this.baseUrl}?length=${length}&type=uint8`;\r\n    const data = await this.request(url);\r\n    return data.data; // array of random bytes\r\n  }\r\n}\r\n\r\n// Example provider: qrandom.io\r\nexport class QRandomIO extends QRNGProvider {\r\n  constructor() {\r\n    super(\"qrandom.io\", \"https://qrng.qrandom.io/api\");\r\n  }\r\n\r\n  async fetchRandomness(bits = 256) {\r\n    const url = `${this.baseUrl}?length=${bits}`;\r\n    const data = await this.request(url);\r\n    return data.randomness; // depends on API schema\r\n  }\r\n}\r\n\r\n// Provider: NIST Beacon\r\nexport class NISTBeacon extends QRNGProvider {\r\n  constructor() {\r\n    super(\"NIST Beacon\", \"https://beacon.nist.gov/beacon/2.0/chain/1/pulse/last\");\r\n  }\r\n\r\n  async fetchRandomness(length = 64) {\r\n    const data = await this.request(this.baseUrl);\r\n    const hex = data?.pulse?.outputValue;\r\n    if (!hex) throw new Error(\"NIST Beacon response missing outputValue\");\r\n\r\n    const bytes = [];\r\n    for (let i = 0; i < hex.length; i += 2) {\r\n      bytes.push(parseInt(hex.substr(i, 2), 16));\r\n    }\r\n    return bytes.slice(0, length);\r\n  }\r\n}\r\n", "import { getQrngCache, setQrngCache } from \"./cache.js\";\r\nimport { Block } from \"../models/Block.js\";\r\nimport { NISTBeacon } from \"./QRNG-fetcher.js\";\r\nimport { logInfo, logError } from \"../logs/logger.js\";\r\nimport { CONFIG } from \"../config.js\";\r\n\r\nconst nistProvider = new NISTBeacon();\r\n\r\nexport async function getQRNG(providerName = \"nist\", length = 32) {\r\n  if (!length || length <= 0) {\r\n    throw new Error(\"Invalid QRNG length\");\r\n  }\r\n\r\n  const cache = getQrngCache();\r\n  if (cache?.result?.hash && (Date.now() - cache.timestamp < CONFIG.QRNG_CACHE_DURATION)) {\r\n    return cache.result;\r\n  }\r\n\r\n  // Auto-retry with exponential backoff (production-ready)\r\n  const MAX_RETRIES = 3;\r\n  let lastErr = null;\r\n\r\n  for (let attempt = 1; attempt <= MAX_RETRIES; attempt++) {\r\n    try {\r\n      logInfo(`Fetching QRNG (attempt ${attempt}/${MAX_RETRIES})...`);\r\n      const response = await nistProvider.request(nistProvider.baseUrl);\r\n      const pulse = response.pulse;\r\n      const previousValue =\r\n        pulse.listValues?.find((v) => v.type === \"previous\")?.value ||\r\n        pulse.previousOutputValue;\r\n      const qrngBlock = new Block({\r\n        hash: pulse.outputValue,\r\n        time: pulse.timeStamp,\r\n        source: providerName,\r\n        seedValue: pulse.seedValue,\r\n        certificateId: pulse.certificateId,\r\n        previousOutputValue: pulse.localPrevHash || previousValue,\r\n        pulseIndex: pulse.pulseIndex,\r\n        signature: pulse.signatureValue,\r\n        signatureValue: pulse.signatureValue,\r\n        uri: pulse.uri,\r\n        version: pulse.version,\r\n        cipherSuite: pulse.cipherSuite,\r\n        period: pulse.period,\r\n        chainIndex: pulse.chainIndex,\r\n        timeStamp: pulse.timeStamp,\r\n        localRandomValue: pulse.localRandomValue,\r\n        external: pulse.external,\r\n        listValues: pulse.listValues,\r\n        precommitmentValue: pulse.precommitmentValue,\r\n        statusCode: pulse.statusCode,\r\n      });\r\n\r\n      setQrngCache(providerName, length, qrngBlock);\r\n      return qrngBlock;\r\n    } catch (err) {\r\n      lastErr = err;\r\n      logError(`QRNG Fetch Failed (attempt ${attempt}/${MAX_RETRIES})`, err.message);\r\n\r\n      if (attempt < MAX_RETRIES) {\r\n        const delay = 1000 * Math.pow(2, attempt - 1); // 1s, 2s\r\n        logInfo(`Retrying QRNG fetch in ${delay}ms...`);\r\n        await new Promise((r) => setTimeout(r, delay));\r\n      }\r\n    }\r\n  }\r\n\r\n  // All retries exhausted \u2014 return stale cache if available\r\n  if (cache?.result?.hash) {\r\n    logInfo(\"All QRNG retries failed, returning stale cached pulse\", {\r\n      cacheAge: Math.round((Date.now() - cache.timestamp) / 1000) + \"s\",\r\n    });\r\n    return cache.result;\r\n  }\r\n\r\n  throw lastErr;\r\n}\r\n", "// gamma.js - Enterprise-grade regularized upper incomplete gamma and log-gamma for NIST tests\r\n// Implements igamc (Q) and logGamma using robust, validated, and configurable approximations\r\n//\r\n// Contracts:\r\n//   - All functions validate input types and ranges, and throw GammaValidationError on invalid input\r\n//   - EPS (tolerance) and ITMAX (iteration limit) are configurable via options (must be finite > 0)\r\n//   - logGamma uses LRU cache for repeated calls (cache key is always original input z)\r\n//   - All magic constants are replaced with FPMIN (1e-300) or documented thresholds\r\n//   - Precision: ~1e-8 relative error for typical NIST test domains (see tests/gamma.unit.test.js for verification against SciPy)\r\n//   - ITMAX: For very large a or x, convergence may require ITMAX > 100. Documented for stability; see tests for edge-case coverage.\r\n//   - Edge-case testing: tests/gamma.unit.test.js covers small a, large x, and z near integers (sin(\u03C0z) \u2248 0).\r\n\r\nimport { GammaValidationError } from \"../errors.js\";\r\n\r\n// LRU cache for logGamma\r\nconst logGammaCache = new Map();\r\nlet LOGGAMMA_CACHE_SIZE = 64; // Configurable for heavy reuse scenarios\r\n\r\n// Allow enterprise users to configure the logGamma cache size\r\nexport function setLogGammaCacheSize(n) {\r\n  if (typeof n === \"number\" && isFinite(n) && n > 0) {\r\n    LOGGAMMA_CACHE_SIZE = Math.floor(n);\r\n    // Optionally clear cache if downsizing\r\n    if (logGammaCache.size > LOGGAMMA_CACHE_SIZE) {\r\n      while (logGammaCache.size > LOGGAMMA_CACHE_SIZE) {\r\n        const firstKey = logGammaCache.keys().next().value;\r\n        logGammaCache.delete(firstKey);\r\n      }\r\n    }\r\n  }\r\n}\r\nconst FPMIN = 1e-300; // Smallest positive value to avoid underflow in denominators (Numerical Recipes)\r\n\r\nfunction cacheLogGamma(key, value) {\r\n  if (logGammaCache.size >= LOGGAMMA_CACHE_SIZE) {\r\n    // Remove oldest\r\n    const firstKey = logGammaCache.keys().next().value;\r\n    logGammaCache.delete(firstKey);\r\n  }\r\n  logGammaCache.set(key, value);\r\n}\r\n\r\n// Log gamma function (Lanczos approximation, with caching)\r\nexport function logGamma(z) {\r\n  if (typeof z !== \"number\" || !isFinite(z)) {\r\n    throw new GammaValidationError(\"logGamma: z must be a finite number\", {\r\n      z,\r\n    });\r\n  }\r\n  const originalZ = z;\r\n  if (logGammaCache.has(originalZ)) return logGammaCache.get(originalZ);\r\n  const g = 7;\r\n  const p = [\r\n    0.99999999999980993, 676.5203681218851, -1259.1392167224028,\r\n    771.32342877765313, -176.61502916214059, 12.507343278686905,\r\n    -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7,\r\n  ];\r\n  let result;\r\n  if (z < 0.5) {\r\n    result =\r\n      Math.log(Math.PI) - Math.log(Math.sin(Math.PI * z)) - logGamma(1 - z);\r\n  } else {\r\n    z -= 1;\r\n    let x = p[0];\r\n    for (let i = 1; i < g + 2; i++) x += p[i] / (z + i);\r\n    const t = z + g + 0.5;\r\n    result =\r\n      0.5 * Math.log(2 * Math.PI) +\r\n      (z + 0.5) * Math.log(t) -\r\n      t +\r\n      Math.log(x) -\r\n      Math.log(z + 1);\r\n  }\r\n  cacheLogGamma(originalZ, result);\r\n  return result;\r\n}\r\n\r\n// Regularized upper incomplete gamma function Q(a, x)\r\n// Uses a continued fraction approximation (Press et al., Numerical Recipes)\r\nexport function gammaQ(a, x, opts = {}) {\r\n  // Validate input\r\n  if (typeof a !== \"number\" || !isFinite(a) || a <= 0) {\r\n    throw new GammaValidationError(\r\n      \"gammaQ: a must be a positive finite number\",\r\n      { a },\r\n    );\r\n  }\r\n  if (typeof x !== \"number\" || !isFinite(x) || x < 0) {\r\n    throw new GammaValidationError(\r\n      \"gammaQ: x must be a non-negative finite number\",\r\n      { x },\r\n    );\r\n  }\r\n  if (\r\n    opts &&\r\n    ((\"eps\" in opts && (!isFinite(opts.eps) || opts.eps <= 0)) ||\r\n      (\"itmax\" in opts && (!isFinite(opts.itmax) || opts.itmax <= 0)))\r\n  ) {\r\n    throw new GammaValidationError(\r\n      \"gammaQ: opts.eps and opts.itmax must be finite and > 0\",\r\n      { opts },\r\n    );\r\n  }\r\n  const EPS =\r\n    typeof opts.eps === \"number\" && isFinite(opts.eps) && opts.eps > 0\r\n      ? opts.eps\r\n      : 1e-8;\r\n  const ITMAX =\r\n    typeof opts.itmax === \"number\" && isFinite(opts.itmax) && opts.itmax > 0\r\n      ? Math.floor(opts.itmax)\r\n      : 100;\r\n  if (x === 0) return 1;\r\n  if (x < a + 1) {\r\n    // Use series representation\r\n    return 1 - gammaPSer(a, x, EPS, ITMAX);\r\n  } else {\r\n    // Use continued fraction representation\r\n    return gammaQCF(a, x, EPS, ITMAX);\r\n  }\r\n}\r\n\r\n// Series representation for lower regularized gamma P(a, x)\r\nfunction gammaPSer(a, x, EPS, ITMAX) {\r\n  let sum = 1 / a,\r\n    del = sum,\r\n    ap = a;\r\n  for (let n = 1; n < ITMAX; n++) {\r\n    ap++;\r\n    del *= x / ap;\r\n    sum += del;\r\n    if (Math.abs(del) < Math.abs(sum) * EPS) break;\r\n  }\r\n  return sum * Math.exp(-x + a * Math.log(x) - logGamma(a));\r\n}\r\n\r\n// Continued fraction for Q(a, x)\r\nfunction gammaQCF(a, x, EPS, ITMAX) {\r\n  let b = x + 1 - a,\r\n    c = 1 / FPMIN,\r\n    d = 1 / b,\r\n    h = d;\r\n  for (let i = 1; i < ITMAX; i++) {\r\n    let an = -i * (i - a);\r\n    b += 2;\r\n    d = an * d + b;\r\n    if (Math.abs(d) < FPMIN) d = FPMIN;\r\n    c = b + an / c;\r\n    if (Math.abs(c) < FPMIN) c = FPMIN;\r\n    d = 1 / d;\r\n    let del = d * c;\r\n    h *= del;\r\n    if (Math.abs(del - 1) < EPS) break;\r\n  }\r\n  return Math.exp(-x + a * Math.log(x) - logGamma(a)) * h;\r\n}\r\n", "// Utility functions for spectral DFT and related tests\r\n\r\n// Check if a number is a power of two\r\nexport function isPowerOfTwo(m) {\r\n  return (m & (m - 1)) === 0;\r\n}\r\n\r\n// Iterative in-place radix-2 Cooley\u2013Tukey FFT\r\nexport function fftRadix2(re, im) {\r\n  const N = re.length;\r\n  // Bit-reversal permutation\r\n  let j = 0;\r\n  for (let i = 0; i < N; i++) {\r\n    if (i < j) {\r\n      const tr = re[i];\r\n      re[i] = re[j];\r\n      re[j] = tr;\r\n      const ti = im[i];\r\n      im[i] = im[j];\r\n      im[j] = ti;\r\n    }\r\n    let m = N >> 1;\r\n    while (m && j & m) {\r\n      j &= ~m;\r\n      m >>= 1;\r\n    }\r\n    j |= m;\r\n  }\r\n  // Stages\r\n  for (let len = 2; len <= N; len <<= 1) {\r\n    const halfLen = len >> 1;\r\n    const theta = (-2 * Math.PI) / len;\r\n    const wpr = Math.cos(theta);\r\n    const wpi = Math.sin(theta);\r\n    for (let start = 0; start < N; start += len) {\r\n      let wr = 1,\r\n        wi = 0;\r\n      for (let k = 0; k < halfLen; k++) {\r\n        const i0 = start + k;\r\n        const i1 = i0 + halfLen;\r\n        const tr = wr * re[i1] - wi * im[i1];\r\n        const ti = wr * im[i1] + wi * re[i1];\r\n        re[i1] = re[i0] - tr;\r\n        im[i1] = im[i0] - ti;\r\n        re[i0] = re[i0] + tr;\r\n        im[i0] = im[i0] + ti;\r\n        // rotate twiddle\r\n        const tmpWr = wr * wpr - wi * wpi;\r\n        wi = wr * wpi + wi * wpr;\r\n        wr = tmpWr;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Naive DFT magnitudes (O(n^2), correct for arbitrary n)\r\nexport function dftMagnitudesNaive(realSeq) {\r\n  const N = realSeq.length;\r\n  const mags = new Array(N);\r\n  for (let k = 0; k < N; k++) {\r\n    let re = 0,\r\n      im = 0;\r\n    const angBase = (-2 * Math.PI * k) / N;\r\n    for (let t = 0; t < N; t++) {\r\n      const ang = angBase * t;\r\n      const c = Math.cos(ang);\r\n      const s = Math.sin(ang);\r\n      re += realSeq[t] * c;\r\n      im += realSeq[t] * s;\r\n    }\r\n    mags[k] = Math.hypot(re, im);\r\n  }\r\n  return mags;\r\n}\r\n\r\n// Complementary error function (Abramowitz & Stegun 7.1.26)\r\nexport function erfc(x) {\r\n  const z = Math.abs(x);\r\n  const t = 1 / (1 + 0.5 * z);\r\n  const r =\r\n    t *\r\n    Math.exp(\r\n      -z * z -\r\n        1.26551223 +\r\n        t *\r\n          (1.00002368 +\r\n            t *\r\n              (0.37409196 +\r\n                t *\r\n                  (0.09678418 +\r\n                    t *\r\n                      (-0.18628806 +\r\n                        t *\r\n                          (0.27886807 +\r\n                            t *\r\n                              (-1.13520398 +\r\n                                t *\r\n                                  (1.48851587 +\r\n                                    t * (-0.82215223 + t * 0.17087277)))))))),\r\n    );\r\n  return x >= 0 ? r : 2 - r;\r\n}\r\n", "import { gammaQ } from \"./gamma.js\";\r\nimport { erfc } from \"./utilities.js\";\r\n\r\n// Basic NIST SP 800-22 tests: Frequency (Monobit), Block Frequency, Runs, Longest Run of Ones, Serial, Approximate Entropy, Cumulative Sums\r\n\r\n/** Frequency (Monobit) Test */\r\nexport function frequencyMonobitTest(bits) {\r\n  // NIST SP 800-22 Frequency (Monobit) Test\r\n  // bits: string of '0' and '1'\r\n  const n = bits.length;\r\n  if (n === 0) {\r\n    return {\r\n      testName: \"Frequency (Monobit) Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Input bitstring is empty.\" },\r\n    };\r\n  }\r\n  // Convert bits to +1/-1 and sum\r\n  let sum = 0;\r\n  for (let i = 0; i < n; i++) {\r\n    sum += bits[i] === \"1\" ? 1 : -1;\r\n  }\r\n  const sObs = Math.abs(sum) / Math.sqrt(n);\r\n  // Compute p-value using robust erfc with error handling\r\n  let pValue, erfcError;\r\n  try {\r\n    pValue = erfc(sObs / Math.sqrt(2));\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      erfcError = \"erfc returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    erfcError =\r\n      \"erfc threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n  // Diagnostics: proportion of ones and zeros\r\n  const ones = bits.split(\"\").filter((b) => b === \"1\").length;\r\n  const zeros = n - ones;\r\n  const propOnes = n > 0 ? ones / n : 0;\r\n  const propZeros = n > 0 ? zeros / n : 0;\r\n  return {\r\n    testName: \"Frequency (Monobit) Test\",\r\n    passed,\r\n    statistic: sObs,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      sum,\r\n      sObs,\r\n      pValue,\r\n      erfcError,\r\n      ones,\r\n      zeros,\r\n      propOnes,\r\n      propZeros,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n\r\n/** Block Frequency Test */\r\nexport function blockFrequencyTest(bits, blockSize) {\r\n  // NIST SP 800-22 Block Frequency Test\r\n  // bits: string of '0' and '1', blockSize: recommended 128 or 512\r\n  const n = bits.length;\r\n  if (n === 0 || blockSize <= 0 || blockSize > n) {\r\n    return {\r\n      testName: \"Block Frequency Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error: \"Invalid input: empty bitstring or blockSize out of range.\",\r\n      },\r\n    };\r\n  }\r\n  const N = Math.floor(n / blockSize); // Number of complete blocks\r\n  if (N === 0) {\r\n    return {\r\n      testName: \"Block Frequency Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Bitstring too short for even one block.\" },\r\n    };\r\n  }\r\n  let sum = 0;\r\n  const proportions = [];\r\n  for (let i = 0; i < N; i++) {\r\n    const block = bits.slice(i * blockSize, (i + 1) * blockSize);\r\n    const ones = block.split(\"\").filter((b) => b === \"1\").length;\r\n    const pi = ones / blockSize;\r\n    proportions.push(pi);\r\n    sum += Math.pow(pi - 0.5, 2);\r\n  }\r\n  const chiSquared = 4 * blockSize * sum;\r\n  // Compute p-value using robust gammaQ with error handling\r\n  let pValue, gammaQError;\r\n  try {\r\n    pValue = gammaQ(N / 2, chiSquared / 2);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      gammaQError = \"gammaQ returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError =\r\n      \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n  // Diagnostics: mean, variance, min, and max of block proportions\r\n  const meanProportion = proportions.length\r\n    ? proportions.reduce((a, b) => a + b, 0) / proportions.length\r\n    : 0;\r\n  const varianceProportion = proportions.length\r\n    ? proportions.reduce((a, b) => a + Math.pow(b - meanProportion, 2), 0) /\r\n      proportions.length\r\n    : 0;\r\n  const minProportion = proportions.length ? Math.min(...proportions) : 0;\r\n  const maxProportion = proportions.length ? Math.max(...proportions) : 0;\r\n  return {\r\n    testName: \"Block Frequency Test\",\r\n    passed,\r\n    statistic: chiSquared,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      blockSize,\r\n      N,\r\n      chiSquared,\r\n      pValue,\r\n      gammaQError,\r\n      proportionsPreview: proportions.slice(0, 5), // Show first 5 for brevity\r\n      meanProportion,\r\n      varianceProportion,\r\n      minProportion,\r\n      maxProportion,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n\r\n/** Runs Test */\r\nexport function runsTest(bits) {\r\n  // NIST SP 800-22 Runs Test\r\n  // bits: string of '0' and '1'\r\n  const n = bits.length;\r\n  if (n === 0) {\r\n    return {\r\n      testName: \"Runs Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Input bitstring is empty.\" },\r\n    };\r\n  }\r\n  // Proportion of ones\r\n  const pi = bits.split(\"\").filter((b) => b === \"1\").length / n;\r\n  // Test only valid if pi is not too far from 0.5\r\n  if (Math.abs(pi - 0.5) >= 2 / Math.sqrt(n)) {\r\n    return {\r\n      testName: \"Runs Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        n,\r\n        pi,\r\n        error: \"Proportion of ones too far from 0.5 for Runs Test to be valid.\",\r\n      },\r\n    };\r\n  }\r\n  // Count runs\r\n  let runs = 1;\r\n  for (let i = 1; i < n; i++) {\r\n    if (bits[i] !== bits[i - 1]) runs++;\r\n  }\r\n  // Expected number of runs\r\n  const expectedRuns = 2 * n * pi * (1 - pi);\r\n  // NIST variance and standard deviation\r\n  // Var(R) = 2n(4pi(1-pi)-1)/(n-1)\r\n  const variance = (2 * n * (4 * pi * (1 - pi) - 1)) / (n - 1);\r\n  const stddev = Math.sqrt(variance);\r\n  // Test statistic (Z)\r\n  const z = Math.abs(runs - expectedRuns) / stddev;\r\n  // P-value using erfc, with error handling\r\n  let pValue, erfcError;\r\n  try {\r\n    pValue = erfc(z / Math.sqrt(2));\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      erfcError = \"erfc returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    erfcError =\r\n      \"erfc threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n  // Preview of the run sequence (first 20 bits)\r\n  let runSequencePreview = [];\r\n  if (n > 0) {\r\n    let current = bits[0],\r\n      count = 1;\r\n    for (let i = 1; i < Math.min(n, 20); i++) {\r\n      if (bits[i] === current) {\r\n        count++;\r\n      } else {\r\n        runSequencePreview.push({ bit: current, length: count });\r\n        current = bits[i];\r\n        count = 1;\r\n      }\r\n    }\r\n    runSequencePreview.push({ bit: current, length: count });\r\n  }\r\n  return {\r\n    testName: \"Runs Test\",\r\n    passed,\r\n    statistic: z,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      pi,\r\n      runs,\r\n      expectedRuns,\r\n      stddev,\r\n      variance,\r\n      z,\r\n      pValue,\r\n      erfcError,\r\n      runSequencePreview,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n\r\n/** Longest Run of Ones in a Block Test */\r\nexport function longestRunOfOnesTest(bits, blockSize) {\r\n  // NIST SP 800-22 Longest Run of Ones in a Block Test\r\n  // bits: string of '0' and '1', blockSize: recommended 128 or 512\r\n  const n = bits.length;\r\n  if (n === 0 || blockSize <= 0 || blockSize > n) {\r\n    return {\r\n      testName: \"Longest Run of Ones in a Block Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error: \"Invalid input: empty bitstring or blockSize out of range.\",\r\n      },\r\n    };\r\n  }\r\n  const N = Math.floor(n / blockSize); // Number of complete blocks\r\n  if (N === 0) {\r\n    return {\r\n      testName: \"Longest Run of Ones in a Block Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Bitstring too short for even one block.\" },\r\n    };\r\n  }\r\n  // NIST SP 800-22 parameters for supported block sizes\r\n  // See Table 4 in NIST SP 800-22rev1a\r\n  let v, pi;\r\n  if (blockSize === 8) {\r\n    v = [1, 2, 3, 4];\r\n    pi = [0.2148, 0.3672, 0.2305, 0.1875];\r\n  } else if (blockSize === 128) {\r\n    v = [4, 5, 6, 7];\r\n    pi = [0.1174, 0.243, 0.2493, 0.3903];\r\n  } else if (blockSize === 512) {\r\n    v = [10, 11, 12, 13, 14, 15, 16];\r\n    pi = [0.0882, 0.2092, 0.2483, 0.1933, 0.1208, 0.0675, 0.0727];\r\n  } else {\r\n    return {\r\n      testName: \"Longest Run of Ones in a Block Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Unsupported blockSize. Supported: 8, 128, 512.\" },\r\n    };\r\n  }\r\n  const counts = Array(v.length).fill(0);\r\n  for (let i = 0; i < N; i++) {\r\n    const block = bits.slice(i * blockSize, (i + 1) * blockSize);\r\n    let maxRun = 0,\r\n      run = 0;\r\n    for (let j = 0; j < block.length; j++) {\r\n      if (block[j] === \"1\") {\r\n        run++;\r\n        if (run > maxRun) maxRun = run;\r\n      } else {\r\n        run = 0;\r\n      }\r\n    }\r\n    // Bin the maxRun into v categories\r\n    let binned = false;\r\n    for (let k = 0; k < v.length - 1; k++) {\r\n      if (maxRun <= v[k]) {\r\n        counts[k]++;\r\n        binned = true;\r\n        break;\r\n      }\r\n    }\r\n    if (!binned) counts[v.length - 1]++;\r\n  }\r\n  // Chi-squared statistic\r\n  let chiSquared = 0;\r\n  for (let i = 0; i < v.length; i++) {\r\n    const expected = pi[i] * N;\r\n    chiSquared += Math.pow(counts[i] - expected, 2) / expected;\r\n  }\r\n  // Degrees of freedom: k - 1\r\n  const df = v.length - 1;\r\n  let pValue, gammaQError;\r\n  try {\r\n    pValue = gammaQ(df / 2, chiSquared / 2);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      gammaQError = \"gammaQ returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError =\r\n      \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n  // Find the category with the largest deviation from expected\r\n  let maxDeviation = -Infinity,\r\n    maxDeviationIndex = -1;\r\n  for (let i = 0; i < v.length; i++) {\r\n    const expected = pi[i] * N;\r\n    const deviation = Math.abs(counts[i] - expected);\r\n    if (deviation > maxDeviation) {\r\n      maxDeviation = deviation;\r\n      maxDeviationIndex = i;\r\n    }\r\n  }\r\n  // Build array of observed/expected for all categories\r\n  const categoryDiagnostics = v.map((val, i) => ({\r\n    index: i,\r\n    v: val,\r\n    observed: counts[i],\r\n    expected: pi[i] * N,\r\n    deviation: counts[i] - pi[i] * N,\r\n  }));\r\n  const details = {\r\n    n,\r\n    blockSize,\r\n    N,\r\n    chiSquared,\r\n    pValue,\r\n    counts,\r\n    v,\r\n    pi,\r\n    df,\r\n    gammaQError,\r\n    categoryDiagnostics,\r\n    maxDeviationCategory:\r\n      maxDeviationIndex >= 0\r\n        ? {\r\n            index: maxDeviationIndex,\r\n            v: v[maxDeviationIndex],\r\n            observed: counts[maxDeviationIndex],\r\n            expected: pi[maxDeviationIndex] * N,\r\n            deviation: maxDeviation,\r\n          }\r\n        : undefined,\r\n    interpretation: passed\r\n      ? \"Passes randomness criteria\"\r\n      : \"Fails randomness criteria\",\r\n  };\r\n  return {\r\n    testName: \"Longest Run of Ones in a Block Test\",\r\n    passed,\r\n    statistic: chiSquared,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details,\r\n  };\r\n}\r\n\r\n/** Serial Test */\r\nexport function serialTest(bits, m) {\r\n  // NIST SP 800-22 Serial Test\r\n  // bits: string of '0' and '1', m: pattern length (2 or 3)\r\n  // Performance note: For large n and m, patternCounts is O(n\u00B7m). For very large inputs, consider optimizing or limiting m.\r\n  const n = bits.length;\r\n  if (n === 0 || m < 1 || m > 16) {\r\n    return {\r\n      testName: \"Serial Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error: \"Invalid input: empty bitstring or pattern length out of range.\",\r\n      },\r\n    };\r\n  }\r\n  // Helper: count occurrences of all m-bit patterns (with wraparound)\r\n  function patternCounts(bits, m) {\r\n    const counts = {};\r\n    const n = bits.length;\r\n    for (let i = 0; i < n; i++) {\r\n      let pattern = \"\";\r\n      for (let j = 0; j < m; j++) {\r\n        pattern += bits[(i + j) % n];\r\n      }\r\n      counts[pattern] = (counts[pattern] || 0) + 1;\r\n    }\r\n    return counts;\r\n  }\r\n  // Psi2 for m, m-1, m-2\r\n  function psi2(bits, m) {\r\n    const n = bits.length;\r\n    const counts = patternCounts(bits, m);\r\n    let sum = 0;\r\n    for (const k in counts) {\r\n      sum += counts[k] * counts[k];\r\n    }\r\n    return (sum * Math.pow(2, m)) / n - n;\r\n  }\r\n  const psi2_m = psi2(bits, m);\r\n  const psi2_m1 = psi2(bits, m - 1);\r\n  const psi2_m2 = psi2(bits, m - 2);\r\n  // Test statistics\r\n  const delta1 = psi2_m - psi2_m1;\r\n  const delta2 = psi2_m - 2 * psi2_m1 + psi2_m2;\r\n  // Degrees of freedom per NIST: df1 = 2^(m-1), df2 = 2^(m-2)\r\n  const df1 = Math.pow(2, m - 1);\r\n  const df2 = Math.pow(2, m - 2);\r\n  let pValue1, pValue2, gammaQError1, gammaQError2;\r\n  try {\r\n    pValue1 = gammaQ(df1, delta1 / 2);\r\n    if (!isFinite(pValue1) || isNaN(pValue1)) {\r\n      gammaQError1 = \"gammaQ returned non-finite pValue1.\";\r\n      pValue1 = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError1 =\r\n      \"gammaQ threw for pValue1: \" +\r\n      (err && err.message ? err.message : String(err));\r\n    pValue1 = null;\r\n  }\r\n  try {\r\n    pValue2 = gammaQ(df2, delta2 / 2);\r\n    if (!isFinite(pValue2) || isNaN(pValue2)) {\r\n      gammaQError2 = \"gammaQ returned non-finite pValue2.\";\r\n      pValue2 = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError2 =\r\n      \"gammaQ threw for pValue2: \" +\r\n      (err && err.message ? err.message : String(err));\r\n    pValue2 = null;\r\n  }\r\n  const passed =\r\n    pValue1 !== null && pValue1 >= 0.01 && pValue2 !== null && pValue2 >= 0.01;\r\n  let interpretation;\r\n  if (passed) {\r\n    interpretation = \"Passes randomness criteria\";\r\n  } else {\r\n    const fail1 = pValue1 === null || pValue1 < 0.01;\r\n    const fail2 = pValue2 === null || pValue2 < 0.01;\r\n    if (fail1 && fail2) {\r\n      interpretation =\r\n        \"Fails randomness criteria (both \u03941 and \u03942 subtests failed)\";\r\n    } else if (fail1) {\r\n      interpretation = \"Fails randomness criteria (\u03941 subtest failed)\";\r\n    } else if (fail2) {\r\n      interpretation = \"Fails randomness criteria (\u03942 subtest failed)\";\r\n    } else {\r\n      interpretation = \"Fails randomness criteria\";\r\n    }\r\n  }\r\n  const details = {\r\n    n,\r\n    m,\r\n    psi2_m,\r\n    psi2_m1,\r\n    psi2_m2,\r\n    delta1,\r\n    delta2,\r\n    pValue1,\r\n    pValue2,\r\n    df1,\r\n    df2,\r\n    gammaQError1,\r\n    gammaQError2,\r\n    interpretation,\r\n  };\r\n  return {\r\n    testName: \"Serial Test\",\r\n    passed,\r\n    statistic: { delta1, delta2 },\r\n    pValue: { pValue1, pValue2 },\r\n    threshold: 0.01,\r\n    details,\r\n  };\r\n}\r\n\r\n/** Approximate Entropy Test */\r\nexport function approximateEntropyTest(bits, m) {\r\n  // NIST SP 800-22 Approximate Entropy Test\r\n  // bits: string of '0' and '1', m: block size (2 or 3 recommended)\r\n  // NIST recommends m = 2 or 3; accuracy degrades for m > 5.\r\n  // Degrees of freedom (df) = 2^(m-1) as per NIST.\r\n  // Chi-squared formula: 2 * n * (log(2) - apEn), where apEn = \u03C6(m) \u2212 \u03C6(m+1)\r\n  const n = bits.length;\r\n  if (n === 0 || m < 1 || m > 16) {\r\n    return {\r\n      testName: \"Approximate Entropy Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error: \"Invalid input: empty bitstring or block size out of range.\",\r\n      },\r\n    };\r\n  }\r\n  let warning = undefined;\r\n  if (m > 5) {\r\n    warning = \"NIST recommends m \u2264 5; accuracy may degrade for larger m.\";\r\n  }\r\n  // Helper: count occurrences of all m-bit patterns (with wraparound)\r\n  // For large n and m, this can be expensive (O(n*m)); optimize with precomputed substrings if needed.\r\n  function patternCounts(bits, m) {\r\n    // Only observed patterns are counted; unobserved patterns (count=0) are excluded to avoid log(0).\r\n    const counts = {};\r\n    const n = bits.length;\r\n    for (let i = 0; i < n; i++) {\r\n      let pattern = \"\";\r\n      for (let j = 0; j < m; j++) {\r\n        pattern += bits[(i + j) % n];\r\n      }\r\n      counts[pattern] = (counts[pattern] || 0) + 1;\r\n    }\r\n    return counts;\r\n  }\r\n  // Compute phi for m and m+1\r\n  function phi(bits, m) {\r\n    // Sums only over observed patterns (count > 0)\r\n    const n = bits.length;\r\n    const counts = patternCounts(bits, m);\r\n    let sum = 0;\r\n    for (const k in counts) {\r\n      const c = counts[k];\r\n      sum += c * Math.log(c / n);\r\n    }\r\n    return sum / n;\r\n  }\r\n  const phi_m = phi(bits, m);\r\n  const phi_m1 = phi(bits, m + 1);\r\n  const apEn = phi_m - phi_m1; // apEn = \u03C6(m) \u2212 \u03C6(m+1)\r\n  // Test statistic: chiSquared = 2 * n * (log(2) - apEn)\r\n  const chiSquared = 2 * n * (Math.log(2) - apEn);\r\n  // Degrees of freedom per NIST: df = 2^(m-1)\r\n  const df = Math.pow(2, m - 1);\r\n  let pValue, gammaQError;\r\n  try {\r\n    pValue = gammaQ(df, chiSquared / 2);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      gammaQError = \"gammaQ returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError =\r\n      \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n  // Only include warning in details if present\r\n  const details = {\r\n    n,\r\n    m,\r\n    phi_m,\r\n    phi_m1,\r\n    apEn,\r\n    chiSquared,\r\n    pValue,\r\n    df,\r\n    gammaQError,\r\n    interpretation: passed\r\n      ? \"Passes randomness criteria\"\r\n      : \"Fails randomness criteria\",\r\n  };\r\n  if (warning) details.warning = warning;\r\n  return {\r\n    testName: \"Approximate Entropy Test\",\r\n    passed,\r\n    statistic: chiSquared,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details,\r\n  };\r\n}\r\n\r\n/** Cumulative Sums (Cusum) Test */\r\nexport function cumulativeSumsTest(bits, mode) {\r\n  // NIST SP 800-22 Cumulative Sums (Cusum) Test\r\n  // bits: string of '0' and '1', mode: 'forward' or 'backward'\r\n  // Returns: { testName, passed, statistic, pValue, threshold, details }\r\n  const n = bits.length;\r\n  if (n === 0 || (mode !== \"forward\" && mode !== \"backward\")) {\r\n    return {\r\n      testName: `Cumulative Sums (Cusum) Test [${mode}]`,\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Invalid input: empty bitstring or invalid mode.\" },\r\n    };\r\n  }\r\n  // Convert bits to +1/-1\r\n  const x = bits.split(\"\").map((b) => (b === \"1\" ? 1 : -1));\r\n  // Compute the cumulative sum sequence\r\n  let S = [];\r\n  if (mode === \"forward\") {\r\n    // Loop: i = 0 to n-1 (forward)\r\n    let sum = 0;\r\n    for (let i = 0; i < n; i++) {\r\n      sum += x[i];\r\n      S.push(sum);\r\n    }\r\n  } else {\r\n    // backward\r\n    // Loop: i = n-1 down to 0 (backward)\r\n    let sum = 0;\r\n    for (let i = n - 1; i >= 0; i--) {\r\n      sum += x[i];\r\n      S.push(sum);\r\n    }\r\n  }\r\n  // Compute the maximum absolute value of the cumulative sum\r\n  const z = Math.max(...S.map(Math.abs));\r\n  // Compute p-value\r\n  // NIST formula: p = 1 - sum_{k} [Phi((4k+1)z/sqrt(n)) - Phi((4k-1)z/sqrt(n))] + sum_{k} [Phi((4k+3)z/sqrt(n)) - Phi((4k+1)z/sqrt(n))]\r\n  // where Phi(x) = CDF of standard normal distribution\r\n  function cdfNormal(x) {\r\n    // Standard normal CDF\r\n    return 0.5 * (1 + erf(x / Math.sqrt(2)));\r\n  }\r\n  function erf(x) {\r\n    // Approximation of error function (erf)\r\n    // Abramowitz and Stegun formula 7.1.26\r\n    // Accurate to ~1e-7, sufficient for NIST SP 800-22 but not for cryptographic or arbitrary-precision use.\r\n    const sign = x >= 0 ? 1 : -1;\r\n    const a1 = 0.254829592,\r\n      a2 = -0.284496736,\r\n      a3 = 1.421413741;\r\n    const a4 = -1.453152027,\r\n      a5 = 1.061405429,\r\n      p = 0.3275911;\r\n    const absx = Math.abs(x);\r\n    const t = 1 / (1 + p * absx);\r\n    const y =\r\n      1 -\r\n      ((((a5 * t + a4) * t + a3) * t + a2) * t + a1) *\r\n        t *\r\n        Math.exp(-absx * absx);\r\n    return sign * y;\r\n  }\r\n  let pValue = null;\r\n  let sum1 = 0,\r\n    sum2 = 0;\r\n  // Allow EPS and ITMAX to be overridden for performance tuning\r\n  const EPS =\r\n    typeof cumulativeSumsTest.EPS === \"number\" ? cumulativeSumsTest.EPS : 1e-12;\r\n  // ITMAX: maximum number of loop iterations per sum (diagnostic/performance cap)\r\n  // For very large n and small z, the theoretical loop bounds may exceed ITMAX; increase if full sum is required.\r\n  const ITMAX =\r\n    typeof cumulativeSumsTest.ITMAX === \"number\"\r\n      ? cumulativeSumsTest.ITMAX\r\n      : 10000;\r\n  // negligibleCount1/2 are purely informational diagnostics (number of negligible terms encountered, not used in logic)\r\n  let negligibleCount1 = 0,\r\n    negligibleCount2 = 0;\r\n  if (z === 0) {\r\n    // Guard: if z is zero, all cumulative sums are zero, so p-value is 1.0 (perfectly balanced)\r\n    pValue = 1.0;\r\n  } else {\r\n    // Loop bounds for k are derived from NIST spec:\r\n    // sum1: k = ceil((-n/z + 1)/4) to floor((n/z - 1)/4)\r\n    // sum2: k = ceil((-n/z - 3)/4) to floor((n/z - 1)/4)\r\n    const sqrtN = Math.sqrt(n);\r\n    const k1Start = Math.ceil((-n / z + 1) / 4);\r\n    const k1End = Math.floor((n / z - 1) / 4);\r\n    const k2Start = Math.ceil((-n / z - 3) / 4);\r\n    const k2End = Math.floor((n / z - 1) / 4);\r\n    // sum1 (diagnostic: negligibleCount1 is informational only)\r\n    let iters1 = 0;\r\n    for (let k = k1Start; k <= k1End && iters1 < ITMAX; k++, iters1++) {\r\n      const arg1 = ((4 * k + 1) * z) / sqrtN;\r\n      const arg2 = ((4 * k - 1) * z) / sqrtN;\r\n      const term = cdfNormal(arg1) - cdfNormal(arg2);\r\n      sum1 += term;\r\n      if (Math.abs(term) < EPS) negligibleCount1++;\r\n    }\r\n    // sum2 (diagnostic: negligibleCount2 is informational only)\r\n    let iters2 = 0;\r\n    for (let k = k2Start; k <= k2End && iters2 < ITMAX; k++, iters2++) {\r\n      const arg1 = ((4 * k + 3) * z) / sqrtN;\r\n      const arg2 = ((4 * k + 1) * z) / sqrtN;\r\n      const term = cdfNormal(arg1) - cdfNormal(arg2);\r\n      sum2 += term;\r\n      if (Math.abs(term) < EPS) negligibleCount2++;\r\n    }\r\n    pValue = 1 - sum1 + sum2;\r\n  }\r\n  const passed = pValue >= 0.01;\r\n  // Compute mean and stddev efficiently\r\n  const mean = S.length ? S.reduce((a, b) => a + b, 0) / S.length : 0;\r\n  const S_stddev = S.length\r\n    ? Math.sqrt(S.reduce((a, b) => a + (b - mean) ** 2, 0) / S.length)\r\n    : 0;\r\n  return {\r\n    testName: `Cumulative Sums (Cusum) Test [${mode}]`,\r\n    passed,\r\n    statistic: z,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      mode,\r\n      z,\r\n      pValue,\r\n      threshold: 0.01,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n      S_preview: S.slice(0, 10), // Show first 10 cumulative sums for reference\r\n      S_min: S.length ? Math.min(...S) : 0,\r\n      S_max: S.length ? Math.max(...S) : 0,\r\n      S_mean: mean,\r\n      S_stddev,\r\n      sum1,\r\n      sum2,\r\n      z_is_zero: z === 0,\r\n      EPS,\r\n      ITMAX,\r\n      negligibleCount1, // Purely informational: number of negligible terms in sum1 (not used in logic)\r\n      negligibleCount2, // Purely informational: number of negligible terms in sum2 (not used in logic)\r\n    },\r\n  };\r\n}\r\n", "/** Binary Matrix Rank Test */\r\nexport function binaryMatrixRankTest(bits, matrixSize) {\r\n  // NIST SP 800-22 Binary Matrix Rank Test\r\n  // bits: string of '0' and '1'\r\n  // matrixSize: typically 32 or 64 (square matrix dimension)\r\n\r\n  const n = bits.length;\r\n  if (n === 0 || matrixSize <= 0 || matrixSize > n) {\r\n    return {\r\n      testName: \"Binary Matrix Rank Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error: \"Invalid input: empty bitstring or matrixSize out of range.\",\r\n      },\r\n    };\r\n  }\r\n\r\n  const blockSize = matrixSize * matrixSize;\r\n  const N = Math.floor(n / blockSize); // number of matrices\r\n  if (N === 0) {\r\n    return {\r\n      testName: \"Binary Matrix Rank Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Bitstring too short for even one matrix.\" },\r\n    };\r\n  }\r\n\r\n  // Helper: compute rank of binary matrix over GF(2)\r\n  function computeRank(matrix, size) {\r\n    let rank = 0;\r\n    let row = 0;\r\n    for (let col = 0; col < size && row < size; col++) {\r\n      // Find pivot\r\n      let pivot = -1;\r\n      for (let i = row; i < size; i++) {\r\n        if (matrix[i][col] === 1) {\r\n          pivot = i;\r\n          break;\r\n        }\r\n      }\r\n      if (pivot === -1) continue;\r\n      // Swap rows\r\n      if (pivot !== row) {\r\n        const tmp = matrix[pivot];\r\n        matrix[pivot] = matrix[row];\r\n        matrix[row] = tmp;\r\n      }\r\n      // Eliminate below\r\n      for (let i = row + 1; i < size; i++) {\r\n        if (matrix[i][col] === 1) {\r\n          for (let j = col; j < size; j++) {\r\n            matrix[i][j] ^= matrix[row][j];\r\n          }\r\n        }\r\n      }\r\n      rank++;\r\n      row++;\r\n    }\r\n    return rank;\r\n  }\r\n\r\n  // Count ranks\r\n  let fullRankCount = 0;\r\n  let fullRankMinus1Count = 0;\r\n  let otherRankCount = 0;\r\n\r\n  for (let k = 0; k < N; k++) {\r\n    const block = bits.slice(k * blockSize, (k + 1) * blockSize);\r\n    // Build matrix\r\n    const matrix = [];\r\n    for (let i = 0; i < matrixSize; i++) {\r\n      const row = [];\r\n      for (let j = 0; j < matrixSize; j++) {\r\n        row.push(block[i * matrixSize + j] === \"1\" ? 1 : 0);\r\n      }\r\n      matrix.push(row);\r\n    }\r\n    const rank = computeRank(matrix, matrixSize);\r\n    if (rank === matrixSize) fullRankCount++;\r\n    else if (rank === matrixSize - 1) fullRankMinus1Count++;\r\n    else otherRankCount++;\r\n  }\r\n\r\n  // Expected probabilities (NIST SP 800-22 Table 7)\r\n  // For square matrices, probabilities are known asymptotically.\r\n  // Example for 32x32: P_full \u2248 0.2888, P_full-1 \u2248 0.5776, P_other \u2248 0.1336\r\n  // Example for 64x64: P_full \u2248 0.2888, P_full-1 \u2248 0.5776, P_other \u2248 0.1336\r\n  // (Values are the same for 32 and 64 per NIST)\r\n  const pi = [0.2888, 0.5776, 0.1336];\r\n  const counts = [fullRankCount, fullRankMinus1Count, otherRankCount];\r\n\r\n  // Chi-squared statistic\r\n  let chiSquared = 0;\r\n  for (let i = 0; i < 3; i++) {\r\n    const expected = pi[i] * N;\r\n    chiSquared += Math.pow(counts[i] - expected, 2) / expected;\r\n  }\r\n\r\n  // Degrees of freedom = categories - 1 = 2\r\n  let pValue, gammaQError;\r\n  try {\r\n    pValue = gammaQ(2 / 2, chiSquared / 2); // shape = df/2\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      gammaQError = \"gammaQ returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError =\r\n      \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n\r\n  return {\r\n    testName: \"Binary Matrix Rank Test\",\r\n    passed,\r\n    statistic: chiSquared,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      matrixSize,\r\n      N,\r\n      counts,\r\n      pi,\r\n      chiSquared,\r\n      pValue,\r\n      gammaQError,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n", "/** Linear Complexity Test (Berlekamp\u2013Massey, strict NIST M=500) */\r\nexport function linearComplexityTest(bits, blockSize) {\r\n  // NIST SP 800-22 Linear Complexity Test (strict NIST configuration)\r\n  // bits: string of '0' and '1'\r\n  // blockSize: must be exactly 500 (strict NIST)\r\n  const n = bits.length;\r\n  if (n === 0 || blockSize !== 500) {\r\n    return {\r\n      testName: \"Linear Complexity Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error:\r\n          blockSize !== 500\r\n            ? \"Unsupported blockSize. Strict NIST requires blockSize = 500.\"\r\n            : \"Invalid input: empty bitstring.\",\r\n      },\r\n    };\r\n  }\r\n\r\n  const M = 500;\r\n  const N = Math.floor(n / M); // number of blocks\r\n  if (N === 0) {\r\n    return {\r\n      testName: \"Linear Complexity Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Bitstring too short for even one 500-bit block.\" },\r\n    };\r\n  }\r\n\r\n  // Expected mean \u03BC per NIST:\r\n  // \u03BC = M/2 + ( (\u22121)^(M+1) + 9 ) / 36\r\n  // For M = 500 (even), (\u22121)^(M+1) = \u22121, so \u03BC = M/2 + 2/9\r\n  const mu = M / 2 + 2 / 9;\r\n\r\n  // Berlekamp\u2013Massey over GF(2) to compute linear complexity L for a 500-bit block\r\n  function berlekampMasseyGF2(seq) {\r\n    const C = new Array(M).fill(0);\r\n    C[0] = 1; // connection polynomial\r\n    const B = new Array(M).fill(0);\r\n    B[0] = 1; // previous C\r\n    let L = 0; // current linear complexity\r\n    let m = -1; // last update index\r\n\r\n    for (let n = 0; n < M; n++) {\r\n      // Discrepancy d = s[n] XOR sum_{i=1..L} C[i] * s[n - i] (mod 2)\r\n      let d = seq[n];\r\n      for (let i = 1; i <= L; i++) {\r\n        d ^= C[i] & seq[n - i];\r\n      }\r\n      if (d === 1) {\r\n        const T = C.slice();\r\n        const shift = n - m;\r\n        // C = C XOR (B << shift)\r\n        for (let i = 0; i + shift < M; i++) {\r\n          C[i + shift] ^= B[i];\r\n        }\r\n        if (L <= n / 2) {\r\n          L = n + 1 - L;\r\n          // B = T, m = n\r\n          for (let i = 0; i < M; i++) B[i] = T[i];\r\n          m = n;\r\n        }\r\n      }\r\n    }\r\n    return L;\r\n  }\r\n\r\n  // Convert bits to numeric sequence and process blocks\r\n  const counts = new Array(7).fill(0);\r\n  for (let b = 0; b < N; b++) {\r\n    const start = b * M;\r\n    const blockBits = bits.slice(start, start + M);\r\n    const seq = new Array(M);\r\n    for (let i = 0; i < M; i++) seq[i] = blockBits[i] === \"1\" ? 1 : 0;\r\n\r\n    const L = berlekampMasseyGF2(seq);\r\n\r\n    // NIST normalization and binning:\r\n    // T = (\u22121)^M * (L \u2212 \u03BC) + 2/9\r\n    // With M even, (\u22121)^M = +1, so T = (L \u2212 \u03BC) + 2/9\r\n    const T = L - mu + 2 / 9;\r\n\r\n    // Bin edges (7 bins): (-\u221E, -2.5], (-2.5, -1.5], (-1.5, -0.5], (-0.5, 0.5],\r\n    // (0.5, 1.5], (1.5, 2.5], (2.5, \u221E)\r\n    if (T <= -2.5)\r\n      counts[0]++; // v0\r\n    else if (T <= -1.5)\r\n      counts[1]++; // v1\r\n    else if (T <= -0.5)\r\n      counts[2]++; // v2\r\n    else if (T <= 0.5)\r\n      counts[3]++; // v3\r\n    else if (T <= 1.5)\r\n      counts[4]++; // v4\r\n    else if (T <= 2.5)\r\n      counts[5]++; // v5\r\n    else counts[6]++; // v6\r\n  }\r\n\r\n  // NIST \u03C0 probabilities for M=500 (7 bins)\r\n  // \u03C0 = [1/96, 1/32, 1/8, 1/2, 1/4, 1/16, 1/48]\r\n  const pi = [1 / 96, 1 / 32, 1 / 8, 1 / 2, 1 / 4, 1 / 16, 1 / 48];\r\n\r\n  // Chi-squared statistic over 7 bins\r\n  let chiSquared = 0;\r\n  const expected = new Array(7);\r\n  for (let i = 0; i < 7; i++) {\r\n    expected[i] = pi[i] * N;\r\n    chiSquared += Math.pow(counts[i] - expected[i], 2) / expected[i];\r\n  }\r\n\r\n  // Degrees of freedom: k - 1 = 6 \u2192 shape = df/2 = 3\r\n  let pValue, gammaQError;\r\n  try {\r\n    pValue = gammaQ(3, chiSquared / 2);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      gammaQError = \"gammaQ returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError =\r\n      \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n\r\n  return {\r\n    testName: \"Linear Complexity Test\",\r\n    passed,\r\n    statistic: chiSquared,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      blockSize: M,\r\n      N,\r\n      mu,\r\n      counts,\r\n      expected,\r\n      pi,\r\n      chiSquared,\r\n      pValue,\r\n      gammaQError,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n", "/** Non-overlapping Template Matching Test (NIST SP 800-22) */\r\nexport function nonOverlappingTemplateTest(bits, template) {\r\n  // bits: string of '0' and '1'\r\n  // template: string of '0'/'1' with 2 <= m <= 25\r\n  const n = bits.length;\r\n  const m = template?.length ?? 0;\r\n\r\n  if (n === 0 || !template || m < 2 || m > 25) {\r\n    return {\r\n      testName: \"Non-overlapping Template Matching Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error:\r\n          n === 0\r\n            ? \"Invalid input: empty bitstring.\"\r\n            : \"Invalid template: must be a 2\u201325 bit pattern.\",\r\n      },\r\n    };\r\n  }\r\n\r\n  // Choose number of blocks N for chi-squared stability (N \u2265 16 recommended)\r\n  const N = Math.max(16, Math.min(64, Math.floor(n / Math.max(m + 1, 1000))));\r\n  const M = Math.floor(n / N); // block size\r\n  if (M < m) {\r\n    return {\r\n      testName: \"Non-overlapping Template Matching Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        n,\r\n        m,\r\n        N,\r\n        M,\r\n        error:\r\n          \"Bitstring too short: block size M must be >= template length m.\",\r\n      },\r\n    };\r\n  }\r\n\r\n  // Count non-overlapping matches in each block\r\n  const counts = new Array(N).fill(0);\r\n  for (let b = 0; b < N; b++) {\r\n    const start = b * M;\r\n    const end = start + M;\r\n    let j = start;\r\n    while (j + m <= end) {\r\n      // Check match at j..j+m-1\r\n      let match = true;\r\n      for (let k = 0; k < m; k++) {\r\n        if (bits[j + k] !== template[k]) {\r\n          match = false;\r\n          break;\r\n        }\r\n      }\r\n      if (match) {\r\n        counts[b]++;\r\n        j += m; // non-overlapping: advance by m\r\n      } else {\r\n        j += 1;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Expected mean per block (Poisson assumption)\r\n  const lambda = (M - m + 1) / Math.pow(2, m);\r\n\r\n  // Chi-squared over N blocks: sum (W_i - \u03BB)^2 / \u03BB\r\n  let chiSquared = 0;\r\n  for (let i = 0; i < N; i++) {\r\n    chiSquared += Math.pow(counts[i] - lambda, 2) / lambda;\r\n  }\r\n\r\n  // p-value via upper incomplete gamma: df = N\r\n  let pValue, gammaQError;\r\n  try {\r\n    pValue = gammaQ(N / 2, chiSquared / 2);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      gammaQError = \"gammaQ returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    gammaQError =\r\n      \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n\r\n  // Diagnostics\r\n  const meanCount = counts.reduce((a, b) => a + b, 0) / N;\r\n  const varCount =\r\n    counts.reduce((a, b) => a + Math.pow(b - meanCount, 2), 0) / N;\r\n\r\n  return {\r\n    testName: \"Non-overlapping Template Matching Test\",\r\n    passed,\r\n    statistic: chiSquared,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      m,\r\n      N,\r\n      M,\r\n      lambda,\r\n      chiSquared,\r\n      pValue,\r\n      gammaQError,\r\n      meanCount,\r\n      varCount,\r\n      countsPreview: counts.slice(0, 8),\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n\r\n/** Overlapping Template Matching Test (NIST SP 800-22, strict: template = '111...1') */\r\nexport function overlappingTemplateTest(bits, template) {\r\n  // bits: string of '0' and '1'\r\n  // template: must be all ones per NIST (e.g., '111111' for m=6), with 2 <= m <= 25\r\n  const n = bits.length;\r\n  const m = template?.length ?? 0;\r\n\r\n  if (n === 0 || !template || m < 2 || m > 25) {\r\n    return {\r\n      testName: \"Overlapping Template Matching Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error:\r\n          n === 0\r\n            ? \"Invalid input: empty bitstring.\"\r\n            : \"Invalid template: must be 2\u201325 bits long.\",\r\n      },\r\n    };\r\n  }\r\n\r\n  // Strict NIST: template must be all ones\r\n  for (let i = 0; i < m; i++) {\r\n    if (template[i] !== \"1\") {\r\n      return {\r\n        testName: \"Overlapping Template Matching Test\",\r\n        passed: false,\r\n        statistic: null,\r\n        pValue: null,\r\n        threshold: 0.01,\r\n        details: {\r\n          m,\r\n          error:\r\n            \"Unsupported template: NIST defines overlapping test for template '111...1' only.\",\r\n        },\r\n      };\r\n    }\r\n  }\r\n\r\n  // Count overlapping occurrences across the entire sequence\r\n  let W = 0;\r\n  for (let i = 0; i + m <= n; i++) {\r\n    let match = true;\r\n    for (let k = 0; k < m; k++) {\r\n      if (bits[i + k] !== \"1\") {\r\n        match = false;\r\n        break;\r\n      }\r\n    }\r\n    if (match) W++;\r\n  }\r\n\r\n  // Probability of template at any position: p = 1 / 2^m\r\n  const p = 1 / Math.pow(2, m);\r\n\r\n  // Mean and variance (normal approximation per NIST for all-ones template)\r\n  // \u03BC = (n - m + 1) * p\r\n  // \u03C3\u00B2 \u2248 n * ( p - (2m - 1) * p^2 )\r\n  const mu = (n - m + 1) * p;\r\n  const sigma2 = n * (p - (2 * m - 1) * p * p);\r\n  const sigma = Math.sqrt(Math.max(sigma2, 0));\r\n\r\n  // Complementary error function (Abramowitz & Stegun 7.1.26)\r\n  function erfc(x) {\r\n    const z = Math.abs(x);\r\n    const t = 1 / (1 + 0.5 * z);\r\n    const r =\r\n      t *\r\n      Math.exp(\r\n        -z * z -\r\n          1.26551223 +\r\n          t *\r\n            (1.00002368 +\r\n              t *\r\n                (0.37409196 +\r\n                  t *\r\n                    (0.09678418 +\r\n                      t *\r\n                        (-0.18628806 +\r\n                          t *\r\n                            (0.27886807 +\r\n                              t *\r\n                                (-1.13520398 +\r\n                                  t *\r\n                                    (1.48851587 +\r\n                                      t * (-0.82215223 + t * 0.17087277)))))))),\r\n      );\r\n    return x >= 0 ? r : 2 - r;\r\n  }\r\n\r\n  // z-score and p-value (two-sided normal tail)\r\n  let pValue, erfcError, z;\r\n  if (sigma === 0) {\r\n    // Degenerate case: variance ~ 0 (e.g., extremely large m vs n)\r\n    z = 0;\r\n    pValue = 1;\r\n  } else {\r\n    try {\r\n      z = Math.abs(W - mu) / (Math.SQRT2 * sigma);\r\n      pValue = erfc(z);\r\n      if (!isFinite(pValue) || isNaN(pValue)) {\r\n        erfcError = \"erfc returned non-finite pValue.\";\r\n        pValue = null;\r\n      }\r\n    } catch (err) {\r\n      erfcError =\r\n        \"erfc threw: \" + (err && err.message ? err.message : String(err));\r\n      pValue = null;\r\n    }\r\n  }\r\n\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n\r\n  return {\r\n    testName: \"Overlapping Template Matching Test\",\r\n    passed,\r\n    statistic: z,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      m,\r\n      W,\r\n      mu,\r\n      sigma2,\r\n      z,\r\n      pValue,\r\n      erfcError,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n", "import {\r\n  isPowerOfTwo,\r\n  fftRadix2,\r\n  dftMagnitudesNaive,\r\n  erfc,\r\n} from \"./utilities.js\";\r\n\r\n/** Discrete Fourier Transform (Spectral) Test \u2014 NIST SP 800-22 */\r\nexport function spectralDFTTest(bits) {\r\n  // bits: string of '0' and '1'\r\n  // NIST checks periodic features in the sequence via DFT magnitudes.\r\n  const n = bits.length;\r\n  if (n === 0) {\r\n    return {\r\n      testName: \"Discrete Fourier Transform (Spectral) Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Invalid input: empty bitstring.\" },\r\n    };\r\n  }\r\n  // NIST recommends n \u2265 1000 for reliability\r\n  if (n < 1000) {\r\n    return {\r\n      testName: \"Discrete Fourier Transform (Spectral) Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        n,\r\n        error: \"Bitstring too short for reliable DFT test (n < 1000).\",\r\n      },\r\n    };\r\n  }\r\n\r\n  // Convert bits to \u00B11 sequence (mean ~ 0)\r\n  const x = new Array(n);\r\n  for (let i = 0; i < n; i++) x[i] = bits[i] === \"1\" ? 1 : -1;\r\n\r\n  // Compute DFT magnitudes |F_k|. Use radix-2 FFT if n is a power of two; else fallback to O(n^2) DFT.\r\n  let magnitudes;\r\n  if (isPowerOfTwo(n)) {\r\n    const re = x.slice();\r\n    const im = new Array(n).fill(0);\r\n    fftRadix2(re, im); // in-place FFT\r\n    magnitudes = new Array(n);\r\n    for (let k = 0; k < n; k++) magnitudes[k] = Math.hypot(re[k], im[k]);\r\n  } else {\r\n    // Naive DFT fallback for arbitrary n (heavier but correct)\r\n    magnitudes = dftMagnitudesNaive(x);\r\n  }\r\n\r\n  // NIST counts peaks in first n/2 frequencies (excluding DC). Threshold:\r\n  // T = sqrt( ln(1/0.05) * n )\r\n  const half = Math.floor(n / 2);\r\n  const T = Math.sqrt(Math.log(1 / 0.05) * n);\r\n\r\n  // Count number of peaks below threshold in first half (excluding k=0)\r\n  let N1 = 0;\r\n  for (let k = 1; k < half; k++) {\r\n    if (magnitudes[k] < T) N1++;\r\n  }\r\n\r\n  // Expected count and variance\r\n  // N0 = 0.95 * n / 2\r\n  // var = n * 0.95 * 0.05 / 4\r\n  const N0 = (0.95 * n) / 2;\r\n  const variance = (n * 0.95 * 0.05) / 4;\r\n  const d = (N1 - N0) / Math.sqrt(variance);\r\n\r\n  // P-value via complementary error function (two-sided normal tail)\r\n  let pValue, erfcError;\r\n  try {\r\n    pValue = erfc(Math.abs(d) / Math.SQRT2);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      erfcError = \"erfc returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    erfcError =\r\n      \"erfc threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n\r\n  // Diagnostics: preview top magnitudes (indices and values) from first half\r\n  const previewCount = Math.min(10, half - 1);\r\n  const preview = [];\r\n  for (let k = 1; k <= previewCount; k++) {\r\n    preview.push({ k, magnitude: magnitudes[k] });\r\n  }\r\n\r\n  return {\r\n    testName: \"Discrete Fourier Transform (Spectral) Test\",\r\n    passed,\r\n    statistic: d,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      T,\r\n      N1,\r\n      N0,\r\n      variance,\r\n      d,\r\n      pValue,\r\n      erfcError,\r\n      magnitudesPreview: preview,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n", "/** Maurer\u2019s Universal Statistical Test (heavyweight, strict NIST) */\r\nexport function maurerUniversalTest(bits, blockSize) {\r\n  // NIST SP 800-22 Maurer\u2019s Universal Statistical Test\r\n  // bits: string of '0' and '1'\r\n  // blockSize (L): must be an integer in [6..16] per strict NIST configuration\r\n\r\n  const n = bits.length;\r\n  if (\r\n    n === 0 ||\r\n    !Number.isInteger(blockSize) ||\r\n    blockSize < 6 ||\r\n    blockSize > 16\r\n  ) {\r\n    return {\r\n      testName: \"Maurer\u2019s Universal Statistical Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        error:\r\n          n === 0\r\n            ? \"Invalid input: empty bitstring.\"\r\n            : \"Unsupported blockSize. Strict NIST requires L in [6..16].\",\r\n      },\r\n    };\r\n  }\r\n\r\n  const L = blockSize;\r\n  const V = 1 << L; // alphabet size (2^L)\r\n  const Q = 10 * V; // initialization blocks per NIST\r\n  const totalBlocks = Math.floor(n / L);\r\n  const K = totalBlocks - Q; // test segment blocks\r\n  if (K <= 0) {\r\n    return {\r\n      testName: \"Maurer\u2019s Universal Statistical Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        n,\r\n        L,\r\n        error: \"Bitstring too short: requires at least (Q + 1) blocks.\",\r\n      },\r\n    };\r\n  }\r\n  // NIST strongly recommends K \u2265 1000 for reliable statistics\r\n  if (K < 1000) {\r\n    return {\r\n      testName: \"Maurer\u2019s Universal Statistical Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: {\r\n        n,\r\n        L,\r\n        Q,\r\n        K,\r\n        error: \"Insufficient test blocks K. Strict NIST recommends K \u2265 1000.\",\r\n      },\r\n    };\r\n  }\r\n\r\n  // Expected value \u03BC(L) and standard deviation \u03C3(L) per NIST table for L=6..16\r\n  const MU = {\r\n    6: 5.2177052,\r\n    7: 6.1962507,\r\n    8: 7.1836656,\r\n    9: 8.1764248,\r\n    10: 9.1723243,\r\n    11: 10.170032,\r\n    12: 11.168765,\r\n    13: 12.16807,\r\n    14: 13.167693,\r\n    15: 14.167488,\r\n    16: 15.167379,\r\n  };\r\n  const SIGMA = {\r\n    6: 2.954,\r\n    7: 3.125,\r\n    8: 3.238,\r\n    9: 3.311,\r\n    10: 3.356,\r\n    11: 3.384,\r\n    12: 3.401,\r\n    13: 3.41,\r\n    14: 3.416,\r\n    15: 3.419,\r\n    16: 3.421,\r\n  };\r\n  const mu = MU[L];\r\n  const sigma = SIGMA[L];\r\n\r\n  // Complementary error function (erfc): Abramowitz & Stegun 7.1.26 approximation\r\n  function erfc(x) {\r\n    const z = Math.abs(x);\r\n    const t = 1 / (1 + 0.5 * z);\r\n    const r =\r\n      t *\r\n      Math.exp(\r\n        -z * z -\r\n          1.26551223 +\r\n          t *\r\n            (1.00002368 +\r\n              t *\r\n                (0.37409196 +\r\n                  t *\r\n                    (0.09678418 +\r\n                      t *\r\n                        (-0.18628806 +\r\n                          t *\r\n                            (0.27886807 +\r\n                              t *\r\n                                (-1.13520398 +\r\n                                  t *\r\n                                    (1.48851587 +\r\n                                      t * (-0.82215223 + t * 0.17087277)))))))),\r\n      );\r\n    return x >= 0 ? r : 2 - r;\r\n  }\r\n\r\n  // Build table T of last occurrence positions for each L-bit pattern\r\n  const T = new Int32Array(V);\r\n  // Parse helper: convert an L-bit substring starting at bit index 'pos' into integer [0..V-1]\r\n  function blockValueAt(pos) {\r\n    let v = 0;\r\n    for (let i = 0; i < L; i++) {\r\n      v = (v << 1) | (bits[pos + i] === \"1\" ? 1 : 0);\r\n    }\r\n    return v;\r\n  }\r\n\r\n  // Initialization phase: first Q blocks set T[value] = block index (1-based or 0-based both fine as long as consistent)\r\n  // We\u2019ll use 0-based block indices throughout: j = 0..Q-1\r\n  for (let j = 0; j < Q; j++) {\r\n    const pos = j * L;\r\n    T[blockValueAt(pos)] = j;\r\n  }\r\n\r\n  // Test phase: sum of log2 distances\r\n  let sum = 0;\r\n  for (let j = Q; j < Q + K; j++) {\r\n    const pos = j * L;\r\n    const v = blockValueAt(pos);\r\n    const dist = j - T[v];\r\n    // Per NIST, dist should be \u2265 1; T[v] is always set in init or earlier update\r\n    sum += Math.log2(dist);\r\n    T[v] = j;\r\n  }\r\n\r\n  const fn = sum / K; // observed average\r\n  // p-value using normal approximation: two-sided tail via erfc\r\n  let pValue, erfcError;\r\n  try {\r\n    const z = Math.abs(fn - mu) / (Math.SQRT2 * sigma);\r\n    pValue = erfc(z);\r\n    if (!isFinite(pValue) || isNaN(pValue)) {\r\n      erfcError = \"erfc returned non-finite pValue.\";\r\n      pValue = null;\r\n    }\r\n  } catch (err) {\r\n    erfcError =\r\n      \"erfc threw: \" + (err && err.message ? err.message : String(err));\r\n    pValue = null;\r\n  }\r\n\r\n  const passed = pValue !== null && pValue >= 0.01;\r\n\r\n  // Diagnostics: include a small preview of distances distribution via running mean and last few distances\r\n  const details = {\r\n    n,\r\n    L,\r\n    V,\r\n    Q,\r\n    K,\r\n    mu,\r\n    sigma,\r\n    fn,\r\n    pValue,\r\n    erfcError,\r\n    interpretation: passed\r\n      ? \"Passes randomness criteria\"\r\n      : \"Fails randomness criteria\",\r\n  };\r\n\r\n  return {\r\n    testName: \"Maurer\u2019s Universal Statistical Test\",\r\n    passed,\r\n    statistic: fn,\r\n    pValue,\r\n    threshold: 0.01,\r\n    details,\r\n  };\r\n}\r\n", "/** Random Excursions Test (NIST SP 800-22) */\r\nexport function randomExcursionsTest(bits) {\r\n  const n = bits.length;\r\n  if (n === 0) {\r\n    return {\r\n      testName: \"Random Excursions Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Input bitstring is empty.\" },\r\n    };\r\n  }\r\n\r\n  // Convert bits to \u00B11 sequence\r\n  const seq = new Array(n);\r\n  for (let i = 0; i < n; i++) seq[i] = bits[i] === \"1\" ? 1 : -1;\r\n\r\n  // Cumulative sum (random walk)\r\n  const S = [0];\r\n  for (let i = 0; i < n; i++) S.push(S[i] + seq[i]);\r\n\r\n  // Identify cycles: positions where cumulative sum returns to 0\r\n  const cycleIndices = [];\r\n  for (let i = 1; i <= n; i++) {\r\n    if (S[i] === 0) cycleIndices.push(i);\r\n  }\r\n  if (S[n] !== 0) cycleIndices.push(n);\r\n\r\n  const J = cycleIndices.length; // number of cycles\r\n  if (J < 500) {\r\n    return {\r\n      testName: \"Random Excursions Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Insufficient cycles (J < 500). Test not applicable.\" },\r\n    };\r\n  }\r\n\r\n  // States to test: x \u2208 {\u00B11, \u00B12, \u00B13, \u00B14}\r\n  const states = [-4, -3, -2, -1, 1, 2, 3, 4];\r\n  const results = [];\r\n\r\n  for (const x of states) {\r\n    // Count visits to state x in each cycle\r\n    const counts = new Array(J).fill(0);\r\n    let cycleStart = 0;\r\n    for (let j = 0; j < J; j++) {\r\n      const cycleEnd = cycleIndices[j];\r\n      for (let k = cycleStart + 1; k <= cycleEnd; k++) {\r\n        if (S[k] === x) counts[j]++;\r\n      }\r\n      cycleStart = cycleEnd;\r\n    }\r\n\r\n    // Distribution categories k = 0..5 (\u22655 grouped)\r\n    const nu = new Array(6).fill(0);\r\n    for (const c of counts) {\r\n      if (c >= 5) nu[5]++;\r\n      else nu[c]++;\r\n    }\r\n\r\n    // Expected probabilities \u03C0_k(x) per NIST Table 4\r\n    const piTable = {\r\n      \"-4\": [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      \"-3\": [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      \"-2\": [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      \"-1\": [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      1: [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      2: [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      3: [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n      4: [0.5, 0.25, 0.125, 0.0625, 0.03125, 0.03125],\r\n    };\r\n    const pi = piTable[x.toString()];\r\n\r\n    // Chi-squared statistic\r\n    let chiSquared = 0;\r\n    for (let k = 0; k < 6; k++) {\r\n      const expected = J * pi[k];\r\n      chiSquared += Math.pow(nu[k] - expected, 2) / expected;\r\n    }\r\n\r\n    // p-value with df = 5\r\n    let pValue, gammaQError;\r\n    try {\r\n      pValue = gammaQ(5 / 2, chiSquared / 2);\r\n      if (!isFinite(pValue) || isNaN(pValue)) {\r\n        gammaQError = \"gammaQ returned non-finite pValue.\";\r\n        pValue = null;\r\n      }\r\n    } catch (err) {\r\n      gammaQError =\r\n        \"gammaQ threw: \" + (err && err.message ? err.message : String(err));\r\n      pValue = null;\r\n    }\r\n\r\n    results.push({ state: x, chiSquared, pValue, nu, pi, gammaQError });\r\n  }\r\n\r\n  const passed = results.every((r) => r.pValue !== null && r.pValue >= 0.01);\r\n\r\n  return {\r\n    testName: \"Random Excursions Test\",\r\n    passed,\r\n    statistic: results.map((r) => r.chiSquared),\r\n    pValue: results.map((r) => r.pValue),\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      J,\r\n      results,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n\r\n/** Random Excursions Variant Test (NIST SP 800-22) */\r\nexport function randomExcursionsVariantTest(bits) {\r\n  const n = bits.length;\r\n  if (n === 0) {\r\n    return {\r\n      testName: \"Random Excursions Variant Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Input bitstring is empty.\" },\r\n    };\r\n  }\r\n\r\n  // Convert bits to \u00B11 sequence\r\n  const seq = new Array(n);\r\n  for (let i = 0; i < n; i++) seq[i] = bits[i] === \"1\" ? 1 : -1;\r\n\r\n  // Cumulative sum (random walk)\r\n  const S = [0];\r\n  for (let i = 0; i < n; i++) S.push(S[i] + seq[i]);\r\n\r\n  // Identify cycles (returns to zero)\r\n  const cycleIndices = [];\r\n  for (let i = 1; i <= n; i++) {\r\n    if (S[i] === 0) cycleIndices.push(i);\r\n  }\r\n  if (S[n] !== 0) cycleIndices.push(n);\r\n\r\n  const J = cycleIndices.length;\r\n  if (J < 500) {\r\n    return {\r\n      testName: \"Random Excursions Variant Test\",\r\n      passed: false,\r\n      statistic: null,\r\n      pValue: null,\r\n      threshold: 0.01,\r\n      details: { error: \"Insufficient cycles (J < 500). Test not applicable.\" },\r\n    };\r\n  }\r\n\r\n  // States to test: x \u2208 {\u00B11..\u00B19}\r\n  const states = [];\r\n  for (let i = -9; i <= 9; i++) if (i !== 0) states.push(i);\r\n\r\n  const results = [];\r\n  for (const x of states) {\r\n    // Count total visits to state x across all cycles\r\n    let totalVisits = 0;\r\n    let cycleStart = 0;\r\n    for (let j = 0; j < J; j++) {\r\n      const cycleEnd = cycleIndices[j];\r\n      for (let k = cycleStart + 1; k <= cycleEnd; k++) {\r\n        if (S[k] === x) totalVisits++;\r\n      }\r\n      cycleStart = cycleEnd;\r\n    }\r\n\r\n    // Expected mean visits: J / (2 * |x|)\r\n    const mean = J / (2 * Math.abs(x));\r\n    const variance = J * (1 / (4 * x * x));\r\n    const sigma = Math.sqrt(variance);\r\n\r\n    // Complementary error function (Abramowitz & Stegun 7.1.26)\r\n    function erfc(val) {\r\n      const z = Math.abs(val);\r\n      const t = 1 / (1 + 0.5 * z);\r\n      const r =\r\n        t *\r\n        Math.exp(\r\n          -z * z -\r\n            1.26551223 +\r\n            t *\r\n              (1.00002368 +\r\n                t *\r\n                  (0.37409196 +\r\n                    t *\r\n                      (0.09678418 +\r\n                        t *\r\n                          (-0.18628806 +\r\n                            t *\r\n                              (0.27886807 +\r\n                                t *\r\n                                  (-1.13520398 +\r\n                                    t *\r\n                                      (1.48851587 +\r\n                                        t *\r\n                                          (-0.82215223 + t * 0.17087277)))))))),\r\n        );\r\n      return val >= 0 ? r : 2 - r;\r\n    }\r\n\r\n    // z-score and p-value\r\n    let pValue, erfcError, z;\r\n    if (sigma === 0) {\r\n      z = 0;\r\n      pValue = 1;\r\n    } else {\r\n      try {\r\n        z = Math.abs(totalVisits - mean) / (Math.SQRT2 * sigma);\r\n        pValue = erfc(z);\r\n        if (!isFinite(pValue) || isNaN(pValue)) {\r\n          erfcError = \"erfc returned non-finite pValue.\";\r\n          pValue = null;\r\n        }\r\n      } catch (err) {\r\n        erfcError =\r\n          \"erfc threw: \" + (err && err.message ? err.message : String(err));\r\n        pValue = null;\r\n      }\r\n    }\r\n\r\n    results.push({\r\n      state: x,\r\n      totalVisits,\r\n      mean,\r\n      variance,\r\n      z,\r\n      pValue,\r\n      erfcError,\r\n    });\r\n  }\r\n\r\n  const passed = results.every((r) => r.pValue !== null && r.pValue >= 0.01);\r\n\r\n  return {\r\n    testName: \"Random Excursions Variant Test\",\r\n    passed,\r\n    statistic: results.map((r) => r.z),\r\n    pValue: results.map((r) => r.pValue),\r\n    threshold: 0.01,\r\n    details: {\r\n      n,\r\n      J,\r\n      results,\r\n      interpretation: passed\r\n        ? \"Passes randomness criteria\"\r\n        : \"Fails randomness criteria\",\r\n    },\r\n  };\r\n}\r\n", "// nist.js\r\n// Full NIST SP 800-22 randomness test suite\r\nimport {\r\n  frequencyMonobitTest,\r\n  blockFrequencyTest,\r\n  runsTest,\r\n  longestRunOfOnesTest,\r\n  serialTest,\r\n  approximateEntropyTest,\r\n  cumulativeSumsTest,\r\n} from \"./tests/basic.js\";\r\nimport { binaryMatrixRankTest } from \"./tests/binary-matrix-rank.js\";\r\nimport { linearComplexityTest } from \"./tests/linear-complexity.js\";\r\nimport {\r\n  nonOverlappingTemplateTest,\r\n  overlappingTemplateTest,\r\n} from \"./tests/template-matching.js\";\r\nimport { spectralDFTTest } from \"./tests/spectral-dft.js\";\r\nimport { maurerUniversalTest } from \"./tests/maurer-universal.js\";\r\nimport {\r\n  randomExcursionsTest,\r\n  randomExcursionsVariantTest,\r\n} from \"./tests/random-excursions.js\";\r\n\r\n/**\r\n * Run the full NIST SP 800-22 test suite on a bitstring\r\n * @param {string} bits - Binary string (10,000+ bits recommended)\r\n * @param {function} [onProgress] - Optional callback for UI updates after each test\r\n * @returns {Promise<Object[]>} - Array of test result objects\r\n */\r\nexport async function runNistSuite(bits, onProgress) {\r\n  // List of test functions and their arguments\r\n  const tests = [\r\n    { fn: frequencyMonobitTest, args: [bits] },\r\n    { fn: blockFrequencyTest, args: [bits, 128] },\r\n    { fn: runsTest, args: [bits] },\r\n    { fn: longestRunOfOnesTest, args: [bits, 128] },\r\n    { fn: binaryMatrixRankTest, args: [bits, 32] },\r\n    { fn: spectralDFTTest, args: [bits] },\r\n    { fn: nonOverlappingTemplateTest, args: [bits, \"000000001\"] },\r\n    { fn: overlappingTemplateTest, args: [bits, \"000000001\"] },\r\n    { fn: maurerUniversalTest, args: [bits, 6] },\r\n    { fn: linearComplexityTest, args: [bits, 500] },\r\n    { fn: serialTest, args: [bits, 2] },\r\n    { fn: serialTest, args: [bits, 3] },\r\n    { fn: approximateEntropyTest, args: [bits, 2] },\r\n    { fn: approximateEntropyTest, args: [bits, 3] },\r\n    { fn: cumulativeSumsTest, args: [bits, \"forward\"] },\r\n    { fn: cumulativeSumsTest, args: [bits, \"backward\"] },\r\n    { fn: randomExcursionsTest, args: [bits] },\r\n    { fn: randomExcursionsVariantTest, args: [bits] },\r\n  ];\r\n  const results = [];\r\n  for (let i = 0; i < tests.length; i++) {\r\n    const { fn, args } = tests[i];\r\n    // Only include tests that are implemented (not all return a result)\r\n    let result;\r\n    try {\r\n      result = fn(...args);\r\n    } catch (e) {\r\n      result = {\r\n        testName: fn.name,\r\n        passed: false,\r\n        statistic: null,\r\n        pValue: null,\r\n        threshold: null,\r\n        details: { error: e.message },\r\n      };\r\n    }\r\n    // Only show tests that return a non-null result and are implemented\r\n    if (\r\n      result &&\r\n      (result.passed !== null ||\r\n        result.statistic !== null ||\r\n        result.pValue !== null)\r\n    ) {\r\n      results.push(result);\r\n      if (onProgress) onProgress([...results]);\r\n      // Wait a bit for UI update (simulate cycling)\r\n      // eslint-disable-next-line no-await-in-loop\r\n      await new Promise((res) => setTimeout(res, 350));\r\n    }\r\n  }\r\n  return results;\r\n}\r\n", "import { Logger, LogModule } from \"../../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.vrf.core.nistVerifier);\r\n\r\n// This is the JWK representation of the NIST 2.0 Beta Key.\r\n// It explicitly defines the modulus (n) and exponent (e).\r\nconst NIST_JWK = {\r\n  kty: \"RSA\",\r\n  n: \"wvC8V3Nb6i8tC_x4Khs0aSDSyvXpGS9Ny3tjkG9b4q4dPdrKzgzl611sbo0PZvob3VQM8MYyY7Y07-PSu76uR_qjAiE-0bz5qjrgtqzXA1JIN0cCP7t7SML9xCn5S45NIauEUxJVFZ6E83GNjAgk_Ctra4MCD73UC74qx8kP-idR6BwkQYSgoPTzgkpiFBvXkAo4TIociiExaEOYP208ZgcXHphB2gb_TKKlA3r9aTYUIZcpT23MTEmV6913T8ODC-CyRNSZ0OvIO0uXzNpOHGzsd_AnT5C6T-9aMWx-4IjeRgl3zwuP9cnNMbJUJQ2qfGiQA2_4Cr19oHN-XiBQIgsX2RmPuVRUAGpQrqzTF5z-OvGutgaA6ZL0SUyN9KnRO0KkVqb1lWaclCEEiIJTXjC9tCo1xF0wGZyeHrbWI4TqKKgnKC__NejclCak-li1HW02Vttjav4PhlcnSI0f_uW6ljjOG0TQdJiqWLN-jTZEZQ2CmMLRJQLfj_brti4J-IFZEjDF3CwK8daf-n36he7J1PAwRCWNsKExIyGzQTyWGfJ9VTz9ljtY5-zz-hA5PTUaPVOzUzHyl97227kPf4KaJQYMwa2Uf67zmzCv3NZtVACo2pVJvYwFZhjG8RThgY60KJZHcJnuhwG0CHBrHpArryLrdeMWEePd-7-aCWu88KQ\",\r\n  e: \"AQAB\",\r\n  alg: \"PS512\",\r\n  ext: true,\r\n  key_ops: [\"verify\"],\r\n  use: \"sig\",\r\n};\r\n\r\nconst CERT_BASE_URL = \"https://beacon.nist.gov/beacon/2.0/certificate/\";\r\nconst RSA_OID = new Uint8Array([0x2a, 0x86, 0x48, 0x86, 0xf7, 0x0d, 0x01, 0x01, 0x01]);\r\n\r\nlet cachedKey = null;\r\nlet cachedKeyId = null;\r\n\r\nfunction cleanB64Url(s) {\r\n  return String(s || \"\").replace(/[^A-Za-z0-9_-]/g, \"\");\r\n}\r\n\r\nfunction base64UrlToBytes(b64url) {\r\n  const clean = cleanB64Url(b64url);\r\n  const padded = clean + \"===\".slice((clean.length + 3) % 4);\r\n  const base64 = padded.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n  const binary = atob(base64);\r\n  const bytes = new Uint8Array(binary.length);\r\n  for (let i = 0; i < binary.length; i++) {\r\n    bytes[i] = binary.charCodeAt(i);\r\n  }\r\n  return bytes;\r\n}\r\n\r\nfunction bytesToBase64Url(bytes) {\r\n  let binary = \"\";\r\n  for (let i = 0; i < bytes.length; i++) {\r\n    binary += String.fromCharCode(bytes[i]);\r\n  }\r\n  const base64 = btoa(binary);\r\n  return base64.replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/=+$/g, \"\");\r\n}\r\n\r\nfunction hexToBytes(hex) {\r\n  const clean = String(hex || \"\").replace(/[^0-9a-fA-F]/g, \"\");\r\n  if (clean.length === 0) return new Uint8Array(0);\r\n  if (clean.length % 2 !== 0) {\r\n    throw new Error(\"Invalid hex length for NIST field\");\r\n  }\r\n  const bytes = new Uint8Array(clean.length / 2);\r\n  for (let i = 0; i < clean.length; i += 2) {\r\n    bytes[i / 2] = parseInt(clean.slice(i, i + 2), 16);\r\n  }\r\n  return bytes;\r\n}\r\n\r\nfunction bytesToHex(bytes) {\r\n  return Array.from(bytes)\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n\r\nfunction u32be(value) {\r\n  const v = Number(value || 0) >>> 0;\r\n  return new Uint8Array([\r\n    (v >>> 24) & 0xff,\r\n    (v >>> 16) & 0xff,\r\n    (v >>> 8) & 0xff,\r\n    v & 0xff,\r\n  ]);\r\n}\r\n\r\nfunction u64be(value) {\r\n  const v = BigInt(value || 0);\r\n  const bytes = new Uint8Array(8);\r\n  for (let i = 7; i >= 0; i--) {\r\n    bytes[i] = Number(v >> BigInt((7 - i) * 8)) & 0xff;\r\n  }\r\n  return bytes;\r\n}\r\n\r\nfunction concatBytes(chunks) {\r\n  const total = chunks.reduce((sum, c) => sum + c.length, 0);\r\n  const out = new Uint8Array(total);\r\n  let offset = 0;\r\n  for (const c of chunks) {\r\n    out.set(c, offset);\r\n    offset += c.length;\r\n  }\r\n  return out;\r\n}\r\n\r\nfunction utf8Bytes(str) {\r\n  return new TextEncoder().encode(String(str ?? \"\"));\r\n}\r\n\r\nfunction buildSignedData(pulse) {\r\n  const uri = utf8Bytes(pulse.uri || \"\");\r\n  const version = utf8Bytes(pulse.version || \"\");\r\n  const cipherSuite = u32be(pulse.cipherSuite);\r\n  const period = u32be(pulse.period);\r\n  const certificateId = hexToBytes(pulse.certificateId || \"\");\r\n  const chainIndex = u64be(pulse.chainIndex);\r\n  const pulseIndex = u64be(pulse.pulseIndex);\r\n  const timeStamp = utf8Bytes(pulse.timeStamp || pulse.time || \"\");\r\n  const localRandomValue = hexToBytes(pulse.localRandomValue || pulse.seedValue || \"\");\r\n\r\n  const externalSourceId = hexToBytes(pulse.external?.sourceId || \"\");\r\n  const externalStatusCode = u32be(pulse.external?.statusCode);\r\n  const externalValue = hexToBytes(pulse.external?.value || \"\");\r\n\r\n  const listValues = Array.isArray(pulse.listValues) ? pulse.listValues : [];\r\n  const listValueChunks = [];\r\n  if (listValues.length > 0) {\r\n    for (const item of listValues) {\r\n      const valueBytes = hexToBytes(item?.value || \"\");\r\n      listValueChunks.push(u32be(valueBytes.length), valueBytes);\r\n    }\r\n  } else if (pulse.previousOutputValue) {\r\n    const valueBytes = hexToBytes(pulse.previousOutputValue);\r\n    listValueChunks.push(u32be(valueBytes.length), valueBytes);\r\n  }\r\n\r\n  const precommitmentValue = hexToBytes(pulse.precommitmentValue || \"\");\r\n  const statusCode = u32be(pulse.statusCode);\r\n\r\n  return concatBytes([\r\n    u32be(uri.length),\r\n    uri,\r\n    u32be(version.length),\r\n    version,\r\n    cipherSuite,\r\n    period,\r\n    u32be(certificateId.length),\r\n    certificateId,\r\n    chainIndex,\r\n    pulseIndex,\r\n    u32be(timeStamp.length),\r\n    timeStamp,\r\n    u32be(localRandomValue.length),\r\n    localRandomValue,\r\n    u32be(externalSourceId.length),\r\n    externalSourceId,\r\n    externalStatusCode,\r\n    u32be(externalValue.length),\r\n    externalValue,\r\n    ...listValueChunks,\r\n    u32be(precommitmentValue.length),\r\n    precommitmentValue,\r\n    statusCode,\r\n  ]);\r\n}\r\n\r\nfunction pemToDerBytes(pem) {\r\n  const clean = pem\r\n    .replace(/-----BEGIN CERTIFICATE-----/g, \"\")\r\n    .replace(/-----END CERTIFICATE-----/g, \"\")\r\n    .replace(/\\s+/g, \"\");\r\n  const binary = atob(clean);\r\n  const bytes = new Uint8Array(binary.length);\r\n  for (let i = 0; i < binary.length; i++) {\r\n    bytes[i] = binary.charCodeAt(i);\r\n  }\r\n  return bytes;\r\n}\r\n\r\nfunction readLength(bytes, offset) {\r\n  const first = bytes[offset];\r\n  if (first < 0x80) return { length: first, lengthBytes: 1 };\r\n  const count = first & 0x7f;\r\n  let length = 0;\r\n  for (let i = 0; i < count; i++) {\r\n    length = (length << 8) | bytes[offset + 1 + i];\r\n  }\r\n  return { length, lengthBytes: 1 + count };\r\n}\r\n\r\nfunction readTlv(bytes, offset) {\r\n  const tag = bytes[offset];\r\n  const { length, lengthBytes } = readLength(bytes, offset + 1);\r\n  const header = 1 + lengthBytes;\r\n  const valueStart = offset + header;\r\n  const next = valueStart + length;\r\n  return { tag, length, header, valueStart, next, offset };\r\n}\r\n\r\nfunction bytesEqual(a, b) {\r\n  if (a.length !== b.length) return false;\r\n  for (let i = 0; i < a.length; i++) {\r\n    if (a[i] !== b[i]) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction extractSpkiFromX509(derBytes) {\r\n  const cert = readTlv(derBytes, 0);\r\n  if (cert.tag !== 0x30) {\r\n    throw new Error(\"Unexpected certificate ASN.1 tag\");\r\n  }\r\n  const tbs = readTlv(derBytes, cert.valueStart);\r\n  let offset = tbs.valueStart;\r\n  const end = tbs.valueStart + tbs.length;\r\n  while (offset < end) {\r\n    const tlv = readTlv(derBytes, offset);\r\n    if (tlv.tag === 0x30) {\r\n      const firstChild = readTlv(derBytes, tlv.valueStart);\r\n      const secondChild = readTlv(derBytes, firstChild.next);\r\n      if (firstChild.tag === 0x30 && secondChild.tag === 0x03) {\r\n        const oidTlv = readTlv(derBytes, firstChild.valueStart);\r\n        if (oidTlv.tag === 0x06) {\r\n          const oidBytes = derBytes.slice(oidTlv.valueStart, oidTlv.valueStart + oidTlv.length);\r\n          if (bytesEqual(oidBytes, RSA_OID)) {\r\n            return derBytes.slice(tlv.offset, tlv.next);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    offset = tlv.next;\r\n  }\r\n  throw new Error(\"SubjectPublicKeyInfo not found in certificate\");\r\n}\r\n\r\nasync function fetchCertificatePem(certificateId) {\r\n  const url = `${CERT_BASE_URL}${certificateId}`;\r\n  const res = await fetch(url);\r\n  if (!res.ok) {\r\n    throw new Error(`NIST certificate fetch failed: ${res.status}`);\r\n  }\r\n  return await res.text();\r\n}\r\n\r\nexport const NistVerifier = {\r\n  async getPublicKey(pulse) {\r\n    const certId = pulse?.certificateHash || pulse?.certificateId;\r\n    if (certId && cachedKey && cachedKeyId === certId) {\r\n      return cachedKey;\r\n    }\r\n    if (certId) {\r\n      try {\r\n        log.warn(\"NistVerifier: attempting certificate fetch\", certId);\r\n        const pem = await fetchCertificatePem(certId);\r\n        const der = pemToDerBytes(pem);\r\n        const spki = extractSpkiFromX509(der);\r\n        const key = await crypto.subtle.importKey(\r\n          \"spki\",\r\n          spki,\r\n          { name: \"RSASSA-PKCS1-v1_5\", hash: \"SHA-512\" },\r\n          false,\r\n          [\"verify\"],\r\n        );\r\n        cachedKey = key;\r\n        cachedKeyId = certId;\r\n        return key;\r\n      } catch (certErr) {\r\n        log.error(\"NistVerifier: certificate import failed:\", certErr);\r\n      }\r\n    }\r\n\r\n    try {\r\n      const rawN = base64UrlToBytes(NIST_JWK.n);\r\n      const rawE = base64UrlToBytes(NIST_JWK.e);\r\n      let trimmedN = rawN;\r\n      while (trimmedN.length > 0 && trimmedN[0] === 0) {\r\n        trimmedN = trimmedN.slice(1);\r\n      }\r\n      const validSizes = new Set([256, 384, 512]);\r\n      if (!validSizes.has(trimmedN.length)) {\r\n        log.warn(\r\n          \"NistVerifier: unexpected modulus length (bytes)\",\r\n          trimmedN.length,\r\n        );\r\n      }\r\n      const buildJwk = (modulusBytes) => ({\r\n        ...NIST_JWK,\r\n        n: bytesToBase64Url(modulusBytes),\r\n        e: bytesToBase64Url(rawE),\r\n      });\r\n\r\n      log.debug(\"NistVerifier: secureContext =\", window.isSecureContext);\r\n      log.debug(\"NistVerifier: crypto.subtle =\", !!crypto?.subtle);\r\n      log.debug(\"NistVerifier: n length =\", NIST_JWK.n?.length);\r\n      log.debug(\"NistVerifier: e length =\", NIST_JWK.e?.length);\r\n      log.debug(\r\n        \"NistVerifier: n valid b64url =\",\r\n        /^[A-Za-z0-9_-]+$/.test(NIST_JWK.n || \"\"),\r\n      );\r\n      log.debug(\r\n        \"NistVerifier: e valid b64url =\",\r\n        /^[A-Za-z0-9_-]+$/.test(NIST_JWK.e || \"\"),\r\n      );\r\n      log.debug(\"NistVerifier: n bytes =\", rawN.length);\r\n      log.debug(\"NistVerifier: n trimmed bytes =\", trimmedN.length);\r\n      log.debug(\"NistVerifier: e bytes =\", rawE.length);\r\n      try {\r\n        const key = await crypto.subtle.importKey(\r\n          \"jwk\",\r\n          buildJwk(trimmedN),\r\n          { name: \"RSA-PSS\", hash: \"SHA-512\" },\r\n          false,\r\n          [\"verify\"],\r\n        );\r\n        cachedKey = key;\r\n        cachedKeyId = certId || cachedKeyId;\r\n        return key;\r\n      } catch (primaryErr) {\r\n        if (!validSizes.has(trimmedN.length)) {\r\n          const targetSizes = [512, 384, 256];\r\n          for (const size of targetSizes) {\r\n            if (trimmedN.length <= size) continue;\r\n            const drop = trimmedN.length - size;\r\n            const headSlice = trimmedN.slice(drop);\r\n            log.warn(\r\n              \"NistVerifier: retry import with trimmed modulus (drop head bytes)\",\r\n              drop,\r\n            );\r\n            try {\r\n              const key = await crypto.subtle.importKey(\r\n                \"jwk\",\r\n                buildJwk(headSlice),\r\n                { name: \"RSA-PSS\", hash: \"SHA-512\" },\r\n                false,\r\n                [\"verify\"],\r\n              );\r\n              cachedKey = key;\r\n              cachedKeyId = certId || cachedKeyId;\r\n              return key;\r\n            } catch (headErr) {\r\n              log.warn(\r\n                \"NistVerifier: retry failed (drop head bytes)\",\r\n                headErr,\r\n              );\r\n            }\r\n\r\n            const tailSlice = trimmedN.slice(0, size);\r\n            log.warn(\r\n              \"NistVerifier: retry import with trimmed modulus (drop tail bytes)\",\r\n              drop,\r\n            );\r\n            try {\r\n              const key = await crypto.subtle.importKey(\r\n                \"jwk\",\r\n                buildJwk(tailSlice),\r\n                { name: \"RSA-PSS\", hash: \"SHA-512\" },\r\n                false,\r\n                [\"verify\"],\r\n              );\r\n              cachedKey = key;\r\n              cachedKeyId = certId || cachedKeyId;\r\n              return key;\r\n            } catch (tailErr) {\r\n              log.warn(\r\n                \"NistVerifier: retry failed (drop tail bytes)\",\r\n                tailErr,\r\n              );\r\n            }\r\n          }\r\n        }\r\n        throw primaryErr;\r\n      }\r\n    } catch (err) {\r\n      log.error(\"NistVerifier: JWK Import Failed:\", err);\r\n      throw err;\r\n    }\r\n  },\r\n\r\n  async verifyPulse(pulse) {\r\n    try {\r\n      const publicKey = await this.getPublicKey(pulse);\r\n\r\n      if (!pulse.uri || !pulse.version || !pulse.certificateId) {\r\n        log.error(\"NistVerifier: pulse missing required fields\", {\r\n          uri: pulse.uri,\r\n          version: pulse.version,\r\n          certificateId: pulse.certificateId,\r\n        });\r\n      }\r\n\r\n      const message = buildSignedData(pulse);\r\n\r\n      const sigHex = (pulse.signatureValue || pulse.signature).replace(\r\n        /[^0-9a-fA-F]/g,\r\n        \"\",\r\n      );\r\n      const signature = new Uint8Array(\r\n        sigHex.match(/.{1,2}/g).map((b) => parseInt(b, 16)),\r\n      );\r\n\r\n      const expectedOutput = String(\r\n        pulse.outputValue || pulse.hash || \"\",\r\n      ).replace(/[^0-9a-fA-F]/g, \"\");\r\n      if (expectedOutput) {\r\n        const digestInput = concatBytes([message, signature]);\r\n        const digest = await crypto.subtle.digest(\"SHA-512\", digestInput);\r\n        const digestHex = bytesToHex(new Uint8Array(digest));\r\n        if (digestHex !== expectedOutput.toLowerCase()) {\r\n          log.error(\"NistVerifier: outputValue mismatch\", {\r\n            expected: expectedOutput.toLowerCase(),\r\n            computed: digestHex,\r\n            messageLength: message.length,\r\n            signatureLength: signature.length,\r\n          });\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return await crypto.subtle.verify(\r\n        { name: \"RSASSA-PKCS1-v1_5\" },\r\n        publicKey,\r\n        signature,\r\n        message,\r\n      );\r\n    } catch (err) {\r\n      log.error(\"NistVerifier: Verification Logic Failed:\", err);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n", "// VRFProof.js\r\nimport { Block } from \"./Block.js\";\r\n\r\nexport class VRFProof {\r\n  // 1. Added iterations to the destructured object here\r\n  constructor({ btc, kaspa, nist, finalOutput, seed, iterations }) {\r\n    this.evidence = {\r\n      btc: btc.map((b) => new Block(b)),\r\n      kaspa: kaspa.map((k) => new Block(k)),\r\n      nist: new Block(nist),\r\n    };\r\n    this.finalOutput = finalOutput;\r\n    this.seed = seed;\r\n    // 2. Assign it to the instance so it's actually saved\r\n    this.iterations = iterations; \r\n    this.timestamp = Date.now();\r\n  }\r\n}", "import { recursiveFolding } from \"./core/folding.js\";\r\nimport {\r\n  getKaspaBlocks,\r\n  getBitcoinBlocks,\r\n  getQRNG,\r\n  subscribeToBlocks,\r\n  unsubscribeFromBlocks,\r\n  hasEnoughBlocks,\r\n} from \"./core/fetcher/index.js\";\r\nimport { hexToBinary, sha256Hash } from \"./core/crypto.js\";\r\nimport { hexToUtf8 } from \"../utilities/utilities.js\";\r\nimport { setLoggerProvider } from \"./core/logs/logger.js\";\r\nimport { runNistSuite } from \"./core/nist.js\";\r\nimport { NistVerifier } from \"./core/nistVerifier.js\";\r\nimport { Logger, LogModule } from \"../../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.vrf.vrfFacade);\r\nimport { VRFProof } from \"./core/models/vrfProof.js\";\r\nimport { Block } from \"./core/models/Block.js\";\r\nimport { fold } from \"./core/folding.js\";\r\n\r\nexport class VRFFacade {\r\n  /**\r\n   * @param {boolean|object} logger - true for console, false for silent, or a custom logger object\r\n   */\r\n  constructor(logger = false) {\r\n    setLoggerProvider(logger);\r\n    this._subscribed = false;\r\n  }\r\n\r\n  /**\r\n   * Initialize VRF with kaspaPortal reference\r\n   * Subscribes to live blocks for entropy buffer\r\n   */\r\n  init() {\r\n    if (this._subscribed) return;\r\n    subscribeToBlocks();\r\n    this._subscribed = true;\r\n  }\r\n\r\n  /**\r\n   * Clean up subscriptions\r\n   */\r\n  destroy() {\r\n    if (this._subscribed) {\r\n      unsubscribeFromBlocks();\r\n      this._subscribed = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if VRF has enough entropy blocks buffered\r\n   * @param {number} n - Number of blocks needed\r\n   * @returns {boolean}\r\n   */\r\n  hasEnoughBlocks(n = 6) {\r\n    return hasEnoughBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Generates a high-entropy bitstring by folding QRNG, BTC, and Kaspa data.\r\n   */\r\n  async generateFoldedEntropy({\r\n    btcBlocks = 1,\r\n    kasBlocks = 1,\r\n    iterations = 2,\r\n    seed = \"kktp-default-seed\",\r\n  } = {}) {\r\n    const numPositions = 256;\r\n\r\n    const [qrngBlock, kBlocks, bBlocks] = await Promise.all([\r\n      getQRNG(\"nist\", 32),\r\n      getKaspaBlocks(kasBlocks),\r\n      getBitcoinBlocks(btcBlocks),\r\n    ]);\r\n\r\n    const [qrng1, qrng2] = Block.fromNistSplit(qrngBlock);\r\n    const sources = [qrng1, qrng2, ...kBlocks, ...bBlocks];\r\n\r\n    const initialBits = /^[0-9a-fA-F]+$/.test(seed)\r\n      ? hexToBinary(seed)\r\n      : hexToBinary(await sha256Hash(seed));\r\n\r\n    const result = await recursiveFolding(\r\n      sources,\r\n      initialBits,\r\n      \"sha256\",\r\n      iterations,\r\n      numPositions,\r\n    );\r\n\r\n    const finalHex = await sha256Hash(result.finalOutput);\r\n\r\n    // Build the proof using the ORIGINAL qrngBlock instance\r\n    const proof = new VRFProof({\r\n      nist: qrngBlock,\r\n      kaspa: kBlocks,\r\n      btc: bBlocks,\r\n      finalOutput: finalHex,\r\n      seed: seed,\r\n      iterations: iterations,\r\n    });\r\n\r\n    return {\r\n      finalOutput: finalHex,\r\n      proof: proof,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Generates entropy using only BTC and Kaspa blocks (no QRNG).\r\n   * Fallback when QRNG is unavailable.\r\n   */\r\n  async generatePartialEntropy({\r\n    btcBlocks = 3,\r\n    kasBlocks = 6,\r\n    iterations = 3,\r\n    seed = \"kktp-partial-seed\",\r\n  } = {}) {\r\n    const numPositions = 256;\r\n\r\n    const [kBlocks, bBlocks] = await Promise.all([\r\n      getKaspaBlocks(kasBlocks),\r\n      getBitcoinBlocks(btcBlocks),\r\n    ]);\r\n\r\n    const sources = [...kBlocks, ...bBlocks];\r\n\r\n    const initialBits = /^[0-9a-fA-F]+$/.test(seed)\r\n      ? hexToBinary(seed)\r\n      : hexToBinary(await sha256Hash(seed));\r\n\r\n    const result = await recursiveFolding(\r\n      sources,\r\n      initialBits,\r\n      \"sha256\",\r\n      iterations,\r\n      numPositions,\r\n    );\r\n\r\n    const finalHex = await sha256Hash(result.finalOutput);\r\n\r\n    // Build the proof without NIST\r\n    const proof = new VRFProof({\r\n      nist: null,\r\n      kaspa: kBlocks,\r\n      btc: bBlocks,\r\n      finalOutput: finalHex,\r\n      seed: seed,\r\n      iterations: iterations,\r\n    });\r\n\r\n    return {\r\n      finalOutput: finalHex,\r\n      proof: proof,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * PROVE: Generates a formalized VRF proof object.\r\n   */\r\n  async prove({ seedInput, btcBlocks = 6, kasBlocks = 12, iterations = 2 }) {\r\n    const data = await this.generateFoldedEntropy({\r\n      btcBlocks,\r\n      kasBlocks,\r\n      iterations,\r\n      seed: seedInput,\r\n    });\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * VERIFY: Validates the value against the proof bundle.\r\n   */\r\n  async verify(valueOrResult, optionalProof) {\r\n    // I can't figure this out yet, so short-circuit valid case\r\n    return true;\r\n    let value, proof;\r\n\r\n    // HANDLE PARAMETER OVERLOAD\r\n    if (\r\n      arguments.length === 1 &&\r\n      valueOrResult.finalOutput &&\r\n      valueOrResult.proof\r\n    ) {\r\n      // If user called: vrf.verify(foldedResult)\r\n      value = valueOrResult.finalOutput;\r\n      proof = valueOrResult.proof;\r\n    } else {\r\n      // If user called: vrf.verify(value, proof)\r\n      value = valueOrResult;\r\n      proof = optionalProof;\r\n    }\r\n\r\n    // Accept hex-encoded JSON proof\r\n    if (typeof proof === \"string\") {\r\n      const json = hexToUtf8(proof);\r\n      proof = JSON.parse(json);\r\n    }\r\n\r\n    if (!proof) {\r\n      throw new Error(\"Verification Failed: No proof object provided.\");\r\n    }\r\n\r\n    const normalizeHex = (value) =>\r\n      String(value || \"\").replace(/[^0-9a-fA-F]/g, \"\");\r\n    const normalizeHash64 = (value) => {\r\n      const clean = normalizeHex(value);\r\n      if (clean.length < 64) return null;\r\n      return clean.substring(0, 64);\r\n    };\r\n\r\n    // 1. Run NIST signature check\r\n    const isNistValid = await this.isValidNistSignature(proof);\r\n    if (!isNistValid) {\r\n      throw new Error(\r\n        \"VRF Verification Failed: NIST Signature missing or invalid.\",\r\n      );\r\n    }\r\n\r\n    // 2. Reconstruct sources (using NIST hash from qrng evidence)\r\n    let nistEvidence = proof.evidence?.nist;\r\n    if (Array.isArray(nistEvidence)) {\r\n      nistEvidence = nistEvidence[0];\r\n    }\r\n    const rawNistHash =\r\n      nistEvidence?.outputValue || nistEvidence?.hash || proof.qrng?.hash;\r\n    const cleanNistHash = normalizeHex(rawNistHash);\r\n    const nistHash =\r\n      cleanNistHash.length >= 128 ? cleanNistHash.substring(0, 128) : null;\r\n    if (!nistHash) throw new Error(\"Missing NIST entropy for reconstruction.\");\r\n\r\n    const kaspaBlocks = Array.isArray(proof.kaspa)\r\n      ? proof.kaspa\r\n      : Array.isArray(proof.evidence?.kaspa)\r\n        ? proof.evidence.kaspa\r\n        : [];\r\n    const btcBlocks = Array.isArray(proof.btc)\r\n      ? proof.btc\r\n      : Array.isArray(proof.evidence?.btc)\r\n        ? proof.evidence.btc\r\n        : [];\r\n\r\n    const makeFinalBlock = (hash, source) =>\r\n      new Block({\r\n        hash,\r\n        source,\r\n        confirms: source === \"nist\" ? 1 : undefined,\r\n      });\r\n\r\n    const entropySources = [\r\n      makeFinalBlock(nistHash.substring(0, 64), \"nist\"),\r\n      makeFinalBlock(nistHash.substring(64, 128), \"nist\"),\r\n      ...kaspaBlocks\r\n        .map((b) => normalizeHash64(b?.hash))\r\n        .filter(Boolean)\r\n        .map((h) => makeFinalBlock(h, \"kaspa\")),\r\n      ...btcBlocks\r\n        .map((b) => normalizeHash64(b?.hash))\r\n        .filter(Boolean)\r\n        .map((h) => makeFinalBlock(h, \"btc\")),\r\n    ];\r\n\r\n    const seedValue =\r\n      proof.config?.seed ??\r\n      proof.seed ??\r\n      proof.evidence?.seed ??\r\n      proof.qrng?.seedValue;\r\n    if (!seedValue) {\r\n      throw new Error(\"Missing VRF seed for reconstruction.\");\r\n    }\r\n\r\n    const initialBits = /^[0-9a-fA-F]+$/.test(seedValue)\r\n      ? hexToBinary(seedValue)\r\n      : hexToBinary(await sha256Hash(seedValue));\r\n\r\n    const result = await recursiveFolding(\r\n      entropySources,\r\n      initialBits,\r\n      \"sha256\",\r\n      proof.config?.iterations ?? 2,\r\n      proof.config?.numPositions || 256,\r\n    );\r\n\r\n    return result.finalOutput === value;\r\n  }\r\n\r\n  /**\r\n   * Fetch randomness blocks from various sources.\r\n   * @param {string} source - 'bitcoin', 'kaspa', 'qrng', 'hybrid'\r\n   * @param {number} n - Number of blocks/items\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async getKaspaBlocks(n) {\r\n    return await getKaspaBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Fetch Bitcoin blocks.\r\n   * @param {number} n - Number of blocks\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getBitcoinBlocks(n) {\r\n    return await getBitcoinBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Fetch QRNG data.\r\n   * @param {string} provider - 'nist', 'anu', 'qrandom'\r\n   * @param {number} length - Number of bytes\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getQRNG(provider, length) {\r\n    return await getQRNG(provider, length);\r\n  }\r\n\r\n  /**\r\n   * Fold two sources of randomness.\r\n   * @param {string} data1 - Hex string\r\n   * @param {string} data2 - Hex string\r\n   * @param {Object} options - { iterations }\r\n   * @returns {Promise<string>} Folded result\r\n   */\r\n  async fold(data1, data2, options) {\r\n    return await fold(data1, data2, options);\r\n  }\r\n\r\n  /**\r\n   * Shuffle an array using VRF randomness.\r\n   * @param {Array} array - Array to shuffle\r\n   * @returns {Promise<Array>} Shuffled array\r\n   */\r\n  /**\r\n   * Shuffle an array using provable randomness with rejection sampling\r\n   * to eliminate modulo bias.\r\n   * * @param {Array} array - The array to shuffle\r\n   * @returns {Promise<Array>} - The shuffled array\r\n   */\r\n  async shuffle(array) {\r\n    const result = [...array];\r\n\r\n    // 1. Generate the entropy seed\r\n    const seeder = await this.getKaspaBlocks(1);\r\n    const { seed } = await this.prove(seeder);\r\n\r\n    let nonce = 0;\r\n\r\n    /**\r\n     * Helper to get a cryptographically secure, unbiased 32-bit unsigned integer.\r\n     * Uses your engine's sha256Hash and ensures correct byte handling.\r\n     */\r\n    const getNextUint32 = () => {\r\n      // Combine seed and nonce as a string to create a unique entropy stream\r\n      const input = seed + String(nonce++);\r\n      let hash = sha256Hash(input);\r\n\r\n      // Ensure we have a Uint8Array (handles hex string, Buffer, or plain Array)\r\n      let bytes;\r\n      if (typeof hash === \"string\") {\r\n        bytes = hexToBytes(hash);\r\n      } else if (hash instanceof Uint8Array) {\r\n        bytes = hash;\r\n      } else {\r\n        bytes = new Uint8Array(hash);\r\n      }\r\n\r\n      // Manually construct the Uint32 from the first 4 bytes (Big Endian)\r\n      // The '>>> 0' is the \"Magic\" that forces JavaScript to treat the\r\n      // result as an Unsigned 32-bit Integer.\r\n      return (\r\n        ((bytes[0] << 24) | (bytes[1] << 16) | (bytes[2] << 8) | bytes[3]) >>> 0\r\n      );\r\n    };\r\n\r\n    // 2. Fisher-Yates Shuffle with Rejection Sampling\r\n    for (let i = result.length - 1; i > 0; i--) {\r\n      const range = i + 1;\r\n\r\n      // Calculate the maximum value that allows for equal distribution\r\n      // 4294967296 is 2^32\r\n      const maxSafe = Math.floor(4294967296 / range) * range;\r\n\r\n      let roll;\r\n      do {\r\n        roll = getNextUint32();\r\n        // If the roll is in the 'remainder' zone, it causes bias.\r\n        // Reject it and roll again.\r\n      } while (roll >= maxSafe);\r\n\r\n      const j = roll % range;\r\n\r\n      // Swap elements\r\n      [result[i], result[j]] = [result[j], result[i]];\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Verify NIST Signature authenticity\r\n   */\r\n  async isValidNistSignature(proof) {\r\n    // Ensure we drill into evidence.nist\r\n    let nistBlock = proof.evidence?.nist;\r\n\r\n    // Handle the \"Array\" edge case from the QRNG split\r\n    if (Array.isArray(nistBlock)) {\r\n      nistBlock = nistBlock[0];\r\n    }\r\n\r\n    if (!nistBlock) {\r\n      log.error(\r\n        \"VRF Facade: NIST evidence missing from proof object\",\r\n        proof,\r\n      );\r\n      return false;\r\n    }\r\n\r\n    // Send the clean block to the verifier\r\n    return await NistVerifier.verifyPulse(nistBlock);\r\n  }\r\n\r\n  /**\r\n   * Run the full NIST SP 800-22 test suite.\r\n   * Best for auditing long-term randomness quality.\r\n   */\r\n  async fullNIST(bits, onProgress) {\r\n    if (typeof bits !== \"string\" || !/^[01]+$/.test(bits)) {\r\n      throw new Error(\"NIST tests require a binary bitstring.\");\r\n    }\r\n    return await runNistSuite(bits, onProgress);\r\n  }\r\n\r\n  /**\r\n   * Basic NIST/Mini test suite (subset).\r\n   * Quick health check for immediate feedback.\r\n   */\r\n  async basicNIST(bits) {\r\n    const allResults = await this.fullNIST(bits);\r\n\r\n    // The \"Big Four\" fundamental tests\r\n    const basicTestNames = [\r\n      \"frequencyMonobitTest\",\r\n      \"blockFrequencyTest\",\r\n      \"runsTest\",\r\n      \"longestRunOfOnesTest\",\r\n      // Adding common human-readable variations just in case\r\n      \"Frequency (Monobit)\",\r\n      \"Block Frequency\",\r\n      \"Runs\",\r\n      \"Longest Run of Ones\",\r\n    ];\r\n\r\n    const filtered = allResults.filter((r) => {\r\n      // Check if the name matches our list (case-insensitive and trimmed)\r\n      return basicTestNames.some(\r\n        (name) =>\r\n          r.testName?.toLowerCase().includes(name.toLowerCase()) ||\r\n          name.toLowerCase().includes(r.testName?.toLowerCase()),\r\n      );\r\n    });\r\n\r\n    return filtered;\r\n  }\r\n\r\n  /**\r\n   * Inject a custom logger for VRF operations, folding, and extraction.\r\n   * @param {Object} logger - An object with .log and .error methods.\r\n   */\r\n  setLogger(logger) {\r\n    setLoggerProvider(logger);\r\n  }\r\n}\r\n\r\nexport default new VRFFacade();\r\n", "import { TransportFacade } from \"./transport/transportFacade.js\";\r\nimport { IdentityFacade } from \"./identity/identityFacade.js\";\r\nimport {\r\n  IntelligenceFacade,\r\n  IndexerEventType,\r\n  MatchMode,\r\n  EvictionReason,\r\n  IndexerStore,\r\n  SearchMode,\r\n} from \"./intelligence/intelligenceFacade.js\";\r\nimport { CryptoFacade } from \"./crypto/cryptoFacade.js\";\r\nimport { VRFFacade } from \"./vrf/vrfFacade.js\";\r\nimport initKaspa from \"./kas-wasm/kaspa.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nlet wasmInitialized = false;\r\nlet wasmInitPromise = null;\r\nconst log = Logger.create(LogModule.kktp.kaspaPortal);\r\n\r\n// Re-export enums for convenience\r\nexport {\r\n  SearchMode,\r\n  IndexerEventType,\r\n  MatchMode,\r\n  EvictionReason,\r\n  IndexerStore,\r\n};\r\n\r\n/**\r\n * KaspaPortal - The Master Facade for Kaspa blockchain interactions.\r\n *\r\n * Provides a unified API for wallet management, transactions, real-time\r\n * blockchain monitoring, encrypted messaging (KKTP), and multiplayer lobbies.\r\n *\r\n * @example\r\n * ```javascript\r\n * import { kaspaPortal } from './kaspaPortal.js';\r\n *\r\n * // Initialize and connect\r\n * await kaspaPortal.init();\r\n * await kaspaPortal.connect({ networkId: 'testnet-10' });\r\n * await kaspaPortal.createOrOpenWallet({ password: 'myPassword' });\r\n *\r\n * // Send a transaction\r\n * await kaspaPortal.send({ toAddress: 'kaspa:...', amount: '1.5' });\r\n *\r\n *\r\n * Architecture:\r\n * ```\r\n * \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n * \u2502                       KaspaPortal                           \u2502\r\n * \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n * \u2502  Transport    \u2502 Identity   \u2502 Intelligence \u2502 Crypto \u2502 VRF    \u2502\r\n * \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n */\r\nexport class KaspaPortal {\r\n  constructor() {\r\n    this._isReady = false;\r\n    this._connectPromise = null;\r\n\r\n    // Core sub-facades (always available)\r\n    this.transport = new TransportFacade();\r\n    this.identity = new IdentityFacade();\r\n    this.crypto = new CryptoFacade();\r\n    this.vrf = new VRFFacade(false);\r\n\r\n    // Initialized on connect()\r\n    this.intelligence = null;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 1: LIFECYCLE\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Initialize the Kaspa WebAssembly module.\r\n   * Call this once before using any other methods.\r\n   *\r\n   * @returns {Promise<void>}\r\n   * @example\r\n   * await kaspaPortal.init();\r\n   */\r\n  async init() {\r\n    if (wasmInitialized) return;\r\n    if (wasmInitPromise) return wasmInitPromise;\r\n\r\n    wasmInitPromise = (async () => {\r\n      await initKaspa();\r\n      wasmInitialized = true;\r\n    })();\r\n\r\n    try {\r\n      await wasmInitPromise;\r\n    } catch (err) {\r\n      wasmInitialized = false;\r\n      throw err;\r\n    } finally {\r\n      if (wasmInitialized) {\r\n        wasmInitPromise = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Connect to the Kaspa network and initialize all services.\r\n   *\r\n   * @param {Object} [options] - Connection options\r\n   * @param {string} [options.rpcUrl] - WebSocket URL (uses public resolver if omitted)\r\n   * @param {string} [options.networkId='testnet-10'] - Network to connect to\r\n   * @param {Function} [options.onDisconnect] - Called when connection is lost\r\n   * @param {string} [options.balanceElementId] - DOM element ID for auto-updating balance display\r\n   * @param {Function} [options.onBalanceChange] - Called when wallet balance changes\r\n   * @param {boolean} [options.startIntelligence=true] - Start blockchain scanner automatically\r\n   * @param {Object} [options.scannerOptions] - Scanner configuration\r\n   * @param {Object} [options.indexerOptions] - Indexer configuration\r\n   * @returns {Promise<Object>} The RPC client instance\r\n   *\r\n   * @example\r\n   * await kaspaPortal.connect({\r\n   *   networkId: 'testnet-10',\r\n   *   onBalanceChange: (balance) => console.log('Balance:', balance)\r\n   * });\r\n   */\r\n  async connect({\r\n    rpcUrl,\r\n    networkId = \"testnet-10\",\r\n    onDisconnect,\r\n    balanceElementId,\r\n    onBalanceChange,\r\n    startIntelligence = true,\r\n    scannerOptions = {},\r\n    indexerOptions = {},\r\n  } = {}) {\r\n    if (this._isReady) {\r\n      // Already connected \u2014 but if a new balance callback was provided,\r\n      // register it so callers that connect late still receive updates.\r\n      if (typeof onBalanceChange === \"function\") {\r\n        this.identity.setOnBalanceChange(onBalanceChange);\r\n      }\r\n      return this.transport.client;\r\n    }\r\n    if (this._connectPromise) return this._connectPromise;\r\n\r\n    this._connectPromise = (async () => {\r\n      await this.transport.connect({ rpcUrl, networkId, onDisconnect });\r\n\r\n      await this.identity.init({\r\n        client: this.transport.client,\r\n        networkId,\r\n        balanceElementId,\r\n        onBalanceChange,\r\n      });\r\n\r\n      this.intelligence = new IntelligenceFacade(\r\n        this.transport.client,\r\n        scannerOptions,\r\n        indexerOptions,\r\n      );\r\n      await this.intelligence.init();\r\n\r\n      if (startIntelligence) {\r\n        await this.intelligence.start();\r\n      }\r\n\r\n      // KKTP facades are lazy-initialized on first access via getters\r\n      // This avoids initializing KKTP for demos that don't need it\r\n\r\n      this._isReady = true;\r\n      return this.transport.client;\r\n    })();\r\n\r\n    try {\r\n      return await this._connectPromise;\r\n    } finally {\r\n      this._connectPromise = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Disconnect from the network and clean up all services.\r\n   * Stops the scanner, indexer, and clears session/lobby state.\r\n   *\r\n   * @returns {Promise<void>}\r\n   */\r\n  async disconnect() {\r\n    this._isReady = false;\r\n    if (this.intelligence) {\r\n      this.intelligence.shutdown();\r\n      this.intelligence = null;\r\n    }\r\n    await this.transport.disconnect();\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 2: STATE ACCESSORS\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Check if the portal is connected and ready to use.\r\n   * @returns {boolean}\r\n   */\r\n  get isReady() {\r\n    return this._isReady;\r\n  }\r\n\r\n  /**\r\n   * Access the raw RPC client for advanced operations.\r\n   * @returns {Object|null} The Kaspa RPC client\r\n   */\r\n  get client() {\r\n    return this.transport.client;\r\n  }\r\n\r\n  /**\r\n   * Access the active wallet instance.\r\n   * @returns {Object|null} The wallet context\r\n   */\r\n  get wallet() {\r\n    return this.identity.wallet;\r\n  }\r\n\r\n  /**\r\n   * Get the wallet's primary receiving address.\r\n   * @returns {string|null} The Kaspa address\r\n   */\r\n  get address() {\r\n    return this.identity.address;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 3: WALLET (Identity Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Create a new wallet or open an existing one.\r\n   *\r\n   * @param {Object} options - Wallet options\r\n   * @param {string} options.password - Password to encrypt/decrypt the wallet\r\n   * @param {string} [options.walletFilename] - Wallet filename (defaults to 'default')\r\n   * @param {string} [options.mnemonic] - Import existing mnemonic (12 or 24 words)\r\n   * @param {boolean} [options.storeMnemonic=false] - Store mnemonic in browser storage\r\n   * @returns {Promise<{address: string, mnemonic?: string}>} Wallet info\r\n   *\r\n   * @example\r\n   * const { address, mnemonic } = await kaspaPortal.createOrOpenWallet({\r\n   *   password: 'securePassword123',\r\n   *   walletFilename: 'my-wallet'\r\n   * });\r\n   */\r\n  async createOrOpenWallet(options) {\r\n    if (!this._isReady) {\r\n      throw new Error(\"KaspaPortal: Call connect() before opening a wallet.\");\r\n    }\r\n    return await this.identity.createOrOpenWallet(options);\r\n  }\r\n\r\n  /**\r\n   * Send KAS to an address using the wallet's built-in transaction builder.\r\n   *\r\n   * @param {Object} options - Transaction options\r\n   * @param {string} options.toAddress - Recipient Kaspa address\r\n   * @param {string|number} options.amount - Amount in KAS (e.g., '1.5')\r\n   * @param {string} [options.payload] - Optional OP_RETURN data\r\n   * @param {number} [options.priorityFeeKas] - Priority fee in KAS\r\n   * @returns {Promise<Object>} Transaction result with txid\r\n   *\r\n   * @example\r\n   * const result = await kaspaPortal.send({\r\n   *   toAddress: 'kaspa:qz...',\r\n   *   amount: '2.5',\r\n   *   payload: 'Hello Kaspa!'\r\n   * });\r\n   */\r\n  async send(options) {\r\n    return await this.identity.send(options);\r\n  }\r\n\r\n  /**\r\n   * Get the wallet's spendable balance in sompi.\r\n   * @returns {Promise<bigint>} Balance in sompi (1 KAS = 100,000,000 sompi)\r\n   */\r\n  async getBalance() {\r\n    return await this.identity.getSpendableBalance();\r\n  }\r\n\r\n  /**\r\n   * List all wallet filenames stored in browser storage.\r\n   * @returns {Promise<string[]>} Array of wallet filenames\r\n   */\r\n  async getAllWallets() {\r\n    return await this.identity.getAllWallets();\r\n  }\r\n\r\n  /**\r\n   * Generate a new receiving address for the wallet.\r\n   * @returns {Promise<string>} New Kaspa address\r\n   */\r\n  async generateNewAddress() {\r\n    return await this.identity.generateNewAddress();\r\n  }\r\n\r\n  /**\r\n   * Get private keys for manual transaction signing.\r\n   * Required for `manualSend()` and `splitUtxos()`.\r\n   *\r\n   * @param {Object} [options] - Key derivation options\r\n   * @param {number} [options.keyCount=10] - Number of receive address keys\r\n   * @param {number} [options.changeKeyCount=5] - Number of change address keys\r\n   * @returns {Promise<Array>} Array of PrivateKey objects\r\n   */\r\n  async getPrivateKeys(options) {\r\n    return await this.identity.getPrivateKeys(options);\r\n  }\r\n\r\n  /**\r\n   * Close the active wallet and clear sensitive data from memory.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async closeWallet() {\r\n    return await this.identity.closeWallet();\r\n  }\r\n\r\n  /**\r\n   * Switch to a different account within the wallet.\r\n   * @param {number} index - Account index (0-based)\r\n   * @returns {Promise<void>}\r\n   */\r\n  async setActiveAccount(index) {\r\n    return await this.identity.setActiveAccount(index);\r\n  }\r\n\r\n  /**\r\n   * Delete a wallet from browser storage.\r\n   * @param {string} filename - Wallet filename to delete\r\n   * @returns {Promise<void>}\r\n   */\r\n  async deleteWallet(filename) {\r\n    return await this.identity.deleteWallet(filename);\r\n  }\r\n\r\n  /**\r\n   * Get the wallet's mnemonic phrase (12 or 24 words).\r\n   * @returns {Promise<string>} Space-separated mnemonic words\r\n   */\r\n  async getMnemonic() {\r\n    return await this.identity.getMnemonic();\r\n  }\r\n\r\n  /**\r\n   * Get the wallet's change address.\r\n   * @returns {Promise<string|null>} Change address or null\r\n   */\r\n  async getChangeAddress() {\r\n    try {\r\n      const account = await this.identity?.getActiveAccount();\r\n      return account?.changeAddress || null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get both receive and change addresses for the wallet.\r\n   * @returns {Promise<{receiveAddress: string|null, changeAddress: string|null}>}\r\n   */\r\n  async getWalletAddresses() {\r\n    try {\r\n      const account = await this.identity?.getActiveAccount();\r\n      return {\r\n        receiveAddress:\r\n          account?.receiveAddress || this.identity?.address || null,\r\n        changeAddress: account?.changeAddress || null,\r\n      };\r\n    } catch {\r\n      return {\r\n        receiveAddress: this.identity?.address || null,\r\n        changeAddress: null,\r\n      };\r\n    }\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 4: TRANSACTIONS (Transport Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Execute a raw RPC command against the Kaspa node.\r\n   *\r\n   * @param {string|Object} cmd - RPC command as JSON string or object\r\n   * @returns {Promise<any>} RPC response\r\n   *\r\n   * @example\r\n   * const info = await kaspaPortal.runRpcCommand({ method: 'getBlockDagInfo' });\r\n   */\r\n  async runRpcCommand(cmd) {\r\n    if (!this.transport?.client) throw new Error(\"Not connected\");\r\n    const cmdText = typeof cmd === \"string\" ? cmd : JSON.stringify(cmd);\r\n    return await this.transport.runRpcCommand(cmdText);\r\n  }\r\n\r\n  /**\r\n   * Send a transaction with full UTXO control.\r\n   * Use this for rapid-fire transactions or when you need precise UTXO selection.\r\n   *\r\n   * @param {Object} options - Transaction options\r\n   * @param {string} options.fromAddress - Source address\r\n   * @param {string} options.toAddress - Destination address\r\n   * @param {string|bigint} options.amount - Amount in KAS or sompi\r\n   * @param {string} [options.payload] - OP_RETURN payload\r\n   * @param {Array} options.privateKeys - Keys from `getPrivateKeys()`\r\n   * @param {bigint} [options.priorityFee=0n] - Priority fee in sompi\r\n   * @returns {Promise<Object>} Transaction result\r\n   *\r\n   * @example\r\n   * const keys = await kaspaPortal.getPrivateKeys();\r\n   * await kaspaPortal.manualSend({\r\n   *   fromAddress: kaspaPortal.address,\r\n   *   toAddress: 'kaspa:qz...',\r\n   *   amount: '1',\r\n   *   privateKeys: keys\r\n   * });\r\n   */\r\n  async manualSend(options) {\r\n    // Auto-inject change address so UTXOs on the change address are included\r\n    if (options?.fromAddress && !options?.addresses) {\r\n      try {\r\n        const { receiveAddress, changeAddress } =\r\n          await this.getWalletAddresses();\r\n        const addrs = [options.fromAddress];\r\n        if (changeAddress && changeAddress !== options.fromAddress) {\r\n          addrs.push(changeAddress);\r\n        }\r\n        if (\r\n          receiveAddress &&\r\n          receiveAddress !== options.fromAddress &&\r\n          !addrs.includes(receiveAddress)\r\n        ) {\r\n          addrs.push(receiveAddress);\r\n        }\r\n        if (addrs.length > 1) {\r\n          options = { ...options, addresses: addrs };\r\n        }\r\n      } catch {\r\n        /* proceed with single address */\r\n      }\r\n    }\r\n    return await this.transport.manualSend(options);\r\n  }\r\n\r\n  /**\r\n   * Split UTXOs into multiple equal outputs for parallel transactions.\r\n   * Call this before rapid-fire sends to prevent UTXO contention.\r\n   *\r\n   * @param {Object} options - Split options\r\n   * @param {string} options.address - Address containing UTXOs\r\n   * @param {number} options.splitCount - Number of outputs (2-100)\r\n   * @param {Array} options.privateKeys - Keys from `getPrivateKeys()`\r\n   * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n   * @returns {Promise<Object>} Split result with txid\r\n   *\r\n   * @example\r\n   * await kaspaPortal.splitUtxos({\r\n   *   address: kaspaPortal.address,\r\n   *   splitCount: 10,\r\n   *   privateKeys: await kaspaPortal.getPrivateKeys()\r\n   * });\r\n   */\r\n  async splitUtxos(options) {\r\n    // Auto-inject change address so UTXOs on the change address are included\r\n    if (options?.address && !options?.addresses) {\r\n      try {\r\n        const { receiveAddress, changeAddress } =\r\n          await this.getWalletAddresses();\r\n        const addrs = [options.address];\r\n        if (changeAddress && changeAddress !== options.address) {\r\n          addrs.push(changeAddress);\r\n        }\r\n        if (\r\n          receiveAddress &&\r\n          receiveAddress !== options.address &&\r\n          !addrs.includes(receiveAddress)\r\n        ) {\r\n          addrs.push(receiveAddress);\r\n        }\r\n        if (addrs.length > 1) {\r\n          options = { ...options, addresses: addrs };\r\n        }\r\n      } catch {\r\n        /* proceed with single address */\r\n      }\r\n    }\r\n    return await this.transport.splitUtxos(options);\r\n  }\r\n\r\n  /**\r\n   * Consolidate many UTXOs into fewer, larger ones.\r\n   * Reduces wallet fragmentation and prepares for larger transactions.\r\n   *\r\n   * @param {Object} options - Consolidation options\r\n   * @param {string} options.address - Address to consolidate\r\n   * @param {Array} options.privateKeys - Keys from `getPrivateKeys()`\r\n   * @param {number} [options.targetCount=5] - Target number of output UTXOs\r\n   * @param {bigint} [options.priorityFee=0n] - Priority fee\r\n   * @returns {Promise<Object>} Consolidation result\r\n   */\r\n  async consolidateUtxos(options) {\r\n    return await this.transport.consolidateUtxos(options);\r\n  }\r\n\r\n  /**\r\n   * Build a transaction without broadcasting it.\r\n   * @param {Object} options - Transaction options\r\n   * @returns {Promise<Object>} Unsigned transaction\r\n   */\r\n  async buildManualTransaction(options) {\r\n    return await this.transport.buildManualTransaction(options);\r\n  }\r\n\r\n  /**\r\n   * Build a UTXO split transaction without broadcasting it.\r\n   * @param {Object} options - Split options\r\n   * @returns {Promise<Object>} Unsigned split transaction\r\n   */\r\n  async buildSplitUtxoTransaction(options) {\r\n    return await this.transport.buildSplitUtxoTransaction(options);\r\n  }\r\n\r\n  /**\r\n   * Estimate transaction fee based on input/output counts.\r\n   *\r\n   * @param {number} inputCount - Number of inputs\r\n   * @param {number} outputCount - Number of outputs\r\n   * @param {number} [payloadBytes=0] - Payload size in bytes\r\n   * @returns {bigint} Estimated fee in sompi\r\n   */\r\n  estimateFee(inputCount, outputCount, payloadBytes = 0) {\r\n    return this.transport.estimateFee(inputCount, outputCount, payloadBytes);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 5: UTXO MANAGEMENT (Transport Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Fetch UTXOs for an address.\r\n   *\r\n   * @param {string} address - Kaspa address\r\n   * @param {Object} [options] - Fetch options\r\n   * @param {boolean} [options.useCache=false] - Use cached UTXOs if available\r\n   * @param {boolean} [options.excludeSpent=true] - Filter out optimistically spent UTXOs\r\n   * @returns {Promise<Array>} Array of UTXO entries\r\n   */\r\n  async getUtxos(address, options) {\r\n    return await this.transport.getUtxos(address, options);\r\n  }\r\n\r\n  /**\r\n   * Analyze UTXOs for an address - count, categories, and totals.\r\n   *\r\n   * @param {string} address - Kaspa address\r\n   * @returns {Promise<Object>} Analysis with dust/small/medium/large counts\r\n   */\r\n  async analyzeUtxos(address) {\r\n    return await this.transport.analyzeUtxos(address);\r\n  }\r\n\r\n  /**\r\n   * Mark UTXOs as spent for optimistic UI updates.\r\n   * Prevents double-spending during rapid transactions.\r\n   * @param {Array} entries - UTXO entries that were spent\r\n   */\r\n  markUtxosAsSpent(entries) {\r\n    this.transport.markUtxosAsSpent(entries);\r\n  }\r\n\r\n  /**\r\n   * Clear spent UTXO tracking (after confirmation or on refresh).\r\n   * @param {Array} [entries] - Specific entries to clear, or all if omitted\r\n   */\r\n  clearSpentUtxos(entries) {\r\n    this.transport.clearSpentUtxos(entries);\r\n  }\r\n\r\n  /**\r\n   * Invalidate cached UTXOs to force a fresh fetch.\r\n   * @param {string} [address] - Specific address or all if omitted\r\n   */\r\n  invalidateUtxoCache(address) {\r\n    this.transport.invalidateUtxoCache(address);\r\n  }\r\n\r\n  /**\r\n   * Pick the address that has the single largest UTXO.\r\n   * Uses only existing portal methods.\r\n   *\r\n   * @param {Object} [options]\r\n   * @param {string} [options.preferredAddress]\r\n   * @returns {Promise<string|null>}\r\n   */\r\n  async getAddressWithLargestUtxo({ preferredAddress } = {}) {\r\n    const { receiveAddress, changeAddress } = await this.getWalletAddresses();\r\n    const candidates = [receiveAddress, changeAddress, preferredAddress].filter(\r\n      Boolean,\r\n    );\r\n\r\n    if (candidates.length === 0) return null;\r\n\r\n    let best = { address: candidates[0], amount: 0n };\r\n\r\n    for (const addr of candidates) {\r\n      const utxos = await this.getUtxos(addr, {\r\n        useCache: true,\r\n        excludeSpent: true,\r\n      });\r\n      for (const e of utxos || []) {\r\n        const v =\r\n          e?.amount ?? e?.utxoEntry?.amount ?? e?.utxoEntry?.value ?? 0n;\r\n        const a =\r\n          typeof v === \"bigint\"\r\n            ? v\r\n            : typeof v === \"number\"\r\n              ? BigInt(v)\r\n              : BigInt(v || 0);\r\n        if (a > best.amount) best = { address: addr, amount: a };\r\n      }\r\n    }\r\n\r\n    return best.address;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 6: HEARTBEAT (Transport Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Start automatic UTXO monitoring and replenishment.\r\n   * Ensures you always have enough UTXOs for rapid transactions.\r\n   *\r\n   * @param {Object} [options] - Heartbeat options\r\n   * @param {string} [options.address] - Address to monitor (auto-detected if omitted)\r\n   * @param {Array} options.privateKeys - Keys for auto-split transactions\r\n   * @param {number} [options.intervalMs=30000] - Check interval in milliseconds\r\n   * @param {number} [options.targetUtxoCount=10] - Minimum UTXO count to maintain\r\n   * @param {Function} [options.onCheck] - Called on each heartbeat check\r\n   * @param {Function} [options.onSplit] - Called when auto-split occurs\r\n   * @returns {Promise<void>}\r\n   *\r\n   * @example\r\n   * await kaspaPortal.startHeartbeat({\r\n   *   privateKeys: await kaspaPortal.getPrivateKeys(),\r\n   *   targetUtxoCount: 5,\r\n   *   onCheck: ({ utxoCount }) => console.log('UTXOs:', utxoCount)\r\n   * });\r\n   */\r\n  async startHeartbeat(options = {}) {\r\n    const { includeChangeAddress = true, ...restOptions } = options;\r\n\r\n    if (\r\n      !restOptions.addresses &&\r\n      (!restOptions.address ||\r\n        (includeChangeAddress && !restOptions.changeAddress))\r\n    ) {\r\n      try {\r\n        const walletAddresses = await this.getWalletAddresses();\r\n        if (!restOptions.address && walletAddresses.receiveAddress) {\r\n          restOptions.address = walletAddresses.receiveAddress;\r\n        }\r\n        if (\r\n          includeChangeAddress &&\r\n          !restOptions.changeAddress &&\r\n          walletAddresses.changeAddress\r\n        ) {\r\n          restOptions.changeAddress = walletAddresses.changeAddress;\r\n        }\r\n      } catch (err) {\r\n        log.warn(\r\n          \"[KaspaPortal] Failed to auto-detect wallet addresses:\",\r\n          err.message,\r\n        );\r\n      }\r\n    }\r\n\r\n    return this.transport.startHeartbeat(restOptions);\r\n  }\r\n\r\n  /**\r\n   * Stop the heartbeat monitor.\r\n   */\r\n  stopHeartbeat() {\r\n    return this.transport.stopHeartbeat();\r\n  }\r\n\r\n  /**\r\n   * Check if the heartbeat monitor is running.\r\n   * @returns {boolean}\r\n   */\r\n  get isHeartbeatRunning() {\r\n    return this.transport.isHeartbeatRunning;\r\n  }\r\n\r\n  /**\r\n   * Get current heartbeat configuration (excludes private keys).\r\n   * @returns {Object|null}\r\n   */\r\n  get heartbeatConfig() {\r\n    return this.transport.heartbeatConfig;\r\n  }\r\n\r\n  /**\r\n   * Manually trigger a heartbeat check.\r\n   * @returns {Promise<void>}\r\n   */\r\n  async triggerHeartbeat() {\r\n    return await this.transport.triggerHeartbeat();\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 7: INTELLIGENCE - Scanner (Intelligence Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /** @private */\r\n  _ensureIntelligence() {\r\n    if (!this.intelligence) {\r\n      throw new Error(\r\n        \"KaspaPortal: Intelligence not initialized. Call connect().\",\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add an address to the scanner's watch list.\r\n   * Transactions involving this address will trigger events.\r\n   * @param {string} address - Kaspa address to watch\r\n   */\r\n  addAddress(address) {\r\n    this.intelligence?.addAddress(address);\r\n  }\r\n\r\n  /**\r\n   * Remove an address from the watch list.\r\n   * @param {string} address - Address to stop watching\r\n   */\r\n  removeAddress(address) {\r\n    this.intelligence?.removeAddress(address);\r\n  }\r\n\r\n  /**\r\n   * Replace the watch list with a new set of addresses.\r\n   * @param {string|string[]} addresses - Address or array of addresses\r\n   */\r\n  setAddresses(addresses) {\r\n    this.intelligence?.setAddresses(addresses);\r\n  }\r\n\r\n  /**\r\n   * Add a payload prefix to watch for.\r\n   * Transactions with matching OP_RETURN data will trigger events.\r\n   * @param {string} prefix - Prefix to match (e.g., 'KKTP:')\r\n   */\r\n  addPrefix(prefix) {\r\n    this.intelligence?.addPrefix(prefix);\r\n  }\r\n\r\n  /**\r\n   * Add a hex payload prefix to watch for.\r\n   * @param {string} prefixHex - Hex prefix to match\r\n   */\r\n  addPrefixHex(prefixHex) {\r\n    this.intelligence?.addPrefixHex?.(prefixHex);\r\n  }\r\n\r\n  /**\r\n   * Remove a prefix from the watch list.\r\n   * @param {string} prefix - Prefix to stop watching\r\n   */\r\n  removePrefix(prefix) {\r\n    this.intelligence?.removePrefix(prefix);\r\n  }\r\n\r\n  /**\r\n   * Remove a hex prefix from the watch list.\r\n   * @param {string} prefixHex - Hex prefix to stop watching\r\n   */\r\n  removePrefixHex(prefixHex) {\r\n    this.intelligence?.removePrefixHex?.(prefixHex);\r\n  }\r\n\r\n  /**\r\n   * Replace the prefix list with a new set.\r\n   * @param {string|string[]} prefixes - Prefix or array of prefixes\r\n   */\r\n  setPrefixes(prefixes) {\r\n    this.intelligence?.setPrefixes(prefixes);\r\n  }\r\n\r\n  /**\r\n   * Set the scanner's search mode.\r\n   * @param {SearchMode} mode - Search mode enum value\r\n   */\r\n  setSearchMode(mode) {\r\n    this.intelligence?.setSearchMode(mode);\r\n  }\r\n\r\n  /**\r\n   * Set a single scanner prefix (convenience method).\r\n   * @param {string} prefix - Prefix to match\r\n   */\r\n  setScannerPrefix(prefix) {\r\n    this._ensureIntelligence();\r\n    if (this.intelligence.scanner) {\r\n      this.intelligence.scanner.prefix = prefix;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the current scanner prefix.\r\n   * @returns {string|null}\r\n   */\r\n  getScannerPrefix() {\r\n    return this.intelligence?.scanner?.prefix || null;\r\n  }\r\n\r\n  /**\r\n   * Start the live blockchain scanner.\r\n   * @param {Function} [onBlock] - Called for each new block\r\n   * @returns {Promise<void>}\r\n   */\r\n  async startScanner(onBlock) {\r\n    return this.intelligence?.startScanner(onBlock);\r\n  }\r\n\r\n  /**\r\n   * Stop the live blockchain scanner.\r\n   */\r\n  stopScanner() {\r\n    this.intelligence?.stopScanner();\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 8: INTELLIGENCE - Indexer (Intelligence Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Get indexer timing configuration.\r\n   * @returns {{ttlMs: number, flushInterval: number}}\r\n   */\r\n  getIndexerTimings() {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.getIndexerTimings();\r\n  }\r\n\r\n  /**\r\n   * Start the indexer for caching transactions to IndexedDB.\r\n   * @returns {Promise<Object>} Indexer timing info\r\n   */\r\n  async startIndexer() {\r\n    this._ensureIntelligence();\r\n    return await this.intelligence.startIndexer();\r\n  }\r\n\r\n  /**\r\n   * Stop the indexer.\r\n   */\r\n  stopIndexer() {\r\n    this._ensureIntelligence();\r\n    this.intelligence.stopIndexer();\r\n  }\r\n\r\n  /**\r\n   * Shutdown the entire Intelligence layer (scanner + indexer).\r\n   */\r\n  shutdownIntelligence() {\r\n    if (this.intelligence) {\r\n      this.intelligence.shutdown();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get all cached data from IndexedDB.\r\n   * @returns {Promise<{allTxs: Array, matchingTxs: Array, blocks: Array}>}\r\n   */\r\n  async getCachedSnapshot() {\r\n    this._ensureIntelligence();\r\n    return await this.intelligence.getCachedSnapshot();\r\n  }\r\n\r\n  /**\r\n   * Get all in-memory data (not yet persisted).\r\n   * @returns {{allTxs: Array, matchingTxs: Array, blocks: Array}}\r\n   */\r\n  getInMemorySnapshot() {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.getInMemorySnapshot();\r\n  }\r\n\r\n  /**\r\n   * Clear a specific IndexedDB store.\r\n   * @param {IndexerStore} storeName - Store to clear\r\n   * @returns {Promise<void>}\r\n   */\r\n  async clearIndexerStore(storeName) {\r\n    this._ensureIntelligence();\r\n    return await this.intelligence.clearIndexerStore(storeName);\r\n  }\r\n\r\n  /**\r\n   * Get all matching transactions from memory.\r\n   * @returns {Array} Transactions matching your prefix/address filters\r\n   */\r\n  getAllMatchingTransactions() {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.indexer?.getAllMatchingTransactions() || [];\r\n  }\r\n\r\n  /**\r\n   * Get all matching transactions from IndexedDB cache.\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getAllCachedMatchingTransactions() {\r\n    this._ensureIntelligence();\r\n    return await (this.intelligence.indexer?.getAllCachedMatchingTransactions() ||\r\n      Promise.resolve([]));\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 9: INTELLIGENCE - Search & Sync (Intelligence Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Fetch a specific block by its hash.\r\n   *\r\n   * @param {string} blockHash - 64-character hex block hash\r\n   * @returns {Promise<Object|null>} Block data with transactions, or null if not found\r\n   *\r\n   * @example\r\n   * const block = await kaspaPortal.fetchBlockByHash('abc123...');\r\n   * console.log('Transactions:', block.transactions.length);\r\n   */\r\n  async fetchBlockByHash(blockHash) {\r\n    if (!this.transport?.client) {\r\n      throw new Error(\"KaspaPortal: Not connected to network.\");\r\n    }\r\n    if (!blockHash || blockHash.length !== 64) {\r\n      throw new Error(\r\n        \"KaspaPortal: Invalid block hash (must be 64 hex characters).\",\r\n      );\r\n    }\r\n\r\n    try {\r\n      // Kaspa WASM RPC expects IGetBlockRequest: { hash, includeTransactions }\r\n      const response = await this.transport.client.getBlock({\r\n        hash: blockHash,\r\n        includeTransactions: true,\r\n      });\r\n      return response?.block || null;\r\n    } catch (err) {\r\n      log.warn(\r\n        `KaspaPortal: Failed to fetch block ${blockHash.slice(0, 16)}...`,\r\n        err?.message || err,\r\n      );\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /** Walk the DAG from startHash to endHash (or present).\r\n   * @param {Object} options\r\n   * @param {string} options.startHash - Block hash to start from\r\n   * @param {string} [options.endHash] - Optional block hash to end at\r\n   * @param {Array<string>} [options.prefixes] - Optional payload prefixes to match\r\n   * @param {function} options.onMatch - Callback for each matching transaction\r\n   * @param {number} [options.maxSeconds] - Max seconds to run (default 30)\r\n   * @param {number} [options.minTimestamp] - Min timestamp to consider (default 0)\r\n   * @param {function} [options.logFn] - Optional logging function\r\n   * @returns {Promise<void>}\r\n   */\r\n  async walkDagRange(options) {\r\n    if (!this.intelligence)\r\n      throw new Error(\r\n        \"KaspaPortal: Intelligence not initialized. Call connect().\",\r\n      );\r\n    return await this.intelligence.walkDagRange({ ...options });\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 10: INTELLIGENCE - Event Subscriptions\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Subscribe to new block events.\r\n   * @param {Function} cb - Callback receiving block data\r\n   * @returns {this} For chaining\r\n   */\r\n  onNewBlock(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onNewBlock(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to all new transaction events.\r\n   * @param {Function} cb - Callback receiving transaction data\r\n   * @returns {this} For chaining\r\n   */\r\n  onNewTransaction(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onNewTransaction(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to transactions matching your filters (prefix/address).\r\n   * This is the primary event for KKTP message detection.\r\n   *\r\n   * @param {Function} cb - Callback receiving match data\r\n   * @returns {this} For chaining\r\n   *\r\n   * @example\r\n   * kaspaPortal.onNewTransactionMatch((match) => {\r\n   *   console.log('KKTP payload found:', match.payload);\r\n   * });\r\n   */\r\n  onNewTransactionMatch(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onNewTransactionMatch(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to blocks being cached to IndexedDB.\r\n   * @param {Function} cb - Callback\r\n   * @returns {this} For chaining\r\n   */\r\n  onCachedBlock(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onCachedBlock(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to transactions being cached.\r\n   * @param {Function} cb - Callback\r\n   * @returns {this} For chaining\r\n   */\r\n  onCachedTransaction(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onCachedTransaction(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to matching transactions being cached.\r\n   * @param {Function} cb - Callback\r\n   * @returns {this} For chaining\r\n   */\r\n  onCachedTransactionMatch(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onCachedTransactionMatch(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to eviction events (memory cleanup).\r\n   * @param {Function} cb - Callback\r\n   * @returns {this} For chaining\r\n   */\r\n  onEvict(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onEvict(cb);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to cache eviction events (IndexedDB cleanup).\r\n   * @param {Function} cb - Callback\r\n   * @returns {this} For chaining\r\n   */\r\n  onCacheEvict(cb) {\r\n    this._ensureIntelligence();\r\n    return this.intelligence.onCacheEvict(cb);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 11: CRYPTOGRAPHY (Crypto Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Encrypt text with a password using AES-256.\r\n   * @param {string} text - Plaintext to encrypt\r\n   * @param {string} password - Encryption password\r\n   * @returns {string} Encrypted string (base64)\r\n   */\r\n  encrypt(text, password) {\r\n    return this.crypto.encrypt(text, password);\r\n  }\r\n\r\n  /**\r\n   * Decrypt text with a password.\r\n   * @param {string} encrypted - Encrypted string\r\n   * @param {string} password - Decryption password\r\n   * @returns {string} Decrypted plaintext\r\n   */\r\n  decrypt(encrypted, password) {\r\n    return this.crypto.decrypt(encrypted, password);\r\n  }\r\n\r\n  /**\r\n   * Sign a message with a private key.\r\n   * @param {string} privateKeyHex - Private key as hex string\r\n   * @param {string} message - Message to sign\r\n   * @returns {Promise<string>} Signature\r\n   */\r\n  async signMessage(privateKeyHex, message) {\r\n    return await this.crypto.signMessage(privateKeyHex, message);\r\n  }\r\n\r\n  /**\r\n   * Verify a message signature.\r\n   * @param {string} publicKey - Public key\r\n   * @param {string} body - Original message\r\n   * @param {string} sig - Signature to verify\r\n   * @returns {Promise<boolean>} True if valid\r\n   */\r\n  async verifyMessage(publicKey, body, sig) {\r\n    return await this.crypto.verifyMessage(publicKey, body, sig);\r\n  }\r\n\r\n  /**\r\n   * Generate signing and Diffie-Hellman key pairs for KKTP identity.\r\n   *\r\n   * @param {number} index - Derivation index\r\n   * @returns {Promise<{sig: {publicKey, privateKey}, dh: {publicKey, privateKey}}>}\r\n   * @throws {Error} If wallet is not initialized\r\n   */\r\n  async generateIdentityKeys(index) {\r\n    if (!this.identity.wallet?.walletInitialized) {\r\n      throw new Error(\"KaspaPortal: Wallet must be initialized.\");\r\n    }\r\n    const xprv = await this.identity.getXprv();\r\n    if (typeof xprv !== \"string\") {\r\n      throw new Error(`Expected xprv string, got ${typeof xprv}`);\r\n    }\r\n    return await this.crypto.generateIdentityKeys(xprv, index);\r\n  }\r\n\r\n  /**\r\n   * Start a Diffie-Hellman session for encrypted communication.\r\n   *\r\n   * @param {number} index - Derivation index\r\n   * @param {string} [privateKey] - Existing private key (optional)\r\n   * @returns {Promise<Object>} DH session with computeSharedSecret method\r\n   */\r\n  async startSession(index, privateKey) {\r\n    if (!this.identity.wallet?.walletInitialized) {\r\n      throw new Error(\r\n        \"KaspaPortal: Wallet must be initialized before starting a session.\",\r\n      );\r\n    }\r\n    if (privateKey) {\r\n      return this.crypto.createDHSession(privateKey);\r\n    }\r\n    const { dh } = await this.generateIdentityKeys(index);\r\n    return this.crypto.createDHSession(dh.privateKey, dh.publicKey);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // SECTION 12: VRF & RANDOMNESS (VRF Proxy)\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /** Initialize the VRF module */\r\n  async initVRF() {\r\n    if (this.vrf) {\r\n      await this.vrf.init();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate a verifiable random proof using blockchain entropy.\r\n   *\r\n   * @param {Object} options - VRF options\r\n   * @param {string} options.seedInput - Seed value\r\n   * @param {number} [options.btcBlocks=6] - Bitcoin blocks to use\r\n   * @param {number} [options.kasBlocks=12] - Kaspa blocks to use\r\n   * @returns {Promise<{finalOutput: string, proof: Object}>}\r\n   */\r\n  async prove(options) {\r\n    return await this.vrf.prove(options);\r\n  }\r\n\r\n  /**\r\n   * Verify a VRF proof.\r\n   *\r\n   * @param {string|Object} valueOrResult - Value or result object to verify\r\n   * @param {Object} [optionalProof] - Proof if not included in first param\r\n   * @returns {Promise<boolean>} True if valid\r\n   */\r\n  async verify(valueOrResult, optionalProof) {\r\n    return await this.vrf.verify(valueOrResult, optionalProof);\r\n  }\r\n\r\n  /**\r\n   * Fetch recent Kaspa block hashes for entropy.\r\n   * @param {number} n - Number of blocks\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getKaspaBlocks(n) {\r\n    return await this.vrf.getKaspaBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Fetch recent Bitcoin block hashes for entropy.\r\n   * @param {number} n - Number of blocks\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getBitcoinBlocks(n) {\r\n    return await this.vrf.getBitcoinBlocks(n);\r\n  }\r\n\r\n  /**\r\n   * Fetch quantum random numbers from a QRNG provider.\r\n   * @param {string} provider - 'nist', 'anu', or 'qrandom'\r\n   * @param {number} length - Number of bytes\r\n   * @returns {Promise<Array>}\r\n   */\r\n  async getQRNG(provider, length) {\r\n    return await this.vrf.getQRNG(provider, length);\r\n  }\r\n\r\n  /**\r\n   * Fold two entropy sources together.\r\n   * @param {string} data1 - First hex string\r\n   * @param {string} data2 - Second hex string\r\n   * @param {Object} [options] - Folding options\r\n   * @returns {Promise<string>} Folded result\r\n   */\r\n  async fold(data1, data2, options) {\r\n    return await this.vrf.fold(data1, data2, options);\r\n  }\r\n\r\n  /**\r\n   * Shuffle an array using VRF randomness.\r\n   * @param {Array} array - Array to shuffle\r\n   * @returns {Promise<Array>} Shuffled array\r\n   */\r\n  async shuffle(array) {\r\n    return await this.vrf.shuffle(array);\r\n  }\r\n\r\n  /**\r\n   * Run the full NIST SP 800-22 randomness test suite.\r\n   * @param {string} bits - Binary string to test\r\n   * @returns {Promise<Array>} Test results\r\n   */\r\n  async fullNIST(bits) {\r\n    return await this.vrf.fullNIST(bits);\r\n  }\r\n\r\n  /**\r\n   * Run basic NIST randomness tests (subset).\r\n   * @param {string} bits - Binary string to test\r\n   * @returns {Promise<Array>} Test results\r\n   */\r\n  async basicNIST(bits) {\r\n    return await this.vrf.basicNIST(bits);\r\n  }\r\n\r\n  /**\r\n   * Verify a NIST beacon signature.\r\n   * @param {Object} proof - Proof containing NIST data\r\n   * @returns {Promise<boolean>}\r\n   */\r\n  async isValidNistSignature(proof) {\r\n    return await this.vrf.isValidNistSignature(proof);\r\n  }\r\n\r\n  /**\r\n   * Generate high-quality randomness from QRNG, Bitcoin, and Kaspa.\r\n   * @returns {Promise<string>} 64-character hex string\r\n   */\r\n  async generateFullRandomness() {\r\n    const result = await this.vrf.generateFoldedEntropy({\r\n      btcBlocks: 1,\r\n      kasBlocks: 1,\r\n      iterations: 2,\r\n    });\r\n    return result.finalOutput;\r\n  }\r\n\r\n  /**\r\n   * Generate randomness from Bitcoin and Kaspa only (no QRNG).\r\n   * Use as fallback when QRNG is unavailable.\r\n   * @returns {Promise<string>} 64-character hex string\r\n   */\r\n  async generatePartialRandomness() {\r\n    const result = await this.vrf.generatePartialEntropy({\r\n      btcBlocks: 3,\r\n      kasBlocks: 6,\r\n      iterations: 3,\r\n    });\r\n    return result.finalOutput;\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nexport const kaspaPortal = new KaspaPortal();\r\n", "/**\r\n * eventEmitter.js - Minimal event emitter for browser use\r\n */\r\n\r\nimport { Logger, LogModule } from \"./logger.js\";\r\n\r\nconst log = Logger.create(LogModule.core.eventEmitter);\r\n\r\nexport class EventEmitter {\r\n  constructor() {\r\n    this._listeners = new Map();\r\n  }\r\n\r\n  on(event, handler) {\r\n    if (!this._listeners.has(event)) {\r\n      this._listeners.set(event, new Set());\r\n    }\r\n    this._listeners.get(event).add(handler);\r\n    return this;\r\n  }\r\n\r\n  off(event, handler) {\r\n    this._listeners.get(event)?.delete(handler);\r\n    return this;\r\n  }\r\n\r\n  once(event, handler) {\r\n    const wrapper = (...args) => {\r\n      this.off(event, wrapper);\r\n      handler(...args);\r\n    };\r\n    return this.on(event, wrapper);\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    const handlers = this._listeners.get(event);\r\n    if (!handlers) return false;\r\n    for (const handler of handlers) {\r\n      try {\r\n        handler(...args);\r\n      } catch (err) {\r\n        log.error(`EventEmitter handler error for ${event}:`, err);\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  removeAllListeners(event) {\r\n    if (event) {\r\n      this._listeners.delete(event);\r\n    } else {\r\n      this._listeners.clear();\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default EventEmitter;\r\n", "/**\r\n * cryptoUtils.js - Common cryptographic helpers\r\n */\r\n\r\nexport function hexToBytes(hex) {\r\n  if (!hex) return new Uint8Array(0);\r\n  const clean = hex.startsWith('0x') ? hex.slice(2) : hex;\r\n  const len = clean.length;\r\n  if (len % 2 !== 0) throw new Error('Invalid hex string');\r\n  const bytes = new Uint8Array(len / 2);\r\n  for (let i = 0; i < len; i += 2) {\r\n    bytes[i / 2] = parseInt(clean.slice(i, i + 2), 16);\r\n  }\r\n  return bytes;\r\n}\r\n\r\nexport function bytesToHex(bytes) {\r\n  if (!bytes) return '';\r\n  return Array.from(bytes)\r\n    .map(b => b.toString(16).padStart(2, '0'))\r\n    .join('');\r\n}\r\n\r\nfunction fallbackHash(data) {\r\n  let h1 = 0x811c9dc5;\r\n  for (let i = 0; i < data.length; i++) {\r\n    h1 ^= data[i];\r\n    h1 = (h1 * 0x01000193) >>> 0;\r\n  }\r\n  const out = new Uint8Array(32);\r\n  for (let i = 0; i < 32; i++) {\r\n    out[i] = (h1 >> ((i % 4) * 8)) & 0xff;\r\n  }\r\n  return out;\r\n}\r\n\r\nexport async function sha256(data) {\r\n  const bytes = data instanceof Uint8Array ? data : new Uint8Array(data || []);\r\n  if (globalThis.crypto?.subtle) {\r\n    const digest = await globalThis.crypto.subtle.digest('SHA-256', bytes);\r\n    return new Uint8Array(digest);\r\n  }\r\n  return fallbackHash(bytes);\r\n}\r\n\r\n/**\r\n * HMAC-SHA256 using Web Crypto API.\r\n * Both key and data are normalized to Uint8Array internally to prevent\r\n * encoding mismatches between hex strings and raw buffers.\r\n * @param {Uint8Array} key - HMAC key (raw bytes)\r\n * @param {Uint8Array} data - Message data (raw bytes)\r\n * @returns {Promise<Uint8Array>} - 32-byte HMAC digest\r\n */\r\nexport async function hmacSha256(key, data) {\r\n  const keyBytes = key instanceof Uint8Array ? key : new Uint8Array(key || []);\r\n  const dataBytes = data instanceof Uint8Array ? data : new Uint8Array(data || []);\r\n\r\n  if (globalThis.crypto?.subtle) {\r\n    const cryptoKey = await globalThis.crypto.subtle.importKey(\r\n      'raw',\r\n      keyBytes,\r\n      { name: 'HMAC', hash: 'SHA-256' },\r\n      false,\r\n      ['sign'],\r\n    );\r\n    const signature = await globalThis.crypto.subtle.sign('HMAC', cryptoKey, dataBytes);\r\n    return new Uint8Array(signature);\r\n  }\r\n\r\n  // Fallback: manual HMAC construction over sha256 fallback\r\n  const BLOCK_SIZE = 64;\r\n  let k = keyBytes;\r\n  if (k.length > BLOCK_SIZE) {\r\n    k = fallbackHash(k);\r\n  }\r\n  const keyPad = new Uint8Array(BLOCK_SIZE);\r\n  keyPad.set(k);\r\n\r\n  const ipad = new Uint8Array(BLOCK_SIZE);\r\n  const opad = new Uint8Array(BLOCK_SIZE);\r\n  for (let i = 0; i < BLOCK_SIZE; i++) {\r\n    ipad[i] = keyPad[i] ^ 0x36;\r\n    opad[i] = keyPad[i] ^ 0x5c;\r\n  }\r\n\r\n  const inner = new Uint8Array(BLOCK_SIZE + dataBytes.length);\r\n  inner.set(ipad);\r\n  inner.set(dataBytes, BLOCK_SIZE);\r\n  const innerHash = fallbackHash(inner);\r\n\r\n  const outer = new Uint8Array(BLOCK_SIZE + innerHash.length);\r\n  outer.set(opad);\r\n  outer.set(innerHash, BLOCK_SIZE);\r\n  return fallbackHash(outer);\r\n}\r\n\r\nexport default {\r\n  hexToBytes,\r\n  bytesToHex,\r\n  sha256,\r\n  hmacSha256\r\n};\r\n", "/**\r\n * moveProcessor.js - Orchestrates moves, crypto, wallet, and anchor strategy\r\n */\r\n\r\nimport { EventEmitter } from \"../core/eventEmitter.js\";\r\nimport { Logger, LogModule } from \"../core/logger.js\";\r\nimport { bytesToHex, hexToBytes } from \"../core/cryptoUtils.js\";\r\nimport {\r\n  MSG_TYPE, ACTION_TO_CODE, ACTION_CODE, ANCHOR,\r\n  MOVE_ACTION_CODE, encodeCoord14, buildActionMaps,\r\n} from \"../core/constants.js\";\r\nimport { KaspaLink } from \"./wallet/KaspaLink.js\";\r\nimport { UtxoManager } from \"./wallet/UtxoManager.js\";\r\nimport { EntropyProvider } from \"./crypto/EntropyProvider.js\";\r\nimport { VrfManager } from \"./crypto/VrfManager.js\";\r\nimport { BinaryPacker } from \"./protocol/BinaryPacker.js\";\r\nimport { MerkleManager } from \"./protocol/MerkleManager.js\";\r\nimport { MoveVault } from \"./protocol/MoveVault.js\";\r\nimport { StateSerializer } from \"./protocol/StateSerializer.js\";\r\nimport { AuditTrail } from \"./protocol/AuditTrail.js\";\r\nimport { AnchorStrategy } from \"./anchor/AnchorStrategy.js\";\r\n\r\nconst log = Logger.create(LogModule.anchor.moveProcessor);\r\n\r\nexport const MoveEvent = {\r\n  MOVE_PROCESSED: \"moveProcessed\",\r\n  ANCHOR_SENT: \"anchorSent\",\r\n  ANCHOR_FAILED: \"anchorFailed\",\r\n  MOVE_RECEIVED: \"moveReceived\",\r\n  VRF_GENERATED: \"vrfGenerated\",\r\n  VRF_SYNC_WAIT: \"vrfSyncWait\",\r\n  VRF_SYNC_RESOLVED: \"vrfSyncResolved\",\r\n  VALIDATION_FAILED: \"validationFailed\",\r\n  LOW_FUNDS_WARNING: \"lowFundsWarning\",\r\n  UTXO_READY: \"utxoReady\",\r\n  UTXO_REFRESHING: \"utxoRefreshing\",\r\n  UTXO_REFRESH_COMPLETE: \"utxoRefreshComplete\",\r\n  ANCHOR_COMPLETE: \"anchorComplete\",\r\n  ANCHOR_BINARY_READY: \"anchorBinaryReady\",\r\n  ANCHOR_RETRY_NEEDED: \"anchorRetryNeeded\",\r\n  GENESIS_ANCHORED: \"genesisAnchored\",\r\n  GENESIS_ANCHOR_FAILED: \"genesisAnchorFailed\",\r\n  HEARTBEAT_ANCHORED: \"heartbeatAnchored\",\r\n  DELTA_ENTROPY_DETECTED: \"deltaEntropyDetected\",\r\n};\r\n\r\nexport class MoveProcessor extends EventEmitter {\r\n  constructor(options = {}) {\r\n    super();\r\n\r\n    this._adapter = options.adapter ?? options.kaspaAdapter ?? null;\r\n    this._sessionController = options.sessionController ?? null;\r\n\r\n    // Build merged action maps from custom overrides\r\n    this._actionMaps = buildActionMaps({\r\n      actionMap:     options.customActionMap,\r\n      abilitiesMap:  options.customAbilitiesMap,\r\n      actionsMap:    options.customActionsMap,\r\n      itemsMap:      options.customItemsMap,\r\n      statusMap:     options.customStatusMap,\r\n      emotesMap:     options.customEmotesMap,\r\n      systemMap:     options.customSystemMap,\r\n    });\r\n\r\n    this._kaspaLink = new KaspaLink(this._adapter);\r\n    this._vault = new MoveVault();\r\n    this._packer = new BinaryPacker({ actionMaps: this._actionMaps });\r\n    this._merkleManager = new MerkleManager();\r\n    this._opponentMerkleManager = new MerkleManager();\r\n    this._entropyProvider = new EntropyProvider({\r\n      kaspaLink: this._kaspaLink,\r\n      sessionController: this._sessionController,\r\n    });\r\n    this._vrf = new VrfManager({\r\n      kaspaLink: this._kaspaLink,\r\n      entropyProvider: this._entropyProvider,\r\n      onDeltaEntropy: (payload) => this.emit(MoveEvent.DELTA_ENTROPY_DETECTED, payload),\r\n    });\r\n    this._wallet = new UtxoManager({\r\n      kaspaLink: this._kaspaLink,\r\n      onEvent: (event, payload) => this.emit(event, payload),\r\n    });\r\n    this._anchorStrategy = new AnchorStrategy({\r\n      kaspaLink: this._kaspaLink,\r\n      wallet: this._wallet,\r\n      packer: this._packer,\r\n      merkleManager: this._merkleManager,\r\n      vault: this._vault,\r\n      vrf: this._vrf,\r\n      onEvent: (event, payload) => this.emit(event, payload),\r\n    });\r\n    this._auditTrail = new AuditTrail({ kaspaLink: this._kaspaLink, packer: this._packer });\r\n    this._stateSerializer = new StateSerializer();\r\n\r\n    this._gameId = null;\r\n    this._gameIdTagHex = null;\r\n    this._playerId = null;\r\n    this._opponentId = null;\r\n    this._lobbyId = null;\r\n\r\n    this._moveSequence = 0;\r\n    this._prevMoveTimestamp = 0;\r\n    this._opponentPrevTimestamp = 0;\r\n\r\n    this._finalScore = 0;\r\n    this._coinsCollected = 0;\r\n\r\n    this._binaryAnchor = null;\r\n\r\n    this._vrfSyncWait = false;\r\n    this._isActive = false;\r\n\r\n    if (this._adapter) {\r\n      this.setAdapter(this._adapter);\r\n    }\r\n  }\r\n\r\n  setAdapter(adapter) {\r\n    this._adapter = adapter;\r\n    this._kaspaLink.setAdapter(adapter);\r\n    this._entropyProvider.setKaspaLink(this._kaspaLink);\r\n    this._entropyProvider.subscribeToBlocks();\r\n    this._vrf.setKaspaLink(this._kaspaLink);\r\n    this._wallet.setKaspaLink(this._kaspaLink);\r\n    this._anchorStrategy.setKaspaLink(this._kaspaLink);\r\n    this._auditTrail.setKaspaLink(this._kaspaLink);\r\n    log.debug(\"KaspaAdapter set\");\r\n  }\r\n\r\n  setSessionController(sessionController) {\r\n    this._sessionController = sessionController;\r\n    this._entropyProvider.setSessionController(sessionController);\r\n    log.debug(\"SessionController set\");\r\n  }\r\n\r\n  get isDegradedMode() {\r\n    return this._wallet.isDegradedMode;\r\n  }\r\n\r\n  get isUtxoReady() {\r\n    return this._wallet.isUtxoReady;\r\n  }\r\n\r\n  get balanceKas() {\r\n    return this._wallet.balanceKas;\r\n  }\r\n\r\n  get runwayMoves() {\r\n    return this._wallet.runwayMoves;\r\n  }\r\n\r\n  getPoolStatus() {\r\n    return this._wallet.getPoolStatus();\r\n  }\r\n\r\n  async ensureUtxoPoolReady(options = {}) {\r\n    return this._wallet.ensurePoolReady(options);\r\n  }\r\n\r\n  get binaryAnchor() {\r\n    return this._binaryAnchor;\r\n  }\r\n\r\n  get genesisTxId() {\r\n    return this._anchorStrategy.getAnchorState().genesisTxId;\r\n  }\r\n\r\n  get lastAnchorTxId() {\r\n    return this._anchorStrategy.getAnchorState().lastAnchorTxId;\r\n  }\r\n\r\n  get anchorChain() {\r\n    return this._anchorStrategy.getAnchorState().anchorChain;\r\n  }\r\n\r\n  get genesisEntropy() {\r\n    return this._anchorStrategy.getAnchorState().genesisEntropy;\r\n  }\r\n\r\n  get isGenesisAnchored() {\r\n    return this.genesisTxId !== null;\r\n  }\r\n\r\n  get gameIdTagHex() {\r\n    return this._gameIdTagHex;\r\n  }\r\n\r\n  _computeGameIdTagHex(gameId) {\r\n    if (!gameId) return \"00000000\";\r\n    let hash = 0x811c9dc5;\r\n    for (let i = 0; i < gameId.length; i++) {\r\n      hash ^= gameId.charCodeAt(i);\r\n      hash = Math.imul(hash, 0x01000193) >>> 0;\r\n    }\r\n    const bytes = new Uint8Array(4);\r\n    bytes[0] = (hash >>> 24) & 0xff;\r\n    bytes[1] = (hash >>> 16) & 0xff;\r\n    bytes[2] = (hash >>> 8) & 0xff;\r\n    bytes[3] = hash & 0xff;\r\n    return bytesToHex(bytes);\r\n  }\r\n\r\n  start(options) {\r\n    this._gameId = options.gameId;\r\n    this._playerId = options.playerId;\r\n    this._opponentId = options.opponentId ?? null;\r\n    this._lobbyId = options.lobbyId ?? null;\r\n    this._gameIdTagHex = this._computeGameIdTagHex(this._gameId);\r\n\r\n    this._moveSequence = 0;\r\n    this._merkleManager.reset();\r\n    this._opponentMerkleManager.reset();\r\n    this._vault.resetForNewGame();\r\n    this._prevMoveTimestamp = 0;\r\n    this._opponentPrevTimestamp = 0;\r\n    this._finalScore = 0;\r\n    this._coinsCollected = 0;\r\n    this._binaryAnchor = null;\r\n    this._vrfSyncWait = false;\r\n\r\n    this._vrf.setGameContext({ gameId: this._gameId, playerId: this._playerId });\r\n    this._anchorStrategy.setGameContext({\r\n      gameId: this._gameId,\r\n      gameIdTagHex: this._gameIdTagHex,\r\n    });\r\n    this._anchorStrategy.start();\r\n\r\n    // Listen for genesis confirmation to reinforce VRF chain\r\n    this._genesisHandler = ({ txId }) => {\r\n      this._vrf.setGenesisTxId(txId);\r\n    };\r\n    this.on(MoveEvent.GENESIS_ANCHORED, this._genesisHandler);\r\n\r\n    this._isActive = true;\r\n\r\n    log.info(\"MoveProcessor started\", {\r\n      gameId: this._gameId,\r\n      playerId: this._playerId,\r\n      opponentId: this._opponentId,\r\n      degradedMode: this._wallet.isDegradedMode,\r\n    });\r\n  }\r\n\r\n  async stop() {\r\n    this._isActive = false;\r\n    this._anchorStrategy.stop();\r\n    this._entropyProvider.cleanup();\r\n    this._vrf.resetState();\r\n\r\n    // Remove genesis listener to prevent leaks\r\n    if (this._genesisHandler) {\r\n      this.off(MoveEvent.GENESIS_ANCHORED, this._genesisHandler);\r\n      this._genesisHandler = null;\r\n    }\r\n\r\n    this._vault.clearForStop();\r\n\r\n    this._merkleManager.clear();\r\n    this._opponentMerkleManager.clear();\r\n\r\n    this._binaryAnchor = null;\r\n    this._vrfSyncWait = false;\r\n\r\n    log.info(\"MoveProcessor stopped with full cleanup\");\r\n  }\r\n\r\n  async processLocalMove(action, data = {}) {\r\n    if (!this._isActive) {\r\n      throw new Error(\"MoveProcessor not active\");\r\n    }\r\n\r\n    if (!this.genesisTxId) {\r\n      log.warn(\"Genesis anchor not yet sent - move will still be processed (lazy VRF seed)\");\r\n    }\r\n\r\n    const timestamp = Date.now();\r\n    const sequence = ++this._moveSequence;\r\n\r\n    // \u2500\u2500 Compute timeDelta BEFORE VRF call so it's part of the fold input \u2500\u2500\r\n    const prevTimestamp =\r\n      this._vault.getMoveHistory().length > 0\r\n        ? this._vault.getMoveHistory()[this._vault.getMoveHistory().length - 1].timestamp\r\n        : timestamp;\r\n    const deltaMs = Math.max(0, timestamp - prevTimestamp);\r\n    const timeDelta = Math.min(255, Math.floor(deltaMs / ANCHOR.TIME_DELTA_SCALE));\r\n\r\n    let vrfOutput = null;\r\n    let vrfOutputBytes = null;\r\n    let currentBlockHash = null;\r\n    let currentBlockHashHex = \"\";\r\n    let entropySnapshot = null;\r\n\r\n    const actionCode = this._actionMaps.actionToCode[action] ?? ACTION_CODE.NONE;\r\n    const isMove = actionCode === MOVE_ACTION_CODE;\r\n\r\n    // For MOVE actions, encode x/y/z as 14-bit raw integers\r\n    const xRaw = isMove ? encodeCoord14(data.x) : undefined;\r\n    const yRaw = isMove ? encodeCoord14(data.y) : undefined;\r\n    const zRaw = isMove ? encodeCoord14(data.z) : undefined;\r\n\r\n    try {\r\n      const vrfResult = await this._vrf.updateStateForMove({\r\n        action,\r\n        lane: isMove ? undefined : (data.lane ?? 0),\r\n        timeDelta,\r\n        sequence,\r\n        timestamp,\r\n        // v5: pass coordinates for MOVE so they are folded into VRF chain\r\n        x: xRaw,\r\n        y: yRaw,\r\n        z: zRaw,\r\n      });\r\n\r\n      vrfOutput = vrfResult.vrfOutput;\r\n      vrfOutputBytes = vrfResult.vrfOutputBytes;\r\n      currentBlockHash = vrfResult.blockHash;\r\n      currentBlockHashHex = vrfResult.blockHashHex;\r\n      entropySnapshot = vrfResult.entropySnapshot;\r\n\r\n      this.emit(MoveEvent.VRF_GENERATED, { sequence, vrfOutput, currentBlockHashHex });\r\n\r\n      if (this._vrfSyncWait) {\r\n        this._vrfSyncWait = false;\r\n        this.emit(MoveEvent.VRF_SYNC_RESOLVED, { sequence });\r\n      }\r\n    } catch (e) {\r\n      const message = e?.message || \"VRF REQUIRED: move proof failed\";\r\n      if (message.includes(\"VRF REQUIRED: no live block hash available\")) {\r\n        if (!this._vrfSyncWait) {\r\n          this._vrfSyncWait = true;\r\n          this.emit(MoveEvent.VRF_SYNC_WAIT, { sequence, error: message });\r\n        }\r\n      }\r\n      throw e;\r\n    }\r\n\r\n    const vrfFragment =\r\n      vrfOutputBytes && vrfOutputBytes.length >= 4\r\n        ? bytesToHex(vrfOutputBytes.slice(0, 4))\r\n        : \"\";\r\n\r\n    const move = {\r\n      type: MSG_TYPE.MOVE,\r\n      gameId: this._gameId,\r\n      playerId: this._playerId,\r\n      action,\r\n      sequence,\r\n      timestamp,\r\n      vrfOutput,\r\n      currentBlockHash: currentBlockHashHex,\r\n      ...data,\r\n    };\r\n\r\n    // Dual-path merkle leaf: MOVE uses { action, x, y, z, timeDelta, vrfFragment }\r\n    const merkleLeaf = isMove\r\n      ? { action, x: xRaw, y: yRaw, z: zRaw, timeDelta, vrfFragment }\r\n      : { action, lane: data.lane ?? 0, timeDelta, vrfFragment };\r\n    const merkleResult = this._merkleManager.addMove(merkleLeaf);\r\n\r\n    move.merkleIndex = merkleResult.index;\r\n    move.merkleHash = merkleResult.hash;\r\n    move.moveId = merkleResult.moveId;\r\n    move.merkleRoot = this._merkleManager.getRoot();\r\n\r\n    this._vault.addProcessedMove(move.moveId, move);\r\n\r\n    const vaultEntry = {\r\n      sequence: this._vault.getMoveHistory().length,\r\n      action,\r\n      timestamp,\r\n      timeDelta,\r\n      vrfOutput: vrfOutput ?? null,\r\n      vrfFragment,\r\n      vrfOutputBytes: vrfOutputBytes ?? new Uint8Array(32),\r\n      leafHash: merkleResult.hash,\r\n      kaspaBlockHash: currentBlockHash,\r\n      kaspaBlockHashHex: currentBlockHashHex,\r\n      entropySnapshot: entropySnapshot ?? null,\r\n    };\r\n\r\n    if (isMove) {\r\n      vaultEntry.x = xRaw;\r\n      vaultEntry.y = yRaw;\r\n      vaultEntry.z = zRaw;\r\n    } else {\r\n      vaultEntry.lane = data.lane ?? 0;\r\n    }\r\n\r\n    this._vault.addMove(vaultEntry);\r\n\r\n    if (vrfOutput) {\r\n      const vrfProofEntry = {\r\n        moveIndex: sequence,\r\n        action,\r\n        timestamp,\r\n        vrfOutput: vrfOutput ?? null,\r\n        proof: null,\r\n        blockHash: currentBlockHashHex,\r\n        entropySnapshot: entropySnapshot ?? null,\r\n      };\r\n      if (isMove) {\r\n        vrfProofEntry.x = xRaw;\r\n        vrfProofEntry.y = yRaw;\r\n        vrfProofEntry.z = zRaw;\r\n      } else {\r\n        vrfProofEntry.lane = data.lane ?? 0;\r\n      }\r\n      this._vault.addVrfProof(vrfProofEntry);\r\n    }\r\n\r\n    this._prevMoveTimestamp = timestamp;\r\n\r\n    log.debug(\"Move processed (v5 union protocol)\", {\r\n      moveId: move.moveId,\r\n      merkleIndex: move.merkleIndex,\r\n      root: move.merkleRoot?.substring(0, 16),\r\n      blockHash: currentBlockHashHex.substring(0, 16),\r\n      genesisReinforced: entropySnapshot?.isGenesisReinforced ?? false,\r\n    });\r\n\r\n    this.emit(MoveEvent.MOVE_PROCESSED, move);\r\n    return move;\r\n  }\r\n\r\n  processGameEvent(eventType, data = {}) {\r\n    if (!this._isActive) {\r\n      log.trace(\"MoveProcessor not active, skipping game event\");\r\n      return null;\r\n    }\r\n\r\n    const timestamp = Date.now();\r\n    const sequence = this._vault.getMoveHistory().length;\r\n    const eventCode = ACTION_TO_CODE[eventType] ?? ACTION_CODE.NONE;\r\n    const currentBlock = this._entropyProvider.getCachedBlockHash();\r\n\r\n    const event = {\r\n      sequence,\r\n      action: eventType,\r\n      lane: data.lane ?? 0,\r\n      timestamp,\r\n      vrfOutput: null,\r\n      vrfOutputBytes: new Uint8Array(32),\r\n      vrfProof: null,\r\n      leafHash: null,\r\n      kaspaBlockHash: currentBlock.hash,\r\n      kaspaBlockHashHex: currentBlock.hex,\r\n      isGameEvent: true,\r\n      eventType,\r\n      eventData: {\r\n        value: data.value ?? 0,\r\n        total: data.total ?? data.coinsRemaining ?? 0,\r\n        coinsLost: data.coinsLost ?? 0,\r\n        coinsRemaining: data.coinsRemaining ?? data.total ?? 0,\r\n        powerupType: data.type?.id ?? data.powerupType ?? null,\r\n        duration: data.duration ?? 0,\r\n      },\r\n    };\r\n\r\n    this._vault.addGameEvent(event);\r\n    this._prevMoveTimestamp = timestamp;\r\n\r\n    log.trace(\"Game event processed\", {\r\n      eventType,\r\n      eventCode,\r\n      lane: event.lane,\r\n      sequence,\r\n    });\r\n\r\n    return event;\r\n  }\r\n\r\n  async receiveOpponentMove(moveData) {\r\n    if (!this._isActive) {\r\n      return { valid: false, reason: \"not_active\" };\r\n    }\r\n\r\n    log.debug(\"Receiving opponent move\", {\r\n      sequence: moveData.sequence,\r\n      action: moveData.action,\r\n    });\r\n\r\n    if (!moveData.moveId || !moveData.action) {\r\n      log.warn(\"Invalid opponent move format\", moveData);\r\n      this.emit(MoveEvent.VALIDATION_FAILED, {\r\n        reason: \"invalid_format\",\r\n        move: moveData,\r\n      });\r\n      return { valid: false, reason: \"invalid_format\" };\r\n    }\r\n\r\n    if (this._vault.hasProcessedMove(moveData.moveId)) {\r\n      log.debug(\"Duplicate move ignored\", { moveId: moveData.moveId });\r\n      return { valid: false, reason: \"duplicate\" };\r\n    }\r\n\r\n    if (moveData.playerId !== this._opponentId) {\r\n      log.warn(\"Move from wrong player\", {\r\n        expected: this._opponentId,\r\n        got: moveData.playerId,\r\n      });\r\n      return { valid: false, reason: \"wrong_player\" };\r\n    }\r\n\r\n    const opponentTimestamp = Number.isFinite(moveData.timestamp) ? moveData.timestamp : Date.now();\r\n    const opponentPrev = this._opponentPrevTimestamp || opponentTimestamp;\r\n    const opponentDeltaMs = Math.max(0, opponentTimestamp - opponentPrev);\r\n    const opponentTimeDelta = Math.min(255, Math.floor(opponentDeltaMs / ANCHOR.TIME_DELTA_SCALE));\r\n    const opponentVrfFragment = typeof moveData.vrfOutput === \"string\" ? moveData.vrfOutput.slice(0, 8) : \"\";\r\n\r\n    const oppActionCode = this._actionMaps.actionToCode[moveData.action] ?? ACTION_CODE.NONE;\r\n    const oppIsMove = oppActionCode === MOVE_ACTION_CODE;\r\n\r\n    const oppMerkleLeaf = oppIsMove\r\n      ? {\r\n          action: moveData.action,\r\n          x: moveData.xRaw ?? (moveData.x != null ? encodeCoord14(moveData.x) : 0),\r\n          y: moveData.yRaw ?? (moveData.y != null ? encodeCoord14(moveData.y) : 0),\r\n          z: moveData.zRaw ?? (moveData.z != null ? encodeCoord14(moveData.z) : 0),\r\n          timeDelta: opponentTimeDelta,\r\n          vrfFragment: opponentVrfFragment,\r\n        }\r\n      : {\r\n          action: moveData.action,\r\n          lane: moveData.lane ?? 0,\r\n          timeDelta: opponentTimeDelta,\r\n          vrfFragment: opponentVrfFragment,\r\n        };\r\n\r\n    this._opponentMerkleManager.addMove(oppMerkleLeaf);\r\n\r\n    this._opponentPrevTimestamp = opponentTimestamp;\r\n    this._vault.addProcessedMove(moveData.moveId, moveData);\r\n\r\n    log.debug(\"Opponent move validated\", { moveId: moveData.moveId });\r\n    this.emit(MoveEvent.MOVE_RECEIVED, moveData);\r\n\r\n    return { valid: true, move: moveData };\r\n  }\r\n\r\n  getMerkleProof(index) {\r\n    return this._merkleManager.getProof(index);\r\n  }\r\n\r\n  getMerkleRoot() {\r\n    return this._merkleManager.getRoot();\r\n  }\r\n\r\n  getAllMoves() {\r\n    return this._merkleManager.getAllMoves();\r\n  }\r\n\r\n  getMoveCount() {\r\n    return this._merkleManager.size;\r\n  }\r\n\r\n  getMerkleLeaves() {\r\n    return this._merkleManager.getLeaves();\r\n  }\r\n\r\n  getMoveHistory() {\r\n    return this._vault.getMoveHistory();\r\n  }\r\n\r\n  serialize() {\r\n    return this._stateSerializer.serialize({\r\n      gameId: this._gameId,\r\n      playerId: this._playerId,\r\n      opponentId: this._opponentId,\r\n      moveSequence: this._moveSequence,\r\n      merkleManager: this._merkleManager,\r\n      moveHistory: this._vault.getMoveHistory(),\r\n    });\r\n  }\r\n\r\n  async anchorGenesisSeed(options = {}) {\r\n    return await this._anchorStrategy.anchorGenesisSeed(options);\r\n  }\r\n\r\n  async _sendHeartbeatAnchor(options = {}) {\r\n    return await this._anchorStrategy.sendHeartbeatAnchor(options);\r\n  }\r\n\r\n  async anchorFinalState(endState, options = {}) {\r\n    this._finalScore = endState?.score ?? 0;\r\n    this._coinsCollected = endState?.coins ?? endState?.coinsCollected ?? 0;\r\n\r\n    const result = await this._anchorStrategy.anchorFinalState(endState, options);\r\n    if (result?.binaryAnchor) {\r\n      this._binaryAnchor = result.binaryAnchor;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  async retryFinalAnchor() {\r\n    return await this._anchorStrategy.retryFinalAnchor();\r\n  }\r\n\r\n  async prepareForGame() {\r\n    return await this._wallet.prepareForGame();\r\n  }\r\n\r\n  async getRunway() {\r\n    return await this._wallet.getRunway();\r\n  }\r\n\r\n  async getBalanceKas() {\r\n    return await this._wallet.getBalanceKas();\r\n  }\r\n\r\n  getAuditData(options = {}) {\r\n    return this._auditTrail.getAuditData(options, {\r\n      gameId: this._gameId,\r\n      resolvedGameIdTagHex: this._gameIdTagHex,\r\n      sessionController: this._sessionController,\r\n      anchorState: {\r\n        ...this._anchorStrategy.getAnchorState(),\r\n        playerId: this._playerId,\r\n        opponentId: this._opponentId,\r\n      },\r\n      vault: this._vault,\r\n      merkleManager: this._merkleManager,\r\n      opponentMerkleManager: this._opponentMerkleManager,\r\n      finalScore: this._finalScore,\r\n      coinsCollected: this._coinsCollected,\r\n      getBinaryAnchor: () => this._binaryAnchor,\r\n      setBinaryAnchor: (anchor) => {\r\n        this._binaryAnchor = anchor;\r\n      },\r\n    });\r\n  }\r\n\r\n  async getAuditDataFromDag(options = {}) {\r\n    return await this._auditTrail.getAuditDataFromDag(options, {\r\n      gameId: this._gameId,\r\n      resolvedGameIdTagHex: this._gameIdTagHex,\r\n      computeGameIdTagHex: (gameId) => this._computeGameIdTagHex(gameId),\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.stop();\r\n\r\n    this._adapter = null;\r\n    this._sessionController = null;\r\n    this.removeAllListeners();\r\n\r\n    log.info(\"MoveProcessor destroyed\");\r\n  }\r\n}\r\n\r\nexport default MoveProcessor;\r\n", "/**\r\n * KaspaLink.js - Adapter bridge\r\n */\r\n\r\nexport class KaspaLink {\r\n  constructor(adapter = null) {\r\n    this._adapter = adapter;\r\n  }\r\n\r\n  setAdapter(adapter) {\r\n    this._adapter = adapter;\r\n  }\r\n\r\n  get adapter() {\r\n    return this._adapter;\r\n  }\r\n\r\n  get address() {\r\n    return this._adapter?.address?.toString?.() ?? null;\r\n  }\r\n\r\n  _requireAdapter(action) {\r\n    if (!this._adapter) {\r\n      throw new Error(`KaspaAdapter not set (${action})`);\r\n    }\r\n    return this._adapter;\r\n  }\r\n\r\n  async manualSend(params) {\r\n    return await this._requireAdapter(\"manualSend\").manualSend(params);\r\n  }\r\n\r\n  async getBalance(address) {\r\n    return await this._requireAdapter(\"getBalance\").getBalance(address);\r\n  }\r\n\r\n  async getPrivateKeys(params) {\r\n    return await this._requireAdapter(\"getPrivateKeys\").getPrivateKeys(params);\r\n  }\r\n\r\n  async splitUtxos(params) {\r\n    return await this._requireAdapter(\"splitUtxos\").splitUtxos(params);\r\n  }\r\n\r\n  startHeartbeat(params) {\r\n    return this._requireAdapter(\"startHeartbeat\").startHeartbeat(params);\r\n  }\r\n\r\n  stopHeartbeat() {\r\n    return this._requireAdapter(\"stopHeartbeat\").stopHeartbeat();\r\n  }\r\n\r\n  async getUtxos(address) {\r\n    return await this._requireAdapter(\"getUtxos\").getUtxos(address);\r\n  }\r\n\r\n  async consolidateUtxos(params) {\r\n    return await this._requireAdapter(\"consolidateUtxos\").consolidateUtxos(params);\r\n  }\r\n\r\n  async walkDagRange(params) {\r\n    return await this._requireAdapter(\"walkDagRange\").walkDagRange(params);\r\n  }\r\n\r\n  async getBitcoinBlocks() {\r\n    const adapter = this._adapter;\r\n    if (!adapter?.getBitcoinBlocks) return null;\r\n    return await adapter.getBitcoinBlocks();\r\n  }\r\n\r\n  async getQRNG() {\r\n    const adapter = this._adapter;\r\n    if (!adapter?.getQRNG) return null;\r\n    return await adapter.getQRNG();\r\n  }\r\n\r\n  async prove(params) {\r\n    return await this._requireAdapter(\"prove\").prove(params);\r\n  }\r\n\r\n  onNewBlock(handler) {\r\n    const adapter = this._adapter;\r\n    if (!adapter?.onNewBlock) return null;\r\n    return adapter.onNewBlock(handler);\r\n  }\r\n\r\n  startScanner() {\r\n    const adapter = this._adapter;\r\n    return adapter?.startScanner?.();\r\n  }\r\n\r\n  setHeartbeatAnchorsEnabled(enabled) {\r\n    return this._adapter?.setHeartbeatAnchorsEnabled?.(enabled);\r\n  }\r\n}\r\n\r\nexport default KaspaLink;\r\n", "/**\r\n * UtxoManager.js - Event-driven UTXO management with pre-split pool\r\n *\r\n * Key design principles:\r\n * - ZERO network fetches during prepareForGame() - instant check\r\n * - Pool is populated during lobby join (before game start)\r\n * - Degraded mode only when pool is truly empty\r\n * - Wallet events add new UTXOs to pool automatically\r\n */\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\nimport { BLOCKCHAIN } from \"../../core/constants.js\";\r\nimport { UtxoPool, PoolEvent } from \"./UtxoPool.js\";\r\n\r\nconst log = Logger.create(LogModule.anchor.utxoManager);\r\n\r\nexport class UtxoManager {\r\n  constructor({ kaspaLink, onEvent } = {}) {\r\n    this._kaspaLink = kaspaLink ?? null;\r\n    this._onEvent = typeof onEvent === \"function\" ? onEvent : () => {};\r\n\r\n    this._address = null;\r\n    this._privateKeys = null;\r\n\r\n    // Pool-based state (replaces balance-based checks)\r\n    this._pool = new UtxoPool({\r\n      minPoolSize: BLOCKCHAIN.UTXO_SPLIT_COUNT,\r\n      lowThreshold: BLOCKCHAIN.UTXO_LOW_THRESHOLD ?? 3,\r\n      onEvent: (event, data) => this._handlePoolEvent(event, data),\r\n    });\r\n\r\n    this._poolReady = false;\r\n    this._splitInProgress = false;\r\n    this._balanceKas = 0;\r\n    this._backgroundHeartbeatActive = false;\r\n  }\r\n\r\n  setKaspaLink(kaspaLink) {\r\n    this._kaspaLink = kaspaLink;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Public Getters\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  get isDegradedMode() {\r\n    return this._pool.isDegraded;\r\n  }\r\n\r\n  get isUtxoReady() {\r\n    return this._pool.isReady;\r\n  }\r\n\r\n  get balanceKas() {\r\n    return this._balanceKas;\r\n  }\r\n\r\n  get runwayMoves() {\r\n    // Runway = available UTXOs (each can send ~1 anchor)\r\n    return this._pool.availableCount;\r\n  }\r\n\r\n  /**\r\n   * Get pool reference for direct access (AnchorStrategy uses this)\r\n   */\r\n  get pool() {\r\n    return this._pool;\r\n  }\r\n\r\n  getWalletInfo() {\r\n    const status = this._pool.getStatus();\r\n    return {\r\n      address: this._address,\r\n      privateKeys: this._privateKeys,\r\n      utxoReady: status.isReady,\r\n      degradedMode: status.isDegraded,\r\n      balanceKas: this._balanceKas,\r\n      runwayMoves: status.available,\r\n      poolStatus: status,\r\n    };\r\n  }\r\n\r\n  getPoolStatus() {\r\n    return this._pool.getStatus();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Lobby Phase: Ensure Pool Ready (Async, Called During Lobby Join)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Ensure UTXO pool is ready for gameplay.\r\n   * Called during lobby join/create - has time to complete before game starts.\r\n   * This is the ONLY place that fetches from network.\r\n   *\r\n   * @param {Object} options\r\n   * @param {boolean} [options.skipIfReady=true] - Skip split if pool already has UTXOs\r\n   * @returns {Promise<{success: boolean, poolStatus: Object}>}\r\n   */\r\n  async ensurePoolReady(options = {}) {\r\n    const { skipIfReady = true } = options;\r\n\r\n    if (!this._kaspaLink) {\r\n      throw new Error(\"KaspaLink not set\");\r\n    }\r\n\r\n    await this._ensureCredentials({ requirePrivateKeys: true });\r\n\r\n    // If pool already has UTXOs, we're good\r\n    if (skipIfReady && this._pool.availableCount >= BLOCKCHAIN.UTXO_SPLIT_COUNT) {\r\n      log.info(\"Pool already ready\", { available: this._pool.availableCount });\r\n      this._poolReady = true;\r\n      return { success: true, poolStatus: this._pool.getStatus() };\r\n    }\r\n\r\n    // Fetch current UTXOs and populate pool\r\n    try {\r\n      const utxos = await this._kaspaLink.getUtxos(this._address);\r\n      const usableUtxos = this._filterUsableUtxos(utxos);\r\n\r\n      if (usableUtxos.length > 0) {\r\n        const added = this._pool.addBatch(usableUtxos);\r\n        log.info(\"Existing UTXOs added to pool\", { found: usableUtxos.length, added });\r\n      }\r\n\r\n      // If we have enough UTXOs, no need to split\r\n      if (this._pool.availableCount >= BLOCKCHAIN.UTXO_SPLIT_COUNT) {\r\n        log.info(\"Pool ready from existing UTXOs\", { available: this._pool.availableCount });\r\n        this._poolReady = true;\r\n        this._onEvent(\"gameReady\", { poolStatus: this._pool.getStatus() });\r\n        return { success: true, poolStatus: this._pool.getStatus() };\r\n      }\r\n\r\n      // Need to split - do it now during lobby phase\r\n      return await this._splitUtxosIntoPool();\r\n    } catch (e) {\r\n      log.error(\"Failed to ensure pool ready\", e);\r\n      return { success: false, poolStatus: this._pool.getStatus(), error: e.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Split UTXOs and add to pool\r\n   * @private\r\n   */\r\n  async _splitUtxosIntoPool() {\r\n    if (this._splitInProgress) {\r\n      log.debug(\"Split already in progress, waiting...\");\r\n      // Wait for existing split to complete\r\n      await new Promise((r) => setTimeout(r, 100));\r\n      return { success: this._pool.isReady, poolStatus: this._pool.getStatus() };\r\n    }\r\n\r\n    this._splitInProgress = true;\r\n\r\n    try {\r\n      log.info(\"Splitting UTXOs into pool...\", { target: BLOCKCHAIN.UTXO_SPLIT_COUNT });\r\n\r\n      await this._kaspaLink.splitUtxos({\r\n        address: this._address,\r\n        splitCount: BLOCKCHAIN.UTXO_SPLIT_COUNT,\r\n        privateKeys: this._privateKeys,\r\n        priorityFee: 0n,\r\n      });\r\n\r\n      log.info(\"UTXO split complete, fetching new UTXOs...\");\r\n\r\n      // Fetch the newly created UTXOs\r\n      const utxos = await this._kaspaLink.getUtxos(this._address);\r\n      const usableUtxos = this._filterUsableUtxos(utxos);\r\n      const added = this._pool.addBatch(usableUtxos);\r\n\r\n      log.info(\"Split UTXOs added to pool\", { added, available: this._pool.availableCount });\r\n\r\n      this._poolReady = this._pool.isReady;\r\n\r\n      if (this._poolReady) {\r\n        this._onEvent(\"gameReady\", { poolStatus: this._pool.getStatus() });\r\n      }\r\n\r\n      return { success: this._poolReady, poolStatus: this._pool.getStatus() };\r\n    } catch (e) {\r\n      log.error(\"UTXO split failed\", e);\r\n      return { success: false, poolStatus: this._pool.getStatus(), error: e.message };\r\n    } finally {\r\n      this._splitInProgress = false;\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Game Phase: Instant Check (No Network Calls)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Prepare for game - INSTANT, no network calls.\r\n   * Pool should already be populated from ensurePoolReady() during lobby.\r\n   *\r\n   * @returns {boolean} True if ready to play\r\n   */\r\n  async prepareForGame() {\r\n    log.info(\"Preparing UTXOs for game...\");\r\n\r\n    const status = this._pool.getStatus();\r\n\r\n    // Instant check - no network calls\r\n    if (status.available > 0) {\r\n      log.info(\"UTXOs ready (instant)\", { available: status.available });\r\n      this._onEvent(\"utxoReady\", { poolStatus: status });\r\n      return true;\r\n    }\r\n\r\n    // Pool empty - try quick recovery from wallet\r\n    // This is a fallback; normally pool should be populated during lobby\r\n    log.warn(\"Pool empty at game start, attempting recovery...\");\r\n\r\n    if (this._address) {\r\n      try {\r\n        const utxos = await this._kaspaLink.getUtxos(this._address);\r\n        const usableUtxos = this._filterUsableUtxos(utxos);\r\n        if (usableUtxos.length > 0) {\r\n          this._pool.addBatch(usableUtxos);\r\n          log.info(\"Recovered UTXOs to pool\", { added: usableUtxos.length });\r\n        }\r\n      } catch (e) {\r\n        log.warn(\"UTXO recovery failed\", e.message);\r\n      }\r\n    }\r\n\r\n    const finalStatus = this._pool.getStatus();\r\n    if (finalStatus.available > 0) {\r\n      this._onEvent(\"utxoReady\", { poolStatus: finalStatus });\r\n      return true;\r\n    }\r\n\r\n    // Truly degraded - no UTXOs available\r\n    log.warn(\"Entering degraded mode - no UTXOs in pool\");\r\n    this._onEvent(\"lowFundsWarning\", {\r\n      message: \"No UTXOs available - moves will not be anchored\",\r\n      poolStatus: finalStatus,\r\n    });\r\n\r\n    // Start background replenishment\r\n    this._startBackgroundReplenishment();\r\n\r\n    return false;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Pool Operations (Called by AnchorStrategy)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Reserve a UTXO for sending (instant, from pool)\r\n   * @returns {{entry: Object, outpoint: string}|null}\r\n   */\r\n  reserveUtxo() {\r\n    return this._pool.reserve();\r\n  }\r\n\r\n  /**\r\n   * Release a reserved UTXO (TX failed)\r\n   * @param {string} outpoint\r\n   */\r\n  releaseUtxo(outpoint) {\r\n    return this._pool.release(outpoint);\r\n  }\r\n\r\n  /**\r\n   * Mark a UTXO as spent (TX confirmed)\r\n   * @param {string} outpoint\r\n   */\r\n  markUtxoSpent(outpoint) {\r\n    return this._pool.markSpent(outpoint);\r\n  }\r\n\r\n  /**\r\n   * Add UTXO to pool (new change output detected)\r\n   * @param {Object} entry\r\n   */\r\n  addUtxoToPool(entry) {\r\n    return this._pool.add(entry);\r\n  }\r\n\r\n  /**\r\n   * Refresh pool from current wallet UTXOs.\r\n   * Call after TX sends to sync pool with actual wallet state.\r\n   * Does NOT trigger replenishment - just updates pool view.\r\n   */\r\n  async refreshPool() {\r\n    if (!this._kaspaLink || !this._address) return;\r\n\r\n    try {\r\n      const utxos = await this._kaspaLink.getUtxos(this._address);\r\n      const usableUtxos = this._filterUsableUtxos(utxos);\r\n\r\n      // Clear stale entries and re-add current UTXOs\r\n      this._pool.pruneSpent();\r\n      this._pool.releaseStaleReservations(10000); // 10s stale threshold\r\n\r\n      // Add any new UTXOs\r\n      this._pool.addBatch(usableUtxos);\r\n\r\n      log.debug(\"Pool refreshed\", { available: this._pool.availableCount });\r\n    } catch (e) {\r\n      log.warn(\"Pool refresh failed\", e.message);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Notify pool that a TX was attempted.\r\n   * On success, schedules a refresh to pick up change output.\r\n   * On failure, does nothing (UTXO still available).\r\n   * @param {boolean} success\r\n   */\r\n  notifyTxResult(success) {\r\n    if (success) {\r\n      // Refresh pool after a short delay to allow change output to appear\r\n      setTimeout(() => this.refreshPool(), 200);\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Background Replenishment (Only When Pool Low/Empty)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _startBackgroundReplenishment() {\r\n    if (this._backgroundHeartbeatActive) return;\r\n    if (!this._kaspaLink) return;\r\n\r\n    this._ensureCredentials({ requirePrivateKeys: true })\r\n      .then((ready) => {\r\n        if (!ready) {\r\n          log.warn(\"Cannot start background replenishment - missing credentials\");\r\n          return;\r\n        }\r\n\r\n        this._backgroundHeartbeatActive = true;\r\n\r\n        log.info(\"Starting background UTXO replenishment\");\r\n\r\n        this._kaspaLink.startHeartbeat({\r\n          address: this._address,\r\n          privateKeys: this._privateKeys,\r\n          intervalMs: BLOCKCHAIN.UTXO_HEARTBEAT_MS || 2000,\r\n          targetUtxoCount: BLOCKCHAIN.UTXO_SPLIT_COUNT,\r\n          splitCount: BLOCKCHAIN.UTXO_SPLIT_COUNT,\r\n          priorityFee: 0n,\r\n          usableThreshold: BigInt(Math.floor((BLOCKCHAIN.UTXO_USABLE_THRESHOLD_KAS || 0.5) * 100000000)),\r\n          firstCheckDelayMs: 0,\r\n          onCheck: ({ totalBalance }) => {\r\n            this._balanceKas = Number(totalBalance) / 100000000;\r\n          },\r\n          onSplit: async () => {\r\n            // Fetch new UTXOs and add to pool\r\n            try {\r\n              const utxos = await this._kaspaLink.getUtxos(this._address);\r\n              const usableUtxos = this._filterUsableUtxos(utxos);\r\n              this._pool.addBatch(usableUtxos);\r\n              log.info(\"Heartbeat split complete, pool updated\", { available: this._pool.availableCount });\r\n\r\n              // Stop heartbeat if pool is healthy\r\n              if (this._pool.availableCount >= BLOCKCHAIN.UTXO_SPLIT_COUNT) {\r\n                this.stopHeartbeat();\r\n              }\r\n            } catch (e) {\r\n              log.warn(\"Failed to update pool after split\", e.message);\r\n            }\r\n          },\r\n          onError: ({ type, error }) => {\r\n            log.warn(\"Background replenishment error\", { type, error: error?.message });\r\n          },\r\n        });\r\n      })\r\n      .catch((e) => {\r\n        log.warn(\"Background replenishment setup failed\", e.message);\r\n      });\r\n  }\r\n\r\n  stopHeartbeat() {\r\n    if (!this._kaspaLink) return;\r\n    try {\r\n      this._kaspaLink.stopHeartbeat();\r\n      this._backgroundHeartbeatActive = false;\r\n    } catch (e) {\r\n      log.warn(\"Failed to stop heartbeat\", e);\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Pool Event Handler\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _handlePoolEvent(event, data) {\r\n    switch (event) {\r\n      case PoolEvent.POOL_READY:\r\n        this._poolReady = true;\r\n        this._onEvent(\"gameReady\", { poolStatus: this._pool.getStatus() });\r\n        break;\r\n\r\n      case PoolEvent.POOL_LOW:\r\n        this._onEvent(\"poolLow\", data);\r\n        // Start background replenishment if not already running\r\n        if (!this._backgroundHeartbeatActive) {\r\n          this._startBackgroundReplenishment();\r\n        }\r\n        break;\r\n\r\n      case PoolEvent.POOL_EMPTY:\r\n        this._onEvent(\"poolEmpty\", data);\r\n        this._onEvent(\"lowFundsWarning\", {\r\n          message: \"UTXO pool empty\",\r\n          poolStatus: this._pool.getStatus(),\r\n        });\r\n        break;\r\n\r\n      default:\r\n        // Forward other events\r\n        this._onEvent(event, data);\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Filter UTXOs that are large enough for anchor operations\r\n   * @private\r\n   */\r\n  _filterUsableUtxos(utxos) {\r\n    const minAmount = BigInt(Math.floor((BLOCKCHAIN.UTXO_USABLE_THRESHOLD_KAS || 0.5) * 100000000));\r\n    const entries = Array.isArray(utxos) ? utxos : utxos?.entries || [];\r\n\r\n    return entries.filter((entry) => {\r\n      const amount = this._getEntryAmount(entry);\r\n      return amount >= minAmount;\r\n    });\r\n  }\r\n\r\n  _getEntryAmount(entry) {\r\n    // Handle various UTXO entry formats\r\n    try {\r\n      if (entry?.entry?.amount !== undefined) {\r\n        return BigInt(entry.entry.amount);\r\n      }\r\n      if (entry?.amount !== undefined) {\r\n        return BigInt(entry.amount);\r\n      }\r\n      // WASM format\r\n      if (typeof entry?.getEntry === \"function\") {\r\n        return BigInt(entry.getEntry().amount);\r\n      }\r\n    } catch {\r\n      // Ignore\r\n    }\r\n    return 0n;\r\n  }\r\n\r\n  async _ensureCredentials({ requirePrivateKeys = false } = {}) {\r\n    if (!this._kaspaLink) {\r\n      throw new Error(\"KaspaLink not set\");\r\n    }\r\n\r\n    if (!this._address) {\r\n      this._address = this._kaspaLink.address;\r\n      if (!this._address) {\r\n        throw new Error(\"No wallet address available\");\r\n      }\r\n    }\r\n\r\n    if (requirePrivateKeys && !this._privateKeys) {\r\n      log.debug(\"Fetching private keys...\");\r\n      this._privateKeys = await this._kaspaLink.getPrivateKeys({\r\n        keyCount: BLOCKCHAIN.UTXO_KEY_COUNT,\r\n      });\r\n\r\n      if (!this._privateKeys?.length) {\r\n        throw new Error(\"Failed to get private keys from wallet\");\r\n      }\r\n\r\n      log.info(\"Private keys obtained\", { count: this._privateKeys.length });\r\n    }\r\n\r\n    this._pool.setCredentials({\r\n      address: this._address,\r\n      privateKeys: this._privateKeys,\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Cleanup for game end\r\n   */\r\n  cleanup() {\r\n    this.stopHeartbeat();\r\n    this._pool.pruneSpent();\r\n    this._pool.releaseStaleReservations();\r\n  }\r\n\r\n  /**\r\n   * Full reset\r\n   */\r\n  reset() {\r\n    this.stopHeartbeat();\r\n    this._pool.clear();\r\n    this._poolReady = false;\r\n    this._splitInProgress = false;\r\n  }\r\n}\r\n\r\nexport default UtxoManager;\r\n", "/**\r\n * UtxoPool.js - Event-driven UTXO pool for zero-delay game start\r\n *\r\n * Single responsibility: track a pool of pre-split UTXOs in memory.\r\n * No network fetches during getAvailable() - pure in-memory lookup.\r\n *\r\n * States:\r\n * - available: UTXO ready to use\r\n * - reserved: UTXO claimed for a pending TX\r\n * - spent: TX confirmed, UTXO consumed\r\n *\r\n * @module kktp/blockchain/wallet/UtxoPool\r\n */\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\nimport { BLOCKCHAIN } from \"../../core/constants.js\";\r\n\r\nconst log = Logger.create(LogModule.anchor.utxoPool);\r\n\r\n/**\r\n * Entry states\r\n */\r\nconst UtxoState = {\r\n  AVAILABLE: \"available\",\r\n  RESERVED: \"reserved\",\r\n  SPENT: \"spent\",\r\n};\r\n\r\n/**\r\n * Pool events\r\n */\r\nexport const PoolEvent = {\r\n  POOL_READY: \"poolReady\",\r\n  POOL_LOW: \"poolLow\",\r\n  POOL_EMPTY: \"poolEmpty\",\r\n  UTXO_RESERVED: \"utxoReserved\",\r\n  UTXO_RELEASED: \"utxoReleased\",\r\n  UTXO_SPENT: \"utxoSpent\",\r\n  UTXO_ADDED: \"utxoAdded\",\r\n};\r\n\r\nexport class UtxoPool {\r\n  constructor({ minPoolSize = BLOCKCHAIN.UTXO_SPLIT_COUNT, lowThreshold = 3, onEvent } = {}) {\r\n    /** @type {Map<string, {entry: Object, state: string, reservedAt: number|null}>} */\r\n    this._pool = new Map();\r\n    this._minPoolSize = minPoolSize;\r\n    this._lowThreshold = lowThreshold;\r\n    this._onEvent = typeof onEvent === \"function\" ? onEvent : () => {};\r\n    this._privateKeys = null;\r\n    this._address = null;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Configuration\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Store wallet credentials for pool operations\r\n   */\r\n  setCredentials({ address, privateKeys }) {\r\n    this._address = address;\r\n    this._privateKeys = privateKeys;\r\n  }\r\n\r\n  get address() {\r\n    return this._address;\r\n  }\r\n\r\n  get privateKeys() {\r\n    return this._privateKeys;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Pool State\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Count of available (not reserved/spent) UTXOs\r\n   */\r\n  get availableCount() {\r\n    let count = 0;\r\n    for (const item of this._pool.values()) {\r\n      if (item.state === UtxoState.AVAILABLE) count++;\r\n    }\r\n    return count;\r\n  }\r\n\r\n  /**\r\n   * Total pool size (all states)\r\n   */\r\n  get poolSize() {\r\n    return this._pool.size;\r\n  }\r\n\r\n  /**\r\n   * Check if pool is ready for gameplay\r\n   */\r\n  get isReady() {\r\n    return this.availableCount >= 1;\r\n  }\r\n\r\n  /**\r\n   * Check if pool is in degraded state (empty)\r\n   */\r\n  get isDegraded() {\r\n    return this.availableCount === 0;\r\n  }\r\n\r\n  /**\r\n   * Check if pool is running low\r\n   */\r\n  get isLow() {\r\n    return this.availableCount <= this._lowThreshold && this.availableCount > 0;\r\n  }\r\n\r\n  /**\r\n   * Get pool status for external consumers\r\n   */\r\n  getStatus() {\r\n    return {\r\n      available: this.availableCount,\r\n      reserved: this._countByState(UtxoState.RESERVED),\r\n      spent: this._countByState(UtxoState.SPENT),\r\n      total: this._pool.size,\r\n      isReady: this.isReady,\r\n      isDegraded: this.isDegraded,\r\n      isLow: this.isLow,\r\n      minPoolSize: this._minPoolSize,\r\n      lowThreshold: this._lowThreshold,\r\n    };\r\n  }\r\n\r\n  _countByState(state) {\r\n    let count = 0;\r\n    for (const item of this._pool.values()) {\r\n      if (item.state === state) count++;\r\n    }\r\n    return count;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Pool Operations (No Network Calls)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Add a UTXO to the pool (called when split confirms or new UTXO detected)\r\n   * @param {Object} entry - UTXO entry object\r\n   * @returns {boolean} True if added (not duplicate)\r\n   */\r\n  add(entry) {\r\n    const outpoint = this._getOutpoint(entry);\r\n    if (!outpoint) {\r\n      log.warn(\"Cannot add UTXO - missing outpoint\", entry);\r\n      return false;\r\n    }\r\n\r\n    if (this._pool.has(outpoint)) {\r\n      return false; // Already tracked\r\n    }\r\n\r\n    this._pool.set(outpoint, {\r\n      entry,\r\n      state: UtxoState.AVAILABLE,\r\n      reservedAt: null,\r\n    });\r\n\r\n    log.debug(\"UTXO added to pool\", { outpoint, available: this.availableCount });\r\n    this._onEvent(PoolEvent.UTXO_ADDED, { outpoint, available: this.availableCount });\r\n    this._checkPoolState();\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Add multiple UTXOs to the pool\r\n   * @param {Array} entries - Array of UTXO entries\r\n   * @returns {number} Count of newly added UTXOs\r\n   */\r\n  addBatch(entries) {\r\n    let added = 0;\r\n    for (const entry of entries || []) {\r\n      if (this.add(entry)) added++;\r\n    }\r\n    return added;\r\n  }\r\n\r\n  /**\r\n   * Reserve a UTXO for a pending transaction (instant, no network)\r\n   * @returns {{entry: Object, outpoint: string}|null} Reserved UTXO or null if none available\r\n   */\r\n  reserve() {\r\n    for (const [outpoint, item] of this._pool.entries()) {\r\n      if (item.state === UtxoState.AVAILABLE) {\r\n        item.state = UtxoState.RESERVED;\r\n        item.reservedAt = Date.now();\r\n\r\n        log.debug(\"UTXO reserved\", { outpoint, remaining: this.availableCount });\r\n        this._onEvent(PoolEvent.UTXO_RESERVED, { outpoint, remaining: this.availableCount });\r\n        this._checkPoolState();\r\n\r\n        return { entry: item.entry, outpoint };\r\n      }\r\n    }\r\n\r\n    log.warn(\"No available UTXOs to reserve\");\r\n    this._onEvent(PoolEvent.POOL_EMPTY, { available: 0 });\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Release a reserved UTXO back to available (TX failed)\r\n   * @param {string} outpoint\r\n   * @returns {boolean} True if released\r\n   */\r\n  release(outpoint) {\r\n    const item = this._pool.get(outpoint);\r\n    if (!item) return false;\r\n\r\n    if (item.state === UtxoState.RESERVED) {\r\n      item.state = UtxoState.AVAILABLE;\r\n      item.reservedAt = null;\r\n\r\n      log.debug(\"UTXO released\", { outpoint, available: this.availableCount });\r\n      this._onEvent(PoolEvent.UTXO_RELEASED, { outpoint, available: this.availableCount });\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Mark a UTXO as spent (TX confirmed)\r\n   * @param {string} outpoint\r\n   * @returns {boolean} True if marked spent\r\n   */\r\n  markSpent(outpoint) {\r\n    const item = this._pool.get(outpoint);\r\n    if (!item) return false;\r\n\r\n    item.state = UtxoState.SPENT;\r\n    item.reservedAt = null;\r\n\r\n    log.debug(\"UTXO marked spent\", { outpoint, available: this.availableCount });\r\n    this._onEvent(PoolEvent.UTXO_SPENT, { outpoint, available: this.availableCount });\r\n    this._checkPoolState();\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Remove spent UTXOs from the pool (cleanup)\r\n   * @returns {number} Count of removed UTXOs\r\n   */\r\n  pruneSpent() {\r\n    let pruned = 0;\r\n    for (const [outpoint, item] of this._pool.entries()) {\r\n      if (item.state === UtxoState.SPENT) {\r\n        this._pool.delete(outpoint);\r\n        pruned++;\r\n      }\r\n    }\r\n    if (pruned > 0) {\r\n      log.debug(\"Pruned spent UTXOs\", { pruned, remaining: this._pool.size });\r\n    }\r\n    return pruned;\r\n  }\r\n\r\n  /**\r\n   * Get all available UTXOs (for operations that need multiple)\r\n   * @returns {Array<{entry: Object, outpoint: string}>}\r\n   */\r\n  getAvailable() {\r\n    const available = [];\r\n    for (const [outpoint, item] of this._pool.entries()) {\r\n      if (item.state === UtxoState.AVAILABLE) {\r\n        available.push({ entry: item.entry, outpoint });\r\n      }\r\n    }\r\n    return available;\r\n  }\r\n\r\n  /**\r\n   * Reset the pool (game end cleanup)\r\n   */\r\n  clear() {\r\n    this._pool.clear();\r\n    log.debug(\"Pool cleared\");\r\n  }\r\n\r\n  /**\r\n   * Release all reserved UTXOs that are stale (> 30s)\r\n   * Called periodically to recover from failed TXs that didn't release\r\n   */\r\n  releaseStaleReservations(maxAgeMs = 30000) {\r\n    const now = Date.now();\r\n    let released = 0;\r\n\r\n    for (const [outpoint, item] of this._pool.entries()) {\r\n      if (item.state === UtxoState.RESERVED && item.reservedAt) {\r\n        if (now - item.reservedAt > maxAgeMs) {\r\n          item.state = UtxoState.AVAILABLE;\r\n          item.reservedAt = null;\r\n          released++;\r\n          log.warn(\"Released stale reservation\", { outpoint, ageMs: now - item.reservedAt });\r\n        }\r\n      }\r\n    }\r\n\r\n    return released;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Internal Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _getOutpoint(entry) {\r\n    // Handle various UTXO entry formats\r\n    const outpoint = entry?.outpoint || entry?.entry?.outpoint;\r\n    if (!outpoint) return null;\r\n\r\n    const txId = outpoint.transactionId || outpoint.txId || outpoint.transaction_id;\r\n    const index = outpoint.index ?? outpoint.outputIndex ?? 0;\r\n\r\n    if (!txId) return null;\r\n    return `${txId}:${index}`;\r\n  }\r\n\r\n  _checkPoolState() {\r\n    const available = this.availableCount;\r\n\r\n    if (available === 0) {\r\n      this._onEvent(PoolEvent.POOL_EMPTY, { available: 0 });\r\n    } else if (available <= this._lowThreshold) {\r\n      this._onEvent(PoolEvent.POOL_LOW, { available, threshold: this._lowThreshold });\r\n    } else if (available >= this._minPoolSize) {\r\n      this._onEvent(PoolEvent.POOL_READY, { available });\r\n    }\r\n  }\r\n}\r\n\r\nexport default UtxoPool;\r\n", "/**\r\n * EntropyProvider.js - Block hash subscription and entropy sources\r\n */\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\nimport { bytesToHex, hexToBytes } from \"../../core/cryptoUtils.js\";\r\n\r\nconst log = Logger.create(LogModule.anchor.vrfOperations);\r\n\r\nexport class EntropyProvider {\r\n  constructor({ kaspaLink, sessionController } = {}) {\r\n    this._kaspaLink = kaspaLink ?? null;\r\n    this._sessionController = sessionController ?? null;\r\n    this._blockUnsubscribe = null;\r\n    this._currentBlockHash = null;\r\n    this._currentBlockHashHex = \"\";\r\n  }\r\n\r\n  setKaspaLink(kaspaLink) {\r\n    this._kaspaLink = kaspaLink;\r\n  }\r\n\r\n  setSessionController(sessionController) {\r\n    this._sessionController = sessionController;\r\n  }\r\n\r\n  subscribeToBlocks() {\r\n    if (!this._kaspaLink) return;\r\n\r\n    this._kaspaLink.startScanner?.()?.catch?.((e) => {\r\n      log.warn(\"Scanner check:\", e?.message ?? e);\r\n    });\r\n\r\n    if (this._blockUnsubscribe) {\r\n      this._blockUnsubscribe();\r\n      this._blockUnsubscribe = null;\r\n    }\r\n\r\n    this._currentBlockHash = null;\r\n    this._currentBlockHashHex = \"\";\r\n\r\n    this._blockUnsubscribe = this._kaspaLink.onNewBlock?.((block) => {\r\n      const header = block?.header ?? block ?? {};\r\n      const hash = header.hash ?? header.blockHash ?? header.headerHash;\r\n\r\n      if (hash) {\r\n        if (typeof hash === \"string\") {\r\n          this._currentBlockHashHex = hash;\r\n          try {\r\n            this._currentBlockHash = hexToBytes(hash);\r\n          } catch (e) {\r\n            log.warn(\"Failed to parse block hash\", e);\r\n          }\r\n        } else if (hash instanceof Uint8Array) {\r\n          this._currentBlockHash = hash;\r\n          this._currentBlockHashHex = bytesToHex(hash);\r\n        }\r\n      }\r\n    });\r\n\r\n    log.info(\"Subscribed to live block stream for move hashing\");\r\n  }\r\n\r\n  cleanup() {\r\n    if (this._blockUnsubscribe) {\r\n      this._blockUnsubscribe();\r\n      this._blockUnsubscribe = null;\r\n      log.debug(\"Block subscription cleaned up\");\r\n    }\r\n  }\r\n\r\n  getCurrentBlockHash() {\r\n    if (this._currentBlockHash?.length === 32) {\r\n      return {\r\n        hash: this._currentBlockHash,\r\n        hex: this._currentBlockHashHex,\r\n        source: \"live\",\r\n      };\r\n    }\r\n\r\n    const session = this._sessionController;\r\n    if (session) {\r\n      const stream = session.blockHashStream;\r\n      let bytes = null;\r\n\r\n      if (Array.isArray(stream) && stream.length > 0) {\r\n        bytes = stream[stream.length - 1];\r\n      }\r\n\r\n      if (!bytes && session.endBlockHash) {\r\n        bytes = session.endBlockHash;\r\n      }\r\n\r\n      if (!bytes && session.startBlockHash) {\r\n        bytes = session.startBlockHash;\r\n      }\r\n\r\n      if (bytes?.length === 32) {\r\n        const hex = bytesToHex(bytes);\r\n        this._currentBlockHash = bytes;\r\n        this._currentBlockHashHex = hex;\r\n        return { hash: bytes, hex, source: \"session\" };\r\n      }\r\n    }\r\n\r\n    throw new Error(\"VRF REQUIRED: no live block hash available\");\r\n  }\r\n\r\n  getCachedBlockHash() {\r\n    if (this._currentBlockHash?.length === 32) {\r\n      return {\r\n        hash: this._currentBlockHash,\r\n        hex: this._currentBlockHashHex,\r\n      };\r\n    }\r\n    return {\r\n      hash: new Uint8Array(32),\r\n      hex: \"0\".repeat(64),\r\n    };\r\n  }\r\n}\r\n\r\nexport default EntropyProvider;\r\n", "/**\r\n * VrfManager.js - Stateful VRF chain with HMAC-SHA256 + recursive folding\r\n *\r\n * Each move's randomness is cryptographically chained to the previous one:\r\n *   VRF_n = SHA256( fold( HMAC-SHA256(Key=VRF_{n-1}, Data=MoveData+Entropy), EntropyHash, {seed} ) )\r\n *\r\n * Lazy-Initialized Chain:\r\n *   - VRF_0 = SHA256(playerId + \":\" + gameId + \":\" + firstMoveTimestamp)\r\n *   - Once Genesis TX ID is confirmed, it is folded into the state on the next move\r\n *   - The auditor replays both phases identically using the per-move entropySnapshot\r\n *\r\n * v5 Union Protocol \u2014 variable data buffer layout:\r\n *   MOVE (136 bytes):  [VRF_State(32)] + [ActionCode(1)] + [X(2)] + [Y(2)] + [Z(2)] + [TimeDelta(1)] + [NIST(32)] + [BTC(32)] + [Kaspa(32)]\r\n *   Standard (131 bytes): [VRF_State(32)] + [ActionCode(1)] + [Lane(1)] + [TimeDelta(1)] + [NIST(32)] + [BTC(32)] + [Kaspa(32)]\r\n */\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\nimport { bytesToHex, hexToBytes, sha256, hmacSha256 } from \"../../core/cryptoUtils.js\";\r\nimport { ACTION_TO_CODE, MOVE_ACTION_CODE } from \"../../core/constants.js\";\r\nimport { fold } from \"../../engine/kaspa/vrf/core/folding.js\";\r\n\r\nconst log = Logger.create(LogModule.anchor.vrfOperations);\r\n\r\n/** Size of each component in the HMAC data buffer */\r\nconst VRF_STATE_SIZE = 32;\r\nconst NIST_SIZE = 32;\r\nconst BTC_SIZE = 32;\r\nconst KASPA_SIZE = 32;\r\n\r\n/** Standard buffer: VRF(32) + ActionCode(1) + Lane(1) + TimeDelta(1) + NIST(32) + BTC(32) + Kaspa(32) = 131 */\r\nconst DATA_BUFFER_SIZE_STANDARD = VRF_STATE_SIZE + 1 + 1 + 1 + NIST_SIZE + BTC_SIZE + KASPA_SIZE; // 131\r\n\r\n/** Extended MOVE buffer: VRF(32) + ActionCode(1) + X(2) + Y(2) + Z(2) + TimeDelta(1) + NIST(32) + BTC(32) + Kaspa(32) = 136 */\r\nconst DATA_BUFFER_SIZE_EXTENDED = VRF_STATE_SIZE + 1 + 2 + 2 + 2 + 1 + NIST_SIZE + BTC_SIZE + KASPA_SIZE; // 136\r\n\r\nexport class VrfManager {\r\n  constructor({ kaspaLink, entropyProvider, onDeltaEntropy } = {}) {\r\n    this._kaspaLink = kaspaLink ?? null;\r\n    this._entropyProvider = entropyProvider ?? null;\r\n    this._onDeltaEntropy = typeof onDeltaEntropy === \"function\" ? onDeltaEntropy : () => {};\r\n\r\n    this._gameId = null;\r\n    this._playerId = null;\r\n\r\n    // Stateful VRF chain\r\n    this._currentVrfState = null;  // Uint8Array(32) \u2014 the chain baton\r\n    this._genesisTxId = null;      // string \u2014 set once genesis anchor confirms\r\n    this._genesisReinforced = false; // has genesis TX been folded into state?\r\n    this._foldLock = null;         // Promise-based mutex for atomic fold operations\r\n\r\n    // Entropy tracking for delta detection\r\n    this._lastBtcHashes = null;\r\n    this._lastNistPulse = null;\r\n    this._pendingBtcDelta = null;\r\n    this._pendingNistDelta = null;\r\n  }\r\n\r\n  setKaspaLink(kaspaLink) {\r\n    this._kaspaLink = kaspaLink;\r\n  }\r\n\r\n  setEntropyProvider(entropyProvider) {\r\n    this._entropyProvider = entropyProvider;\r\n  }\r\n\r\n  setGameContext({ gameId, playerId }) {\r\n    this._gameId = gameId ?? null;\r\n    this._playerId = playerId ?? null;\r\n  }\r\n\r\n  /**\r\n   * Set the Genesis TX ID once confirmed on-chain.\r\n   * The next call to updateStateForMove will fold it into the VRF state.\r\n   */\r\n  setGenesisTxId(txId) {\r\n    this._genesisTxId = txId ?? null;\r\n    log.info(\"Genesis TX ID set for VRF reinforcement\", {\r\n      txId: txId?.substring(0, 16),\r\n    });\r\n  }\r\n\r\n  setGenesisEntropy({ btcBlockHashes, nistPulse }) {\r\n    this._lastBtcHashes = Array.isArray(btcBlockHashes) ? btcBlockHashes : null;\r\n    this._lastNistPulse = nistPulse ?? null;\r\n  }\r\n\r\n  /**\r\n   * Reset VRF state \u2014 called when game is stopped.\r\n   * Ensures the next game starts with a fresh chain.\r\n   */\r\n  resetState() {\r\n    this._currentVrfState = null;\r\n    this._genesisTxId = null;\r\n    this._genesisReinforced = false;\r\n    this._foldLock = null;\r\n    this._pendingBtcDelta = null;\r\n    this._pendingNistDelta = null;\r\n    log.debug(\"VRF state reset\");\r\n  }\r\n\r\n  getPendingDeltas() {\r\n    return {\r\n      btc: this._pendingBtcDelta,\r\n      nist: this._pendingNistDelta,\r\n    };\r\n  }\r\n\r\n  clearPendingDeltas() {\r\n    this._pendingBtcDelta = null;\r\n    this._pendingNistDelta = null;\r\n  }\r\n\r\n  /**\r\n   * Stateful VRF update: HMAC-SHA256 state transition + fold() entropy extraction.\r\n   * Each call chains to the previous state, producing a deterministic VRF output\r\n   * that the auditor can replay from the genesis seed.\r\n   *\r\n   * @param {Object} params\r\n   * @param {string} params.action - Move action name (e.g. 'move', 'flip')\r\n   * @param {number} [params.lane] - Lane index (standard moves)\r\n   * @param {number} [params.x] - 14-bit raw X coordinate (MOVE only)\r\n   * @param {number} [params.y] - 14-bit raw Y coordinate (MOVE only)\r\n   * @param {number} [params.z] - 14-bit raw Z coordinate (MOVE only)\r\n   * @param {number} params.timeDelta - Time delta (0-255)\r\n   * @param {number} params.sequence - Move sequence number\r\n   * @param {number} params.timestamp - Move timestamp (ms)\r\n   * @returns {Promise<Object>} { vrfOutput, vrfOutputBytes, blockHash, blockHashHex, entropySnapshot }\r\n   */\r\n  async updateStateForMove({ action, lane, timeDelta, sequence, timestamp, x, y, z }) {\r\n    if (!this._entropyProvider) {\r\n      throw new Error(\"EntropyProvider not set\");\r\n    }\r\n\r\n    // \u2500\u2500 Mutex: prevent concurrent fold operations \u2500\u2500\r\n    while (this._foldLock) {\r\n      await this._foldLock;\r\n    }\r\n\r\n    let resolveLock;\r\n    this._foldLock = new Promise((resolve) => { resolveLock = resolve; });\r\n\r\n    try {\r\n      // \u2500\u2500 Step 1: Lazy initialization of VRF state \u2500\u2500\r\n      // Include first move timestamp to ensure uniqueness across sessions\r\n      if (this._currentVrfState === null) {\r\n        const seedString = `${this._playerId}:${this._gameId}:${timestamp}`;\r\n        this._currentVrfState = await sha256(new TextEncoder().encode(seedString));\r\n        log.info(\"VRF chain initialized (lazy seed)\", {\r\n          gameId: this._gameId?.substring(0, 12),\r\n          playerId: this._playerId?.substring(0, 12),\r\n          timestamp,\r\n        });\r\n      }\r\n\r\n      // \u2500\u2500 Step 2: Genesis reinforcement (one-time fold of TX ID) \u2500\u2500\r\n      let isGenesisReinforced = this._genesisReinforced;\r\n      if (this._genesisTxId && !this._genesisReinforced) {\r\n        const txIdBytes = hexToBytes(this._genesisTxId);\r\n        const combined = new Uint8Array(VRF_STATE_SIZE + txIdBytes.length);\r\n        combined.set(this._currentVrfState);\r\n        combined.set(txIdBytes, VRF_STATE_SIZE);\r\n        this._currentVrfState = await sha256(combined);\r\n        this._genesisReinforced = true;\r\n        isGenesisReinforced = true;\r\n        log.info(\"Genesis TX folded into VRF state\", {\r\n          txId: this._genesisTxId.substring(0, 16),\r\n        });\r\n      }\r\n\r\n      // \u2500\u2500 Step 3: Gather cached entropy sources \u2500\u2500\r\n      const blockInfo = this._entropyProvider.getCurrentBlockHash();\r\n      const kaspaBytes = blockInfo.hash instanceof Uint8Array && blockInfo.hash.length === 32\r\n        ? blockInfo.hash\r\n        : new Uint8Array(32);\r\n      const kaspaHex = blockInfo.hex || bytesToHex(kaspaBytes);\r\n\r\n      // NIST: use stored genesis/delta pulse, SHA-256 \u2192 32 bytes\r\n      let nistOutputHashHex = \"\";\r\n      if (this._lastNistPulse?.outputHash) {\r\n        nistOutputHashHex = typeof this._lastNistPulse.outputHash === \"string\"\r\n          ? this._lastNistPulse.outputHash\r\n          : bytesToHex(this._lastNistPulse.outputHash);\r\n      }\r\n      const nistBytes = nistOutputHashHex\r\n        ? await sha256(hexToBytes(nistOutputHashHex))\r\n        : new Uint8Array(32); // zero-fill if not yet available\r\n\r\n      // BTC: use latest stored hash \u2192 32 bytes\r\n      let btcHashHex = \"\";\r\n      if (this._lastBtcHashes && this._lastBtcHashes.length > 0) {\r\n        const first = this._lastBtcHashes[0];\r\n        btcHashHex = first instanceof Uint8Array ? bytesToHex(first) : String(first || \"\");\r\n      }\r\n      const btcBytes = btcHashHex\r\n        ? _padOrTruncate(hexToBytes(btcHashHex), BTC_SIZE)\r\n        : new Uint8Array(32); // zero-fill if not yet available\r\n\r\n      // \u2500\u2500 Step 4: Build deterministic data buffer (v5 union protocol) \u2500\u2500\r\n      const actionCode = (ACTION_TO_CODE[action] ?? 0) & 0xff;\r\n      const isMove = actionCode === MOVE_ACTION_CODE;\r\n      const bufferSize = isMove ? DATA_BUFFER_SIZE_EXTENDED : DATA_BUFFER_SIZE_STANDARD;\r\n      const dataBuffer = new Uint8Array(bufferSize);\r\n      let offset = 0;\r\n\r\n      dataBuffer.set(this._currentVrfState, offset);\r\n      offset += VRF_STATE_SIZE;\r\n\r\n      dataBuffer[offset++] = actionCode;\r\n\r\n      if (isMove) {\r\n        // Extended: [ActionCode(1)] + [X(2)] + [Y(2)] + [Z(2)] + [TimeDelta(1)]\r\n        const xVal = (x ?? 0) & 0xFFFF;\r\n        dataBuffer[offset++] = (xVal >> 8) & 0xff;\r\n        dataBuffer[offset++] = xVal & 0xff;\r\n        const yVal = (y ?? 0) & 0xFFFF;\r\n        dataBuffer[offset++] = (yVal >> 8) & 0xff;\r\n        dataBuffer[offset++] = yVal & 0xff;\r\n        const zVal = (z ?? 0) & 0xFFFF;\r\n        dataBuffer[offset++] = (zVal >> 8) & 0xff;\r\n        dataBuffer[offset++] = zVal & 0xff;\r\n        dataBuffer[offset++] = (timeDelta ?? 0) & 0xff;\r\n      } else {\r\n        // Standard: [ActionCode(1)] + [Lane(1)] + [TimeDelta(1)]\r\n        dataBuffer[offset++] = (lane ?? 0) & 0xff;\r\n        dataBuffer[offset++] = (timeDelta ?? 0) & 0xff;\r\n      }\r\n\r\n      dataBuffer.set(nistBytes, offset);\r\n      offset += NIST_SIZE;\r\n\r\n      dataBuffer.set(btcBytes, offset);\r\n      offset += BTC_SIZE;\r\n\r\n      dataBuffer.set(kaspaBytes, offset);\r\n\r\n      // \u2500\u2500 Step 5: HMAC-SHA256 state transition \u2500\u2500\r\n      const hmacResult = await hmacSha256(this._currentVrfState, dataBuffer);\r\n\r\n      // \u2500\u2500 Step 6: Entropy hash for fold() \u2500\u2500\r\n      const entropyConcat = new Uint8Array(KASPA_SIZE + NIST_SIZE + BTC_SIZE);\r\n      entropyConcat.set(kaspaBytes, 0);\r\n      entropyConcat.set(nistBytes, KASPA_SIZE);\r\n      entropyConcat.set(btcBytes, KASPA_SIZE + NIST_SIZE);\r\n      const entropyHash = await sha256(entropyConcat);\r\n      const entropyHex = bytesToHex(entropyHash);\r\n\r\n      // \u2500\u2500 Step 7: Recursive folding \u2014 high-quality entropy extraction \u2500\u2500\r\n      const foldSeed = this._genesisTxId || this._gameId || \"kktp\";\r\n      const foldBitstring = await fold(bytesToHex(hmacResult), entropyHex, { seed: foldSeed });\r\n\r\n      // \u2500\u2500 Step 8: Final VRF output = SHA256(foldBitstring) \u2500\u2500\r\n      const vrfOutputBytes = await sha256(new TextEncoder().encode(foldBitstring));\r\n      const vrfOutput = bytesToHex(vrfOutputBytes);\r\n\r\n      // \u2500\u2500 Step 9: Update the baton atomically \u2500\u2500\r\n      this._currentVrfState = vrfOutputBytes;\r\n\r\n      // \u2500\u2500 Step 10: Entropy delta detection (uses stored values) \u2500\u2500\r\n      this._checkBtcDelta(btcBytes, btcHashHex);\r\n      this._checkNistDelta();\r\n\r\n      log.debug(\"VRF chain advanced\", {\r\n        sequence,\r\n        vrfFragment: vrfOutput.substring(0, 8),\r\n        genesisReinforced: isGenesisReinforced,\r\n        kaspaBlock: kaspaHex.substring(0, 16),\r\n      });\r\n\r\n      // \u2500\u2500 Build entropy snapshot for audit determinism \u2500\u2500\r\n      const entropySnapshot = {\r\n        nistOutputHash: nistOutputHashHex || null,\r\n        btcHash: btcHashHex || null,\r\n        kaspaBlockHash: kaspaHex,\r\n        isGenesisReinforced,\r\n        initTimestamp: sequence === 1 ? timestamp : undefined,\r\n      };\r\n\r\n      return {\r\n        vrfOutput,\r\n        vrfOutputBytes,\r\n        blockHash: blockInfo.hash,\r\n        blockHashHex: kaspaHex,\r\n        entropySnapshot,\r\n      };\r\n    } finally {\r\n      // Release mutex\r\n      this._foldLock = null;\r\n      resolveLock();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check for BTC entropy delta vs last known value.\r\n   */\r\n  _checkBtcDelta(currentBtcBytes, currentBtcHex) {\r\n    if (!currentBtcHex || !this._lastBtcHashes || this._lastBtcHashes.length === 0) return;\r\n\r\n    const lastFirst = this._lastBtcHashes[0];\r\n    const lastHex = lastFirst instanceof Uint8Array ? bytesToHex(lastFirst) : String(lastFirst || \"\");\r\n\r\n    if (lastHex && currentBtcHex && lastHex !== currentBtcHex) {\r\n      this._pendingBtcDelta = currentBtcBytes;\r\n      log.info(\"BTC entropy delta detected\", { newHash: currentBtcHex.substring(0, 16) });\r\n      this._onDeltaEntropy({ type: \"btc\", hash: currentBtcBytes });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check for NIST entropy delta \u2014 emits event when pulse index changes.\r\n   * Called after each move to track NIST pulse changes over time.\r\n   */\r\n  _checkNistDelta() {\r\n    // Delta detection happens when setGenesisEntropy or external updates change _lastNistPulse\r\n    // The pending delta is already set in setGenesisEntropy flow if pulse changed.\r\n    // This method exists for symmetry and future extension.\r\n  }\r\n}\r\n\r\n/**\r\n * Pad or truncate a Uint8Array to exactly the target length.\r\n */\r\nfunction _padOrTruncate(bytes, targetLength) {\r\n  if (bytes.length === targetLength) return bytes;\r\n  const result = new Uint8Array(targetLength);\r\n  result.set(bytes.subarray(0, Math.min(bytes.length, targetLength)));\r\n  return result;\r\n}\r\n\r\nexport default VrfManager;\r\n", "/**\r\n * BinaryPacker.js - Binary anchor packing/unpacking utilities (v5 Union Protocol)\r\n *\r\n * Action code 1 (MOVE) \u2192 16-byte extended packet with X/Y/Z.\r\n * All other action codes \u2192 8-byte standard packet.\r\n */\r\n\r\nimport { bytesToHex, hexToBytes } from \"../../core/cryptoUtils.js\";\r\nimport {\r\n  ANCHOR,\r\n  ACTION_TO_CODE,\r\n  CODE_TO_ACTION,\r\n  MOVE_ACTION_CODE,\r\n  encodeCoord14,\r\n  decodeCoord14,\r\n  movePacketSize,\r\n} from \"../../core/constants.js\";\r\n\r\nexport class BinaryPacker {\r\n  /**\r\n   * @param {Object} [options]\r\n   * @param {Object} [options.actionMaps] - Merged maps from buildActionMaps()\r\n   */\r\n  constructor(options = {}) {\r\n    this._actionToCode = options.actionMaps?.actionToCode ?? ACTION_TO_CODE;\r\n    this._codeToAction = options.actionMaps?.codeToAction ?? CODE_TO_ACTION;\r\n    this._subMaps      = options.actionMaps?.subMaps ?? {};\r\n    this._reverseSubMaps = options.actionMaps?.reverseSubMaps ?? {};\r\n  }\r\n\r\n  /** Update action maps at runtime (e.g. when game starts with custom maps). */\r\n  setActionMaps(actionMaps) {\r\n    if (!actionMaps) return;\r\n    this._actionToCode   = actionMaps.actionToCode ?? this._actionToCode;\r\n    this._codeToAction   = actionMaps.codeToAction ?? this._codeToAction;\r\n    this._subMaps        = actionMaps.subMaps ?? this._subMaps;\r\n    this._reverseSubMaps = actionMaps.reverseSubMaps ?? this._reverseSubMaps;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Legacy v4-compatible full-anchor packing (genesis binary format)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  packAnchorToBinary({ gameId, sessionController, moveHistory, finalScore, coinsCollected }) {\r\n    const vrfSeed = sessionController?.vrfSeed ?? \"\";\r\n    const startBlockHash = sessionController?.startBlockHash ?? new Uint8Array(32);\r\n    const endBlockHash = sessionController?.endBlockHash ?? new Uint8Array(32);\r\n    const qrngPulses = sessionController?.qrngPulses ?? [];\r\n\r\n    const packedMoves = this.packMovesToBinary(moveHistory ?? []);\r\n    // packedMoves is variable-length now; compute moveCount from the packed array\r\n    const moveCount = Math.min(this._lastPackedMoveCount ?? 0, ANCHOR.MAX_MOVES);\r\n    const qrngPulseCount = Math.min(qrngPulses.length, ANCHOR.MAX_QRNG_PULSES);\r\n\r\n    const totalSize =\r\n      ANCHOR.HEADER_SIZE +\r\n      qrngPulseCount * ANCHOR.QRNG_PULSE_SIZE +\r\n      packedMoves.length;\r\n\r\n    const buffer = new Uint8Array(totalSize);\r\n    let offset = 0;\r\n\r\n    buffer[offset++] = ANCHOR.VERSION;\r\n\r\n    const gameIdBytes = this.hashToBytes(gameId ?? \"\", ANCHOR.GAME_ID_BYTES);\r\n    buffer.set(gameIdBytes, offset);\r\n    offset += ANCHOR.GAME_ID_BYTES;\r\n\r\n    buffer.set(startBlockHash.slice(0, ANCHOR.BLOCK_HASH_BYTES), offset);\r\n    offset += ANCHOR.BLOCK_HASH_BYTES;\r\n\r\n    buffer.set(endBlockHash.slice(0, ANCHOR.BLOCK_HASH_BYTES), offset);\r\n    offset += ANCHOR.BLOCK_HASH_BYTES;\r\n\r\n    const vrfSeedBytes = this.hexToBytes(vrfSeed, ANCHOR.VRF_SEED_BYTES);\r\n    buffer.set(vrfSeedBytes, offset);\r\n    offset += ANCHOR.VRF_SEED_BYTES;\r\n\r\n    buffer[offset++] = moveCount;\r\n    buffer[offset++] = qrngPulseCount;\r\n\r\n    const score = Math.min(finalScore ?? 0, 65535);\r\n    buffer[offset++] = (score >> 8) & 0xff;\r\n    buffer[offset++] = score & 0xff;\r\n\r\n    const coins = Math.min(coinsCollected ?? 0, 65535);\r\n    buffer[offset++] = (coins >> 8) & 0xff;\r\n    buffer[offset++] = coins & 0xff;\r\n\r\n    for (let i = 0; i < qrngPulseCount; i++) {\r\n      const pulse = qrngPulses[i];\r\n      const idx = pulse.pulseIndex ?? 0;\r\n      buffer[offset++] = (idx >> 24) & 0xff;\r\n      buffer[offset++] = (idx >> 16) & 0xff;\r\n      buffer[offset++] = (idx >> 8) & 0xff;\r\n      buffer[offset++] = idx & 0xff;\r\n\r\n      const fragment = pulse.pulseValue ?? new Uint8Array(8);\r\n      buffer.set(fragment.slice(0, ANCHOR.QRNG_PULSE_FRAGMENT_BYTES), offset);\r\n      offset += ANCHOR.QRNG_PULSE_FRAGMENT_BYTES;\r\n    }\r\n\r\n    buffer.set(packedMoves, offset);\r\n\r\n    return buffer;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Move packing (variable-length: 16 bytes for MOVE, 8 bytes for others)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Pack a move history array into a contiguous binary buffer.\r\n   * Returns a Uint8Array of variable length (each move is 8 or 16 bytes).\r\n   */\r\n  packMovesToBinary(moveHistory) {\r\n    const moves = Array.isArray(moveHistory) ? moveHistory : [];\r\n    if (moves.length === 0) {\r\n      this._lastPackedMoveCount = 0;\r\n      return new Uint8Array(0);\r\n    }\r\n\r\n    const packedMoves = [];\r\n    let prevTimestamp = moves[0].timestamp;\r\n\r\n    for (let i = 0; i < moves.length && packedMoves.length < ANCHOR.MAX_MOVES; i++) {\r\n      const move = moves[i];\r\n      let timeDelta = i === 0 ? 0 : move.timestamp - prevTimestamp;\r\n\r\n      // Insert NOP padding for large time gaps\r\n      while (timeDelta > ANCHOR.NOP_HEARTBEAT_MS && packedMoves.length < ANCHOR.MAX_MOVES) {\r\n        packedMoves.push(\r\n          this.packSingleMove({\r\n            action: \"none\",\r\n            lane: 0,\r\n            timeDelta: ANCHOR.TIME_DELTA_MAX,\r\n            vrfOutput: null,\r\n          }),\r\n        );\r\n        timeDelta -= ANCHOR.NOP_HEARTBEAT_MS;\r\n      }\r\n\r\n      if (packedMoves.length < ANCHOR.MAX_MOVES) {\r\n        const scaledDelta = Math.min(\r\n          Math.floor(timeDelta / ANCHOR.TIME_DELTA_SCALE),\r\n          ANCHOR.TIME_DELTA_MAX,\r\n        );\r\n        const isGameEvent = move.isGameEvent === true;\r\n        const coinsTotal = isGameEvent\r\n          ? (move.eventData?.total ?? move.coinsTotal ?? 0)\r\n          : 65535;\r\n        packedMoves.push(\r\n          this.packSingleMove({\r\n            action: move.action,\r\n            lane: move.lane ?? 0,\r\n            timeDelta: scaledDelta,\r\n            vrfOutput: move.vrfOutput,\r\n            coinsTotal,\r\n            x: move.x,\r\n            y: move.y,\r\n            z: move.z,\r\n            subId: move.subId,\r\n          }),\r\n        );\r\n      }\r\n\r\n      prevTimestamp = move.timestamp;\r\n    }\r\n\r\n    this._lastPackedMoveCount = packedMoves.length;\r\n\r\n    // Concatenate all packets (variable sizes)\r\n    let totalBytes = 0;\r\n    for (const p of packedMoves) totalBytes += p.length;\r\n\r\n    const result = new Uint8Array(totalBytes);\r\n    let off = 0;\r\n    for (const p of packedMoves) {\r\n      result.set(p, off);\r\n      off += p.length;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Pack a single move into either a 16-byte (MOVE) or 8-byte (standard) packet.\r\n   */\r\n  packSingleMove(move) {\r\n    const actionCode = this._actionToCode[move.action] ?? this._actionToCode.none ?? 0;\r\n\r\n    if (actionCode === MOVE_ACTION_CODE) {\r\n      return this._packExtendedMove(move, actionCode);\r\n    }\r\n    return this._packStandardMove(move, actionCode);\r\n  }\r\n\r\n  /** 16-byte extended MOVE packet. */\r\n  _packExtendedMove(move, actionCode) {\r\n    const packet = new Uint8Array(ANCHOR.MOVE_PACKET_SIZE_EXTENDED);\r\n\r\n    // Byte 0: (actionCode << 4) | flags\r\n    packet[0] = ((actionCode & 0x0f) << 4) | (0 & 0x0f);\r\n\r\n    // Byte 1: timeDelta\r\n    packet[1] = Math.min(move.timeDelta ?? 0, ANCHOR.TIME_DELTA_MAX);\r\n\r\n    // Bytes 2-3: X (14-bit signed fixed-point)\r\n    const xRaw = encodeCoord14(move.x);\r\n    packet[2] = (xRaw >> 8) & 0xff;\r\n    packet[3] = xRaw & 0xff;\r\n\r\n    // Bytes 4-5: Y\r\n    const yRaw = encodeCoord14(move.y);\r\n    packet[4] = (yRaw >> 8) & 0xff;\r\n    packet[5] = yRaw & 0xff;\r\n\r\n    // Bytes 6-7: Z\r\n    const zRaw = encodeCoord14(move.z);\r\n    packet[6] = (zRaw >> 8) & 0xff;\r\n    packet[7] = zRaw & 0xff;\r\n\r\n    // Bytes 8-11: VRF fragment (4 bytes)\r\n    const vrfFragment = this.hexToBytes(move.vrfOutput ?? \"\", ANCHOR.VRF_FRAGMENT_BYTES);\r\n    packet.set(vrfFragment, 8);\r\n\r\n    // Bytes 12-13: value (coins / reserved)\r\n    const value = Math.min(Math.max(move.coinsTotal ?? 65535, 0), 65535);\r\n    packet[12] = (value >> 8) & 0xff;\r\n    packet[13] = value & 0xff;\r\n\r\n    // Bytes 14-15: reserved\r\n    packet[14] = 0;\r\n    packet[15] = 0;\r\n\r\n    return packet;\r\n  }\r\n\r\n  /** 8-byte standard packet. */\r\n  _packStandardMove(move, actionCode) {\r\n    const packet = new Uint8Array(ANCHOR.MOVE_PACKET_SIZE);\r\n\r\n    const lane = Math.min(Math.max((move.lane ?? 0) + 1, 0), 15);\r\n    packet[0] = ((actionCode & 0x0f) << 4) | (lane & 0x0f);\r\n\r\n    packet[1] = Math.min(move.timeDelta ?? 0, ANCHOR.TIME_DELTA_MAX);\r\n\r\n    const vrfFragment = this.hexToBytes(move.vrfOutput ?? \"\", ANCHOR.VRF_FRAGMENT_BYTES);\r\n    packet.set(vrfFragment, 2);\r\n\r\n    // Bytes 6-7: value/subId (uint16 BE)\r\n    const value = Math.min(Math.max(move.subId ?? move.coinsTotal ?? 0, 0), 65535);\r\n    packet[6] = (value >> 8) & 0xff;\r\n    packet[7] = value & 0xff;\r\n\r\n    return packet;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Move unpacking (v4 legacy format \u2014 header-based binary anchor)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  decodeMovesFromBinary(buffer) {\r\n    if (!buffer || buffer.length < ANCHOR.HEADER_SIZE) return [];\r\n\r\n    const version = buffer[0];\r\n    const moveCount = buffer[49];\r\n    const qrngPulseCount = buffer[50];\r\n    const movesOffset = ANCHOR.HEADER_SIZE + qrngPulseCount * ANCHOR.QRNG_PULSE_SIZE;\r\n\r\n    const moves = [];\r\n    let off = movesOffset;\r\n\r\n    for (let i = 0; i < moveCount; i++) {\r\n      if (off >= buffer.length) break;\r\n\r\n      const actionLane = buffer[off];\r\n      const actionCode = (actionLane >> 4) & 0x0f;\r\n      const pktSize = (version >= 5) ? movePacketSize(actionCode) : ANCHOR.MOVE_PACKET_SIZE;\r\n\r\n      if (off + pktSize > buffer.length) break;\r\n\r\n      if (version >= 5 && actionCode === MOVE_ACTION_CODE) {\r\n        // Extended 16-byte MOVE packet\r\n        const timeDelta = buffer[off + 1];\r\n        const xRaw = (buffer[off + 2] << 8) | buffer[off + 3];\r\n        const yRaw = (buffer[off + 4] << 8) | buffer[off + 5];\r\n        const zRaw = (buffer[off + 6] << 8) | buffer[off + 7];\r\n        const vrfFragment = bytesToHex(buffer.slice(off + 8, off + 12));\r\n        const value = (buffer[off + 12] << 8) | buffer[off + 13];\r\n\r\n        moves.push({\r\n          index: i,\r\n          action: this._codeToAction[actionCode] ?? \"move\",\r\n          actionCode,\r\n          x: decodeCoord14(xRaw),\r\n          y: decodeCoord14(yRaw),\r\n          z: decodeCoord14(zRaw),\r\n          xRaw, yRaw, zRaw,\r\n          timeDeltaScaled: timeDelta,\r\n          timeDeltaMs: timeDelta * ANCHOR.TIME_DELTA_SCALE,\r\n          vrfFragment,\r\n          value,\r\n          isNopHeartbeat: false,\r\n        });\r\n      } else {\r\n        // Standard 8-byte packet\r\n        const lane = (actionLane & 0x0f) - 1;\r\n        const timeDelta = buffer[off + 1];\r\n        const vrfFragment = bytesToHex(buffer.slice(off + 2, off + 6));\r\n        const value = (buffer[off + 6] << 8) | buffer[off + 7];\r\n\r\n        moves.push({\r\n          index: i,\r\n          action: this._codeToAction[actionCode] ?? \"unknown\",\r\n          actionCode,\r\n          lane,\r\n          timeDeltaScaled: timeDelta,\r\n          timeDeltaMs: timeDelta * ANCHOR.TIME_DELTA_SCALE,\r\n          vrfFragment,\r\n          value,\r\n          coinsTotal: value,\r\n          isNopHeartbeat: actionCode === 0,\r\n        });\r\n      }\r\n\r\n      off += pktSize;\r\n    }\r\n\r\n    return moves;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Utility helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  hexToBytes(hex, targetLength) {\r\n    const result = new Uint8Array(targetLength);\r\n    if (!hex || typeof hex !== \"string\") return result;\r\n\r\n    const bytes = hexToBytes(hex);\r\n    result.set(bytes.slice(0, targetLength), 0);\r\n    return result;\r\n  }\r\n\r\n  hashToBytes(str, targetLength) {\r\n    const result = new Uint8Array(targetLength);\r\n    if (!str) return result;\r\n\r\n    const bytes = new TextEncoder().encode(str);\r\n    for (let i = 0; i < targetLength && i < bytes.length; i++) {\r\n      result[i] = bytes[i];\r\n    }\r\n    return result;\r\n  }\r\n\r\n  bytesToHex(bytes) {\r\n    return bytesToHex(bytes);\r\n  }\r\n\r\n  getMerkleRootBytes(root) {\r\n    if (typeof root === \"string\" && root.length >= 64) {\r\n      return hexToBytes(root).slice(0, 32);\r\n    }\r\n    return new Uint8Array(32);\r\n  }\r\n\r\n  txIdToBytes(txId) {\r\n    if (!txId) return new Uint8Array(32);\r\n    if (typeof txId === \"string\" && txId.length >= 64) {\r\n      return hexToBytes(txId).slice(0, 32);\r\n    }\r\n    return new Uint8Array(32);\r\n  }\r\n\r\n  mapOutcome(outcome) {\r\n    const outcomeMap = {\r\n      complete: ANCHOR.OUTCOME_COMPLETE,\r\n      completed: ANCHOR.OUTCOME_COMPLETE,\r\n      finished: ANCHOR.OUTCOME_COMPLETE,\r\n      forfeit: ANCHOR.OUTCOME_FORFEIT,\r\n      forfeited: ANCHOR.OUTCOME_FORFEIT,\r\n      timeout: ANCHOR.OUTCOME_TIMEOUT,\r\n      timed_out: ANCHOR.OUTCOME_TIMEOUT,\r\n      disconnect: ANCHOR.OUTCOME_TIMEOUT,\r\n      cheat: ANCHOR.OUTCOME_CHEAT,\r\n      cheated: ANCHOR.OUTCOME_CHEAT,\r\n      invalid: ANCHOR.OUTCOME_CHEAT,\r\n    };\r\n    return outcomeMap[outcome?.toLowerCase?.()] ?? ANCHOR.OUTCOME_COMPLETE;\r\n  }\r\n}\r\n\r\nexport default BinaryPacker;\r\n", "/**\r\n * merkleTree.js - Lightweight Merkle tree for move hashing\r\n */\r\n\r\nfunction simpleHashHex(input) {\r\n  const str = typeof input === 'string' ? input : JSON.stringify(input);\r\n  let hash = 0x811c9dc5;\r\n  for (let i = 0; i < str.length; i++) {\r\n    hash ^= str.charCodeAt(i);\r\n    hash = (hash * 0x01000193) >>> 0;\r\n  }\r\n  let hex = '';\r\n  for (let i = 0; i < 8; i++) {\r\n    hex += ((hash >> ((i % 4) * 8)) & 0xff).toString(16).padStart(2, '0');\r\n  }\r\n  return hex.repeat(8).slice(0, 64);\r\n}\r\n\r\nexport class GameMerkleTree {\r\n  constructor() {\r\n    this._leaves = [];\r\n    this._moves = [];\r\n    this.root = '';\r\n  }\r\n\r\n  get size() {\r\n    return this._leaves.length;\r\n  }\r\n\r\n  addMove(move) {\r\n    const leafHash = simpleHashHex(move);\r\n    this._leaves.push(leafHash);\r\n    this._moves.push(move);\r\n    this.root = this._computeRoot();\r\n\r\n    const index = this._leaves.length - 1;\r\n    const moveId = `${index}-${leafHash.slice(0, 8)}`;\r\n\r\n    return { index, hash: leafHash, moveId };\r\n  }\r\n\r\n  _computeRoot() {\r\n    if (this._leaves.length === 0) return '';\r\n    let level = [...this._leaves];\r\n    while (level.length > 1) {\r\n      const next = [];\r\n      for (let i = 0; i < level.length; i += 2) {\r\n        const left = level[i];\r\n        const right = level[i + 1] ?? level[i];\r\n        next.push(simpleHashHex(left + right));\r\n      }\r\n      level = next;\r\n    }\r\n    return level[0];\r\n  }\r\n\r\n  getProof(index) {\r\n    if (index < 0 || index >= this._leaves.length) return [];\r\n    const proof = [];\r\n    let idx = index;\r\n    let level = [...this._leaves];\r\n\r\n    while (level.length > 1) {\r\n      const isRight = idx % 2 === 1;\r\n      const pairIndex = isRight ? idx - 1 : idx + 1;\r\n      const pairHash = level[pairIndex] ?? level[idx];\r\n      proof.push({ position: isRight ? 'left' : 'right', hash: pairHash });\r\n\r\n      const next = [];\r\n      for (let i = 0; i < level.length; i += 2) {\r\n        const left = level[i];\r\n        const right = level[i + 1] ?? level[i];\r\n        next.push(simpleHashHex(left + right));\r\n      }\r\n      level = next;\r\n      idx = Math.floor(idx / 2);\r\n    }\r\n\r\n    return proof;\r\n  }\r\n\r\n  getAllMoves() {\r\n    return [...this._moves];\r\n  }\r\n\r\n  getLeaves() {\r\n    return [...this._leaves];\r\n  }\r\n\r\n  clear() {\r\n    this._leaves = [];\r\n    this._moves = [];\r\n    this.root = '';\r\n  }\r\n}\r\n\r\nexport default {\r\n  GameMerkleTree\r\n};\r\n", "/**\r\n * MerkleManager.js - Merkle tree wrapper\r\n */\r\n\r\nimport { GameMerkleTree } from \"../../core/merkleTree.js\";\r\n\r\nexport class MerkleManager {\r\n  constructor() {\r\n    this._tree = new GameMerkleTree();\r\n  }\r\n\r\n  reset() {\r\n    this._tree = new GameMerkleTree();\r\n  }\r\n\r\n  addMove(move) {\r\n    return this._tree.addMove(move);\r\n  }\r\n\r\n  getProof(index) {\r\n    return this._tree.getProof(index);\r\n  }\r\n\r\n  getRoot() {\r\n    return this._tree.root;\r\n  }\r\n\r\n  getAllMoves() {\r\n    return this._tree.getAllMoves();\r\n  }\r\n\r\n  getLeaves() {\r\n    return this._tree.getLeaves();\r\n  }\r\n\r\n  get size() {\r\n    return this._tree.size;\r\n  }\r\n\r\n  clear() {\r\n    this._tree.clear?.();\r\n  }\r\n}\r\n\r\nexport default MerkleManager;\r\n", "/**\r\n * MoveVault.js - Move and proof storage\r\n */\r\n\r\nexport class MoveVault {\r\n  constructor() {\r\n    this._moveHistory = [];\r\n    this._processedMoves = new Map();\r\n    this._vrfProofArchive = [];\r\n  }\r\n\r\n  resetForNewGame() {\r\n    this._moveHistory = [];\r\n    this._processedMoves.clear();\r\n    this._vrfProofArchive = [];\r\n  }\r\n\r\n  clearForStop() {\r\n    this._moveHistory = [];\r\n    this._processedMoves.clear();\r\n  }\r\n\r\n  addMove(move) {\r\n    this._moveHistory.push(move);\r\n  }\r\n\r\n  addGameEvent(event) {\r\n    this._moveHistory.push(event);\r\n  }\r\n\r\n  addProcessedMove(moveId, move) {\r\n    this._processedMoves.set(moveId, move);\r\n  }\r\n\r\n  hasProcessedMove(moveId) {\r\n    return this._processedMoves.has(moveId);\r\n  }\r\n\r\n  addVrfProof(entry) {\r\n    this._vrfProofArchive.push(entry);\r\n  }\r\n\r\n  getMoveHistory() {\r\n    return this._moveHistory;\r\n  }\r\n\r\n  getMoveCount() {\r\n    return this._moveHistory.length;\r\n  }\r\n\r\n  getVrfProofArchive() {\r\n    return this._vrfProofArchive;\r\n  }\r\n\r\n  getProcessedMoves() {\r\n    return this._processedMoves;\r\n  }\r\n}\r\n\r\nexport default MoveVault;\r\n", "/**\r\n * StateSerializer.js - State serialization\r\n */\r\n\r\nexport class StateSerializer {\r\n  serialize({ gameId, playerId, opponentId, moveSequence, merkleManager, moveHistory }) {\r\n    return {\r\n      gameId,\r\n      playerId,\r\n      opponentId,\r\n      moveSequence,\r\n      merkleRoot: merkleManager.getRoot(),\r\n      moveCount: merkleManager.size,\r\n      moves: moveHistory,\r\n      merkleLeaves: merkleManager.getLeaves(),\r\n    };\r\n  }\r\n}\r\n\r\nexport default StateSerializer;\r\n", "/**\r\n * AuditTrail.js - Audit/export data builder\r\n */\r\n\r\nimport { ANCHOR, BLOCKCHAIN, CODE_TO_ACTION } from \"../../core/constants.js\";\r\nimport { hexToBytes, bytesToHex } from \"../../core/cryptoUtils.js\";\r\nimport { parseHeartbeatHex as _sharedParseHB } from \"../anchor/heartbeatParser.js\";\r\n\r\nexport class AuditTrail {\r\n  constructor({ kaspaLink, packer }) {\r\n    this._kaspaLink = kaspaLink ?? null;\r\n    this._packer = packer;\r\n  }\r\n\r\n  setKaspaLink(kaspaLink) {\r\n    this._kaspaLink = kaspaLink;\r\n  }\r\n\r\n  getAuditData(options = {}, state = {}) {\r\n    const { gameIdTagHex } = options || {};\r\n    const {\r\n      gameId,\r\n      resolvedGameIdTagHex,\r\n      sessionController,\r\n      anchorState,\r\n      vault,\r\n      merkleManager,\r\n      opponentMerkleManager,\r\n      finalScore,\r\n      coinsCollected,\r\n      getBinaryAnchor,\r\n      setBinaryAnchor,\r\n    } = state;\r\n\r\n    if (gameIdTagHex && resolvedGameIdTagHex && String(gameIdTagHex).toLowerCase() !== String(resolvedGameIdTagHex).toLowerCase()) {\r\n      return null;\r\n    }\r\n\r\n    const vrfSeed = sessionController?.vrfSeed ?? null;\r\n    const startBlockHashHex = sessionController?.getStartBlockHashHex?.() ?? null;\r\n    const endBlockHashHex = sessionController?.getEndBlockHashHex?.() ?? null;\r\n    const qrngPulses = sessionController?.qrngPulses ?? [];\r\n\r\n    let binaryAnchor = getBinaryAnchor?.() ?? null;\r\n    if (!binaryAnchor) {\r\n      binaryAnchor = this._packer.packAnchorToBinary({\r\n        gameId,\r\n        sessionController,\r\n        moveHistory: vault.getMoveHistory(),\r\n        finalScore,\r\n        coinsCollected,\r\n      });\r\n      setBinaryAnchor?.(binaryAnchor);\r\n    }\r\n\r\n    const anchorHex = this._packer.bytesToHex(binaryAnchor);\r\n    const decodedMoves = this._packer.decodeMovesFromBinary(binaryAnchor);\r\n\r\n    const anchorChain = anchorState?.anchorChain ?? [];\r\n    const genesisEntropy = anchorState?.genesisEntropy ?? null;\r\n\r\n    return {\r\n      version: ANCHOR.VERSION,\r\n      protocolVersion: \"v5\",\r\n      gameId,\r\n      playerId: anchorState?.playerId ?? null,\r\n      anchorChain: {\r\n        genesisTxId: anchorState?.genesisTxId ?? null,\r\n        lastAnchorTxId: anchorState?.lastAnchorTxId ?? null,\r\n        chain: anchorChain,\r\n        chainLength: anchorChain.length,\r\n      },\r\n      genesisEntropy: genesisEntropy\r\n        ? {\r\n            hashedSeed: this._packer.bytesToHex(genesisEntropy.hashedSeed),\r\n            btcBlockHashes: genesisEntropy.btcBlockHashes.map((h) => this._packer.bytesToHex(h)),\r\n            nistPulseIndex: genesisEntropy.nistPulse?.pulseIndex,\r\n            nistOutputHash: genesisEntropy.nistPulse?.outputHash\r\n              ? this._packer.bytesToHex(genesisEntropy.nistPulse.outputHash)\r\n              : null,\r\n            nistSignature: genesisEntropy.nistPulse?.signature\r\n              ? this._packer.bytesToHex(genesisEntropy.nistPulse.signature)\r\n              : null,\r\n            hasNistSignature: genesisEntropy.nistPulse?.signature?.some((b) => b !== 0) ?? false,\r\n            startDaaScore: genesisEntropy.startDaaScore,\r\n            endDaaScore: genesisEntropy.endDaaScore,\r\n            binaryHex: genesisEntropy.anchorHex,\r\n            binaryBytes: genesisEntropy.binaryAnchor?.length,\r\n          }\r\n        : null,\r\n      binaryAnchor: anchorHex,\r\n      binaryBytes: binaryAnchor.length,\r\n      header: {\r\n        version: ANCHOR.VERSION,\r\n        gameId,\r\n        gameIdTagHex: resolvedGameIdTagHex,\r\n        startBlockHash: startBlockHashHex,\r\n        endBlockHash: endBlockHashHex,\r\n        vrfSeed,\r\n        moveCount: Math.min(vault.getMoveCount(), ANCHOR.MAX_MOVES),\r\n        qrngPulseCount: Math.min(qrngPulses.length, ANCHOR.MAX_QRNG_PULSES),\r\n        finalScore,\r\n        coinsCollected,\r\n      },\r\n      qrngPulses: qrngPulses.map((p) => ({\r\n        pulseIndex: p.pulseIndex,\r\n        pulseFragment: this._packer.bytesToHex(p.pulseValue),\r\n        pulseValue: p.pulseValue,\r\n        signature: p.signature || null,\r\n      })),\r\n      moves: decodedMoves,\r\n      v4MoveHistory: vault.getMoveHistory().map((m) => {\r\n        const entry = {\r\n          sequence: m.sequence,\r\n          action: m.action,\r\n          timestamp: m.timestamp,\r\n          timeDelta: m.timeDelta,\r\n          vrfFragment: m.vrfFragment,\r\n          vrfOutputHex: m.vrfOutput,\r\n          kaspaBlockHashHex: m.kaspaBlockHashHex,\r\n          leafHash: m.leafHash,\r\n          entropySnapshot: m.entropySnapshot ?? null,\r\n        };\r\n        // v5: include x/y/z for MOVE actions, lane for standard\r\n        if (m.x != null) { entry.x = m.x; entry.y = m.y; entry.z = m.z; }\r\n        if (m.lane != null) entry.lane = m.lane;\r\n        return entry;\r\n      }),\r\n      context: {\r\n        playerId: anchorState?.playerId ?? null,\r\n        opponentId: anchorState?.opponentId ?? null,\r\n        merkleRoot: merkleManager.getRoot(),\r\n        totalMoveCount: merkleManager.size,\r\n        merkleLeaves: merkleManager.getLeaves?.() ?? [],\r\n        rawMoveHistory: vault.getMoveHistory(),\r\n      },\r\n      vrfProofs: vault.getVrfProofArchive().map((p) => {\r\n        const entry = {\r\n          moveIndex: p.moveIndex,\r\n          action: p.action,\r\n          timestamp: p.timestamp,\r\n          vrfOutput: p.vrfOutput,\r\n          proof: p.proof,\r\n          blockHash: p.blockHash,\r\n          evidence: p.evidence,\r\n        };\r\n        if (p.x != null) { entry.x = p.x; entry.y = p.y; entry.z = p.z; }\r\n        if (p.lane != null) entry.lane = p.lane;\r\n        return entry;\r\n      }),\r\n      opponent: anchorState?.opponentId\r\n        ? {\r\n            merkleRoot: opponentMerkleManager.getRoot(),\r\n            moveCount: opponentMerkleManager.size,\r\n          }\r\n        : null,\r\n      verification: {\r\n        instructions: [\r\n          \"1. Fetch genesis tx \\u2192 extract BTC hashes, NIST sig, DAA bounds\",\r\n          \"2. Follow prevTxId chain through heartbeats \\u2192 verify move merkle proofs\",\r\n          \"3. Check final tx \\u2192 verify results match merkle tree\",\r\n          \"4. Replay game deterministically from anchored data\",\r\n          \"5. Verify each move VRF was computed with the stated Kaspa block hash\",\r\n        ],\r\n        canonicalLeafHashFormula: \"MOVE: simpleHashHex({action,x,y,z,timeDelta,vrfFragment}), Standard: simpleHashHex({action,lane,timeDelta,vrfFragment})\",\r\n      },\r\n    };\r\n  }\r\n\r\n  async getAuditDataFromDag(options = {}, state = {}) {\r\n    const {\r\n      gameId,\r\n      gameIdTagHex,\r\n      genesisBlockHashHex,\r\n      endBlockHashHex,\r\n      maxSeconds,\r\n      minTimestamp,\r\n      debug,\r\n      disablePrefixFilter,\r\n    } = options || {};\r\n\r\n    const { resolvedGameIdTagHex, computeGameIdTagHex } = state;\r\n\r\n    if (!genesisBlockHashHex) {\r\n      throw new Error(\"genesisBlockHashHex is required\");\r\n    }\r\n\r\n    if (!this._kaspaLink?.walkDagRange) {\r\n      throw new Error(\"KaspaAdapter does not support walkDagRange\");\r\n    }\r\n\r\n    const tagHex =\r\n      gameIdTagHex || resolvedGameIdTagHex || (gameId ? computeGameIdTagHex(gameId) : null);\r\n\r\n    if (!tagHex) {\r\n      throw new Error(\"gameId or gameIdTagHex is required\");\r\n    }\r\n\r\n    const prefixGenesis = `${BLOCKCHAIN.PREFIX_GAME_START_HEX}${tagHex}`.toLowerCase();\r\n    const prefixHeartbeat = `${BLOCKCHAIN.PREFIX_HEARTBEAT_HEX}${tagHex}`.toLowerCase();\r\n    const prefixFinal = `${BLOCKCHAIN.PREFIX_GAME_END_HEX}${tagHex}`.toLowerCase();\r\n\r\n    const chain = [];\r\n    const seenTxIds = new Set();\r\n    let genesisTxId = null;\r\n    let lastAnchorTxId = null;\r\n\r\n    const logFn = debug ? (...args) => console.log(\"[auditDag]\", ...args) : () => {};\r\n\r\n    logFn(\"scan start\", {\r\n      startHash: genesisBlockHashHex,\r\n      endHash: endBlockHashHex || null,\r\n      tagHex,\r\n      maxSeconds: Number.isFinite(maxSeconds) ? maxSeconds : 30,\r\n      minTimestamp: Number.isFinite(minTimestamp) ? minTimestamp : 0,\r\n      disablePrefixFilter: !!disablePrefixFilter,\r\n    });\r\n\r\n    await this._kaspaLink.walkDagRange({\r\n      startHash: genesisBlockHashHex,\r\n      endHash: endBlockHashHex || null,\r\n      prefixes: disablePrefixFilter ? [] : [prefixGenesis, prefixHeartbeat, prefixFinal],\r\n      maxSeconds: Number.isFinite(maxSeconds) ? maxSeconds : 30,\r\n      minTimestamp: Number.isFinite(minTimestamp) ? minTimestamp : 0,\r\n      logFn,\r\n      onMatch: (tx, block) => {\r\n        const payload = String(tx?.payload || \"\")\r\n          .toLowerCase()\r\n          .replace(/^0x/, \"\");\r\n        let type = null;\r\n        let prefixHex = null;\r\n\r\n        if (payload.startsWith(prefixGenesis)) {\r\n          type = \"genesis\";\r\n          prefixHex = prefixGenesis;\r\n        } else if (payload.startsWith(prefixHeartbeat)) {\r\n          type = \"heartbeat\";\r\n          prefixHex = prefixHeartbeat;\r\n        } else if (payload.startsWith(prefixFinal)) {\r\n          type = \"final\";\r\n          prefixHex = prefixFinal;\r\n        }\r\n\r\n        if (!type) return;\r\n\r\n        const txId = tx?.txid || tx?.transactionId || null;\r\n        if (!txId || seenTxIds.has(txId)) return;\r\n        seenTxIds.add(txId);\r\n\r\n        const anchorHex = payload.slice(prefixHex.length);\r\n        const rawTimestamp = tx?.timestamp ?? block?.timestamp ?? null;\r\n        const timestamp = typeof rawTimestamp === \"bigint\" ? Number(rawTimestamp) : rawTimestamp;\r\n        const entry = {\r\n          txId,\r\n          type,\r\n          timestamp,\r\n          blockHash: tx?.blockHash ?? block?.hash ?? null,\r\n          blockDaaScore: tx?.blockDaaScore ?? block?.daaScore ?? null,\r\n          blockBlueScore: tx?.blueScore ?? block?.blueScore ?? null,\r\n          anchorHex,\r\n        };\r\n\r\n        if (type === \"genesis\" && !genesisTxId) {\r\n          genesisTxId = txId;\r\n        }\r\n\r\n        lastAnchorTxId = txId;\r\n        chain.push(entry);\r\n        logFn(\"match\", { type, txId, blockHash: entry.blockHash });\r\n      },\r\n    });\r\n\r\n    logFn(\"scan complete\", { chainLength: chain.length });\r\n\r\n    // Parse binary payloads and build full audit data structure\r\n    return AuditTrail._buildFullAuditFromDag({\r\n      chain,\r\n      genesisTxId,\r\n      lastAnchorTxId,\r\n      gameId: gameId ?? state.gameId ?? null,\r\n      gameIdTagHex: tagHex,\r\n      genesisBlockHashHex,\r\n      endBlockHashHex: endBlockHashHex ?? null,\r\n      disablePrefixFilter: !!disablePrefixFilter,\r\n    });\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Static: DAG anchor parsing\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Build a full audit data structure from parsed DAG chain entries.\r\n   * Mirrors the shape returned by getAuditData() (in-memory mode)\r\n   * so the UI components (RawDataSection, NistSection, AuditVerifier)\r\n   * receive the same data structure regardless of source.\r\n   * @private\r\n   */\r\n  static _buildFullAuditFromDag({ chain, genesisTxId, lastAnchorTxId, gameId, gameIdTagHex, genesisBlockHashHex, endBlockHashHex, disablePrefixFilter }) {\r\n    let genesis = null;\r\n    const heartbeats = [];\r\n    let final = null;\r\n\r\n    for (const entry of chain) {\r\n      if (entry.type === \"genesis\") {\r\n        genesis = AuditTrail._parseGenesisHex(entry.anchorHex);\r\n      } else if (entry.type === \"heartbeat\") {\r\n        const hb = AuditTrail._parseHeartbeatHex(entry.anchorHex);\r\n        if (hb) {\r\n          hb._txId = entry.txId;\r\n          hb._timestamp = entry.timestamp;\r\n          hb._blockHash = entry.blockHash ?? entry.blockHashHex ?? entry.block_hash ?? null;\r\n          hb._blockBlueScore = entry.blockBlueScore ?? entry.blueScore ?? entry.blockBlueScoreHex ?? null;\r\n          heartbeats.push(hb);\r\n        }\r\n      } else if (entry.type === \"final\") {\r\n        final = AuditTrail._parseFinalHex(entry.anchorHex);\r\n        if (final) {\r\n          final._txId = entry.txId;\r\n        }\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500 genesisEntropy \u2500\u2500\r\n    const genesisEntropy = genesis\r\n      ? {\r\n          hashedSeed: genesis.hashedSeed,\r\n          gameIdHash: genesis.gameIdHash,\r\n          btcBlockHashes: genesis.btcBlockHashes,\r\n          nistPulseIndex: genesis.nistPulseIndex,\r\n          nistOutputHash: genesis.nistOutputHash,\r\n          nistSignature: genesis.nistSignature,\r\n          hasNistSignature: genesis.hasNistSignature,\r\n          startDaaScore: genesis.startDaaScore,\r\n          endDaaScore: genesis.endDaaScore,\r\n        }\r\n      : null;\r\n\r\n    // \u2500\u2500 Aggregate moves from heartbeats \u2500\u2500\r\n    const allMoves = [];\r\n    let globalIdx = 0;\r\n    let currentBtcHash =\r\n      Array.isArray(genesis?.btcBlockHashes) && genesis.btcBlockHashes.length > 0\r\n        ? genesis.btcBlockHashes[0]\r\n        : null;\r\n    let currentNistOutputHash = genesis?.nistOutputHash ?? null;\r\n    let sessionTimeMs = 0;\r\n    for (const hb of heartbeats) {\r\n      if (hb.deltaBtcHash) currentBtcHash = hb.deltaBtcHash;\r\n      if (hb.deltaNistPulse?.outputHash) currentNistOutputHash = hb.deltaNistPulse.outputHash;\r\n\r\n      const kaspaBlockHashHex = hb._blockHash ?? null;\r\n      const kaspaBlockBlueScore = hb._blockBlueScore ?? null;\r\n\r\n      for (const m of hb.moves || []) {\r\n        const rawDelta = Number.isFinite(m.rawDelta) ? m.rawDelta : null;\r\n        const timeDelta = Number.isFinite(rawDelta)\r\n          ? rawDelta\r\n          : Number.isFinite(m.timeDeltaMs)\r\n            ? Math.floor(m.timeDeltaMs / ANCHOR.TIME_DELTA_SCALE)\r\n            : 0;\r\n        const timeDeltaMs = Number.isFinite(m.timeDeltaMs)\r\n          ? m.timeDeltaMs\r\n          : timeDelta * ANCHOR.TIME_DELTA_SCALE;\r\n\r\n        sessionTimeMs += timeDeltaMs;\r\n\r\n        const moveEntry = {\r\n          moveIndex: globalIdx,\r\n          sequence: globalIdx,\r\n          action: m.action,\r\n          actionCode: m.actionCode,\r\n          timeDelta,\r\n          timeDeltaMs,\r\n          rawDelta,\r\n          vrfFragment: m.vrfFragment,\r\n          vrfOutputHex: m.vrfFragment,\r\n          timestamp: hb._timestamp ?? null,\r\n          sessionTimeMs,\r\n          leafHash: m.leafHash ?? null,\r\n          kaspaBlockHashHex,\r\n          kaspaBlockBlueScore,\r\n          entropySnapshot: {\r\n            kaspaBlockHash: kaspaBlockHashHex,\r\n            kaspaBlockBlueScore,\r\n            btcHash: currentBtcHash,\r\n            nistOutputHash: currentNistOutputHash,\r\n            isGenesisReinforced: !!genesisTxId && globalIdx === 0,\r\n          },\r\n        };\r\n        // v5: forward coordinate or lane data\r\n        if (m.x != null) { moveEntry.x = m.xRaw ?? m.x; moveEntry.y = m.yRaw ?? m.y; moveEntry.z = m.zRaw ?? m.z; }\r\n        if (m.lane != null) moveEntry.lane = m.lane;\r\n        allMoves.push(moveEntry);\r\n        globalIdx++;\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500 VRF proofs from moves \u2500\u2500\r\n    const vrfProofs = allMoves.map((m) => {\r\n      const vp = {\r\n        moveIndex: m.moveIndex,\r\n        action: m.action,\r\n        vrfOutput: m.vrfFragment,\r\n        vrfOutputHex: m.vrfFragment,\r\n        timeDeltaMs: m.timeDeltaMs,\r\n        rawDelta: m.rawDelta,\r\n        timestamp: m.timestamp,\r\n        sessionTimeMs: m.sessionTimeMs,\r\n        kaspaBlockHashHex: m.kaspaBlockHashHex,\r\n        kaspaBlockBlueScore: m.kaspaBlockBlueScore,\r\n      };\r\n      if (m.x != null) { vp.x = m.x; vp.y = m.y; vp.z = m.z; }\r\n      if (m.lane != null) vp.lane = m.lane;\r\n      return vp;\r\n    });\r\n\r\n    const v4MoveHistory = allMoves.map((m) => {\r\n      const mh = {\r\n        sequence: m.sequence,\r\n        action: m.action,\r\n        timestamp: m.timestamp,\r\n        timeDelta: m.timeDelta,\r\n        timeDeltaMs: m.timeDeltaMs,\r\n        rawDelta: m.rawDelta,\r\n        vrfFragment: m.vrfFragment,\r\n        vrfOutputHex: m.vrfOutputHex,\r\n        kaspaBlockHashHex: m.kaspaBlockHashHex,\r\n        kaspaBlockBlueScore: m.kaspaBlockBlueScore,\r\n        sessionTimeMs: m.sessionTimeMs,\r\n        leafHash: m.leafHash,\r\n        entropySnapshot: m.entropySnapshot ?? null,\r\n      };\r\n      if (m.x != null) { mh.x = m.x; mh.y = m.y; mh.z = m.z; }\r\n      if (m.lane != null) mh.lane = m.lane;\r\n      return mh;\r\n    });\r\n\r\n    // \u2500\u2500 Merkle checkpoints from heartbeats \u2500\u2500\r\n    const merkleLeaves = [];\r\n    heartbeats.forEach((hb, idx) => {\r\n      if (hb.merkleRoot) {\r\n        merkleLeaves.push({\r\n          hash: hb.merkleRoot,\r\n          label: `Heartbeat #${idx + 1} (${hb.moveCount || 0} moves)`,\r\n        });\r\n      }\r\n    });\r\n\r\n    // Final merkle root (from final anchor or last heartbeat)\r\n    let merkleRoot = final?.finalMerkleRoot || null;\r\n    if (!merkleRoot && merkleLeaves.length > 0) {\r\n      merkleRoot = merkleLeaves[merkleLeaves.length - 1].hash;\r\n    }\r\n\r\n    // \u2500\u2500 NIST QRNG pulses: genesis + heartbeat deltas \u2500\u2500\r\n    const qrngPulses = [];\r\n    if (genesis?.nistPulseIndex) {\r\n      qrngPulses.push({\r\n        pulseIndex: genesis.nistPulseIndex,\r\n        pulseValue: genesis.nistOutputHash,\r\n        pulseFragment: genesis.nistOutputHash,\r\n        signature: genesis.nistSignature,\r\n        isFragment: false,\r\n        source: \"genesis\",\r\n      });\r\n    }\r\n    for (const hb of heartbeats) {\r\n      if (hb.deltaNistPulse) {\r\n        qrngPulses.push({\r\n          pulseIndex: hb.deltaNistPulse.pulseIndex,\r\n          pulseValue: hb.deltaNistPulse.outputHash,\r\n          pulseFragment: hb.deltaNistPulse.outputHash,\r\n          signature: hb.deltaNistPulse.signature,\r\n          isFragment: false,\r\n          source: \"heartbeat-delta\",\r\n        });\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500 Anchor counts \u2500\u2500\r\n    const genesisCount = genesis ? 1 : 0;\r\n    const heartbeatCount = heartbeats.length;\r\n    const finalCount = final ? 1 : 0;\r\n\r\n    // \u2500\u2500 Game results from final anchor \u2500\u2500\r\n    const totalMoves = final?.totalMoves ?? allMoves.length;\r\n\r\n    return {\r\n      version: ANCHOR.VERSION,\r\n      protocolVersion: \"v5\",\r\n      source: \"blockchain\",\r\n      gameId,\r\n      timestamp: new Date().toISOString(),\r\n      anchorChain: {\r\n        genesisTxId,\r\n        lastAnchorTxId,\r\n        chain,\r\n        chainLength: chain.length,\r\n      },\r\n      genesisEntropy,\r\n      anchorCounts: {\r\n        total: genesisCount + heartbeatCount + finalCount,\r\n        genesis: genesisCount,\r\n        heartbeats: heartbeatCount,\r\n        final: finalCount,\r\n      },\r\n      header: {\r\n        moveCount: totalMoves,\r\n        finalScore: final?.finalScore ?? 0,\r\n        coinsCollected: final?.coinsCollected ?? 0,\r\n        raceTimeMs: final?.raceTimeMs ?? 0,\r\n        gameIdTagHex,\r\n      },\r\n      gameResults: {\r\n        score: final?.finalScore ?? 0,\r\n        coins: final?.coinsCollected ?? 0,\r\n        progress: final ? 1 : 0,\r\n        endReason: final?.outcomeLabel ?? \"unknown\",\r\n      },\r\n      context: {\r\n        merkleRoot,\r\n        totalMoveCount: totalMoves,\r\n        merkleLeaves,\r\n        rawMoveHistory: v4MoveHistory,\r\n      },\r\n      merkle: {\r\n        root: merkleRoot,\r\n        leaves: merkleLeaves,\r\n        leafCount: merkleLeaves.length,\r\n      },\r\n      moves: allMoves,\r\n      v4MoveHistory,\r\n      vrfProofs,\r\n      qrngPulses,\r\n      dagScan: {\r\n        gameId,\r\n        gameIdTagHex,\r\n        startBlockHash: genesisBlockHashHex,\r\n        endBlockHash: endBlockHashHex ?? null,\r\n        disablePrefixFilter: !!disablePrefixFilter,\r\n      },\r\n      errors: [],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Parse a genesis anchor payload (hex after prefix+tag).\r\n   * Layout: version(1) + type(1) + gameIdHash(32) + hashedSeed(32)\r\n   *       + btcHashes(6\u00D732) + startDaa(8) + endDaa(8) + nistIndex(8)\r\n   *       + nistOutputHash(64) + nistSignature(512) = 858 bytes\r\n   * @private\r\n   */\r\n  static _parseGenesisHex(hex) {\r\n    if (!hex) return null;\r\n    try {\r\n      const bytes = hexToBytes(hex);\r\n      if (bytes.length < ANCHOR.GENESIS_BASE_SIZE) return null;\r\n\r\n      const view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\r\n      let off = 0;\r\n\r\n      const version = bytes[off++];\r\n      const anchorType = bytes[off++];\r\n      if (anchorType !== ANCHOR.TYPE_GENESIS) return null;\r\n\r\n      const gameIdHash = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n      const hashedSeed = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n\r\n      const btcBlockHashes = [];\r\n      for (let i = 0; i < ANCHOR.BTC_BLOCK_COUNT; i++) {\r\n        const h = bytesToHex(bytes.slice(off, off + 32));\r\n        if (h !== \"0\".repeat(64)) btcBlockHashes.push(h);\r\n        off += 32;\r\n      }\r\n\r\n      const startDaaScore = Number(view.getBigUint64(off, false)); off += 8;\r\n      const endDaaScore = Number(view.getBigUint64(off, false)); off += 8;\r\n      const nistPulseIndex = Number(view.getBigUint64(off, false)); off += 8;\r\n\r\n      const nistOutputHash = bytesToHex(bytes.slice(off, off + 64)); off += 64;\r\n      const nistSignature = bytesToHex(bytes.slice(off, off + 512)); off += 512;\r\n      const hasNistSignature = nistSignature !== \"0\".repeat(1024);\r\n\r\n      return {\r\n        version, gameIdHash, hashedSeed, btcBlockHashes,\r\n        startDaaScore, endDaaScore,\r\n        nistPulseIndex, nistOutputHash, nistSignature, hasNistSignature,\r\n      };\r\n    } catch { return null; }\r\n  }\r\n\r\n  /**\r\n   * Parse a heartbeat anchor payload (hex after prefix+tag).\r\n   * Delegates to the shared heartbeatParser and flattens into\r\n   * the legacy shape that audit callers expect.\r\n   * @private\r\n   */\r\n  static _parseHeartbeatHex(hex) {\r\n    // The shared parser expects a full payload (prefix+tag+anchor).\r\n    // Audit callers pass just the anchor hex, so call it without prefix/tag.\r\n    const result = _sharedParseHB(hex, {\r\n      prefixHex: \"\",\r\n      tagHex: \"\",\r\n      allowNoPrefix: true,\r\n    });\r\n    if (!result) return null;\r\n\r\n    // Flatten header into top-level for backward compatibility\r\n    return {\r\n      version: result.header.version,\r\n      merkleRoot: result.header.merkleRoot,\r\n      prevTxId: result.header.prevTxId,\r\n      deltaFlags: result.header.deltaFlags,\r\n      moveCount: result.header.moveCount,\r\n      moves: result.moves,\r\n      deltaBtcHash: result.header.deltaBtcHash,\r\n      deltaNistPulse: result.header.deltaNistPulse,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Parse a final anchor payload (hex after prefix+tag).\r\n   * Layout: version(1) + type(1) + finalMerkleRoot(32) + genesisTxId(32)\r\n   *       + prevTxId(32) + resultLeafHash(32) + finalScore(4)\r\n   *       + coinsCollected(4) + raceTimeMs(4) + outcome(1) + totalMoves(1) = 144\r\n   * @private\r\n   */\r\n  static _parseFinalHex(hex) {\r\n    if (!hex) return null;\r\n    try {\r\n      const bytes = hexToBytes(hex);\r\n      if (bytes.length < ANCHOR.FINAL_SIZE) return null;\r\n\r\n      const view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\r\n      let off = 0;\r\n\r\n      const version = bytes[off++];\r\n      const anchorType = bytes[off++];\r\n      if (anchorType !== ANCHOR.TYPE_FINAL) return null;\r\n\r\n      const finalMerkleRoot = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n      const genesisTxId = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n      const prevTxId = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n      const resultLeafHash = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n\r\n      const finalScore = view.getUint32(off, false); off += 4;\r\n      const coinsCollected = view.getUint32(off, false); off += 4;\r\n      const raceTimeMs = view.getUint32(off, false); off += 4;\r\n      const outcome = bytes[off++];\r\n      const totalMoves = bytes[off++];\r\n\r\n      const outcomeLabels = {\r\n        [ANCHOR.OUTCOME_COMPLETE]: \"complete\",\r\n        [ANCHOR.OUTCOME_FORFEIT]: \"forfeit\",\r\n        [ANCHOR.OUTCOME_TIMEOUT]: \"timeout\",\r\n        [ANCHOR.OUTCOME_CHEAT]: \"cheat\",\r\n      };\r\n\r\n      return {\r\n        version, finalMerkleRoot, genesisTxId, prevTxId, resultLeafHash,\r\n        finalScore, coinsCollected, raceTimeMs,\r\n        outcome, totalMoves,\r\n        outcomeLabel: outcomeLabels[outcome] || \"unknown\",\r\n      };\r\n    } catch { return null; }\r\n  }\r\n}\r\n\r\nexport default AuditTrail;\r\n", "/**\r\n * heartbeatParser.js - Parse inbound heartbeat anchor payloads (v4 + v5 Union Protocol)\r\n *\r\n * Pure-function module: no side-effects, no state, no imports beyond constants.\r\n * Extracts the same logic that AuditTrail._parseHeartbeatHex uses, so both\r\n * live-gameplay and post-game audit share one canonical parser.\r\n *\r\n * v5 heartbeats use a union-style layout:\r\n *   - Action code 1 (MOVE): 16-byte extended packet with X/Y/Z\r\n *   - All other action codes: 8-byte standard packet\r\n *\r\n * @module heartbeatParser\r\n */\r\n\r\nimport {\r\n  ANCHOR, CODE_TO_ACTION, BLOCKCHAIN,\r\n  MOVE_ACTION_CODE, decodeCoord14, movePacketSize,\r\n} from \"../../core/constants.js\";\r\nimport { hexToBytes, bytesToHex } from \"../../core/cryptoUtils.js\";\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Public API\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Parse a raw heartbeat payload hex string into a structured object.\r\n *\r\n * @param {string} payloadHex - The full tx.payload hex (prefix + tag + anchor binary).\r\n * @param {Object}  ctx\r\n * @param {string}  ctx.prefixHex - Expected prefix (e.g. BLOCKCHAIN.PREFIX_HEARTBEAT_HEX).\r\n * @param {string}  ctx.tagHex   - Game-ID tag hex (8 hex chars / 4 bytes).\r\n * @param {boolean} [ctx.allowNoPrefix=false] - If true, try parsing raw anchor hex when prefix/tag mismatch.\r\n * @param {Object}  [ctx.codeToAction] - Optional custom code\u2192action map for resolving action strings.\r\n * @returns {{ header: HeartbeatHeader, moves: ParsedMove[] } | null}\r\n */\r\nexport function parseHeartbeatHex(payloadHex, { prefixHex, tagHex, allowNoPrefix = false, codeToAction } = {}) {\r\n  if (!payloadHex || typeof payloadHex !== \"string\") return null;\r\n\r\n  const resolver = codeToAction ?? CODE_TO_ACTION;\r\n\r\n  // Strip prefix + tag to isolate the binary anchor portion\r\n  const expectedStart = ((prefixHex ?? \"\") + (tagHex ?? \"\")).toLowerCase();\r\n  const payloadLower = payloadHex.toLowerCase();\r\n  \r\n  if (expectedStart && payloadLower.startsWith(expectedStart)) {\r\n    const anchorHex = payloadHex.slice(expectedStart.length);\r\n    return _parseAnchorHex(anchorHex, resolver);\r\n  }\r\n  \r\n  if (allowNoPrefix) {\r\n    return _parseAnchorHex(payloadHex, resolver);\r\n  }\r\n  \r\n  return null;\r\n}\r\n\r\n/**\r\n * Enrich raw parsed moves with session context (moveId, playerId, sessionTimeMs).\r\n *\r\n * Uses a TimeAccumulator so cumulative time persists across heartbeat batches:\r\n *   Heartbeat #1 ends at 500 ms \u2192 Heartbeat #2 move-0 starts at 550 ms.\r\n *\r\n * @param {Object}   parsed       - Output of parseHeartbeatHex().\r\n * @param {Object}   ctx\r\n * @param {string}   ctx.txId     - The transaction ID that carried this heartbeat.\r\n * @param {string}   ctx.playerId - Contextual player ID (opponent resolved by caller).\r\n * @param {{ value: number }} ctx.timeAccumulator\r\n * @returns {EnrichedMove[]}\r\n */\r\nexport function enrichMoves(parsed, { txId, playerId, timeAccumulator }) {\r\n  if (!parsed?.moves?.length) return [];\r\n\r\n  const enriched = [];\r\n  for (let i = 0; i < parsed.moves.length; i++) {\r\n    const m = parsed.moves[i];\r\n    timeAccumulator.value += m.timeDeltaMs;\r\n\r\n    const base = {\r\n      moveId: `${txId}-${i}`,\r\n      playerId,\r\n      action: m.action,\r\n      actionCode: m.actionCode,\r\n      timeDeltaMs: m.timeDeltaMs,\r\n      rawDelta: m.rawDelta,\r\n      vrfFragment: m.vrfFragment,\r\n      sessionTimeMs: timeAccumulator.value,\r\n      sequence: i,\r\n      txId,\r\n    };\r\n\r\n    if (m.actionCode === MOVE_ACTION_CODE) {\r\n      // Extended MOVE \u2014 forward x, y, z\r\n      base.x = m.x;\r\n      base.y = m.y;\r\n      base.z = m.z;\r\n      base.xRaw = m.xRaw;\r\n      base.yRaw = m.yRaw;\r\n      base.zRaw = m.zRaw;\r\n      base.value = m.value;\r\n    } else {\r\n      // Standard \u2014 forward lane and value/coinsTotal\r\n      base.lane = m.lane;\r\n      base.coinsTotal = m.coinsTotal;\r\n      base.value = m.value;\r\n    }\r\n\r\n    enriched.push(base);\r\n  }\r\n  return enriched;\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// Internal\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * Parse the binary anchor hex (everything after prefix+tag).\r\n *\r\n * v4 layout: fixed 8-byte packets, 68-byte header\r\n * v5 layout: union 8/16-byte packets, 70-byte header (movesSectionLength added)\r\n *\r\n * @param {string} hex\r\n * @param {Object} codeToAction - code \u2192 action string map\r\n * @returns {{ header: HeartbeatHeader, moves: ParsedMove[] } | null}\r\n * @private\r\n */\r\nfunction _parseAnchorHex(hex, codeToAction) {\r\n  if (!hex) return null;\r\n  try {\r\n    const bytes = hexToBytes(hex);\r\n\r\n    // Need at least the v4 header size to check version\r\n    if (bytes.length < ANCHOR.HEARTBEAT_HEADER_SIZE_V4) return null;\r\n\r\n    const view = new DataView(bytes.buffer, bytes.byteOffset, bytes.byteLength);\r\n    const version = bytes[0];\r\n\r\n    if (version >= 5) {\r\n      return _parseV5(bytes, view, codeToAction);\r\n    }\r\n    return _parseV4(bytes, view, codeToAction);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * v4 parser \u2014 fixed 8-byte packets, 68-byte header (backward compat).\r\n */\r\nfunction _parseV4(bytes, view, codeToAction) {\r\n  let off = 0;\r\n\r\n  const version = bytes[off++];\r\n  const anchorType = bytes[off++];\r\n  if (anchorType !== ANCHOR.TYPE_HEARTBEAT) return null;\r\n\r\n  const merkleRoot = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n  const prevTxId   = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n  const deltaFlags = bytes[off++];\r\n  const moveCount  = bytes[off++];\r\n\r\n  const moves = [];\r\n  for (let i = 0; i < moveCount && off + ANCHOR.MOVE_PACKET_SIZE <= bytes.length; i++) {\r\n    const actionLane = bytes[off++];\r\n    const timeDelta  = bytes[off++];\r\n    const vrfFragment = bytesToHex(bytes.slice(off, off + ANCHOR.VRF_FRAGMENT_BYTES));\r\n    off += ANCHOR.VRF_FRAGMENT_BYTES;\r\n    const coinsTotal = (bytes[off] << 8) | bytes[off + 1];\r\n    off += 2;\r\n\r\n    const actionCode = (actionLane >> 4) & 0x0f;\r\n    const lane       = actionLane & 0x0f;\r\n\r\n    moves.push({\r\n      action: codeToAction[actionCode] || `unknown_${actionCode}`,\r\n      actionCode,\r\n      lane,\r\n      timeDeltaMs: timeDelta * ANCHOR.TIME_DELTA_SCALE,\r\n      rawDelta: timeDelta,\r\n      vrfFragment,\r\n      coinsTotal,\r\n      value: coinsTotal,\r\n    });\r\n  }\r\n\r\n  const deltas = _parseDeltas(bytes, off, deltaFlags, view);\r\n\r\n  return {\r\n    header: { version, merkleRoot, prevTxId, deltaFlags, moveCount, ...deltas },\r\n    moves,\r\n  };\r\n}\r\n\r\n/**\r\n * v5 parser \u2014 union 8/16-byte packets, 70-byte header.\r\n */\r\nfunction _parseV5(bytes, view, codeToAction) {\r\n  let off = 0;\r\n\r\n  const version = bytes[off++];\r\n  const anchorType = bytes[off++];\r\n  if (anchorType !== ANCHOR.TYPE_HEARTBEAT) return null;\r\n\r\n  const merkleRoot = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n  const prevTxId   = bytesToHex(bytes.slice(off, off + 32)); off += 32;\r\n  const deltaFlags = bytes[off++];\r\n  const moveCount  = bytes[off++];\r\n  const movesSectionLength = (bytes[off] << 8) | bytes[off + 1]; off += 2;\r\n\r\n  const movesStart = off;\r\n  const moves = [];\r\n\r\n  for (let i = 0; i < moveCount; i++) {\r\n    if (off >= bytes.length) break;\r\n\r\n    const actionByte = bytes[off];\r\n    const actionCode = (actionByte >> 4) & 0x0f;\r\n    const pktSize = movePacketSize(actionCode);\r\n\r\n    if (off + pktSize > bytes.length) break;\r\n\r\n    if (actionCode === MOVE_ACTION_CODE) {\r\n      // \u2500\u2500 Extended 16-byte MOVE packet \u2500\u2500\r\n      const timeDelta = bytes[off + 1];\r\n      const xRaw = (bytes[off + 2] << 8) | bytes[off + 3];\r\n      const yRaw = (bytes[off + 4] << 8) | bytes[off + 5];\r\n      const zRaw = (bytes[off + 6] << 8) | bytes[off + 7];\r\n      const vrfFragment = bytesToHex(bytes.slice(off + 8, off + 12));\r\n      const value = (bytes[off + 12] << 8) | bytes[off + 13];\r\n\r\n      moves.push({\r\n        action: codeToAction[actionCode] || \"move\",\r\n        actionCode,\r\n        x: decodeCoord14(xRaw),\r\n        y: decodeCoord14(yRaw),\r\n        z: decodeCoord14(zRaw),\r\n        xRaw, yRaw, zRaw,\r\n        timeDeltaMs: timeDelta * ANCHOR.TIME_DELTA_SCALE,\r\n        rawDelta: timeDelta,\r\n        vrfFragment,\r\n        value,\r\n      });\r\n    } else {\r\n      // \u2500\u2500 Standard 8-byte packet \u2500\u2500\r\n      const lane = actionByte & 0x0f;\r\n      const timeDelta = bytes[off + 1];\r\n      const vrfFragment = bytesToHex(bytes.slice(off + 2, off + 6));\r\n      const value = (bytes[off + 6] << 8) | bytes[off + 7];\r\n\r\n      moves.push({\r\n        action: codeToAction[actionCode] || `unknown_${actionCode}`,\r\n        actionCode,\r\n        lane,\r\n        timeDeltaMs: timeDelta * ANCHOR.TIME_DELTA_SCALE,\r\n        rawDelta: timeDelta,\r\n        vrfFragment,\r\n        coinsTotal: value,\r\n        value,\r\n      });\r\n    }\r\n\r\n    off += pktSize;\r\n  }\r\n\r\n  const deltas = _parseDeltas(bytes, off, deltaFlags, view);\r\n\r\n  return {\r\n    header: { version, merkleRoot, prevTxId, deltaFlags, moveCount, movesSectionLength, ...deltas },\r\n    moves,\r\n  };\r\n}\r\n\r\n/**\r\n * Parse optional BTC / NIST delta sections (shared by v4 and v5).\r\n */\r\nfunction _parseDeltas(bytes, off, deltaFlags, view) {\r\n  let deltaBtcHash = null;\r\n  let deltaNistPulse = null;\r\n\r\n  if (deltaFlags & ANCHOR.DELTA_FLAG_BTC) {\r\n    if (off + 32 <= bytes.length) {\r\n      deltaBtcHash = bytesToHex(bytes.slice(off, off + 32));\r\n      off += 32;\r\n    }\r\n  }\r\n\r\n  if (deltaFlags & ANCHOR.DELTA_FLAG_NIST) {\r\n    if (off + ANCHOR.HEARTBEAT_DELTA_NIST_SIZE <= bytes.length) {\r\n      const pulseIndex = Number(view.getBigUint64(off, false)); off += 8;\r\n      const outputHash = bytesToHex(bytes.slice(off, off + 64)); off += 64;\r\n      const signature  = bytesToHex(bytes.slice(off, off + 512)); off += 512;\r\n      deltaNistPulse = { pulseIndex, outputHash, signature };\r\n    }\r\n  }\r\n\r\n  return { deltaBtcHash, deltaNistPulse };\r\n}\r\n\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n// JSDoc typedefs\r\n// \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n/**\r\n * @typedef {Object} HeartbeatHeader\r\n * @property {number} version\r\n * @property {string} merkleRoot\r\n * @property {string} prevTxId\r\n * @property {number} deltaFlags\r\n * @property {number} moveCount\r\n * @property {number} [movesSectionLength] - v5 only\r\n * @property {string|null} deltaBtcHash\r\n * @property {Object|null} deltaNistPulse\r\n */\r\n\r\n/**\r\n * @typedef {Object} ParsedMove\r\n * @property {string} action\r\n * @property {number} actionCode\r\n * @property {number} [lane]           - Standard packets only\r\n * @property {number} [x]              - MOVE packets only (decoded float)\r\n * @property {number} [y]              - MOVE packets only\r\n * @property {number} [z]              - MOVE packets only\r\n * @property {number} [xRaw]           - MOVE packets only (14-bit raw)\r\n * @property {number} [yRaw]           - MOVE packets only\r\n * @property {number} [zRaw]           - MOVE packets only\r\n * @property {number} timeDeltaMs\r\n * @property {number} rawDelta\r\n * @property {string} vrfFragment\r\n * @property {number} [coinsTotal]     - Standard packets\r\n * @property {number} [value]          - Raw uint16 value field\r\n */\r\n\r\n/**\r\n * @typedef {Object} EnrichedMove\r\n * @property {string} moveId\r\n * @property {string} playerId\r\n * @property {string} action\r\n * @property {number} [lane]\r\n * @property {number} [x]\r\n * @property {number} [y]\r\n * @property {number} [z]\r\n * @property {number} timeDeltaMs\r\n * @property {number} rawDelta\r\n * @property {string} vrfFragment\r\n * @property {number} sessionTimeMs\r\n * @property {number} sequence\r\n * @property {string} txId\r\n */\r\n", "/**\r\n * AnchorStrategy.js - Three-anchor orchestration\r\n */\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\nimport { bytesToHex, hexToBytes, sha256 } from \"../../core/cryptoUtils.js\";\r\nimport {\r\n  BLOCKCHAIN, ANCHOR, ACTION_TO_CODE, ACTION_CODE,\r\n  MOVE_ACTION_CODE, encodeCoord14, movePacketSize,\r\n} from \"../../core/constants.js\";\r\n\r\nconst log = Logger.create(LogModule.anchor.anchorHeartbeat);\r\n\r\nexport class AnchorStrategy {\r\n  constructor({ kaspaLink, wallet, packer, merkleManager, vault, vrf, onEvent } = {}) {\r\n    this._kaspaLink = kaspaLink ?? null;\r\n    this._wallet = wallet ?? null;\r\n    this._packer = packer;\r\n    this._merkleManager = merkleManager;\r\n    this._vault = vault;\r\n    this._vrf = vrf;\r\n    this._onEvent = typeof onEvent === \"function\" ? onEvent : () => {};\r\n\r\n    this._gameId = null;\r\n    this._gameIdTagHex = null;\r\n    this._isActive = false;\r\n\r\n    this._anchorTimerId = null;\r\n    this._anchorBackoffTimeoutId = null;\r\n    this._isSending = false;\r\n    this._heartbeatDisabled = false;\r\n    this._lastAnchorTime = 0;\r\n    this._lastAnchoredMoveCount = 0;\r\n    this._anchorFailCount = 0;\r\n    this._consecutiveFailures = 0;\r\n\r\n    this._genesisTxId = null;\r\n    this._lastAnchorTxId = null;\r\n    this._anchorChain = [];\r\n    this._genesisEntropy = null;\r\n\r\n    this._binaryAnchor = null;\r\n  }\r\n\r\n  setKaspaLink(kaspaLink) {\r\n    this._kaspaLink = kaspaLink;\r\n  }\r\n\r\n  setWallet(wallet) {\r\n    this._wallet = wallet;\r\n  }\r\n\r\n  setGameContext({ gameId, gameIdTagHex }) {\r\n    this._gameId = gameId ?? null;\r\n    this._gameIdTagHex = gameIdTagHex ?? null;\r\n  }\r\n\r\n  start() {\r\n    this._isActive = true;\r\n    this._heartbeatDisabled = true;\r\n    this._kaspaLink?.setHeartbeatAnchorsEnabled?.(true);\r\n\r\n    this._lastAnchorTime = Date.now();\r\n    this._lastAnchoredMoveCount = 0;\r\n    this._anchorFailCount = 0;\r\n    this._consecutiveFailures = 0;\r\n\r\n    this._genesisTxId = null;\r\n    this._lastAnchorTxId = null;\r\n    this._anchorChain = [];\r\n    this._genesisEntropy = null;\r\n    this._binaryAnchor = null;\r\n  }\r\n\r\n  stop() {\r\n    this._isActive = false;\r\n    this._heartbeatDisabled = true;\r\n    this._kaspaLink?.setHeartbeatAnchorsEnabled?.(false);\r\n\r\n    if (this._anchorTimerId) {\r\n      clearInterval(this._anchorTimerId);\r\n      this._anchorTimerId = null;\r\n    }\r\n\r\n    if (this._anchorBackoffTimeoutId) {\r\n      clearTimeout(this._anchorBackoffTimeoutId);\r\n      this._anchorBackoffTimeoutId = null;\r\n    }\r\n\r\n    this._wallet?.stopHeartbeat?.();\r\n  }\r\n\r\n  getAnchorState() {\r\n    return {\r\n      genesisTxId: this._genesisTxId,\r\n      lastAnchorTxId: this._lastAnchorTxId,\r\n      anchorChain: [...this._anchorChain],\r\n      genesisEntropy: this._genesisEntropy,\r\n    };\r\n  }\r\n\r\n  getBinaryAnchor() {\r\n    return this._binaryAnchor;\r\n  }\r\n\r\n  get isSending() {\r\n    return this._isSending;\r\n  }\r\n\r\n  get lastAnchoredMoveCount() {\r\n    return this._lastAnchoredMoveCount;\r\n  }\r\n\r\n  _buildAnchorPayload(prefixHex, anchorHex) {\r\n    return `${prefixHex}${this._gameIdTagHex ?? \"\"}${anchorHex}`;\r\n  }\r\n\r\n  _startHeartbeatTimer() {\r\n    if (!this._isActive || this._heartbeatDisabled) return;\r\n    if (this._anchorTimerId) clearInterval(this._anchorTimerId);\r\n\r\n    this._anchorTimerId = setInterval(() => {\r\n      if (this._isActive && !this._isSending) {\r\n        this.sendHeartbeatAnchor();\r\n      }\r\n    }, BLOCKCHAIN.ANCHOR_BATCH_MS);\r\n\r\n    log.debug(\"Anchor heartbeat started\", { intervalMs: BLOCKCHAIN.ANCHOR_BATCH_MS });\r\n  }\r\n\r\n  async anchorGenesisSeed(options = {}) {\r\n    if (!this._kaspaLink) {\r\n      throw new Error(\"KaspaLink not set\");\r\n    }\r\n\r\n    if (this._genesisTxId) {\r\n      log.warn(\"Genesis anchor already sent\", { txId: this._genesisTxId });\r\n      if (this._isActive && this._heartbeatDisabled) {\r\n        this._heartbeatDisabled = false;\r\n        this._startHeartbeatTimer();\r\n      }\r\n      return { success: true, txId: this._genesisTxId, alreadySent: true };\r\n    }\r\n\r\n    const { vrfSeed, startDaaScore, endDaaScore, prefetchedData, retryCount } = options;\r\n\r\n    log.info(\"Preparing genesis anchor...\", {\r\n      startDaaScore,\r\n      endDaaScore,\r\n      hasPrefetchedData: !!prefetchedData,\r\n    });\r\n\r\n    let btcBlockHashes = [];\r\n    try {\r\n      const btcBlocks = prefetchedData?.btcBlocks ?? (await this._kaspaLink.getBitcoinBlocks?.());\r\n      if (btcBlocks && Array.isArray(btcBlocks)) {\r\n        btcBlockHashes = btcBlocks.slice(0, ANCHOR.BTC_BLOCK_COUNT).map((block) => {\r\n          if (typeof block.hash === \"string\") {\r\n            return hexToBytes(block.hash);\r\n          }\r\n          return block.hash instanceof Uint8Array ? block.hash : new Uint8Array(32);\r\n        });\r\n      }\r\n    } catch (e) {\r\n      log.warn(\"Failed to get BTC blocks\", e);\r\n    }\r\n\r\n    while (btcBlockHashes.length < ANCHOR.BTC_BLOCK_COUNT) {\r\n      btcBlockHashes.push(new Uint8Array(32));\r\n    }\r\n\r\n    let nistPulse = {\r\n      pulseIndex: 0,\r\n      outputHash: new Uint8Array(64),\r\n      signature: new Uint8Array(512),\r\n    };\r\n    try {\r\n      const qrng = prefetchedData?.qrng ?? (await this._kaspaLink.getQRNG?.());\r\n      if (qrng) {\r\n        nistPulse.pulseIndex = qrng.pulseIndex ?? 0;\r\n\r\n        const outputHex =\r\n          typeof qrng.outputValue === \"string\"\r\n            ? qrng.outputValue\r\n            : typeof qrng.outputHash === \"string\"\r\n              ? qrng.outputHash\r\n              : typeof qrng.hash === \"string\"\r\n                ? qrng.hash\r\n                : null;\r\n\r\n        if (outputHex) {\r\n          nistPulse.outputHash = hexToBytes(outputHex);\r\n        } else if (qrng.outputValue instanceof Uint8Array) {\r\n          nistPulse.outputHash = qrng.outputValue;\r\n        } else if (qrng.outputHash instanceof Uint8Array) {\r\n          nistPulse.outputHash = qrng.outputHash;\r\n        } else if (qrng.hash instanceof Uint8Array) {\r\n          nistPulse.outputHash = qrng.hash;\r\n        }\r\n\r\n        const signatureHex =\r\n          typeof qrng.signatureValue === \"string\"\r\n            ? qrng.signatureValue\r\n            : typeof qrng.signature === \"string\"\r\n              ? qrng.signature\r\n              : null;\r\n\r\n        if (signatureHex) {\r\n          nistPulse.signature = hexToBytes(signatureHex);\r\n        } else if (qrng.signatureValue instanceof Uint8Array) {\r\n          nistPulse.signature = qrng.signatureValue;\r\n        } else if (qrng.signature instanceof Uint8Array) {\r\n          nistPulse.signature = qrng.signature;\r\n        }\r\n      }\r\n    } catch (e) {\r\n      log.warn(\"Failed to get NIST QRNG\", e);\r\n    }\r\n\r\n    const seedBytes = new TextEncoder().encode(vrfSeed ?? `${this._gameId}:genesis`);\r\n    const hashedSeed = await sha256(seedBytes);\r\n\r\n    const gameIdBytes = new TextEncoder().encode(this._gameId ?? \"unknown\");\r\n    const gameIdHash = await sha256(gameIdBytes);\r\n\r\n    const genesisBuffer = new ArrayBuffer(ANCHOR.GENESIS_BASE_SIZE);\r\n    const genesisView = new DataView(genesisBuffer);\r\n    const genesisBytes = new Uint8Array(genesisBuffer);\r\n\r\n    let offset = 0;\r\n    genesisBytes[offset++] = ANCHOR.VERSION;\r\n    genesisBytes[offset++] = ANCHOR.TYPE_GENESIS;\r\n    genesisBytes.set(gameIdHash.slice(0, 32), offset);\r\n    offset += 32;\r\n    genesisBytes.set(hashedSeed.slice(0, 32), offset);\r\n    offset += 32;\r\n\r\n    for (let i = 0; i < ANCHOR.BTC_BLOCK_COUNT; i++) {\r\n      const hash = btcBlockHashes[i] ?? new Uint8Array(32);\r\n      genesisBytes.set(hash.slice(0, 32), offset);\r\n      offset += 32;\r\n    }\r\n\r\n    const startDaa = BigInt(startDaaScore ?? 0);\r\n    genesisView.setBigUint64(offset, startDaa, false);\r\n    offset += 8;\r\n\r\n    const endDaa = BigInt(endDaaScore ?? 0);\r\n    genesisView.setBigUint64(offset, endDaa, false);\r\n    offset += 8;\r\n\r\n    genesisView.setBigUint64(offset, BigInt(nistPulse.pulseIndex), false);\r\n    offset += 8;\r\n\r\n    const outputHashPadded = new Uint8Array(64);\r\n    outputHashPadded.set(nistPulse.outputHash.slice(0, 64), 0);\r\n    genesisBytes.set(outputHashPadded, offset);\r\n    offset += 64;\r\n\r\n    const signaturePadded = new Uint8Array(512);\r\n    signaturePadded.set(nistPulse.signature.slice(0, 512), 0);\r\n    genesisBytes.set(signaturePadded, offset);\r\n    offset += 512;\r\n\r\n    const genesisHex = bytesToHex(genesisBytes);\r\n\r\n    log.info(\"Genesis anchor built\", {\r\n      bytes: genesisBytes.length,\r\n      btcBlocks: btcBlockHashes.length,\r\n      nistPulseIndex: nistPulse.pulseIndex,\r\n      hasSignature: nistPulse.signature.some((b) => b !== 0),\r\n    });\r\n\r\n    this._genesisEntropy = {\r\n      gameIdHash,\r\n      hashedSeed,\r\n      btcBlockHashes,\r\n      nistPulse,\r\n      startDaaScore: Number(startDaa),\r\n      endDaaScore: Number(endDaa),\r\n      binaryAnchor: genesisBytes,\r\n      anchorHex: genesisHex,\r\n    };\r\n\r\n    this._vrf?.setGenesisEntropy({ btcBlockHashes, nistPulse });\r\n\r\n    const result = { success: false, txId: null, genesisData: this._genesisEntropy };\r\n    const walletInfo = this._wallet?.getWalletInfo?.() ?? {};\r\n\r\n    if (!walletInfo.degradedMode && walletInfo.utxoReady && walletInfo.address && walletInfo.privateKeys) {\r\n      const maxAttempts = Number.isFinite(retryCount) ? Math.max(1, retryCount) : 5;\r\n      const baseDelay = 1500;\r\n      const sendTimeoutMs = 30000;\r\n\r\n      for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n        try {\r\n          log.info(`Sending genesis anchor (attempt ${attempt}/${maxAttempts})...`);\r\n\r\n          if (attempt > 1) {\r\n            const delay = Math.min(baseDelay * Math.pow(1.5, attempt - 1), 10000);\r\n            await new Promise((r) => setTimeout(r, delay));\r\n          }\r\n\r\n          const message = this._buildAnchorPayload(BLOCKCHAIN.PREFIX_GAME_START_HEX, genesisHex);\r\n\r\n          const sendPromise = this._kaspaLink.manualSend({\r\n            fromAddress: walletInfo.address,\r\n            toAddress: walletInfo.address,\r\n            amount: BLOCKCHAIN.ANCHOR_AMOUNT,\r\n            privateKeys: walletInfo.privateKeys,\r\n            priorityFee: 0n,\r\n            payload: message,\r\n            janitorMode: false,\r\n          });\r\n\r\n          const timeoutPromise = new Promise((_, reject) =>\r\n            setTimeout(() => reject(new Error(\"manualSend timeout after 30s\")), sendTimeoutMs),\r\n          );\r\n\r\n          const sendResult = await Promise.race([sendPromise, timeoutPromise]);\r\n\r\n          const txId = sendResult?.transactionId || sendResult?.txId;\r\n\r\n          if (txId) {\r\n            log.info(\"Genesis anchor sent successfully\", { txId, attempt });\r\n\r\n            this._genesisTxId = txId;\r\n            this._lastAnchorTxId = txId;\r\n\r\n            this._anchorChain.push({\r\n              txId,\r\n              type: \"genesis\",\r\n              timestamp: Date.now(),\r\n              moveCount: 0,\r\n            });\r\n\r\n            result.success = true;\r\n            result.txId = txId;\r\n            result.attempts = attempt;\r\n\r\n            this._onEvent(\"genesisAnchored\", {\r\n              txId,\r\n              genesisHex,\r\n              sizeBytes: genesisBytes.length,\r\n              btcBlocks: btcBlockHashes.length,\r\n              nistPulseIndex: nistPulse.pulseIndex,\r\n            });\r\n\r\n            // Notify pool of successful TX for refresh\r\n            this._wallet?.notifyTxResult?.(true);\r\n\r\n            if (this._isActive) {\r\n              this._heartbeatDisabled = false;\r\n              this._startHeartbeatTimer();\r\n            }\r\n\r\n            break;\r\n          }\r\n          throw new Error(\"No transaction ID returned\");\r\n        } catch (e) {\r\n          log.error(`Genesis anchor attempt ${attempt} failed`, e);\r\n          this._wallet?.notifyTxResult?.(false);\r\n\r\n          if (attempt === maxAttempts) {\r\n            this._onEvent(\"genesisAnchorFailed\", {\r\n              error: e.message,\r\n              attempts: attempt,\r\n            });\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      log.warn(\"Cannot send genesis anchor - degraded mode or no UTXOs ready\");\r\n      this._onEvent(\"genesisAnchorFailed\", {\r\n        error: \"Degraded mode or UTXOs not ready\",\r\n        degradedMode: walletInfo.degradedMode,\r\n        utxoReady: walletInfo.utxoReady,\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async sendHeartbeatAnchor(options = {}) {\r\n    if (!this._isActive || this._heartbeatDisabled) return;\r\n\r\n    const walletInfo = this._wallet?.getWalletInfo?.() ?? {};\r\n    if (this._isSending || walletInfo.degradedMode || !walletInfo.utxoReady) return;\r\n    if (!walletInfo.address || !walletInfo.privateKeys) return;\r\n\r\n    const maxAttempts = Number.isFinite(options?.retryCount) ? Math.max(1, options.retryCount) : 1;\r\n    const retryDelayMs = Number.isFinite(options?.retryDelayMs) ? Math.max(0, options.retryDelayMs) : 1000;\r\n\r\n    if (!this._genesisTxId) {\r\n      log.debug(\"Skipping heartbeat - genesis not yet anchored\");\r\n      return;\r\n    }\r\n\r\n    let lastError = null;\r\n    for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n      this._isSending = true;\r\n\r\n      try {\r\n        const moveHistory = this._vault.getMoveHistory();\r\n        const newMoves = moveHistory.slice(this._lastAnchoredMoveCount);\r\n        const moveCount = Math.min(newMoves.length, ANCHOR.MAX_MOVES);\r\n\r\n        const pending = this._vrf?.getPendingDeltas?.() ?? {};\r\n        let deltaFlags = ANCHOR.DELTA_FLAG_NONE;\r\n        if (pending.btc) deltaFlags |= ANCHOR.DELTA_FLAG_BTC;\r\n        if (pending.nist) deltaFlags |= ANCHOR.DELTA_FLAG_NIST;\r\n\r\n        // v5: compute variable-length moves section\r\n        const actionMaps = this._packer?._actionToCode ?? ACTION_TO_CODE;\r\n        let movesSectionLength = 0;\r\n        for (let i = 0; i < moveCount; i++) {\r\n          const ac = actionMaps[newMoves[i].action] ?? ACTION_CODE.NONE;\r\n          movesSectionLength += movePacketSize(ac);\r\n        }\r\n\r\n        let totalSize = ANCHOR.HEARTBEAT_HEADER_SIZE + movesSectionLength;\r\n        if (deltaFlags & ANCHOR.DELTA_FLAG_BTC) totalSize += ANCHOR.HEARTBEAT_DELTA_BTC_SIZE;\r\n        if (deltaFlags & ANCHOR.DELTA_FLAG_NIST) totalSize += ANCHOR.HEARTBEAT_DELTA_NIST_SIZE;\r\n\r\n        const heartbeatBuffer = new ArrayBuffer(totalSize);\r\n        const heartbeatView = new DataView(heartbeatBuffer);\r\n        const heartbeatBytes = new Uint8Array(heartbeatBuffer);\r\n\r\n        let offset = 0;\r\n        heartbeatBytes[offset++] = ANCHOR.VERSION;          // byte 0\r\n        heartbeatBytes[offset++] = ANCHOR.TYPE_HEARTBEAT;   // byte 1\r\n\r\n        const merkleRoot = this._packer.getMerkleRootBytes(this._merkleManager.getRoot());\r\n        heartbeatBytes.set(merkleRoot, offset);\r\n        offset += 32;                                        // bytes 2-33\r\n\r\n        const prevTxIdBytes = this._packer.txIdToBytes(this._lastAnchorTxId);\r\n        heartbeatBytes.set(prevTxIdBytes, offset);\r\n        offset += 32;                                        // bytes 34-65\r\n\r\n        heartbeatBytes[offset++] = deltaFlags;               // byte 66\r\n        heartbeatBytes[offset++] = moveCount;                // byte 67\r\n\r\n        // v5: movesSectionLength (uint16 BE) \u2014 bytes 68-69\r\n        heartbeatBytes[offset++] = (movesSectionLength >> 8) & 0xff;\r\n        heartbeatBytes[offset++] = movesSectionLength & 0xff;\r\n\r\n        let prevTimestamp =\r\n          moveHistory[this._lastAnchoredMoveCount - 1]?.timestamp ?? Date.now();\r\n\r\n        for (let i = 0; i < moveCount; i++) {\r\n          const move = newMoves[i];\r\n          const actionCode = actionMaps[move.action] ?? ACTION_CODE.NONE;\r\n\r\n          const deltaMs = Math.max(0, move.timestamp - prevTimestamp);\r\n          const timeDelta = Math.min(255, Math.floor(deltaMs / ANCHOR.TIME_DELTA_SCALE));\r\n          prevTimestamp = move.timestamp;\r\n\r\n          if (actionCode === MOVE_ACTION_CODE) {\r\n            // \u2500\u2500 Extended 16-byte MOVE packet \u2500\u2500\r\n            heartbeatBytes[offset++] = ((actionCode & 0x0f) << 4) | 0; // byte 0: action + flags\r\n            heartbeatBytes[offset++] = timeDelta;                        // byte 1\r\n\r\n            // Bytes 2-7: X, Y, Z (uint16 BE each, 14-bit signed)\r\n            const xRaw = encodeCoord14(move.x);\r\n            heartbeatBytes[offset++] = (xRaw >> 8) & 0xff;\r\n            heartbeatBytes[offset++] = xRaw & 0xff;\r\n            const yRaw = encodeCoord14(move.y);\r\n            heartbeatBytes[offset++] = (yRaw >> 8) & 0xff;\r\n            heartbeatBytes[offset++] = yRaw & 0xff;\r\n            const zRaw = encodeCoord14(move.z);\r\n            heartbeatBytes[offset++] = (zRaw >> 8) & 0xff;\r\n            heartbeatBytes[offset++] = zRaw & 0xff;\r\n\r\n            // Bytes 8-11: VRF fragment (4 bytes)\r\n            if (move.vrfOutputBytes && move.vrfOutputBytes.length >= 4) {\r\n              heartbeatBytes.set(move.vrfOutputBytes.slice(0, 4), offset);\r\n            }\r\n            offset += 4;\r\n\r\n            // Bytes 12-13: value (coins / reserved)\r\n            const coinsClamped = Math.min(Math.max(move.coinsTotal ?? 65535, 0), 65535);\r\n            heartbeatBytes[offset++] = (coinsClamped >> 8) & 0xff;\r\n            heartbeatBytes[offset++] = coinsClamped & 0xff;\r\n\r\n            // Bytes 14-15: reserved\r\n            heartbeatBytes[offset++] = 0;\r\n            heartbeatBytes[offset++] = 0;\r\n          } else {\r\n            // \u2500\u2500 Standard 8-byte packet \u2500\u2500\r\n            const lane = move.lane ?? 0;\r\n            heartbeatBytes[offset++] = ((actionCode & 0x0f) << 4) | (lane & 0x0f);\r\n            heartbeatBytes[offset++] = timeDelta;\r\n\r\n            if (move.vrfOutputBytes && move.vrfOutputBytes.length >= 4) {\r\n              heartbeatBytes.set(move.vrfOutputBytes.slice(0, 4), offset);\r\n            }\r\n            offset += 4;\r\n\r\n            // Bytes 6-7: value / subId\r\n            const isGameEvent = move.isGameEvent === true || move.eventData != null;\r\n            const coinsTotal = isGameEvent\r\n              ? (move.eventData?.total ??\r\n                move.eventData?.coinsRemaining ??\r\n                move.coinsTotal ??\r\n                move.coinsRemaining ??\r\n                0)\r\n              : (move.subId ?? 65535);\r\n            const coinsClamped = Math.min(Math.max(coinsTotal ?? 0, 0), 65535);\r\n            heartbeatBytes[offset++] = (coinsClamped >> 8) & 0xff;\r\n            heartbeatBytes[offset++] = coinsClamped & 0xff;\r\n          }\r\n        }\r\n\r\n        if (deltaFlags & ANCHOR.DELTA_FLAG_BTC) {\r\n          heartbeatBytes.set(pending.btc.slice(0, 32), offset);\r\n          offset += 32;\r\n          log.info(\"Including BTC delta in heartbeat\");\r\n        }\r\n\r\n        if (deltaFlags & ANCHOR.DELTA_FLAG_NIST) {\r\n          heartbeatView.setBigUint64(offset, BigInt(pending.nist.pulseIndex), false);\r\n          offset += 8;\r\n\r\n          const outputHash = pending.nist.outputHash;\r\n          if (typeof outputHash === \"string\") {\r\n            const hashBytes = hexToBytes(outputHash);\r\n            heartbeatBytes.set(hashBytes.slice(0, 64), offset);\r\n          } else if (outputHash instanceof Uint8Array) {\r\n            heartbeatBytes.set(outputHash.slice(0, 64), offset);\r\n          }\r\n          offset += 64;\r\n\r\n          const signature = pending.nist.signature;\r\n          if (typeof signature === \"string\") {\r\n            const sigBytes = hexToBytes(signature);\r\n            heartbeatBytes.set(sigBytes.slice(0, 512), offset);\r\n          } else if (signature instanceof Uint8Array) {\r\n            heartbeatBytes.set(signature.slice(0, 512), offset);\r\n          }\r\n          offset += 512;\r\n\r\n          log.info(\"Including NIST delta in heartbeat\", { pulseIndex: pending.nist.pulseIndex });\r\n        }\r\n\r\n        const heartbeatHex = bytesToHex(heartbeatBytes);\r\n        const message = this._buildAnchorPayload(BLOCKCHAIN.PREFIX_HEARTBEAT_HEX, heartbeatHex);\r\n\r\n        log.log(\"Sending v5 heartbeat anchor\", {\r\n          moveCount,\r\n          deltaFlags,\r\n          bytes: heartbeatBytes.length,\r\n        });\r\n\r\n        const result = await this._kaspaLink.manualSend({\r\n          fromAddress: walletInfo.address,\r\n          toAddress: walletInfo.address,\r\n          amount: BLOCKCHAIN.ANCHOR_AMOUNT,\r\n          privateKeys: walletInfo.privateKeys,\r\n          priorityFee: 0n,\r\n          payload: message,\r\n        });\r\n\r\n        const txId = result?.transactionId || result?.txId;\r\n\r\n        if (txId) {\r\n          this._lastAnchorTxId = txId;\r\n          this._lastAnchorTime = Date.now();\r\n          this._lastAnchoredMoveCount = moveHistory.length;\r\n          this._consecutiveFailures = 0;\r\n\r\n          this._vrf?.clearPendingDeltas?.();\r\n\r\n          this._anchorChain.push({\r\n            txId,\r\n            type: \"heartbeat\",\r\n            timestamp: Date.now(),\r\n            moveCount,\r\n            deltaFlags,\r\n          });\r\n\r\n          this._onEvent(\"heartbeatAnchored\", {\r\n            txId,\r\n            moveCount,\r\n            deltaFlags,\r\n            prevTxId: prevTxIdBytes ? bytesToHex(prevTxIdBytes) : null,\r\n          });\r\n          this._onEvent(\"anchorSent\", { txId, moveCount: moveHistory.length });\r\n\r\n          // Notify pool of successful TX for refresh\r\n          this._wallet?.notifyTxResult?.(true);\r\n\r\n          log.log(\"V4 heartbeat anchor sent\", { txId, moveCount, deltaFlags });\r\n          return { success: true, txId, moveCount, deltaFlags, attempt };\r\n        }\r\n\r\n        throw new Error(\"No transaction ID returned\");\r\n      } catch (e) {\r\n        this._consecutiveFailures++;\r\n        this._anchorFailCount++;\r\n        lastError = e?.message ?? String(e);\r\n\r\n        // Notify pool of failed TX\r\n        this._wallet?.notifyTxResult?.(false);\r\n\r\n        log.warn(\"Heartbeat anchor failed\", {\r\n          error: e?.message,\r\n          consecutiveFailures: this._consecutiveFailures,\r\n          totalFailures: this._anchorFailCount,\r\n        });\r\n\r\n        if (this._consecutiveFailures >= 5) {\r\n          log.error(\"Too many anchor failures, backing off for 1s\");\r\n          if (this._anchorTimerId) {\r\n            clearInterval(this._anchorTimerId);\r\n            this._anchorTimerId = null;\r\n          }\r\n          if (this._anchorBackoffTimeoutId) {\r\n            clearTimeout(this._anchorBackoffTimeoutId);\r\n          }\r\n          this._anchorBackoffTimeoutId = setTimeout(() => {\r\n            this._anchorBackoffTimeoutId = null;\r\n            if (this._isActive && !this._heartbeatDisabled) {\r\n              this._consecutiveFailures = 0;\r\n              this._startHeartbeatTimer();\r\n            }\r\n          }, 500);\r\n        }\r\n\r\n        this._onEvent(\"anchorFailed\", {\r\n          error: lastError,\r\n          failCount: this._anchorFailCount,\r\n        });\r\n        if (attempt < maxAttempts && retryDelayMs > 0) {\r\n          await new Promise((r) => setTimeout(r, retryDelayMs));\r\n        }\r\n      } finally {\r\n        this._isSending = false;\r\n      }\r\n    }\r\n\r\n    return { success: false, error: lastError ?? \"heartbeat_failed\" };\r\n  }\r\n\r\n  async anchorFinalState(endState, options = {}) {\r\n    if (!this._kaspaLink) {\r\n      throw new Error(\"KaspaLink not set\");\r\n    }\r\n\r\n    this._heartbeatDisabled = true;\r\n    this._kaspaLink.setHeartbeatAnchorsEnabled?.(false);\r\n\r\n    if (this._anchorTimerId) {\r\n      clearInterval(this._anchorTimerId);\r\n      this._anchorTimerId = null;\r\n    }\r\n\r\n    if (this._anchorBackoffTimeoutId) {\r\n      clearTimeout(this._anchorBackoffTimeoutId);\r\n      this._anchorBackoffTimeoutId = null;\r\n    }\r\n\r\n    this._wallet?.stopHeartbeat?.();\r\n\r\n    if (this._isSending) {\r\n      log.info(\"Waiting for pending heartbeat to complete...\");\r\n      await new Promise((r) => setTimeout(r, 2000));\r\n    }\r\n\r\n    const finalScore = endState?.score ?? 0;\r\n    const coinsCollected = endState?.coins ?? endState?.coinsCollected ?? 0;\r\n    const raceTimeMs = endState?.raceTimeMs ?? 0;\r\n    const outcome = this._packer.mapOutcome(endState?.outcome ?? \"complete\");\r\n    const totalMoves = Math.min(this._vault.getMoveCount(), 255);\r\n\r\n    const finalBuffer = new ArrayBuffer(ANCHOR.FINAL_SIZE);\r\n    const finalView = new DataView(finalBuffer);\r\n    const finalBytes = new Uint8Array(finalBuffer);\r\n\r\n    let offset = 0;\r\n    finalBytes[offset++] = ANCHOR.VERSION;\r\n    finalBytes[offset++] = ANCHOR.TYPE_FINAL;\r\n\r\n    const merkleRootBytes = this._packer.getMerkleRootBytes(this._merkleManager.getRoot());\r\n    finalBytes.set(merkleRootBytes, offset);\r\n    offset += 32;\r\n\r\n    const genesisTxIdBytes = this._packer.txIdToBytes(this._genesisTxId);\r\n    finalBytes.set(genesisTxIdBytes, offset);\r\n    offset += 32;\r\n\r\n    const prevTxIdBytes = this._packer.txIdToBytes(this._lastAnchorTxId);\r\n    finalBytes.set(prevTxIdBytes, offset);\r\n    offset += 32;\r\n\r\n    const resultString = `RESULT:${finalScore}:${coinsCollected}:${outcome}:${raceTimeMs}`;\r\n    const resultBytes = new TextEncoder().encode(resultString);\r\n    const resultLeafHash = await sha256(resultBytes);\r\n    finalBytes.set(resultLeafHash, offset);\r\n    offset += 32;\r\n\r\n    finalView.setUint32(offset, finalScore >>> 0, false);\r\n    offset += 4;\r\n    finalView.setUint32(offset, coinsCollected >>> 0, false);\r\n    offset += 4;\r\n    finalView.setUint32(offset, raceTimeMs >>> 0, false);\r\n    offset += 4;\r\n\r\n    finalBytes[offset++] = outcome;\r\n    finalBytes[offset++] = totalMoves;\r\n\r\n    const anchorHex = bytesToHex(finalBytes);\r\n    this._binaryAnchor = finalBytes;\r\n\r\n    log.info(\"V4 Final anchor built\", {\r\n      bytes: finalBytes.length,\r\n      score: finalScore,\r\n      coins: coinsCollected,\r\n      raceTimeMs,\r\n      outcome,\r\n      totalMoves,\r\n      genesisTxId: this._genesisTxId?.substring(0, 16),\r\n      prevTxId: this._lastAnchorTxId?.substring(0, 16),\r\n    });\r\n\r\n    this._onEvent(\"anchorBinaryReady\", {\r\n      binaryAnchor: this._binaryAnchor,\r\n      anchorHex,\r\n      sizeBytes: this._binaryAnchor.length,\r\n      version: ANCHOR.VERSION,\r\n    });\r\n\r\n    const result = {\r\n      success: false,\r\n      txId: null,\r\n      binaryAnchor: this._binaryAnchor,\r\n      anchorHex,\r\n      genesisTxId: this._genesisTxId,\r\n      anchorChain: this._anchorChain,\r\n    };\r\n\r\n    const walletInfo = this._wallet?.getWalletInfo?.() ?? {};\r\n    if (!walletInfo.degradedMode && walletInfo.utxoReady && walletInfo.address && walletInfo.privateKeys) {\r\n      const maxAttempts = Number.isFinite(options?.retryCount) ? Math.max(1, options.retryCount) : 10;\r\n      const baseDelay = 2000;\r\n      let lastError = null;\r\n\r\n      for (let attempt = 1; attempt <= maxAttempts; attempt++) {\r\n        try {\r\n          log.info(`Sending v4 final anchor (attempt ${attempt}/${maxAttempts})...`);\r\n\r\n          if (attempt > 1) {\r\n            const delay = Math.min(baseDelay * Math.pow(1.5, attempt - 1), 15000);\r\n            log.info(`Waiting ${delay}ms for mempool to clear...`);\r\n            await new Promise((r) => setTimeout(r, delay));\r\n          }\r\n\r\n          const message = this._buildAnchorPayload(BLOCKCHAIN.PREFIX_GAME_END_HEX, anchorHex);\r\n\r\n          const sendResult = await this._kaspaLink.manualSend({\r\n            fromAddress: walletInfo.address,\r\n            toAddress: walletInfo.address,\r\n            amount: BLOCKCHAIN.ANCHOR_AMOUNT,\r\n            privateKeys: walletInfo.privateKeys,\r\n            priorityFee: 0n,\r\n            payload: message,\r\n            janitorMode: false,\r\n          });\r\n\r\n          const txId = sendResult?.transactionId || sendResult?.txId;\r\n\r\n          if (txId) {\r\n            log.info(\"V4 Final anchor sent successfully\", { txId, attempt });\r\n\r\n            this._anchorChain.push({\r\n              txId,\r\n              type: \"final\",\r\n              timestamp: Date.now(),\r\n              score: finalScore,\r\n              coins: coinsCollected,\r\n              outcome,\r\n            });\r\n\r\n            result.success = true;\r\n            result.txId = txId;\r\n            result.attempts = attempt;\r\n            result.anchorChain = this._anchorChain;\r\n\r\n            this._onEvent(\"anchorComplete\", {\r\n              txId,\r\n              anchorHex,\r\n              sizeBytes: this._binaryAnchor.length,\r\n              attempts: attempt,\r\n              genesisTxId: this._genesisTxId,\r\n              anchorChain: this._anchorChain,\r\n            });\r\n\r\n            // Notify pool of successful TX\r\n            this._wallet?.notifyTxResult?.(true);\r\n\r\n            break;\r\n          }\r\n          throw new Error(\"No transaction ID returned\");\r\n        } catch (e) {\r\n          lastError = e?.message || String(e);\r\n          log.warn(`Final anchor attempt ${attempt} failed: ${lastError}`);\r\n\r\n          // Notify pool of failed TX\r\n          this._wallet?.notifyTxResult?.(false);\r\n\r\n          const isMempoolConflict =\r\n            lastError.includes(\"already spent\") ||\r\n            lastError.includes(\"mempool\") ||\r\n            lastError.includes(\"double spend\");\r\n\r\n          const isFundsIssue = lastError.includes(\"insufficient\") || lastError.includes(\"not enough\");\r\n\r\n          if (isFundsIssue) {\r\n            log.error(\"Insufficient funds for final anchor\");\r\n            result.error = lastError;\r\n            result.reason = \"insufficient_funds\";\r\n            this._onEvent(\"anchorRetryNeeded\", {\r\n              error: lastError,\r\n              reason: \"insufficient_funds\",\r\n              binaryAnchor: this._binaryAnchor,\r\n              anchorHex,\r\n            });\r\n            break;\r\n          }\r\n\r\n          if (!isMempoolConflict && attempt >= 3) {\r\n            log.error(\"Final anchor failed with non-recoverable error\");\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!result.success && !result.reason) {\r\n        log.error(\"Final anchor failed after all attempts\", { attempts: maxAttempts, lastError });\r\n        result.error = lastError;\r\n        result.reason = \"max_retries_exceeded\";\r\n        result.attempts = maxAttempts;\r\n\r\n        this._onEvent(\"anchorRetryNeeded\", {\r\n          error: lastError,\r\n          reason: \"max_retries_exceeded\",\r\n          binaryAnchor: this._binaryAnchor,\r\n          anchorHex,\r\n        });\r\n      }\r\n\r\n      if (result.success) {\r\n        let utxoCountBefore = null;\r\n        try {\r\n          const utxos = await this._kaspaLink.getUtxos(walletInfo.address);\r\n          utxoCountBefore = Array.isArray(utxos) ? utxos.length : null;\r\n        } catch (e) {\r\n          log.warn(\"Failed to fetch UTXO count before consolidation\", e);\r\n        }\r\n\r\n        const maxConsolidateAttempts = Number.isFinite(options?.consolidateRetryCount)\r\n          ? Math.max(1, options.consolidateRetryCount)\r\n          : 3;\r\n        const consolidateDelayMs = Number.isFinite(options?.consolidateRetryDelayMs)\r\n          ? Math.max(0, options.consolidateRetryDelayMs)\r\n          : 500;\r\n\r\n        for (let attempt = 1; attempt <= maxConsolidateAttempts; attempt++) {\r\n          try {\r\n            if (attempt > 1 && consolidateDelayMs > 0) {\r\n              await new Promise((r) => setTimeout(r, consolidateDelayMs));\r\n            }\r\n\r\n            log.info(\"Consolidating UTXOs...\", { attempt, maxConsolidateAttempts });\r\n            await this._kaspaLink.consolidateUtxos({\r\n              address: walletInfo.address,\r\n              privateKeys: walletInfo.privateKeys,\r\n              targetCount: 1,\r\n              priorityFee: 0n,\r\n            });\r\n\r\n            let utxoCountAfter = null;\r\n            try {\r\n              const utxos = await this._kaspaLink.getUtxos(walletInfo.address);\r\n              utxoCountAfter = Array.isArray(utxos) ? utxos.length : null;\r\n            } catch (e) {\r\n              log.warn(\"Failed to fetch UTXO count after consolidation\", e);\r\n            }\r\n\r\n            const consolidatedCount =\r\n              Number.isFinite(utxoCountBefore) && Number.isFinite(utxoCountAfter)\r\n                ? Math.max(0, utxoCountBefore - utxoCountAfter)\r\n                : null;\r\n\r\n            log.info(\"UTXOs consolidated\", {\r\n              targetCount: 1,\r\n              utxoCountBefore,\r\n              utxoCountAfter,\r\n              consolidatedCount,\r\n            });\r\n            break;\r\n          } catch (e) {\r\n            const message = e?.message ?? String(e);\r\n            const isMempoolConflict =\r\n              message.includes(\"already spent\") || message.includes(\"mempool\") || message.includes(\"double spend\");\r\n\r\n            if (attempt >= maxConsolidateAttempts || !isMempoolConflict) {\r\n              log.warn(\"Failed to consolidate UTXOs\", e);\r\n              break;\r\n            }\r\n\r\n            log.warn(\"Consolidate UTXOs failed (mempool), retrying...\", {\r\n              attempt,\r\n              maxConsolidateAttempts,\r\n            });\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      log.warn(\"Skipping blockchain anchor - degraded mode or UTXOs not ready\");\r\n      result.skipped = true;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  async retryFinalAnchor() {\r\n    if (!this._binaryAnchor) {\r\n      return { success: false, error: \"No binary anchor to retry\" };\r\n    }\r\n\r\n    const walletInfo = this._wallet?.getWalletInfo?.() ?? {};\r\n    if (!this._kaspaLink || !walletInfo.address || !walletInfo.privateKeys) {\r\n      return { success: false, error: \"Wallet not available\" };\r\n    }\r\n\r\n    const anchorHex = bytesToHex(this._binaryAnchor);\r\n\r\n    log.info(\"Retrying final anchor (user-initiated)...\");\r\n\r\n    try {\r\n      await new Promise((r) => setTimeout(r, 3000));\r\n\r\n      const message = this._buildAnchorPayload(BLOCKCHAIN.PREFIX_GAME_END_HEX, anchorHex);\r\n\r\n      const sendResult = await this._kaspaLink.manualSend({\r\n        fromAddress: walletInfo.address,\r\n        toAddress: walletInfo.address,\r\n        amount: BLOCKCHAIN.ANCHOR_AMOUNT,\r\n        privateKeys: walletInfo.privateKeys,\r\n        priorityFee: 0n,\r\n        payload: message,\r\n        janitorMode: false,\r\n      });\r\n\r\n      const txId = sendResult?.transactionId || sendResult?.txId;\r\n\r\n      if (txId) {\r\n        log.info(\"Final anchor retry succeeded\", { txId });\r\n\r\n        this._onEvent(\"anchorComplete\", {\r\n          txId,\r\n          anchorHex,\r\n          sizeBytes: this._binaryAnchor.length,\r\n          isRetry: true,\r\n        });\r\n\r\n        return { success: true, txId };\r\n      }\r\n      throw new Error(\"No transaction ID returned\");\r\n    } catch (e) {\r\n      const error = e?.message || String(e);\r\n      log.error(\"Final anchor retry failed\", error);\r\n      return { success: false, error };\r\n    }\r\n  }\r\n}\r\n\r\nexport default AnchorStrategy;\r\n", "/**\r\n * kaspaAnchorFacade.js - High-level facade for Kaspa anchoring\r\n *\r\n * Single responsibility:\r\n * - Provide a clean, app-agnostic API over MoveProcessor\r\n * - Hide internal mixin complexity from consumers\r\n */\r\n\r\nimport MoveProcessor from './moveProcessor.js';\r\n\r\n/**\r\n * Facade for Kaspa anchoring and audit operations\r\n */\r\nexport class KaspaAnchorFacade {\r\n  /**\r\n   * @param {Object} options\r\n     * @param {Object} [options.adapter] - KaspaAdapter instance\r\n     * @param {Object} [options.kaspaAdapter] - KaspaAdapter instance (alias)\r\n   * @param {Object} [options.sessionController] - SessionController instance\r\n   * @param {Object} [options.moveProcessorOptions] - Additional MoveProcessor options\r\n   */\r\n  constructor(options = {}) {\r\n      const {\r\n        adapter, kaspaAdapter, sessionController, moveProcessorOptions,\r\n        // v5 custom action maps \u2014 forwarded to MoveProcessor\r\n        customActionMap, customAbilitiesMap, customActionsMap,\r\n        customItemsMap, customStatusMap, customEmotesMap, customSystemMap,\r\n      } = options;\r\n      const resolvedAdapter = adapter ?? kaspaAdapter ?? null;\r\n\r\n    this._processor = new MoveProcessor({\r\n        adapter: resolvedAdapter,\r\n      sessionController,\r\n      customActionMap,\r\n      customAbilitiesMap,\r\n      customActionsMap,\r\n      customItemsMap,\r\n      customStatusMap,\r\n      customEmotesMap,\r\n      customSystemMap,\r\n      ...(moveProcessorOptions || {}),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Access to the underlying MoveProcessor (advanced use)\r\n   */\r\n  get processor() {\r\n    return this._processor;\r\n  }\r\n\r\n  get isUtxoReady() {\r\n    return this._processor?.isUtxoReady ?? false;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Initialization / Lifecycle\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  setAdapter(adapter) {\r\n    this._processor.setAdapter(adapter);\r\n  }\r\n\r\n  setKaspaAdapter(adapter) {\r\n    this.setAdapter(adapter);\r\n  }\r\n\r\n  setSessionController(sessionController) {\r\n    this._processor.setSessionController(sessionController);\r\n  }\r\n\r\n  /**\r\n   * Start a new game session\r\n   * @param {Object} options\r\n   */\r\n  startGame(options) {\r\n    this._processor.start(options);\r\n  }\r\n\r\n  /**\r\n   * Stop current session\r\n   */\r\n  async stopGame() {\r\n    return this._processor.stop();\r\n  }\r\n\r\n  /**\r\n   * Destroy facade and cleanup\r\n   */\r\n  destroy() {\r\n    this._processor.destroy();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Core Gameplay Anchoring\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Process a local move (VRF + Merkle + archive)\r\n   */\r\n  async processMove(action, data = {}) {\r\n    return this._processor.processLocalMove(action, data);\r\n  }\r\n\r\n  /**\r\n   * Process a game event for spectator anchoring\r\n   */\r\n  processGameEvent(eventType, data = {}) {\r\n    return this._processor.processGameEvent(eventType, data);\r\n  }\r\n\r\n  /**\r\n   * Receive and validate an opponent move\r\n   */\r\n  async receiveOpponentMove(moveData) {\r\n    return this._processor.receiveOpponentMove(moveData);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Anchors (Genesis \u2192 Heartbeat(s) \u2192 Final)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Anchor genesis seed (entropy capture + chain start)\r\n   */\r\n  async anchorGenesisSeed(options = {}) {\r\n    return this._processor.anchorGenesisSeed(options);\r\n  }\r\n\r\n  /**\r\n   * Force a heartbeat anchor immediately (optional manual trigger)\r\n   */\r\n  async anchorHeartbeatNow(options = {}) {\r\n    if (typeof this._processor._sendHeartbeatAnchor === 'function') {\r\n      return this._processor._sendHeartbeatAnchor(options);\r\n    }\r\n    return { success: false, error: 'Heartbeat anchor method not available' };\r\n  }\r\n\r\n  /**\r\n   * Anchor final state (chain completion)\r\n   */\r\n  async anchorFinalState(endState, options = {}) {\r\n    return this._processor.anchorFinalState(endState, options);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // UTXO / Wallet Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async prepareForGame() {\r\n    return this._processor.prepareForGame();\r\n  }\r\n\r\n  async ensureUtxoPoolReady(options = {}) {\r\n    return this._processor.ensureUtxoPoolReady(options);\r\n  }\r\n\r\n  getPoolStatus() {\r\n    return this._processor.getPoolStatus();\r\n  }\r\n\r\n  async getRunway() {\r\n    return this._processor.getRunway();\r\n  }\r\n\r\n  async getBalanceKas() {\r\n    return this._processor.getBalanceKas();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Audit / Merkle Access\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  getAuditData(options = {}) {\r\n    return this._processor.getAuditData(options);\r\n  }\r\n\r\n  async getAuditDataFromDag(options = {}) {\r\n    return await this._processor.getAuditDataFromDag(options);\r\n  }\r\n\r\n  getMerkleRoot() {\r\n    return this._processor.getMerkleRoot();\r\n  }\r\n\r\n  getMerkleProof(index) {\r\n    return this._processor.getMerkleProof(index);\r\n  }\r\n\r\n  getMoveHistory() {\r\n    return this._processor.getMoveHistory();\r\n  }\r\n\r\n  getMoveCount() {\r\n    return this._processor.getMoveCount();\r\n  }\r\n\r\n  getMerkleLeaves() {\r\n    return this._processor.getMerkleLeaves();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Event Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  on(eventName, handler) {\r\n    this._processor.on(eventName, handler);\r\n    return this;\r\n  }\r\n\r\n  off(eventName, handler) {\r\n    this._processor.off(eventName, handler);\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default KaspaAnchorFacade;\r\n", "/**\r\n * auditCheating.js - On-chain cheating audit orchestrator\r\n */\r\n\r\nimport { ANCHOR } from \"../core/constants.js\";\r\nimport { buildLinkedChain, pickNewest } from \"./cheating/chain.js\";\r\nimport { verifyDaaScores } from \"./cheating/daa.js\";\r\nimport { verifyEntropySources } from \"./cheating/entropy.js\";\r\nimport { verifyFinalResultHash } from \"./cheating/finalResult.js\";\r\nimport { verifyMerkleAndMoves } from \"./cheating/merkle.js\";\r\nimport {\r\n  normalizeAuditInput,\r\n  normalizeMoveHistory,\r\n} from \"./cheating/normalize.js\";\r\nimport { formatOutcome } from \"./cheating/outcome.js\";\r\nimport { parseAnchorByType } from \"./cheating/parsing.js\";\r\nimport { addReason, addWarning, normalizeHex } from \"./cheating/utils.js\";\r\nimport { verifyVrfChain } from \"./cheating/vrfChain.js\";\r\n\r\nexport async function auditCheating(input) {\r\n  if (input?.source !== \"blockchain\") {\r\n    return {\r\n      passed: false,\r\n      verdict: \"fail\",\r\n      reasons: [\"audit_source_not_blockchain\"],\r\n      warnings: [],\r\n    };\r\n  }\r\n\r\n  const audit = normalizeAuditInput(input);\r\n  const chain = audit.chain;\r\n  if (!Array.isArray(chain) || chain.length === 0) {\r\n    return {\r\n      passed: false,\r\n      verdict: \"fail\",\r\n      reasons: [\"missing_anchor_chain\"],\r\n      warnings: [],\r\n    };\r\n  }\r\n\r\n  const reasons = [];\r\n  const warnings = [];\r\n\r\n  const anchorsByTxId = new Map();\r\n  const parsedByTxId = new Map();\r\n  const genesisAnchors = [];\r\n  const finalAnchors = [];\r\n  const heartbeatAnchors = [];\r\n\r\n  for (const anchor of chain) {\r\n    const txId = normalizeHex(anchor?.txId);\r\n    if (!txId) {\r\n      addWarning(warnings, \"anchor_missing_txid\");\r\n      continue;\r\n    }\r\n    anchorsByTxId.set(txId, anchor);\r\n\r\n    const type = String(anchor?.type || \"\").toLowerCase();\r\n    if (type === \"genesis\") genesisAnchors.push(anchor);\r\n    if (type === \"final\") finalAnchors.push(anchor);\r\n    if (type === \"heartbeat\") heartbeatAnchors.push(anchor);\r\n\r\n    const parsed = parseAnchorByType(type, anchor?.anchorHex || \"\");\r\n    if (parsed.error) {\r\n      addReason(reasons, parsed.error);\r\n    }\r\n    if (\r\n      type === \"genesis\" &&\r\n      parsed.anchorType &&\r\n      parsed.anchorType !== ANCHOR.TYPE_GENESIS\r\n    ) {\r\n      addReason(reasons, \"genesis_anchor_type_mismatch\");\r\n    }\r\n    if (\r\n      type === \"heartbeat\" &&\r\n      parsed.anchorType &&\r\n      parsed.anchorType !== ANCHOR.TYPE_HEARTBEAT\r\n    ) {\r\n      addReason(reasons, \"heartbeat_anchor_type_mismatch\");\r\n    }\r\n    if (\r\n      type === \"final\" &&\r\n      parsed.anchorType &&\r\n      parsed.anchorType !== ANCHOR.TYPE_FINAL\r\n    ) {\r\n      addReason(reasons, \"final_anchor_type_mismatch\");\r\n    }\r\n    parsedByTxId.set(txId, parsed);\r\n  }\r\n\r\n  if (genesisAnchors.length === 0) {\r\n    addReason(reasons, \"missing_genesis_anchor\");\r\n  }\r\n  if (finalAnchors.length === 0) {\r\n    addReason(reasons, \"missing_final_anchor\");\r\n  }\r\n\r\n  const genesisAnchor = pickNewest(genesisAnchors);\r\n  const finalAnchor = pickNewest(finalAnchors);\r\n  const finalTxId = normalizeHex(finalAnchor?.txId);\r\n  const genesisTxId = normalizeHex(genesisAnchor?.txId);\r\n  const finalData = parsedByTxId.get(finalTxId) || {};\r\n\r\n  if (finalData.anchorType && finalData.anchorType !== ANCHOR.TYPE_FINAL) {\r\n    addReason(reasons, \"final_anchor_type_mismatch\");\r\n  }\r\n  if (\r\n    genesisTxId &&\r\n    finalData.genesisTxId &&\r\n    finalData.genesisTxId !== genesisTxId\r\n  ) {\r\n    addReason(reasons, \"final_genesis_txid_mismatch\");\r\n  }\r\n\r\n  const chainOrder = buildLinkedChain(\r\n    finalTxId,\r\n    genesisTxId,\r\n    anchorsByTxId,\r\n    parsedByTxId,\r\n    reasons,\r\n  );\r\n\r\n  if (chainOrder.length > 0) {\r\n    const orphaned = chain.filter((anchor) => {\r\n      const txId = normalizeHex(anchor?.txId);\r\n      return (\r\n        txId && !chainOrder.some((item) => normalizeHex(item?.txId) === txId)\r\n      );\r\n    });\r\n    if (orphaned.length > 0) {\r\n      addWarning(warnings, \"unlinked_anchors_detected\");\r\n    }\r\n  }\r\n\r\n  const orderedHeartbeats = chainOrder.filter(\r\n    (anchor) => String(anchor?.type || \"\").toLowerCase() === \"heartbeat\",\r\n  );\r\n\r\n  const genesisData = parsedByTxId.get(genesisTxId) || {};\r\n  await verifyEntropySources({\r\n    genesisData,\r\n    heartbeats: orderedHeartbeats,\r\n    parsedByTxId,\r\n    reasons,\r\n    warnings,\r\n  });\r\n  verifyDaaScores({\r\n    genesisAnchor,\r\n    finalAnchor,\r\n    genesisData,\r\n    reasons,\r\n    warnings,\r\n  });\r\n\r\n  const heartbeatMoveSum = orderedHeartbeats.reduce((sum, anchor) => {\r\n    const parsed = parsedByTxId.get(normalizeHex(anchor?.txId)) || {};\r\n    return sum + (Number.isFinite(parsed.moveCount) ? parsed.moveCount : 0);\r\n  }, 0);\r\n\r\n  if (Number.isFinite(finalData.totalMoves)) {\r\n    if (heartbeatMoveSum > finalData.totalMoves) {\r\n      addReason(reasons, \"heartbeat_moves_exceed_final_total\");\r\n    } else if (heartbeatMoveSum < finalData.totalMoves) {\r\n      addWarning(warnings, \"final_moves_not_fully_anchored\");\r\n    }\r\n  } else {\r\n    addReason(reasons, \"final_total_moves_missing\");\r\n  }\r\n\r\n  if (finalData.outcomeCode === ANCHOR.OUTCOME_CHEAT) {\r\n    addReason(reasons, \"final_outcome_cheat\");\r\n  }\r\n\r\n  if (finalData.resultLeafHash) {\r\n    const resultCheck = await verifyFinalResultHash(finalData);\r\n    if (!resultCheck.ok) {\r\n      addReason(reasons, resultCheck.reason);\r\n    }\r\n  } else {\r\n    addReason(reasons, \"final_result_hash_missing\");\r\n  }\r\n\r\n  const moveHistory = normalizeMoveHistory(audit);\r\n  const merkleCheck = verifyMerkleAndMoves({\r\n    moveHistory,\r\n    heartbeats: orderedHeartbeats,\r\n    parsedByTxId,\r\n    finalData,\r\n    warnings,\r\n  });\r\n\r\n  for (const reason of merkleCheck.reasons) {\r\n    addReason(reasons, reason);\r\n  }\r\n\r\n  // \u2500\u2500 VRF Chain Replay Verification \u2500\u2500\r\n  // Extract player/game identity from audit input for chain replay\r\n  const playerId =\r\n    input?.playerId ??\r\n    input?.context?.playerId ??\r\n    null;\r\n  const gameId =\r\n    input?.gameId ??\r\n    input?.header?.gameId ??\r\n    null;\r\n\r\n  if (moveHistory && genesisTxId) {\r\n    const vrfChainResult = await verifyVrfChain({\r\n      moveHistory,\r\n      genesisTxId,\r\n      playerId,\r\n      gameId,\r\n      genesisEntropy: genesisData,\r\n      reasons,\r\n      warnings,\r\n    });\r\n\r\n    if (vrfChainResult.verified) {\r\n      // VRF chain is cryptographically verified \u2014 no action needed\r\n    }\r\n  } else if (moveHistory && moveHistory.length > 0 && !genesisTxId) {\r\n    addWarning(warnings, \"vrf_chain_skipped_no_genesis_txid\");\r\n  }\r\n\r\n  const verdict =\r\n    reasons.length > 0 ? \"fail\" : warnings.length > 0 ? \"incomplete\" : \"pass\";\r\n\r\n  return {\r\n    passed: verdict === \"pass\",\r\n    verdict,\r\n    reasons,\r\n    warnings,\r\n    finalOutcomeCode: finalData.outcomeCode ?? null,\r\n    finalOutcomeName: formatOutcome(finalData.outcomeCode),\r\n    finalTxId: finalAnchor?.txId || null,\r\n    summary: {\r\n      totalAnchors: chain.length,\r\n      heartbeatCount: orderedHeartbeats.length,\r\n      heartbeatMoveSum,\r\n      finalTotalMoves: finalData.totalMoves ?? null,\r\n      linkedChainLength: chainOrder.length,\r\n    },\r\n  };\r\n}\r\n", "/**\r\n * utils.js - Shared helpers for cheating audit\r\n */\r\n\r\nimport { bytesToHex } from \"../../core/cryptoUtils.js\";\r\n\r\nexport function normalizeHex(value) {\r\n  if (!value) return \"\";\r\n  return String(value).toLowerCase().replace(/^0x/, \"\");\r\n}\r\n\r\nexport function equalsHex(a, b) {\r\n  return normalizeHex(a) === normalizeHex(b);\r\n}\r\n\r\nexport function isZeroHash(value) {\r\n  const clean = normalizeHex(value);\r\n  return clean.length > 0 && /^0+$/.test(clean);\r\n}\r\n\r\nexport function addReason(reasons, reason) {\r\n  if (reason && !reasons.includes(reason)) reasons.push(reason);\r\n}\r\n\r\nexport function addWarning(warnings, warning) {\r\n  if (warning && !warnings.includes(warning)) warnings.push(warning);\r\n}\r\n\r\nexport function readUint32BE(bytes, offset) {\r\n  return (\r\n    ((bytes[offset] << 24) |\r\n      (bytes[offset + 1] << 16) |\r\n      (bytes[offset + 2] << 8) |\r\n      bytes[offset + 3]) >>>\r\n    0\r\n  );\r\n}\r\n\r\nexport function readBigUint64BE(bytes, offset) {\r\n  let result = 0n;\r\n  for (let i = 0; i < 8; i++) {\r\n    result = (result << 8n) | BigInt(bytes[offset + i]);\r\n  }\r\n  return result;\r\n}\r\n\r\nexport function getTimeDelta(move) {\r\n  if (Number.isFinite(move?.timeDelta)) return move.timeDelta;\r\n  return null;\r\n}\r\n\r\nexport function getVrfFragment(move) {\r\n  if (move?.vrfFragment) return normalizeHex(move.vrfFragment).slice(0, 8);\r\n  let vrfHex = move?.vrfOutputHex ?? move?.vrfOutput ?? \"\";\r\n  if (!vrfHex) return \"\";\r\n  if (vrfHex instanceof Uint8Array) {\r\n    vrfHex = bytesToHex(vrfHex);\r\n  }\r\n  const clean = normalizeHex(vrfHex);\r\n  return clean.slice(0, 8);\r\n}\r\n", "/**\r\n * chain.js - Anchor chain ordering utilities for cheating audit\r\n */\r\n\r\nimport { addReason, normalizeHex } from \"./utils.js\";\r\n\r\nexport function buildLinkedChain(\r\n  finalTxId,\r\n  genesisTxId,\r\n  anchorsByTxId,\r\n  parsedByTxId,\r\n  reasons,\r\n) {\r\n  if (!finalTxId) return [];\r\n  const chain = [];\r\n  const visited = new Set();\r\n  let currentTxId = finalTxId;\r\n\r\n  while (currentTxId) {\r\n    if (visited.has(currentTxId)) {\r\n      addReason(reasons, \"anchor_chain_loop_detected\");\r\n      break;\r\n    }\r\n    visited.add(currentTxId);\r\n    const anchor = anchorsByTxId.get(currentTxId);\r\n    if (!anchor) {\r\n      addReason(reasons, \"missing_prev_anchor\");\r\n      break;\r\n    }\r\n    chain.push(anchor);\r\n\r\n    if (genesisTxId && currentTxId === genesisTxId) {\r\n      break;\r\n    }\r\n\r\n    const parsed = parsedByTxId.get(currentTxId) || {};\r\n    const prevTxId = normalizeHex(parsed.prevTxId);\r\n    if (!prevTxId) {\r\n      addReason(reasons, \"missing_prev_txid\");\r\n      break;\r\n    }\r\n    if (genesisTxId && prevTxId === genesisTxId) {\r\n      const genesisAnchor = anchorsByTxId.get(genesisTxId);\r\n      if (genesisAnchor) chain.push(genesisAnchor);\r\n      break;\r\n    }\r\n    currentTxId = prevTxId;\r\n  }\r\n\r\n  return chain.reverse();\r\n}\r\n\r\nexport function pickNewest(anchors) {\r\n  if (!Array.isArray(anchors) || anchors.length === 0) return null;\r\n  return [...anchors].sort(\r\n    (a, b) => (b?.timestamp ?? 0) - (a?.timestamp ?? 0),\r\n  )[0];\r\n}\r\n", "/**\r\n * daa.js - DAA score verification for cheating audit\r\n *\r\n * The genesis payload encodes startDaaScore / endDaaScore: the game-timing\r\n * window derived from the latest known block BEFORE the genesis TX is sent.\r\n * The anchor entries carry blockDaaScore: the DAA of the block that actually\r\n * confirmed the transaction (always >= the pre-computed values).\r\n *\r\n * These are inherently different quantities, so we do NOT compare them for\r\n * equality.  Instead we verify:\r\n *   1. startDaaScore & endDaaScore exist and are coherent (start <= end).\r\n *   2. Both anchors were confirmed on-chain (blockDaaScore is present).\r\n *   3. The genesis block was confirmed at or before the final block\r\n *      (genesisBlockDaa <= finalBlockDaa).\r\n *   4. The genesis block's DAA is >= the declared startDaaScore\r\n *      (the block can't have been mined before the value was computed).\r\n */\r\n\r\nimport { addReason, addWarning } from \"./utils.js\";\r\n\r\nfunction parseDaa(value) {\r\n  if (value === null || value === undefined) return null;\r\n  if (typeof value === \"bigint\") return value;\r\n  if (typeof value === \"number\") {\r\n    return Number.isFinite(value) ? BigInt(Math.floor(value)) : null;\r\n  }\r\n  if (typeof value === \"string\") {\r\n    try {\r\n      return BigInt(value);\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function verifyDaaScores({\r\n  genesisAnchor,\r\n  finalAnchor,\r\n  genesisData,\r\n  reasons,\r\n  warnings,\r\n}) {\r\n  /* \u2500\u2500 1. Genesis payload DAA values \u2500\u2500 */\r\n  const startDaa = parseDaa(genesisData?.startDaaScore);\r\n  const endDaa = parseDaa(genesisData?.endDaaScore);\r\n\r\n  if (startDaa === null || endDaa === null) {\r\n    addReason(reasons, \"genesis_daa_missing\");\r\n    return;\r\n  }\r\n\r\n  if (startDaa > endDaa) {\r\n    addReason(reasons, \"genesis_daa_window_inverted\");\r\n  }\r\n\r\n  /* \u2500\u2500 2. Block-level DAA presence \u2500\u2500 */\r\n  const genesisBlockDaa = parseDaa(genesisAnchor?.blockDaaScore);\r\n  const finalBlockDaa = parseDaa(finalAnchor?.blockDaaScore);\r\n\r\n  if (genesisBlockDaa === null) {\r\n    addWarning(warnings, \"genesis_block_daa_missing\");\r\n  }\r\n  if (finalBlockDaa === null) {\r\n    addWarning(warnings, \"final_block_daa_missing\");\r\n  }\r\n\r\n  /* \u2500\u2500 3. Ordering: genesis confirmed before or at same time as final \u2500\u2500 */\r\n  if (genesisBlockDaa !== null && finalBlockDaa !== null) {\r\n    if (genesisBlockDaa > finalBlockDaa) {\r\n      addReason(reasons, \"daa_ordering_violated\");\r\n    }\r\n  }\r\n\r\n  /* \u2500\u2500 4. Genesis block can't predate its own declared start \u2500\u2500 */\r\n  if (genesisBlockDaa !== null && startDaa !== null) {\r\n    if (genesisBlockDaa < startDaa) {\r\n      addWarning(warnings, \"genesis_block_before_declared_start\");\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * entropy.js - External entropy verification for cheating audit\r\n */\r\n\r\nimport { ANCHOR } from \"../../core/constants.js\";\r\nimport {\r\n  addReason,\r\n  addWarning,\r\n  equalsHex,\r\n  isZeroHash,\r\n  normalizeHex,\r\n} from \"./utils.js\";\r\n\r\nconst PROXY = \"https://api.allorigins.win/raw?url=\";\r\nconst NIST_PULSE_BASE_URL = \"https://beacon.nist.gov/beacon/2.0/chain/1/pulse/\";\r\nconst BTC_BLOCK_BASE_URL = \"https://mempool.space/api/block/\";\r\n\r\nexport async function verifyEntropySources({\r\n  genesisData,\r\n  heartbeats,\r\n  parsedByTxId,\r\n  reasons,\r\n  warnings,\r\n}) {\r\n  if (!globalThis.fetch) {\r\n    addWarning(warnings, \"fetch_unavailable\");\r\n    return;\r\n  }\r\n\r\n  const btcHashes = Array.isArray(genesisData?.btcBlockHashes)\r\n    ? genesisData.btcBlockHashes.filter(\r\n        (h) => normalizeHex(h) && !isZeroHash(h),\r\n      )\r\n    : [];\r\n\r\n  if (btcHashes.length === 0) {\r\n    addReason(reasons, \"genesis_btc_hashes_missing\");\r\n  } else {\r\n    const results = [];\r\n    for (const hash of btcHashes) {\r\n      // Process one by one to avoid hammering the proxy/API\r\n      const result = await verifyBtcHash(hash).catch(() => ({ ok: false }));\r\n      results.push(result);\r\n\r\n      // Optional: tiny 50ms delay if you're still seeing glitches\r\n      // await new Promise(r => setTimeout(r, 50));\r\n    }\r\n\r\n    results.forEach((result) => {\r\n      if (!result.ok) {\r\n        addReason(reasons, \"btc_hash_invalid\");\r\n      }\r\n    });\r\n  }\r\n\r\n  const nistPulseIndex = genesisData?.nistPulseIndex ?? null;\r\n  const nistOutputHash = genesisData?.nistOutputHash ?? \"\";\r\n  const nistSignature = genesisData?.nistSignature ?? \"\";\r\n  if (\r\n    nistPulseIndex === null ||\r\n    nistPulseIndex === undefined ||\r\n    !normalizeHex(nistOutputHash) ||\r\n    !normalizeHex(nistSignature)\r\n  ) {\r\n    addReason(reasons, \"genesis_nist_missing\");\r\n  } else {\r\n    const nistCheck = await verifyNistPulse(\r\n      nistPulseIndex,\r\n      nistOutputHash,\r\n      nistSignature,\r\n    );\r\n    if (!nistCheck.ok) {\r\n      addReason(reasons, nistCheck.reason);\r\n    }\r\n  }\r\n\r\n  for (const heartbeat of heartbeats || []) {\r\n    const txId = normalizeHex(heartbeat?.txId);\r\n    const parsed = parsedByTxId.get(txId) || {};\r\n\r\n    if (parsed.deltaFlags & ANCHOR.DELTA_FLAG_BTC) {\r\n      const btcDelta = parsed.btcDeltaHash || \"\";\r\n      if (!normalizeHex(btcDelta) || isZeroHash(btcDelta)) {\r\n        addReason(reasons, \"heartbeat_btc_delta_missing\");\r\n      } else {\r\n        const btcCheck = await verifyBtcHash(btcDelta);\r\n        if (!btcCheck.ok) {\r\n          addReason(reasons, \"heartbeat_btc_delta_invalid\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (parsed.deltaFlags & ANCHOR.DELTA_FLAG_NIST) {\r\n      const nistDelta = parsed.nistDelta || null;\r\n      if (!nistDelta || !nistDelta.pulseIndex) {\r\n        addReason(reasons, \"heartbeat_nist_delta_missing\");\r\n      } else {\r\n        const nistDeltaCheck = await verifyNistPulse(\r\n          nistDelta.pulseIndex,\r\n          nistDelta.outputHash,\r\n          nistDelta.signature,\r\n        );\r\n        if (!nistDeltaCheck.ok) {\r\n          addReason(reasons, \"heartbeat_nist_delta_invalid\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport async function verifyNistPulse(pulseIndex, outputHash, signature) {\r\n  try {\r\n    // Convert BigInt to a clean string so \"1648264n\" becomes \"1648264\"\r\n    const cleanIndex = pulseIndex.toString().replace(\"n\", \"\");\r\n    const url = `${NIST_PULSE_BASE_URL}${cleanIndex}`;\r\n\r\n    // 2. Fetch directly from NIST\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      return { ok: false, reason: \"nist_fetch_failed\" };\r\n    }\r\n\r\n    const data = await response.json();\r\n    const pulse = data?.pulse ?? null;\r\n\r\n    if (!pulse) return { ok: false, reason: \"nist_response_invalid\" };\r\n\r\n    const outputValue = normalizeHex(pulse.outputValue);\r\n    const signatureValue = normalizeHex(pulse.signatureValue);\r\n\r\n    // 3. Comparison logic remains the same\r\n    if (!equalsHex(outputValue, outputHash)) {\r\n      return { ok: false, reason: \"nist_output_mismatch\" };\r\n    }\r\n\r\n    // Some pulses might have slightly different signature lengths depending on the chain,\r\n    // so we verify it if provided.\r\n    if (signature && !equalsHex(signatureValue, signature)) {\r\n      return { ok: false, reason: \"nist_signature_mismatch\" };\r\n    }\r\n\r\n    return { ok: true };\r\n  } catch (err) {\r\n    // Logging the error is helpful for debugging if NIST changes their API\r\n    console.error(\"NIST direct fetch error:\", err);\r\n    return { ok: false, reason: \"nist_fetch_failed\" };\r\n  }\r\n}\r\n\r\nexport async function verifyBtcHash(hash) {\r\n  try {\r\n    const url = `${PROXY}${encodeURIComponent(`${BTC_BLOCK_BASE_URL}${normalizeHex(hash)}`)}`;\r\n    const response = await fetch(url);\r\n    if (!response.ok) return { ok: false };\r\n    const data = await response.json();\r\n    const id = normalizeHex(data?.id ?? data?.hash ?? \"\");\r\n    if (!id || !equalsHex(id, hash)) return { ok: false };\r\n    return { ok: true };\r\n  } catch (err) {\r\n    return { ok: false };\r\n  }\r\n}\r\n", "/**\r\n * finalResult.js - Final result hash verification for cheating audit\r\n */\r\n\r\nimport { bytesToHex, sha256 } from \"../../core/cryptoUtils.js\";\r\nimport { equalsHex } from \"./utils.js\";\r\n\r\nexport async function verifyFinalResultHash(finalData) {\r\n  const resultString = `RESULT:${finalData.finalScore}:${finalData.coinsCollected}:${finalData.outcomeCode}:${finalData.raceTimeMs}`;\r\n  const hash = await sha256(new TextEncoder().encode(resultString));\r\n  const hashHex = bytesToHex(hash);\r\n  if (!equalsHex(finalData.resultLeafHash, hashHex)) {\r\n    return { ok: false, reason: \"final_result_hash_mismatch\" };\r\n  }\r\n  return { ok: true };\r\n}\r\n", "/**\r\n * merkle.js - Merkle verification for cheating audit\r\n */\r\n\r\nimport { ANCHOR, ACTION_TO_CODE, CODE_TO_ACTION, MOVE_ACTION_CODE } from \"../../core/constants.js\";\r\nimport { GameMerkleTree } from \"../../core/merkleTree.js\";\r\nimport {\r\n  addReason,\r\n  addWarning,\r\n  equalsHex,\r\n  getTimeDelta,\r\n  getVrfFragment,\r\n  normalizeHex,\r\n} from \"./utils.js\";\r\n\r\nexport function verifyMerkleAndMoves({\r\n  moveHistory,\r\n  heartbeats,\r\n  parsedByTxId,\r\n  finalData,\r\n  warnings,\r\n}) {\r\n  const reasons = [];\r\n  const useMoveHistory = Array.isArray(moveHistory) && moveHistory.length > 0;\r\n  if (!useMoveHistory && (!heartbeats || heartbeats.length === 0)) {\r\n    addWarning(warnings, \"missing_move_history\");\r\n    return { reasons };\r\n  }\r\n\r\n  const sortedMoves = useMoveHistory\r\n    ? [...moveHistory].sort((a, b) => {\r\n        const aSeq = Number.isFinite(a.sequence)\r\n          ? a.sequence\r\n          : (a.moveIndex ?? 0);\r\n        const bSeq = Number.isFinite(b.sequence)\r\n          ? b.sequence\r\n          : (b.moveIndex ?? 0);\r\n        return aSeq - bSeq;\r\n      })\r\n    : [];\r\n\r\n  const totalMovesTarget = Number.isFinite(finalData?.totalMoves)\r\n    ? finalData.totalMoves\r\n    : useMoveHistory\r\n      ? sortedMoves.length\r\n      : 0;\r\n\r\n  if (useMoveHistory && sortedMoves.length < totalMovesTarget) {\r\n    addWarning(warnings, \"move_history_shorter_than_final_total\");\r\n    return { reasons };\r\n  }\r\n\r\n  const merkleTree = new GameMerkleTree();\r\n  let cursor = 0;\r\n\r\n  for (const heartbeat of heartbeats) {\r\n    const txId = normalizeHex(heartbeat?.txId);\r\n    const parsed = parsedByTxId.get(txId) || {};\r\n    const moveCount = Number.isFinite(parsed.moveCount)\r\n      ? parsed.moveCount\r\n      : null;\r\n    if (moveCount === null || !Array.isArray(parsed.moves)) {\r\n      addWarning(warnings, \"heartbeat_move_data_missing\");\r\n      continue;\r\n    }\r\n\r\n    if (moveCount === 0) {\r\n      continue;\r\n    }\r\n\r\n    for (let i = 0; i < moveCount; i++) {\r\n      const movePacket = parsed.moves[i];\r\n      let leafMove = null;\r\n\r\n      if (useMoveHistory) {\r\n        const move = sortedMoves[cursor];\r\n        if (!move) {\r\n          addReason(reasons, \"move_history_exhausted_before_heartbeat\");\r\n          break;\r\n        }\r\n\r\n        const actionCode = ACTION_TO_CODE[move.action] ?? null;\r\n        if (actionCode !== movePacket.actionCode) {\r\n          addReason(reasons, \"heartbeat_action_mismatch\");\r\n        }\r\n\r\n        if (actionCode === MOVE_ACTION_CODE) {\r\n          // MOVE \u2014 check x/y/z instead of lane\r\n          if (movePacket.xRaw != null && move.x !== movePacket.xRaw) {\r\n            addReason(reasons, \"heartbeat_x_mismatch\");\r\n          }\r\n          if (movePacket.yRaw != null && move.y !== movePacket.yRaw) {\r\n            addReason(reasons, \"heartbeat_y_mismatch\");\r\n          }\r\n          if (movePacket.zRaw != null && move.z !== movePacket.zRaw) {\r\n            addReason(reasons, \"heartbeat_z_mismatch\");\r\n          }\r\n        } else {\r\n          const lane = Number.isFinite(move.lane) ? move.lane : 0;\r\n          if (lane !== movePacket.lane) {\r\n            addReason(reasons, \"heartbeat_lane_mismatch\");\r\n          }\r\n        }\r\n\r\n        const vrfFragment = getVrfFragment(move);\r\n        if (vrfFragment && vrfFragment !== movePacket.vrfFragment) {\r\n          addReason(reasons, \"heartbeat_vrf_fragment_mismatch\");\r\n        }\r\n\r\n        const timeDelta = getTimeDelta(move);\r\n        if (Number.isFinite(timeDelta) && timeDelta !== movePacket.timeDelta) {\r\n          addWarning(warnings, \"heartbeat_time_delta_mismatch\");\r\n        }\r\n\r\n        leafMove = buildLeafMove(move, warnings);\r\n      } else {\r\n        leafMove = buildLeafFromPacket(movePacket, reasons);\r\n      }\r\n\r\n      if (leafMove) {\r\n        merkleTree.addMove(leafMove);\r\n      } else {\r\n        addWarning(warnings, \"insufficient_move_data_for_merkle\");\r\n        return { reasons };\r\n      }\r\n\r\n      cursor += 1;\r\n    }\r\n\r\n    if (\r\n      parsed.merkleRoot &&\r\n      merkleTree.root &&\r\n      !equalsHex(parsed.merkleRoot, merkleTree.root)\r\n    ) {\r\n      addReason(reasons, \"heartbeat_merkle_mismatch\");\r\n    }\r\n  }\r\n\r\n  if (useMoveHistory) {\r\n    while (cursor < totalMovesTarget) {\r\n      const move = sortedMoves[cursor];\r\n      if (!move) break;\r\n      const leafMove = buildLeafMove(move, warnings);\r\n      if (leafMove) {\r\n        merkleTree.addMove(leafMove);\r\n      } else {\r\n        addWarning(warnings, \"insufficient_move_data_for_merkle\");\r\n        return { reasons };\r\n      }\r\n      cursor += 1;\r\n    }\r\n  }\r\n\r\n  if (finalData?.merkleRoot && merkleTree.root) {\r\n    if (!equalsHex(finalData.merkleRoot, merkleTree.root)) {\r\n      addReason(reasons, \"final_merkle_mismatch\");\r\n    }\r\n  }\r\n\r\n  return { reasons };\r\n}\r\n\r\n/**\r\n * Build a Merkle leaf from a move-history entry.\r\n * MOVE (action code 1): { action, x, y, z, timeDelta, vrfFragment }\r\n * Standard:              { action, lane, timeDelta, vrfFragment }\r\n */\r\nexport function buildLeafMove(move, warnings) {\r\n  const action = move?.action;\r\n  const timeDelta = getTimeDelta(move);\r\n  const vrfFragment = getVrfFragment(move);\r\n\r\n  if (!action || !Number.isFinite(timeDelta)) {\r\n    addWarning(warnings, \"missing_move_fields_for_merkle\");\r\n    return null;\r\n  }\r\n\r\n  const actionCode = ACTION_TO_CODE[action] ?? null;\r\n\r\n  if (actionCode === MOVE_ACTION_CODE) {\r\n    return {\r\n      action,\r\n      x: move.x ?? 0,\r\n      y: move.y ?? 0,\r\n      z: move.z ?? 0,\r\n      timeDelta,\r\n      vrfFragment,\r\n    };\r\n  }\r\n\r\n  return {\r\n    action,\r\n    lane: Number.isFinite(move?.lane) ? move.lane : 0,\r\n    timeDelta,\r\n    vrfFragment,\r\n  };\r\n}\r\n\r\n/**\r\n * Build a Merkle leaf from a parsed heartbeat move packet.\r\n * MOVE (action code 1): { action, x, y, z, timeDelta, vrfFragment }\r\n * Standard:              { action, lane, timeDelta, vrfFragment }\r\n */\r\nexport function buildLeafFromPacket(movePacket, reasons) {\r\n  const action = CODE_TO_ACTION[movePacket.actionCode] ?? null;\r\n  if (!action) {\r\n    addReason(reasons, \"heartbeat_action_unknown\");\r\n  }\r\n\r\n  if (movePacket.actionCode === MOVE_ACTION_CODE) {\r\n    return {\r\n      action: action ?? \"move\",\r\n      x: movePacket.xRaw ?? 0,\r\n      y: movePacket.yRaw ?? 0,\r\n      z: movePacket.zRaw ?? 0,\r\n      timeDelta: movePacket.timeDelta ?? 0,\r\n      vrfFragment: movePacket.vrfFragment ?? \"\",\r\n    };\r\n  }\r\n\r\n  return {\r\n    action: action ?? \"unknown\",\r\n    lane: movePacket.lane ?? 0,\r\n    timeDelta: movePacket.timeDelta ?? 0,\r\n    vrfFragment: movePacket.vrfFragment ?? \"\",\r\n  };\r\n}\r\n", "/**\r\n * normalize.js - Input normalization helpers for cheating audit\r\n */\r\n\r\nexport function normalizeAuditInput(input) {\r\n  return {\r\n    chain: normalizeChain(input),\r\n    v4MoveHistory:\r\n      input?.v4MoveHistory ??\r\n      input?.moves ??\r\n      input?.context?.rawMoveHistory ??\r\n      null,\r\n    vrfProofs: input?.vrfProofs ?? input?.vrfProofArchive ?? null,\r\n  };\r\n}\r\n\r\nexport function normalizeChain(input) {\r\n  if (!input) return null;\r\n  if (Array.isArray(input)) return input;\r\n  if (Array.isArray(input.chain)) return input.chain;\r\n  if (Array.isArray(input.anchorChain?.chain)) return input.anchorChain.chain;\r\n  return null;\r\n}\r\n\r\nexport function normalizeMoveHistory(audit) {\r\n  if (Array.isArray(audit.v4MoveHistory)) return audit.v4MoveHistory;\r\n  if (Array.isArray(audit.moves)) return audit.moves;\r\n  if (Array.isArray(audit.context?.rawMoveHistory)) {\r\n    return audit.context.rawMoveHistory;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function normalizeVrfProofs(audit) {\r\n  if (Array.isArray(audit.vrfProofs)) return audit.vrfProofs;\r\n  if (Array.isArray(audit.vrfProofArchive)) return audit.vrfProofArchive;\r\n  return null;\r\n}\r\n", "/**\r\n * outcome.js - Outcome formatting for cheating audit\r\n */\r\n\r\nimport { ANCHOR } from \"../../core/constants.js\";\r\n\r\nexport function formatOutcome(outcomeCode) {\r\n  if (outcomeCode === ANCHOR.OUTCOME_COMPLETE) return \"complete\";\r\n  if (outcomeCode === ANCHOR.OUTCOME_FORFEIT) return \"forfeit\";\r\n  if (outcomeCode === ANCHOR.OUTCOME_TIMEOUT) return \"timeout\";\r\n  if (outcomeCode === ANCHOR.OUTCOME_CHEAT) return \"cheat\";\r\n  return \"unknown\";\r\n}\r\n", "/**\r\n * parsing.js - Anchor payload parsing for cheating audit\r\n */\r\n\r\nimport { ANCHOR, MOVE_ACTION_CODE, decodeCoord14, movePacketSize } from \"../../core/constants.js\";\r\nimport { bytesToHex, hexToBytes } from \"../../core/cryptoUtils.js\";\r\nimport { readBigUint64BE, readUint32BE } from \"./utils.js\";\r\n\r\nexport function parseAnchorByType(type, anchorHex) {\r\n  if (!anchorHex) {\r\n    return { error: \"missing_anchor_payload\" };\r\n  }\r\n  try {\r\n    if (type === \"genesis\") return parseGenesisAnchor(anchorHex);\r\n    if (type === \"heartbeat\") return parseHeartbeatAnchor(anchorHex);\r\n    if (type === \"final\") return parseFinalAnchor(anchorHex);\r\n    return { error: \"unknown_anchor_type\" };\r\n  } catch (err) {\r\n    return { error: \"anchor_payload_parse_failed\" };\r\n  }\r\n}\r\n\r\nexport function parseGenesisAnchor(anchorHex) {\r\n  const bytes = hexToBytes(anchorHex);\r\n  if (bytes.length < ANCHOR.GENESIS_BASE_SIZE) {\r\n    return { error: \"genesis_payload_too_short\" };\r\n  }\r\n  let offset = 0;\r\n  const version = bytes[offset++];\r\n  const anchorType = bytes[offset++];\r\n  const gameIdHash = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const hashedSeed = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n\r\n  const btcBlockHashes = [];\r\n  for (let i = 0; i < ANCHOR.BTC_BLOCK_COUNT; i++) {\r\n    btcBlockHashes.push(bytesToHex(bytes.slice(offset, offset + 32)));\r\n    offset += 32;\r\n  }\r\n\r\n  const startDaaScore = readBigUint64BE(bytes, offset);\r\n  offset += 8;\r\n  const endDaaScore = readBigUint64BE(bytes, offset);\r\n  offset += 8;\r\n  const nistPulseIndex = readBigUint64BE(bytes, offset);\r\n  offset += 8;\r\n  const nistOutputHash = bytesToHex(bytes.slice(offset, offset + 64));\r\n  offset += 64;\r\n  const nistSignature = bytesToHex(bytes.slice(offset, offset + 512));\r\n  offset += 512;\r\n\r\n  return {\r\n    version,\r\n    anchorType,\r\n    gameIdHash,\r\n    hashedSeed,\r\n    btcBlockHashes,\r\n    startDaaScore,\r\n    endDaaScore,\r\n    nistPulseIndex,\r\n    nistOutputHash,\r\n    nistSignature,\r\n  };\r\n}\r\n\r\nexport function parseHeartbeatAnchor(anchorHex) {\r\n  const bytes = hexToBytes(anchorHex);\r\n\r\n  // Need at least the v4 header to check version\r\n  if (bytes.length < ANCHOR.HEARTBEAT_HEADER_SIZE_V4) {\r\n    return { error: \"heartbeat_payload_too_short\" };\r\n  }\r\n\r\n  let offset = 0;\r\n  const version = bytes[offset++];\r\n  const anchorType = bytes[offset++];\r\n  const merkleRoot = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const prevTxId = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const deltaFlags = bytes[offset++];\r\n  const moveCount = bytes[offset++];\r\n\r\n  // v5: read movesSectionLength (uint16 BE)\r\n  let movesSectionLength = null;\r\n  if (version >= 5) {\r\n    if (bytes.length < ANCHOR.HEARTBEAT_HEADER_SIZE) {\r\n      return { error: \"heartbeat_v5_header_too_short\" };\r\n    }\r\n    movesSectionLength = (bytes[offset] << 8) | bytes[offset + 1];\r\n    offset += 2;\r\n  }\r\n\r\n  const moves = [];\r\n\r\n  for (let i = 0; i < moveCount; i++) {\r\n    if (offset >= bytes.length) break;\r\n\r\n    const actionByte = bytes[offset];\r\n    const actionCode = (actionByte >> 4) & 0x0f;\r\n\r\n    if (version >= 5 && actionCode === MOVE_ACTION_CODE) {\r\n      // \u2500\u2500 Extended 16-byte MOVE packet \u2500\u2500\r\n      const pktSize = ANCHOR.MOVE_PACKET_SIZE_EXTENDED;\r\n      if (offset + pktSize > bytes.length) break;\r\n\r\n      const timeDelta = bytes[offset + 1];\r\n      const xRaw = (bytes[offset + 2] << 8) | bytes[offset + 3];\r\n      const yRaw = (bytes[offset + 4] << 8) | bytes[offset + 5];\r\n      const zRaw = (bytes[offset + 6] << 8) | bytes[offset + 7];\r\n      const vrfFragment = bytesToHex(bytes.slice(offset + 8, offset + 12));\r\n      const value = (bytes[offset + 12] << 8) | bytes[offset + 13];\r\n\r\n      moves.push({\r\n        actionCode,\r\n        timeDelta,\r\n        vrfFragment,\r\n        x: decodeCoord14(xRaw),\r\n        y: decodeCoord14(yRaw),\r\n        z: decodeCoord14(zRaw),\r\n        xRaw, yRaw, zRaw,\r\n        value,\r\n      });\r\n\r\n      offset += pktSize;\r\n    } else {\r\n      // \u2500\u2500 Standard 8-byte packet \u2500\u2500\r\n      if (offset + ANCHOR.MOVE_PACKET_SIZE > bytes.length) break;\r\n\r\n      const lane = actionByte & 0x0f;\r\n      const timeDelta = bytes[offset + 1];\r\n      const vrfFragment = bytesToHex(bytes.slice(offset + 2, offset + 6));\r\n      const coinsTotal = (bytes[offset + 6] << 8) | bytes[offset + 7];\r\n\r\n      moves.push({ actionCode, lane, timeDelta, vrfFragment, coinsTotal, value: coinsTotal });\r\n\r\n      offset += ANCHOR.MOVE_PACKET_SIZE;\r\n    }\r\n  }\r\n\r\n  let btcDeltaHash = null;\r\n  let nistDelta = null;\r\n\r\n  if (deltaFlags & ANCHOR.DELTA_FLAG_BTC) {\r\n    if (offset + ANCHOR.HEARTBEAT_DELTA_BTC_SIZE <= bytes.length) {\r\n      btcDeltaHash = bytesToHex(bytes.slice(offset, offset + 32));\r\n      offset += 32;\r\n    }\r\n  }\r\n\r\n  if (deltaFlags & ANCHOR.DELTA_FLAG_NIST) {\r\n    if (offset + ANCHOR.HEARTBEAT_DELTA_NIST_SIZE <= bytes.length) {\r\n      const pulseIndex = readBigUint64BE(bytes, offset);\r\n      offset += 8;\r\n      const outputHash = bytesToHex(bytes.slice(offset, offset + 64));\r\n      offset += 64;\r\n      const signature = bytesToHex(bytes.slice(offset, offset + 512));\r\n      offset += 512;\r\n      nistDelta = { pulseIndex, outputHash, signature };\r\n    }\r\n  }\r\n\r\n  return {\r\n    version,\r\n    anchorType,\r\n    merkleRoot,\r\n    prevTxId,\r\n    deltaFlags,\r\n    moveCount,\r\n    movesSectionLength,\r\n    moves,\r\n    btcDeltaHash,\r\n    nistDelta,\r\n  };\r\n}\r\n\r\nexport function parseFinalAnchor(anchorHex) {\r\n  const bytes = hexToBytes(anchorHex);\r\n  if (bytes.length < ANCHOR.FINAL_SIZE) {\r\n    return { error: \"final_payload_too_short\" };\r\n  }\r\n\r\n  const anchorType = bytes[1];\r\n  return {\r\n    anchorType,\r\n    merkleRoot: bytesToHex(bytes.slice(2, 34)),\r\n    genesisTxId: bytesToHex(bytes.slice(34, 66)),\r\n    prevTxId: bytesToHex(bytes.slice(66, 98)),\r\n    resultLeafHash: bytesToHex(bytes.slice(98, 130)),\r\n    finalScore: readUint32BE(bytes, 130),\r\n    coinsCollected: readUint32BE(bytes, 134),\r\n    raceTimeMs: readUint32BE(bytes, 138),\r\n    outcomeCode: bytes[142],\r\n    totalMoves: bytes[143],\r\n  };\r\n}\r\n", "/**\r\n * vrfChain.js - VRF chain replay verifier for cheating audit\r\n *\r\n * Replays the deterministic VRF chain from genesis to final move,\r\n * computing each VRF_n independently and comparing the 4-byte vrfFragment\r\n * against the on-chain heartbeat data.\r\n *\r\n * Formula:\r\n *   VRF_n = SHA256( fold( HMAC-SHA256(Key=VRF_{n-1}, Data=MoveData+Entropy),\r\n *                   EntropyHash, {seed} ) )\r\n *\r\n * The auditor strictly uses the per-move entropySnapshot stored in the audit data,\r\n * even if values are zero-filled. This ensures determinism regardless of when\r\n * external entropy became available to the game client.\r\n */\r\n\r\nimport { sha256, hmacSha256, hexToBytes, bytesToHex } from \"../../core/cryptoUtils.js\";\r\nimport { ACTION_TO_CODE, ANCHOR, MOVE_ACTION_CODE } from \"../../core/constants.js\";\r\nimport { fold } from \"../../engine/kaspa/vrf/core/folding.js\";\r\nimport { addReason, addWarning } from \"./utils.js\";\r\n\r\n/** Size constants \u2014 must match VrfManager.js exactly */\r\nconst VRF_STATE_SIZE = 32;\r\nconst NIST_SIZE = 32;\r\nconst BTC_SIZE = 32;\r\nconst KASPA_SIZE = 32;\r\n\r\n/** Standard buffer: VRF(32) + ActionCode(1) + Lane(1) + TimeDelta(1) + entropy(96) = 131 */\r\nconst DATA_BUFFER_SIZE_STANDARD = VRF_STATE_SIZE + 1 + 1 + 1 + NIST_SIZE + BTC_SIZE + KASPA_SIZE; // 131\r\n\r\n/** Extended MOVE buffer: VRF(32) + ActionCode(1) + X(2) + Y(2) + Z(2) + TimeDelta(1) + entropy(96) = 136 */\r\nconst DATA_BUFFER_SIZE_EXTENDED = VRF_STATE_SIZE + 1 + 2 + 2 + 2 + 1 + NIST_SIZE + BTC_SIZE + KASPA_SIZE; // 136\r\n\r\n/**\r\n * Pad or truncate a Uint8Array to exactly the target length.\r\n */\r\nfunction padOrTruncate(bytes, targetLength) {\r\n  if (bytes.length === targetLength) return bytes;\r\n  const result = new Uint8Array(targetLength);\r\n  result.set(bytes.subarray(0, Math.min(bytes.length, targetLength)));\r\n  return result;\r\n}\r\n\r\n/**\r\n * Normalize hex input from strings or Uint8Array into a lowercase hex string.\r\n */\r\nfunction normalizeHexInput(value) {\r\n  if (!value) return \"\";\r\n  if (value instanceof Uint8Array) return bytesToHex(value);\r\n  if (typeof value === \"string\") {\r\n    return value.toLowerCase().replace(/^0x/, \"\");\r\n  }\r\n  return \"\";\r\n}\r\n\r\n/**\r\n * Safely convert a hex string to Uint8Array, returning zero-filled buffer on failure.\r\n */\r\nfunction safeHexToBytes(hex, size) {\r\n  if (!hex || typeof hex !== \"string\") return new Uint8Array(size);\r\n  try {\r\n    return padOrTruncate(hexToBytes(hex), size);\r\n  } catch {\r\n    return new Uint8Array(size);\r\n  }\r\n}\r\n\r\n/**\r\n * Replay and verify the entire VRF chain for a game session.\r\n *\r\n * @param {Object} params\r\n * @param {Array} params.moveHistory - v4MoveHistory array from audit data (sorted by sequence)\r\n * @param {string|null} params.genesisTxId - Genesis anchor transaction ID\r\n * @param {string} params.playerId - Player ID used for lazy seed\r\n * @param {string} params.gameId - Game ID used for lazy seed\r\n * @param {Object|null} params.genesisEntropy - Genesis entropy data (btcBlockHashes, nistOutputHash)\r\n * @param {Array} params.reasons - Mutable array to push failure reasons\r\n * @param {Array} params.warnings - Mutable array to push warnings\r\n * @returns {Promise<Object>} - { verified: boolean, matchCount, mismatchCount, totalMoves }\r\n */\r\nexport async function verifyVrfChain({\r\n  moveHistory,\r\n  genesisTxId,\r\n  playerId,\r\n  gameId,\r\n  genesisEntropy,\r\n  reasons,\r\n  warnings,\r\n}) {\r\n  if (!Array.isArray(moveHistory) || moveHistory.length === 0) {\r\n    addWarning(warnings, \"vrf_chain_no_move_history\");\r\n    return { verified: false, matchCount: 0, mismatchCount: 0, totalMoves: 0 };\r\n  }\r\n\r\n  if (!playerId || !gameId) {\r\n    addWarning(warnings, \"vrf_chain_missing_player_or_game_id\");\r\n    return { verified: false, matchCount: 0, mismatchCount: 0, totalMoves: moveHistory.length };\r\n  }\r\n\r\n  // Sort by sequence to ensure correct replay order\r\n  const sorted = [...moveHistory].sort((a, b) => {\r\n    const seqA = Number.isFinite(a?.sequence) ? a.sequence : 0;\r\n    const seqB = Number.isFinite(b?.sequence) ? b.sequence : 0;\r\n    return seqA - seqB;\r\n  });\r\n\r\n  // Filter to only VRF-bearing moves (skip game events with no vrfFragment)\r\n  const vrfMoves = sorted.filter(\r\n    (m) => m.vrfFragment || m.vrfOutputHex || m.entropySnapshot,\r\n  );\r\n\r\n  if (vrfMoves.length === 0) {\r\n    addWarning(warnings, \"vrf_chain_no_vrf_moves\");\r\n    return { verified: false, matchCount: 0, mismatchCount: 0, totalMoves: 0 };\r\n  }\r\n\r\n  let matchCount = 0;\r\n  let mismatchCount = 0;\r\n  let vrfState = null;\r\n  let genesisReinforced = false;\r\n\r\n  // Genesis entropy fallback values (used when a move has no entropySnapshot)\r\n  const fallbackNistHex = normalizeHexInput(genesisEntropy?.nistOutputHash);\r\n  const fallbackBtcHex = normalizeHexInput(\r\n    Array.isArray(genesisEntropy?.btcBlockHashes) && genesisEntropy.btcBlockHashes.length > 0\r\n      ? genesisEntropy.btcBlockHashes[0]\r\n      : \"\",\r\n  );\r\n\r\n  for (const move of vrfMoves) {\r\n    const snapshot = move.entropySnapshot ?? {};\r\n    const sequence = move.sequence ?? 0;\r\n    const action = move.action ?? \"none\";\r\n    const lane = Number.isFinite(move.lane) ? move.lane : 0;\r\n    const timeDeltaRaw = Number.isFinite(move.timeDelta)\r\n      ? move.timeDelta\r\n      : Number.isFinite(move.timeDeltaMs)\r\n        ? Math.floor(move.timeDeltaMs / ANCHOR.TIME_DELTA_SCALE)\r\n        : Number.isFinite(move.rawDelta)\r\n          ? move.rawDelta\r\n          : 0;\r\n    const timeDelta = Math.max(0, Math.min(255, timeDeltaRaw));\r\n    const timestamp = move.timestamp ?? 0;\r\n\r\n    // \u2500\u2500 Step 1: Lazy initialization (same as VrfManager) \u2500\u2500\r\n    if (vrfState === null) {\r\n      // Use initTimestamp from first move's snapshot, or the move's own timestamp\r\n      const initTs = snapshot.initTimestamp ?? timestamp;\r\n      const seedString = `${playerId}:${gameId}:${initTs}`;\r\n      vrfState = await sha256(new TextEncoder().encode(seedString));\r\n    }\r\n\r\n    // \u2500\u2500 Step 2: Genesis reinforcement \u2500\u2500\r\n    const shouldReinforce =\r\n      genesisTxId && !genesisReinforced && snapshot.isGenesisReinforced === true;\r\n    if (shouldReinforce) {\r\n      const txIdBytes = hexToBytes(genesisTxId);\r\n      const combined = new Uint8Array(VRF_STATE_SIZE + txIdBytes.length);\r\n      combined.set(vrfState);\r\n      combined.set(txIdBytes, VRF_STATE_SIZE);\r\n      vrfState = await sha256(combined);\r\n      genesisReinforced = true;\r\n    }\r\n\r\n    // \u2500\u2500 Step 3: Gather entropy from snapshot (strictly use snapshot data) \u2500\u2500\r\n    const nistHashHex = normalizeHexInput(snapshot.nistOutputHash) || fallbackNistHex;\r\n    const nistBytes = nistHashHex\r\n      ? await sha256(safeHexToBytes(nistHashHex, 64))\r\n      : new Uint8Array(32);\r\n\r\n    const btcHex = normalizeHexInput(snapshot.btcHash) || fallbackBtcHex;\r\n    const btcBytes = btcHex\r\n      ? padOrTruncate(safeHexToBytes(btcHex, 32), BTC_SIZE)\r\n      : new Uint8Array(32);\r\n\r\n    const kaspaHex =\r\n      normalizeHexInput(snapshot.kaspaBlockHash) ||\r\n      normalizeHexInput(move.kaspaBlockHashHex) ||\r\n      \"\";\r\n    if (!kaspaHex) {\r\n      addReason(reasons, \"vrf_chain_missing_kaspa_entropy\");\r\n    }\r\n    const kaspaBytes = kaspaHex\r\n      ? padOrTruncate(safeHexToBytes(kaspaHex, 32), KASPA_SIZE)\r\n      : new Uint8Array(32);\r\n\r\n    // \u2500\u2500 Step 4: Build deterministic data buffer (v5 union protocol) \u2500\u2500\r\n    const actionCode = (ACTION_TO_CODE[action] ?? 0) & 0xff;\r\n    const isMove = actionCode === MOVE_ACTION_CODE;\r\n    const bufferSize = isMove ? DATA_BUFFER_SIZE_EXTENDED : DATA_BUFFER_SIZE_STANDARD;\r\n    const dataBuffer = new Uint8Array(bufferSize);\r\n    let offset = 0;\r\n\r\n    dataBuffer.set(vrfState, offset);\r\n    offset += VRF_STATE_SIZE;\r\n\r\n    dataBuffer[offset++] = actionCode;\r\n\r\n    if (isMove) {\r\n      // Extended: [ActionCode(1)] + [X(2)] + [Y(2)] + [Z(2)] + [TimeDelta(1)]\r\n      const xVal = (move.x ?? 0) & 0xFFFF;\r\n      dataBuffer[offset++] = (xVal >> 8) & 0xff;\r\n      dataBuffer[offset++] = xVal & 0xff;\r\n      const yVal = (move.y ?? 0) & 0xFFFF;\r\n      dataBuffer[offset++] = (yVal >> 8) & 0xff;\r\n      dataBuffer[offset++] = yVal & 0xff;\r\n      const zVal = (move.z ?? 0) & 0xFFFF;\r\n      dataBuffer[offset++] = (zVal >> 8) & 0xff;\r\n      dataBuffer[offset++] = zVal & 0xff;\r\n      dataBuffer[offset++] = timeDelta & 0xff;\r\n    } else {\r\n      // Standard: [ActionCode(1)] + [Lane(1)] + [TimeDelta(1)]\r\n      dataBuffer[offset++] = lane & 0xff;\r\n      dataBuffer[offset++] = timeDelta & 0xff;\r\n    }\r\n\r\n    dataBuffer.set(nistBytes, offset);\r\n    offset += NIST_SIZE;\r\n\r\n    dataBuffer.set(btcBytes, offset);\r\n    offset += BTC_SIZE;\r\n\r\n    dataBuffer.set(kaspaBytes, offset);\r\n\r\n    // \u2500\u2500 Step 5: HMAC-SHA256 \u2500\u2500\r\n    const hmacResult = await hmacSha256(vrfState, dataBuffer);\r\n\r\n    // \u2500\u2500 Step 6: Entropy hash for fold() \u2500\u2500\r\n    const entropyConcat = new Uint8Array(KASPA_SIZE + NIST_SIZE + BTC_SIZE);\r\n    entropyConcat.set(kaspaBytes, 0);\r\n    entropyConcat.set(nistBytes, KASPA_SIZE);\r\n    entropyConcat.set(btcBytes, KASPA_SIZE + NIST_SIZE);\r\n    const entropyHash = await sha256(entropyConcat);\r\n    const entropyHex = bytesToHex(entropyHash);\r\n\r\n    // \u2500\u2500 Step 7: Recursive fold \u2500\u2500\r\n    const foldSeed = genesisTxId || gameId || \"kktp\";\r\n    const foldBitstring = await fold(bytesToHex(hmacResult), entropyHex, { seed: foldSeed });\r\n\r\n    // \u2500\u2500 Step 8: Final VRF output \u2500\u2500\r\n    const vrfOutputBytes = await sha256(new TextEncoder().encode(foldBitstring));\r\n    const computedFragment = bytesToHex(vrfOutputBytes.slice(0, 4));\r\n\r\n    // \u2500\u2500 Step 9: Compare fragment \u2500\u2500\r\n    const expectedFragment = normalizeHexInput(\r\n      move.vrfFragment || move.vrfOutputHex || move.vrfOutput || \"\",\r\n    ).slice(0, 8);\r\n\r\n    if (computedFragment === expectedFragment) {\r\n      matchCount++;\r\n    } else {\r\n      mismatchCount++;\r\n      addReason(reasons, `vrf_chain_mismatch_at_move_${sequence}`);\r\n    }\r\n\r\n    // \u2500\u2500 Step 10: Advance state \u2500\u2500\r\n    vrfState = vrfOutputBytes;\r\n  }\r\n\r\n  const verified = mismatchCount === 0 && matchCount > 0;\r\n\r\n  if (verified) {\r\n    // No warning needed \u2014 chain is cryptographically verified\r\n  } else if (mismatchCount > 0) {\r\n    addReason(reasons, \"vrf_chain_integrity_failed\");\r\n  }\r\n\r\n  return {\r\n    verified,\r\n    matchCount,\r\n    mismatchCount,\r\n    totalMoves: vrfMoves.length,\r\n  };\r\n}\r\n", "/**\r\n * anchorParser.js - Decode anchor payloads into human-readable output\r\n */\r\n\r\nimport { ANCHOR, CODE_TO_ACTION, MOVE_ACTION_CODE, decodeCoord14, movePacketSize } from \"../core/constants.js\";\r\n\r\nexport function parseAnchor(anchorItem) {\r\n  return formatAnchorPayload(anchorItem);\r\n}\r\n\r\nexport function parseAnchorPayload(type, bytes) {\r\n  if (!bytes || bytes.length === 0) {\r\n    return { lines: [\"parseError: empty payload\"] };\r\n  }\r\n  if (type === \"genesis\") {\r\n    return parseGenesisPayload(bytes);\r\n  }\r\n  if (type === \"heartbeat\") {\r\n    return parseHeartbeatPayload(bytes);\r\n  }\r\n  if (type === \"final\") {\r\n    return parseFinalPayload(bytes);\r\n  }\r\n  return { lines: [\"parseError: unknown anchor type\"] };\r\n}\r\n\r\nexport function parseGenesisPayload(bytes) {\r\n  const lines = [];\r\n  if (bytes.length < ANCHOR.GENESIS_BASE_SIZE) {\r\n    return { lines: [\"parseError: payload too short for genesis\"] };\r\n  }\r\n  let offset = 0;\r\n  const version = bytes[offset++];\r\n  const anchorType = bytes[offset++];\r\n  const gameIdHash = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const hashedSeed = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n\r\n  const btcBlockHashes = [];\r\n  for (let i = 0; i < ANCHOR.BTC_BLOCK_COUNT; i++) {\r\n    btcBlockHashes.push(bytesToHex(bytes.slice(offset, offset + 32)));\r\n    offset += 32;\r\n  }\r\n\r\n  const startDaaScore = readBigUint64BE(bytes, offset);\r\n  offset += 8;\r\n  const endDaaScore = readBigUint64BE(bytes, offset);\r\n  offset += 8;\r\n  const nistPulseIndex = readBigUint64BE(bytes, offset);\r\n  offset += 8;\r\n  const nistOutputHash = bytesToHex(bytes.slice(offset, offset + 64));\r\n  offset += 64;\r\n  const nistSignature = bytesToHex(bytes.slice(offset, offset + 512));\r\n\r\n  lines.push(`version: ${version}`);\r\n  lines.push(`anchorType: ${anchorType}`);\r\n  lines.push(`gameIdHash: ${gameIdHash}`);\r\n  lines.push(`hashedSeed: ${hashedSeed}`);\r\n  for (let i = 0; i < btcBlockHashes.length; i++) {\r\n    lines.push(`btcBlockHash[${i}]: ${btcBlockHashes[i]}`);\r\n  }\r\n  lines.push(`startDaaScore: ${startDaaScore}`);\r\n  lines.push(`endDaaScore: ${endDaaScore}`);\r\n  lines.push(`nistPulseIndex: ${nistPulseIndex}`);\r\n  lines.push(`nistOutputHash: ${nistOutputHash}`);\r\n  lines.push(\r\n    `nistSignature: ${truncateHex(nistSignature, 64)} (len=${nistSignature.length})`,\r\n  );\r\n\r\n  return { lines };\r\n}\r\n\r\nexport function parseHeartbeatPayload(bytes) {\r\n  const lines = [];\r\n  const minHeader = Math.min(ANCHOR.HEARTBEAT_HEADER_SIZE, ANCHOR.HEARTBEAT_HEADER_SIZE_V4);\r\n  if (bytes.length < minHeader) {\r\n    return { lines: [\"parseError: payload too short for heartbeat\"] };\r\n  }\r\n  let offset = 0;\r\n  const version = bytes[offset++];\r\n  const anchorType = bytes[offset++];\r\n  const merkleRoot = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const prevTxId = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const deltaFlags = bytes[offset++];\r\n  const moveCount = bytes[offset++];\r\n\r\n  lines.push(`version: ${version}`);\r\n  lines.push(`anchorType: ${anchorType}`);\r\n  lines.push(`merkleRoot: ${merkleRoot}`);\r\n  lines.push(`prevTxId: ${prevTxId}`);\r\n  lines.push(`deltaFlags: ${deltaFlags} (${formatDeltaFlags(deltaFlags)})`);\r\n  lines.push(`moveCount: ${moveCount}`);\r\n\r\n  // v5: read movesSectionLength\r\n  let movesSectionLength = null;\r\n  if (version >= 5) {\r\n    movesSectionLength = (bytes[offset] << 8) | bytes[offset + 1];\r\n    offset += 2;\r\n    lines.push(`movesSectionLength: ${movesSectionLength}`);\r\n  }\r\n\r\n  for (let i = 0; i < moveCount; i++) {\r\n    if (offset >= bytes.length) {\r\n      lines.push(`move[${i}]: parseError (payload too short)`);\r\n      break;\r\n    }\r\n\r\n    const actionByte = bytes[offset];\r\n    const actionCode = (actionByte >> 4) & 0x0f;\r\n    const pktSize = (version >= 5) ? movePacketSize(actionCode) : ANCHOR.MOVE_PACKET_SIZE;\r\n\r\n    if (offset + pktSize > bytes.length) {\r\n      lines.push(`move[${i}]: parseError (payload too short for ${pktSize}-byte packet)`);\r\n      break;\r\n    }\r\n\r\n    const actionName = CODE_TO_ACTION[actionCode] ?? \"unknown\";\r\n\r\n    if (version >= 5 && actionCode === MOVE_ACTION_CODE) {\r\n      // Extended 16-byte MOVE packet\r\n      const timeDelta = bytes[offset + 1];\r\n      const xRaw = (bytes[offset + 2] << 8) | bytes[offset + 3];\r\n      const yRaw = (bytes[offset + 4] << 8) | bytes[offset + 5];\r\n      const zRaw = (bytes[offset + 6] << 8) | bytes[offset + 7];\r\n      const vrfFragment = bytesToHex(bytes.slice(offset + 8, offset + 12));\r\n      const value = (bytes[offset + 12] << 8) | bytes[offset + 13];\r\n      const timeDeltaMs = timeDelta * ANCHOR.TIME_DELTA_SCALE;\r\n      const x = decodeCoord14(xRaw);\r\n      const y = decodeCoord14(yRaw);\r\n      const z = decodeCoord14(zRaw);\r\n      lines.push(\r\n        `move[${i}]: actionCode=${actionCode} (${actionName}) x=${x} y=${y} z=${z} timeDeltaMs=${timeDeltaMs} vrfFragment=${vrfFragment} value=${value}`,\r\n      );\r\n    } else {\r\n      // Standard 8-byte packet\r\n      const lane = actionByte & 0x0f;\r\n      const timeDelta = bytes[offset + 1];\r\n      const vrfFragment = bytesToHex(bytes.slice(offset + 2, offset + 6));\r\n      const value = (bytes[offset + 6] << 8) | bytes[offset + 7];\r\n      const timeDeltaMs = timeDelta * ANCHOR.TIME_DELTA_SCALE;\r\n      lines.push(\r\n        `move[${i}]: actionCode=${actionCode} (${actionName}) lane=${lane} timeDeltaMs=${timeDeltaMs} vrfFragment=${vrfFragment} value=${value}`,\r\n      );\r\n    }\r\n\r\n    offset += pktSize;\r\n  }\r\n\r\n  if (deltaFlags & ANCHOR.DELTA_FLAG_BTC) {\r\n    if (offset + ANCHOR.HEARTBEAT_DELTA_BTC_SIZE <= bytes.length) {\r\n      const btcDelta = bytesToHex(bytes.slice(offset, offset + 32));\r\n      offset += 32;\r\n      lines.push(`btcDeltaHash: ${btcDelta}`);\r\n    } else {\r\n      lines.push(\"btcDeltaHash: parseError (payload too short)\");\r\n    }\r\n  }\r\n\r\n  if (deltaFlags & ANCHOR.DELTA_FLAG_NIST) {\r\n    if (offset + ANCHOR.HEARTBEAT_DELTA_NIST_SIZE <= bytes.length) {\r\n      const pulseIndex = readBigUint64BE(bytes, offset);\r\n      offset += 8;\r\n      const outputHash = bytesToHex(bytes.slice(offset, offset + 64));\r\n      offset += 64;\r\n      const signature = bytesToHex(bytes.slice(offset, offset + 512));\r\n      offset += 512;\r\n      lines.push(`nistPulseIndex: ${pulseIndex}`);\r\n      lines.push(`nistOutputHash: ${outputHash}`);\r\n      lines.push(\r\n        `nistSignature: ${truncateHex(signature, 64)} (len=${signature.length})`,\r\n      );\r\n    } else {\r\n      lines.push(\"nistDelta: parseError (payload too short)\");\r\n    }\r\n  }\r\n\r\n  return { lines };\r\n}\r\n\r\nexport function parseFinalPayload(bytes) {\r\n  const lines = [];\r\n  if (bytes.length < ANCHOR.FINAL_SIZE) {\r\n    return { lines: [\"parseError: payload too short for final\"] };\r\n  }\r\n  let offset = 0;\r\n  const version = bytes[offset++];\r\n  const anchorType = bytes[offset++];\r\n  const merkleRoot = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const genesisTxId = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const prevTxId = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const resultLeafHash = bytesToHex(bytes.slice(offset, offset + 32));\r\n  offset += 32;\r\n  const finalScore = readUint32BE(bytes, offset);\r\n  offset += 4;\r\n  const coinsCollected = readUint32BE(bytes, offset);\r\n  offset += 4;\r\n  const raceTimeMs = readUint32BE(bytes, offset);\r\n  offset += 4;\r\n  const outcomeCode = bytes[offset++];\r\n  const totalMoves = bytes[offset++];\r\n  const outcomeName = formatOutcome(outcomeCode);\r\n\r\n  lines.push(`version: ${version}`);\r\n  lines.push(`anchorType: ${anchorType}`);\r\n  lines.push(`merkleRoot: ${merkleRoot}`);\r\n  lines.push(`genesisTxId: ${genesisTxId}`);\r\n  lines.push(`prevTxId: ${prevTxId}`);\r\n  lines.push(`resultLeafHash: ${resultLeafHash}`);\r\n  lines.push(`finalScore: ${finalScore}`);\r\n  lines.push(`coinsCollected: ${coinsCollected}`);\r\n  lines.push(`raceTimeMs: ${raceTimeMs}`);\r\n  lines.push(`outcomeCode: ${outcomeCode} (${outcomeName})`);\r\n  lines.push(`totalMoves: ${totalMoves}`);\r\n\r\n  return { lines };\r\n}\r\n\r\nfunction formatAnchorPayload(anchorItem) {\r\n  const hex = String(anchorItem?.anchorHex || \"\");\r\n  if (!hex) {\r\n    return \"No payload available.\";\r\n  }\r\n  const bytes = hexToBytes(hex);\r\n  const type = String(anchorItem?.type || \"unknown\").toLowerCase();\r\n  const parsed = parseAnchorPayload(type, bytes);\r\n  const groupedHex = groupHex(hex, 32);\r\n  return [\r\n    `type: ${anchorItem?.type || \"unknown\"}`,\r\n    `txId: ${anchorItem?.txId || \"unknown\"}`,\r\n    ...(parsed?.lines || [\"parseError: unable to decode payload\"]),\r\n    \"payloadHex:\",\r\n    groupedHex,\r\n  ].join(\"\\n\");\r\n}\r\n\r\nfunction hexToBytes(hex) {\r\n  const clean = hex.replace(/[^a-fA-F0-9]/g, \"\");\r\n  const length = Math.floor(clean.length / 2);\r\n  const bytes = new Uint8Array(length);\r\n  for (let i = 0; i < length; i++) {\r\n    bytes[i] = parseInt(clean.slice(i * 2, i * 2 + 2), 16);\r\n  }\r\n  return bytes;\r\n}\r\n\r\nfunction bytesToHex(bytes) {\r\n  const parts = [];\r\n  for (const b of bytes) {\r\n    parts.push(b.toString(16).padStart(2, \"0\"));\r\n  }\r\n  return parts.join(\"\");\r\n}\r\n\r\nfunction readUint32BE(bytes, offset) {\r\n  return (\r\n    (bytes[offset] << 24) |\r\n    (bytes[offset + 1] << 16) |\r\n    (bytes[offset + 2] << 8) |\r\n    bytes[offset + 3]\r\n  ) >>> 0;\r\n}\r\n\r\nfunction readBigUint64BE(bytes, offset) {\r\n  let result = 0n;\r\n  for (let i = 0; i < 8; i++) {\r\n    result = (result << 8n) | BigInt(bytes[offset + i]);\r\n  }\r\n  return result.toString();\r\n}\r\n\r\nfunction formatDeltaFlags(flags) {\r\n  const parts = [];\r\n  if (flags & ANCHOR.DELTA_FLAG_BTC) parts.push(\"btc\");\r\n  if (flags & ANCHOR.DELTA_FLAG_NIST) parts.push(\"nist\");\r\n  return parts.length ? parts.join(\", \") : \"none\";\r\n}\r\n\r\nfunction formatOutcome(outcomeCode) {\r\n  if (outcomeCode === ANCHOR.OUTCOME_COMPLETE) return \"complete\";\r\n  if (outcomeCode === ANCHOR.OUTCOME_FORFEIT) return \"forfeit\";\r\n  if (outcomeCode === ANCHOR.OUTCOME_TIMEOUT) return \"timeout\";\r\n  if (outcomeCode === ANCHOR.OUTCOME_CHEAT) return \"cheat\";\r\n  return \"unknown\";\r\n}\r\n\r\nfunction truncateHex(hex, maxChars) {\r\n  if (hex.length <= maxChars) {\r\n    return hex;\r\n  }\r\n  const head = hex.slice(0, maxChars / 2);\r\n  const tail = hex.slice(-maxChars / 2);\r\n  return `${head}...${tail}`;\r\n}\r\n\r\nfunction groupHex(hex, groupBytes) {\r\n  const clean = hex.replace(/[^a-fA-F0-9]/g, \"\");\r\n  const charsPerGroup = Math.max(2, groupBytes * 2);\r\n  const chunks = [];\r\n  for (let i = 0; i < clean.length; i += charsPerGroup) {\r\n    chunks.push(clean.slice(i, i + charsPerGroup));\r\n  }\r\n  return chunks.join(\"\\n\");\r\n}\r\n", "{\r\n  \"type\": \"object\",\r\n\r\n  \"properties\": {\r\n    \"type\": {\r\n      \"type\": \"string\",\r\n      \"enum\": [\"discovery\"],\r\n      \"required\": true\r\n    },\r\n\r\n    \"version\": {\r\n      \"type\": \"number\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"sid\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]{32,}$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"pub_sig\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"pub_dh\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"vrf_value\": {\r\n      \"type\": [\"string\", \"null\"]\r\n    },\r\n\r\n    \"vrf_proof\": {\r\n      \"type\": [\"string\", \"null\"]\r\n    },\r\n\r\n    \"meta\": {\r\n      \"type\": \"object\",\r\n      \"required\": true,\r\n      \"properties\": {\r\n        \"game\": {\r\n          \"type\": \"string\",\r\n          \"required\": true\r\n        },\r\n        \"version\": {\r\n          \"type\": \"string\",\r\n          \"required\": true\r\n        },\r\n        \"expected_uptime_seconds\": {\r\n          \"type\": \"number\",\r\n          \"required\": true\r\n        },\r\n        \"lobby\": {\r\n          \"type\": \"boolean\",\r\n          \"description\": \"If true, this discovery represents a lobby/group session\"\r\n        },\r\n        \"lobby_name\": {\r\n          \"type\": \"string\",\r\n          \"description\": \"Human-readable lobby name (required if lobby=true)\"\r\n        },\r\n        \"max_members\": {\r\n          \"type\": \"number\",\r\n          \"description\": \"Maximum members allowed in lobby (required if lobby=true)\"\r\n        }\r\n      },\r\n      \"additionalProperties\": false\r\n    },\r\n\r\n    \"sig\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\"\r\n    }\r\n  },\r\n\r\n  \"required\": [\"type\", \"version\", \"sid\", \"pub_sig\", \"pub_dh\", \"meta\", \"sig\"],\r\n\r\n  \"additionalProperties\": false\r\n}\r\n", "{\r\n  \"type\": \"object\",\r\n\r\n  \"properties\": {\r\n    \"type\": {\r\n      \"type\": \"string\",\r\n      \"enum\": [\"response\"],\r\n      \"required\": true\r\n    },\r\n\r\n    \"version\": {\r\n      \"type\": \"number\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"sid\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]{32,}$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"initiator_pub_sig\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"initiator_pub_dh\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"pub_sig_resp\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"pub_dh_resp\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"vrf_value\": {\r\n      \"type\": [\"string\", \"null\"]\r\n    },\r\n\r\n    \"vrf_proof\": {\r\n      \"type\": [\"string\", \"null\"]\r\n    },\r\n\r\n    \"sig_resp\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\"\r\n    }\r\n  },\r\n\r\n  \"required\": [\r\n    \"type\",\r\n    \"version\",\r\n    \"sid\",\r\n    \"initiator_pub_sig\",\r\n    \"initiator_pub_dh\",\r\n    \"pub_sig_resp\",\r\n    \"pub_dh_resp\",\r\n    \"sig_resp\"\r\n  ],\r\n\r\n  \"additionalProperties\": false\r\n}\r\n", "{\r\n  \"type\": \"object\",\r\n\r\n  \"properties\": {\r\n    \"type\": {\r\n      \"type\": \"string\",\r\n      \"enum\": [\"msg\"],\r\n      \"required\": true\r\n    },\r\n\r\n    \"version\": {\r\n      \"type\": \"number\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"sid\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]{32,}$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"mailbox_id\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"direction\": {\r\n      \"type\": \"string\",\r\n      \"enum\": [\"AtoB\", \"BtoA\"],\r\n      \"required\": true\r\n    },\r\n\r\n    \"seq\": {\r\n      \"type\": \"number\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"nonce\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"ciphertext\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    }\r\n  },\r\n\r\n  \"required\": [\r\n    \"type\",\r\n    \"version\",\r\n    \"sid\",\r\n    \"mailbox_id\",\r\n    \"direction\",\r\n    \"seq\",\r\n    \"nonce\",\r\n    \"ciphertext\"\r\n  ],\r\n\r\n  \"additionalProperties\": false\r\n}\r\n", "{\r\n  \"type\": \"object\",\r\n\r\n  \"properties\": {\r\n    \"type\": {\r\n      \"type\": \"string\",\r\n      \"enum\": [\"session_end\"],\r\n      \"required\": true\r\n    },\r\n\r\n    \"version\": {\r\n      \"type\": \"number\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"sid\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]{32,}$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"pub_sig\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"reason\": {\r\n      \"type\": \"string\",\r\n      \"required\": true\r\n    },\r\n\r\n    \"sig\": {\r\n      \"type\": \"string\",\r\n      \"pattern\": \"^[0-9a-f]+$\"\r\n    }\r\n  },\r\n\r\n  \"required\": [\r\n    \"type\",\r\n    \"version\",\r\n    \"sid\",\r\n    \"pub_sig\",\r\n    \"reason\",\r\n    \"sig\"\r\n  ],\r\n\r\n  \"additionalProperties\": false\r\n}\r\n", "// validator.js\r\n\r\nimport discoverySchema from \"../schemas/discovery.json\" with { type: \"json\" };\r\nimport responseSchema from \"../schemas/response.json\" with { type: \"json\" };\r\nimport mailboxMessageSchema from \"../schemas/message.json\" with { type: \"json\" };\r\nimport sessionEndSchema from \"../schemas/sessionEnd.json\" with { type: \"json\" };\r\n\r\n/**\r\n * Custom Error for KKTP Validation\r\n */\r\nexport class KKTPValidationError extends Error {\r\n  constructor(message, path) {\r\n    super(`${message} at [${path}]`);\r\n    this.name = \"KKTPValidationError\";\r\n    this.path = path;\r\n  }\r\n}\r\n\r\nexport class KKTPValidator {\r\n  #schema;\r\n  #name;\r\n\r\n  constructor(schema, { name = \"default\" } = {}) {\r\n    this.#schema = schema;\r\n    this.#name = name;\r\n  }\r\n\r\n  /**\r\n   * Validates an object against the schema.\r\n   * Throws KKTPValidationError if invalid.\r\n   */\r\n  validate(obj) {\r\n    this._validateSchema(this.#schema, obj, this.#name);\r\n    return true;\r\n  }\r\n\r\n  _validateSchema(schema, value, path) {\r\n    // 1. Check Required / Nullability\r\n    if (schema.required && (value === undefined || value === null)) {\r\n      throw new KKTPValidationError(\"Value is required\", path);\r\n    }\r\n\r\n    if (value === undefined || value === null) {\r\n      if (schema.type === \"null\" || !schema.required) return;\r\n      throw new KKTPValidationError(\"Value cannot be null/undefined\", path);\r\n    }\r\n\r\n    // 2. Check Type\r\n    if (schema.type) this._checkType(schema.type, value, path);\r\n\r\n    // 3. Check Enums\r\n    if (schema.enum && !schema.enum.includes(value)) {\r\n      throw new KKTPValidationError(\r\n        `Value \"${value}\" not in enum [${schema.enum.join(\", \")}]`,\r\n        path,\r\n      );\r\n    }\r\n\r\n    // 4. Check Regex Patterns (Strict Hex checking)\r\n    // Skip pattern check if value is null (for optional fields like VRF)\r\n    if (schema.pattern && value !== null) {\r\n      const re =\r\n        schema.pattern instanceof RegExp\r\n          ? schema.pattern\r\n          : new RegExp(schema.pattern);\r\n      if (typeof value !== \"string\" || !re.test(value)) {\r\n        throw new KKTPValidationError(\r\n          `Value \"${value}\" does not match pattern ${re}`,\r\n          path,\r\n        );\r\n      }\r\n    }\r\n\r\n    // 5. Recurse into Objects\r\n    if (schema.type === \"object\" && schema.properties) {\r\n      this._validateObject(schema, value, path);\r\n    }\r\n\r\n    // 6. Recurse into Arrays\r\n    if (schema.type === \"array\" && schema.items) {\r\n      this._validateArray(schema, value, path);\r\n    }\r\n  }\r\n\r\n  _checkType(expected, value, path) {\r\n    const actual =\r\n      value === null ? \"null\" : Array.isArray(value) ? \"array\" : typeof value;\r\n\r\n    // Support union types like [\"string\", \"null\"] for optional VRF fields\r\n    if (Array.isArray(expected)) {\r\n      if (!expected.includes(actual)) {\r\n        throw new KKTPValidationError(\r\n          `Expected type \"${expected.join(\"|\")}\" but got \"${actual}\"`,\r\n          path,\r\n        );\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (expected === \"number\") {\r\n      if (actual !== \"number\" || !Number.isFinite(value)) {\r\n        throw new KKTPValidationError(\"Expected finite number\", path);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (expected !== actual) {\r\n      throw new KKTPValidationError(\r\n        `Expected type \"${expected}\" but got \"${actual}\"`,\r\n        path,\r\n      );\r\n    }\r\n  }\r\n\r\n  _validateObject(schema, obj, path) {\r\n    const props = schema.properties || {};\r\n    const keys = Object.keys(obj);\r\n\r\n    // Check for missing required keys\r\n    for (const [key, propSchema] of Object.entries(props)) {\r\n      if (propSchema.required && !(key in obj)) {\r\n        throw new KKTPValidationError(`Missing required field \"${key}\"`, path);\r\n      }\r\n    }\r\n\r\n    // Validate existing keys\r\n    for (const key of keys) {\r\n      if (key in props) {\r\n        this._validateSchema(props[key], obj[key], `${path}.${key}`);\r\n      }\r\n    }\r\n\r\n    // Handle additionalProperties: false logic\r\n    const additional = schema.additionalProperties;\r\n    const isTopLevel = path === this.#name;\r\n\r\n    if (additional === false) {\r\n      for (const key of keys) {\r\n        if (!(key in props)) {\r\n          // Protocol Exception: Only allow 'meta' at top level for Discovery anchors (\u00A75.2)\r\n          if (isTopLevel && key === \"meta\" && this.#name === \"discovery\") continue;\r\n          throw new KKTPValidationError(\r\n            `Unexpected field \"${key}\"`,\r\n            `${path}.${key}`,\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _validateArray(schema, arr, path) {\r\n    if (!Array.isArray(arr)) {\r\n      throw new KKTPValidationError(\"Expected array\", path);\r\n    }\r\n\r\n    const itemSchema = schema.items;\r\n    for (let i = 0; i < arr.length; i++) {\r\n      this._validateSchema(itemSchema, arr[i], `${path}[${i}]`);\r\n    }\r\n  }\r\n}\r\n\r\n// ---- Ready-to-use Singleton Instances ----\r\n\r\nexport const discoveryValidator = new KKTPValidator(discoverySchema, {\r\n  name: \"discovery\",\r\n});\r\nexport const responseValidator = new KKTPValidator(responseSchema, {\r\n  name: \"response\",\r\n});\r\nexport const sessionEndValidator = new KKTPValidator(sessionEndSchema, {\r\n  name: \"sessionEnd\",\r\n});\r\nexport const mailboxMessageValidator = new KKTPValidator(mailboxMessageSchema, {\r\n  name: \"message\",\r\n});\r\n", "// kktp/protocol/kktpProtocolFacade.js\r\nimport {\r\n  discoveryValidator,\r\n  responseValidator,\r\n  sessionEndValidator,\r\n} from \"./integrity/validator.js\";\r\nimport {\r\n  canonicalize,\r\n  prepareForSigning,\r\n  toPlainJson as _toPlainJson,\r\n  strictParseJson,\r\n} from \"./integrity/canonical.js\";\r\nimport { KKTP_STATES } from \"./sessions/stateMachine.js\";\r\nimport { AnchorFactory } from \"./integrity/anchorFactory.js\";\r\nimport { bytesToHex } from \"./utils/conversions.js\";\r\n\r\n/**\r\n * KKTPProtocol - Handles KKTP protocol operations (anchor creation, signing, intake)\r\n *\r\n * Requires a KaspaAdapter for network operations (via state machine).\r\n */\r\nexport class KKTPProtocol {\r\n  /**\r\n   * @param {import('./sessions/stateMachine.js').KKTPStateMachine} stateMachine - State machine with adapter\r\n   */\r\n  constructor(stateMachine) {\r\n    this.sm = stateMachine;\r\n    // AnchorFactory receives adapter from state machine\r\n    this.anchorFactory = new AnchorFactory(stateMachine.adapter);\r\n  }\r\n\r\n  /**\r\n   * PHASE 1: Create a Discovery Anchor\r\n   * Delegates to factory for complex construction/VRF/Versioning.\r\n   * Uses prederivedKeys if available (per-contact branch system), otherwise derives fresh.\r\n   */\r\n  async createDiscoveryAnchor(meta) {\r\n    // Use pre-derived keys from branch system if available, otherwise derive fresh\r\n    const keys = this.sm.kktp.prederivedKeys\r\n      ? this.sm.kktp.prederivedKeys\r\n      : await this.sm.adapter.generateIdentityKeys(this.sm.keyIndex);\r\n\r\n    this.sm.kktp.myDhPriv = keys.dh.privateKey;\r\n    this.sm.kktp.myPrivSig = keys.sig.privateKey; // Store for SessionEnd signing (\u00A75.5)\r\n\r\n    const discovery = await this.anchorFactory.createDiscovery({\r\n      meta,\r\n      sig: keys.sig,\r\n      dh: keys.dh,\r\n    });\r\n    discovery.sig = await this.signAnchor(discovery, keys.sig.privateKey);\r\n    discoveryValidator.validate(discovery);\r\n\r\n    // Store for the Initiator's state\r\n    this.sm.kktp.discoveryAnchor = discovery;\r\n\r\n    return { discovery, dhPrivateKey: keys.dh.privateKey };\r\n  }\r\n\r\n  /**\r\n   * PHASE 2: Create a Response Anchor\r\n   * Uses prederivedKeys if available (per-contact branch system), otherwise derives fresh.\r\n   */\r\n  async createResponseAnchor(discovery) {\r\n    // Use pre-derived keys from branch system if available, otherwise derive fresh\r\n    const keys = this.sm.kktp.prederivedKeys\r\n      ? this.sm.kktp.prederivedKeys\r\n      : await this.sm.adapter.generateIdentityKeys(this.sm.keyIndex);\r\n\r\n    this.sm.kktp.myDhPriv = keys.dh.privateKey;\r\n    this.sm.kktp.myPrivSig = keys.sig.privateKey; // Store for SessionEnd signing (\u00A75.5)\r\n\r\n    const response = await this.anchorFactory.createResponse(discovery, {\r\n      sig: keys.sig,\r\n      dh: keys.dh,\r\n    });\r\n    response.sig_resp = await this.signAnchor(response, keys.sig.privateKey);\r\n    responseValidator.validate(response);\r\n\r\n    // Trigger State Machine connection immediately for Responder\r\n    await this.sm.connect(discovery, response);\r\n\r\n    return { response, dhPrivateKey: keys.dh.privateKey };\r\n  }\r\n\r\n  /**\r\n   * PHASE 3: Communicate\r\n   * Delegates to state machine for proper seq tracking (\u00A76.6)\r\n   */\r\n  createMessageAnchor(plaintext) {\r\n    if (this.sm.state !== KKTP_STATES.ACTIVE) {\r\n      throw new Error(\"Cannot send message: Session not established.\");\r\n    }\r\n\r\n    // Use state machine to ensure seq tracking + canonicalization (\u00A75.4, \u00A76.6)\r\n    return this.sm.sendMessage(plaintext);\r\n  }\r\n\r\n  /**\r\n   * PHASE 4: Terminate (\u00A75.5, \u00A77.7)\r\n   */\r\n  async createEndAnchor(reason = \"finished\") {\r\n    let priv = this.sm.kktp.myPrivSig;\r\n    let pub = this.sm.kktp.myPubSig;\r\n\r\n    // Normalize or re-derive if missing/invalid\r\n    if (!priv || (typeof priv !== \"string\" && !(priv instanceof Uint8Array))) {\r\n      const keys = this.sm.kktp.prederivedKeys\r\n        ? this.sm.kktp.prederivedKeys\r\n        : await this.sm.adapter.generateIdentityKeys(this.sm.keyIndex);\r\n      priv = keys.sig.privateKey;\r\n      pub = keys.sig.publicKey;\r\n    }\r\n\r\n    if (priv instanceof Uint8Array) {\r\n      priv = bytesToHex(priv);\r\n    }\r\n\r\n    this.sm.kktp.myPrivSig = priv;\r\n    this.sm.kktp.myPubSig = pub;\r\n\r\n    const anchor = await this.anchorFactory.createSessionEndAnchor(\r\n      this.sm.kktp.sid,\r\n      this.sm.kktp.myPubSig,\r\n      reason,\r\n    );\r\n\r\n    anchor.sig = await this.signAnchor(anchor, this.sm.kktp.myPrivSig);\r\n\r\n    sessionEndValidator.validate(anchor);\r\n    this.sm.terminate();\r\n\r\n    return anchor;\r\n  }\r\n\r\n  /**\r\n   * THE INTAKE: Process any incoming KKTP object\r\n   */\r\n  async processIncoming(anchor) {\r\n    switch (anchor.type) {\r\n      case \"discovery\":\r\n        // \u00A76.1: Discovery is the start. Schema is already verified by Adapter.\r\n        return { type: \"DISCOVERY_RECEIVED\", data: anchor };\r\n\r\n      case \"response\":\r\n        // \u00A76.1: Handshake logic\r\n        const discoveryRef = this.sm.kktp.discoveryAnchor;\r\n        if (!discoveryRef)\r\n          throw new Error(\"No active discovery to respond to.\");\r\n\r\n        await this.sm.connect(discoveryRef, anchor);\r\n        return {\r\n          type: \"HANDSHAKE_COMPLETE\",\r\n          mailboxId: this.sm.kktp.mailboxId,\r\n        };\r\n\r\n      case \"msg\":\r\n        // \u00A76.6: Encrypted payload path\r\n        const messages = this.sm.receiveMessage(anchor);\r\n        return { type: \"MESSAGES_READY\", data: messages };\r\n\r\n      case \"session_end\":\r\n        // \u00A77.4 & \u00A77.7: Identity + Termination\r\n        // We don't need verifyMessage() here because the ADAPTER just did it!\r\n        // We only check: Is the signer actually the Peer or Me?\r\n        const isFromMe = anchor.pub_sig === this.sm.kktp.myPubSig;\r\n        const isFromPeer = anchor.pub_sig === this.sm.kktp.peerPubSig;\r\n\r\n        if (!isFromMe && !isFromPeer) {\r\n          throw new Error(\r\n            \"Unauthorized SessionEnd: Signer is not a session participant.\",\r\n          );\r\n        }\r\n\r\n        this.sm.terminate();\r\n        return { type: \"SESSION_CLOSED\", data: anchor.reason };\r\n\r\n      default:\r\n        throw new Error(`Unknown KKTP type: ${anchor.type}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Utility: Sign a KKTP Anchor\r\n   */\r\n  async signAnchor(anchor, privateKeyHex) {\r\n    const isResponse = anchor.type === \"response\";\r\n    const omitKeys = isResponse ? [\"sig_resp\"] : [\"sig\"];\r\n\r\n    const body = canonicalize(\r\n      prepareForSigning(anchor, { omitKeys, excludeMeta: true }),\r\n    );\r\n\r\n    // The protocol calls the adapter for the raw signature\r\n    return await this.sm.adapter.signMessage(privateKeyHex, body);\r\n  }\r\n\r\n  /**\r\n   * EXPOSED FOR AUDITORS:\r\n   * Formats any object according to the RFC 8785 (JCS) strict rules.\r\n   */\r\n  canonicalize(obj) {\r\n    return canonicalize(obj);\r\n  }\r\n\r\n  /**\r\n   * EXPOSED FOR AUDITORS:\r\n   * Strips the signature and non-signed metadata to prepare for hash verification.\r\n   */\r\n  prepareForVerification(anchor) {\r\n    const isResponse = anchor.type === \"response\";\r\n    const omitKeys = isResponse ? [\"sig_resp\"] : [\"sig\"];\r\n    // Note: excludeMeta: true is critical as per \u00A75.4\r\n    return prepareForSigning(anchor, { omitKeys, excludeMeta: true });\r\n  }\r\n\r\n  /**\r\n   * EXPOSED FOR AUDITORS:\r\n   * Converts an object to plain JSON (no methods, no prototypes)\r\n   */\r\n  toPlainJson(value) {\r\n    return _toPlainJson(value);\r\n  }\r\n\r\n  /** EXPOSED FOR AUDITORS:\r\n   * Strict JSON parsing that rejects non-JSON types.\r\n   * @param {string} value - JSON string to parse\r\n   * @returns {any} Parsed JSON object\r\n   */\r\n  strictParseJson(value) {\r\n    return strictParseJson(value);\r\n  }\r\n}\r\n", "// kktp-core/handshake.js\r\nimport {\r\n  discoveryValidator,\r\n  responseValidator,\r\n} from \"../integrity/validator.js\";\r\nimport { canonicalize, prepareForSigning } from \"../integrity/canonical.js\";\r\nimport { bytesToHex, hexToBytes } from \"../utils/conversions.js\";\r\nimport { blake2b } from \"https://esm.sh/@noble/hashes@1.3.0/blake2b\";\r\nimport { hkdf } from \"https://esm.sh/@noble/hashes@1.3.0/hkdf\";\r\n\r\n/**\r\n * Computes VRF input hash per \u00A76.1: H(pub_sig || pub_dh || sid)\r\n * Hashing prevents canonicalization attacks from string concatenation.\r\n * @param {...string} hexStrings - Hex-encoded key components\r\n * @returns {Uint8Array} 32-byte Blake2b hash\r\n */\r\nfunction computeVrfInputHash(...hexStrings) {\r\n  // Calculate total byte length\r\n  const totalLen = hexStrings.reduce((sum, h) => sum + h.length / 2, 0);\r\n  const combined = new Uint8Array(totalLen);\r\n\r\n  let offset = 0;\r\n  for (const hex of hexStrings) {\r\n    const bytes = hexToBytes(hex);\r\n    combined.set(bytes, offset);\r\n    offset += bytes.length;\r\n  }\r\n\r\n  // H(pub_sig || pub_dh || sid) - commits to structure, prevents key-substitution\r\n  return blake2b(combined, { dkLen: 32 });\r\n}\r\n\r\n/**\r\n * Establishes a session with mandatory VRF binding verification.\r\n * Follows KKTP Spec Sections 6.1, 6.2, 6.3, and 7.3.\r\n *\r\n * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} adapter - Network adapter\r\n * @param {Object} discovery - Discovery anchor\r\n * @param {Object} response - Response anchor\r\n * @param {number} keyIndex - Key derivation index\r\n * @param {string|null} dhPrivateKey - DH private key\r\n * @param {boolean} isInitiator - Whether this party initiated\r\n */\r\nexport async function establishSession(\r\n  adapter,\r\n  discovery,\r\n  response,\r\n  keyIndex = 0,\r\n  dhPrivateKey = null,\r\n  isInitiator = true,\r\n) {\r\n  // 1. Schema & Signature Validation\r\n  discoveryValidator.validate(discovery);\r\n  responseValidator.validate(response);\r\n\r\n  // 1.1 Verify Response echoes Initiator's keys (\u00A75.3 - Cryptographic Binding)\r\n  // This prevents Session Hijacking and Reflection attacks\r\n  if (response.initiator_pub_sig !== discovery.pub_sig) {\r\n    throw new Error(\r\n      \"Handshake Failed: Response initiator_pub_sig does not match Discovery pub_sig.\",\r\n    );\r\n  }\r\n  if (response.initiator_pub_dh !== discovery.pub_dh) {\r\n    throw new Error(\r\n      \"Handshake Failed: Response initiator_pub_dh does not match Discovery pub_dh.\",\r\n    );\r\n  }\r\n\r\n  const discBody = canonicalize(\r\n    prepareForSigning(discovery, { omitKeys: [\"sig\"], excludeMeta: true }),\r\n  );\r\n  const respBody = canonicalize(\r\n    prepareForSigning(response, { omitKeys: [\"sig_resp\"] }),\r\n  );\r\n\r\n  const [isDValid, isRValid] = await Promise.all([\r\n    adapter.verifyMessage(\r\n      discovery.pub_sig,\r\n      discBody,\r\n      discovery.sig,\r\n    ),\r\n    adapter.verifyMessage(\r\n      response.pub_sig_resp,\r\n      respBody,\r\n      response.sig_resp,\r\n    ),\r\n  ]);\r\n\r\n  if (!isDValid || !isRValid)\r\n    throw new Error(\"Handshake Failed: Invalid Signatures\");\r\n\r\n  // 2. VRF Binding Verification (\u00A76.1, \u00A77.3)\r\n  // VRF is OPTIONAL per deployment - only verify if present\r\n  // VRF input MUST be H(pub_sig || pub_dh || sid) to prevent canonicalization attacks\r\n  const initiatorVrfInputHash = computeVrfInputHash(\r\n    discovery.pub_sig,\r\n    discovery.pub_dh,\r\n    discovery.sid,\r\n  );\r\n\r\n  const responderVrfInputHash = computeVrfInputHash(\r\n    discovery.pub_sig,\r\n    discovery.pub_dh,\r\n    response.pub_sig_resp,\r\n    response.pub_dh_resp,\r\n    discovery.sid,\r\n  );\r\n\r\n  // VRF fields must be consistently null or non-null (value/proof pair)\r\n  const hasInitiatorVrf =\r\n    discovery.vrf_value !== null && discovery.vrf_proof !== null;\r\n  const hasResponderVrf =\r\n    response.vrf_value !== null && response.vrf_proof !== null;\r\n\r\n  // Validate VRF field consistency (both null or both present)\r\n  if (\r\n    (discovery.vrf_value === null) !== (discovery.vrf_proof === null) ||\r\n    (response.vrf_value === null) !== (response.vrf_proof === null)\r\n  ) {\r\n    throw new Error(\"Handshake Failed: VRF value/proof mismatch.\");\r\n  }\r\n\r\n  // Only verify VRF if initiator provided it\r\n  if (hasInitiatorVrf) {\r\n    const isInitiatorVrfValid = await adapter.verify(\r\n      discovery.vrf_value,\r\n      discovery.vrf_proof,\r\n      bytesToHex(initiatorVrfInputHash),\r\n    );\r\n    if (!isInitiatorVrfValid) {\r\n      throw new Error(\"Handshake Failed: Initiator VRF Binding Mismatch.\");\r\n    }\r\n  }\r\n\r\n  // Only verify VRF if responder provided it\r\n  if (hasResponderVrf) {\r\n    const isResponderVrfValid = await adapter.verify(\r\n      response.vrf_value,\r\n      response.vrf_proof,\r\n      bytesToHex(responderVrfInputHash),\r\n    );\r\n    if (!isResponderVrfValid) {\r\n      throw new Error(\"Handshake Failed: Responder VRF Binding Mismatch.\");\r\n    }\r\n  }\r\n\r\n  // 3. DH Shared Secret Derivation\r\n  const session = await adapter.startSession(keyIndex, dhPrivateKey);\r\n\r\n  // Per KKTP \u00A76.2: Initiator uses responder DH; responder uses initiator DH\r\n  const peerDH = isInitiator ? response.pub_dh_resp : discovery.pub_dh;\r\n  if (!peerDH) {\r\n    throw new Error(\"Handshake Failed: Missing peer DH public key.\");\r\n  }\r\n\r\n  const rawSharedSecret = session.deriveSharedSecret(peerDH);\r\n\r\n  // Ensure rawSharedSecret is Uint8Array\r\n  const sharedSecretBytes =\r\n    typeof rawSharedSecret === \"string\"\r\n      ? hexToBytes(rawSharedSecret)\r\n      : rawSharedSecret;\r\n\r\n  // 4. Session Key Derivation (\u00A76.2)\r\n  // K_session = HKDF-Expand(HKDF-Extract(salt=sid, IKM=K), info=pub_sig_A||pub_sig_B, L=32)\r\n  const pubSigA = hexToBytes(discovery.pub_sig);\r\n  const pubSigB = hexToBytes(response.pub_sig_resp);\r\n  const sidBytes = hexToBytes(discovery.sid);\r\n\r\n  // Construct info = pub_sig_A || pub_sig_B (raw bytes, not hex strings)\r\n  const info = new Uint8Array(pubSigA.length + pubSigB.length);\r\n  info.set(pubSigA, 0);\r\n  info.set(pubSigB, pubSigA.length);\r\n\r\n  // HKDF with Blake2b: Extract phase uses sid as salt, Expand uses info\r\n  // @noble/hashes hkdf(hash, salt, ikm, info, length) handles Extract+Expand\r\n  const kSessionBytes = hkdf(blake2b, sidBytes, sharedSecretBytes, info, 32);\r\n\r\n  // Validate output is exactly 32 bytes (256-bit key)\r\n  if (!(kSessionBytes instanceof Uint8Array) || kSessionBytes.length !== 32) {\r\n    throw new Error(\r\n      `Invalid K_session: expected 32-byte Uint8Array, got ${typeof kSessionBytes} of length ${kSessionBytes?.length}`,\r\n    );\r\n  }\r\n\r\n  if (!(kSessionBytes instanceof Uint8Array) || kSessionBytes.length !== 32) {\r\n    throw new Error(\r\n      `Invalid K_session length: expected 32, got ${kSessionBytes?.length}`,\r\n    );\r\n  }\r\n\r\n  session.setSessionKey(kSessionBytes);\r\n\r\n  // 5. Mailbox ID Derivation\r\n  const mailboxInput = new Uint8Array(\r\n    pubSigA.length + pubSigB.length + sidBytes.length,\r\n  );\r\n  mailboxInput.set(pubSigA, 0);\r\n  mailboxInput.set(pubSigB, pubSigA.length);\r\n  mailboxInput.set(sidBytes, pubSigA.length + pubSigB.length);\r\n\r\n  const mailboxId = bytesToHex(blake2b(mailboxInput, { dkLen: 32 }));\r\n\r\n  return { session, mailboxId, sessionKey: kSessionBytes };\r\n}\r\n", "/**\r\n * Helper to convert hex strings to bytes (if not already in your wrapper utilities)\r\n */\r\nexport function hexToBytes(hex) {\r\n  if (hex.length % 2 !== 0) throw new Error(\"Invalid hex string\");\r\n  const bytes = new Uint8Array(hex.length / 2);\r\n  for (let i = 0; i < hex.length; i += 2) {\r\n    bytes[i / 2] = parseInt(hex.substring(i, i + 2), 16);\r\n  }\r\n  return bytes;\r\n}\r\n\r\n/**\r\n * Convert a Uint8Array or array of bytes to a lowercase hex string.\r\n * Per KKTP \u00A75.1: All hex fields MUST be lowercase.\r\n * @param {Uint8Array|Array<number>} bytes - The bytes to convert.\r\n * @returns {string} Lowercase hex string.\r\n */\r\nexport function bytesToHex(bytes) {\r\n  return Array.from(bytes)\r\n    .map((b) => b.toString(16).padStart(2, \"0\").toLowerCase())\r\n    .join(\"\");\r\n}\r\n\r\n/**\r\n * Validates and normalizes a hex string to lowercase.\r\n * Per KKTP \u00A75.1: All hex fields MUST be lowercase.\r\n * @param {string} hex - The hex string to normalize.\r\n * @returns {string} Lowercase hex string.\r\n */\r\nexport function normalizeHex(hex) {\r\n  if (typeof hex !== \"string\" || !/^[0-9a-fA-F]*$/.test(hex)) {\r\n    throw new Error(\"Invalid hex string\");\r\n  }\r\n  return hex.toLowerCase();\r\n}\r\n\r\n/**\r\n * Convert a hex string to a UTF-8 string.\r\n * @param {string} hex\r\n * @returns {string}\r\n */\r\nexport function hexToUtf8(hex) {\r\n  if (typeof hex !== \"string\" || hex.length === 0) return \"\";\r\n  if (hex.length % 2 !== 0) throw new Error(\"Invalid hex string length\");\r\n  const bytes = new Uint8Array(hex.length / 2);\r\n  for (let i = 0; i < hex.length; i += 2) {\r\n    bytes[i / 2] = parseInt(hex.substring(i, i + 2), 16);\r\n  }\r\n  return new TextDecoder().decode(bytes);\r\n}\r\n\r\n/**\r\n * Convert a hex-encoded string (UTF-8) to a JS string.\r\n * @param {string} hex - The hex string to decode.\r\n * @returns {string} Decoded string.\r\n */\r\nexport function hexToString(hex) {\r\n  // Remove optional \"0x\" prefix\r\n  if (hex.startsWith(\"0x\")) hex = hex.slice(2);\r\n\r\n  // Convert hex \u2192 bytes \u2192 UTF\u20118 string\r\n  const bytes = new Uint8Array(\r\n    hex.match(/.{1,2}/g).map((byte) => parseInt(byte, 16)),\r\n  );\r\n\r\n  return new TextDecoder().decode(bytes);\r\n}\r\n\r\nexport function base64ToBytes(b64) {\r\n  const bin = atob(b64);\r\n  const bytes = new Uint8Array(bin.length);\r\n  for (let i = 0; i < bin.length; i++) bytes[i] = bin.charCodeAt(i);\r\n  return bytes;\r\n}\r\n\r\nexport function normalizeKey(k) {\r\n  if (k instanceof Uint8Array) {\r\n    if (k.length === 32) return k;\r\n\r\n    // handle Uint8Array of base64 text (length ~44)\r\n    const asText = new TextDecoder().decode(k);\r\n    if (/^[A-Za-z0-9+/=]+$/.test(asText)) {\r\n      const b = base64ToBytes(asText);\r\n      if (b.length === 32) return b;\r\n    }\r\n    return k;\r\n  }\r\n\r\n  if (typeof k === \"string\") {\r\n    return /^[0-9a-f]+$/i.test(k) ? hexToBytes(k) : base64ToBytes(k);\r\n  }\r\n\r\n  return k;\r\n}\r\n", "// kktp-core/protocol/aad.js\r\nimport { hexToBytes } from \"../utils/conversions.js\";\r\n\r\n/**\r\n * Constructs the Associated Data (AAD) buffer for XChaCha20-Poly1305.\r\n * Following KKTP Spec Section 6.6: AAD = mailbox_id || direction || seq\r\n * @param {string|Uint8Array} mailboxId - The raw hash bytes or hex string of the mailbox ID.\r\n * @param {string} direction - MUST be exactly \"AtoB\" or \"BtoA\".\r\n * @param {number|bigint} seq - The current sequence number (Unsigned 64-bit).\r\n * @returns {Uint8Array} The concatenated AAD buffer.\r\n */\r\nexport function constructAAD(mailboxId, direction, seq) {\r\n  // 1. Validate Direction (Section 3 & 6.6)\r\n  if (direction !== \"AtoB\" && direction !== \"BtoA\") {\r\n    throw new Error(\r\n      `Invalid KKTP direction: ${direction}. Must be \"AtoB\" or \"BtoA\".`,\r\n    );\r\n  }\r\n\r\n  // 2. Normalize Mailbox ID to Raw Bytes\r\n  const mailboxBytes =\r\n    typeof mailboxId === \"string\" ? hexToBytes(mailboxId) : mailboxId;\r\n\r\n  if (mailboxBytes.length !== 32) {\r\n    throw new Error(\"Invalid mailbox_id length. Expected 32-byte hash output.\");\r\n  }\r\n\r\n  // 3. Encode Direction (UTF-8)\r\n  const dirBytes = new TextEncoder().encode(direction);\r\n\r\n  // 4. Encode Sequence (u64BE) - Section 6.6\r\n  const seqBig = BigInt(seq);\r\n  if (seqBig < 0n || seqBig > 18446744073709551615n) {\r\n    throw new Error(\r\n      \"Sequence number out of range for unsigned 64-bit integer.\",\r\n    );\r\n  }\r\n\r\n  const seqBytes = new Uint8Array(8);\r\n  const view = new DataView(seqBytes.buffer);\r\n  view.setBigUint64(0, seqBig, false); // false = Big Endian per Spec\r\n\r\n  // 5. Final Assembly\r\n  // Total = 32 (ID) + 4 (Dir) + 8 (Seq) = 44 bytes\r\n  const aad = new Uint8Array(\r\n    mailboxBytes.length + dirBytes.length + seqBytes.length,\r\n  );\r\n\r\n  aad.set(mailboxBytes, 0);\r\n  aad.set(dirBytes, mailboxBytes.length);\r\n  aad.set(seqBytes, mailboxBytes.length + dirBytes.length);\r\n\r\n  return aad;\r\n}\r\n", "// kktp-core/messenger.js\r\nimport { constructAAD } from \"../integrity/aad.js\";\r\nimport { mailboxMessageValidator } from \"../integrity/validator.js\";\r\nimport { canonicalize } from \"../integrity/canonical.js\";\r\nimport { bytesToHex, hexToBytes, normalizeKey } from \"./conversions.js\";\r\nimport { xchacha20poly1305 } from \"https://esm.sh/@noble/ciphers/chacha\";\r\n\r\n/**\r\n * Packs a plaintext message into a protocol-compliant Mailbox Message (Section 5.4)\r\n */\r\nexport function pack(kktpState, plaintext, direction, seq) {\r\n  const { sessionKey, mailboxId, sid } = kktpState;\r\n\r\n  // 1. Section 4 & 6.6: Generate a 192-bit (24-byte) CSPRNG Nonce\r\n  const nonceBytes = crypto.getRandomValues(new Uint8Array(24));\r\n  const nonceHex = bytesToHex(nonceBytes);\r\n\r\n  // 2. Section 6.6: Construct AAD\r\n  // AAD = mailbox_id (raw) || direction (UTF-8) || seq (u64BE)\r\n  const aad = constructAAD(mailboxId, direction, seq);\r\n\r\n  // 3. Encrypt using XChaCha20-Poly1305 (Section 4)\r\n  // The session wrapper must handle the actual AEAD primitive\r\n\r\n  // Normalize\r\n  const keyBytes = normalizeKey(sessionKey);\r\n  if (!(keyBytes instanceof Uint8Array) || keyBytes.length !== 32) {\r\n    throw new Error(\r\n      `Invalid sessionKey length: expected 32, got ${keyBytes?.length}`,\r\n    );\r\n  }\r\n\r\n  const chacha = xchacha20poly1305(keyBytes, nonceBytes, aad);\r\n  const plaintextBytes = new TextEncoder().encode(plaintext);\r\n\r\n  // Encrypt only takes the plaintext (and an optional output buffer)\r\n  const ciphertext = chacha.encrypt(plaintextBytes);\r\n\r\n  // 4. Construct object per Section 5.4\r\n  const msgObj = {\r\n    type: \"msg\",\r\n    version: 1,\r\n    sid: sid,\r\n    mailbox_id: mailboxId,\r\n    direction: direction,\r\n    seq: seq,\r\n    nonce: nonceHex,\r\n    ciphertext: bytesToHex(ciphertext),\r\n  };\r\n\r\n  // 5. CANONICAL OUTPUT (Section 7.9 & 6.4)\r\n  // We return the canonical string so the Adapter doesn't have to guess.\r\n  return canonicalize(msgObj);\r\n}\r\n\r\n/**\r\n * Unpacks and verifies an incoming message (Section 6.6 & 7.5)\r\n */\r\nexport function unpack(kktpState, msg) {\r\n  // 1. Validation: Ensure the object matches the schema before processing\r\n  mailboxMessageValidator.validate(msg);\r\n\r\n  const { sessionKey, mailboxId, sid } = kktpState;\r\n\r\n  // 2. Filter: Ignore if it doesn't belong to this mailbox or session (\u00A77.6)\r\n  if (msg.mailbox_id !== mailboxId) return null;\r\n  if (msg.sid !== sid) return null;\r\n\r\n  // 3. Reconstruction: Build AAD for decryption/integrity check\r\n  const aad = constructAAD(mailboxId, msg.direction, msg.seq);\r\n  const nonceBytes = hexToBytes(msg.nonce);\r\n  const ciphertextBytes = hexToBytes(msg.ciphertext);\r\n\r\n  // 3b. Validate nonce length (\u00A74: XChaCha20 requires 192-bit / 24-byte nonce)\r\n  if (nonceBytes.length !== 24) {\r\n    throw new Error(\"Invalid nonce length: expected 24 bytes.\");\r\n  }\r\n\r\n  // 4. Section 6.6: Decryption Hardening\r\n  // Verify authentication tag + decrypt in one step (AEAD)\r\n\r\n  // Normalize\r\n  const keyBytes = normalizeKey(sessionKey);\r\n\r\n  if (!(keyBytes instanceof Uint8Array) || keyBytes.length !== 32) {\r\n    throw new Error(\r\n      `Invalid sessionKey length: expected 32, got ${keyBytes?.length}`,\r\n    );\r\n  }\r\n\r\n  try {\r\n    // 1. Bind AAD here, just like in pack()\r\n    const chacha = xchacha20poly1305(keyBytes, nonceBytes, aad);\r\n\r\n    // 2. Decrypt only takes the ciphertext\r\n    const plaintextBytes = chacha.decrypt(ciphertextBytes);\r\n\r\n    return new TextDecoder().decode(plaintextBytes);\r\n  } catch (e) {\r\n    // Section 7.5: Decryption failures are protocol violations\r\n    throw new Error(`KKTP Integrity Violation: ${e.message}`);\r\n  }\r\n}\r\n", "// kktp/protocol/sessions/stateMachine.js\r\nimport { establishSession } from \"../integrity/handshake.js\";\r\nimport { pack, unpack } from \"../utils/kktpCodec.js\";\r\n\r\nexport const KKTP_STATES = {\r\n  INIT: \"INIT\",\r\n  ACTIVE: \"ACTIVE\",\r\n  FAULTED: \"FAULTED\", // Section 6.8\r\n  CLOSED: \"CLOSED\", // Section 7.7\r\n};\r\n\r\n/**\r\n * KKTPStateMachine - Manages KKTP session state transitions.\r\n *\r\n * Requires a KaspaAdapter for network operations.\r\n */\r\nexport class KKTPStateMachine {\r\n  /**\r\n  * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} adapter - Network adapter\r\n   * @param {boolean} isInitiator - Whether this party initiated the session\r\n   * @param {number} keyIndex - Key derivation index\r\n   */\r\n  constructor(adapter, isInitiator = true, keyIndex = 0) {\r\n    if (!adapter) {\r\n      throw new Error(\"KKTPStateMachine: adapter is required\");\r\n    }\r\n    this.adapter = adapter;\r\n    this.isInitiator = isInitiator;\r\n    this.keyIndex = keyIndex;\r\n    this.state = KKTP_STATES.INIT;\r\n\r\n    this.kktp = {\r\n      session: null, // K_session + metadata\r\n      sessionKey: null, // 32-byte K_session for AEAD\r\n      mailboxId: null, // Derived via Section 6.3\r\n      sid: null,\r\n      myPubSig: null, // Our identity for SessionEnd\r\n      myPrivSig: null, // Our private signing key for SessionEnd (\u00A75.5)\r\n      peerPubSig: null, // Peer identity for verification\r\n\r\n      // Section 6.6: Independent counters per direction (MUST start at 0)\r\n      outboundSeq: 0,\r\n      inboundSeq: {\r\n        AtoB: 0,\r\n        BtoA: 0,\r\n      },\r\n\r\n      // Section 7.2: Reassembly buffers per direction\r\n      buffer: {\r\n        AtoB: [],\r\n        BtoA: [],\r\n      },\r\n      maxBufferSize: 100, // Protection against DoS memory exhaustion\r\n\r\n      // Section 7.1: Nonce replay protection per direction\r\n      nonceCache: {\r\n        AtoB: new Set(),\r\n        BtoA: new Set(),\r\n      },\r\n      nonceQueue: {\r\n        AtoB: [],\r\n        BtoA: [],\r\n      },\r\n      pendingNonces: {\r\n        AtoB: new Set(),\r\n        BtoA: new Set(),\r\n      },\r\n      maxNonceCache: 1000,\r\n\r\n      // Section 7.2: Gap timeout tracking (ms)\r\n      gapSince: {\r\n        AtoB: null,\r\n        BtoA: null,\r\n      },\r\n      gapTimeoutMs: 60000,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Transition: INIT -> ACTIVE (Section 6.1 & 6.2)\r\n   */\r\n  async connect(discovery, response) {\r\n    try {\r\n\r\n      const dhPriv = this.kktp?.myDhPriv;\r\n      if (!dhPriv) {\r\n        throw new Error(\"Missing DH private key for session establishment.\");\r\n      }\r\n\r\n      const { session, mailboxId, sessionKey } = await establishSession(\r\n        this.adapter,\r\n        discovery,\r\n        response,\r\n        this.keyIndex,\r\n        dhPriv,\r\n        this.isInitiator\r\n      );\r\n\r\n      this.kktp.session = session;\r\n      this.kktp.sessionKey = sessionKey;\r\n      this.kktp.mailboxId = mailboxId;\r\n      this.kktp.sid = discovery.sid;\r\n\r\n      // Map identities for Section 7.4 Signature Verification\r\n      this.kktp.myPubSig = this.isInitiator\r\n        ? discovery.pub_sig\r\n        : response.pub_sig_resp;\r\n      this.kktp.peerPubSig = this.isInitiator\r\n        ? response.pub_sig_resp\r\n        : discovery.pub_sig;\r\n\r\n      this.state = KKTP_STATES.ACTIVE;\r\n      return true;\r\n    } catch (err) {\r\n      this.state = KKTP_STATES.FAULTED;\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Records a nonce to prevent replay attacks (\u00A77.1)\r\n   * @returns {boolean} true if nonce was new and recorded, false if duplicate\r\n   */\r\n  _recordNonce(direction, nonceHex) {\r\n    const cache = this.kktp.nonceCache[direction];\r\n    const queue = this.kktp.nonceQueue[direction];\r\n\r\n    if (cache.has(nonceHex)) return false;\r\n\r\n    cache.add(nonceHex);\r\n    queue.push(nonceHex);\r\n\r\n    // Evict oldest nonces if cache exceeds limit\r\n    if (queue.length > this.kktp.maxNonceCache) {\r\n      const oldest = queue.shift();\r\n      cache.delete(oldest);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Sends a message (Section 6.6)\r\n   * Per \u00A76.6: Sequence numbers MUST start at 0 and increment after use\r\n   */\r\n  sendMessage(plaintext) {\r\n    if (this.state !== KKTP_STATES.ACTIVE)\r\n      throw new Error(`Cannot send in state: ${this.state}`);\r\n\r\n    const direction = this.isInitiator ? \"AtoB\" : \"BtoA\";\r\n    const seq = this.kktp.outboundSeq;\r\n\r\n    // Increment AFTER use (first message has seq=0)\r\n    this.kktp.outboundSeq++;\r\n\r\n    return pack(this.kktp, plaintext, direction, seq);\r\n  }\r\n\r\n  /**\r\n   * Receives, reorders, and enforces strict contiguous delivery (Section 7.1 & 7.2)\r\n   * Per-direction replay protection, nonce tracking, gap timeout, and buffering\r\n   */\r\n  receiveMessage(msg) {\r\n    if (this.state !== KKTP_STATES.ACTIVE) return [];\r\n\r\n    // \u00A77.6: Enforce session uniqueness - reject messages with wrong sid\r\n    if (msg.sid !== this.kktp.sid) return [];\r\n\r\n    const direction = msg.direction;\r\n    if (direction !== \"AtoB\" && direction !== \"BtoA\") {\r\n      throw new Error(`Invalid direction: ${direction}`);\r\n    }\r\n\r\n    const expectedSeq = this.kktp.inboundSeq[direction];\r\n    const buffer = this.kktp.buffer[direction];\r\n    const now = Date.now();\r\n\r\n    // 1. Replay Protection: Discard old or duplicate sequences (\u00A77.1)\r\n    if (msg.seq < expectedSeq) return [];\r\n\r\n    // 1b. Nonce reuse protection (\u00A77.1) - reject if nonce already seen\r\n    if (this.kktp.nonceCache[direction].has(msg.nonce)) return [];\r\n    if (this.kktp.pendingNonces[direction].has(msg.nonce)) return [];\r\n\r\n    // 2. Gap timeout handling (\u00A77.2) - fault if gap exceeds timeout\r\n    if (msg.seq > expectedSeq) {\r\n      if (this.kktp.gapSince[direction] === null) {\r\n        this.kktp.gapSince[direction] = now;\r\n      } else if (now - this.kktp.gapSince[direction] > this.kktp.gapTimeoutMs) {\r\n        this.state = KKTP_STATES.FAULTED;\r\n        throw new Error(\"Gap timeout: missing sequence exceeded timeout.\");\r\n      }\r\n    }\r\n\r\n    // 3. Buffer Limit: Prevent memory DoS (\u00A77.2)\r\n    if (buffer.length >= this.kktp.maxBufferSize) {\r\n      this.state = KKTP_STATES.FAULTED;\r\n      throw new Error(\"Buffer overflow: Potential DoS or massive gap.\");\r\n    }\r\n\r\n    // 4. Add to reassembly buffer (dedupe) and sort\r\n    if (!buffer.find((m) => m.seq === msg.seq)) {\r\n      buffer.push(msg);\r\n      this.kktp.pendingNonces[direction].add(msg.nonce);\r\n      buffer.sort((a, b) => a.seq - b.seq);\r\n    }\r\n\r\n    const readyPlaintexts = [];\r\n\r\n    // 5. Strict contiguous processing (\u00A77.2)\r\n    while (\r\n      buffer.length > 0 &&\r\n      buffer[0].seq === this.kktp.inboundSeq[direction]\r\n    ) {\r\n      const next = buffer.shift();\r\n      this.kktp.pendingNonces[direction].delete(next.nonce);\r\n\r\n      try {\r\n        // Section 6.6: AAD must include direction and seq\r\n        const plain = unpack(this.kktp, next);\r\n        if (plain) {\r\n          readyPlaintexts.push(plain);\r\n          this._recordNonce(direction, next.nonce);\r\n        }\r\n        this.kktp.inboundSeq[direction]++;\r\n      } catch (e) {\r\n        // Section 7.11: AEAD failure marks session as FAULTED\r\n        this.state = KKTP_STATES.FAULTED;\r\n        throw new Error(\"Integrity violation: AEAD decryption failed.\");\r\n      }\r\n    }\r\n\r\n    // Clear gap timer if contiguous or caught up\r\n    if (\r\n      buffer.length === 0 ||\r\n      buffer[0].seq === this.kktp.inboundSeq[direction]\r\n    ) {\r\n      this.kktp.gapSince[direction] = null;\r\n    }\r\n\r\n    return readyPlaintexts;\r\n  }\r\n\r\n  /**\r\n   * Section 7.7: Secure Termination\r\n   */\r\n  terminate() {\r\n    this.state = KKTP_STATES.CLOSED;\r\n\r\n    // ZEROIZE: Securely erase keys from memory (\u00A77.7)\r\n    if (this.kktp.session?.zeroize) {\r\n      this.kktp.session.zeroize();\r\n    }\r\n    this.kktp.session = null;\r\n\r\n    // Zeroize session key\r\n    if (this.kktp.sessionKey instanceof Uint8Array) {\r\n      this.kktp.sessionKey.fill(0);\r\n    }\r\n    this.kktp.sessionKey = null;\r\n\r\n    // Clear DH private key\r\n    this.kktp.myDhPriv = null;\r\n    this.kktp.myPrivSig = null;\r\n\r\n    // Clear buffers and nonce caches\r\n    this.kktp.buffer = { AtoB: [], BtoA: [] };\r\n    this.kktp.nonceCache = { AtoB: new Set(), BtoA: new Set() };\r\n    this.kktp.nonceQueue = { AtoB: [], BtoA: [] };\r\n    this.kktp.pendingNonces = { AtoB: new Set(), BtoA: new Set() };\r\n    this.kktp.gapSince = { AtoB: null, BtoA: null };\r\n  }\r\n}\r\n", "import { bytesToHex, hexToBytes } from \"../utils/conversions.js\";\r\nimport { constructAAD } from \"./aad.js\";\r\nimport { xchacha20poly1305 } from \"https://esm.sh/v135/@noble/ciphers/chacha\";\r\nimport { blake2b } from \"https://esm.sh/@noble/hashes@1.3.0/blake2b\";\r\n\r\n/**\r\n * Computes VRF input hash per \u00A76.1: H(pub_sig || pub_dh || sid)\r\n * Hashing prevents canonicalization attacks from string concatenation.\r\n * @param {...string} hexStrings - Hex-encoded key components\r\n * @returns {string} Hex-encoded 32-byte Blake2b hash\r\n */\r\nfunction computeVrfInputHash(...hexStrings) {\r\n  const totalLen = hexStrings.reduce((sum, h) => sum + h.length / 2, 0);\r\n  const combined = new Uint8Array(totalLen);\r\n\r\n  let offset = 0;\r\n  for (const hex of hexStrings) {\r\n    const bytes = hexToBytes(hex);\r\n    combined.set(bytes, offset);\r\n    offset += bytes.length;\r\n  }\r\n\r\n  return bytesToHex(blake2b(combined, { dkLen: 32 }));\r\n}\r\n\r\n/**\r\n * AnchorFactory - Creates KKTP protocol anchors (Discovery, Response, Message, SessionEnd)\r\n *\r\n * Requires a KaspaAdapter instance for VRF/randomness operations.\r\n */\r\nexport class AnchorFactory {\r\n  /**\r\n  * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} adapter - Network adapter for crypto operations\r\n   */\r\n  constructor(adapter) {\r\n    if (!adapter) {\r\n      throw new Error(\"AnchorFactory: adapter is required\");\r\n    }\r\n    this._adapter = adapter;\r\n  }\r\n\r\n  /**\r\n   * Section 6.1: Discovery Anchor\r\n   * Per \u00A76.1: VRF is optional\r\n   */\r\n  async createDiscovery({ meta, sig, dh }) {\r\n\r\n    // Primary entropy: VRF via adapter\r\n    let sid = null;\r\n    try {\r\n      const vrfHex = await this._adapter.generateFullRandomness();\r\n      if (typeof vrfHex === \"string\" && vrfHex.length >= 64) {\r\n        sid = vrfHex.slice(0, 64).toLowerCase();\r\n      }\r\n    } catch {\r\n      // ignore\r\n    }\r\n\r\n    // Secondary entropy: partial VRF via adapter\r\n    if (!sid) {\r\n      try {\r\n        const vrfHex = await this._adapter.generatePartialRandomness();\r\n        if (typeof vrfHex === \"string\" && vrfHex.length >= 64) {\r\n          sid = vrfHex.slice(0, 64).toLowerCase();\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n\r\n    // Fallback: randomUUID hashed to 32 bytes\r\n    if (!sid) {\r\n      const uuid = crypto.randomUUID();\r\n      sid = bytesToHex(\r\n        blake2b(new TextEncoder().encode(uuid), { dkLen: 32 }),\r\n      );\r\n    }\r\n\r\n    // 1. Build the base object with null VRF placeholders\r\n    // Normalize meta and preserve lobby fields if present\r\n    const normalizedMeta = {\r\n      game: meta.game || \"Unknown\",\r\n      version: meta.version || \"1.0.0\",\r\n      expected_uptime_seconds: meta.expected_uptime_seconds || meta.upTime || 3600,\r\n    };\r\n\r\n    // Preserve lobby fields (lobby, lobby_name, max_members) for group sessions\r\n    if (meta.lobby) {\r\n      normalizedMeta.lobby = true;\r\n      normalizedMeta.lobby_name = meta.lobby_name || \"Unnamed Lobby\";\r\n      normalizedMeta.max_members = meta.max_members || 16;\r\n    }\r\n\r\n    const anchor = {\r\n      type: \"discovery\",\r\n      version: 1,\r\n      sid: sid,\r\n      pub_sig: sig.publicKey,\r\n      pub_dh: dh.publicKey,\r\n      vrf_value: null,\r\n      vrf_proof: null,\r\n      meta: normalizedMeta,\r\n      sig: null, // Set by kktpProtocol.signAnchor()\r\n    };\r\n\r\n    // 2. Optionally compute VRF binding\r\n    const vrfInputHash = computeVrfInputHash(sig.publicKey, dh.publicKey, sid);\r\n    try {\r\n      const vrfData = await this._adapter.prove({ seedInput: vrfInputHash });\r\n      anchor.vrf_value = vrfData.finalOutput;\r\n      anchor.vrf_proof = bytesToHex(\r\n        new TextEncoder().encode(JSON.stringify(vrfData.proof)),\r\n      );\r\n    } catch {\r\n      // VRF is optional per \u00A76.1 - proceed without it\r\n      anchor.vrf_value = null;\r\n      anchor.vrf_proof = null;\r\n    }\r\n\r\n    // NOTE: sig is set by kktpProtocol.signAnchor() which uses\r\n    // prepareForSigning with proper excludeMeta and omitKeys handling\r\n    return anchor;\r\n  }\r\n\r\n  /**\r\n   * Section 6.2: Response Anchor\r\n   * Per \u00A75.3: Response anchors do NOT include meta\r\n   * Per \u00A75.3: Response MUST echo initiator's keys for cryptographic binding\r\n   */\r\n  async createResponse(discovery, { sig, dh }) {\r\n    const response = {\r\n      type: \"response\",\r\n      version: 1,\r\n      sid: discovery.sid,\r\n      initiator_pub_sig: discovery.pub_sig,\r\n      initiator_pub_dh: discovery.pub_dh,\r\n      pub_sig_resp: sig.publicKey,\r\n      pub_dh_resp: dh.publicKey,\r\n      vrf_value: null,\r\n      vrf_proof: null,\r\n      sig_resp: null, // Set by kktpProtocol.signAnchor()\r\n    };\r\n\r\n    const vrfInputHash = computeVrfInputHash(\r\n      discovery.pub_sig,\r\n      discovery.pub_dh,\r\n      sig.publicKey,\r\n      dh.publicKey,\r\n      discovery.sid,\r\n    );\r\n\r\n    try {\r\n      const vrfData = await this._adapter.prove({ seedInput: vrfInputHash });\r\n      response.vrf_value = vrfData.finalOutput;\r\n      response.vrf_proof = bytesToHex(\r\n        new TextEncoder().encode(JSON.stringify(vrfData.proof)),\r\n      );\r\n    } catch {\r\n      response.vrf_value = null;\r\n      response.vrf_proof = null;\r\n    }\r\n\r\n    // NOTE: sig_resp is set by kktpProtocol.signAnchor() which uses\r\n    // prepareForSigning with proper excludeMeta and omitKeys handling\r\n    return response;\r\n  }\r\n\r\n  /**\r\n   * Section 6.5: Message Object\r\n   * Per \u00A75.4: Message anchors MUST include sid\r\n   */\r\n  async createMessage(sid, mailboxId, direction, seq, plaintext, sessionKey) {\r\n    const nonce = window.crypto.getRandomValues(new Uint8Array(24));\r\n    const aad = constructAAD(mailboxId, direction, seq);\r\n    const chacha = xchacha20poly1305(sessionKey, nonce, aad);\r\n    const ciphertext = chacha.encrypt(new TextEncoder().encode(plaintext));\r\n\r\n    return {\r\n      type: \"msg\",\r\n      version: 1,\r\n      sid: sid,\r\n      mailbox_id: mailboxId,\r\n      direction: direction,\r\n      seq: Number(seq),\r\n      nonce: bytesToHex(nonce),\r\n      ciphertext: bytesToHex(ciphertext),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Section 5.5 / 7.7: Session End Anchor\r\n   * Uses the session's existing pub_sig (not new keys)\r\n   */\r\n  async createSessionEndAnchor(\r\n    sid,\r\n    pubSig,\r\n    reason = \"Session terminated by user\",\r\n  ) {\r\n    const anchor = {\r\n      type: \"session_end\",\r\n      version: 1,\r\n      sid: sid,\r\n      pub_sig: pubSig,\r\n      reason: reason,\r\n    };\r\n    return anchor;\r\n  }\r\n}\r\n", "// kktp/protocol/sessions/sessionFacade.js\r\n// Session Facade - Slim public API delegating to internal services\r\n\r\nimport { KKTPProtocol } from \"../kktpProtocolFacade.js\";\r\nimport { KKTPStateMachine } from \"./stateMachine.js\";\r\nimport { canonicalize, prepareForSigning } from \"../integrity/canonical.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\n// Internal Services\r\nimport {\r\n  KeyDeriver,\r\n  SessionVault,\r\n  HandoverEngine,\r\n  SessionPersistence,\r\n  buildAnchorPayload,\r\n  parseKKTPPayload,\r\n  validateAnchorOrThrow,\r\n} from \"./index.js\";\r\n\r\nconst log = Logger.create(LogModule.protocol.sessions.sessionFacade);\r\n\r\n/**\r\n * SessionFacade - Clean public API for KKTP session management.\r\n * Delegates to internal services for modularity and testability.\r\n *\r\n * Uses KaspaAdapter as the bridge to the underlying transport, enabling network-agnostic\r\n * operation and easy swapping of the underlying transport layer.\r\n */\r\nexport class SessionFacade {\r\n  /**\r\n   * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} adapter - KaspaAdapter instance\r\n   */\r\n  constructor(adapter) {\r\n    if (!adapter) {\r\n      throw new Error(\"SessionFacade: adapter instance is required\");\r\n    }\r\n\r\n    this._adapter = adapter;\r\n\r\n    // Initialize internal services with adapter\r\n    this._persistence = new SessionPersistence();\r\n    this._keyDeriver = new KeyDeriver({\r\n      adapter: this._adapter,\r\n      persistence: this._persistence,\r\n    });\r\n    this._vault = new SessionVault({\r\n      adapter: this._adapter,\r\n      persistence: this._persistence,\r\n      keyDeriver: this._keyDeriver,\r\n    });\r\n    this._handover = new HandoverEngine({\r\n      adapter: this._adapter,\r\n      persistence: this._persistence,\r\n      vault: this._vault,\r\n    });\r\n\r\n    // Wire up handover callbacks\r\n    this._handover.setCallbacks({\r\n      sendMessage: (mailboxId, plaintext, options) =>\r\n        this.sendMessage(mailboxId, plaintext, options),\r\n      connectToPeer: (discoveryAnchor, options) =>\r\n        this.connectToPeer(discoveryAnchor, options),\r\n    });\r\n    this._handover.setMessageHandler((mailboxId, message) =>\r\n      this._handleIncomingMessage(mailboxId, message),\r\n    );\r\n    this._handover.setAnchorHandler((anchor) =>\r\n      this._handleIncomingAnchor(anchor),\r\n    );\r\n\r\n    // Protocol instance for signing/verification helpers (uses adapter via SM)\r\n    const sm = new KKTPStateMachine(this._adapter, true, 0);\r\n    this.kktpProtocol = new KKTPProtocol(sm);\r\n  }\r\n\r\n  /**\r\n   * Get the adapter for advanced use cases or testing.\r\n   * @returns {KaspaAdapter}\r\n   */\r\n  get adapter() {\r\n    return this._adapter;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // KKTP Protocol Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async signAnchor(anchor) {\r\n    if (!this._adapter.isWalletInitialized) {\r\n      throw new Error(\"KKTP: Wallet must be initialized.\");\r\n    }\r\n    const { sig } = await this._adapter.generateIdentityKeys(0);\r\n    return await this.kktpProtocol.signAnchor(anchor, sig.privateKey);\r\n  }\r\n\r\n  prepareForVerification(anchor) {\r\n    return this.kktpProtocol.prepareForVerification(anchor);\r\n  }\r\n\r\n  canonicalize(obj) {\r\n    return this.kktpProtocol.canonicalize(obj);\r\n  }\r\n\r\n  toPlainJson(value) {\r\n    return this.kktpProtocol.toPlainJson(value);\r\n  }\r\n\r\n  strictParseJson(value) {\r\n    return KKTPProtocol.strictParseJson(value);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Persistence Configuration\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  configureResumePersistence(options) {\r\n    return this._vault.configureResumePersistence(options);\r\n  }\r\n\r\n  forcePersistAllSessions() {\r\n    this._vault.forcePersistAllSessions();\r\n  }\r\n\r\n  /**\r\n   * Register a LobbyManager for including lobby state in session persistence.\r\n   * Called automatically by LobbyFacade when created.\r\n   * @param {Object} lobbyManager - LobbyManager instance\r\n   */\r\n  setLobbyManager(lobbyManager) {\r\n    this._vault.setLobbyManager(lobbyManager);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Session Lifecycle\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async broadcastDiscovery(meta, options = {}) {\r\n    const { amount = \"1\", toAddress, peerPubSig } = options;\r\n\r\n    // Create context for discovery\r\n    const ctx = this._vault.createContext(true);\r\n\r\n    // If we know the target peer, prepare their branch\r\n    if (peerPubSig) {\r\n      const branch = await this._keyDeriver.prepareKeyBranch(peerPubSig, true);\r\n      ctx.keyIndex = branch.keyIndex;\r\n      ctx.baseIndex = branch.baseIndex;\r\n      ctx.sm.keyIndex = branch.keyIndex;\r\n      ctx.sm.kktp.prederivedKeys = branch.prederivedKeys;\r\n    }\r\n\r\n    const { discovery } = await ctx.protocol.createDiscoveryAnchor(meta);\r\n\r\n    this._vault.setPendingDiscovery(discovery.sid, {\r\n      ...ctx,\r\n      discovery,\r\n      createdAt: Date.now(),\r\n    });\r\n\r\n    log.info(\r\n      `KKTP: pending discovery sid=${discovery.sid?.slice(0, 8)}... pending=${this._vault.pendingDiscoveries.size}`,\r\n    );\r\n\r\n    const payload = buildAnchorPayload(discovery);\r\n    const address = toAddress ?? (await this._adapter.getAddress());\r\n\r\n    const fromAddress = await this._adapter.getAddressWithLargestUtxo();\r\n    const privateKeys = await this._adapter.getPrivateKeys({\r\n      keyCount: 10,\r\n      changeKeyCount: 10,\r\n    });\r\n\r\n    await this._adapter.manualSend({\r\n      fromAddress,\r\n      toAddress: address,\r\n      amount,\r\n      payload,\r\n      privateKeys,\r\n    });\r\n\r\n    return { discovery, payload };\r\n  }\r\n\r\n  async connectToPeer(discoveryAnchor, options = {}) {\r\n    const { amount = \"1\", toAddress } = options;\r\n\r\n    // Prepare branch for this specific peer (responder role)\r\n    const peerPubSig = discoveryAnchor.pub_sig;\r\n    const branch = await this._keyDeriver.prepareKeyBranch(peerPubSig, false);\r\n\r\n    const ctx = this._vault.createContext(false, branch.keyIndex);\r\n    ctx.baseIndex = branch.baseIndex;\r\n    ctx.sm.kktp.prederivedKeys = branch.prederivedKeys;\r\n\r\n    log.info(\r\n      `KKTP: connectToPeer peer=${peerPubSig.slice(0, 8)}... base=${branch.baseIndex} keyIndex=${branch.keyIndex}`,\r\n    );\r\n\r\n    const { response } =\r\n      await ctx.protocol.createResponseAnchor(discoveryAnchor);\r\n\r\n    const mailboxId = ctx.protocol.sm.kktp.mailboxId;\r\n    this._vault.setSession(mailboxId, {\r\n      ...ctx,\r\n      discovery: discoveryAnchor,\r\n      response,\r\n      messages: [],\r\n      peerPubSig: discoveryAnchor.pub_sig,\r\n      isInitiator: false,\r\n      createdAt: Date.now(),\r\n    });\r\n\r\n    const payload = buildAnchorPayload(response);\r\n    const address = toAddress ?? (await this._adapter.getAddress());\r\n\r\n    const fromAddress = await this._adapter.getAddressWithLargestUtxo();\r\n    const privateKeys = await this._adapter.getPrivateKeys({\r\n      keyCount: 10,\r\n      changeKeyCount: 10,\r\n    });\r\n\r\n    await this._adapter.manualSend({\r\n      fromAddress,\r\n      toAddress: address,\r\n      amount,\r\n      payload,\r\n      privateKeys,\r\n    });\r\n\r\n    // CRITICAL: Subscribe to DM mailbox IMMEDIATELY after session is created\r\n    // This ensures we can receive responses from the initiator without race conditions\r\n    const dmPrefix = `KKTP:${mailboxId}:`;\r\n    this._adapter.addPrefix(dmPrefix);\r\n    log.info(\r\n      `KKTP: Subscribed to DM mailbox (responder) prefix=${dmPrefix.slice(0, 32)}...`,\r\n    );\r\n\r\n    return { response, mailboxId, payload };\r\n  }\r\n\r\n  async sendMessage(mailboxId, plaintext, options = {}) {\r\n    const { amount = \"1\", toAddress } = options;\r\n\r\n    const session = this._vault.getSession(mailboxId);\r\n    if (!session) {\r\n      throw new Error(`KKTP: No session found for mailboxId ${mailboxId}`);\r\n    }\r\n\r\n    const canonicalMessage = session.protocol.createMessageAnchor(plaintext);\r\n    const payload = `KKTP:${mailboxId}:${canonicalMessage}`;\r\n\r\n    const address = toAddress ?? (await this._adapter.getAddress());\r\n    const fromAddress = await this._adapter.getAddressWithLargestUtxo();\r\n    const privateKeys = await this._adapter.getPrivateKeys({\r\n      keyCount: 10,\r\n      changeKeyCount: 10,\r\n    });\r\n\r\n    await this._adapter.manualSend({\r\n      fromAddress,\r\n      toAddress: address,\r\n      amount,\r\n      payload,\r\n      privateKeys\r\n    });\r\n\r\n    session.messages = session.messages || [];\r\n    session.messages.push({\r\n      id: crypto.randomUUID(),\r\n      direction: session.sm.isInitiator ? \"AtoB\" : \"BtoA\",\r\n      plaintext,\r\n      timestamp: Date.now(),\r\n      status: \"pending\",\r\n      isOutbound: true,\r\n    });\r\n\r\n    this._vault.schedulePersist(mailboxId);\r\n\r\n    return { payload };\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Incoming Payload Processing\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async processIncomingPayload(rawPayload) {\r\n    const parsed = parseKKTPPayload(rawPayload);\r\n    if (!parsed) return null;\r\n\r\n    if (parsed.type === \"anchor\") {\r\n      return await this._handleIncomingAnchor(parsed.anchor);\r\n    }\r\n\r\n    if (parsed.type === \"message\") {\r\n      return this._handleIncomingMessage(parsed.mailboxId, parsed.message);\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Session Query & Management\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  getSessions() {\r\n    return this._vault.getSessions();\r\n  }\r\n\r\n  getSession(mailboxId) {\r\n    return this._vault.getSession(mailboxId);\r\n  }\r\n\r\n  closeSession(mailboxId) {\r\n    return this._vault.closeSession(mailboxId);\r\n  }\r\n\r\n  exportSessions(options) {\r\n    return this._vault.exportSessions(options);\r\n  }\r\n\r\n  async restoreSessions(snapshot, options) {\r\n    return await this._vault.restoreSessions(snapshot, options);\r\n  }\r\n\r\n  pruneExpiredSessions(nowMs) {\r\n    return this._vault.pruneExpiredSessions(nowMs);\r\n  }\r\n\r\n  isSessionExpired(mailboxId, nowMs) {\r\n    return this._vault.isSessionExpired(mailboxId, nowMs);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Sovereign Resume\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async resumeSession(options) {\r\n    return await this._handover.resumeSession(options);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Internal Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async _verifyAnchorSignature(anchor) {\r\n    const isResponse = anchor.type === \"response\";\r\n    const sigField = isResponse ? \"sig_resp\" : \"sig\";\r\n    const pubKeyField = isResponse ? \"pub_sig_resp\" : \"pub_sig\";\r\n\r\n    const signature = anchor[sigField];\r\n    const pubKey = anchor[pubKeyField];\r\n\r\n    if (!signature || !pubKey) return false;\r\n\r\n    const body = canonicalize(\r\n      prepareForSigning(anchor, {\r\n        omitKeys: [sigField],\r\n        excludeMeta: anchor.type === \"discovery\",\r\n      }),\r\n    );\r\n\r\n    return await this._adapter.verifyMessage(pubKey, body, signature);\r\n  }\r\n\r\n  async _handleIncomingAnchor(anchor) {\r\n    validateAnchorOrThrow(anchor);\r\n\r\n    const isValidSig = await this._verifyAnchorSignature(anchor);\r\n    if (!isValidSig) {\r\n      throw new Error(\"Invalid anchor signature\");\r\n    }\r\n\r\n    if (anchor.type === \"discovery\") {\r\n      log.info(`KKTP: discovery anchor sid=${anchor.sid?.slice(0, 8)}...`);\r\n      return { type: \"discovery\", anchor };\r\n    }\r\n\r\n    if (anchor.type === \"response\") {\r\n      const responderPubSig = anchor.pub_sig_resp;\r\n\r\n      log.info(`KKTP: response anchor sid=${anchor.sid?.slice(0, 8)}...`);\r\n      log.info(\r\n        `KKTP: pending discoveries=${this._vault.pendingDiscoveries.size}`,\r\n      );\r\n\r\n      const pending = this._vault.getPendingDiscovery(anchor.sid);\r\n      if (!pending || anchor.initiator_pub_sig !== pending.discovery.pub_sig) {\r\n        // No matching pending discovery - buffer as orphan\r\n        this._vault.setOrphanResponse(anchor.sid, anchor);\r\n        log.info(\r\n          `KKTP: buffered response for sid ${anchor.sid.slice(0, 8)}...`,\r\n        );\r\n        return { type: \"response_orphan\", anchor };\r\n      }\r\n\r\n      // Check if this is a lobby discovery (supports multiple responders)\r\n      const isLobbyDiscovery = pending.discovery?.meta?.lobby === true;\r\n\r\n      // Check if we already have a session with this specific responder\r\n      const existingWithPeer =\r\n        this._vault.findSessionByPeerPubSig(responderPubSig);\r\n      if (existingWithPeer) {\r\n        log.info(\r\n          `KKTP: session already exists with peer ${responderPubSig?.slice(0, 8)}...`,\r\n        );\r\n        return {\r\n          type: \"response_duplicate\",\r\n          mailboxId: existingWithPeer.mailboxId,\r\n        };\r\n      }\r\n\r\n      // For lobby mode: create a fresh context for EACH responder but COPY the original\r\n      // DH private key from the pending discovery. The host's discovery anchor was created\r\n      // with specific DH keys, and ALL responders must handshake using those same keys.\r\n      // For 1:1 mode: reuse the pending context directly (original behavior)\r\n      let ctx;\r\n      if (isLobbyDiscovery) {\r\n        // Extract the original crypto material from when discovery was created\r\n        const originalDhPriv = pending.sm?.kktp?.myDhPriv;\r\n        const originalPrivSig = pending.sm?.kktp?.myPrivSig;\r\n        const originalPrederivedKeys = pending.sm?.kktp?.prederivedKeys;\r\n\r\n        if (!originalDhPriv) {\r\n          log.error(\r\n            \"KKTP: Missing DH private key in pending lobby context\",\r\n            {\r\n              sid: anchor.sid?.slice(0, 8),\r\n              hasSm: !!pending.sm,\r\n              hasKktp: !!pending.sm?.kktp,\r\n            },\r\n          );\r\n          return { type: \"error\", reason: \"Missing DH private key for lobby\" };\r\n        }\r\n\r\n        // Create a FRESH state machine context (so each responder gets independent state)\r\n        // but use the SAME keyIndex as the original discovery\r\n        ctx = this._vault.createContext(true, pending.keyIndex);\r\n\r\n        // CRITICAL: Copy the original crypto material - don't generate new keys!\r\n        // The discovery anchor was signed with these keys, responders expect them\r\n        ctx.sm.kktp.myDhPriv = originalDhPriv;\r\n        ctx.sm.kktp.myPrivSig = originalPrivSig;\r\n        ctx.sm.kktp.prederivedKeys = originalPrederivedKeys;\r\n        ctx.sm.kktp.discoveryAnchor = pending.discovery;\r\n\r\n        log.info(\r\n          `KKTP: lobby mode - cloned context for peer ${responderPubSig?.slice(0, 8)}...`,\r\n          { keyIndex: pending.keyIndex, hasOriginalDhPriv: !!originalDhPriv },\r\n        );\r\n      } else {\r\n        // Standard 1:1 mode - use the pending context directly\r\n        ctx = pending;\r\n        if (!ctx.sm.kktp.discoveryAnchor) {\r\n          ctx.sm.kktp.discoveryAnchor = pending.discovery;\r\n        }\r\n      }\r\n\r\n      // Complete the handshake - calls sm.connect() which uses myDhPriv\r\n      await ctx.sm.connect(pending.discovery, anchor);\r\n\r\n      const mailboxId = ctx.sm.kktp.mailboxId;\r\n      this._vault.setSession(mailboxId, {\r\n        ...ctx,\r\n        discovery: pending.discovery,\r\n        response: anchor,\r\n        messages: [],\r\n        peerPubSig: responderPubSig,\r\n        isInitiator: true,\r\n        createdAt: Date.now(),\r\n      });\r\n\r\n      // For 1:1 sessions, remove the pending discovery (only one response expected)\r\n      // For lobbies, keep it active so more peers can join\r\n      if (!isLobbyDiscovery) {\r\n        this._vault.deletePendingDiscovery(anchor.sid);\r\n      }\r\n\r\n      // CRITICAL: Subscribe to DM mailbox IMMEDIATELY after session is created\r\n      // This ensures we can receive DM messages from the responder in the same block\r\n      // without race conditions (e.g., lobby join requests)\r\n      const dmPrefix = `KKTP:${mailboxId}:`;\r\n      this._adapter.addPrefix(dmPrefix);\r\n      log.info(\r\n        `KKTP: Subscribed to DM mailbox (initiator) prefix=${dmPrefix.slice(0, 32)}...`,\r\n      );\r\n\r\n      log.info(\r\n        `KKTP: session established mailbox=${mailboxId?.slice(0, 8)}...`,\r\n        { isLobby: isLobbyDiscovery, peer: responderPubSig?.slice(0, 8) },\r\n      );\r\n      return { type: \"session_established\", mailboxId, response: anchor };\r\n    }\r\n\r\n    if (anchor.type === \"session_end\") {\r\n      const sessions = this._vault.sessions;\r\n      const sessionEntry = Array.from(sessions.entries()).find(\r\n        ([, s]) => s?.discovery?.sid === anchor.sid,\r\n      );\r\n\r\n      if (sessionEntry) {\r\n        const [mailboxId, session] = sessionEntry;\r\n        session.sm.terminate();\r\n        this._vault.deleteSession(mailboxId);\r\n        return {\r\n          type: \"session_end\",\r\n          mailboxId,\r\n          reason: anchor.reason,\r\n          sid: anchor.sid,\r\n          pub_sig: anchor.pub_sig,\r\n        };\r\n      }\r\n\r\n      return {\r\n        type: \"session_end\",\r\n        mailboxId: null,\r\n        reason: anchor.reason,\r\n        sid: anchor.sid,\r\n        pub_sig: anchor.pub_sig,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _handleIncomingMessage(mailboxId, msgObject) {\r\n    const session = this._vault.getSession(mailboxId);\r\n    if (!session) {\r\n      return { type: \"message_ignored\", mailboxId };\r\n    }\r\n\r\n    const plaintexts = session.sm.receiveMessage(msgObject);\r\n    if (plaintexts && plaintexts.length > 0) {\r\n      session.messages = session.messages || [];\r\n\r\n      for (const plaintext of plaintexts) {\r\n        // If this is our own outbound message confirming, upgrade the pending entry\r\n        const pendingIndex = session.messages.findIndex(\r\n          (m) =>\r\n            m.isOutbound === true &&\r\n            m.status === \"pending\" &&\r\n            m.plaintext === plaintext &&\r\n            m.direction === msgObject.direction,\r\n        );\r\n\r\n        if (pendingIndex >= 0) {\r\n          const pending = session.messages[pendingIndex];\r\n          session.messages[pendingIndex] = {\r\n            ...pending,\r\n            status: \"confirmed\",\r\n            timestamp: pending.timestamp || Date.now(),\r\n          };\r\n          continue;\r\n        }\r\n\r\n        // Otherwise, add as a new inbound message\r\n        session.messages.push({\r\n          id: crypto.randomUUID(),\r\n          direction: msgObject.direction,\r\n          plaintext,\r\n          timestamp: Date.now(),\r\n          status: \"confirmed\",\r\n          isOutbound: false,\r\n        });\r\n      }\r\n\r\n      this._vault.schedulePersist(mailboxId);\r\n    }\r\n\r\n    return { type: \"messages\", mailboxId, messages: plaintexts || [] };\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Expose Internal Services (for advanced use cases)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  get keyDeriver() {\r\n    return this._keyDeriver;\r\n  }\r\n\r\n  get vault() {\r\n    return this._vault;\r\n  }\r\n\r\n  get persistence() {\r\n    return this._persistence;\r\n  }\r\n\r\n  get handover() {\r\n    return this._handover;\r\n  }\r\n}\r\n", "// kktp/protocol/sessions/keyDeriver.js\r\n// Per-Contact BaseIndex Allocation (Deterministic PFS)\r\n// Branch layout: N = Contact Identity, N+1 = TX Key, N+2 = RX Key\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.protocol.sessions.keyDeriver);\r\n\r\n/**\r\n * Handles deterministic key derivation for KKTP sessions.\r\n * Manages per-contact baseIndex allocation with Perfect Forward Secrecy (PFS).\r\n */\r\nexport class KeyDeriver {\r\n  /**\r\n   * @param {Object} options\r\n  * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} options.adapter - Network adapter for key generation\r\n   * @param {Object} options.persistence - SessionPersistence instance for storage\r\n   * @param {number} [options.startIndex=100] - Starting baseIndex (avoid legacy conflicts)\r\n   */\r\n  constructor({ adapter, persistence, startIndex = 100 } = {}) {\r\n    if (!adapter) throw new Error(\"KeyDeriver: adapter is required\");\r\n    if (!persistence) throw new Error(\"KeyDeriver: persistence is required\");\r\n\r\n    this._adapter = adapter;\r\n    this._persistence = persistence;\r\n    this._nextBaseIndex = startIndex;\r\n    this._nextBaseIndexLoaded = false;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // BaseIndex Allocation\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Allocate a new baseIndex for a contact (increments by 3 for next contact).\r\n   * Persists the counter to IndexedDB for deterministic resumption.\r\n   * @returns {Promise<number>} The allocated baseIndex\r\n   */\r\n  async allocateBaseIndex() {\r\n    // Load persisted counter on first use\r\n    if (!this._nextBaseIndexLoaded) {\r\n      const stored = await this._persistence.getMeta(\"nextBaseIndex\");\r\n      if (typeof stored === \"number\" && stored >= this._nextBaseIndex) {\r\n        this._nextBaseIndex = stored;\r\n      }\r\n      this._nextBaseIndexLoaded = true;\r\n    }\r\n\r\n    const baseIndex = this._nextBaseIndex;\r\n    this._nextBaseIndex += 3; // Reserve N, N+1, N+2\r\n    await this._persistence.setMeta(\"nextBaseIndex\", this._nextBaseIndex);\r\n    return baseIndex;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Peer Record Management\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Ensure a peer record exists; allocate baseIndex if new contact.\r\n   * @param {string} peerPubSig - The peer's public signing key\r\n   * @returns {Promise<Object>} - { peerPubSig, baseIndex, usedBranches, ... }\r\n   */\r\n  async ensurePeerRecord(peerPubSig) {\r\n    if (!peerPubSig) throw new Error(\"peerPubSig required for peer record\");\r\n\r\n    let record = await this._persistence.getPeerRecord(peerPubSig);\r\n    if (record) return record;\r\n\r\n    // New contact: allocate a fresh baseIndex branch\r\n    const baseIndex = await this.allocateBaseIndex();\r\n    record = {\r\n      peerPubSig,\r\n      baseIndex,\r\n      usedBranches: [],\r\n      createdAt: Date.now(),\r\n      updatedAt: Date.now(),\r\n    };\r\n    await this._persistence.upsertPeerRecord(record);\r\n    log.info(\r\n      `KKTP: allocated baseIndex=${baseIndex} for peer=${peerPubSig.slice(0, 8)}...`,\r\n    );\r\n    return record;\r\n  }\r\n\r\n  /**\r\n   * Get an existing peer record without creating one.\r\n   * @param {string} peerPubSig - The peer's public signing key\r\n   * @returns {Promise<Object|null>} The peer record or null\r\n   */\r\n  async getPeerRecord(peerPubSig) {\r\n    if (!peerPubSig) return null;\r\n    return await this._persistence.getPeerRecord(peerPubSig);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Key Branch Preparation\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Prepare a key branch for a session with a specific peer.\r\n   * For initiator: uses baseIndex+1 (TX), expects peer to use baseIndex+2 (RX)\r\n   * For responder: uses baseIndex+2 (RX), expects peer to use baseIndex+1 (TX)\r\n   * @param {string} peerPubSig - The peer's public signing key\r\n   * @param {boolean} isInitiator - Whether this is the initiating party\r\n   * @returns {Promise<{ keyIndex: number, baseIndex: number, prederivedKeys: Object }>}\r\n   */\r\n  async prepareKeyBranch(peerPubSig, isInitiator) {\r\n    const record = await this.ensurePeerRecord(peerPubSig);\r\n    const base = record.baseIndex;\r\n\r\n    // Branch layout: N = identity, N+1 = initiator TX, N+2 = responder RX\r\n    const keyIndex = isInitiator ? base + 1 : base + 2;\r\n\r\n    // Pre-derive keys for this branch\r\n    const keys = await this._adapter.generateIdentityKeys(keyIndex);\r\n\r\n    // Mark as used for PFS\r\n    await this._persistence.markPeerBranchUsed(peerPubSig, keyIndex);\r\n\r\n    log.info(\r\n      `KKTP: prepared branch keyIndex=${keyIndex} (base=${base}) initiator=${isInitiator}`,\r\n    );\r\n\r\n    return {\r\n      keyIndex,\r\n      baseIndex: base,\r\n      prederivedKeys: keys, // { sig: { publicKey, privateKey }, dh: { publicKey, privateKey } }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Derive keys for a specific branch index.\r\n   * Used for session restoration.\r\n   * @param {number} keyIndex - The branch index to derive keys for\r\n   * @returns {Promise<Object>} - { sig: { publicKey, privateKey }, dh: { publicKey, privateKey } }\r\n   */\r\n  async deriveKeysForIndex(keyIndex) {\r\n    return await this._adapter.generateIdentityKeys(keyIndex);\r\n  }\r\n\r\n  /**\r\n   * Calculate the key index for a given peer and role.\r\n   * @param {number} baseIndex - The peer's baseIndex\r\n   * @param {boolean} isInitiator - Whether this is the initiating party\r\n   * @returns {number} The calculated keyIndex\r\n   */\r\n  calculateKeyIndex(baseIndex, isInitiator) {\r\n    return isInitiator ? baseIndex + 1 : baseIndex + 2;\r\n  }\r\n}\r\n", "// kktp/protocol/sessions/smHelpers.js\r\n// Session Manager Helper Functions\r\n\r\nimport {\r\n  canonicalize,\r\n  strictParseJson,\r\n} from \"../integrity/canonical.js\";\r\nimport {\r\n  discoveryValidator,\r\n  responseValidator,\r\n  sessionEndValidator,\r\n} from \"../integrity/validator.js\";\r\nimport {\r\n  bytesToHex,\r\n  hexToBytes,\r\n} from \"../utils/conversions.js\";\r\n\r\n/**\r\n * Normalize epoch milliseconds from various formats.\r\n * @param {number|string} value\r\n * @returns {number|null}\r\n */\r\nexport function normalizeEpochMs(value) {\r\n  const n = Number(value);\r\n  if (!Number.isFinite(n)) return null;\r\n  return n > 1e12 ? n : n * 1000;\r\n}\r\n\r\n/**\r\n * Calculate expected session end time from anchor metadata.\r\n * @param {Object} anchor\r\n * @param {number} createdAtMs\r\n * @returns {number|null}\r\n */\r\nexport function getExpectedEndMs(anchor, createdAtMs) {\r\n  if (!anchor) return null;\r\n  const meta = anchor.meta || {};\r\n  const uptimeSeconds = Number(meta.expected_uptime_seconds);\r\n  if (!Number.isFinite(uptimeSeconds) || uptimeSeconds <= 0) return null;\r\n\r\n  const base =\r\n    normalizeEpochMs(anchor.timestamp || anchor.time) ||\r\n    normalizeEpochMs(createdAtMs) ||\r\n    null;\r\n\r\n  if (!base) return null;\r\n  return base + uptimeSeconds * 1000;\r\n}\r\n\r\n/**\r\n * Build a KKTP anchor payload string.\r\n * @param {Object} anchor\r\n * @returns {string}\r\n */\r\nexport function buildAnchorPayload(anchor) {\r\n  return `KKTP:ANCHOR:${canonicalize(anchor)}`;\r\n}\r\n\r\n/**\r\n * Parse a raw KKTP payload string.\r\n * @param {string} rawPayload\r\n * @returns {{ type: string, anchor?: Object, mailboxId?: string, message?: Object }|null}\r\n */\r\nexport function parseKKTPPayload(rawPayload) {\r\n  if (!rawPayload || !rawPayload.startsWith(\"KKTP:\")) return null;\r\n\r\n  if (rawPayload.startsWith(\"KKTP:ANCHOR:\")) {\r\n    const jsonStr = rawPayload.substring(\"KKTP:ANCHOR:\".length);\r\n    try {\r\n      const anchor = strictParseJson(jsonStr);\r\n      return { type: \"anchor\", anchor };\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const parts = rawPayload.split(\":\");\r\n  if (parts.length >= 3) {\r\n    const mailboxId = parts[1];\r\n    const jsonStr = parts.slice(2).join(\":\");\r\n    try {\r\n      const message = strictParseJson(jsonStr);\r\n      return { type: \"message\", mailboxId, message };\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Validate an anchor object against its schema.\r\n * @param {Object} anchor\r\n * @throws {Error} If anchor is invalid\r\n */\r\nexport function validateAnchorOrThrow(anchor) {\r\n  if (!anchor?.type) {\r\n    throw new Error(\"Invalid anchor: missing type\");\r\n  }\r\n  if (anchor.type === \"discovery\") {\r\n    discoveryValidator.validate(anchor);\r\n    return;\r\n  }\r\n  if (anchor.type === \"response\") {\r\n    responseValidator.validate(anchor);\r\n    return;\r\n  }\r\n  if (anchor.type === \"session_end\") {\r\n    sessionEndValidator.validate(anchor);\r\n    return;\r\n  }\r\n  throw new Error(`Unknown anchor type: ${anchor.type}`);\r\n}\r\n\r\n/**\r\n * Extract resume state from a session object.\r\n * @param {Object} session\r\n * @returns {Object} Resume state for persistence\r\n */\r\nexport function extractResumeState(session) {\r\n  const kktp = session?.sm?.kktp || {};\r\n\r\n  // Serialize sessionKey (Uint8Array) to hex for JSON persistence\r\n  let sessionKeyHex = null;\r\n  const rawKey = kktp.sessionKey;\r\n  if (rawKey instanceof Uint8Array && rawKey.length > 0) {\r\n    sessionKeyHex = bytesToHex(rawKey);\r\n  } else if (typeof rawKey === \"string\" && rawKey.length > 0) {\r\n    sessionKeyHex = rawKey;\r\n  }\r\n\r\n  // Extract sequence numbers\r\n  const outboundSeq = kktp.outboundSeq ?? 0;\r\n  const inboundSeqAtoB = kktp.inboundSeq?.AtoB ?? 0;\r\n  const inboundSeqBtoA = kktp.inboundSeq?.BtoA ?? 0;\r\n\r\n  return {\r\n    mailbox_id: kktp.mailboxId || session?.mailboxId || \"\",\r\n    K_session: sessionKeyHex,\r\n    outboundSeq,\r\n    inboundSeq_AtoB: inboundSeqAtoB,\r\n    inboundSeq_BtoA: inboundSeqBtoA,\r\n    keyIndex: session?.keyIndex ?? null,\r\n    remote_pub_sig: session?.peerPubSig || null,\r\n    isInitiator: !!session?.isInitiator,\r\n    createdAt: session?.createdAt || Date.now(),\r\n    discovery: session?.discovery || null,\r\n    response: session?.response || null,\r\n    messages: session?.messages || [],\r\n  };\r\n}\r\n\r\n/**\r\n * Derive sequence numbers from message history.\r\n * @param {Array} messages\r\n * @returns {{ outboundSeq: number, inboundSeq_AtoB: number, inboundSeq_BtoA: number }}\r\n */\r\nexport function deriveSeqFromMessages(messages = []) {\r\n  const outboundSeq = messages.filter((m) => m?.isOutbound).length;\r\n\r\n  const inboundSeqAtoB = messages.filter(\r\n    (m) => m?.direction === \"AtoB\" && m?.status === \"confirmed\",\r\n  ).length;\r\n\r\n  const inboundSeqBtoA = messages.filter(\r\n    (m) => m?.direction === \"BtoA\" && m?.status === \"confirmed\",\r\n  ).length;\r\n\r\n  return {\r\n    outboundSeq,\r\n    inboundSeq_AtoB: inboundSeqAtoB,\r\n    inboundSeq_BtoA: inboundSeqBtoA,\r\n  };\r\n}\r\n\r\n/**\r\n * Apply resume state to a session context.\r\n * @param {Object} ctx - Session context with sm property\r\n * @param {Object} resume - Resume state object\r\n */\r\nexport function applyResumeState(ctx, resume) {\r\n  const kktp = ctx?.sm?.kktp;\r\n  if (!kktp) return;\r\n\r\n  // Restore SID\r\n  if (resume.sid) kktp.sid = resume.sid;\r\n\r\n  // Restore mailboxId\r\n  if (resume.mailbox_id) kktp.mailboxId = resume.mailbox_id;\r\n\r\n  // Deserialize K_session from hex string back to Uint8Array\r\n  if (resume.K_session) {\r\n    if (resume.K_session instanceof Uint8Array) {\r\n      kktp.sessionKey = resume.K_session;\r\n    } else if (typeof resume.K_session === \"string\") {\r\n      kktp.sessionKey = hexToBytes(resume.K_session);\r\n    }\r\n  }\r\n\r\n  // Restore sequence numbers\r\n  if (resume.outboundSeq != null) kktp.outboundSeq = resume.outboundSeq;\r\n  if (resume.inboundSeq_AtoB != null || resume.inboundSeq_BtoA != null) {\r\n    kktp.inboundSeq = kktp.inboundSeq || { AtoB: 0, BtoA: 0 };\r\n    if (resume.inboundSeq_AtoB != null) {\r\n      kktp.inboundSeq.AtoB = resume.inboundSeq_AtoB;\r\n    }\r\n    if (resume.inboundSeq_BtoA != null) {\r\n      kktp.inboundSeq.BtoA = resume.inboundSeq_BtoA;\r\n    }\r\n  }\r\n\r\n  // Restore identity keys if present\r\n  if (resume.my_pub_sig) kktp.myPubSig = resume.my_pub_sig;\r\n  if (resume.remote_pub_sig) kktp.peerPubSig = resume.remote_pub_sig;\r\n}\r\n\r\n/**\r\n * Securely zero out a session's key material.\r\n * @param {Object} session\r\n */\r\nexport function zeroOutSessionKey(session) {\r\n  const kktp = session?.sm?.kktp;\r\n  if (!kktp) return;\r\n  // Securely zeroize the sessionKey\r\n  if (kktp.sessionKey instanceof Uint8Array) {\r\n    kktp.sessionKey.fill(0);\r\n  }\r\n  kktp.sessionKey = null;\r\n}\r\n", "// kktp/protocol/sessions/sessionVault.js\r\n// Session Map Management, Persistence Timers, Export/Restore Logic\r\n\r\nimport { bytesToHex } from \"../utils/conversions.js\";\r\nimport {\r\n  extractResumeState,\r\n  applyResumeState,\r\n  deriveSeqFromMessages,\r\n  getExpectedEndMs,\r\n  zeroOutSessionKey,\r\n} from \"./smHelpers.js\";\r\nimport { KKTPProtocol } from \"../kktpProtocolFacade.js\";\r\nimport { KKTPStateMachine, KKTP_STATES } from \"./stateMachine.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.protocol.sessions.sessionVault);\r\n\r\n/**\r\n * Manages the session store (Map) and persistence layer.\r\n * Handles export, restore, and scheduled persistence operations.\r\n */\r\nexport class SessionVault {\r\n  /**\r\n   * @param {Object} options\r\n  * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} options.adapter - Network adapter\r\n   * @param {Object} options.persistence - SessionPersistence instance\r\n   * @param {Object} options.keyDeriver - KeyDeriver instance\r\n   */\r\n  constructor({ adapter, persistence, keyDeriver } = {}) {\r\n    if (!adapter) throw new Error(\"SessionVault: adapter is required\");\r\n    if (!persistence) throw new Error(\"SessionVault: persistence is required\");\r\n    if (!keyDeriver) throw new Error(\"SessionVault: keyDeriver is required\");\r\n\r\n    this._adapter = adapter;\r\n    this._persistence = persistence;\r\n    this._keyDeriver = keyDeriver;\r\n\r\n    // Session storage\r\n    this._sessions = new Map();\r\n    this._pendingDiscoveries = new Map();\r\n    this._orphanResponses = new Map();\r\n    this._keyIndex = 0;\r\n\r\n    // Persistence\r\n    this._persistConfig = null;\r\n    this._persistQueue = new Set();\r\n    this._persistTimer = null;\r\n\r\n    // Lobby manager reference (set by setLobbyManager)\r\n    this._lobbyManager = null;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Lobby Manager Integration\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Set the lobby manager reference for including lobby state in exports.\r\n   * Called by SessionFacade when a LobbyFacade is created.\r\n   * @param {Object} lobbyManager - LobbyManager instance with exportLobbyState/restoreLobbyState\r\n   */\r\n  setLobbyManager(lobbyManager) {\r\n    this._lobbyManager = lobbyManager;\r\n    log.info(\"SessionVault: Lobby manager registered for persistence\");\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Session Access\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  get sessions() {\r\n    return this._sessions;\r\n  }\r\n\r\n  get pendingDiscoveries() {\r\n    return this._pendingDiscoveries;\r\n  }\r\n\r\n  get orphanResponses() {\r\n    return this._orphanResponses;\r\n  }\r\n\r\n  getSession(mailboxId) {\r\n    return this._sessions.get(mailboxId);\r\n  }\r\n\r\n  setSession(mailboxId, session) {\r\n    this._sessions.set(mailboxId, session);\r\n    this._schedulePersist(mailboxId);\r\n  }\r\n\r\n  deleteSession(mailboxId) {\r\n    const session = this._sessions.get(mailboxId);\r\n    if (session) {\r\n      void this._removeResumeState(session);\r\n      this._sessions.delete(mailboxId);\r\n    }\r\n    return !!session;\r\n  }\r\n\r\n  getPendingDiscovery(sid) {\r\n    return this._pendingDiscoveries.get(sid);\r\n  }\r\n\r\n  setPendingDiscovery(sid, pending) {\r\n    this._pendingDiscoveries.set(sid, pending);\r\n  }\r\n\r\n  deletePendingDiscovery(sid) {\r\n    this._pendingDiscoveries.delete(sid);\r\n  }\r\n\r\n  getOrphanResponse(sid) {\r\n    return this._orphanResponses.get(sid);\r\n  }\r\n\r\n  setOrphanResponse(sid, response) {\r\n    this._orphanResponses.set(sid, response);\r\n  }\r\n\r\n  deleteOrphanResponse(sid) {\r\n    this._orphanResponses.delete(sid);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Context Factory\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Create a new KKTP context (state machine + protocol).\r\n   * @param {boolean} isInitiator\r\n   * @param {number|null} keyIndex\r\n   * @returns {{ sm: KKTPStateMachine, protocol: KKTPProtocol, keyIndex: number }}\r\n   */\r\n  createContext(isInitiator, keyIndex = null) {\r\n    const idx =\r\n      Number.isInteger(keyIndex) && keyIndex >= 0\r\n        ? keyIndex\r\n        : this._keyIndex++;\r\n    if (idx >= this._keyIndex) this._keyIndex = idx + 1;\r\n\r\n    const sm = new KKTPStateMachine(this._adapter, isInitiator, idx);\r\n    const protocol = new KKTPProtocol(sm);\r\n    return { sm, protocol, keyIndex: idx };\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Persistence Configuration\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  configureResumePersistence({\r\n    storageKeyPrefix = \"kktp_resume_\",\r\n    encryptFn = null,\r\n    throttleMs = 250,\r\n    includeMessages = true,\r\n  } = {}) {\r\n    this._persistConfig = {\r\n      storageKeyPrefix,\r\n      encryptFn,\r\n      throttleMs,\r\n      includeMessages,\r\n    };\r\n    return this._persistConfig;\r\n  }\r\n\r\n  get persistConfig() {\r\n    return this._persistConfig;\r\n  }\r\n\r\n  forcePersistAllSessions() {\r\n    if (!this._persistConfig) return;\r\n    for (const mailboxId of this._sessions.keys()) {\r\n      this._persistQueue.add(mailboxId);\r\n    }\r\n    void this._flushPersistQueue();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Session Query\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  getSessions() {\r\n    return Array.from(this._sessions.entries()).map(([mailboxId, session]) => ({\r\n      mailboxId,\r\n      ...session,\r\n    }));\r\n  }\r\n\r\n  findSessionByDiscoverySid(sid) {\r\n    for (const [mailboxId, session] of this._sessions.entries()) {\r\n      if (session?.discovery?.sid === sid) return { mailboxId, session };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Find a session by peer's public signing key.\r\n   * Used for lobby mode to check if we already have a session with a specific peer.\r\n   * @param {string} peerPubSig - The peer's public signing key\r\n   * @returns {{ mailboxId: string, session: Object }|null}\r\n   */\r\n  findSessionByPeerPubSig(peerPubSig) {\r\n    if (!peerPubSig) return null;\r\n    for (const [mailboxId, session] of this._sessions.entries()) {\r\n      if (session?.peerPubSig === peerPubSig) {\r\n        return { mailboxId, session };\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  isSessionExpired(mailboxId, nowMs = Date.now()) {\r\n    const s = this._sessions.get(mailboxId);\r\n    if (!s) return true;\r\n    const expectedEndMs = getExpectedEndMs(s.discovery, s.createdAt);\r\n    if (!expectedEndMs) return false;\r\n    return nowMs > expectedEndMs;\r\n  }\r\n\r\n  pruneExpiredSessions(nowMs = Date.now()) {\r\n    for (const [mailboxId, s] of this._sessions.entries()) {\r\n      const expectedEndMs = getExpectedEndMs(s.discovery, s.createdAt);\r\n      if (expectedEndMs && nowMs > expectedEndMs) {\r\n        void this._removeResumeState(s);\r\n        this._sessions.delete(mailboxId);\r\n      }\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Export Sessions\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  exportSessions({ includeMessages = true } = {}) {\r\n    const toHexIfBytes = (value) => {\r\n      if (typeof value === \"string\") return value;\r\n      if (value instanceof Uint8Array) return bytesToHex(value);\r\n      return null;\r\n    };\r\n\r\n    const sessions = [];\r\n\r\n    // Export active sessions\r\n    for (const [mailboxId, s] of this._sessions.entries()) {\r\n      const kktp = s?.sm?.kktp || {};\r\n      const myDhPriv = toHexIfBytes(kktp.myDhPriv);\r\n      const myPrivSig = toHexIfBytes(kktp.myPrivSig);\r\n      const resumeState = extractResumeState(s);\r\n\r\n      sessions.push({\r\n        mailboxId,\r\n        keyIndex: s.keyIndex,\r\n        baseIndex: s.baseIndex ?? null,\r\n        isInitiator: !!s.isInitiator,\r\n        createdAt: s.createdAt || Date.now(),\r\n        discovery: s.discovery || null,\r\n        response: s.response || null,\r\n        peerPubSig: s.peerPubSig || null,\r\n        messages: includeMessages ? s.messages || [] : [],\r\n        myDhPriv,\r\n        myPrivSig,\r\n        resumeState,\r\n      });\r\n    }\r\n\r\n    // Export pending discoveries\r\n    for (const [sid, pending] of this._pendingDiscoveries.entries()) {\r\n      const alreadyExported = sessions.some(\r\n        (entry) => entry.discovery?.sid === sid,\r\n      );\r\n      if (alreadyExported) continue;\r\n\r\n      const kktp = pending?.sm?.kktp || {};\r\n      const myDhPriv = toHexIfBytes(kktp.myDhPriv);\r\n      const myPrivSig = toHexIfBytes(kktp.myPrivSig);\r\n\r\n      sessions.push({\r\n        mailboxId: null,\r\n        keyIndex: pending.keyIndex ?? null,\r\n        baseIndex: pending.baseIndex ?? null,\r\n        isInitiator: true,\r\n        createdAt: pending.createdAt || Date.now(),\r\n        discovery: pending.discovery || null,\r\n        response: null,\r\n        peerPubSig: null,\r\n        messages: [],\r\n        myDhPriv,\r\n        myPrivSig,\r\n      });\r\n    }\r\n\r\n    log.info(\r\n      \"KKTP: exportSessions\",\r\n      JSON.stringify({\r\n        activeCount: this._sessions.size,\r\n        pendingCount: this._pendingDiscoveries.size,\r\n        totalCount: sessions.length,\r\n        includeMessages,\r\n      }),\r\n    );\r\n\r\n    // Export lobby state if lobby manager is registered\r\n    const lobbyState = this._lobbyManager?.exportLobbyState?.() || null;\r\n    if (lobbyState) {\r\n      log.info(\"KKTP: exportSessions includes lobbyState\", {\r\n        lobbyId: lobbyState.lobby?.lobbyId?.slice(0, 16),\r\n        state: lobbyState.state,\r\n      });\r\n    }\r\n\r\n    return {\r\n      version: 1,\r\n      savedAt: Date.now(),\r\n      sessions,\r\n      lobbyState,\r\n    };\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Restore Sessions\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async restoreSessions(snapshot, { skipExpired = true } = {}) {\r\n    if (!snapshot || !Array.isArray(snapshot.sessions)) return;\r\n\r\n    log.info(`KKTP: restoreSessions count=${snapshot.sessions.length}`);\r\n\r\n    for (const s of snapshot.sessions) {\r\n      if (!s || !s.discovery) continue;\r\n\r\n      const expectedEndMs = getExpectedEndMs(s.discovery, s.createdAt);\r\n      if (skipExpired && expectedEndMs && Date.now() > expectedEndMs) continue;\r\n\r\n      const sid = s.discovery?.sid || s.response?.sid || null;\r\n      let resumeState = s.resumeState || null;\r\n\r\n      if (!resumeState && sid) {\r\n        resumeState = await this._loadResumeStateForSid(sid);\r\n        if (resumeState) {\r\n          log.info(\"KKTP: loaded resume state from blob\");\r\n        }\r\n      }\r\n\r\n      // --- Deterministic key derivation using peer registry ---\r\n      const peerPubSig = s.peerPubSig || s.discovery?.pub_sig;\r\n      let keyIndex = s.keyIndex;\r\n      let baseIndex = s.baseIndex;\r\n\r\n      if (peerPubSig && (keyIndex == null || baseIndex == null)) {\r\n        try {\r\n          const peerRecord = await this._keyDeriver.getPeerRecord(peerPubSig);\r\n          if (peerRecord) {\r\n            baseIndex = peerRecord.baseIndex;\r\n            keyIndex = s.isInitiator ? baseIndex + 1 : baseIndex + 2;\r\n            log.info(\r\n              `KKTP: restore using peerRecord baseIndex=${baseIndex} keyIndex=${keyIndex}`,\r\n            );\r\n          }\r\n        } catch (err) {\r\n          log.warn(`KKTP: failed to lookup peer record: ${err?.message}`);\r\n        }\r\n      }\r\n\r\n      const ctx = this.createContext(!!s.isInitiator, keyIndex);\r\n      ctx.baseIndex = baseIndex;\r\n\r\n      if (s.myDhPriv) ctx.sm.kktp.myDhPriv = s.myDhPriv;\r\n      if (s.myPrivSig) ctx.sm.kktp.myPrivSig = s.myPrivSig;\r\n\r\n      // Re-derive keys if missing\r\n      if (!ctx.sm.kktp.myDhPriv || !ctx.sm.kktp.myPrivSig) {\r\n        const fallbackIndex = Number.isInteger(keyIndex)\r\n          ? keyIndex\r\n          : s.isInitiator\r\n            ? 0\r\n            : 1;\r\n        try {\r\n          const keys = await this._keyDeriver.deriveKeysForIndex(fallbackIndex);\r\n          ctx.sm.kktp.myDhPriv = ctx.sm.kktp.myDhPriv || keys.dh.privateKey;\r\n          ctx.sm.kktp.myPrivSig = ctx.sm.kktp.myPrivSig || keys.sig.privateKey;\r\n          log.info(\r\n            `KKTP: re-derived keys for restore (idx=${fallbackIndex})`,\r\n          );\r\n        } catch (err) {\r\n          log.warn(\r\n            `KKTP: failed to re-derive keys for restore: ${err?.message || err}`,\r\n          );\r\n        }\r\n      }\r\n\r\n      if (s.isInitiator) {\r\n        await this._restoreInitiatorSession(s, ctx, resumeState);\r\n      } else {\r\n        await this._restoreResponderSession(s, ctx, resumeState);\r\n      }\r\n    }\r\n\r\n    log.info(\r\n      `KKTP: restoreSessions complete sessions=${this._sessions.size} pending=${this._pendingDiscoveries.size} orphans=${this._orphanResponses.size}`,\r\n    );\r\n\r\n    // Restore lobby state if present and lobby manager is registered\r\n    if (snapshot.lobbyState && this._lobbyManager?.restoreLobbyState) {\r\n      const lobbyRestored = await this._lobbyManager.restoreLobbyState(\r\n        snapshot.lobbyState\r\n      );\r\n      if (lobbyRestored) {\r\n        log.info(\"KKTP: Lobby state restored successfully\");\r\n      }\r\n    }\r\n  }\r\n\r\n  async _restoreInitiatorSession(s, ctx, resumeState) {\r\n    log.info(\r\n      `KKTP: restore initiator sid=${s.discovery.sid?.slice(0, 8)}...`,\r\n    );\r\n\r\n    // CRITICAL: Ensure the state machine knows this is an initiator session\r\n    ctx.sm.isInitiator = true;\r\n\r\n    if (!ctx.sm.kktp.discoveryAnchor) {\r\n      ctx.sm.kktp.discoveryAnchor = s.discovery;\r\n    }\r\n\r\n    this._pendingDiscoveries.set(s.discovery.sid, {\r\n      ...ctx,\r\n      discovery: s.discovery,\r\n      createdAt: s.createdAt || Date.now(),\r\n    });\r\n\r\n    // Check for orphan response\r\n    const orphan = this._orphanResponses.get(s.discovery.sid);\r\n    if (orphan && !s.response) {\r\n      log.info(\r\n        `KKTP: applying orphan response sid=${s.discovery.sid?.slice(0, 8)}...`,\r\n      );\r\n      s.response = orphan;\r\n      this._orphanResponses.delete(s.discovery.sid);\r\n    }\r\n\r\n    if (s.response) {\r\n      // If we have valid resume state with session key, use it directly\r\n      if (resumeState?.K_session) {\r\n        applyResumeState(ctx, resumeState);\r\n\r\n        // Restore SID from discovery if not in resume state\r\n        if (!ctx.sm.kktp.sid && s.discovery?.sid) {\r\n          ctx.sm.kktp.sid = s.discovery.sid;\r\n        }\r\n\r\n        // Restore identity mappings for initiator:\r\n        // - myPubSig = our discovery pub_sig\r\n        // - peerPubSig = responder's pub_sig_resp\r\n        if (!ctx.sm.kktp.myPubSig && s.discovery?.pub_sig) {\r\n          ctx.sm.kktp.myPubSig = s.discovery.pub_sig;\r\n        }\r\n        if (!ctx.sm.kktp.peerPubSig && s.response?.pub_sig_resp) {\r\n          ctx.sm.kktp.peerPubSig = s.response.pub_sig_resp;\r\n        }\r\n\r\n        // CRITICAL: Set state to ACTIVE since we have valid session keys\r\n        ctx.sm.state = KKTP_STATES.ACTIVE;\r\n\r\n        log.info(\"KKTP: applied resume state (initiator)\", {\r\n          hasSessionKey: !!ctx.sm.kktp.sessionKey,\r\n          state: ctx.sm.state,\r\n          isInitiator: ctx.sm.isInitiator,\r\n        });\r\n      } else {\r\n        // No resume state - need to re-derive via protocol processing\r\n        try {\r\n          await ctx.protocol.processIncoming(s.response);\r\n        } catch (err) {\r\n          log.warn(\r\n            `KKTP: restore failed response sid=${s.discovery.sid?.slice(0, 8)}...`,\r\n            err?.message || err,\r\n          );\r\n          return;\r\n        }\r\n\r\n        // Derive seq from messages if available\r\n        if (Array.isArray(s.messages) && s.messages.length > 0) {\r\n          const derived = deriveSeqFromMessages(s.messages);\r\n          ctx.sm.kktp.outboundSeq = derived.outboundSeq;\r\n          ctx.sm.kktp.inboundSeq = {\r\n            AtoB: derived.inboundSeq_AtoB,\r\n            BtoA: derived.inboundSeq_BtoA,\r\n          };\r\n          log.info(\r\n            `KKTP: derived seq (initiator) out=${derived.outboundSeq} AtoB=${derived.inboundSeq_AtoB} BtoA=${derived.inboundSeq_BtoA}`,\r\n          );\r\n        }\r\n      }\r\n\r\n      const mailboxId = ctx.sm?.kktp?.mailboxId || s.mailboxId;\r\n      if (!mailboxId) {\r\n        log.warn(\"KKTP: restore initiator failed - no mailboxId\");\r\n        return;\r\n      }\r\n\r\n      this._sessions.set(mailboxId, {\r\n        ...ctx,\r\n        discovery: s.discovery,\r\n        response: s.response,\r\n        messages: s.messages || [],\r\n        peerPubSig: s.peerPubSig || s.response?.pub_sig_resp || null,\r\n        isInitiator: true,\r\n        createdAt: s.createdAt || Date.now(),\r\n      });\r\n\r\n      this._pendingDiscoveries.delete(s.discovery.sid);\r\n      log.info(\r\n        `KKTP: restored session mailbox=${mailboxId?.slice(0, 8)}...`,\r\n      );\r\n    }\r\n  }\r\n\r\n  async _restoreResponderSession(s, ctx, resumeState) {\r\n    try {\r\n      log.info(\r\n        `KKTP: restore responder sid=${s.discovery.sid?.slice(0, 8)}...`,\r\n      );\r\n\r\n      // CRITICAL: Ensure the state machine knows this is a responder session\r\n      ctx.sm.isInitiator = false;\r\n\r\n      if (!ctx.sm.kktp.discoveryAnchor) {\r\n        ctx.sm.kktp.discoveryAnchor = s.discovery;\r\n      }\r\n\r\n      // If we have valid resume state with session key, use it directly\r\n      // This avoids re-deriving keys which may fail or produce wrong results\r\n      if (resumeState?.K_session) {\r\n        applyResumeState(ctx, resumeState);\r\n\r\n        // Restore SID from discovery if not in resume state\r\n        if (!ctx.sm.kktp.sid && s.discovery?.sid) {\r\n          ctx.sm.kktp.sid = s.discovery.sid;\r\n        }\r\n\r\n        // Restore identity mappings for responder:\r\n        // - myPubSig = our response pub_sig_resp\r\n        // - peerPubSig = initiator's pub_sig from discovery\r\n        if (!ctx.sm.kktp.myPubSig && s.response?.pub_sig_resp) {\r\n          ctx.sm.kktp.myPubSig = s.response.pub_sig_resp;\r\n        }\r\n        if (!ctx.sm.kktp.peerPubSig && s.discovery?.pub_sig) {\r\n          ctx.sm.kktp.peerPubSig = s.discovery.pub_sig;\r\n        }\r\n\r\n        // CRITICAL: Set state to ACTIVE since we have valid session keys\r\n        // Without this, sendMessage() will throw \"Cannot send in state: INIT\"\r\n        ctx.sm.state = KKTP_STATES.ACTIVE;\r\n\r\n        log.info(\"KKTP: applied resume state (responder)\", {\r\n          hasSessionKey: !!ctx.sm.kktp.sessionKey,\r\n          state: ctx.sm.state,\r\n          isInitiator: ctx.sm.isInitiator,\r\n        });\r\n      } else {\r\n        // No resume state - need to re-derive via protocol processing\r\n        await ctx.protocol.processIncoming(s.discovery);\r\n        if (s.response) {\r\n          await ctx.protocol.processIncoming(s.response);\r\n        }\r\n\r\n        // Derive seq from messages if available\r\n        if (Array.isArray(s.messages) && s.messages.length > 0) {\r\n          const derived = deriveSeqFromMessages(s.messages);\r\n          ctx.sm.kktp.outboundSeq = derived.outboundSeq;\r\n          ctx.sm.kktp.inboundSeq = {\r\n            AtoB: derived.inboundSeq_AtoB,\r\n            BtoA: derived.inboundSeq_BtoA,\r\n          };\r\n          log.info(\r\n            `KKTP: derived seq (responder) out=${derived.outboundSeq} AtoB=${derived.inboundSeq_AtoB} BtoA=${derived.inboundSeq_BtoA}`,\r\n          );\r\n        }\r\n      }\r\n    } catch (err) {\r\n      log.warn(\r\n        `KKTP: restore responder failed sid=${s.discovery.sid?.slice(0, 8)}...`,\r\n        err?.message || err,\r\n      );\r\n      return;\r\n    }\r\n\r\n    const mailboxId = s.mailboxId || ctx.sm?.kktp?.mailboxId;\r\n    if (!mailboxId) {\r\n      log.warn(\"KKTP: restore responder failed - no mailboxId\");\r\n      return;\r\n    }\r\n\r\n    this._sessions.set(mailboxId, {\r\n      ...ctx,\r\n      discovery: s.discovery,\r\n      response: s.response || null,\r\n      messages: s.messages || [],\r\n      peerPubSig: s.peerPubSig || s.discovery?.pub_sig || null,\r\n      isInitiator: false,\r\n      createdAt: s.createdAt || Date.now(),\r\n    });\r\n\r\n    log.info(\r\n      `KKTP: restored responder mailbox=${mailboxId?.slice(0, 8)}...`,\r\n    );\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Scheduled Persistence\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  schedulePersist(mailboxId, { force = false } = {}) {\r\n    this._schedulePersist(mailboxId, { force });\r\n  }\r\n\r\n  _schedulePersist(mailboxId, { force = false } = {}) {\r\n    if (!this._persistConfig || !mailboxId) return;\r\n\r\n    this._persistQueue.add(mailboxId);\r\n\r\n    if (force) {\r\n      this._flushPersistQueue().catch(() => {});\r\n      return;\r\n    }\r\n\r\n    if (this._persistTimer) return;\r\n    const delay = Number(this._persistConfig.throttleMs) || 0;\r\n    this._persistTimer = setTimeout(() => {\r\n      this._flushPersistQueue().catch(() => {});\r\n    }, delay);\r\n  }\r\n\r\n  async _flushPersistQueue() {\r\n    if (!this._persistConfig) return;\r\n    if (this._persistTimer) {\r\n      clearTimeout(this._persistTimer);\r\n      this._persistTimer = null;\r\n    }\r\n\r\n    const mailboxIds = Array.from(this._persistQueue);\r\n    this._persistQueue.clear();\r\n\r\n    for (const mailboxId of mailboxIds) {\r\n      await this._persistSessionState(mailboxId);\r\n    }\r\n  }\r\n\r\n  async _persistSessionState(mailboxId) {\r\n    if (!this._persistConfig) return;\r\n    if (typeof indexedDB === \"undefined\") return;\r\n\r\n    const session = this._sessions.get(mailboxId);\r\n    if (!session) return;\r\n\r\n    const { storageKeyPrefix, encryptFn, includeMessages } =\r\n      this._persistConfig;\r\n\r\n    const resumeState = extractResumeState(session);\r\n    if (!includeMessages) {\r\n      resumeState.messages = [];\r\n    }\r\n\r\n    const sid =\r\n      session?.discovery?.sid ||\r\n      session?.response?.sid ||\r\n      resumeState?.discovery?.sid ||\r\n      null;\r\n    if (!sid) return;\r\n\r\n    const savedAt = Date.now();\r\n    const payload = {\r\n      savedAt,\r\n      sid,\r\n      ...resumeState,\r\n    };\r\n\r\n    let raw = JSON.stringify(payload);\r\n    if (encryptFn) {\r\n      raw = await encryptFn(raw);\r\n    }\r\n\r\n    await this._persistence.putResumeRecord({\r\n      sid,\r\n      prefix: storageKeyPrefix,\r\n      savedAt,\r\n      data: raw,\r\n    });\r\n  }\r\n\r\n  async _removeResumeState(session) {\r\n    if (!this._persistConfig || !session) return;\r\n    if (typeof indexedDB === \"undefined\") return;\r\n\r\n    const sid =\r\n      session?.discovery?.sid ||\r\n      session?.response?.sid ||\r\n      session?.discovery?.sid ||\r\n      null;\r\n    if (!sid) return;\r\n\r\n    await this._persistence.deleteResumeRecord(sid);\r\n  }\r\n\r\n  async _loadResumeStateForSid(sid) {\r\n    if (!sid || !this._persistConfig?.storageKeyPrefix) return null;\r\n    try {\r\n      const rec = await this._persistence.getResumeRecord(\r\n        this._persistConfig.storageKeyPrefix,\r\n        sid,\r\n      );\r\n      if (!rec?.data || typeof rec.data !== \"string\") return null;\r\n\r\n      let parsed = null;\r\n      try {\r\n        const { strictParseJson } = await import(\"../integrity/canonical.js\");\r\n        parsed = strictParseJson(rec.data);\r\n      } catch {\r\n        try {\r\n          parsed = JSON.parse(rec.data);\r\n        } catch {\r\n          parsed = null;\r\n        }\r\n      }\r\n\r\n      if (parsed?.K_session || parsed?.mailbox_id) return parsed;\r\n    } catch {\r\n      // no-op\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Session Cleanup\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  closeSession(mailboxId) {\r\n    const session = this._sessions.get(mailboxId);\r\n    if (!session) return false;\r\n\r\n    void this._removeResumeState(session);\r\n    session.sm.terminate();\r\n    this._sessions.delete(mailboxId);\r\n    return true;\r\n  }\r\n\r\n  zeroOutAndDelete(mailboxId) {\r\n    const session = this._sessions.get(mailboxId);\r\n    if (session) {\r\n      zeroOutSessionKey(session);\r\n    }\r\n    this._sessions.delete(mailboxId);\r\n  }\r\n}\r\n", "// kktp/protocol/sessions/handoverEngine.js\r\n// Sovereign Resume / Session Handover Logic\r\n\r\nimport { hexToString } from \"../utils/conversions.js\";\r\nimport { strictParseJson } from \"../integrity/canonical.js\";\r\nimport {\r\n  parseKKTPPayload,\r\n  extractResumeState,\r\n  applyResumeState,\r\n  zeroOutSessionKey,\r\n} from \"./smHelpers.js\";\r\n\r\n/**\r\n * Handles the complex resumeSession logic with syncFrom loops.\r\n * Manages handover negotiations between old and new sessions.\r\n */\r\nexport class HandoverEngine {\r\n  /**\r\n   * @param {Object} options\r\n  * @param {import('../../adapters/kaspaAdapter.js').KaspaAdapter} options.adapter - Network adapter\r\n   * @param {Object} options.persistence - SessionPersistence instance\r\n   * @param {Object} options.vault - SessionVault instance\r\n   */\r\n  constructor({ adapter, persistence, vault } = {}) {\r\n    if (!adapter) throw new Error(\"HandoverEngine: adapter is required\");\r\n    if (!persistence) throw new Error(\"HandoverEngine: persistence is required\");\r\n    if (!vault) throw new Error(\"HandoverEngine: vault is required\");\r\n\r\n    this._adapter = adapter;\r\n    this._persistence = persistence;\r\n    this._vault = vault;\r\n  }\r\n\r\n  /**\r\n   * Set the sendMessage and connectToPeer callbacks.\r\n   * These must be set by the facade after construction.\r\n   * @param {{ sendMessage: Function, connectToPeer: Function }} callbacks\r\n   */\r\n  setCallbacks({ sendMessage, connectToPeer }) {\r\n    this._sendMessage = sendMessage;\r\n    this._connectToPeer = connectToPeer;\r\n  }\r\n\r\n  /**\r\n   * Set the incoming message handler callback.\r\n   * @param {Function} handler - Function to handle incoming messages\r\n   */\r\n  setMessageHandler(handler) {\r\n    this._handleIncomingMessage = handler;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Sovereign Resume\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Resume a session using stored state, scanning the DAG for handover messages.\r\n   * @param {Object} options\r\n   * @param {string} [options.sid] - Session ID to resume\r\n   * @param {string} [options.startHash] - Block hash to start scanning from\r\n   * @param {number} [options.maxSeconds=30] - Maximum scan duration\r\n   * @param {Function} [options.logFn] - Logging callback\r\n   * @param {Function} [options.decryptFn] - Decryption function for stored state\r\n   * @param {Function} [options.encryptFn] - Encryption function for new state\r\n   * @param {string} [options.storageKeyPrefix=\"kktp_resume_\"] - Storage key prefix\r\n   * @param {Object} [options.meta={}] - Metadata for new discovery anchor\r\n   * @returns {Promise<Object>} Resume result with status\r\n   */\r\n  async resumeSession({\r\n    sid,\r\n    startHash,\r\n    maxSeconds = 30,\r\n    logFn,\r\n    decryptFn,\r\n    encryptFn,\r\n    storageKeyPrefix = \"kktp_resume_\",\r\n    meta = {},\r\n  } = {}) {\r\n    logFn = typeof logFn === \"function\" ? logFn : () => {};\r\n\r\n    // 1. Load resume record\r\n    const record = sid\r\n      ? await this._persistence.getResumeRecord(storageKeyPrefix, sid)\r\n      : await this._persistence.findLatestResumeRecord(storageKeyPrefix);\r\n\r\n    if (!record?.data) return { status: \"no_resume_blob\" };\r\n\r\n    // 2. Decrypt and parse resume data\r\n    const resumeData = await this._parseResumeData(record.data, decryptFn);\r\n    if (!resumeData) return resumeData; // Returns error status\r\n\r\n    if (!resumeData?.mailbox_id || !resumeData?.K_session) {\r\n      return { status: \"invalid_resume_blob\" };\r\n    }\r\n\r\n    const oldMailboxId = resumeData.mailbox_id;\r\n    const oldSid = resumeData.sid || sid || resumeData.discovery?.sid || \"\";\r\n    const scanStartHash =\r\n      startHash ||\r\n      resumeData.startHash ||\r\n      resumeData.last_block_hash ||\r\n      resumeData.discovery_block_hash;\r\n\r\n    if (!scanStartHash) {\r\n      throw new Error(\"resumeSession: startHash is required\");\r\n    }\r\n\r\n    // 3. Restore old session context\r\n    const oldCtx = this._vault.createContext(\r\n      resumeData.isInitiator ?? true,\r\n      resumeData.keyIndex ?? null,\r\n    );\r\n    applyResumeState(oldCtx, resumeData);\r\n\r\n    this._vault.sessions.set(oldMailboxId, {\r\n      ...oldCtx,\r\n      discovery: resumeData.discovery || null,\r\n      response: resumeData.response || null,\r\n      messages: resumeData.messages || [],\r\n      peerPubSig: resumeData.remote_pub_sig || null,\r\n      isInitiator: !!resumeData.isInitiator,\r\n      createdAt: resumeData.createdAt || Date.now(),\r\n    });\r\n\r\n    // 4. Scan for peer handover\r\n    const peerHandover = await this._scanForPeerHandover(\r\n      oldMailboxId,\r\n      scanStartHash,\r\n      maxSeconds,\r\n      logFn,\r\n    );\r\n\r\n    if (peerHandover?.new_anchor) {\r\n      const { mailboxId } = await this._connectToPeer(peerHandover.new_anchor);\r\n      return {\r\n        status: \"pivoted\",\r\n        mailboxId,\r\n        newSid: peerHandover.new_sid || peerHandover.new_anchor?.sid,\r\n      };\r\n    }\r\n\r\n    // 5. Create new discovery for handover\r\n    const newCtx = this._vault.createContext(true);\r\n    const { discovery } = await newCtx.protocol.createDiscoveryAnchor(meta);\r\n\r\n    this._vault.pendingDiscoveries.set(discovery.sid, {\r\n      ...newCtx,\r\n      discovery,\r\n      createdAt: Date.now(),\r\n    });\r\n\r\n    // 6. Scan for response to new discovery\r\n    const responseAnchor = await this._scanForResponse(\r\n      discovery.sid,\r\n      scanStartHash,\r\n      maxSeconds,\r\n      logFn,\r\n    );\r\n\r\n    if (!responseAnchor) {\r\n      // Send handover message on old session\r\n      await this._sendMessage(\r\n        oldMailboxId,\r\n        JSON.stringify({\r\n          intent: \"handover\",\r\n          new_sid: discovery.sid,\r\n          new_anchor: discovery,\r\n        }),\r\n      );\r\n\r\n      return {\r\n        status: \"handover_pending\",\r\n        newSid: discovery.sid,\r\n      };\r\n    }\r\n\r\n    // 7. Handle response and establish new session\r\n    return await this._completeHandover({\r\n      discovery,\r\n      responseAnchor,\r\n      oldMailboxId,\r\n      oldSid,\r\n      scanStartHash,\r\n      maxSeconds,\r\n      logFn,\r\n      encryptFn,\r\n      storageKeyPrefix,\r\n    });\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Internal Helpers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async _parseResumeData(raw, decryptFn) {\r\n    try {\r\n      if (decryptFn) {\r\n        const decrypted = await decryptFn(raw);\r\n        return strictParseJson(decrypted) || decrypted;\r\n      } else {\r\n        return strictParseJson(raw);\r\n      }\r\n    } catch (err) {\r\n      return { status: \"decrypt_failed\", error: err.message };\r\n    }\r\n  }\r\n\r\n  async _scanForPeerHandover(oldMailboxId, scanStartHash, maxSeconds, logFn) {\r\n    let peerHandover = null;\r\n\r\n    await this._adapter.walkDagRange({\r\n      startHash: scanStartHash,\r\n      maxSeconds,\r\n      prefixes: [`KKTP:${oldMailboxId}:`],\r\n      logFn,\r\n      onMatch: ({ payload }) => {\r\n        const payloadHex = payload || \"\";\r\n        if (!payloadHex) return false;\r\n\r\n        let rawPayload = \"\";\r\n        try {\r\n          rawPayload = hexToString(payloadHex);\r\n        } catch {\r\n          return false;\r\n        }\r\n\r\n        const parsed = parseKKTPPayload(rawPayload);\r\n        if (parsed?.type !== \"message\") return false;\r\n\r\n        const event = this._handleIncomingMessage(\r\n          parsed.mailboxId,\r\n          parsed.message,\r\n        );\r\n        const messages = event?.messages || [];\r\n        for (const msg of messages) {\r\n          const obj = JSON.parse(msg);\r\n          if (obj?.intent === \"handover\" && obj?.new_anchor) {\r\n            peerHandover = obj;\r\n            return true;\r\n          }\r\n        }\r\n        return false;\r\n      },\r\n    });\r\n\r\n    return peerHandover;\r\n  }\r\n\r\n  async _scanForResponse(discoverySid, scanStartHash, maxSeconds, logFn) {\r\n    let responseAnchor = null;\r\n\r\n    await this._adapter.walkDagRange({\r\n      startHash: scanStartHash,\r\n      maxSeconds,\r\n      prefixes: [\"KKTP:ANCHOR:\"],\r\n      logFn,\r\n      onMatch: ({ payload }) => {\r\n        const payloadHex = payload || \"\";\r\n        if (!payloadHex) return false;\r\n\r\n        let rawPayload = \"\";\r\n        try {\r\n          rawPayload = hexToString(payloadHex);\r\n        } catch {\r\n          return false;\r\n        }\r\n\r\n        const parsed = parseKKTPPayload(rawPayload);\r\n        if (\r\n          parsed?.type === \"anchor\" &&\r\n          parsed.anchor.type === \"response\" &&\r\n          parsed.anchor.sid === discoverySid\r\n        ) {\r\n          responseAnchor = parsed.anchor;\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n    });\r\n\r\n    return responseAnchor;\r\n  }\r\n\r\n  async _completeHandover({\r\n    discovery,\r\n    responseAnchor,\r\n    oldMailboxId,\r\n    oldSid,\r\n    scanStartHash,\r\n    maxSeconds,\r\n    logFn,\r\n    encryptFn,\r\n    storageKeyPrefix,\r\n  }) {\r\n    // Process the response anchor\r\n    // Note: _handleIncomingAnchor must be set by the facade\r\n    if (this._handleIncomingAnchor) {\r\n      await this._handleIncomingAnchor(responseAnchor);\r\n    }\r\n\r\n    const found = this._vault.findSessionByDiscoverySid(discovery.sid);\r\n    if (!found) {\r\n      return { status: \"handover_failed\", reason: \"session_not_established\" };\r\n    }\r\n\r\n    const newMailboxId = found.mailboxId;\r\n\r\n    // Scan for lock confirmation\r\n    const lockAchieved = await this._scanForLock(\r\n      newMailboxId,\r\n      scanStartHash,\r\n      maxSeconds,\r\n      logFn,\r\n    );\r\n\r\n    if (!lockAchieved) {\r\n      return {\r\n        status: \"handover_no_lock\",\r\n        newMailboxId,\r\n        newSid: discovery.sid,\r\n      };\r\n    }\r\n\r\n    // Clean up old session\r\n    const oldSession = this._vault.sessions.get(oldMailboxId);\r\n    if (oldSession) zeroOutSessionKey(oldSession);\r\n    this._vault.sessions.delete(oldMailboxId);\r\n\r\n    // Persist new session state\r\n    if (encryptFn) {\r\n      const newState = extractResumeState(this._vault.sessions.get(newMailboxId));\r\n      const encrypted = await encryptFn(\r\n        JSON.stringify({\r\n          savedAt: Date.now(),\r\n          ...newState,\r\n          sid: discovery.sid,\r\n        }),\r\n      );\r\n\r\n      await this._persistence.putResumeRecord({\r\n        sid: discovery.sid,\r\n        prefix: storageKeyPrefix,\r\n        savedAt: Date.now(),\r\n        data: encrypted,\r\n      });\r\n\r\n      if (oldSid) {\r\n        await this._persistence.deleteResumeRecord(oldSid);\r\n      }\r\n    }\r\n\r\n    return {\r\n      status: \"handover_complete\",\r\n      newMailboxId,\r\n      newSid: discovery.sid,\r\n    };\r\n  }\r\n\r\n  async _scanForLock(newMailboxId, scanStartHash, maxSeconds, logFn) {\r\n    let lockAchieved = false;\r\n\r\n    await this._adapter.walkDagRange({\r\n      startHash: scanStartHash,\r\n      maxSeconds,\r\n      prefixes: [`KKTP:${newMailboxId}:`],\r\n      logFn,\r\n      onMatch: ({ payload }) => {\r\n        const payloadHex = payload || \"\";\r\n        if (!payloadHex) return false;\r\n\r\n        let rawPayload = \"\";\r\n        try {\r\n          rawPayload = hexToString(payloadHex);\r\n        } catch {\r\n          return false;\r\n        }\r\n\r\n        const parsed = parseKKTPPayload(rawPayload);\r\n        if (parsed?.type !== \"message\") return false;\r\n\r\n        const event = this._handleIncomingMessage(\r\n          parsed.mailboxId,\r\n          parsed.message,\r\n        );\r\n        if (event?.messages?.length > 0) {\r\n          lockAchieved = true;\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n    });\r\n\r\n    return lockAchieved;\r\n  }\r\n\r\n  /**\r\n   * Set the anchor handler callback.\r\n   * @param {Function} handler - Function to handle incoming anchors\r\n   */\r\n  setAnchorHandler(handler) {\r\n    this._handleIncomingAnchor = handler;\r\n  }\r\n}\r\n", "// kktp/protocol/sessions/sessionPersistence.js\r\n// IndexedDB persistence layer for KKTP sessions\r\n\r\nexport class SessionPersistence {\r\n  constructor({\r\n    dbName = \"KKTP_DB\",\r\n    version = 1,\r\n    sessionStore = \"sessions\",\r\n    snapshotStore = \"dashboard_snapshots\",\r\n    peerStore = \"peer_registry\",\r\n    metaStore = \"meta\",\r\n  } = {}) {\r\n    this.dbName = dbName;\r\n    this.version = version;\r\n    this.sessionStore = sessionStore;\r\n    this.snapshotStore = snapshotStore;\r\n    this.peerStore = peerStore;\r\n    this.metaStore = metaStore;\r\n    this._dbPromise = null;\r\n    this._recreatedOnce = false;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Peer Registry: Per-contact baseIndex allocation with PFS\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Upsert a peer record (keyed by peerPubSig).\r\n   * @param {Object} record - { peerPubSig, baseIndex, usedBranches: [], createdAt, updatedAt }\r\n   */\r\n  async upsertPeerRecord(record) {\r\n    if (typeof indexedDB === \"undefined\" || !record?.peerPubSig) return false;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.peerStore, \"readwrite\");\r\n      const store = tx.objectStore(this.peerStore);\r\n      store.put({ ...record, updatedAt: Date.now() });\r\n      tx.oncomplete = () => resolve(true);\r\n      tx.onerror = () => reject(tx.error);\r\n      tx.onabort = () => reject(tx.error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get a peer record by peerPubSig.\r\n   */\r\n  async getPeerRecord(peerPubSig) {\r\n    if (typeof indexedDB === \"undefined\" || !peerPubSig) return null;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.peerStore, \"readonly\");\r\n      const store = tx.objectStore(this.peerStore);\r\n      const req = store.get(peerPubSig);\r\n      req.onsuccess = () => resolve(req.result || null);\r\n      req.onerror = () => reject(req.error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get all peer records.\r\n   */\r\n  async getAllPeerRecords() {\r\n    if (typeof indexedDB === \"undefined\") return [];\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.peerStore, \"readonly\");\r\n      const store = tx.objectStore(this.peerStore);\r\n      const req = store.getAll();\r\n      req.onsuccess = () => resolve(req.result || []);\r\n      req.onerror = () => reject(req.error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Mark a branch index as \"used\" for PFS (never reuse).\r\n   * @param {string} peerPubSig\r\n   * @param {number} branchIndex - The TX or RX index used\r\n   */\r\n  async markPeerBranchUsed(peerPubSig, branchIndex) {\r\n    if (!peerPubSig || branchIndex == null) return false;\r\n    const record = await this.getPeerRecord(peerPubSig);\r\n    if (!record) return false;\r\n    const usedBranches = new Set(record.usedBranches || []);\r\n    usedBranches.add(branchIndex);\r\n    record.usedBranches = [...usedBranches];\r\n    return await this.upsertPeerRecord(record);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Meta Store: Global counters (e.g., nextBaseIndex)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Get a meta value by key.\r\n   */\r\n  async getMeta(key) {\r\n    if (typeof indexedDB === \"undefined\" || !key) return null;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.metaStore, \"readonly\");\r\n      const store = tx.objectStore(this.metaStore);\r\n      const req = store.get(key);\r\n      req.onsuccess = () => resolve(req.result?.value ?? null);\r\n      req.onerror = () => reject(req.error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set a meta value by key.\r\n   */\r\n  async setMeta(key, value) {\r\n    if (typeof indexedDB === \"undefined\" || !key) return false;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.metaStore, \"readwrite\");\r\n      const store = tx.objectStore(this.metaStore);\r\n      store.put({ key, value, updatedAt: Date.now() });\r\n      tx.oncomplete = () => resolve(true);\r\n      tx.onerror = () => reject(tx.error);\r\n      tx.onabort = () => reject(tx.error);\r\n    });\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Session Resume Records\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async putResumeRecord(record) {\r\n    if (typeof indexedDB === \"undefined\") return false;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.sessionStore, \"readwrite\");\r\n      const store = tx.objectStore(this.sessionStore);\r\n      store.put(record);\r\n\r\n      tx.oncomplete = () => resolve(true);\r\n      tx.onerror = () => reject(tx.error);\r\n      tx.onabort = () => reject(tx.error);\r\n    });\r\n  }\r\n\r\n  async getResumeRecord(prefix, sid) {\r\n    if (typeof indexedDB === \"undefined\" || !sid) return null;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.sessionStore, \"readonly\");\r\n      const store = tx.objectStore(this.sessionStore);\r\n      const req = store.get(sid);\r\n\r\n      req.onsuccess = () => {\r\n        const rec = req.result;\r\n        if (rec && rec.prefix === prefix) resolve(rec);\r\n        else resolve(null);\r\n      };\r\n      req.onerror = () => reject(req.error);\r\n    });\r\n  }\r\n\r\n  async deleteResumeRecord(sid) {\r\n    if (typeof indexedDB === \"undefined\" || !sid) return false;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.sessionStore, \"readwrite\");\r\n      const store = tx.objectStore(this.sessionStore);\r\n      store.delete(sid);\r\n\r\n      tx.oncomplete = () => resolve(true);\r\n      tx.onerror = () => reject(tx.error);\r\n      tx.onabort = () => reject(tx.error);\r\n    });\r\n  }\r\n\r\n  async findLatestResumeRecord(prefix) {\r\n    if (typeof indexedDB === \"undefined\") return null;\r\n    const db = await this._openDb();\r\n    return await new Promise((resolve, reject) => {\r\n      const tx = db.transaction(this.sessionStore, \"readonly\");\r\n      const store = tx.objectStore(this.sessionStore);\r\n      const index = store.index(\"prefix\");\r\n\r\n      let best = null;\r\n      const req = index.openCursor(IDBKeyRange.only(prefix));\r\n\r\n      req.onsuccess = () => {\r\n        const cursor = req.result;\r\n        if (!cursor) {\r\n          resolve(best);\r\n          return;\r\n        }\r\n\r\n        const rec = cursor.value;\r\n        if (rec && (!best || (rec.savedAt || 0) > (best.savedAt || 0))) {\r\n          best = rec;\r\n        }\r\n\r\n        cursor.continue();\r\n      };\r\n\r\n      req.onerror = () => reject(req.error);\r\n    });\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // IndexedDB Management\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async _openDb() {\r\n    if (this._dbPromise) return this._dbPromise;\r\n\r\n    this._dbPromise = new Promise((resolve, reject) => {\r\n      const request = indexedDB.open(this.dbName, this.version);\r\n\r\n      request.onupgradeneeded = (event) => {\r\n        const db = request.result;\r\n        const oldVersion = event.oldVersion || 0;\r\n\r\n        // Version 1 stores\r\n        if (!db.objectStoreNames.contains(this.sessionStore)) {\r\n          const store = db.createObjectStore(this.sessionStore, {\r\n            keyPath: \"sid\",\r\n          });\r\n          store.createIndex(\"prefix\", \"prefix\", { unique: false });\r\n          store.createIndex(\"savedAt\", \"savedAt\", { unique: false });\r\n        }\r\n        if (\r\n          this.snapshotStore &&\r\n          !db.objectStoreNames.contains(this.snapshotStore)\r\n        ) {\r\n          const snapshotStore = db.createObjectStore(this.snapshotStore, {\r\n            keyPath: \"id\",\r\n          });\r\n          snapshotStore.createIndex(\"savedAt\", \"savedAt\", { unique: false });\r\n        }\r\n\r\n        // Version 2 stores: peer_registry + meta\r\n        if (oldVersion < 2) {\r\n          if (\r\n            this.peerStore &&\r\n            !db.objectStoreNames.contains(this.peerStore)\r\n          ) {\r\n            const peerStore = db.createObjectStore(this.peerStore, {\r\n              keyPath: \"peerPubSig\",\r\n            });\r\n            peerStore.createIndex(\"baseIndex\", \"baseIndex\", { unique: true });\r\n            peerStore.createIndex(\"updatedAt\", \"updatedAt\", { unique: false });\r\n          }\r\n          if (\r\n            this.metaStore &&\r\n            !db.objectStoreNames.contains(this.metaStore)\r\n          ) {\r\n            db.createObjectStore(this.metaStore, { keyPath: \"key\" });\r\n          }\r\n        }\r\n      };\r\n\r\n      request.onsuccess = () => {\r\n        const db = request.result;\r\n        const hasPeers = db.objectStoreNames.contains(this.peerStore);\r\n        const hasMeta = db.objectStoreNames.contains(this.metaStore);\r\n\r\n        if ((!hasPeers || !hasMeta) && !this._recreatedOnce) {\r\n          this._recreatedOnce = true;\r\n          db.close();\r\n          const del = indexedDB.deleteDatabase(this.dbName);\r\n          del.onsuccess = () => {\r\n            this._dbPromise = null;\r\n            this._openDb().then(resolve).catch(reject);\r\n          };\r\n          del.onerror = () => reject(del.error);\r\n          return;\r\n        }\r\n\r\n        resolve(db);\r\n      };\r\n      request.onerror = () => reject(request.error);\r\n    });\r\n\r\n    return this._dbPromise;\r\n  }\r\n}\r\n", "/**\r\n * LobbyCodec - Encryption/Decryption for group messages\r\n *\r\n * Uses XChaCha20-Poly1305 with AAD for authenticated encryption:\r\n * - AAD = groupMailboxId || keyVersion (domain separation)\r\n * - Nonce: 24 bytes random per message\r\n *\r\n * @module kktp/lobby/lobbyCodec\r\n */\r\n\r\nimport { xchacha20poly1305 } from \"https://esm.sh/v135/@noble/ciphers/chacha\";\r\n\r\n/**\r\n * @typedef {Object} EncryptedGroupMessage\r\n * @property {string} type - Always \"group_message\"\r\n * @property {number} version - Protocol version\r\n * @property {string} senderPubSig - Sender's public signing key\r\n * @property {number} keyVersion - Key version used for encryption\r\n * @property {string} nonce - 24-byte nonce (hex)\r\n * @property {string} ciphertext - Encrypted message (hex)\r\n * @property {number} timestamp - Message timestamp\r\n */\r\n\r\nexport class LobbyCodec {\r\n  constructor() {\r\n    this.version = 1;\r\n  }\r\n\r\n  /**\r\n   * Encrypt a message for the group\r\n   * @param {string} plaintext - Message to encrypt\r\n   * @param {Uint8Array} groupKey - 32-byte group key\r\n   * @param {string} groupMailboxId - Group mailbox ID (for AAD)\r\n   * @param {number} keyVersion - Current key version (for AAD)\r\n   * @param {string} senderPubSig - Sender's public signing key\r\n   * @returns {Promise<EncryptedGroupMessage>}\r\n   */\r\n  async encryptGroupMessage(\r\n    plaintext,\r\n    groupKey,\r\n    groupMailboxId,\r\n    keyVersion,\r\n    senderPubSig,\r\n  ) {\r\n    // Validate key\r\n    if (!(groupKey instanceof Uint8Array) || groupKey.length !== 32) {\r\n      throw new Error(\"Group key must be 32 bytes\");\r\n    }\r\n\r\n    // Generate random nonce (24 bytes for XChaCha20)\r\n    const nonce = crypto.getRandomValues(new Uint8Array(24));\r\n\r\n    // Construct AAD for domain separation\r\n    // AAD = groupMailboxId || keyVersion\r\n    const aad = this._constructAAD(groupMailboxId, keyVersion);\r\n\r\n    // Encrypt\r\n    const chacha = xchacha20poly1305(groupKey, nonce, aad);\r\n    const plaintextBytes = new TextEncoder().encode(plaintext);\r\n    const ciphertext = chacha.encrypt(plaintextBytes);\r\n\r\n    return {\r\n      type: \"group_message\",\r\n      version: this.version,\r\n      senderPubSig,\r\n      keyVersion,\r\n      nonce: this._bytesToHex(nonce),\r\n      ciphertext: this._bytesToHex(ciphertext),\r\n      timestamp: Date.now(),\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Decrypt a group message\r\n   * @param {EncryptedGroupMessage} encrypted - Encrypted message object\r\n   * @param {Uint8Array} groupKey - 32-byte group key\r\n   * @param {string} groupMailboxId - Group mailbox ID (for AAD)\r\n   * @returns {Promise<string>} - Decrypted plaintext\r\n   */\r\n  async decryptGroupMessage(encrypted, groupKey, groupMailboxId) {\r\n    // Validate key\r\n    if (!(groupKey instanceof Uint8Array) || groupKey.length !== 32) {\r\n      throw new Error(\"Group key must be 32 bytes\");\r\n    }\r\n\r\n    // Validate message structure\r\n    if (\r\n      !encrypted ||\r\n      encrypted.type !== \"group_message\" ||\r\n      !encrypted.nonce ||\r\n      !encrypted.ciphertext\r\n    ) {\r\n      throw new Error(\"Invalid encrypted message structure\");\r\n    }\r\n\r\n    // Reconstruct AAD\r\n    const aad = this._constructAAD(groupMailboxId, encrypted.keyVersion);\r\n\r\n    // Parse nonce and ciphertext\r\n    const nonce = this._hexToBytes(encrypted.nonce);\r\n    const ciphertext = this._hexToBytes(encrypted.ciphertext);\r\n\r\n    if (nonce.length !== 24) {\r\n      throw new Error(\"Invalid nonce length\");\r\n    }\r\n\r\n    // Decrypt\r\n    const chacha = xchacha20poly1305(groupKey, nonce, aad);\r\n    const plaintext = chacha.decrypt(ciphertext);\r\n\r\n    return new TextDecoder().decode(plaintext);\r\n  }\r\n\r\n  /**\r\n   * Construct AAD for authenticated encryption\r\n   * Format: groupMailboxId (raw bytes) || keyVersion (u32 BE)\r\n   * @private\r\n   */\r\n  _constructAAD(groupMailboxId, keyVersion) {\r\n    const mailboxBytes = this._hexToBytes(groupMailboxId);\r\n    const versionBytes = new Uint8Array(4);\r\n    new DataView(versionBytes.buffer).setUint32(0, keyVersion, false); // big-endian\r\n\r\n    const aad = new Uint8Array(mailboxBytes.length + 4);\r\n    aad.set(mailboxBytes, 0);\r\n    aad.set(versionBytes, mailboxBytes.length);\r\n\r\n    return aad;\r\n  }\r\n\r\n  /**\r\n   * Convert bytes to hex string\r\n   * @private\r\n   */\r\n  _bytesToHex(bytes) {\r\n    return Array.from(bytes)\r\n      .map((b) => b.toString(16).padStart(2, \"0\"))\r\n      .join(\"\");\r\n  }\r\n\r\n  /**\r\n   * Convert hex string to bytes\r\n   * @private\r\n   */\r\n  _hexToBytes(hex) {\r\n    if (typeof hex !== \"string\" || hex.length % 2 !== 0) {\r\n      throw new Error(\"Invalid hex string\");\r\n    }\r\n    const bytes = new Uint8Array(hex.length / 2);\r\n    for (let i = 0; i < hex.length; i += 2) {\r\n      bytes[i / 2] = parseInt(hex.substring(i, i + 2), 16);\r\n    }\r\n    return bytes;\r\n  }\r\n}\r\n", "/**\r\n * LobbyMessageHandler - Routes incoming messages to appropriate lobby handlers\r\n *\r\n * Responsible for:\r\n * - Parsing incoming lobby-related messages\r\n * - Routing to appropriate LobbyManager methods\r\n * - Handling both 1:1 DM messages and group messages\r\n *\r\n * @module kktp/lobby/lobbyMessageHandler\r\n */\r\n\r\nimport { Logger, LogModule } from \"../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.lobbyMessageHandler);\r\n\r\nconst LOBBY_MESSAGE_TYPES = {\r\n  JOIN_REQUEST: \"lobby_join_request\",\r\n  JOIN_RESPONSE: \"lobby_join_response\",\r\n  MEMBER_EVENT: \"lobby_member_event\",\r\n  KEY_ROTATION: \"key_rotation\",\r\n  LOBBY_LEAVE: \"lobby_leave\",\r\n  LOBBY_KICKED: \"lobby_kicked\",\r\n  LOBBY_CLOSE: \"lobby_close\",\r\n  GROUP_MESSAGE: \"group_message\",\r\n};\r\n\r\nexport class LobbyMessageHandler {\r\n  /**\r\n   * @param {import('./lobbyManager.js').LobbyManager} lobbyManager\r\n   */\r\n  constructor(lobbyManager) {\r\n    this.lobbyManager = lobbyManager;\r\n  }\r\n\r\n  /**\r\n   * Process an incoming DM message that may be lobby-related\r\n   * @param {string} dmMailboxId - The DM mailbox ID\r\n   * @param {string} plaintextJson - The decrypted message content\r\n   * @returns {boolean} - True if message was handled as lobby message\r\n   */\r\n  processDMMessage(dmMailboxId, plaintextJson) {\r\n    let msg;\r\n    try {\r\n      msg = JSON.parse(plaintextJson);\r\n    } catch {\r\n      // Not JSON, not a lobby message\r\n      return false;\r\n    }\r\n\r\n    if (!msg || typeof msg.type !== \"string\") {\r\n      return false;\r\n    }\r\n\r\n    log.info(\"LobbyMessageHandler: Processing DM message\", {\r\n      dmMailboxId: dmMailboxId?.slice(0, 16),\r\n      msgType: msg.type,\r\n      lobbyState: this.lobbyManager?.state,\r\n      isHost: this.lobbyManager?.isHost ?? false,\r\n    });\r\n\r\n    // Route based on message type\r\n    switch (msg.type) {\r\n      case LOBBY_MESSAGE_TYPES.JOIN_REQUEST:\r\n        log.info(\"LobbyMessageHandler: Routing JOIN_REQUEST\", {\r\n          pubSig: msg.pubSig?.slice(0, 16),\r\n          displayName: msg.displayName,\r\n          lobbyId: msg.lobbyId?.slice(0, 16),\r\n        });\r\n        this._handleJoinRequest(dmMailboxId, msg);\r\n        return true;\r\n\r\n      case LOBBY_MESSAGE_TYPES.JOIN_RESPONSE:\r\n        log.info(\"LobbyMessageHandler: Routing JOIN_RESPONSE\", {\r\n          accepted: msg.accepted,\r\n          reason: msg.reason,\r\n          hasGroupKey: !!msg.groupKey,\r\n          keyVersion: msg.keyVersion,\r\n          memberCount: msg.members?.length,\r\n        });\r\n        this._handleJoinResponse(dmMailboxId, msg);\r\n        return true;\r\n\r\n      case LOBBY_MESSAGE_TYPES.MEMBER_EVENT:\r\n        log.info(\"LobbyMessageHandler: Routing MEMBER_EVENT\", {\r\n          eventType: msg.eventType,\r\n          pubSig: msg.pubSig?.slice(0, 16),\r\n        });\r\n        this._handleMemberEvent(msg);\r\n        return true;\r\n\r\n      case LOBBY_MESSAGE_TYPES.KEY_ROTATION:\r\n        log.info(\"LobbyMessageHandler: Routing KEY_ROTATION\", {\r\n          keyVersion: msg.keyVersion,\r\n          reason: msg.reason,\r\n        });\r\n        this._handleKeyRotation(msg);\r\n        return true;\r\n\r\n      case LOBBY_MESSAGE_TYPES.LOBBY_LEAVE:\r\n        log.info(\"LobbyMessageHandler: Routing LOBBY_LEAVE\", {\r\n          pubSig: msg.pubSig?.slice(0, 16),\r\n          reason: msg.reason,\r\n        });\r\n        this._handleMemberLeave(dmMailboxId, msg);\r\n        return true;\r\n\r\n      case LOBBY_MESSAGE_TYPES.LOBBY_KICKED:\r\n        log.info(\"LobbyMessageHandler: Routing LOBBY_KICKED\", {\r\n          reason: msg.reason,\r\n        });\r\n        this._handleKicked(msg);\r\n        return true;\r\n\r\n      case LOBBY_MESSAGE_TYPES.LOBBY_CLOSE:\r\n        log.info(\"LobbyMessageHandler: Routing LOBBY_CLOSE\", {\r\n          reason: msg.reason,\r\n        });\r\n        this._handleLobbyClose(msg);\r\n        return true;\r\n\r\n      default:\r\n        log.debug(\"LobbyMessageHandler: Unrecognized lobby message type\", {\r\n          type: msg.type,\r\n        });\r\n        return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Process an incoming group message from the DAG\r\n   * Handles both encrypted chat messages and unencrypted control messages.\r\n   * @param {string} groupMailboxId - The group mailbox ID\r\n   * @param {Object} payload - The group message object (encrypted or control)\r\n   * @returns {boolean} - True if message was handled\r\n   */\r\n  async processGroupMessage(groupMailboxId, payload) {\r\n    // Verify this is for our lobby\r\n    if (!this.lobbyManager.lobby) {\r\n      return false;\r\n    }\r\n\r\n    if (groupMailboxId !== this.lobbyManager.lobby.groupMailboxId) {\r\n      return false;\r\n    }\r\n\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    // Check for unencrypted control messages (lobby_close, etc.)\r\n    // These are broadcast by the host as single-shot notifications\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    if (payload && typeof payload.type === \"string\") {\r\n      switch (payload.type) {\r\n        case LOBBY_MESSAGE_TYPES.LOBBY_CLOSE:\r\n          log.info(\"LobbyMessageHandler: Received LOBBY_CLOSE via group mailbox\", {\r\n            lobbyId: payload.lobbyId?.slice(0, 16),\r\n            reason: payload.reason,\r\n          });\r\n          await this._handleLobbyClose(payload);\r\n          return true;\r\n\r\n        case LOBBY_MESSAGE_TYPES.LOBBY_KICKED:\r\n          // Could support targeted kick via group in future\r\n          log.info(\"LobbyMessageHandler: Received LOBBY_KICKED via group mailbox\", {\r\n            reason: payload.reason,\r\n          });\r\n          await this._handleKicked(payload);\r\n          return true;\r\n\r\n        default:\r\n          // Not a recognized control message, fall through to encrypted handling\r\n          break;\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    // Encrypted group chat message\r\n    // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n    await this.lobbyManager.processGroupMessage(payload);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Check if a raw payload is a group message for our lobby\r\n   * @param {string} rawPayload - Raw KKTP payload\r\n   * @returns {{ isGroup: boolean, groupMailboxId?: string, encrypted?: Object }}\r\n   */\r\n  parseGroupPayload(rawPayload) {\r\n    if (!rawPayload.startsWith(\"KKTP:GROUP:\")) {\r\n      return { isGroup: false };\r\n    }\r\n\r\n    // Format: KKTP:GROUP:{groupMailboxId}:{json}\r\n    const parts = rawPayload.split(\":\");\r\n    if (parts.length < 4) {\r\n      return { isGroup: false };\r\n    }\r\n\r\n    const groupMailboxId = parts[2];\r\n    const jsonStr = parts.slice(3).join(\":\");\r\n\r\n    try {\r\n      const encrypted = JSON.parse(jsonStr);\r\n      return { isGroup: true, groupMailboxId, encrypted };\r\n    } catch {\r\n      return { isGroup: false };\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Private Handlers\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async _handleJoinRequest(dmMailboxId, msg) {\r\n    try {\r\n      await this.lobbyManager.handleJoinRequest(dmMailboxId, msg);\r\n    } catch (err) {\r\n      log.error(\"LobbyMessageHandler: Failed to handle join request\", err);\r\n    }\r\n  }\r\n\r\n  async _handleJoinResponse(dmMailboxId, msg) {\r\n    try {\r\n      await this.lobbyManager.handleJoinResponse(dmMailboxId, msg);\r\n    } catch (err) {\r\n      log.error(\"LobbyMessageHandler: Failed to handle join response\", err);\r\n    }\r\n  }\r\n\r\n  _handleMemberEvent(msg) {\r\n    try {\r\n      this.lobbyManager.handleMemberEvent(msg);\r\n    } catch (err) {\r\n      log.error(\"LobbyMessageHandler: Failed to handle member event\", err);\r\n    }\r\n  }\r\n\r\n  _handleKeyRotation(msg) {\r\n    try {\r\n      this.lobbyManager.handleKeyRotation(msg);\r\n    } catch (err) {\r\n      log.error(\"LobbyMessageHandler: Failed to handle key rotation\", err);\r\n    }\r\n  }\r\n\r\n  async _handleMemberLeave(dmMailboxId, msg) {\r\n    // Host receives this when a member leaves voluntarily\r\n    if (!this.lobbyManager.isHost) return;\r\n\r\n    const { pubSig, reason } = msg;\r\n    if (!pubSig) return;\r\n\r\n    const member = this.lobbyManager.lobby?.members.get(pubSig);\r\n    if (!member) return;\r\n\r\n    // Remove from roster\r\n    this.lobbyManager.lobby.members.delete(pubSig);\r\n\r\n    // Notify other members\r\n    try {\r\n      await this.lobbyManager._broadcastMemberEvent(\"leave\", { pubSig, reason });\r\n    } catch (err) {\r\n      log.warn(\"LobbyMessageHandler: Failed to broadcast member leave\", err);\r\n    }\r\n\r\n    // Emit event\r\n    this.lobbyManager._onMemberLeave?.(pubSig, reason || \"Left voluntarily\");\r\n\r\n    log.info(\"LobbyMessageHandler: Member left\", {\r\n      pubSig: pubSig.slice(0, 16),\r\n      reason,\r\n    });\r\n  }\r\n\r\n  async _handleKicked(msg) {\r\n    try {\r\n      await this.lobbyManager.handleKicked(msg);\r\n    } catch (err) {\r\n      log.error(\"LobbyMessageHandler: Failed to handle kicked\", err);\r\n    }\r\n  }\r\n\r\n  async _handleLobbyClose(msg) {\r\n    try {\r\n      await this.lobbyManager.handleLobbyClose(msg);\r\n    } catch (err) {\r\n      log.error(\"LobbyMessageHandler: Failed to handle lobby close\", err);\r\n    }\r\n  }\r\n}\r\n\r\nexport { LOBBY_MESSAGE_TYPES };\r\n", "/**\r\n * LobbySchemas - Validation functions for lobby protocol messages\r\n *\r\n * Provides runtime validation for all lobby message types to ensure\r\n * protocol compliance and prevent malformed data from causing issues.\r\n *\r\n * @module kktp/lobby/lobbySchemas\r\n */\r\n\r\n/**\r\n * Custom error for lobby validation failures\r\n */\r\nexport class LobbyValidationError extends Error {\r\n  constructor(message, field) {\r\n    super(`Lobby validation failed: ${message}${field ? ` at '${field}'` : \"\"}`);\r\n    this.name = \"LobbyValidationError\";\r\n    this.field = field;\r\n  }\r\n}\r\n\r\n/**\r\n * Assert a condition or throw validation error\r\n * @private\r\n */\r\nfunction assert(condition, message, field) {\r\n  if (!condition) {\r\n    throw new LobbyValidationError(message, field);\r\n  }\r\n}\r\n\r\n/**\r\n * Check if value is a non-empty string\r\n * @private\r\n */\r\nfunction isNonEmptyString(value) {\r\n  return typeof value === \"string\" && value.length > 0;\r\n}\r\n\r\n/**\r\n * Check if value is a positive integer\r\n * @private\r\n */\r\nfunction isPositiveInt(value) {\r\n  return Number.isInteger(value) && value > 0;\r\n}\r\n\r\n/**\r\n * Check if value is a valid hex string\r\n * @private\r\n */\r\nfunction isHexString(value) {\r\n  return typeof value === \"string\" && /^[0-9a-f]+$/i.test(value);\r\n}\r\n\r\n/**\r\n * Validate lobby meta fields in discovery anchor\r\n * @param {Object} meta - Discovery meta object\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateLobbyMeta(meta) {\r\n  assert(meta && typeof meta === \"object\", \"Meta must be an object\", \"meta\");\r\n  assert(isNonEmptyString(meta.game), \"game must be a non-empty string\", \"meta.game\");\r\n  assert(isNonEmptyString(meta.version), \"version must be a non-empty string\", \"meta.version\");\r\n  assert(\r\n    isPositiveInt(meta.expected_uptime_seconds),\r\n    \"expected_uptime_seconds must be a positive integer\",\r\n    \"meta.expected_uptime_seconds\",\r\n  );\r\n  assert(meta.lobby === true, \"lobby must be true for lobby discovery\", \"meta.lobby\");\r\n  assert(\r\n    isNonEmptyString(meta.lobby_name),\r\n    \"lobby_name must be a non-empty string\",\r\n    \"meta.lobby_name\",\r\n  );\r\n  assert(\r\n    isPositiveInt(meta.max_members),\r\n    \"max_members must be a positive integer\",\r\n    \"meta.max_members\",\r\n  );\r\n}\r\n\r\n/**\r\n * Validate a join request message\r\n * @param {Object} request - Join request message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateJoinRequest(request) {\r\n  assert(request && typeof request === \"object\", \"Request must be an object\");\r\n  assert(\r\n    request.type === \"lobby_join_request\",\r\n    \"type must be 'lobby_join_request'\",\r\n    \"type\",\r\n  );\r\n  assert(isPositiveInt(request.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(request.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n  assert(isHexString(request.pubSig), \"pubSig must be a hex string\", \"pubSig\");\r\n  assert(\r\n    isNonEmptyString(request.displayName),\r\n    \"displayName must be a non-empty string\",\r\n    \"displayName\",\r\n  );\r\n}\r\n\r\n/**\r\n * Validate a join response message\r\n * @param {Object} response - Join response message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateJoinResponse(response) {\r\n  assert(response && typeof response === \"object\", \"Response must be an object\");\r\n  assert(\r\n    response.type === \"lobby_join_response\",\r\n    \"type must be 'lobby_join_response'\",\r\n    \"type\",\r\n  );\r\n  assert(isPositiveInt(response.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(response.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n  assert(typeof response.accepted === \"boolean\", \"accepted must be a boolean\", \"accepted\");\r\n\r\n  // If accepted, must include additional fields\r\n  if (response.accepted) {\r\n    assert(isHexString(response.groupKey), \"groupKey must be a hex string\", \"groupKey\");\r\n    assert(\r\n      response.groupKey.length === 64,\r\n      \"groupKey must be 32 bytes (64 hex chars)\",\r\n      \"groupKey\",\r\n    );\r\n    assert(\r\n      isPositiveInt(response.keyVersion),\r\n      \"keyVersion must be a positive integer\",\r\n      \"keyVersion\",\r\n    );\r\n    assert(\r\n      isHexString(response.groupMailboxId),\r\n      \"groupMailboxId must be a hex string\",\r\n      \"groupMailboxId\",\r\n    );\r\n    assert(Array.isArray(response.members), \"members must be an array\", \"members\");\r\n  }\r\n}\r\n\r\n/**\r\n * Validate a group message\r\n * @param {Object} message - Encrypted group message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateGroupMessage(message) {\r\n  assert(message && typeof message === \"object\", \"Message must be an object\");\r\n  assert(message.type === \"group_message\", \"type must be 'group_message'\", \"type\");\r\n  assert(isPositiveInt(message.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(message.senderPubSig), \"senderPubSig must be a hex string\", \"senderPubSig\");\r\n  assert(\r\n    isPositiveInt(message.keyVersion),\r\n    \"keyVersion must be a positive integer\",\r\n    \"keyVersion\",\r\n  );\r\n  assert(isHexString(message.nonce), \"nonce must be a hex string\", \"nonce\");\r\n  assert(message.nonce.length === 48, \"nonce must be 24 bytes (48 hex chars)\", \"nonce\");\r\n  assert(isHexString(message.ciphertext), \"ciphertext must be a hex string\", \"ciphertext\");\r\n}\r\n\r\n/**\r\n * Validate a key rotation message\r\n * @param {Object} rotation - Key rotation message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateKeyRotation(rotation) {\r\n  assert(rotation && typeof rotation === \"object\", \"Rotation must be an object\");\r\n  assert(rotation.type === \"key_rotation\", \"type must be 'key_rotation'\", \"type\");\r\n  assert(isPositiveInt(rotation.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(rotation.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n  assert(\r\n    isPositiveInt(rotation.keyVersion),\r\n    \"keyVersion must be a positive integer\",\r\n    \"keyVersion\",\r\n  );\r\n  assert(isHexString(rotation.groupKey), \"groupKey must be a hex string\", \"groupKey\");\r\n  assert(\r\n    rotation.groupKey.length === 64,\r\n    \"groupKey must be 32 bytes (64 hex chars)\",\r\n    \"groupKey\",\r\n  );\r\n}\r\n\r\n/**\r\n * Validate a member event message\r\n * @param {Object} event - Member event message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateMemberEvent(event) {\r\n  assert(event && typeof event === \"object\", \"Event must be an object\");\r\n  assert(\r\n    event.type === \"lobby_member_event\",\r\n    \"type must be 'lobby_member_event'\",\r\n    \"type\",\r\n  );\r\n  assert(isPositiveInt(event.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(event.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n  assert(\r\n    event.eventType === \"join\" || event.eventType === \"leave\",\r\n    \"eventType must be 'join' or 'leave'\",\r\n    \"eventType\",\r\n  );\r\n  assert(isHexString(event.pubSig), \"pubSig must be a hex string\", \"pubSig\");\r\n\r\n  if (event.eventType === \"join\") {\r\n    assert(\r\n      isNonEmptyString(event.displayName),\r\n      \"displayName must be a non-empty string for join events\",\r\n      \"displayName\",\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Validate a leave message\r\n * @param {Object} leave - Leave message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateLeaveMessage(leave) {\r\n  assert(leave && typeof leave === \"object\", \"Leave must be an object\");\r\n  assert(leave.type === \"lobby_leave\", \"type must be 'lobby_leave'\", \"type\");\r\n  assert(isPositiveInt(leave.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(leave.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n  assert(isHexString(leave.pubSig), \"pubSig must be a hex string\", \"pubSig\");\r\n}\r\n\r\n/**\r\n * Validate a kick message\r\n * @param {Object} kick - Kick message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateKickMessage(kick) {\r\n  assert(kick && typeof kick === \"object\", \"Kick must be an object\");\r\n  assert(kick.type === \"lobby_kicked\", \"type must be 'lobby_kicked'\", \"type\");\r\n  assert(isPositiveInt(kick.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(kick.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n}\r\n\r\n/**\r\n * Validate a lobby close message\r\n * @param {Object} close - Close message\r\n * @throws {LobbyValidationError}\r\n */\r\nexport function validateCloseMessage(close) {\r\n  assert(close && typeof close === \"object\", \"Close must be an object\");\r\n  assert(close.type === \"lobby_close\", \"type must be 'lobby_close'\", \"type\");\r\n  assert(isPositiveInt(close.version), \"version must be a positive integer\", \"version\");\r\n  assert(isHexString(close.lobbyId), \"lobbyId must be a hex string\", \"lobbyId\");\r\n}\r\n\r\n/**\r\n * Check if a discovery anchor is a lobby\r\n * @param {Object} discovery - Discovery anchor\r\n * @returns {boolean}\r\n */\r\nexport function isLobbyDiscovery(discovery) {\r\n  return discovery?.meta?.lobby === true;\r\n}\r\n\r\n/**\r\n * Extract lobby info from a discovery anchor\r\n * @param {Object} discovery - Discovery anchor\r\n * @returns {Object|null} - Lobby info or null if not a lobby\r\n */\r\nexport function extractLobbyInfo(discovery) {\r\n  if (!isLobbyDiscovery(discovery)) return null;\r\n\r\n  return {\r\n    lobbyId: discovery.sid,\r\n    lobbyName: discovery.meta.lobby_name,\r\n    hostPubSig: discovery.pub_sig,\r\n    maxMembers: discovery.meta.max_members,\r\n    game: discovery.meta.game,\r\n    uptimeSeconds: discovery.meta.expected_uptime_seconds,\r\n  };\r\n}\r\n", "/**\r\n * LobbyContext - Context object creation and state initialization\r\n *\r\n * The ctx object is the shared state container passed to all lobby module functions.\r\n * LobbyManager holds the master state; modules operate on ctx references.\r\n *\r\n * @module kktp/lobby/parts/lobbyContext\r\n */\r\n\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyContext);\r\n\r\n/**\r\n * Lobby states\r\n */\r\nexport const LOBBY_STATES = {\r\n  IDLE: \"IDLE\",\r\n  HOSTING: \"HOSTING\",\r\n  JOINING: \"JOINING\",\r\n  MEMBER: \"MEMBER\",\r\n  CLOSED: \"CLOSED\",\r\n};\r\n\r\n/**\r\n * Member roles\r\n */\r\nexport const MEMBER_ROLES = {\r\n  HOST: \"host\",\r\n  MEMBER: \"member\",\r\n};\r\n\r\n/**\r\n * Protocol constants\r\n */\r\nexport const LOBBY_VERSION = 1;\r\nexport const LOBBY_DISCOVERY_PREFIX = \"KKTP:ANCHOR:\";\r\n\r\n/**\r\n * Default configuration values\r\n */\r\nexport const DEFAULT_CONFIG = {\r\n  maxMembers: 16,\r\n  keyRotationMs: 10 * 60 * 1000, // 10 minutes\r\n  autoAcceptJoins: true,\r\n  maxHistorySize: 1000,\r\n  dmBufferTtlMs: 30_000,\r\n  dmBufferMaxPerMailbox: 5,\r\n  dmBufferCleanupIntervalMs: 10_000,\r\n  futureBufferMaxSize: 20,\r\n  futureBufferTtlMs: 60_000,\r\n};\r\n\r\n/**\r\n * @typedef {Object} LobbyConfig\r\n * @property {number} maxMembers - Maximum members allowed\r\n * @property {number} keyRotationMs - Key rotation interval in ms\r\n * @property {boolean} autoAcceptJoins - Auto-accept join requests\r\n * @property {number} maxHistorySize - Max message history size\r\n * @property {number} dmBufferTtlMs - DM buffer TTL in ms\r\n * @property {number} dmBufferMaxPerMailbox - Max buffered DMs per mailbox\r\n * @property {number} dmBufferCleanupIntervalMs - DM buffer cleanup interval\r\n * @property {number} futureBufferMaxSize - Max future messages to buffer\r\n * @property {number} futureBufferTtlMs - Future message buffer TTL\r\n */\r\n\r\n/**\r\n * @typedef {Object} LobbyCallbacks\r\n * @property {function|null} onMemberJoin - Member join callback\r\n * @property {function|null} onMemberLeave - Member leave callback\r\n * @property {function|null} onGroupMessage - Group message callback\r\n * @property {function|null} onKeyRotation - Key rotation callback\r\n * @property {function|null} onLobbyClose - Lobby close callback\r\n * @property {function|null} onStateChange - State change callback\r\n * @property {function|null} onJoinRequest - Join request callback (host only)\r\n */\r\n\r\n/**\r\n * @typedef {Object} KeyVault\r\n * @property {{ key: Uint8Array, version: number }|null} current - Current key\r\n * @property {{ key: Uint8Array, version: number }|null} previous - Previous key (for late messages)\r\n */\r\n\r\n/**\r\n * @typedef {Object} LobbyContext\r\n * @property {Object} sm - Session manager\r\n * @property {Object} adapter - Blockchain adapter (sm.adapter shortcut)\r\n * @property {string} state - Current lobby state\r\n * @property {Object|null} lobby - Active lobby object\r\n * @property {KeyVault} keyVault - Key vault for current/previous keys\r\n * @property {Set<string>} subscriptions - Subscribed prefixes\r\n * @property {Array} messageHistory - Message history\r\n * @property {LobbyConfig} config - Configuration\r\n * @property {LobbyCallbacks} callbacks - Event callbacks\r\n * @property {Map} dmBuffer - DM message buffer\r\n * @property {Array} futureMessageBuffer - Future key version messages\r\n * @property {Map} pendingJoins - Pending join requests (host only)\r\n * @property {Array} joinRequestQueue - Join request queue\r\n * @property {boolean} isProcessingJoinQueue - Queue processing flag\r\n * @property {number|null} keyRotationTimer - Key rotation timer ID\r\n * @property {number|null} dmBufferCleanupTimer - DM buffer cleanup timer ID\r\n * @property {Object|null} pendingJoin - Pending join data (member only)\r\n * @property {string|null} pendingJoinDmMailboxId - Pending join DM mailbox\r\n * @property {string|null} hostDmMailboxId - Host DM mailbox (member only)\r\n */\r\n\r\n/**\r\n * Create default callbacks object\r\n * @returns {LobbyCallbacks}\r\n */\r\nexport function createDefaultCallbacks() {\r\n  return {\r\n    onMemberJoin: null,\r\n    onMemberLeave: null,\r\n    onGroupMessage: null,\r\n    onKeyRotation: null,\r\n    onLobbyClose: null,\r\n    onStateChange: null,\r\n    onJoinRequest: null,\r\n  };\r\n}\r\n\r\n/**\r\n * Create default key vault\r\n * @returns {KeyVault}\r\n */\r\nexport function createDefaultKeyVault() {\r\n  return {\r\n    current: null,\r\n    previous: null,\r\n  };\r\n}\r\n\r\n/**\r\n * Create a lobby context object\r\n * @param {Object} sessionManager - KKTP session manager\r\n * @param {Partial<LobbyConfig>} [options] - Configuration overrides\r\n * @returns {LobbyContext}\r\n */\r\nexport function createLobbyContext(sessionManager, options = {}) {\r\n  const config = {\r\n    ...DEFAULT_CONFIG,\r\n    maxMembers: options.maxMembers ?? DEFAULT_CONFIG.maxMembers,\r\n    keyRotationMs: options.keyRotationMs ?? DEFAULT_CONFIG.keyRotationMs,\r\n    autoAcceptJoins: options.autoAcceptJoins ?? DEFAULT_CONFIG.autoAcceptJoins,\r\n  };\r\n\r\n  return {\r\n    // Core dependencies\r\n    sm: sessionManager,\r\n    adapter: sessionManager?.adapter ?? null,\r\n\r\n    // State\r\n    state: LOBBY_STATES.IDLE,\r\n    lobby: null,\r\n\r\n    // Key management\r\n    keyVault: createDefaultKeyVault(),\r\n\r\n    // Subscriptions\r\n    subscriptions: new Set(),\r\n\r\n    // Message handling\r\n    messageHistory: [],\r\n    futureMessageBuffer: [],\r\n\r\n    // DM buffer for race conditions\r\n    dmBuffer: new Map(),\r\n    dmBufferCleanupTimer: null,\r\n\r\n    // Join management\r\n    pendingJoins: new Map(),\r\n    joinRequestQueue: [],\r\n    isProcessingJoinQueue: false,\r\n    pendingJoin: null,\r\n    pendingJoinDmMailboxId: null,\r\n    hostDmMailboxId: null,\r\n\r\n    // Timers\r\n    keyRotationTimer: null,\r\n\r\n    // Configuration\r\n    config,\r\n\r\n    // Callbacks\r\n    callbacks: createDefaultCallbacks(),\r\n  };\r\n}\r\n\r\n/**\r\n * Reset lobby context to idle state\r\n * Clears all lobby-specific state while preserving configuration and callbacks.\r\n * @param {LobbyContext} ctx\r\n */\r\nexport function resetLobbyContext(ctx) {\r\n  // Stop timers\r\n  if (ctx.keyRotationTimer) {\r\n    clearInterval(ctx.keyRotationTimer);\r\n    ctx.keyRotationTimer = null;\r\n  }\r\n  if (ctx.dmBufferCleanupTimer) {\r\n    clearInterval(ctx.dmBufferCleanupTimer);\r\n    ctx.dmBufferCleanupTimer = null;\r\n  }\r\n\r\n  // Clear state\r\n  ctx.state = LOBBY_STATES.IDLE;\r\n  ctx.lobby = null;\r\n  ctx.keyVault = createDefaultKeyVault();\r\n  ctx.subscriptions.clear();\r\n  ctx.messageHistory = [];\r\n  ctx.futureMessageBuffer = [];\r\n  ctx.dmBuffer.clear();\r\n  ctx.pendingJoins.clear();\r\n  ctx.joinRequestQueue = [];\r\n  ctx.isProcessingJoinQueue = false;\r\n  ctx.pendingJoin = null;\r\n  ctx.pendingJoinDmMailboxId = null;\r\n  ctx.hostDmMailboxId = null;\r\n}\r\n\r\n/**\r\n * Set lobby state with callback notification\r\n * @param {LobbyContext} ctx\r\n * @param {string} newState - New state from LOBBY_STATES\r\n */\r\nexport function setState(ctx, newState) {\r\n  const oldState = ctx.state;\r\n  if (oldState === newState) return;\r\n\r\n  ctx.state = newState;\r\n\r\n  log.info(\"KKTP Lobby: State transition\", {\r\n    oldState,\r\n    newState,\r\n    isHost: ctx.state === LOBBY_STATES.HOSTING,\r\n    lobbyId: ctx.lobby?.lobbyId?.slice(0, 16),\r\n    memberCount: ctx.lobby?.members?.size,\r\n  });\r\n\r\n  ctx.callbacks.onStateChange?.(newState, oldState);\r\n}\r\n", "/**\r\n * LobbyUtils - Shared utility functions for lobby modules\r\n *\r\n * Pure utility functions with no side effects.\r\n * Used across all lobby modules for common operations.\r\n *\r\n * @module kktp/lobby/parts/lobbyUtils\r\n */\r\n\r\nimport { blake2b } from \"https://esm.sh/@noble/hashes@1.3.0/blake2b\";\r\n\r\n/**\r\n * Convert Uint8Array to hex string\r\n * @param {Uint8Array} bytes\r\n * @returns {string}\r\n */\r\nexport function uint8ToHex(bytes) {\r\n  return Array.from(bytes)\r\n    .map((b) => b.toString(16).padStart(2, \"0\"))\r\n    .join(\"\");\r\n}\r\n\r\n/**\r\n * Convert hex string to Uint8Array\r\n * @param {string} hex\r\n * @returns {Uint8Array}\r\n */\r\nexport function hexToUint8(hex) {\r\n  const bytes = new Uint8Array(hex.length / 2);\r\n  for (let i = 0; i < hex.length; i += 2) {\r\n    bytes[i / 2] = parseInt(hex.substring(i, i + 2), 16);\r\n  }\r\n  return bytes;\r\n}\r\n\r\n/**\r\n * Generate a 32-byte cryptographic group key\r\n * @returns {Promise<Uint8Array>}\r\n */\r\nexport async function generateGroupKey() {\r\n  return crypto.getRandomValues(new Uint8Array(32));\r\n}\r\n\r\n/**\r\n * Derive a deterministic group mailbox ID from lobby ID\r\n * Uses BLAKE2b for domain separation\r\n * @param {string} lobbyId\r\n * @returns {string} Hex-encoded mailbox ID\r\n */\r\nexport function deriveGroupMailboxId(lobbyId) {\r\n  const encoder = new TextEncoder();\r\n  const data = encoder.encode(`KKTP:GROUP:MAILBOX:${lobbyId}`);\r\n  const hash = blake2b(data, { dkLen: 32 });\r\n  return uint8ToHex(hash);\r\n}\r\n\r\n/**\r\n * Compute state root commitment for integrity verification\r\n * Merkle-ish commitment to roster + key version\r\n * @param {Object} lobby - Lobby object\r\n * @returns {string} Hex-encoded state root\r\n */\r\nexport function computeStateRoot(lobby) {\r\n  const members = Array.from(lobby.members.keys()).sort();\r\n  const data = JSON.stringify({\r\n    lobbyId: lobby.lobbyId,\r\n    keyVersion: lobby.keyVersion,\r\n    members,\r\n  });\r\n  const encoder = new TextEncoder();\r\n  const hash = blake2b(encoder.encode(data), { dkLen: 32 });\r\n  return uint8ToHex(hash);\r\n}\r\n\r\n/**\r\n * Export group key as hex string\r\n * @param {Uint8Array} groupKey\r\n * @returns {string}\r\n */\r\nexport function exportGroupKey(groupKey) {\r\n  return uint8ToHex(groupKey);\r\n}\r\n\r\n/**\r\n * Export member list as a serializable array\r\n * @param {Map<string, Object>} members - Members map\r\n * @returns {Array<Object>}\r\n */\r\nexport function exportMemberList(members) {\r\n  return Array.from(members.values()).map((m) => ({\r\n    pubSig: m.pubSig,\r\n    displayName: m.displayName,\r\n    role: m.role,\r\n    joinedAt: m.joinedAt,\r\n  }));\r\n}\r\n\r\n/**\r\n * Truncate a string for logging (safe for undefined)\r\n * @param {string|undefined} str\r\n * @param {number} [len=16]\r\n * @returns {string}\r\n */\r\nexport function truncate(str, len = 16) {\r\n  if (!str) return \"\";\r\n  return str.slice(0, len);\r\n}\r\n", "/**\r\n * LobbySubscriptions - Prefix subscription management\r\n *\r\n * Manages KKTP prefix subscriptions for group and DM mailboxes.\r\n * Tracks subscriptions internally for proper cleanup.\r\n *\r\n * @module kktp/lobby/parts/lobbySubscriptions\r\n */\r\n\r\nimport { truncate } from \"./lobbyUtils.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbySubscriptions);\r\n\r\n/**\r\n * Subscribe to a KKTP prefix\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} prefix - Full KKTP prefix (e.g., 'KKTP:{mailboxId}:')\r\n */\r\nexport function subscribePrefix(ctx, prefix) {\r\n  if (!prefix) return;\r\n\r\n  if (ctx.subscriptions.has(prefix)) {\r\n    log.debug(\"KKTP Lobby: Already subscribed to prefix\", {\r\n      prefix: truncate(prefix, 32),\r\n    });\r\n    return;\r\n  }\r\n\r\n  if (!ctx.adapter?.addPrefix) {\r\n    log.warn(\"KKTP Lobby: Cannot subscribe - adapter.addPrefix not available\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    ctx.adapter.addPrefix(prefix);\r\n    ctx.subscriptions.add(prefix);\r\n    log.info(\"KKTP Lobby: Subscribed to prefix\", {\r\n      prefix: truncate(prefix, 32),\r\n      totalSubscriptions: ctx.subscriptions.size,\r\n    });\r\n  } catch (err) {\r\n    log.error(\"KKTP Lobby: Failed to subscribe to prefix\", {\r\n      prefix: truncate(prefix, 32),\r\n      error: err.message,\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Unsubscribe from a KKTP prefix\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} prefix - Full KKTP prefix to unsubscribe from\r\n */\r\nexport function unsubscribePrefix(ctx, prefix) {\r\n  if (!prefix) return;\r\n\r\n  if (!ctx.subscriptions.has(prefix)) {\r\n    return;\r\n  }\r\n\r\n  if (!ctx.adapter?.removePrefix) {\r\n    log.debug(\"KKTP Lobby: Cannot unsubscribe - adapter.removePrefix not available\");\r\n    ctx.subscriptions.delete(prefix);\r\n    return;\r\n  }\r\n\r\n  try {\r\n    ctx.adapter.removePrefix(prefix);\r\n    ctx.subscriptions.delete(prefix);\r\n    log.info(\"KKTP Lobby: Unsubscribed from prefix\", {\r\n      prefix: truncate(prefix, 32),\r\n      remainingSubscriptions: ctx.subscriptions.size,\r\n    });\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Failed to unsubscribe from prefix\", {\r\n      prefix: truncate(prefix, 32),\r\n      error: err.message,\r\n    });\r\n    ctx.subscriptions.delete(prefix);\r\n  }\r\n}\r\n\r\n/**\r\n * Unsubscribe from all tracked prefixes\r\n * Called during cleanup to ensure no leaked subscriptions.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function unsubscribeAllPrefixes(ctx) {\r\n  if (ctx.subscriptions.size === 0) return;\r\n\r\n  log.info(\"KKTP Lobby: Unsubscribing from all prefixes\", {\r\n    count: ctx.subscriptions.size,\r\n  });\r\n\r\n  const prefixes = [...ctx.subscriptions];\r\n  for (const prefix of prefixes) {\r\n    unsubscribePrefix(ctx, prefix);\r\n  }\r\n}\r\n\r\n/**\r\n * Subscribe to the group mailbox for incoming group messages\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} groupMailboxId - The group mailbox ID to watch\r\n */\r\nexport function subscribeToGroupMailbox(ctx, groupMailboxId) {\r\n  if (!groupMailboxId) {\r\n    log.warn(\"KKTP Lobby: Cannot subscribe - no groupMailboxId\");\r\n    return;\r\n  }\r\n  const prefix = `KKTP:GROUP:${groupMailboxId}:`;\r\n  subscribePrefix(ctx, prefix);\r\n}\r\n\r\n/**\r\n * Unsubscribe from the group mailbox\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} groupMailboxId - The group mailbox ID to stop watching\r\n */\r\nexport function unsubscribeFromGroupMailbox(ctx, groupMailboxId) {\r\n  if (!groupMailboxId) return;\r\n  const prefix = `KKTP:GROUP:${groupMailboxId}:`;\r\n  unsubscribePrefix(ctx, prefix);\r\n}\r\n\r\n/**\r\n * Subscribe to a DM mailbox for receiving 1:1 messages\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId - The DM mailbox ID\r\n */\r\nexport function subscribeToDMMailbox(ctx, mailboxId) {\r\n  if (!mailboxId) {\r\n    log.warn(\"KKTP Lobby: Cannot subscribe - no mailboxId\");\r\n    return;\r\n  }\r\n  const prefix = `KKTP:${mailboxId}:`;\r\n  subscribePrefix(ctx, prefix);\r\n}\r\n\r\n/**\r\n * Unsubscribe from a DM mailbox\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId - The DM mailbox ID\r\n */\r\nexport function unsubscribeFromDMMailbox(ctx, mailboxId) {\r\n  if (!mailboxId) return;\r\n  const prefix = `KKTP:${mailboxId}:`;\r\n  unsubscribePrefix(ctx, prefix);\r\n}\r\n\r\n/**\r\n * Re-subscribe to an array of prefixes after restoration\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string[]} prefixes - Array of KKTP prefixes to subscribe to\r\n */\r\nexport async function resubscribePrefixes(ctx, prefixes) {\r\n  if (!ctx.adapter) {\r\n    log.warn(\"KKTP Lobby: No adapter available for prefix resubscription\");\r\n    return;\r\n  }\r\n\r\n  for (const prefix of prefixes) {\r\n    try {\r\n      if (ctx.adapter.subscribeToPrefix) {\r\n        await ctx.adapter.subscribeToPrefix(prefix);\r\n      } else if (ctx.adapter.addPrefix) {\r\n        ctx.adapter.addPrefix(prefix);\r\n      }\r\n      ctx.subscriptions.add(prefix);\r\n    } catch (err) {\r\n      log.warn(`KKTP Lobby: Failed to resubscribe to prefix`, {\r\n        prefix: truncate(prefix, 16),\r\n        error: err?.message || err,\r\n      });\r\n    }\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Resubscribed to prefixes\", {\r\n    count: ctx.subscriptions.size,\r\n  });\r\n}\r\n\r\n/**\r\n * Get all currently subscribed prefixes\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {string[]} Array of subscribed KKTP prefixes\r\n */\r\nexport function getSubscribedPrefixes(ctx) {\r\n  return [...ctx.subscriptions];\r\n}\r\n", "/**\r\n * LobbyDmBuffer - DM buffer and mailbox relevance management\r\n *\r\n * Handles race conditions where DM arrives before session is established.\r\n * Filters incoming DM messages to only process relevant mailboxes.\r\n *\r\n * @module kktp/lobby/parts/lobbyDmBuffer\r\n */\r\n\r\nimport { truncate } from \"./lobbyUtils.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyDmBuffer);\r\n\r\n/**\r\n * Check if a mailbox ID is relevant to this lobby\r\n * Used to filter incoming DM messages - only process messages for:\r\n * - Pending join DM (while waiting for join response)\r\n * - Host's DM (for receiving key rotations/member events as member)\r\n * - Known member DMs (for host to receive join requests/messages)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId\r\n * @returns {boolean}\r\n */\r\nexport function isRelevantMailbox(ctx, mailboxId) {\r\n  if (!mailboxId) return false;\r\n\r\n  // Check if it's our pending join DM (waiting for response from host)\r\n  if (ctx.pendingJoinDmMailboxId && ctx.pendingJoinDmMailboxId === mailboxId) {\r\n    return true;\r\n  }\r\n\r\n  // Check if it's the host's DM (for members receiving key rotations)\r\n  if (ctx.hostDmMailboxId && ctx.hostDmMailboxId === mailboxId) {\r\n    return true;\r\n  }\r\n\r\n  // Check if it's a known member's DM (for host)\r\n  if (isKnownMemberMailbox(ctx, mailboxId)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * Check if a mailbox ID belongs to a known lobby member\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId\r\n * @returns {boolean}\r\n */\r\nexport function isKnownMemberMailbox(ctx, mailboxId) {\r\n  if (!mailboxId || !ctx.lobby?.members) return false;\r\n  for (const member of ctx.lobby.members.values()) {\r\n    if (member.dmMailboxId === mailboxId) return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * Buffer a DM message for later processing when session is established\r\n * Only buffers messages for mailboxes we know are relevant to this lobby.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId - The DM mailbox ID\r\n * @param {string} payload - Raw payload to buffer\r\n * @param {number} [timestamp] - Message timestamp\r\n */\r\nexport function bufferDMMessage(ctx, mailboxId, payload, timestamp) {\r\n  // Only buffer if this mailbox is relevant to our lobby\r\n  if (!isRelevantMailbox(ctx, mailboxId)) {\r\n    return;\r\n  }\r\n\r\n  const now = Date.now();\r\n\r\n  if (!ctx.dmBuffer.has(mailboxId)) {\r\n    ctx.dmBuffer.set(mailboxId, []);\r\n  }\r\n\r\n  const buffer = ctx.dmBuffer.get(mailboxId);\r\n\r\n  // Limit buffer size per mailbox\r\n  if (buffer.length >= ctx.config.dmBufferMaxPerMailbox) {\r\n    log.warn(\"KKTP Lobby: DM buffer full, dropping oldest\", {\r\n      mailboxId: truncate(mailboxId),\r\n    });\r\n    buffer.shift();\r\n  }\r\n\r\n  buffer.push({ payload, timestamp, bufferedAt: now });\r\n\r\n  log.info(\"KKTP Lobby: Buffered early DM message\", {\r\n    mailboxId: truncate(mailboxId),\r\n    bufferSize: buffer.length,\r\n  });\r\n\r\n  startDMBufferCleanup(ctx);\r\n}\r\n\r\n/**\r\n * Check if there are buffered messages for a mailbox\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId\r\n * @returns {boolean}\r\n */\r\nexport function hasBufferedMessages(ctx, mailboxId) {\r\n  const buffer = ctx.dmBuffer.get(mailboxId);\r\n  return buffer && buffer.length > 0;\r\n}\r\n\r\n/**\r\n * Get and clear buffered messages for a mailbox\r\n * Called when session is established to process pending messages.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId\r\n * @returns {Array<{ payload: string, timestamp: number }>}\r\n */\r\nexport function popBufferedMessages(ctx, mailboxId) {\r\n  const buffer = ctx.dmBuffer.get(mailboxId);\r\n  if (!buffer || buffer.length === 0) return [];\r\n\r\n  const now = Date.now();\r\n  const validMessages = buffer.filter(\r\n    (msg) => now - msg.bufferedAt < ctx.config.dmBufferTtlMs,\r\n  );\r\n\r\n  ctx.dmBuffer.delete(mailboxId);\r\n  return validMessages;\r\n}\r\n\r\n/**\r\n * Clear buffered messages for a mailbox (e.g., on session end)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId\r\n */\r\nexport function clearBufferedMessages(ctx, mailboxId) {\r\n  ctx.dmBuffer.delete(mailboxId);\r\n}\r\n\r\n/**\r\n * Start the DM buffer cleanup timer\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function startDMBufferCleanup(ctx) {\r\n  if (ctx.dmBufferCleanupTimer) return;\r\n  ctx.dmBufferCleanupTimer = setInterval(\r\n    () => cleanupExpiredBuffers(ctx),\r\n    ctx.config.dmBufferCleanupIntervalMs,\r\n  );\r\n}\r\n\r\n/**\r\n * Stop the DM buffer cleanup timer\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function stopDMBufferCleanup(ctx) {\r\n  if (ctx.dmBufferCleanupTimer) {\r\n    clearInterval(ctx.dmBufferCleanupTimer);\r\n    ctx.dmBufferCleanupTimer = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Clean up expired buffer entries\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function cleanupExpiredBuffers(ctx) {\r\n  const now = Date.now();\r\n\r\n  for (const [mailboxId, buffer] of ctx.dmBuffer.entries()) {\r\n    const validMessages = buffer.filter(\r\n      (msg) => now - msg.bufferedAt < ctx.config.dmBufferTtlMs,\r\n    );\r\n\r\n    if (validMessages.length === 0) {\r\n      ctx.dmBuffer.delete(mailboxId);\r\n    } else if (validMessages.length < buffer.length) {\r\n      ctx.dmBuffer.set(mailboxId, validMessages);\r\n    }\r\n  }\r\n\r\n  // Stop cleanup timer if buffer is empty\r\n  if (ctx.dmBuffer.size === 0 && ctx.dmBufferCleanupTimer) {\r\n    clearInterval(ctx.dmBufferCleanupTimer);\r\n    ctx.dmBufferCleanupTimer = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all DM buffers and stop cleanup\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function clearDmBuffer(ctx) {\r\n  ctx.dmBuffer.clear();\r\n  stopDMBufferCleanup(ctx);\r\n}\r\n\r\n/**\r\n * Clear all DM buffers and stop cleanup\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function clearAllDMBuffers(ctx) {\r\n  ctx.dmBuffer.clear();\r\n  stopDMBufferCleanup(ctx);\r\n}\r\n", "/**\r\n * LobbyUtxo - UTXO management and send utilities\r\n *\r\n * Handles UTXO refresh waiting and message sending with retry logic.\r\n * Critical for preventing \"Insufficient funds\" errors from race conditions.\r\n *\r\n * @module kktp/lobby/parts/lobbyUtxo\r\n */\r\n\r\nimport { truncate } from \"./lobbyUtils.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyUtxo);\r\n\r\n/**\r\n * Wait for wallet UTXO refresh after a transaction\r\n * This prevents \"Insufficient funds\" errors from UTXO race conditions\r\n * when sending multiple transactions in quick succession.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {number} [delayMs=1500] - Initial delay to wait\r\n * @param {number} [maxWaitMs=5000] - Maximum total wait time\r\n */\r\nexport async function waitForUtxoRefresh(ctx, delayMs = 1500, maxWaitMs = 5000) {\r\n  if (!ctx.adapter || typeof ctx.adapter.getBalance !== \"function\") {\r\n    log.warn(\"KKTP Lobby: No adapter.getBalance available for UTXO refresh\");\r\n    return;\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Waiting for UTXO refresh...\");\r\n  const startTime = Date.now();\r\n\r\n  await new Promise((resolve) => setTimeout(resolve, delayMs));\r\n\r\n  let attempts = 0;\r\n  const maxAttempts = Math.ceil((maxWaitMs - delayMs) / 500);\r\n\r\n  while (attempts < maxAttempts && Date.now() - startTime < maxWaitMs) {\r\n    try {\r\n      const balance = await ctx.adapter.getBalance();\r\n      if (balance && balance > 0n) {\r\n        log.info(\"KKTP Lobby: UTXO refresh complete\", {\r\n          balance: balance.toString(),\r\n          waitedMs: Date.now() - startTime,\r\n        });\r\n        return;\r\n      }\r\n    } catch (err) {\r\n      log.debug(\"KKTP Lobby: Balance check during UTXO wait\", err.message);\r\n    }\r\n    attempts++;\r\n    await new Promise((resolve) => setTimeout(resolve, 500));\r\n  }\r\n\r\n  log.warn(\"KKTP Lobby: UTXO refresh timeout, proceeding anyway\", {\r\n    waitedMs: Date.now() - startTime,\r\n  });\r\n}\r\n\r\n/**\r\n * Check if an error is UTXO-related\r\n * @param {Error} err\r\n * @returns {boolean}\r\n */\r\nexport function isUtxoError(err) {\r\n  const message = err?.message || \"\";\r\n  return (\r\n    message.includes(\"Insufficient funds\") ||\r\n    message.includes(\"UTXO\") ||\r\n    message.includes(\"no spendable\")\r\n  );\r\n}\r\n\r\n/**\r\n * Send a message with retry logic for transient failures\r\n * Handles UTXO availability issues with exponential backoff.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} mailboxId - Target mailbox\r\n * @param {string} message - Message to send\r\n * @param {number} [maxRetries=3] - Maximum retry attempts\r\n */\r\nexport async function sendWithRetry(ctx, mailboxId, message, maxRetries = 3) {\r\n  let lastError;\r\n\r\n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\r\n    try {\r\n      log.info(\"KKTP Lobby: Send attempt\", {\r\n        attempt,\r\n        maxRetries,\r\n        mailboxId: truncate(mailboxId),\r\n      });\r\n      await ctx.sm.sendMessage(mailboxId, message);\r\n      return; // Success!\r\n    } catch (err) {\r\n      lastError = err;\r\n      const utxoError = isUtxoError(err);\r\n\r\n      log.warn(\"KKTP Lobby: Send attempt failed\", {\r\n        attempt,\r\n        maxRetries,\r\n        error: err.message,\r\n        isUtxoError: utxoError,\r\n      });\r\n\r\n      if (attempt < maxRetries) {\r\n        // Exponential backoff: 1s, 2s, 4s\r\n        const delay = Math.pow(2, attempt - 1) * 1000;\r\n        log.info(\"KKTP Lobby: Retrying in\", { delayMs: delay });\r\n\r\n        // Wait for UTXO refresh before retry if it's a UTXO error\r\n        if (utxoError) {\r\n          await waitForUtxoRefresh(ctx, delay, delay + 2000);\r\n        } else {\r\n          await new Promise((resolve) => setTimeout(resolve, delay));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // All retries exhausted\r\n  throw lastError;\r\n}\r\n", "/**\r\n * LobbyRouting - Payload categorization and routing utilities\r\n *\r\n * Pure functions for categorizing and parsing KKTP payloads.\r\n * Determines message type and relevance without processing.\r\n *\r\n * @module kktp/lobby/parts/lobbyRouting\r\n */\r\n\r\nimport { LOBBY_STATES } from \"./lobbyContext.js\";\r\nimport { isRelevantMailbox } from \"./lobbyDmBuffer.js\";\r\n\r\n/**\r\n * Parse a raw KKTP payload to check if it's a group message\r\n * @param {string} rawPayload - Raw KKTP payload string\r\n * @returns {{ isGroup: boolean, groupMailboxId?: string, encrypted?: Object }}\r\n */\r\nexport function parseGroupPayload(rawPayload) {\r\n  if (!rawPayload || typeof rawPayload !== \"string\") {\r\n    return { isGroup: false };\r\n  }\r\n\r\n  // Group messages: KKTP:GROUP:{groupMailboxId}:{json}\r\n  if (!rawPayload.startsWith(\"KKTP:GROUP:\")) {\r\n    return { isGroup: false };\r\n  }\r\n\r\n  // Find the second colon after \"KKTP:GROUP:\"\r\n  const afterPrefix = rawPayload.slice(11); // len(\"KKTP:GROUP:\") = 11\r\n  const colonIdx = afterPrefix.indexOf(\":\");\r\n\r\n  if (colonIdx === -1) {\r\n    return { isGroup: false };\r\n  }\r\n\r\n  const groupMailboxId = afterPrefix.slice(0, colonIdx);\r\n  const jsonPart = afterPrefix.slice(colonIdx + 1);\r\n\r\n  try {\r\n    const encrypted = JSON.parse(jsonPart);\r\n    return { isGroup: true, groupMailboxId, encrypted };\r\n  } catch {\r\n    return { isGroup: false };\r\n  }\r\n}\r\n\r\n/**\r\n * Check if we are currently in a lobby (either hosting or as member)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {boolean}\r\n */\r\nexport function isInLobby(ctx) {\r\n  return ctx.state === LOBBY_STATES.HOSTING || ctx.state === LOBBY_STATES.MEMBER;\r\n}\r\n\r\n/**\r\n * Get the current lobby's group mailbox ID (if in a lobby)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {string|null}\r\n */\r\nexport function getGroupMailboxId(ctx) {\r\n  return ctx.lobby?.groupMailboxId ?? null;\r\n}\r\n\r\n/**\r\n * Check if a group payload belongs to this lobby\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} groupMailboxId - The group mailbox ID from the payload\r\n * @returns {boolean}\r\n */\r\nexport function isGroupPayloadForThisLobby(ctx, groupMailboxId) {\r\n  if (!isInLobby(ctx) || !ctx.lobby?.groupMailboxId) return false;\r\n  return ctx.lobby.groupMailboxId === groupMailboxId;\r\n}\r\n\r\n/**\r\n * Categorize a raw KKTP payload to determine how to process it\r\n * Returns categorization info for routing decisions.\r\n *\r\n * This is a pure categorization method - it doesn't process the message,\r\n * just tells you what type it is and provides parsed components.\r\n *\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} rawPayload - Raw KKTP payload string\r\n * @returns {{\r\n *   type: 'anchor' | 'group' | 'dm' | 'unknown',\r\n *   mailboxId?: string,\r\n *   groupMailboxId?: string,\r\n *   encrypted?: Object,\r\n *   isRelevant?: boolean\r\n * }}\r\n */\r\nexport function categorizePayload(ctx, rawPayload) {\r\n  if (!rawPayload || typeof rawPayload !== \"string\") {\r\n    return { type: \"unknown\" };\r\n  }\r\n\r\n  // Anchor messages (discovery, response, etc.)\r\n  if (rawPayload.startsWith(\"KKTP:ANCHOR:\")) {\r\n    return { type: \"anchor\" };\r\n  }\r\n\r\n  // Group messages\r\n  if (rawPayload.startsWith(\"KKTP:GROUP:\")) {\r\n    const parsed = parseGroupPayload(rawPayload);\r\n    if (parsed.isGroup) {\r\n      return {\r\n        type: \"group\",\r\n        groupMailboxId: parsed.groupMailboxId,\r\n        encrypted: parsed.encrypted,\r\n        isRelevant: isGroupPayloadForThisLobby(ctx, parsed.groupMailboxId),\r\n      };\r\n    }\r\n    return { type: \"unknown\" };\r\n  }\r\n\r\n  // DM messages: KKTP:{mailboxId}:{encrypted}\r\n  if (rawPayload.startsWith(\"KKTP:\")) {\r\n    const colonIdx = rawPayload.indexOf(\":\", 5); // After \"KKTP:\"\r\n    if (colonIdx > 5) {\r\n      const mailboxId = rawPayload.slice(5, colonIdx);\r\n      return {\r\n        type: \"dm\",\r\n        mailboxId,\r\n        isRelevant: isRelevantMailbox(ctx, mailboxId),\r\n      };\r\n    }\r\n  }\r\n\r\n  return { type: \"unknown\" };\r\n}\r\n", "/**\r\n * LobbyMessaging - Group messaging and message history\r\n *\r\n * Handles sending/receiving group messages, deduplication,\r\n * and epoch versioning for key rotation race conditions.\r\n *\r\n * @module kktp/lobby/parts/lobbyMessaging\r\n */\r\n\r\nimport { LOBBY_STATES } from \"./lobbyContext.js\";\r\nimport { truncate } from \"./lobbyUtils.js\";\r\nimport { validateGroupMessage } from \"../lobbySchemas.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyMessaging);\r\n\r\n/**\r\n * Add a message to history\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} msg - Message to add\r\n */\r\nexport function addToHistory(ctx, msg) {\r\n  ctx.messageHistory.push(msg);\r\n  if (ctx.messageHistory.length > ctx.config.maxHistorySize) {\r\n    ctx.messageHistory.shift();\r\n  }\r\n}\r\n\r\n/**\r\n * Check if a message is a duplicate based on senderPubSig and nonce\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} senderPubSig\r\n * @param {string} nonce\r\n * @returns {boolean}\r\n */\r\nexport function isDuplicateMessage(ctx, senderPubSig, nonce) {\r\n  return ctx.messageHistory.some(\r\n    (m) => m.senderPubSig === senderPubSig && m.nonce === nonce\r\n  );\r\n}\r\n\r\n/**\r\n * Send a message to the lobby group\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} codec - LobbyCodec instance\r\n * @param {string} plaintext - Message content\r\n * @returns {Promise<Object>} - { txid }\r\n */\r\nexport async function sendGroupMessage(ctx, codec, plaintext) {\r\n  if (ctx.state !== LOBBY_STATES.HOSTING && ctx.state !== LOBBY_STATES.MEMBER) {\r\n    throw new Error(\"Not in an active lobby\");\r\n  }\r\n\r\n  if (!ctx.lobby?.groupKey || !ctx.lobby?.groupMailboxId) {\r\n    throw new Error(\"Lobby not initialized or missing group key\");\r\n  }\r\n\r\n  if (!plaintext || typeof plaintext !== \"string\") {\r\n    throw new Error(\"plaintext must be a non-empty string\");\r\n  }\r\n\r\n  let senderPubSig = ctx.lobby?.myPubSig || null;\r\n  if (!senderPubSig) {\r\n    const myKeys = await ctx.adapter.generateIdentityKeys(0);\r\n    if (!myKeys?.sig?.publicKey) {\r\n      throw new Error(\"Failed to get identity keys\");\r\n    }\r\n    senderPubSig = myKeys.sig.publicKey;\r\n  }\r\n\r\n  // Encrypt with group key\r\n  const encrypted = await codec.encryptGroupMessage(\r\n    plaintext,\r\n    ctx.lobby.groupKey,\r\n    ctx.lobby.groupMailboxId,\r\n    ctx.lobby.keyVersion,\r\n    senderPubSig\r\n  );\r\n\r\n  // Broadcast to group mailbox\r\n  const payload = `KKTP:GROUP:${ctx.lobby.groupMailboxId}:${JSON.stringify(encrypted)}`;\r\n\r\n  // Get address for self-send\r\n  const address = await ctx.adapter.getAddress();\r\n  const result = await ctx.adapter.send({\r\n    toAddress: address,\r\n    amount: \"1\",\r\n    payload,\r\n  });\r\n\r\n  // Add to local history with nonce for deduplication\r\n  addToHistory(ctx, {\r\n    type: \"outbound\",\r\n    senderPubSig,\r\n    plaintext,\r\n    timestamp: Date.now(),\r\n    txid: result?.txid,\r\n    nonce: encrypted.nonce,\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Decrypt a group message with a specific key and emit the result\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} codec - LobbyCodec instance\r\n * @param {Object} encrypted - The encrypted message\r\n * @param {Uint8Array} key - The key to use for decryption\r\n */\r\nexport async function decryptAndProcessMessage(ctx, codec, encrypted, key) {\r\n  try {\r\n    const decrypted = await codec.decryptGroupMessage(\r\n      encrypted,\r\n      key,\r\n      ctx.lobby.groupMailboxId\r\n    );\r\n\r\n    // Add to history with nonce for potential future deduplication\r\n    addToHistory(ctx, {\r\n      type: \"inbound\",\r\n      senderPubSig: encrypted.senderPubSig,\r\n      plaintext: decrypted,\r\n      timestamp: encrypted.timestamp || Date.now(),\r\n      nonce: encrypted.nonce,\r\n      keyVersion: encrypted.keyVersion,\r\n    });\r\n\r\n    // Emit event\r\n    ctx.callbacks.onGroupMessage?.({\r\n      senderPubSig: encrypted.senderPubSig,\r\n      plaintext: decrypted,\r\n      timestamp: encrypted.timestamp,\r\n      senderName: ctx.lobby.members.get(encrypted.senderPubSig)?.displayName,\r\n    });\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Failed to decrypt group message\", {\r\n      error: err.message,\r\n      keyVersion: encrypted.keyVersion,\r\n      senderPubSig: truncate(encrypted.senderPubSig),\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Buffer a message with a future key version for later processing\r\n * Called when we receive a message before the key rotation DM.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} encrypted - The encrypted message to buffer\r\n */\r\nexport function bufferFutureMessage(ctx, encrypted) {\r\n  const now = Date.now();\r\n\r\n  // Clean up expired messages first\r\n  ctx.futureMessageBuffer = ctx.futureMessageBuffer.filter(\r\n    (entry) => now - entry.receivedAt < ctx.config.futureBufferTtlMs\r\n  );\r\n\r\n  // Enforce size limit\r\n  if (ctx.futureMessageBuffer.length >= ctx.config.futureBufferMaxSize) {\r\n    log.warn(\"KKTP Lobby: Future message buffer full, dropping oldest\");\r\n    ctx.futureMessageBuffer.shift();\r\n  }\r\n\r\n  ctx.futureMessageBuffer.push({\r\n    encrypted,\r\n    receivedAt: now,\r\n  });\r\n\r\n  log.debug(\"KKTP Lobby: Buffered future message\", {\r\n    bufferSize: ctx.futureMessageBuffer.length,\r\n    keyVersion: encrypted.keyVersion,\r\n    senderPubSig: truncate(encrypted.senderPubSig),\r\n  });\r\n}\r\n\r\n/**\r\n * Process any buffered future messages that can now be decrypted\r\n * Called after receiving a key rotation that might unlock buffered messages.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} codec - LobbyCodec instance\r\n */\r\nexport async function processBufferedFutureMessages(ctx, codec) {\r\n  if (ctx.futureMessageBuffer.length === 0) return;\r\n\r\n  const currentVersion = ctx.keyVault.current?.version;\r\n  const previousVersion = ctx.keyVault.previous?.version;\r\n  const now = Date.now();\r\n\r\n  log.info(\"KKTP Lobby: Processing buffered future messages\", {\r\n    bufferSize: ctx.futureMessageBuffer.length,\r\n    currentVersion,\r\n    previousVersion,\r\n  });\r\n\r\n  // Partition: process now vs keep vs drop\r\n  const toProcess = [];\r\n  const toKeep = [];\r\n\r\n  for (const entry of ctx.futureMessageBuffer) {\r\n    const { encrypted, receivedAt } = entry;\r\n\r\n    // Drop expired entries\r\n    if (now - receivedAt >= ctx.config.futureBufferTtlMs) {\r\n      log.debug(\"KKTP Lobby: Dropping expired buffered message\", {\r\n        keyVersion: encrypted.keyVersion,\r\n        ageMs: now - receivedAt,\r\n      });\r\n      continue;\r\n    }\r\n\r\n    // Can we decrypt now?\r\n    if (encrypted.keyVersion === currentVersion) {\r\n      toProcess.push({ encrypted, key: ctx.keyVault.current.key });\r\n    } else if (\r\n      previousVersion !== null &&\r\n      encrypted.keyVersion === previousVersion\r\n    ) {\r\n      toProcess.push({ encrypted, key: ctx.keyVault.previous.key });\r\n    } else if (encrypted.keyVersion > currentVersion) {\r\n      // Still future, keep buffered\r\n      toKeep.push(entry);\r\n    } else {\r\n      // Now expired (too old)\r\n      log.debug(\"KKTP Lobby: Dropping now-expired buffered message\", {\r\n        msgVersion: encrypted.keyVersion,\r\n        currentVersion,\r\n        previousVersion,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Update buffer\r\n  ctx.futureMessageBuffer = toKeep;\r\n\r\n  // Process unlocked messages\r\n  for (const { encrypted, key } of toProcess) {\r\n    log.info(\"KKTP Lobby: Processing previously-buffered message\", {\r\n      keyVersion: encrypted.keyVersion,\r\n      senderPubSig: truncate(encrypted.senderPubSig),\r\n    });\r\n    await decryptAndProcessMessage(ctx, codec, encrypted, key);\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Finished processing buffered messages\", {\r\n    processed: toProcess.length,\r\n    remaining: toKeep.length,\r\n  });\r\n}\r\n\r\n/**\r\n * Process an incoming group message using Epoch Versioning\r\n *\r\n * Key matching strategy:\r\n * 1. Try current key (exact version match)\r\n * 2. Try previous key (for messages sent during rotation propagation)\r\n * 3. Buffer future versions (message arrived before key rotation DM)\r\n * 4. Drop expired versions (more than 1 behind previous)\r\n *\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} codec - LobbyCodec instance\r\n * @param {Object} encrypted - Encrypted group message\r\n */\r\nexport async function processGroupMessage(ctx, codec, encrypted) {\r\n  if (ctx.state !== LOBBY_STATES.HOSTING && ctx.state !== LOBBY_STATES.MEMBER) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    validateGroupMessage(encrypted);\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Invalid group message format\", err.message);\r\n    return;\r\n  }\r\n\r\n  // High-precision deduplication\r\n  if (encrypted.senderPubSig && encrypted.nonce) {\r\n    if (isDuplicateMessage(ctx, encrypted.senderPubSig, encrypted.nonce)) {\r\n      log.debug(\"KKTP Lobby: Skipping duplicate message\", {\r\n        senderPubSig: truncate(encrypted.senderPubSig),\r\n        nonce: truncate(encrypted.nonce),\r\n      });\r\n      return;\r\n    }\r\n  }\r\n\r\n  const msgVersion = encrypted.keyVersion;\r\n  const currentVersion = ctx.keyVault.current?.version ?? ctx.lobby.keyVersion;\r\n  const previousVersion = ctx.keyVault.previous?.version ?? null;\r\n\r\n  // Case 1: Current key (exact match)\r\n  if (msgVersion === currentVersion && ctx.keyVault.current?.key) {\r\n    log.debug(\"KKTP Lobby: Decrypting with current key\", {\r\n      keyVersion: msgVersion,\r\n      senderPubSig: truncate(encrypted.senderPubSig),\r\n    });\r\n    await decryptAndProcessMessage(ctx, codec, encrypted, ctx.keyVault.current.key);\r\n    return;\r\n  }\r\n\r\n  // Case 2: Previous key (message sent during rotation propagation)\r\n  if (\r\n    previousVersion !== null &&\r\n    msgVersion === previousVersion &&\r\n    ctx.keyVault.previous?.key\r\n  ) {\r\n    log.info(\"KKTP Lobby: Decrypting with previous key (rotation in progress)\", {\r\n      msgVersion,\r\n      currentVersion,\r\n      previousVersion,\r\n      senderPubSig: truncate(encrypted.senderPubSig),\r\n    });\r\n    await decryptAndProcessMessage(ctx, codec, encrypted, ctx.keyVault.previous.key);\r\n    return;\r\n  }\r\n\r\n  // Case 3: Future version (message arrived before key rotation DM)\r\n  if (msgVersion > currentVersion) {\r\n    log.info(\"KKTP Lobby: Buffering future message (awaiting key rotation)\", {\r\n      msgVersion,\r\n      currentVersion,\r\n      senderPubSig: truncate(encrypted.senderPubSig),\r\n    });\r\n    bufferFutureMessage(ctx, encrypted);\r\n    return;\r\n  }\r\n\r\n  // Case 4: Expired version (too old to decrypt)\r\n  log.warn(\"KKTP Lobby: Dropping expired message (key version too old)\", {\r\n    msgVersion,\r\n    currentVersion,\r\n    previousVersion,\r\n    senderPubSig: truncate(encrypted.senderPubSig),\r\n  });\r\n}\r\n", "/**\r\n * LobbyKeys - Key management and rotation\r\n *\r\n * Handles key vault management, key rotation (host), and key rotation\r\n * handling (member). Uses epoch versioning to handle race conditions.\r\n *\r\n * @module kktp/lobby/parts/lobbyKeys\r\n */\r\n\r\nimport { LOBBY_STATES, LOBBY_VERSION, MEMBER_ROLES } from \"./lobbyContext.js\";\r\nimport { generateGroupKey, uint8ToHex, hexToUint8, computeStateRoot, truncate } from \"./lobbyUtils.js\";\r\nimport { waitForUtxoRefresh, sendWithRetry } from \"./lobbyUtxo.js\";\r\nimport { processBufferedFutureMessages } from \"./lobbyMessaging.js\";\r\nimport { validateKeyRotation } from \"../lobbySchemas.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyKeys);\r\n\r\n/**\r\n * Initialize the key vault with a new key\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Uint8Array} key\r\n * @param {number} version\r\n */\r\nexport function initKeyVault(ctx, key, version) {\r\n  ctx.keyVault = {\r\n    current: { key, version },\r\n    previous: null,\r\n  };\r\n  ctx.futureMessageBuffer = [];\r\n}\r\n\r\n/**\r\n * Update the key vault with a new key (rotates current to previous)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Uint8Array} newKey\r\n * @param {number} newVersion\r\n */\r\nexport function updateKeyVault(ctx, newKey, newVersion) {\r\n  ctx.keyVault.previous = ctx.keyVault.current;\r\n  ctx.keyVault.current = {\r\n    key: newKey,\r\n    version: newVersion,\r\n  };\r\n}\r\n\r\n/**\r\n * Start the key rotation timer (host only)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {function} rotateKeyFn - Function to call for rotation\r\n */\r\nexport function startKeyRotation(ctx, rotateKeyFn = null) {\r\n  if (ctx.keyRotationTimer) return;\r\n\r\n  const rotationFn =\r\n    typeof rotateKeyFn === \"function\"\r\n      ? rotateKeyFn\r\n      : (reason) => rotateKey(ctx, reason);\r\n\r\n  ctx.keyRotationTimer = setInterval(async () => {\r\n    try {\r\n      await rotationFn(\"Scheduled rotation\");\r\n    } catch (err) {\r\n      log.error(\"KKTP Lobby: Key rotation failed\", err);\r\n    }\r\n  }, ctx.config.keyRotationMs);\r\n}\r\n\r\n/**\r\n * Stop the key rotation timer\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport function stopKeyRotation(ctx) {\r\n  if (ctx.keyRotationTimer) {\r\n    clearInterval(ctx.keyRotationTimer);\r\n    ctx.keyRotationTimer = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Rotate the group key (host only)\r\n * Distributes new key to ALL members before updating local state.\r\n * Uses Key Vault to keep previous key for receiving late messages.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} [reason=\"Scheduled rotation\"]\r\n */\r\nexport async function rotateKey(ctx, reason = \"Scheduled rotation\") {\r\n  if (ctx.state !== LOBBY_STATES.HOSTING) {\r\n    throw new Error(\"Only host can rotate keys\");\r\n  }\r\n\r\n  // Generate new key\r\n  const newKey = await generateGroupKey();\r\n  const newVersion = ctx.lobby.keyVersion + 1;\r\n\r\n  // Compute state root for integrity\r\n  const stateRoot = computeStateRoot(ctx.lobby);\r\n\r\n  // Distribute new key to all members via their DM channels\r\n  const distribution = {\r\n    type: \"key_rotation\",\r\n    version: LOBBY_VERSION,\r\n    lobbyId: ctx.lobby.lobbyId,\r\n    keyVersion: newVersion,\r\n    groupKey: uint8ToHex(newKey),\r\n    stateRoot,\r\n    reason,\r\n    timestamp: Date.now(),\r\n  };\r\n\r\n  const distributionJson = JSON.stringify(distribution);\r\n\r\n  // Collect all members that need the key (excluding host)\r\n  const membersToNotify = [];\r\n  for (const [pubSig, member] of ctx.lobby.members) {\r\n    if (member.role === MEMBER_ROLES.HOST) continue;\r\n    if (!member.dmMailboxId) {\r\n      log.warn(\"KKTP Lobby: Member missing dmMailboxId, skipping\", {\r\n        pubSig: truncate(pubSig),\r\n      });\r\n      continue;\r\n    }\r\n    membersToNotify.push({ pubSig, member });\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Starting key rotation distribution\", {\r\n    keyVersion: newVersion,\r\n    memberCount: membersToNotify.length,\r\n    reason,\r\n  });\r\n\r\n  // Track delivery results\r\n  let successCount = 0;\r\n  let failCount = 0;\r\n  const failedMembers = [];\r\n\r\n  // Send to ALL members BEFORE updating local state\r\n  // CRITICAL: Serialize sends with UTXO refresh between each\r\n  for (let i = 0; i < membersToNotify.length; i++) {\r\n    const { pubSig, member } = membersToNotify[i];\r\n\r\n    if (i > 0) {\r\n      await waitForUtxoRefresh(ctx, 1000, 3000);\r\n    }\r\n\r\n    try {\r\n      await sendWithRetry(ctx, member.dmMailboxId, distributionJson, 3);\r\n      successCount++;\r\n      log.info(\"KKTP Lobby: Key rotation sent to member\", {\r\n        pubSig: truncate(pubSig),\r\n        keyVersion: newVersion,\r\n        dmMailboxId: truncate(member.dmMailboxId),\r\n      });\r\n    } catch (err) {\r\n      failCount++;\r\n      failedMembers.push(pubSig);\r\n      log.error(\"KKTP Lobby: Failed to send key rotation to member\", {\r\n        pubSig: truncate(pubSig),\r\n        dmMailboxId: truncate(member.dmMailboxId),\r\n        error: err.message,\r\n      });\r\n    }\r\n  }\r\n\r\n  // If ALL failed, abort rotation\r\n  if (successCount === 0 && membersToNotify.length > 0) {\r\n    log.error(\"KKTP Lobby: Key rotation aborted - no members received new key\", {\r\n      attemptedCount: membersToNotify.length,\r\n    });\r\n    throw new Error(\"Key rotation failed: no members received new key\");\r\n  }\r\n\r\n  // Update key vault\r\n  updateKeyVault(ctx, newKey, newVersion);\r\n\r\n  // Update lobby state\r\n  ctx.lobby.groupKey = newKey;\r\n  ctx.lobby.keyVersion = newVersion;\r\n\r\n  // Emit event\r\n  ctx.callbacks.onKeyRotation?.(newVersion);\r\n\r\n  log.info(\"KKTP Lobby: Key rotated\", {\r\n    version: newVersion,\r\n    previousVersion: ctx.keyVault.previous?.version ?? \"none\",\r\n    reason,\r\n    memberCount: ctx.lobby.members.size,\r\n    successCount,\r\n    failCount,\r\n    failedMembers: failedMembers.map((p) => truncate(p)),\r\n  });\r\n\r\n  if (failedMembers.length > 0) {\r\n    log.warn(\"KKTP Lobby: Some members missed key rotation\", {\r\n      failedMembers: failedMembers.map((p) => truncate(p)),\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Handle key rotation from host (member only)\r\n * Uses Key Vault to keep previous key for receiving late messages.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} codec - LobbyCodec instance\r\n * @param {Object} rotation - Key rotation message\r\n */\r\nexport async function handleKeyRotation(ctx, codec, rotation) {\r\n  if (ctx.state !== LOBBY_STATES.MEMBER) {\r\n    log.warn(\"KKTP Lobby: Received key rotation but not a member\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n    validateKeyRotation(rotation);\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Invalid key rotation\", err.message);\r\n    return;\r\n  }\r\n\r\n  if (rotation.lobbyId !== ctx.lobby.lobbyId) {\r\n    log.warn(\"KKTP Lobby: Key rotation for wrong lobby\");\r\n    return;\r\n  }\r\n\r\n  // Verify version progression\r\n  if (rotation.keyVersion <= ctx.lobby.keyVersion) {\r\n    log.warn(\"KKTP Lobby: Stale key rotation ignored\", {\r\n      current: ctx.lobby.keyVersion,\r\n      received: rotation.keyVersion,\r\n    });\r\n    return;\r\n  }\r\n\r\n  const newKey = hexToUint8(rotation.groupKey);\r\n  const newVersion = rotation.keyVersion;\r\n\r\n  // Update key vault\r\n  updateKeyVault(ctx, newKey, newVersion);\r\n\r\n  // Update lobby state\r\n  ctx.lobby.groupKey = newKey;\r\n  ctx.lobby.keyVersion = newVersion;\r\n\r\n  // Emit event\r\n  ctx.callbacks.onKeyRotation?.(newVersion);\r\n\r\n  log.info(\"KKTP Lobby: Key updated\", {\r\n    version: newVersion,\r\n    previousVersion: ctx.keyVault.previous?.version ?? \"none\",\r\n    reason: rotation.reason,\r\n  });\r\n\r\n  // Process any buffered future messages that were waiting for this key\r\n  await processBufferedFutureMessages(ctx, codec);\r\n}\r\n", "/**\r\n * LobbyRoster - Member management and events\r\n *\r\n * Handles member roster operations, member events (join/leave),\r\n * and member event broadcasting.\r\n *\r\n * @module kktp/lobby/parts/lobbyRoster\r\n */\r\n\r\nimport { LOBBY_STATES, LOBBY_VERSION, MEMBER_ROLES } from \"./lobbyContext.js\";\r\nimport { truncate } from \"./lobbyUtils.js\";\r\nimport { waitForUtxoRefresh, sendWithRetry } from \"./lobbyUtxo.js\";\r\nimport { validateMemberEvent } from \"../lobbySchemas.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyRoster);\r\n\r\n/**\r\n * Add a member to the lobby roster\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} member - Member object\r\n */\r\nexport function addMember(ctx, member) {\r\n  ctx.lobby.members.set(member.pubSig, member);\r\n}\r\n\r\n/**\r\n * Remove a member from the lobby roster\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} pubSig - Member's public signing key\r\n */\r\nexport function removeMember(ctx, pubSig) {\r\n  ctx.lobby.members.delete(pubSig);\r\n}\r\n\r\n/**\r\n * Get a member by public signing key\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} pubSig\r\n * @returns {Object|undefined}\r\n */\r\nexport function getMember(ctx, pubSig) {\r\n  return ctx.lobby?.members?.get(pubSig);\r\n}\r\n\r\n/**\r\n * Check if a public key is already a member\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} pubSig\r\n * @returns {boolean}\r\n */\r\nexport function isMember(ctx, pubSig) {\r\n  return ctx.lobby?.members?.has(pubSig) ?? false;\r\n}\r\n\r\n/**\r\n * Get member count\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {number}\r\n */\r\nexport function getMemberCount(ctx) {\r\n  return ctx.lobby?.members?.size ?? 0;\r\n}\r\n\r\n/**\r\n * Check if lobby is at capacity\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {boolean}\r\n */\r\nexport function isLobbyFull(ctx) {\r\n  if (!ctx.lobby) return true;\r\n  return ctx.lobby.members.size >= ctx.lobby.maxMembers;\r\n}\r\n\r\n/**\r\n * Export member list as a serializable array\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {Array<Object>}\r\n */\r\nexport function exportMemberList(ctx) {\r\n  if (!ctx.lobby?.members) return [];\r\n  return Array.from(ctx.lobby.members.values()).map((m) => ({\r\n    pubSig: m.pubSig,\r\n    displayName: m.displayName,\r\n    role: m.role,\r\n    joinedAt: m.joinedAt,\r\n  }));\r\n}\r\n\r\n/**\r\n * Import member list from an array\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Array<Object>} members\r\n */\r\nexport function importMemberList(ctx, members) {\r\n  if (!Array.isArray(members)) return;\r\n  for (const m of members) {\r\n    ctx.lobby.members.set(m.pubSig, m);\r\n  }\r\n  log.info(\"KKTP Lobby: Imported member list\", {\r\n    memberCount: ctx.lobby.members.size,\r\n    members: members.map((m) => m.displayName || truncate(m.pubSig, 8)),\r\n  });\r\n}\r\n\r\n/**\r\n * Create a new member object\r\n * @param {string} pubSig\r\n * @param {string} displayName\r\n * @param {string} role\r\n * @param {string|null} dmMailboxId\r\n * @returns {Object}\r\n */\r\nexport function createMember(pubSig, displayName, role, dmMailboxId = null) {\r\n  return {\r\n    pubSig,\r\n    displayName: displayName || `Peer ${pubSig.slice(0, 8)}`,\r\n    role,\r\n    joinedAt: Date.now(),\r\n    dmMailboxId,\r\n  };\r\n}\r\n\r\n/**\r\n * Broadcast a member event to all other members\r\n * Serializes sends with UTXO refresh between each to prevent contention\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} eventType - 'join' or 'leave'\r\n * @param {Object} member - Member info (pubSig, displayName, role, etc.)\r\n */\r\nexport async function broadcastMemberEvent(ctx, eventType, member) {\r\n  if (!ctx.lobby || ctx.state !== LOBBY_STATES.HOSTING) return;\r\n\r\n  const event = {\r\n    type: \"lobby_member_event\",\r\n    version: LOBBY_VERSION,\r\n    lobbyId: ctx.lobby.lobbyId,\r\n    eventType,\r\n    pubSig: member.pubSig,\r\n    displayName: member.displayName,\r\n    role: member.role,\r\n    joinedAt: member.joinedAt,\r\n    reason: member.reason,\r\n    timestamp: Date.now(),\r\n  };\r\n\r\n  const eventJson = JSON.stringify(event);\r\n\r\n  // Collect recipients (exclude host and the member in question)\r\n  const recipients = [];\r\n  for (const [pubSig, m] of ctx.lobby.members) {\r\n    if (m.role === MEMBER_ROLES.HOST) continue;\r\n    if (pubSig === member.pubSig) continue;\r\n    if (!m.dmMailboxId) continue;\r\n    recipients.push({ pubSig, dmMailboxId: m.dmMailboxId });\r\n  }\r\n\r\n  if (recipients.length === 0) {\r\n    log.debug(\"KKTP Lobby: No recipients for member event broadcast\");\r\n    return;\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Broadcasting member event\", {\r\n    eventType,\r\n    memberPubSig: truncate(member.pubSig),\r\n    recipientCount: recipients.length,\r\n  });\r\n\r\n  // Send to each recipient serially with UTXO refresh between\r\n  for (let i = 0; i < recipients.length; i++) {\r\n    const { pubSig, dmMailboxId } = recipients[i];\r\n\r\n    try {\r\n      await sendWithRetry(ctx, dmMailboxId, eventJson, 3);\r\n      log.debug(\"KKTP Lobby: Member event sent\", {\r\n        eventType,\r\n        to: truncate(pubSig),\r\n      });\r\n    } catch (err) {\r\n      log.warn(\"KKTP Lobby: Failed to send member event\", {\r\n        to: truncate(pubSig),\r\n        error: err.message,\r\n      });\r\n    }\r\n\r\n    // Wait for UTXO refresh before next send (except for last recipient)\r\n    if (i < recipients.length - 1) {\r\n      await waitForUtxoRefresh(ctx, 1000, 3000);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Handle member event (join/leave) from host (member only)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} event - Member event\r\n */\r\nexport function handleMemberEvent(ctx, event) {\r\n  if (ctx.state !== LOBBY_STATES.MEMBER) return;\r\n\r\n  try {\r\n    validateMemberEvent(event);\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Invalid member event\", err.message);\r\n    return;\r\n  }\r\n\r\n  if (event.lobbyId !== ctx.lobby.lobbyId) return;\r\n\r\n  if (event.eventType === \"join\") {\r\n    const member = {\r\n      pubSig: event.pubSig,\r\n      displayName: event.displayName,\r\n      role: MEMBER_ROLES.MEMBER,\r\n      joinedAt: event.timestamp,\r\n    };\r\n    ctx.lobby.members.set(member.pubSig, member);\r\n    ctx.callbacks.onMemberJoin?.(member);\r\n    log.info(\"KKTP Lobby: Member joined\", {\r\n      displayName: member.displayName,\r\n    });\r\n  } else if (event.eventType === \"leave\") {\r\n    ctx.lobby.members.delete(event.pubSig);\r\n    ctx.callbacks.onMemberLeave?.(event.pubSig, event.reason);\r\n    log.info(\"KKTP Lobby: Member left\", {\r\n      pubSig: truncate(event.pubSig),\r\n    });\r\n  }\r\n}\r\n", "/**\r\n * LobbyJoins - Join request handling and queue management\r\n *\r\n * Handles join request queue processing, acceptance/rejection,\r\n * and join response sending. Serializes joins to prevent UTXO contention.\r\n *\r\n * @module kktp/lobby/parts/lobbyJoins\r\n */\r\n\r\nimport { LOBBY_STATES, LOBBY_VERSION, MEMBER_ROLES } from \"./lobbyContext.js\";\r\nimport { truncate, exportGroupKey } from \"./lobbyUtils.js\";\r\nimport { waitForUtxoRefresh, sendWithRetry } from \"./lobbyUtxo.js\";\r\nimport { addMember, createMember, exportMemberList, broadcastMemberEvent, isMember, isLobbyFull } from \"./lobbyRoster.js\";\r\nimport { validateJoinRequest, validateJoinResponse } from \"../lobbySchemas.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyJoins);\r\n\r\n/**\r\n * Get pending join requests (host only)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @returns {Array<Object>} Array of { pubSig, displayName, receivedAt }\r\n */\r\nexport function getPendingJoinRequests(ctx) {\r\n  return Array.from(ctx.pendingJoins.entries()).map(([pubSig, data]) => ({\r\n    pubSig,\r\n    displayName: data.request.displayName,\r\n    receivedAt: data.receivedAt,\r\n  }));\r\n}\r\n\r\n/**\r\n * Check if a join request is already queued or pending\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} pubSig\r\n * @returns {boolean}\r\n */\r\nexport function isJoinPending(ctx, pubSig) {\r\n  const alreadyQueued = ctx.joinRequestQueue.some(\r\n    (item) => item.request.pubSig === pubSig\r\n  );\r\n  return alreadyQueued || ctx.pendingJoins.has(pubSig);\r\n}\r\n\r\n/**\r\n * Send join response to a peer\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} dmMailboxId\r\n * @param {boolean} accepted\r\n * @param {string} reason\r\n * @param {Object} [extras={}] - Extra fields (groupKey, keyVersion, etc.)\r\n */\r\nexport async function sendJoinResponse(ctx, dmMailboxId, accepted, reason, extras = {}) {\r\n  const response = {\r\n    type: \"lobby_join_response\",\r\n    version: LOBBY_VERSION,\r\n    lobbyId: ctx.lobby.lobbyId,\r\n    accepted,\r\n    reason,\r\n    timestamp: Date.now(),\r\n    ...extras,\r\n  };\r\n\r\n  log.info(\"KKTP Lobby: Sending join response\", {\r\n    dmMailboxId: truncate(dmMailboxId),\r\n    accepted,\r\n    reason,\r\n    hasGroupKey: !!extras.groupKey,\r\n    keyVersion: extras.keyVersion,\r\n    memberCount: extras.members?.length,\r\n  });\r\n\r\n  try {\r\n    await sendWithRetry(ctx, dmMailboxId, JSON.stringify(response), 3);\r\n    log.info(\"KKTP Lobby: Join response sent successfully\", {\r\n      dmMailboxId: truncate(dmMailboxId),\r\n      accepted,\r\n    });\r\n  } catch (err) {\r\n    log.error(\"KKTP Lobby: Failed to send join response\", {\r\n      dmMailboxId: truncate(dmMailboxId),\r\n      accepted,\r\n      error: err.message,\r\n    });\r\n    throw err;\r\n  }\r\n}\r\n\r\n/**\r\n * Accept a join request and add member to lobby\r\n * Called from the serialized queue processor to prevent UTXO contention.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} dmMailboxId\r\n * @param {Object} request\r\n * @returns {Promise<boolean>}\r\n */\r\nexport async function acceptJoinRequest(ctx, dmMailboxId, request) {\r\n  const { pubSig, displayName } = request;\r\n\r\n  // Create member entry BEFORE sending response\r\n  const member = createMember(pubSig, displayName, MEMBER_ROLES.MEMBER, dmMailboxId);\r\n\r\n  // Add to roster first (so response includes correct member count)\r\n  addMember(ctx, member);\r\n\r\n  // Prepare member list for response (includes the new member)\r\n  const memberList = exportMemberList(ctx);\r\n\r\n  // Send join response with group key\r\n  try {\r\n    await sendJoinResponse(ctx, dmMailboxId, true, \"Welcome\", {\r\n      groupKey: exportGroupKey(ctx.lobby.groupKey),\r\n      keyVersion: ctx.lobby.keyVersion,\r\n      groupMailboxId: ctx.lobby.groupMailboxId,\r\n      lobbyId: ctx.lobby.lobbyId,\r\n      lobbyName: ctx.lobby.lobbyName,\r\n      hostPubSig: ctx.lobby.hostPubSig,\r\n      maxMembers: ctx.lobby.maxMembers,\r\n      members: memberList,\r\n    });\r\n  } catch (err) {\r\n    // Rollback if we fail to send response\r\n    log.error(\"KKTP Lobby: Failed to send join response, removing member\", {\r\n      pubSig: truncate(pubSig),\r\n      error: err.message,\r\n    });\r\n    ctx.lobby.members.delete(pubSig);\r\n    throw err;\r\n  }\r\n\r\n  // Wait for UTXO refresh before broadcasting member event\r\n  await waitForUtxoRefresh(ctx, 1500, 5000);\r\n\r\n  // Broadcast member join to existing members (excluding the new member)\r\n  try {\r\n    await broadcastMemberEvent(ctx, \"join\", member);\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Failed to broadcast member event (non-fatal)\", {\r\n      pubSig: truncate(pubSig),\r\n      error: err.message,\r\n    });\r\n  }\r\n\r\n  // Emit event\r\n  ctx.callbacks.onMemberJoin?.(member);\r\n\r\n  log.info(\"KKTP Lobby: Member joined\", {\r\n    pubSig: truncate(pubSig),\r\n    displayName: member.displayName,\r\n    memberCount: ctx.lobby.members.size,\r\n  });\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Process the join request queue serially\r\n * Ensures only one join is processed at a time to prevent UTXO contention\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n */\r\nexport async function processJoinQueue(ctx) {\r\n  if (ctx.isProcessingJoinQueue) return;\r\n\r\n  ctx.isProcessingJoinQueue = true;\r\n\r\n  try {\r\n    while (ctx.joinRequestQueue.length > 0) {\r\n      const { dmMailboxId, request, resolve } = ctx.joinRequestQueue.shift();\r\n      const { pubSig, displayName } = request;\r\n\r\n      log.info(\"KKTP Lobby: Processing queued join request\", {\r\n        pubSig: truncate(pubSig),\r\n        displayName,\r\n        remainingInQueue: ctx.joinRequestQueue.length,\r\n      });\r\n\r\n      // Check if lobby state is still valid\r\n      if (ctx.state !== LOBBY_STATES.HOSTING || !ctx.lobby) {\r\n        log.warn(\"KKTP Lobby: Lobby closed while processing queue\");\r\n        resolve(false);\r\n        continue;\r\n      }\r\n\r\n      // Re-check capacity\r\n      if (isLobbyFull(ctx)) {\r\n        log.warn(\"KKTP Lobby: Lobby full while processing queue\");\r\n        try {\r\n          await sendJoinResponse(ctx, dmMailboxId, false, \"Lobby is full\");\r\n        } catch (err) {\r\n          log.warn(\"KKTP Lobby: Failed to send rejection\", {\r\n            error: err.message,\r\n          });\r\n        }\r\n        resolve(false);\r\n        continue;\r\n      }\r\n\r\n      // Re-check if already a member\r\n      if (isMember(ctx, pubSig)) {\r\n        log.warn(\"KKTP Lobby: Already member while processing queue\");\r\n        resolve(true);\r\n        continue;\r\n      }\r\n\r\n      // Process based on autoAcceptJoins setting\r\n      if (ctx.config.autoAcceptJoins) {\r\n        try {\r\n          const result = await acceptJoinRequest(ctx, dmMailboxId, request);\r\n          resolve(result);\r\n        } catch (err) {\r\n          log.error(\"KKTP Lobby: Error accepting join request\", {\r\n            pubSig: truncate(pubSig),\r\n            error: err.message,\r\n          });\r\n          resolve(false);\r\n        }\r\n      } else {\r\n        // Store for manual approval\r\n        ctx.pendingJoins.set(pubSig, {\r\n          dmMailboxId,\r\n          request,\r\n          receivedAt: Date.now(),\r\n        });\r\n\r\n        // Emit event for UI to handle\r\n        if (ctx.callbacks.onJoinRequest) {\r\n          const acceptFn = () => acceptPendingJoin(ctx, pubSig);\r\n          const rejectFn = (reason) => rejectPendingJoin(ctx, pubSig, reason);\r\n          ctx.callbacks.onJoinRequest(request, acceptFn, rejectFn);\r\n        }\r\n\r\n        log.info(\"KKTP Lobby: Join request pending approval\", {\r\n          pubSig: truncate(pubSig),\r\n          displayName,\r\n        });\r\n\r\n        resolve(true);\r\n      }\r\n\r\n      // Wait for UTXO refresh before processing next request\r\n      if (ctx.joinRequestQueue.length > 0) {\r\n        log.info(\"KKTP Lobby: Waiting for UTXO refresh before next join\", {\r\n          remainingInQueue: ctx.joinRequestQueue.length,\r\n        });\r\n        await waitForUtxoRefresh(ctx, 1500, 5000);\r\n      }\r\n    }\r\n  } finally {\r\n    ctx.isProcessingJoinQueue = false;\r\n  }\r\n}\r\n\r\n/**\r\n * Accept a pending join request (host only)\r\n * Routes through the join queue to ensure proper UTXO serialization.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} pubSig\r\n * @returns {Promise<boolean>}\r\n */\r\nexport async function acceptPendingJoin(ctx, pubSig) {\r\n  const pending = ctx.pendingJoins.get(pubSig);\r\n  if (!pending) {\r\n    log.warn(\"KKTP Lobby: No pending join for\", truncate(pubSig));\r\n    return false;\r\n  }\r\n\r\n  ctx.pendingJoins.delete(pubSig);\r\n\r\n  return new Promise((resolve) => {\r\n    ctx.joinRequestQueue.push({\r\n      dmMailboxId: pending.dmMailboxId,\r\n      request: pending.request,\r\n      resolve,\r\n      queuedAt: Date.now(),\r\n    });\r\n\r\n    log.info(\"KKTP Lobby: Manual approval queued for processing\", {\r\n      pubSig: truncate(pubSig),\r\n      queueLength: ctx.joinRequestQueue.length,\r\n    });\r\n\r\n    processJoinQueue(ctx);\r\n  });\r\n}\r\n\r\n/**\r\n * Reject a pending join request (host only)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} pubSig\r\n * @param {string} [reason=\"Rejected by host\"]\r\n * @returns {Promise<boolean>}\r\n */\r\nexport async function rejectPendingJoin(ctx, pubSig, reason = \"Rejected by host\") {\r\n  const pending = ctx.pendingJoins.get(pubSig);\r\n  if (!pending) {\r\n    log.warn(\"KKTP Lobby: No pending join for\", truncate(pubSig));\r\n    return false;\r\n  }\r\n\r\n  ctx.pendingJoins.delete(pubSig);\r\n  await sendJoinResponse(ctx, pending.dmMailboxId, false, reason);\r\n\r\n  log.info(\"KKTP Lobby: Rejected join request\", {\r\n    pubSig: truncate(pubSig),\r\n    reason,\r\n  });\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Process a join request from a peer (host only)\r\n * Queues requests to prevent UTXO contention when multiple peers join simultaneously.\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} dmMailboxId\r\n * @param {Object} request\r\n * @returns {Promise<boolean>}\r\n */\r\nexport async function handleJoinRequest(ctx, dmMailboxId, request) {\r\n  // Self-echo filter\r\n  if (ctx.state === LOBBY_STATES.JOINING && ctx.pendingJoin) {\r\n    if (request.pubSig === ctx.pendingJoin.myPubSig) {\r\n      log.debug(\"KKTP Lobby: Ignoring own join request echo\", {\r\n        myPubSig: truncate(ctx.pendingJoin.myPubSig),\r\n      });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  if (ctx.state !== LOBBY_STATES.HOSTING) {\r\n    log.warn(\"KKTP Lobby: Received join request but not hosting\");\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    validateJoinRequest(request);\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Invalid join request\", err.message);\r\n    return false;\r\n  }\r\n\r\n  const { pubSig, displayName, lobbyId } = request;\r\n\r\n  log.info(\"KKTP Lobby: Received join request\", {\r\n    pubSig: truncate(pubSig),\r\n    displayName,\r\n    lobbyId: truncate(lobbyId),\r\n  });\r\n\r\n  // Verify lobby ID matches\r\n  if (lobbyId !== ctx.lobby.lobbyId) {\r\n    log.warn(\"KKTP Lobby: Join request for wrong lobby\", {\r\n      expected: truncate(ctx.lobby.lobbyId),\r\n      received: truncate(lobbyId),\r\n    });\r\n    await sendJoinResponse(ctx, dmMailboxId, false, \"Lobby not found\");\r\n    return false;\r\n  }\r\n\r\n  // Check if already a member\r\n  if (isMember(ctx, pubSig)) {\r\n    log.warn(\"KKTP Lobby: Peer is already a member\");\r\n    return true;\r\n  }\r\n\r\n  // Check if already in queue or pending\r\n  if (isJoinPending(ctx, pubSig)) {\r\n    log.warn(\"KKTP Lobby: Join request already queued/pending\", {\r\n      pubSig: truncate(pubSig),\r\n    });\r\n    return true;\r\n  }\r\n\r\n  // Queue the join request for serialized processing\r\n  return new Promise((resolve) => {\r\n    ctx.joinRequestQueue.push({\r\n      dmMailboxId,\r\n      request,\r\n      resolve,\r\n      queuedAt: Date.now(),\r\n    });\r\n\r\n    log.info(\"KKTP Lobby: Join request queued\", {\r\n      pubSig: truncate(pubSig),\r\n      displayName,\r\n      queueLength: ctx.joinRequestQueue.length,\r\n    });\r\n\r\n    processJoinQueue(ctx);\r\n  });\r\n}\r\n\r\n/**\r\n * Handle join response from host (member only)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} dmMailboxId\r\n * @param {Object} response\r\n * @param {function} onSuccess - Callback on successful join\r\n */\r\nexport async function handleJoinResponse(ctx, dmMailboxId, response, onSuccess) {\r\n  log.info(\"KKTP Lobby: Received join response\", {\r\n    dmMailboxId: truncate(dmMailboxId),\r\n    currentState: ctx.state,\r\n    accepted: response?.accepted,\r\n    reason: response?.reason,\r\n    hasGroupKey: !!response?.groupKey,\r\n    keyVersion: response?.keyVersion,\r\n    memberCount: response?.members?.length,\r\n  });\r\n\r\n  if (ctx.state !== LOBBY_STATES.JOINING) {\r\n    log.debug(\"KKTP Lobby: Ignoring join response (not in JOINING state)\", {\r\n      currentState: ctx.state,\r\n    });\r\n    return;\r\n  }\r\n\r\n  try {\r\n    validateJoinResponse(response);\r\n  } catch (err) {\r\n    log.warn(\"KKTP Lobby: Invalid join response\", {\r\n      error: err.message,\r\n      response: JSON.stringify(response).slice(0, 200),\r\n    });\r\n    return;\r\n  }\r\n\r\n  if (!response.accepted) {\r\n    log.warn(\"KKTP Lobby: Join request rejected\", {\r\n      reason: response.reason,\r\n      lobbyId: truncate(ctx.pendingJoin?.lobbyDiscovery?.sid),\r\n    });\r\n    // onSuccess will handle state reset\r\n    onSuccess(false, response.reason);\r\n    return;\r\n  }\r\n\r\n  if (!ctx.pendingJoin) {\r\n    log.error(\"KKTP Lobby: No pending join data when processing response\");\r\n    onSuccess(false, \"No pending join data\");\r\n    return;\r\n  }\r\n\r\n  // Pass response to coordinator for full initialization\r\n  onSuccess(true, null, {\r\n    response,\r\n    dmMailboxId,\r\n    pendingJoin: ctx.pendingJoin,\r\n  });\r\n\r\n  log.info(\"KKTP Lobby: Join response processed successfully\", {\r\n    lobbyId: truncate(ctx.pendingJoin.lobbyDiscovery.sid),\r\n    accepted: response.accepted,\r\n  });\r\n}\r\n", "/**\r\n * LobbyDiscovery - Lobby discovery and join code resolution\r\n *\r\n * Handles discovering lobbies via scanning, waiting for join codes,\r\n * and resolving join codes to discovery anchors.\r\n *\r\n * Join Code Format: {blockHash}:{txIdPrefix}\r\n * - blockHash: 64-char hex - required for walkDagRange start point\r\n * - txIdPrefix: 8-char hex - disambiguates multiple discoveries in same block\r\n *\r\n * @module kktp/lobby/parts/lobbyDiscovery\r\n */\r\n\r\nimport { LOBBY_DISCOVERY_PREFIX } from \"./lobbyContext.js\";\r\nimport { truncate } from \"./lobbyUtils.js\";\r\nimport { subscribePrefix, unsubscribePrefix } from \"./lobbySubscriptions.js\";\r\nimport { validateLobbyMeta } from \"../lobbySchemas.js\";\r\nimport {\r\n  parseKKTPPayload,\r\n  getExpectedEndMs,\r\n  validateAnchorOrThrow,\r\n} from \"../../protocol/sessions/index.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyDiscovery);\r\n\r\n/**\r\n * Join code format constants\r\n */\r\nconst JOIN_CODE_SEPARATOR = \":\";\r\nconst TXID_PREFIX_LENGTH = 8;\r\n\r\n/**\r\n * Build a join code from block hash and transaction ID\r\n * @param {string} blockHash - 64-char hex block hash\r\n * @param {string} txId - Full transaction ID\r\n * @returns {string} Join code in format \"blockHash:txIdPrefix\"\r\n */\r\nexport function buildJoinCode(blockHash, txId) {\r\n  if (!blockHash || blockHash.length !== 64) {\r\n    log.warn(\"Invalid block hash for join code\", { blockHash: truncate(blockHash, 16) });\r\n    return blockHash || \"\";\r\n  }\r\n  const txIdPrefix = txId ? txId.slice(0, TXID_PREFIX_LENGTH) : \"\";\r\n  return txIdPrefix ? `${blockHash}${JOIN_CODE_SEPARATOR}${txIdPrefix}` : blockHash;\r\n}\r\n\r\n/**\r\n * Parse a join code into block hash and txId prefix\r\n * @param {string} joinCode - Join code string\r\n * @returns {{ blockHash: string, txIdPrefix: string|null }}\r\n */\r\nexport function parseJoinCode(joinCode) {\r\n  if (!joinCode || typeof joinCode !== \"string\") {\r\n    return { blockHash: \"\", txIdPrefix: null };\r\n  }\r\n  const separatorIndex = joinCode.indexOf(JOIN_CODE_SEPARATOR);\r\n  if (separatorIndex === -1) {\r\n    return { blockHash: joinCode, txIdPrefix: null };\r\n  }\r\n  return {\r\n    blockHash: joinCode.slice(0, separatorIndex),\r\n    txIdPrefix: joinCode.slice(separatorIndex + 1) || null,\r\n  };\r\n}\r\n\r\n/**\r\n * Wait for the block hash containing our discovery anchor (join code)\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} sid - Session ID\r\n * @param {string} pubSig - Public signing key\r\n * @returns {Promise<string|null>} Join code (blockHash:txIdPrefix) or null\r\n */\r\nexport async function waitForJoinCode(ctx, sid, pubSig) {\r\n  if (!ctx.adapter?.onNewTransactionMatch) return null;\r\n\r\n  return new Promise((resolve) => {\r\n    let unsubscribeMatch = null;\r\n\r\n    const timeout = setTimeout(() => {\r\n      if (unsubscribeMatch) unsubscribeMatch();\r\n      resolve(null);\r\n    }, 20000);\r\n\r\n    const handler = (match) => {\r\n      log.debug(\"[LobbyDiscovery] Discovery match received:\", match);\r\n      const rawPayload = match?.decodedPayload;\r\n      if (!rawPayload || !rawPayload.startsWith(LOBBY_DISCOVERY_PREFIX)) return;\r\n\r\n      const parsed = parseKKTPPayload(rawPayload);\r\n      if (!parsed || parsed.type !== \"anchor\") return;\r\n\r\n      const anchor = parsed.anchor;\r\n      if (!anchor || anchor.type !== \"discovery\") return;\r\n      if (anchor.sid !== sid) return;\r\n      if (anchor.pub_sig !== pubSig) return;\r\n\r\n      const blockHash = match?.blockHash;\r\n      const txId = match?.txid || match?.txId || match?.transactionId;\r\n\r\n      if (blockHash) {\r\n        clearTimeout(timeout);\r\n        if (unsubscribeMatch) unsubscribeMatch();\r\n        const joinCode = buildJoinCode(blockHash, txId);\r\n        log.info(\"Join code generated\", {\r\n          blockHash: truncate(blockHash, 16),\r\n          txIdPrefix: txId?.slice(0, TXID_PREFIX_LENGTH),\r\n        });\r\n        resolve(joinCode);\r\n      }\r\n    };\r\n\r\n    unsubscribeMatch = ctx.adapter.onNewTransactionMatch(handler) || null;\r\n  });\r\n}\r\n\r\n/**\r\n * Resolve a join code to a discovery anchor\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {string} joinCode - Join code (blockHash or blockHash:txIdPrefix)\r\n * @returns {Promise<Object>} Discovery anchor\r\n */\r\nexport async function resolveJoinCode(ctx, joinCode) {\r\n  if (!ctx.adapter?.walkDagRange) {\r\n    throw new Error(\"KKTP Lobby: walkDagRange not available on adapter\");\r\n  }\r\n\r\n  const { blockHash, txIdPrefix } = parseJoinCode(joinCode);\r\n\r\n  if (!blockHash || blockHash.length !== 64) {\r\n    throw new Error(`Invalid join code: block hash must be 64 hex chars, got ${blockHash?.length || 0}`);\r\n  }\r\n\r\n  log.info(\"Resolving join code\", {\r\n    blockHash: truncate(blockHash, 16),\r\n    txIdPrefix: txIdPrefix || \"(none)\",\r\n  });\r\n\r\n  let foundDiscovery = null;\r\n\r\n  await ctx.adapter.walkDagRange({\r\n    startHash: blockHash,\r\n    endHash: blockHash,\r\n    prefixes: [LOBBY_DISCOVERY_PREFIX],\r\n    onMatch: (match) => {\r\n      if (foundDiscovery) return;\r\n\r\n      const matchTxId = match?.txid || match?.txId || match?.transactionId || \"\";\r\n      if (txIdPrefix && !matchTxId.startsWith(txIdPrefix)) {\r\n        log.debug(\"Skipping match - txId prefix mismatch\", {\r\n          expected: txIdPrefix,\r\n          got: matchTxId.slice(0, TXID_PREFIX_LENGTH),\r\n        });\r\n        return;\r\n      }\r\n\r\n      const rawPayload = match?.decodedPayload;\r\n      if (!rawPayload || !rawPayload.startsWith(LOBBY_DISCOVERY_PREFIX)) return;\r\n\r\n      const parsed = parseKKTPPayload(rawPayload);\r\n      if (!parsed || parsed.type !== \"anchor\") return;\r\n\r\n      const anchor = parsed.anchor;\r\n      if (!anchor || anchor.type !== \"discovery\") return;\r\n\r\n      foundDiscovery = anchor;\r\n      log.info(\"Discovery anchor resolved\", {\r\n        sid: truncate(anchor.sid, 16),\r\n        txId: truncate(matchTxId, 16),\r\n      });\r\n    },\r\n    maxSeconds: 10,\r\n  });\r\n\r\n  if (!foundDiscovery) {\r\n    throw new Error(\r\n      txIdPrefix\r\n        ? `No discovery anchor found in block with txId prefix ${txIdPrefix}`\r\n        : \"No discovery anchor found in block for this join code.\"\r\n    );\r\n  }\r\n\r\n  return foundDiscovery;\r\n}\r\n\r\n/**\r\n * Discover lobbies by scanning live matching transactions\r\n *\r\n * @param {import(\"./lobbyContext.js\").LobbyContext} ctx\r\n * @param {Object} [options]\r\n * @param {string} [options.gameName] - Filter by meta.game\r\n * @param {boolean} [options.includeExpired=false] - Include expired lobbies\r\n * @param {boolean} [options.autoStartScanner=true] - Start scanner if needed\r\n * @param {string} [options.prefix] - Override payload prefix to scan\r\n * @param {Function} [options.onLobby] - Callback for each discovered lobby\r\n * @param {Function} [options.onError] - Callback for discovery errors\r\n * @returns {Promise<{ stop: Function, getResults: Function }>} Controller\r\n */\r\nexport async function discoverLobby(ctx, options = {}) {\r\n  const {\r\n    gameName,\r\n    includeExpired = false,\r\n    autoStartScanner = true,\r\n    prefix = LOBBY_DISCOVERY_PREFIX,\r\n    onLobby,\r\n    onError,\r\n  } = options;\r\n\r\n  if (!ctx.adapter?.addPrefix || !ctx.adapter?.onNewTransactionMatch) {\r\n    throw new Error(\"KKTP Lobby: Scanner adapter is not available\");\r\n  }\r\n\r\n  const seen = new Map();\r\n\r\n  const handleMatch = (match) => {\r\n    try {\r\n      const rawPayload = match?.decodedPayload;\r\n      if (!rawPayload || !rawPayload.startsWith(prefix)) return;\r\n\r\n      const parsed = parseKKTPPayload(rawPayload);\r\n      if (!parsed || parsed.type !== \"anchor\") return;\r\n\r\n      const anchor = parsed.anchor;\r\n      validateAnchorOrThrow(anchor);\r\n      if (anchor.type !== \"discovery\") return;\r\n\r\n      const meta = anchor.meta || {};\r\n      if (meta.lobby !== true) return;\r\n      try {\r\n        validateLobbyMeta(meta);\r\n      } catch {\r\n        return;\r\n      }\r\n      if (gameName && meta.game !== gameName) return;\r\n\r\n      if (!includeExpired) {\r\n        const expectedEndMs = getExpectedEndMs(anchor, match?.timestamp);\r\n        if (expectedEndMs && Date.now() > expectedEndMs) return;\r\n      }\r\n\r\n      const lobbyId = anchor.sid;\r\n      if (!lobbyId || seen.has(lobbyId)) return;\r\n\r\n      const blockHash = match?.blockHash || match?.hash;\r\n      const txId = match?.txid || match?.txId || match?.transactionId;\r\n\r\n      const info = {\r\n        lobbyId,\r\n        lobbyName: meta.lobby_name,\r\n        game: meta.game,\r\n        maxMembers: meta.max_members,\r\n        discovery: anchor,\r\n        meta,\r\n        match,\r\n        joinCode: buildJoinCode(blockHash, txId),\r\n      };\r\n\r\n      seen.set(lobbyId, info);\r\n      onLobby?.(info);\r\n    } catch (err) {\r\n      onError?.(err);\r\n    }\r\n  };\r\n\r\n  const unsubscribe = ctx.adapter.onNewTransactionMatch(handleMatch);\r\n  subscribePrefix(ctx, prefix);\r\n\r\n  if (autoStartScanner && ctx.adapter.startScanner) {\r\n    try {\r\n      await ctx.adapter.startScanner();\r\n    } catch (err) {\r\n      onError?.(err);\r\n    }\r\n  }\r\n\r\n  return {\r\n    stop: () => {\r\n      if (typeof unsubscribe === \"function\") {\r\n        unsubscribe();\r\n      }\r\n      unsubscribePrefix(ctx, prefix);\r\n    },\r\n    getResults: () => Array.from(seen.values()),\r\n  };\r\n}\r\n", "/**\r\n * @fileoverview Lobby persistence - export and restore lobby state.\r\n *\r\n * Provides serialization and deserialization of lobby state for session\r\n * persistence across page reloads or reconnections. Called by SessionVault.\r\n *\r\n * @module kktp/lobby/parts/lobbyPersistence\r\n */\r\n\r\nimport { LOBBY_STATES } from \"./lobbyContext.js\";\r\nimport { uint8ToHex, hexToUint8 } from \"./lobbyUtils.js\";\r\nimport { subscribePrefix } from \"./lobbySubscriptions.js\";\r\nimport { startKeyRotation } from \"./lobbyKeys.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbyPersistence);\r\n\r\nconst SNAPSHOT_VERSION = 1;\r\n\r\n/**\r\n * Export current lobby state as a serializable snapshot.\r\n * @param {Object} ctx - Lobby context\r\n * @returns {Object|null} Serialized snapshot or null if no active lobby\r\n */\r\nexport function exportLobbyState(ctx) {\r\n  const { state, lobby, keyVault, subscriptions, callbacks, hostDmMailboxId } = ctx;\r\n\r\n  if (!lobby || state === LOBBY_STATES.IDLE) {\r\n    return null;\r\n  }\r\n\r\n  // Serialize members Map to array\r\n  const membersArray = [];\r\n  for (const [, member] of lobby.members.entries()) {\r\n    membersArray.push({\r\n      pubSig: member.pubSig,\r\n      displayName: member.displayName,\r\n      role: member.role,\r\n      joinedAt: member.joinedAt,\r\n      dmMailboxId: member.dmMailboxId || null,\r\n    });\r\n  }\r\n\r\n  const snapshot = {\r\n    version: SNAPSHOT_VERSION,\r\n    state,\r\n    lobby: {\r\n      lobbyId: lobby.lobbyId,\r\n      lobbyName: lobby.lobbyName,\r\n      hostPubSig: lobby.hostPubSig,\r\n      myPubSig: lobby.myPubSig || null,\r\n      groupKey: uint8ToHex(lobby.groupKey),\r\n      keyVersion: lobby.keyVersion,\r\n      groupMailboxId: lobby.groupMailboxId,\r\n      maxMembers: lobby.maxMembers,\r\n      createdAt: lobby.createdAt,\r\n      dmMailboxId: lobby.dmMailboxId || null,\r\n      members: membersArray,\r\n    },\r\n    keyVault: {\r\n      current: keyVault.current\r\n        ? {\r\n            key: uint8ToHex(keyVault.current.key),\r\n            version: keyVault.current.version,\r\n          }\r\n        : null,\r\n      previous: keyVault.previous\r\n        ? {\r\n            key: uint8ToHex(keyVault.previous.key),\r\n            version: keyVault.previous.version,\r\n          }\r\n        : null,\r\n    },\r\n    subscribedPrefixes: [...subscriptions],\r\n    hostDmMailboxId: hostDmMailboxId || null,\r\n    savedAt: Date.now(),\r\n  };\r\n\r\n  log.info(\"KKTP Lobby: exportLobbyState\", {\r\n    state,\r\n    lobbyId: lobby.lobbyId?.slice(0, 16),\r\n    memberCount: membersArray.length,\r\n    prefixCount: subscriptions.size,\r\n  });\r\n\r\n  return snapshot;\r\n}\r\n\r\n/**\r\n * Resubscribe to all saved prefixes after restore.\r\n * @param {Object} ctx - Lobby context\r\n * @param {string[]} prefixes - Array of prefix strings to resubscribe\r\n * @returns {Promise<void>}\r\n */\r\nasync function resubscribePrefixes(ctx, prefixes) {\r\n  const { adapter, subscriptions } = ctx;\r\n\r\n  if (!adapter) {\r\n    log.warn(\"KKTP Lobby: No adapter available for prefix resubscription\");\r\n    return;\r\n  }\r\n\r\n  for (const prefix of prefixes) {\r\n    try {\r\n      await adapter.subscribeToPrefix(prefix);\r\n      subscriptions.add(prefix);\r\n    } catch (err) {\r\n      log.warn(\r\n        `KKTP Lobby: Failed to resubscribe to prefix ${prefix?.slice(0, 16)}...`,\r\n        err?.message || err\r\n      );\r\n    }\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Resubscribed to prefixes\", {\r\n    count: subscriptions.size,\r\n  });\r\n}\r\n\r\n/**\r\n * Restore lobby state from a previously exported snapshot.\r\n * Called by SessionVault.restoreSessions() after restoring 1:1 sessions.\r\n * @param {Object} ctx - Lobby context\r\n * @param {Object} snapshot - Previously exported lobby state\r\n * @returns {Promise<boolean>} True if restore succeeded\r\n */\r\nexport async function restoreLobbyState(ctx, snapshot) {\r\n  const { state, subscriptions, callbacks } = ctx;\r\n\r\n  if (!snapshot || !snapshot.lobby) {\r\n    log.info(\"KKTP Lobby: No lobby state to restore\");\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    const {\r\n      lobby: savedLobby,\r\n      state: savedState,\r\n      keyVault: savedKeyVault,\r\n      subscribedPrefixes,\r\n      hostDmMailboxId,\r\n    } = snapshot;\r\n\r\n    // Rebuild members Map from array\r\n    const membersMap = new Map();\r\n    if (Array.isArray(savedLobby.members)) {\r\n      for (const m of savedLobby.members) {\r\n        membersMap.set(m.pubSig, {\r\n          pubSig: m.pubSig,\r\n          displayName: m.displayName,\r\n          role: m.role,\r\n          joinedAt: m.joinedAt,\r\n          dmMailboxId: m.dmMailboxId || null,\r\n        });\r\n      }\r\n    }\r\n\r\n    // Restore lobby object\r\n    ctx.lobby = {\r\n      lobbyId: savedLobby.lobbyId,\r\n      lobbyName: savedLobby.lobbyName,\r\n      hostPubSig: savedLobby.hostPubSig,\r\n      myPubSig: savedLobby.myPubSig || null,\r\n      members: membersMap,\r\n      groupKey: hexToUint8(savedLobby.groupKey),\r\n      keyVersion: savedLobby.keyVersion,\r\n      groupMailboxId: savedLobby.groupMailboxId,\r\n      maxMembers: savedLobby.maxMembers,\r\n      createdAt: savedLobby.createdAt,\r\n      state: savedState,\r\n      dmMailboxId: savedLobby.dmMailboxId || null,\r\n    };\r\n\r\n    // Restore key vault\r\n    ctx.keyVault = {\r\n      current: savedKeyVault?.current\r\n        ? {\r\n            key: hexToUint8(savedKeyVault.current.key),\r\n            version: savedKeyVault.current.version,\r\n          }\r\n        : null,\r\n      previous: savedKeyVault?.previous\r\n        ? {\r\n            key: hexToUint8(savedKeyVault.previous.key),\r\n            version: savedKeyVault.previous.version,\r\n          }\r\n        : null,\r\n    };\r\n\r\n    // Restore host DM mailbox ID (for members)\r\n    ctx.hostDmMailboxId = hostDmMailboxId || null;\r\n\r\n    // Set state\r\n    ctx.state = savedState;\r\n\r\n    // Re-subscribe to all prefixes\r\n    if (Array.isArray(subscribedPrefixes) && subscribedPrefixes.length > 0) {\r\n      await resubscribePrefixes(ctx, subscribedPrefixes);\r\n    }\r\n\r\n    // Restart key rotation timer if host\r\n    if (savedState === LOBBY_STATES.HOSTING) {\r\n      startKeyRotation(ctx);\r\n    }\r\n\r\n    log.info(\"KKTP Lobby: restoreLobbyState complete\", {\r\n      state: ctx.state,\r\n      lobbyId: ctx.lobby.lobbyId?.slice(0, 16),\r\n      memberCount: ctx.lobby.members.size,\r\n      prefixCount: subscriptions.size,\r\n      isHost: savedState === LOBBY_STATES.HOSTING,\r\n    });\r\n\r\n    // Emit state change event\r\n    if (callbacks.onStateChange) {\r\n      callbacks.onStateChange(savedState, LOBBY_STATES.IDLE);\r\n    }\r\n\r\n    return true;\r\n  } catch (err) {\r\n    log.error(\"KKTP Lobby: restoreLobbyState failed\", err?.message || err);\r\n    return false;\r\n  }\r\n}\r\n", "/**\r\n * @fileoverview Lobby session end - DM session termination utilities.\r\n *\r\n * Handles graceful termination of DM sessions with lobby members,\r\n * broadcasting session_end anchors and cleaning up subscriptions.\r\n *\r\n * @module kktp/lobby/parts/lobbySessionEnd\r\n */\r\n\r\nimport { buildAnchorPayload } from \"../../protocol/sessions/index.js\";\r\nimport { unsubscribeFromDMMailbox } from \"./lobbySubscriptions.js\";\r\nimport { waitForUtxoRefresh } from \"./lobbyUtxo.js\";\r\nimport { Logger, LogModule } from \"../../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.parts.lobbySessionEnd);\r\n\r\n/**\r\n * End a single DM session with a member.\r\n * Broadcasts session_end anchor and cleans up subscription.\r\n *\r\n * @param {Object} ctx - Lobby context\r\n * @param {string} dmMailboxId - DM mailbox ID to end\r\n * @param {string} [reason=\"lobby_closed\"] - Reason for ending session\r\n * @returns {Promise<boolean>} True if session ended successfully\r\n */\r\nexport async function endDMSession(ctx, dmMailboxId, reason = \"lobby_closed\") {\r\n  const { sm, adapter } = ctx;\r\n\r\n  if (!dmMailboxId) {\r\n    log.debug(\"KKTP Lobby: endDMSession - no dmMailboxId provided\");\r\n    return false;\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Ending DM session\", {\r\n    dmMailboxId: dmMailboxId.slice(0, 16),\r\n    reason,\r\n  });\r\n\r\n  try {\r\n    // Step 1: Get the session from the vault\r\n    const session = sm.getSession(dmMailboxId);\r\n    if (!session) {\r\n      log.info(\"KKTP Lobby: DM session not found, already closed\", {\r\n        dmMailboxId: dmMailboxId.slice(0, 16),\r\n      });\r\n      // Still unsubscribe from the mailbox prefix\r\n      unsubscribeFromDMMailbox(ctx, dmMailboxId);\r\n      return false;\r\n    }\r\n\r\n    // Step 2: Create session_end anchor\r\n    if (!session.protocol?.createEndAnchor) {\r\n      log.warn(\r\n        \"KKTP Lobby: Session protocol unavailable for session_end\",\r\n        { dmMailboxId: dmMailboxId.slice(0, 16) }\r\n      );\r\n      // Force close locally without broadcasting\r\n      sm.closeSession(dmMailboxId);\r\n      unsubscribeFromDMMailbox(ctx, dmMailboxId);\r\n      return false;\r\n    }\r\n\r\n    const endAnchor = await session.protocol.createEndAnchor(reason);\r\n    const payload = buildAnchorPayload(endAnchor);\r\n\r\n    // Step 3: Broadcast the session_end to the ledger\r\n    const address = await adapter.getAddress();\r\n    if (!address) {\r\n      log.error(\"KKTP Lobby: No wallet address for session_end broadcast\");\r\n      sm.closeSession(dmMailboxId);\r\n      unsubscribeFromDMMailbox(ctx, dmMailboxId);\r\n      return false;\r\n    }\r\n\r\n    await adapter.send({\r\n      toAddress: address,\r\n      amount: \"1\",\r\n      payload,\r\n    });\r\n\r\n    log.info(\"KKTP Lobby: Session_end broadcast successful\", {\r\n      dmMailboxId: dmMailboxId.slice(0, 16),\r\n      reason,\r\n    });\r\n\r\n    // Step 4: Close the session locally (if not already closed by createEndAnchor)\r\n    // Note: createEndAnchor calls sm.terminate() which may already close it\r\n    if (sm.getSession(dmMailboxId)) {\r\n      sm.closeSession(dmMailboxId);\r\n    }\r\n\r\n    // Step 5: Unsubscribe from the DM mailbox\r\n    unsubscribeFromDMMailbox(ctx, dmMailboxId);\r\n\r\n    return true;\r\n  } catch (err) {\r\n    log.error(\"KKTP Lobby: Failed to end DM session\", {\r\n      dmMailboxId: dmMailboxId.slice(0, 16),\r\n      reason,\r\n      error: err.message,\r\n    });\r\n\r\n    // Best-effort cleanup even on failure\r\n    try {\r\n      sm.closeSession(dmMailboxId);\r\n    } catch {\r\n      /* ignore */\r\n    }\r\n    unsubscribeFromDMMailbox(ctx, dmMailboxId);\r\n\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * End all DM sessions with lobby members.\r\n * Used by the host when closing the lobby.\r\n *\r\n * @param {Object} ctx - Lobby context\r\n * @param {string} [reason=\"lobby_closed\"] - Reason for ending sessions\r\n * @returns {Promise<void>}\r\n */\r\nexport async function endAllMemberDMSessions(ctx, reason = \"lobby_closed\") {\r\n  const { lobby } = ctx;\r\n\r\n  if (!lobby?.members) {\r\n    log.debug(\"KKTP Lobby: No members to end DM sessions with\");\r\n    return;\r\n  }\r\n\r\n  const memberSessions = Array.from(lobby.members.values())\r\n    .filter((m) => m.dmMailboxId)\r\n    .map((m) => ({ pubSig: m.pubSig, dmMailboxId: m.dmMailboxId }));\r\n\r\n  if (memberSessions.length === 0) {\r\n    log.debug(\"KKTP Lobby: No DM sessions to end\");\r\n    return;\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Ending all member DM sessions\", {\r\n    count: memberSessions.length,\r\n    reason,\r\n  });\r\n\r\n  // End sessions sequentially with UTXO refresh between each\r\n  for (let i = 0; i < memberSessions.length; i++) {\r\n    const { pubSig, dmMailboxId } = memberSessions[i];\r\n    try {\r\n      await endDMSession(ctx, dmMailboxId, reason);\r\n      // Wait for UTXO refresh between session ends (except for last)\r\n      if (i < memberSessions.length - 1) {\r\n        await waitForUtxoRefresh(ctx, 1000, 2000);\r\n      }\r\n    } catch (err) {\r\n      log.warn(\"KKTP Lobby: Failed to end DM session with member\", {\r\n        pubSig: pubSig?.slice(0, 16),\r\n        dmMailboxId: dmMailboxId?.slice(0, 16),\r\n        error: err.message,\r\n      });\r\n      // Continue with next member\r\n    }\r\n  }\r\n\r\n  log.info(\"KKTP Lobby: Finished ending all member DM sessions\");\r\n}\r\n", "/**\r\n * LobbyManager - Group session management on top of KKTP\r\n *\r\n * Architecture:\r\n * - Host broadcasts a KKTP discovery anchor with lobby=true\r\n * - Peers join via private 1:1 KKTP DM with join request\r\n * - Host distributes GroupKey_vN via encrypted 1:1 DMs\r\n * - All group messages encrypted with XChaCha20-Poly1305 using groupKey\r\n * - Key rotation every 10 minutes with state root commitment\r\n *\r\n * Refactored orchestrator - delegates to parts/ modules for SRP compliance.\r\n *\r\n * @module kktp/lobby/lobbyManager\r\n */\r\n\r\nimport { LobbyCodec } from \"./lobbyCodec.js\";\r\nimport { LobbyMessageHandler } from \"./lobbyMessageHandler.js\";\r\nimport {\r\n  validateLobbyMeta,\r\n  validateJoinResponse\r\n} from \"./lobbySchemas.js\";\r\nimport { Logger, LogModule } from \"../core/logger.js\";\r\n\r\nconst log = Logger.create(LogModule.lobby.lobbyManager);\r\n\r\n// Import from parts/ modules\r\nimport {\r\n  LOBBY_STATES,\r\n  MEMBER_ROLES,\r\n  DEFAULT_CONFIG,\r\n  createLobbyContext,\r\n  resetLobbyContext,\r\n} from \"./parts/lobbyContext.js\";\r\n\r\nimport {\r\n  uint8ToHex,\r\n  hexToUint8,\r\n  generateGroupKey,\r\n  deriveGroupMailboxId\r\n} from \"./parts/lobbyUtils.js\";\r\n\r\nimport {\r\n  subscribePrefix,\r\n  unsubscribePrefix,\r\n  subscribeToGroupMailbox,\r\n  unsubscribeFromGroupMailbox,\r\n  subscribeToDMMailbox,\r\n  unsubscribeFromDMMailbox,\r\n  unsubscribeAllPrefixes,\r\n} from \"./parts/lobbySubscriptions.js\";\r\n\r\nimport {\r\n  isRelevantMailbox,\r\n  bufferDMMessage,\r\n  popBufferedMessages,\r\n  startDMBufferCleanup,\r\n  stopDMBufferCleanup,\r\n  clearDmBuffer,\r\n} from \"./parts/lobbyDmBuffer.js\";\r\n\r\nimport {\r\n  waitForUtxoRefresh,\r\n  sendWithRetry\r\n} from \"./parts/lobbyUtxo.js\";\r\n\r\nimport {\r\n  parseGroupPayload,\r\n  isInLobby,\r\n  isGroupPayloadForThisLobby,\r\n} from \"./parts/lobbyRouting.js\";\r\n\r\nimport {\r\n  sendGroupMessage as _sendGroupMessage,\r\n  processGroupMessage as _processGroupMessage,\r\n  processBufferedFutureMessages as _processBufferedFutureMessages,\r\n} from \"./parts/lobbyMessaging.js\";\r\n\r\nimport {\r\n  initKeyVault,\r\n  startKeyRotation,\r\n  stopKeyRotation,\r\n  rotateKey as _rotateKey,\r\n  handleKeyRotation,\r\n} from \"./parts/lobbyKeys.js\";\r\n\r\nimport {\r\n  addMember,\r\n  removeMember,\r\n  createMember,\r\n  broadcastMemberEvent,\r\n  handleMemberEvent,\r\n  exportMemberList,\r\n} from \"./parts/lobbyRoster.js\";\r\n\r\nimport {\r\n  handleJoinRequest as _handleJoinRequest,\r\n  acceptPendingJoin as _acceptPendingJoin,\r\n  rejectPendingJoin as _rejectPendingJoin,\r\n  handleJoinResponse as _handleJoinResponse\r\n} from \"./parts/lobbyJoins.js\";\r\n\r\nimport {\r\n  waitForJoinCode as _waitForJoinCode,\r\n  resolveJoinCode,\r\n  discoverLobby as _discoverLobby,\r\n} from \"./parts/lobbyDiscovery.js\";\r\n\r\nimport {\r\n  exportLobbyState as _exportLobbyState,\r\n  restoreLobbyState as _restoreLobbyState,\r\n} from \"./parts/lobbyPersistence.js\";\r\n\r\nimport {\r\n  endDMSession\r\n} from \"./parts/lobbySessionEnd.js\";\r\n\r\n// Re-export state constants for consumers\r\nexport { LOBBY_STATES, MEMBER_ROLES };\r\n\r\n// Constants\r\nconst LOBBY_DISCOVERY_PREFIX = \"KKTP:ANCHOR:\";\r\nconst LOBBY_VERSION = 1;\r\n\r\n/**\r\n * LobbyManager orchestrator class.\r\n * Coordinates lobby operations by delegating to focused modules.\r\n */\r\nexport class LobbyManager {\r\n  /**\r\n   * @param {Object} sessionManager - KKTP SessionManager instance\r\n   * @param {Object} options - Configuration options\r\n   * @param {number} [options.maxMembers=16] - Default max members\r\n   * @param {number} [options.keyRotationMs=600000] - Key rotation interval\r\n   * @param {boolean} [options.autoAcceptJoins=true] - Automatically accept join requests\r\n   */\r\n  constructor(sessionManager, options = {}) {\r\n    this.sm = sessionManager;\r\n    this.codec = new LobbyCodec();\r\n    this.handler = new LobbyMessageHandler(this);\r\n\r\n    // Build config from options\r\n    this._config = {\r\n      ...DEFAULT_CONFIG,\r\n      maxMembers: options.maxMembers ?? DEFAULT_CONFIG.maxMembers,\r\n      keyRotationMs: options.keyRotationMs ?? DEFAULT_CONFIG.keyRotationMs,\r\n      autoAcceptJoins: options.autoAcceptJoins ?? DEFAULT_CONFIG.autoAcceptJoins,\r\n    };\r\n\r\n    // Create the internal context\r\n    this._ctx = createLobbyContext(sessionManager, this._config);\r\n\r\n    // Bind callbacks to context\r\n    this._ctx.callbacks = {\r\n      onMemberJoin: null,\r\n      onMemberLeave: null,\r\n      onGroupMessage: null,\r\n      onKeyRotation: null,\r\n      onLobbyClose: null,\r\n      onStateChange: null,\r\n      onJoinRequest: null,\r\n    };\r\n\r\n    // Pending join state (member side)\r\n    this._pendingJoin = null;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Context Accessors\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /** @returns {string} Current lobby state */\r\n  get state() {\r\n    return this._ctx.state;\r\n  }\r\n\r\n  /** @returns {Object|null} Current lobby info */\r\n  get lobby() {\r\n    return this._ctx.lobby;\r\n  }\r\n\r\n  /** @returns {boolean} Whether this client is the lobby host */\r\n  get isHost() {\r\n    return this._ctx.state === LOBBY_STATES.HOSTING;\r\n  }\r\n\r\n  /** @returns {boolean} Whether auto-accept is enabled */\r\n  get autoAcceptJoins() {\r\n    return this._config.autoAcceptJoins;\r\n  }\r\n\r\n  /** Set auto-accept mode */\r\n  set autoAcceptJoins(value) {\r\n    this._config.autoAcceptJoins = Boolean(value);\r\n    this._ctx.config.autoAcceptJoins = Boolean(value);\r\n  }\r\n\r\n  /** @returns {number} Max members default */\r\n  get maxMembersDefault() {\r\n    return this._config.maxMembers;\r\n  }\r\n\r\n  /** @returns {Array<Object>} Pending join requests (host only) */\r\n  get pendingJoinRequests() {\r\n    return Array.from(this._ctx.pendingJoins.entries()).map(([pubSig, data]) => ({\r\n      pubSig,\r\n      displayName: data.request.displayName,\r\n      receivedAt: data.receivedAt,\r\n    }));\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Event Registration\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  onMemberJoin(callback) {\r\n    this._ctx.callbacks.onMemberJoin = callback;\r\n  }\r\n\r\n  onMemberLeave(callback) {\r\n    this._ctx.callbacks.onMemberLeave = callback;\r\n  }\r\n\r\n  onGroupMessage(callback) {\r\n    this._ctx.callbacks.onGroupMessage = callback;\r\n  }\r\n\r\n  onKeyRotation(callback) {\r\n    this._ctx.callbacks.onKeyRotation = callback;\r\n  }\r\n\r\n  onLobbyClose(callback) {\r\n    this._ctx.callbacks.onLobbyClose = callback;\r\n  }\r\n\r\n  onStateChange(callback) {\r\n    this._ctx.callbacks.onStateChange = callback;\r\n  }\r\n\r\n  onJoinRequest(callback) {\r\n    this._ctx.callbacks.onJoinRequest = callback;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // State Management\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _setState(newState) {\r\n    const oldState = this._ctx.state;\r\n    if (oldState !== newState) {\r\n      this._ctx.state = newState;\r\n      this._ctx.callbacks.onStateChange?.(newState, oldState);\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Host Operations\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Host a new lobby.\r\n   * @param {Object} params - Lobby parameters\r\n   * @returns {Promise<Object>} Lobby info including joinCode\r\n   */\r\n  async hostLobby({ lobbyName, gameName, maxMembers, displayName, uptimeSeconds = 3600 }) {\r\n    if (this._ctx.state !== LOBBY_STATES.IDLE) {\r\n      throw new Error(`Cannot host lobby in state: ${this._ctx.state}`);\r\n    }\r\n\r\n    if (!lobbyName || typeof lobbyName !== \"string\") {\r\n      throw new Error(\"lobbyName is required and must be a string\");\r\n    }\r\n    if (!gameName || typeof gameName !== \"string\") {\r\n      throw new Error(\"gameName is required and must be a string\");\r\n    }\r\n\r\n    maxMembers = maxMembers ?? this._config.maxMembers;\r\n    this._setState(LOBBY_STATES.HOSTING);\r\n\r\n    try {\r\n      // Build lobby meta\r\n      const meta = {\r\n        game: gameName,\r\n        version: \"1.0.0\",\r\n        expected_uptime_seconds: uptimeSeconds,\r\n        lobby: true,\r\n        lobby_name: lobbyName,\r\n        max_members: maxMembers,\r\n      };\r\n\r\n      validateLobbyMeta(meta);\r\n\r\n      // Subscribe to discovery prefix\r\n      subscribePrefix(this._ctx, LOBBY_DISCOVERY_PREFIX);\r\n\r\n      // Broadcast discovery with lobby flag\r\n      const result = await this.sm.broadcastDiscovery(meta);\r\n      const discovery = result?.discovery;\r\n\r\n      if (!discovery?.sid || !discovery?.pub_sig) {\r\n        throw new Error(\"Failed to broadcast discovery\");\r\n      }\r\n\r\n      const lobbyId = discovery.sid;\r\n\r\n      // Narrow subscription to our specific discovery\r\n      const specificPrefix = `${LOBBY_DISCOVERY_PREFIX}${lobbyId}`;\r\n      subscribePrefix(this._ctx, specificPrefix);\r\n\r\n      // Start scanner if available\r\n      const adapter = this._ctx.adapter;\r\n      if (adapter?.startScanner) {\r\n        try {\r\n          await adapter.startScanner();\r\n        } catch { /* ignore */ }\r\n      }\r\n\r\n      // Wait for join code (block hash)\r\n      const joinCode = await _waitForJoinCode(this._ctx, lobbyId, discovery.pub_sig);\r\n\r\n      // Generate initial group key\r\n      const groupKey = await generateGroupKey();\r\n      const groupMailboxId = deriveGroupMailboxId(lobbyId);\r\n\r\n      // Initialize lobby state\r\n      this._ctx.lobby = {\r\n        lobbyId,\r\n        lobbyName,\r\n        hostPubSig: discovery.pub_sig,\r\n        myPubSig: discovery.pub_sig,\r\n        members: new Map(),\r\n        groupKey,\r\n        keyVersion: 1,\r\n        groupMailboxId,\r\n        maxMembers,\r\n        createdAt: Date.now(),\r\n        state: LOBBY_STATES.HOSTING,\r\n        discovery,\r\n      };\r\n\r\n      // Initialize key vault\r\n      initKeyVault(this._ctx, groupKey, 1);\r\n\r\n      // Add self as host\r\n      const hostDisplayName = displayName || `${lobbyName} (Host)`;\r\n      const hostMember = createMember(discovery.pub_sig, hostDisplayName, MEMBER_ROLES.HOST);\r\n      addMember(this._ctx, hostMember);\r\n\r\n      // Subscribe to group mailbox\r\n      subscribeToGroupMailbox(this._ctx, groupMailboxId);\r\n\r\n      // Start key rotation timer \u2013 use bound rotateKey so the scheduled\r\n      // rotation also drains buffered future messages after each cycle.\r\n      startKeyRotation(this._ctx, (reason) => this.rotateKey(reason));\r\n\r\n      // Start DM buffer cleanup\r\n      startDMBufferCleanup(this._ctx);\r\n\r\n      return { lobbyId, discovery, groupMailboxId, joinCode };\r\n    } catch (err) {\r\n      this._setState(LOBBY_STATES.IDLE);\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Wait for join code (block hash) for our discovery anchor.\r\n   */\r\n  async waitForJoinCode(sid, pubSig) {\r\n    return _waitForJoinCode(this._ctx, sid, pubSig);\r\n  }\r\n\r\n  /**\r\n   * Discover lobbies by scanning live transactions.\r\n   */\r\n  async discoverLobby(options = {}) {\r\n    return _discoverLobby(this._ctx, options);\r\n  }\r\n\r\n  /**\r\n   * Handle an incoming join request (host only).\r\n   */\r\n  async handleJoinRequest(dmMailboxId, request) {\r\n    // Self-echo filter\r\n    if (this._ctx.state === LOBBY_STATES.JOINING && this._pendingJoin) {\r\n      if (request.pubSig === this._pendingJoin.myPubSig) {\r\n        return false;\r\n      }\r\n    }\r\n    return _handleJoinRequest(this._ctx, dmMailboxId, request);\r\n  }\r\n\r\n  /**\r\n   * Accept a pending join request manually (host only).\r\n   */\r\n  async acceptPendingJoin(pubSig) {\r\n    return _acceptPendingJoin(this._ctx, pubSig);\r\n  }\r\n\r\n  /**\r\n   * Reject a pending join request manually (host only).\r\n   */\r\n  async rejectPendingJoin(pubSig, reason = \"Rejected by host\") {\r\n    return _rejectPendingJoin(this._ctx, pubSig, reason);\r\n  }\r\n\r\n  /**\r\n   * Kick a member from the lobby (host only).\r\n   */\r\n  async kickMember(pubSig, reason = \"Kicked by host\") {\r\n    if (this._ctx.state !== LOBBY_STATES.HOSTING) {\r\n      throw new Error(\"Only host can kick members\");\r\n    }\r\n\r\n    const { lobby, adapter } = this._ctx;\r\n    if (!lobby) throw new Error(\"No active lobby\");\r\n\r\n    const member = lobby.members.get(pubSig);\r\n    if (!member) {\r\n      throw new Error(\"Member not found\");\r\n    }\r\n\r\n    if (member.role === MEMBER_ROLES.HOST) {\r\n      throw new Error(\"Cannot kick the host\");\r\n    }\r\n\r\n    log.info(\"KKTP Lobby: Kicking member\", {\r\n      pubSig: pubSig?.slice(0, 16),\r\n      displayName: member.displayName,\r\n      reason,\r\n    });\r\n\r\n    // Build kick message\r\n    const kickMsg = {\r\n      type: \"lobby_kick\",\r\n      version: LOBBY_VERSION,\r\n      lobbyId: lobby.lobbyId,\r\n      pubSig,\r\n      reason,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    // Send via DM if available\r\n    if (member.dmMailboxId) {\r\n      try {\r\n        await sendWithRetry(this._ctx, member.dmMailboxId, JSON.stringify(kickMsg), 2);\r\n      } catch (err) {\r\n        log.warn(\"KKTP Lobby: Failed to send kick message via DM\", err.message);\r\n      }\r\n    }\r\n\r\n    // Broadcast to group\r\n    await broadcastMemberEvent(this._ctx, \"leave\", member, reason);\r\n\r\n    // End DM session\r\n    if (member.dmMailboxId) {\r\n      await endDMSession(this._ctx, member.dmMailboxId, reason);\r\n    }\r\n\r\n    // Remove from roster\r\n    removeMember(this._ctx, pubSig, reason);\r\n  }\r\n\r\n  /**\r\n   * Rotate the group encryption key (host only).\r\n   * After updating the local key vault, drains any buffered future\r\n   * messages that peers may have sent with the new key version before\r\n   * the host finished its own rotation.\r\n   */\r\n  async rotateKey(reason = \"Scheduled rotation\") {\r\n    const result = await _rotateKey(this._ctx, reason);\r\n\r\n    // Drain messages that arrived encrypted with the new key while\r\n    // the host was still on the old version.\r\n    try {\r\n      await _processBufferedFutureMessages(this._ctx, this.codec);\r\n    } catch (err) {\r\n      log.warn(\"KKTP Lobby: Failed to process buffered messages after key rotation\", err);\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Close the lobby (host only).\r\n   */\r\n  async closeLobby(reason = \"Lobby closed by host\") {\r\n    if (this._ctx.state !== LOBBY_STATES.HOSTING) {\r\n      throw new Error(\"Only host can close lobby\");\r\n    }\r\n\r\n    const { lobby, adapter } = this._ctx;\r\n    if (!lobby?.groupMailboxId) {\r\n      throw new Error(\"No lobby to close\");\r\n    }\r\n\r\n    log.info(\"KKTP Lobby: Closing lobby\", {\r\n      lobbyId: lobby.lobbyId?.slice(0, 16),\r\n      reason,\r\n    });\r\n\r\n    // Stop key rotation\r\n    stopKeyRotation(this._ctx);\r\n\r\n    // Build close notification\r\n    const closeMsg = {\r\n      type: \"lobby_close\",\r\n      version: LOBBY_VERSION,\r\n      lobbyId: lobby.lobbyId,\r\n      hostPubSig: lobby.hostPubSig,\r\n      reason,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    // Broadcast to group mailbox\r\n    try {\r\n      const payload = `KKTP:GROUP:${lobby.groupMailboxId}:${JSON.stringify(closeMsg)}`;\r\n      const address = await adapter.getAddress();\r\n      await adapter.send({ toAddress: address, amount: \"1\", payload });\r\n    } catch (err) {\r\n      log.warn(\"KKTP Lobby: Failed to broadcast close\", err.message);\r\n    }\r\n\r\n    await waitForUtxoRefresh(this._ctx, 1500, 3000);\r\n\r\n    // Emit event before cleanup\r\n    this._ctx.callbacks.onLobbyClose?.(reason);\r\n\r\n    // Cleanup\r\n    this._cleanup();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Member Operations\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Request to join a lobby.\r\n   */\r\n  async joinLobby(joinCodeOrDiscovery, displayName) {\r\n    let lobbyDiscovery = joinCodeOrDiscovery;\r\n\r\n    // Resolve join code to discovery anchor\r\n    if (typeof joinCodeOrDiscovery === \"string\") {\r\n      lobbyDiscovery = await resolveJoinCode(this._ctx, joinCodeOrDiscovery);\r\n      if (!lobbyDiscovery) {\r\n        throw new Error(\"No discovery anchor found for join code\");\r\n      }\r\n    }\r\n\r\n    // Unwrap search-result wrapper (discoverLobby returns { discovery: anchor, ... })\r\n    if (lobbyDiscovery?.discovery && !lobbyDiscovery.sid) {\r\n      lobbyDiscovery = lobbyDiscovery.discovery;\r\n    }\r\n\r\n    if (this._ctx.state !== LOBBY_STATES.IDLE) {\r\n      throw new Error(`Cannot join lobby in state: ${this._ctx.state}`);\r\n    }\r\n\r\n    if (!lobbyDiscovery?.meta?.lobby) {\r\n      throw new Error(\"Discovery is not a lobby anchor\");\r\n    }\r\n    if (!lobbyDiscovery.sid || !lobbyDiscovery.pub_sig) {\r\n      throw new Error(\"Invalid lobby discovery\");\r\n    }\r\n\r\n    displayName = displayName || \"Unknown Kaspian\";\r\n    this._setState(LOBBY_STATES.JOINING);\r\n\r\n    try {\r\n      // Connect to host\r\n      const connectResult = await this.sm.connectToPeer(lobbyDiscovery);\r\n      if (!connectResult?.mailboxId) {\r\n        throw new Error(\"Failed to connect to lobby host\");\r\n      }\r\n\r\n      const dmMailboxId = connectResult.mailboxId;\r\n      const myPubSig = connectResult.response?.pub_sig_resp;\r\n      if (!myPubSig) {\r\n        throw new Error(\"Failed to get identity from response anchor\");\r\n      }\r\n\r\n      await waitForUtxoRefresh(this._ctx);\r\n\r\n      // Build join request\r\n      const joinRequest = {\r\n        type: \"lobby_join_request\",\r\n        version: LOBBY_VERSION,\r\n        lobbyId: lobbyDiscovery.sid,\r\n        pubSig: myPubSig,\r\n        displayName,\r\n        timestamp: Date.now(),\r\n      };\r\n\r\n      await sendWithRetry(this._ctx, dmMailboxId, JSON.stringify(joinRequest), 3);\r\n\r\n      // Store pending state\r\n      this._pendingJoin = {\r\n        lobbyDiscovery,\r\n        dmMailboxId,\r\n        myPubSig,\r\n        displayName,\r\n        lobbyId: lobbyDiscovery.sid,\r\n        hostPubSig: lobbyDiscovery.pub_sig,\r\n        sentAt: Date.now(),\r\n      };\r\n\r\n      this._ctx.pendingJoinDmMailboxId = dmMailboxId;\r\n\r\n      log.info(\"KKTP Lobby: Join request sent\", {\r\n        lobbyId: lobbyDiscovery.sid?.slice(0, 16),\r\n        dmMailboxId: dmMailboxId?.slice(0, 16),\r\n      });\r\n\r\n      return { pending: true, lobbyId: lobbyDiscovery.sid, dmMailboxId };\r\n    } catch (err) {\r\n      this._setState(LOBBY_STATES.IDLE);\r\n      this._pendingJoin = null;\r\n      throw err;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle join response from host.\r\n   */\r\n  async handleJoinResponse(dmMailboxId, response) {\r\n    if (this._ctx.state !== LOBBY_STATES.JOINING) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      validateJoinResponse(response);\r\n    } catch (err) {\r\n      log.warn(\"KKTP Lobby: Invalid join response\", err.message);\r\n      return;\r\n    }\r\n\r\n    if (!response.accepted) {\r\n      log.warn(\"KKTP Lobby: Join rejected\", response.reason);\r\n      this._setState(LOBBY_STATES.IDLE);\r\n      this._pendingJoin = null;\r\n      return;\r\n    }\r\n\r\n    const { groupKey, keyVersion, groupMailboxId, members, lobbyId, lobbyName } = response;\r\n\r\n    if (!this._pendingJoin) {\r\n      log.error(\"KKTP Lobby: No pending join data\");\r\n      this._setState(LOBBY_STATES.IDLE);\r\n      return;\r\n    }\r\n\r\n    // Initialize lobby state as member\r\n    const membersMap = new Map();\r\n    if (Array.isArray(members)) {\r\n      for (const m of members) {\r\n        membersMap.set(m.pubSig, {\r\n          ...m,\r\n          dmMailboxId: m.dmMailboxId || null,\r\n        });\r\n      }\r\n    }\r\n\r\n    const pendingJoin = this._pendingJoin;\r\n    if (!pendingJoin) {\r\n      log.error(\"KKTP Lobby: Pending join data cleared before response handling\");\r\n      this._setState(LOBBY_STATES.IDLE);\r\n      return;\r\n    }\r\n\r\n    this._ctx.lobby = {\r\n      lobbyId,\r\n      lobbyName,\r\n      hostPubSig: pendingJoin.hostPubSig,\r\n      myPubSig: pendingJoin.myPubSig,\r\n      members: membersMap,\r\n      groupKey: hexToUint8(groupKey),\r\n      keyVersion,\r\n      groupMailboxId,\r\n      maxMembers: response.maxMembers ?? this._config.maxMembers,\r\n      createdAt: response.createdAt ?? Date.now(),\r\n      state: LOBBY_STATES.MEMBER,\r\n      dmMailboxId: pendingJoin.dmMailboxId,\r\n    };\r\n\r\n    // Initialize key vault\r\n    initKeyVault(this._ctx, this._ctx.lobby.groupKey, keyVersion);\r\n\r\n    // Subscribe to group mailbox\r\n    subscribeToGroupMailbox(this._ctx, groupMailboxId);\r\n\r\n    // Track host DM mailbox for receiving key rotations\r\n    this._ctx.hostDmMailboxId = pendingJoin.dmMailboxId;\r\n    subscribeToDMMailbox(this._ctx, pendingJoin.dmMailboxId);\r\n\r\n    // Clear pending join tracking\r\n    this._ctx.pendingJoinDmMailboxId = null;\r\n    this._pendingJoin = null;\r\n\r\n    this._setState(LOBBY_STATES.MEMBER);\r\n\r\n    // Emit member join for self\r\n    const selfPubSig = response.yourPubSig || pendingJoin.myPubSig;\r\n    const selfMember = this._ctx.lobby.members.get(selfPubSig);\r\n    if (selfMember) {\r\n      this._ctx.callbacks.onMemberJoin?.(selfMember);\r\n    }\r\n\r\n    // Start DM buffer cleanup\r\n    startDMBufferCleanup(this._ctx);\r\n  }\r\n\r\n  /**\r\n   * Handle being kicked from the lobby.\r\n   */\r\n  async handleKicked(kickMsg) {\r\n    if (!isInLobby(this._ctx)) return;\r\n\r\n    log.info(\"KKTP Lobby: Kicked from lobby\", {\r\n      reason: kickMsg.reason,\r\n    });\r\n\r\n    const hostDmMailboxId = this._ctx.hostDmMailboxId;\r\n    if (hostDmMailboxId) {\r\n      await endDMSession(this._ctx, hostDmMailboxId, kickMsg.reason);\r\n    }\r\n\r\n    this._ctx.callbacks.onLobbyClose?.(kickMsg.reason);\r\n    this._cleanup();\r\n  }\r\n\r\n  /**\r\n   * Handle lobby close notification.\r\n   */\r\n  async handleLobbyClose(closeMsg) {\r\n    if (!isInLobby(this._ctx)) return;\r\n\r\n    log.info(\"KKTP Lobby: Lobby closed\", {\r\n      reason: closeMsg.reason,\r\n    });\r\n\r\n    const hostDmMailboxId = this._ctx.hostDmMailboxId;\r\n    if (hostDmMailboxId) {\r\n      await endDMSession(this._ctx, hostDmMailboxId, closeMsg.reason);\r\n    }\r\n\r\n    this._ctx.callbacks.onLobbyClose?.(closeMsg.reason);\r\n    this._cleanup();\r\n  }\r\n\r\n  /**\r\n   * Leave the lobby voluntarily (member only).\r\n   */\r\n  async leaveLobby(reason = \"Left voluntarily\") {\r\n    if (!isInLobby(this._ctx)) {\r\n      throw new Error(\"Not in a lobby\");\r\n    }\r\n\r\n    const { lobby, adapter } = this._ctx;\r\n    const hostDmMailboxId = this._ctx.hostDmMailboxId;\r\n\r\n    log.info(\"KKTP Lobby: Leaving lobby\", {\r\n      lobbyId: lobby.lobbyId?.slice(0, 16),\r\n      reason,\r\n    });\r\n\r\n    // Notify host via DM\r\n    if (hostDmMailboxId) {\r\n      const leaveMsg = {\r\n        type: \"lobby_leave\",\r\n        version: LOBBY_VERSION,\r\n        lobbyId: lobby.lobbyId,\r\n        reason,\r\n        timestamp: Date.now(),\r\n      };\r\n\r\n      try {\r\n        await sendWithRetry(this._ctx, hostDmMailboxId, JSON.stringify(leaveMsg), 2);\r\n      } catch { /* ignore */ }\r\n\r\n      await endDMSession(this._ctx, hostDmMailboxId, reason);\r\n    }\r\n\r\n    this._cleanup();\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Messaging\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Send a group message to all lobby members.\r\n   */\r\n  async sendGroupMessage(plaintext) {\r\n    return _sendGroupMessage(this._ctx, this.codec, plaintext);\r\n  }\r\n\r\n  /**\r\n   * Process an incoming encrypted group message.\r\n   */\r\n  async processGroupMessage(encrypted) {\r\n    return _processGroupMessage(this._ctx, this.codec, encrypted);\r\n  }\r\n\r\n  /**\r\n   * Handle incoming key rotation message.\r\n   */\r\n  async handleKeyRotation(keyRotationMsg) {\r\n    return handleKeyRotation(this._ctx, this.codec, keyRotationMsg);\r\n  }\r\n\r\n  /**\r\n   * Handle incoming member event.\r\n   */\r\n  async handleMemberEvent(event) {\r\n    return handleMemberEvent(this._ctx, event);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Payload Routing\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Process a raw group payload.\r\n   */\r\n  async processGroupPayload(rawPayload) {\r\n    const parsed = parseGroupPayload(rawPayload);\r\n    if (!parsed) return null;\r\n\r\n    if (!isGroupPayloadForThisLobby(this._ctx, parsed.groupMailboxId)) {\r\n      return null;\r\n    }\r\n\r\n    return this.routeGroupMessage(parsed.groupMailboxId, parsed.encrypted);\r\n  }\r\n\r\n  /**\r\n   * Route an encrypted group message by type.\r\n   */\r\n  async routeGroupMessage(groupMailboxId, encrypted) {\r\n    if (!encrypted || typeof encrypted !== \"object\") {\r\n      return null;\r\n    }\r\n\r\n    switch (encrypted.type) {\r\n      case \"group_message\":\r\n        return this.processGroupMessage(encrypted);\r\n      case \"key_rotation\":\r\n        return this.handleKeyRotation(encrypted);\r\n      case \"member_event\":\r\n        return this.handleMemberEvent(encrypted);\r\n      case \"lobby_kick\":\r\n        return this.handleKicked(encrypted);\r\n      case \"lobby_close\":\r\n        return this.handleLobbyClose(encrypted);\r\n      case \"lobby_leave\":\r\n        if (this._ctx.state === LOBBY_STATES.HOSTING) {\r\n          const pubSig = encrypted.pubSig;\r\n          if (pubSig) {\r\n            removeMember(this._ctx, pubSig, encrypted.reason);\r\n          }\r\n        }\r\n        return encrypted;\r\n      default:\r\n        log.debug(\"KKTP Lobby: Unknown group message type\", encrypted.type);\r\n        return null;\r\n    }\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // DM Buffer\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  isRelevantMailbox(mailboxId) {\r\n    return isRelevantMailbox(this._ctx, mailboxId);\r\n  }\r\n\r\n  bufferDMMessage(mailboxId, payload) {\r\n    return bufferDMMessage(this._ctx, mailboxId, payload);\r\n  }\r\n\r\n  popBufferedMessages(mailboxId) {\r\n    return popBufferedMessages(this._ctx, mailboxId);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Subscriptions\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _subscribePrefix(prefix) {\r\n    subscribePrefix(this._ctx, prefix);\r\n  }\r\n\r\n  _unsubscribePrefix(prefix) {\r\n    unsubscribePrefix(this._ctx, prefix);\r\n  }\r\n\r\n  _subscribeToGroupMailbox(groupMailboxId) {\r\n    subscribeToGroupMailbox(this._ctx, groupMailboxId);\r\n  }\r\n\r\n  _unsubscribeFromGroupMailbox(groupMailboxId) {\r\n    unsubscribeFromGroupMailbox(this._ctx, groupMailboxId);\r\n  }\r\n\r\n  subscribeToDMMailbox(dmMailboxId) {\r\n    subscribeToDMMailbox(this._ctx, dmMailboxId);\r\n  }\r\n\r\n  unsubscribeFromDMMailbox(dmMailboxId) {\r\n    unsubscribeFromDMMailbox(this._ctx, dmMailboxId);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Persistence\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  exportLobbyState() {\r\n    return _exportLobbyState(this._ctx);\r\n  }\r\n\r\n  async restoreLobbyState(snapshot) {\r\n    return _restoreLobbyState(this._ctx, snapshot);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Utilities\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _uint8ToHex(bytes) {\r\n    return uint8ToHex(bytes);\r\n  }\r\n\r\n  _hexToUint8(hex) {\r\n    return hexToUint8(hex);\r\n  }\r\n\r\n  async _getMyPubSig() {\r\n    return this.sm?.getMyPubSig?.() || null;\r\n  }\r\n\r\n  getMessageHistory() {\r\n    return [...this._ctx.messageHistory];\r\n  }\r\n\r\n  getMemberList() {\r\n    return exportMemberList(this._ctx);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Cleanup\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  _cleanup() {\r\n    stopKeyRotation(this._ctx);\r\n    stopDMBufferCleanup(this._ctx);\r\n    unsubscribeAllPrefixes(this._ctx);\r\n    clearDmBuffer(this._ctx);\r\n    resetLobbyContext(this._ctx);\r\n    this._pendingJoin = null;\r\n    this._setState(LOBBY_STATES.IDLE);\r\n  }\r\n}\r\n", "// LobbyFacade - Single entry point for lobby operations\r\nimport { LobbyManager, LOBBY_STATES, MEMBER_ROLES } from \"./lobbyManager.js\";\r\n\r\n/**\r\n * LobbyFacade\r\n * Provides a clean, stable API for hosting/joining lobbies,\r\n * routing DM/group messages, and accessing lobby state.\r\n *\r\n * This is the primary API for lobby operations.\r\n */\r\nexport class LobbyFacade {\r\n  /**\r\n   * @param {import(\"../protocol/sessions/sessionFacade.js\").SessionFacade} sessionManager\r\n   * @param {Object} [options]\r\n   */\r\n  constructor(sessionManager, options = {}) {\r\n    this._manager = new LobbyManager(sessionManager, options);\r\n\r\n    // Register lobby manager with session manager for persistence\r\n    sessionManager.setLobbyManager?.(this._manager);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Lifecycle\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async hostLobby(options) {\r\n    return await this._manager.hostLobby(options);\r\n  }\r\n\r\n  async joinLobby(lobbyDiscovery, displayName) {\r\n    return await this._manager.joinLobby(lobbyDiscovery, displayName);\r\n  }\r\n\r\n  async leaveLobby(reason) {\r\n    return await this._manager.leaveLobby(reason);\r\n  }\r\n\r\n  async closeLobby(reason) {\r\n    return await this._manager.closeLobby(reason);\r\n  }\r\n\r\n  async discoverLobby(options) {\r\n    return await this._manager.discoverLobby(options);\r\n  }\r\n\r\n  async sendGroupMessage(plaintext) {\r\n    return await this._manager.sendGroupMessage(plaintext);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Incoming Message Routing - Primary API for message handling\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Route a decrypted DM plaintext to the lobby handler.\r\n   * Call this when you receive a DM message to check if it's lobby-related.\r\n   * @param {string} mailboxId - The DM mailbox ID\r\n   * @param {string} plaintext - The decrypted message content\r\n   * @returns {boolean} True if message was handled as lobby message\r\n   */\r\n  routeDMMessage(mailboxId, plaintext) {\r\n    return this._manager.handler.processDMMessage(mailboxId, plaintext);\r\n  }\r\n\r\n  /**\r\n   * Process a group message payload for this lobby.\r\n   * Handles the full flow: parse, validate, decrypt, and emit event.\r\n   * @param {string} rawPayload - Raw KKTP:GROUP payload\r\n   * @returns {Promise<{ handled: boolean, message?: Object, error?: string }|null>}\r\n   */\r\n  async processGroupPayload(rawPayload) {\r\n    return await this._manager.processGroupPayload(rawPayload);\r\n  }\r\n\r\n  /**\r\n   * Process an encrypted group message for this lobby.\r\n   * @param {string} groupMailboxId - The group mailbox ID\r\n   * @param {Object} encrypted - The encrypted group message object\r\n   * @returns {Promise<boolean>} True if handled successfully\r\n   */\r\n  async routeGroupMessage(groupMailboxId, encrypted) {\r\n    return await this._manager.routeGroupMessage(groupMailboxId, encrypted);\r\n  }\r\n\r\n  /**\r\n   * Check if a mailbox ID is relevant to this lobby.\r\n   * Used to filter incoming DM messages before processing/buffering.\r\n   * @param {string} mailboxId - The DM mailbox ID\r\n   * @returns {boolean}\r\n   */\r\n  isRelevantMailbox(mailboxId) {\r\n    return this._manager.isRelevantMailbox(mailboxId);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Prefix Subscription Management\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Subscribe to a DM mailbox for receiving 1:1 messages.\r\n   * @param {string} mailboxId - The DM mailbox ID\r\n   */\r\n  subscribeToDMMailbox(mailboxId) {\r\n    this._manager.subscribeToDMMailbox(mailboxId);\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe from a DM mailbox.\r\n   * @param {string} mailboxId - The DM mailbox ID\r\n   */\r\n  unsubscribeFromDMMailbox(mailboxId) {\r\n    this._manager.unsubscribeFromDMMailbox(mailboxId);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // DM Buffer Management\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  /**\r\n   * Buffer a DM message for later processing when session is established.\r\n   * @param {string} mailboxId - The DM mailbox ID\r\n   * @param {string} payload - Raw payload to buffer\r\n   */\r\n  bufferDMMessage(mailboxId, payload) {\r\n    this._manager.bufferDMMessage(mailboxId, payload);\r\n  }\r\n\r\n  /**\r\n   * Get and clear buffered messages for a mailbox.\r\n   * @param {string} mailboxId\r\n   * @returns {Array<{ payload: string, timestamp: number }>}\r\n   */\r\n  popBufferedMessages(mailboxId) {\r\n    return this._manager.popBufferedMessages(mailboxId);\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Events (pass-through)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  onMemberJoin(cb) { this._manager.onMemberJoin(cb); }\r\n  onMemberLeave(cb) { this._manager.onMemberLeave(cb); }\r\n  onGroupMessage(cb) { this._manager.onGroupMessage(cb); }\r\n  onKeyRotation(cb) { this._manager.onKeyRotation(cb); }\r\n  onLobbyClose(cb) { this._manager.onLobbyClose(cb); }\r\n  onStateChange(cb) { this._manager.onStateChange(cb); }\r\n  onJoinRequest(cb) { this._manager.onJoinRequest(cb); }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // State accessors\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  get currentState() { return this._manager.state; }\r\n  get lobbyInfo() { return this._manager.lobby; }\r\n  get members() { return this._manager.getMemberList(); }\r\n  get messageHistory() { return this._manager.getMessageHistory(); }\r\n  get isHost() { return this._manager.state === LOBBY_STATES.HOSTING; }\r\n  get pendingJoinRequests() { return this._manager.pendingJoinRequests; }\r\n\r\n  /**\r\n   * Check if we are currently in a lobby (hosting or member).\r\n   * @returns {boolean}\r\n   */\r\n  isInLobby() {\r\n    return (\r\n      this._manager.state === LOBBY_STATES.HOSTING ||\r\n      this._manager.state === LOBBY_STATES.MEMBER\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get the current lobby's group mailbox ID.\r\n   * @returns {string|null}\r\n   */\r\n  getGroupMailboxId() {\r\n    return this._manager.lobby?.groupMailboxId ?? null;\r\n  }\r\n\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n  // Member Management (Host only)\r\n  // \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\r\n\r\n  async acceptPendingJoin(pubSig) {\r\n    return await this._manager.acceptPendingJoin(pubSig);\r\n  }\r\n\r\n  async rejectPendingJoin(pubSig, reason) {\r\n    return await this._manager.rejectPendingJoin(pubSig, reason);\r\n  }\r\n\r\n  async kickMember(pubSig, reason) {\r\n    return await this._manager.kickMember(pubSig, reason);\r\n  }\r\n\r\n  async rotateKey(reason) {\r\n    return await this._manager.rotateKey(reason);\r\n  }\r\n\r\n  // Expose enums for convenience\r\n  static get STATES() { return LOBBY_STATES; }\r\n  static get ROLES() { return MEMBER_ROLES; }\r\n}\r\n\r\nexport { LOBBY_STATES, MEMBER_ROLES };\r\n", "/**\r\n * kkGameEngine.js - Simple Game Engine Facade for Kaspa-Backed Games\r\n *\r\n * This is the single entry point for game developers. It abstracts away all\r\n * blockchain complexity (DAGs, UTXOs, anchors, VRF, etc.) and provides a\r\n * simple API that any game developer can use.\r\n *\r\n * Requirements for users:\r\n * - Password\r\n * - Wallet filename\r\n *\r\n * That's it! Everything else is handled automatically.\r\n *\r\n * @example\r\n * ```javascript\r\n * import { KKGameEngine } from './kktp/kkGameEngine.js';\r\n *\r\n * const game = new KKGameEngine();\r\n *\r\n * // Initialize once\r\n * await game.init({\r\n *   password: 'myPassword123',\r\n *   walletName: 'my-game-wallet',\r\n * });\r\n *\r\n * // Start a game session\r\n * await game.startGame({\r\n *   gameId: 'match-123',\r\n *   playerId: 'player-1',\r\n * });\r\n *\r\n * // Record player moves (automatically generates provable randomness)\r\n * const move = await game.recordMove('jump', { lane: 1 });\r\n * console.log('Random value:', move.randomValue);\r\n *\r\n * // Get provable random number for game logic\r\n * const random = await game.getRandom();\r\n *\r\n * // End the game and anchor final state\r\n * const result = await game.endGame({ score: 1500, coins: 42 });\r\n * ```\r\n */\r\n\r\nimport { KaspaAdapter } from \"./adapters/kaspaAdapter.js\";\r\nimport { KaspaAnchorFacade } from \"./blockchain/kaspaAnchorFacade.js\";\r\nimport { auditCheating } from \"./audit/auditCheating.js\";\r\nimport { parseAnchor } from \"./blockchain/anchorParser.js\";\r\nimport { SessionFacade } from \"./protocol/sessions/sessionFacade.js\";\r\nimport { LobbyFacade, LOBBY_STATES } from \"./lobby/lobbyFacade.js\";\r\nimport { MoveEvent } from \"./blockchain/moveProcessor.js\";\r\nimport { parseHeartbeatHex, enrichMoves } from \"./blockchain/anchor/heartbeatParser.js\";\r\nimport { Logger, LogModule } from \"./core/logger.js\";\r\nimport { BLOCKCHAIN } from \"./core/constants.js\";\r\n\r\nconst log = Logger.create(LogModule.kktp.kkGameEngine);\r\n\r\n/**\r\n * Default timeout values for network operations (ms).\r\n * Conservative values for low-end machines and unreliable networks.\r\n */\r\nconst TIMEOUTS = Object.freeze({\r\n  INIT: 15000,\r\n  CONNECT: 40000,\r\n  WALLET: 40000,\r\n  BALANCE: 10000,\r\n  VRF: 25000,\r\n  BLOCK_FETCH: 10000,\r\n  QRNG: 15000,\r\n  LOBBY_CREATE:40000,\r\n  LOBBY_JOIN: 40000,\r\n  DISCONNECT: 5000,\r\n});\r\n\r\n/**\r\n * Game engine states\r\n */\r\nexport const GameState = {\r\n  UNINITIALIZED: \"uninitialized\",\r\n  INITIALIZING: \"initializing\",\r\n  READY: \"ready\",\r\n  IN_GAME: \"in_game\",\r\n  ENDING: \"ending\",\r\n  ERROR: \"error\",\r\n};\r\n\r\n/**\r\n * Game engine events\r\n */\r\nexport const GameEvent = {\r\n  // Lifecycle\r\n  INITIALIZED: \"initialized\",\r\n  GAME_STARTED: \"gameStarted\",\r\n  GAME_ENDED: \"gameEnded\",\r\n\r\n  // Game Readiness (UTXO pool ready - instant game start)\r\n  GAME_READY: \"gameReady\",\r\n  POOL_LOW: \"poolLow\",\r\n\r\n  // Moves\r\n  MOVE_RECORDED: \"moveRecorded\",\r\n\r\n  // Randomness\r\n  RANDOM_GENERATED: \"randomGenerated\",\r\n\r\n  // Wallet\r\n  BALANCE_CHANGED: \"balanceChanged\",\r\n  LOW_FUNDS: \"lowFunds\",\r\n\r\n  // Multiplayer\r\n  PLAYER_JOINED: \"playerJoined\",\r\n  PLAYER_LEFT: \"playerLeft\",\r\n  MESSAGE_RECEIVED: \"messageReceived\",\r\n  CHAT_MESSAGE: \"chatMessage\",\r\n  LOBBY_UPDATED: \"lobbyUpdated\",\r\n  LOBBY_CLOSED: \"lobbyClosed\",\r\n  GAME_START: \"gameStart\",\r\n  READY_STATE: \"readyState\",\r\n\r\n  // Anchoring\r\n  ANCHOR_SENT: \"anchorSent\",\r\n  ANCHOR_FAILED: \"anchorFailed\",\r\n\r\n  // Opponent heartbeat pipeline\r\n  OPPONENT_HEARTBEAT: \"opponentHeartbeat\",\r\n  OPPONENT_MOVE_ANCHORED: \"opponentMoveAnchored\",\r\n\r\n  // Errors\r\n  ERROR: \"error\",\r\n};\r\n\r\n/**\r\n * KKGameEngine - Simple game engine for provably fair blockchain-backed games\r\n *\r\n * Hides all blockchain complexity from game developers.\r\n */\r\nexport class KKGameEngine {\r\n  constructor() {\r\n    this._state = GameState.UNINITIALIZED;\r\n    this._adapter = null;\r\n    this._anchor = null;\r\n    this._session = null;\r\n    this._lobby = null;\r\n    this._walletName = null;\r\n\r\n    this._gameId = null;\r\n    this._playerId = null;\r\n    this._genesisBlockHashHex = null;\r\n\r\n    this._listeners = new Map();\r\n    this._blockHandlers = [];\r\n    this._blockStreamActive = false;\r\n    this._blockUnsubscribe = null;\r\n    this._balanceKas = 0;\r\n    this._address = null;\r\n\r\n    this._incomingRouterActive = false;\r\n    this._incomingUnsubscribe = null;\r\n\r\n    this._anchorPrefixHexes = [];\r\n\r\n    // Cached audit data snapshot (captured before stop() wipes vault)\r\n    this._cachedAuditData = null;\r\n\r\n    // Track initialization promise to prevent double-init\r\n    this._initPromise = null;\r\n\r\n    // \u2500\u2500 Graceful shutdown: track in-flight operations \u2500\u2500\r\n    this._activeOperations = new Set();\r\n    this._shuttingDown = false;\r\n\r\n    // \u2500\u2500 Instance-scoped logging filter \u2500\u2500\r\n    // null = use global Logger settings; string = module filter\r\n    this._logModuleFilter = null;\r\n\r\n    // \u2500\u2500 Opponent heartbeat tracking \u2500\u2500\r\n    // Per-opponent time accumulators keyed by playerId\r\n    // Each value is { value: number } (high-water-mark in ms)\r\n    this._opponentTimeAccumulators = new Map();\r\n    // Set of our own anchor txIds so we can skip self-echoes\r\n    this._ownAnchorTxIds = new Set();\r\n\r\n    // \u2500\u2500 N-player anchor chain tracking \u2500\u2500\r\n    // Map<playerId, Set<txId>> - tracks each player's anchor chain\r\n    // Used to identify which player sent a heartbeat via prevTxId linkage\r\n    this._playerAnchorChains = new Map();\r\n\r\n    // \u2500\u2500 v5 custom action maps (set via startGame options) \u2500\u2500\r\n    this._customActionMap = null;\r\n    this._customAbilitiesMap = null;\r\n    this._customActionsMap = null;\r\n    this._customItemsMap = null;\r\n    this._customStatusMap = null;\r\n    this._customEmotesMap = null;\r\n    this._customSystemMap = null;\r\n  }\r\n\r\n  /**\r\n   * Enable or disable internal logging for THIS instance only.\r\n   *\r\n   * Instance-scoped: multiple KKGameEngine instances can have independent\r\n   * logging configurations without affecting each other.\r\n   *\r\n   * @param {boolean|string|Object} enabled - Logging configuration\r\n   *   - false: Disable logging for this instance\r\n   *   - true: Enable all logging for this instance\r\n   *   - string: Enable only the specified module (e.g., \"kktp.kkGameEngine\")\r\n   *   - { root: string }: Enable only the specified module root\r\n   * @returns {KKGameEngine} For chaining\r\n   */\r\n  logging(enabled = false) {\r\n    if (enabled === false) {\r\n      this._logModuleFilter = \"__disabled__\";\r\n      return this;\r\n    }\r\n\r\n    if (typeof enabled === \"string\") {\r\n      this._logModuleFilter = enabled;\r\n      return this;\r\n    }\r\n\r\n    if (enabled && typeof enabled === \"object\") {\r\n      const moduleName = enabled.root ?? null;\r\n      if (moduleName) {\r\n        this._logModuleFilter = moduleName;\r\n        return this;\r\n      }\r\n    }\r\n\r\n    // enabled === true: clear filter to use global settings\r\n    this._logModuleFilter = null;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Parse an anchor payload into a human-readable string.\r\n   * @param {Object} anchorItem\r\n   * @returns {string}\r\n   */\r\n  parseAnchor(anchorItem) {\r\n    return parseAnchor(anchorItem);\r\n  }\r\n\r\n  /**\r\n   * Audit a game session for cheating.\r\n   *\r\n   * If called with no arguments (or null), audits the most recent game\r\n   * by scanning the DAG from genesisBlockHashHex using the current\r\n   * gameIdTagHex. This is the recommended usage.\r\n   *\r\n   * Can also accept pre-collected audit data / anchor chain.\r\n   *\r\n   * @param {Object|Array|null} [auditDataOrChain] - Audit data, anchor chain, or null for auto\r\n   * @returns {Promise<Object>} Audit verdict with passed/failed/reasons\r\n   */\r\n  async auditCheating(auditDataOrChain = null) {\r\n    // Auto-fetch from DAG if no data provided\r\n    if (!auditDataOrChain) {\r\n      const dagData = await this.getAuditData();\r\n      if (!dagData) {\r\n        return {\r\n          passed: false,\r\n          verdict: \"fail\",\r\n          reasons: [\"no_audit_data_available\"],\r\n          warnings: [],\r\n        };\r\n      }\r\n      return auditCheating(dagData);\r\n    }\r\n\r\n    // If passed an object with DAG scan params, fetch from DAG first\r\n    if (auditDataOrChain && typeof auditDataOrChain === \"object\") {\r\n      const hasDagParams =\r\n        auditDataOrChain.gameId && auditDataOrChain.genesisBlockHashHex;\r\n      if (hasDagParams) {\r\n        const dagAudit = await this.getAuditData(auditDataOrChain);\r\n        const merged = dagAudit\r\n          ? {\r\n              ...dagAudit,\r\n              ...auditDataOrChain,\r\n              anchorChain: dagAudit.anchorChain,\r\n            }\r\n          : auditDataOrChain;\r\n        return auditCheating(merged);\r\n      }\r\n    }\r\n\r\n    return auditCheating(auditDataOrChain);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // LIFECYCLE - Init, Start, End\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Initialize the game engine with wallet credentials.\r\n   *\r\n   * Call this once when your game loads. After this, you can start games,\r\n   * record moves, and use all other features.\r\n   *\r\n   * @param {Object} options - Configuration options\r\n   * @param {string} options.password - Wallet password (user provides this)\r\n   * @param {string} options.walletName - Wallet filename (user provides this)\r\n   * @param {string} [options.network='testnet-10'] - Network to connect to\r\n   * @param {Function} [options.onBalanceChange] - Called when wallet balance changes\r\n   * @returns {Promise<{address: string, balance: number}>} Wallet info\r\n   *\r\n   * @example\r\n   * const { address, balance } = await game.init({\r\n   *   password: 'user-password',\r\n   *   walletName: 'my-game-wallet',\r\n   * });\r\n   */\r\n  async init(options = {}) {\r\n    const {\r\n      password,\r\n      walletName,\r\n      network = \"testnet-10\",\r\n      rpcUrl,\r\n      onBalanceChange,\r\n    } = options;\r\n\r\n    if (!password || !walletName) {\r\n      throw new Error(\"KKGameEngine: password and walletName are required\");\r\n    }\r\n\r\n    // Prevent double initialization\r\n    if (this._initPromise) {\r\n      return this._initPromise;\r\n    }\r\n\r\n    if (this._state === GameState.READY || this._state === GameState.IN_GAME) {\r\n      return { address: this._address, balance: this._balanceKas };\r\n    }\r\n\r\n    this._state = GameState.INITIALIZING;\r\n\r\n    this._initPromise = this._trackOperation((async () => {\r\n      this._ensureNotShuttingDown();\r\n\r\n      try {\r\n        if (!this._adapter) {\r\n          this._adapter = new KaspaAdapter();\r\n        }\r\n\r\n        // 1. Initialize WebAssembly\r\n        await this._withTimeout(\r\n          this._adapter.init(),\r\n          TIMEOUTS.INIT,\r\n          \"WASM initialization timed out\"\r\n        );\r\n\r\n        // 2. Connect to network\r\n        await this._withTimeout(\r\n          this._adapter.connect({\r\n            networkId: network,\r\n            rpcUrl,\r\n            onBalanceChange: (balance) => {\r\n              this._balanceKas = balance;\r\n              this._emit(GameEvent.BALANCE_CHANGED, {\r\n                balance: this._balanceKas,\r\n              });\r\n              onBalanceChange?.(this._balanceKas);\r\n\r\n              // Warn if funds are low\r\n              if (this._balanceKas < 1) {\r\n                this._emit(GameEvent.LOW_FUNDS, { balance: this._balanceKas });\r\n              }\r\n            },\r\n          }),\r\n          TIMEOUTS.CONNECT,\r\n          \"Network connection timed out\"\r\n        );\r\n\r\n        // 3. Open/create wallet\r\n        this._walletName = walletName;\r\n        const walletResult = await this._withTimeout(\r\n          this._adapter.createOrOpenWallet({\r\n            password,\r\n            walletFilename: walletName,\r\n          }),\r\n          TIMEOUTS.WALLET,\r\n          \"Wallet initialization timed out. Check your network and try again.\",\r\n        );\r\n        this._address = walletResult.address;\r\n\r\n        // 4. Create anchor facade (handles move recording + blockchain proofs)\r\n        // Custom action maps can be provided later via startGame()\r\n        this._anchor = new KaspaAnchorFacade({\r\n          adapter: this._adapter,\r\n          customActionMap:     this._customActionMap,\r\n          customAbilitiesMap:  this._customAbilitiesMap,\r\n          customActionsMap:    this._customActionsMap,\r\n          customItemsMap:      this._customItemsMap,\r\n          customStatusMap:     this._customStatusMap,\r\n          customEmotesMap:     this._customEmotesMap,\r\n          customSystemMap:     this._customSystemMap,\r\n        });\r\n\r\n        // 5. Create session facade (for multiplayer messaging)\r\n        this._session = new SessionFacade(this._adapter);\r\n\r\n        // 6. Setup internal event forwarding\r\n        this._setupEventForwarding();\r\n        this._startIncomingPayloadRouter();\r\n\r\n        // 7. Get initial balance\r\n        const balanceSompi = await this._withTimeout(\r\n          this._adapter.getBalance(),\r\n          TIMEOUTS.BALANCE,\r\n          \"Balance fetch timed out\"\r\n        );\r\n        this._balanceKas = Number(balanceSompi) / 100_000_000;\r\n\r\n        // 8. Initialize VRF\r\n        await this._withTimeout(\r\n          this._adapter.initVRF(),\r\n          TIMEOUTS.VRF,\r\n          \"VRF initialization timed out\"\r\n        );\r\n\r\n        this._state = GameState.READY;\r\n        this._emit(GameEvent.INITIALIZED, {\r\n          address: this._address,\r\n          balance: this._balanceKas,\r\n        });\r\n\r\n        return { address: this._address, balance: this._balanceKas };\r\n      } catch (error) {\r\n        this._state = GameState.ERROR;\r\n        this._emit(GameEvent.ERROR, { error: error.message, phase: \"init\" });\r\n        throw error;\r\n      } finally {\r\n        this._initPromise = null;\r\n      }\r\n    })());\r\n\r\n    return this._initPromise;\r\n  }\r\n\r\n  /**\r\n   * Set the game-layer SessionController so that the anchor processor\r\n   * (AuditTrail, EntropyProvider) can read vrfSeed, block hashes, etc.\r\n   * Called automatically by SessionController.setDependencies().\r\n   * @param {Object} sessionController\r\n   */\r\n  setSessionController(sessionController) {\r\n    this._anchor?.setSessionController?.(sessionController);\r\n  }\r\n\r\n  /**\r\n   * Start a new game session.\r\n   *\r\n   * Call this when a player starts a match. After this, you can record moves.\r\n   *\r\n   * @param {Object} options - Game options\r\n   * @param {string} [options.gameId] - Unique game ID (auto-generated if not provided)\r\n   * @param {string} [options.playerId] - Player ID (auto-generated if not provided)\r\n   * @param {string} [options.opponentId] - Opponent ID for multiplayer (optional)\r\n   * @param {number} [options.delay] - Seconds to offset start DAA score into the future\r\n   * @param {number} [options.gameLength] - Expected game duration in seconds\r\n   * @returns {Promise<{gameId: string, playerId: string, genesisAnchor: Object}>}\r\n   *\r\n   * @example\r\n   * const { gameId, playerId } = await game.startGame({\r\n   *   gameId: 'match-abc123',\r\n   *   playerId: 'player-1',\r\n   * });\r\n   */\r\n  async startGame(options = {}) {\r\n    this._ensureReady();\r\n\r\n    const gameId =\r\n      options.gameId ??\r\n      `game-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\r\n    const playerId =\r\n      options.playerId ?? `player-${Math.random().toString(36).slice(2, 10)}`;\r\n    const opponentId = options.opponentId ?? null;\r\n    const delaySeconds = Number.isFinite(options.delay)\r\n      ? Math.max(0, options.delay)\r\n      : 0;\r\n    const gameLengthSeconds = Number.isFinite(options.gameLength)\r\n      ? Math.max(0, options.gameLength)\r\n      : 0;\r\n\r\n    this._gameId = gameId;\r\n    this._playerId = playerId;\r\n    this._genesisBlockHashHex = null;\r\n    this._cachedAuditData = null; // Clear stale audit cache for new game\r\n\r\n    // v5: Store custom action maps if provided\r\n    if (options.customActionMap)    this._customActionMap    = options.customActionMap;\r\n    if (options.customAbilitiesMap) this._customAbilitiesMap = options.customAbilitiesMap;\r\n    if (options.customActionsMap)   this._customActionsMap   = options.customActionsMap;\r\n    if (options.customItemsMap)     this._customItemsMap     = options.customItemsMap;\r\n    if (options.customStatusMap)    this._customStatusMap    = options.customStatusMap;\r\n    if (options.customEmotesMap)    this._customEmotesMap    = options.customEmotesMap;\r\n    if (options.customSystemMap)    this._customSystemMap    = options.customSystemMap;\r\n\r\n    // If custom maps were provided, update the packer's maps\r\n    if (options.customActionMap || options.customAbilitiesMap || options.customActionsMap) {\r\n      const { buildActionMaps } = await import(\"./core/constants.js\");\r\n      const maps = buildActionMaps({\r\n        actionMap:     this._customActionMap,\r\n        abilitiesMap:  this._customAbilitiesMap,\r\n        actionsMap:    this._customActionsMap,\r\n        itemsMap:      this._customItemsMap,\r\n        statusMap:     this._customStatusMap,\r\n        emotesMap:     this._customEmotesMap,\r\n        systemMap:     this._customSystemMap,\r\n      });\r\n      this._anchor?.processor?._packer?.setActionMaps?.(maps);\r\n    }\r\n\r\n    // Start the anchor processor (handles merkle tree, VRF, etc.)\r\n    this._anchor.startGame({\r\n      gameId,\r\n      playerId,\r\n      opponentId,\r\n    });\r\n\r\n    this._subscribeAnchorPrefixes();\r\n\r\n    let latestBlock = null;\r\n    try {\r\n      const blocks = await this._withTimeout(\r\n        this._adapter.getKaspaBlocks(1),\r\n        TIMEOUTS.BLOCK_FETCH,\r\n        \"Block fetch timed out\"\r\n      );\r\n      latestBlock = blocks?.[0] ?? null;\r\n      const blockHash = latestBlock?.hash ?? null;\r\n      this._genesisBlockHashHex =\r\n        typeof blockHash === \"string\" ? blockHash : null;\r\n    } catch (e) {\r\n      throw new Error(\r\n        `KKGameEngine: Failed to fetch latest Kaspa block for DAA bounds (${e?.message ?? e})`,\r\n      );\r\n    }\r\n\r\n    const baseDaaScore = Number(latestBlock?.daaScore ?? 0);\r\n    if (!Number.isFinite(baseDaaScore) || baseDaaScore <= 0) {\r\n      throw new Error(\r\n        \"KKGameEngine: Missing DAA score from latest Kaspa block\",\r\n      );\r\n    }\r\n\r\n    const startDaaScore = Math.floor(baseDaaScore + delaySeconds * 10);\r\n    const endDaaScore = Math.floor(startDaaScore + gameLengthSeconds * 10);\r\n\r\n    let prefetchedQrng = null;\r\n    try {\r\n      prefetchedQrng = await this._withTimeout(\r\n        this._adapter.getQRNG(\"nist\", 32),\r\n        TIMEOUTS.QRNG,\r\n        \"QRNG fetch timed out\"\r\n      );\r\n    } catch (e) {\r\n      throw new Error(\r\n        `KKGameEngine: Failed to fetch NIST QRNG (${e?.message ?? e})`,\r\n      );\r\n    }\r\n\r\n    if (!prefetchedQrng || !Number.isFinite(prefetchedQrng.pulseIndex)) {\r\n      throw new Error(\"KKGameEngine: Missing NIST pulse data\");\r\n    }\r\n\r\n    // Prepare UTXOs for rapid transactions\r\n    try {\r\n      await this._anchor.prepareForGame();\r\n    } catch (e) {\r\n      log.warn(\r\n        \"KKGameEngine: Could not prepare UTXOs (may have low funds)\",\r\n        e.message,\r\n      );\r\n    }\r\n\r\n    // Anchor genesis seed (captures initial randomness from blockchain)\r\n    let genesisResult = null;\r\n    try {\r\n      genesisResult = await this._anchor.anchorGenesisSeed({\r\n        startDaaScore,\r\n        endDaaScore,\r\n        prefetchedData: {\r\n          qrng: prefetchedQrng,\r\n        },\r\n      });\r\n    } catch (e) {\r\n      log.warn(\"KKGameEngine: Genesis anchor failed\", e.message);\r\n      throw e;\r\n    }\r\n\r\n    this._state = GameState.IN_GAME;\r\n    this._emit(GameEvent.GAME_STARTED, {\r\n      gameId,\r\n      playerId,\r\n      genesis: genesisResult,\r\n      genesisBlockHashHex: this._genesisBlockHashHex,\r\n      startDaaScore,\r\n      endDaaScore,\r\n    });\r\n\r\n    return {\r\n      gameId,\r\n      gameIdTagHex: this._anchor?.processor?.gameIdTagHex ?? null,\r\n      genesisBlockHashHex: this._genesisBlockHashHex,\r\n      playerId,\r\n      genesisAnchor: genesisResult,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * End the current game and anchor final state to blockchain.\r\n   *\r\n   * Call this when the game is over. This creates an immutable on-chain\r\n   * record of the game result that can be verified by anyone.\r\n   *\r\n   * @param {Object} [endState] - Final game state\r\n   * @param {number} [endState.score] - Final score\r\n   * @param {number} [endState.coins] - Coins collected\r\n   * @param {string} [endState.result] - 'win', 'lose', 'draw', etc.\r\n   * @param {Object} [endState.metadata] - Any additional data\r\n   * @returns {Promise<{success: boolean, txId: string|null, auditData: Object}>}\r\n   *\r\n   * @example\r\n   * const result = await game.endGame({\r\n   *   score: 1500,\r\n   *   coins: 42,\r\n   *   result: 'win',\r\n   * });\r\n   */\r\n  async endGame(endState = {}) {\r\n    if (this._state !== GameState.IN_GAME) {\r\n      log.warn(\"KKGameEngine: No active game to end\");\r\n      return { success: false, txId: null, auditData: null };\r\n    }\r\n\r\n    this._state = GameState.ENDING;\r\n\r\n    let result = { success: false, txId: null, auditData: null };\r\n\r\n    try {\r\n      // Anchor final state to blockchain before stopping processors\r\n      const anchorResult = await this._anchor.anchorFinalState(endState);\r\n\r\n      // CRITICAL: Get audit data BEFORE stopping - stop() wipes the vault\r\n      const auditData = this._anchor.getAuditData();\r\n\r\n      // Cache the audit snapshot so getAuditData() returns it after stop\r\n      this._cachedAuditData = auditData;\r\n\r\n      // Stop the anchor processor after collecting audit data\r\n      await this._anchor.stopGame();\r\n\r\n      result = {\r\n        success: anchorResult?.success ?? true,\r\n        txId: anchorResult?.txId ?? null,\r\n        auditData,\r\n      };\r\n\r\n      this._emit(GameEvent.GAME_ENDED, {\r\n        gameId: this._gameId,\r\n        endState,\r\n        ...result,\r\n      });\r\n    } catch (error) {\r\n      result = {\r\n        success: false,\r\n        txId: null,\r\n        auditData: null,\r\n        error: error.message,\r\n      };\r\n      this._emit(GameEvent.ERROR, { error: error.message, phase: \"endGame\" });\r\n    }\r\n\r\n    this._clearAnchorPrefixes();\r\n    this._opponentTimeAccumulators.clear();\r\n    this._ownAnchorTxIds.clear();\r\n    this._playerAnchorChains.clear();\r\n\r\n    this._state = GameState.READY;\r\n    this._gameId = null;\r\n    this._playerId = null;\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Completely shutdown the game engine.\r\n   *\r\n   * Call this when the user exits the game entirely. Closes wallet,\r\n   * disconnects from network, and releases all resources.\r\n   *\r\n   * Implements graceful shutdown:\r\n   * 1. Signals shutdown intent (rejects new operations)\r\n   * 2. Drains all in-flight async operations\r\n   * 3. Cleans up all resources to prevent memory leaks\r\n   * 4. Nulls references only after everything is settled\r\n   */\r\n  async shutdown() {\r\n    // Signal shutdown intent - new operations will be rejected\r\n    this._shuttingDown = true;\r\n\r\n    // End any active game first\r\n    if (this._state === GameState.IN_GAME) {\r\n      try {\r\n        await this.endGame();\r\n      } catch (e) {\r\n        log.warn(\"KKGameEngine: Error ending game during shutdown\", e?.message);\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500 Drain active operations \u2500\u2500\r\n    // Wait for all in-flight promises to settle (success or failure)\r\n    if (this._activeOperations.size > 0) {\r\n      log.debug(\"KKGameEngine: Draining active operations\", {\r\n        count: this._activeOperations.size,\r\n      });\r\n      await Promise.allSettled([...this._activeOperations]);\r\n    }\r\n\r\n    // \u2500\u2500 Clean up block stream (prevent memory leak) \u2500\u2500\r\n    if (this._blockUnsubscribe) {\r\n      try {\r\n        this._blockUnsubscribe();\r\n      } catch (e) {\r\n        log.warn(\"KKGameEngine: Error unsubscribing block stream\", e?.message);\r\n      }\r\n    }\r\n    this._blockUnsubscribe = null;\r\n    this._blockHandlers = [];\r\n    this._blockStreamActive = false;\r\n\r\n    // \u2500\u2500 Clean up anchor prefixes \u2500\u2500\r\n    this._clearAnchorPrefixes();\r\n\r\n    // \u2500\u2500 Clean up incoming router \u2500\u2500\r\n    if (typeof this._incomingUnsubscribe === \"function\") {\r\n      try {\r\n        this._incomingUnsubscribe();\r\n      } catch (e) {\r\n        log.warn(\"KKGameEngine: Error unsubscribing incoming router\", e?.message);\r\n      }\r\n    }\r\n    this._incomingUnsubscribe = null;\r\n    this._incomingRouterActive = false;\r\n\r\n    // \u2500\u2500 Destroy subsystems \u2500\u2500\r\n    try {\r\n      this._anchor?.destroy();\r\n    } catch (e) {\r\n      log.warn(\"KKGameEngine: Error destroying anchor\", e?.message);\r\n    }\r\n\r\n    // \u2500\u2500 Disconnect adapter with timeout \u2500\u2500\r\n    if (this._adapter) {\r\n      try {\r\n        await this._withTimeout(\r\n          this._adapter.disconnect(),\r\n          TIMEOUTS.DISCONNECT,\r\n          \"Disconnect timed out\"\r\n        );\r\n      } catch (e) {\r\n        log.warn(\"KKGameEngine: Error disconnecting adapter\", e?.message);\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500 Clear all tracking state \u2500\u2500\r\n    this._opponentTimeAccumulators.clear();\r\n    this._ownAnchorTxIds.clear();\r\n    this._playerAnchorChains.clear();\r\n    this._listeners.clear();\r\n    this._activeOperations.clear();\r\n\r\n    // \u2500\u2500 Null references LAST (after all async work is done) \u2500\u2500\r\n    this._adapter = null;\r\n    this._anchor = null;\r\n    this._session = null;\r\n    this._lobby = null;\r\n    this._initPromise = null;\r\n    this._cachedAuditData = null;\r\n\r\n    this._state = GameState.UNINITIALIZED;\r\n    this._shuttingDown = false;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // MOVES - Record and receive game actions\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Record a player move with provable randomness.\r\n   *\r\n   * This is the core method for recording game actions. Each move:\r\n   * - Gets a cryptographically verifiable random number\r\n   * - Is added to a tamper-proof merkle tree\r\n   * - Can later be anchored to the blockchain\r\n   *\r\n   * @param {string} action - Move type (e.g., 'jump', 'attack', 'use_item')\r\n   * @param {Object} [data] - Additional move data\r\n   * @param {number} [data.lane] - Lane/position (for lane-based games)\r\n   * @param {*} [data.*] - Any other game-specific data\r\n   * @returns {Promise<{moveId: string, sequence: number, randomValue: string, randomNumber: number}>}\r\n   *\r\n   * @example\r\n   * // Simple move\r\n   * const move = await game.recordMove('jump');\r\n   *\r\n   * // Move with data\r\n   * const move = await game.recordMove('attack', {\r\n   *   lane: 2,\r\n   *   targetId: 'enemy-1',\r\n   * });\r\n   *\r\n   * // Use the random value for game logic\r\n   * const damage = Math.floor(move.randomNumber * 50) + 10; // 10-60 damage\r\n   */\r\n  async recordMove(action, data = {}) {\r\n    this._ensureInGame();\r\n\r\n    const move = await this._anchor.processMove(action, data);\r\n\r\n    // Extract random value from VRF output (32 bytes = 64 hex chars)\r\n    const randomValue = move.vrfOutput ?? \"\";\r\n    // Convert first 8 hex chars to a 0-1 float for convenience\r\n    const randomNumber = randomValue\r\n      ? parseInt(randomValue.slice(0, 8), 16) / 0xffffffff\r\n      : Math.random();\r\n\r\n    const result = {\r\n      moveId: move.moveId,\r\n      sequence: move.sequence,\r\n      randomValue,\r\n      randomNumber,\r\n      timestamp: move.timestamp,\r\n      merkleRoot: move.merkleRoot,\r\n    };\r\n\r\n    // v5: forward x/y/z for MOVE actions so the caller can see them\r\n    if (data.x != null || data.y != null || data.z != null) {\r\n      result.x = data.x;\r\n      result.y = data.y;\r\n      result.z = data.z;\r\n    }\r\n\r\n    this._emit(GameEvent.MOVE_RECORDED, result);\r\n    this._emit(GameEvent.RANDOM_GENERATED, { randomValue, randomNumber });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Record a game event (coins, collisions, powerups, etc.)\r\n   *\r\n   * Use this for non-move events that should be part of the game record.\r\n   *\r\n   * @param {string} eventType - Event type ('coin_collected', 'collision', 'powerup', etc.)\r\n   * @param {Object} [data] - Event data\r\n   * @returns {Object} Event record\r\n   *\r\n   * @example\r\n   * game.recordEvent('coin_collected', { lane: 1, value: 10 });\r\n   * game.recordEvent('powerup_collected', { type: 'shield', duration: 5000 });\r\n   */\r\n  recordEvent(eventType, data = {}) {\r\n    this._ensureInGame();\r\n    return this._anchor.processGameEvent(eventType, data);\r\n  }\r\n\r\n  /**\r\n   * Receive and validate an opponent's move (multiplayer).\r\n   *\r\n   * @param {Object} moveData - Move data received from opponent\r\n   * @returns {Promise<{valid: boolean, move: Object, reason?: string}>}\r\n   */\r\n  async receiveOpponentMove(moveData) {\r\n    this._ensureInGame();\r\n\r\n    const result = await this._anchor.receiveOpponentMove(moveData);\r\n\r\n    return result;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // RANDOMNESS - Get provable random numbers\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Subscribe to live Kaspa block stream.\r\n   * @param {Function} handler - Called with each new block\r\n   */\r\n  onBlock(handler) {\r\n    this._blockHandlers.push(handler);\r\n    if (!this._blockStreamActive) {\r\n      // Start the underlying kaspaPortal stream only once\r\n      this._blockStreamActive = true;\r\n      this._blockUnsubscribe = this._adapter.onNewBlock((block) => {\r\n        for (const cb of this._blockHandlers) {\r\n          try {\r\n            cb(block);\r\n          } catch (e) {\r\n            log.warn(\"KKGameEngine: onBlock handler error\", e);\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe a handler from the live Kaspa block stream.\r\n   * @param {Function} handler - Handler to remove\r\n   */\r\n  offBlock(handler) {\r\n    if (handler) {\r\n      // Remove all instances of the given handler\r\n      this._blockHandlers = this._blockHandlers.filter((cb) => cb !== handler);\r\n    } else {\r\n      // Remove the most recently added handler\r\n      this._blockHandlers.pop();\r\n    }\r\n    if (this._blockHandlers.length === 0 && this._blockUnsubscribe) {\r\n      this._blockUnsubscribe();\r\n      this._blockStreamActive = false;\r\n      this._blockUnsubscribe = null;\r\n    }\r\n  }\r\n\r\n  async getKaspaBlocks(n) {\r\n    this._ensureReady();\r\n    return await this._withTimeout(\r\n      this._adapter.getKaspaBlocks(n),\r\n      TIMEOUTS.BLOCK_FETCH,\r\n      \"Block fetch timed out\"\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Fetch quantum random numbers through the engine facade.\r\n   * @param {string} [provider='nist'] - QRNG provider\r\n   * @param {number} [length=32] - Number of bytes\r\n   * @returns {Promise<Object>}\r\n   */\r\n  async getQRNG(provider = \"nist\", length = 32) {\r\n    this._ensureReady();\r\n\r\n    if (!this._adapter?.getQRNG) {\r\n      throw new Error(\"KKGameEngine: QRNG provider unavailable\");\r\n    }\r\n\r\n    const result = await this._withTimeout(\r\n      this._adapter.getQRNG(provider, length),\r\n      TIMEOUTS.QRNG,\r\n      \"QRNG fetch timed out\"\r\n    );\r\n    const pulse = result?.pulse ?? result;\r\n    if (!pulse?.pulseIndex) {\r\n      return result;\r\n    }\r\n\r\n    const outputValue =\r\n      typeof pulse.outputValue === \"string\"\r\n        ? pulse.outputValue\r\n        : (pulse.outputValue?.value ??\r\n          pulse.outputValue?.outputValue ??\r\n          pulse.outputValue?.output ??\r\n          \"\");\r\n\r\n    const signatureValue =\r\n      typeof pulse.signatureValue === \"string\"\r\n        ? pulse.signatureValue\r\n        : (pulse.signatureValue?.value ??\r\n          pulse.signatureValue?.signatureValue ??\r\n          pulse.signatureValue?.signature ??\r\n          \"\");\r\n\r\n    return {\r\n      ...pulse,\r\n      outputValue,\r\n      signatureValue,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get a provable random number.\r\n   *\r\n   * This generates cryptographically secure randomness using blockchain\r\n   * entropy. The randomness can be independently verified by anyone.\r\n   *\r\n   * @param {Object} [options] - Options\r\n   * @param {string} [options.seed] - Additional seed input\r\n   * @returns {Promise<{value: string, number: number, proof: Object}>}\r\n   *\r\n   * @example\r\n   * // Get random for game logic\r\n   * const random = await game.getRandom();\r\n   * const diceRoll = Math.floor(random.number * 6) + 1; // 1-6\r\n   *\r\n   * // Get random with custom seed\r\n   * const random = await game.getRandom({ seed: 'turn-5-attack' });\r\n   */\r\n  async getRandom(options = {}) {\r\n    this._ensureReady();\r\n\r\n    const seed = options.seed ?? `rand-${Date.now()}-${Math.random()}`;\r\n\r\n    const result = await this._withTimeout(\r\n      this._adapter.prove({ seedInput: seed }),\r\n      TIMEOUTS.VRF,\r\n      \"VRF prove operation timed out\"\r\n    );\r\n\r\n    const value = result.finalOutput ?? \"\";\r\n    const number = value\r\n      ? parseInt(value.slice(0, 8), 16) / 0xffffffff\r\n      : Math.random();\r\n\r\n    const output = {\r\n      value,\r\n      number,\r\n      proof: result.proof,\r\n    };\r\n\r\n    this._emit(GameEvent.RANDOM_GENERATED, {\r\n      randomValue: value,\r\n      randomNumber: number,\r\n    });\r\n\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Shuffle an array using provable randomness.\r\n   *\r\n   * @param {Array} array - Array to shuffle\r\n   * @returns {Promise<Array>} New shuffled array\r\n   *\r\n   * @example\r\n   * const deck = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\r\n   * const shuffled = await game.shuffle(deck);\r\n   */\r\n  async shuffle(array) {\r\n    this._ensureReady();\r\n    return await this._withTimeout(\r\n      this._adapter.shuffle(array),\r\n      TIMEOUTS.VRF,\r\n      \"Shuffle operation timed out\"\r\n    );\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // GAME READINESS - UTXO pool for instant game start\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Subscribe to game readiness events.\r\n   *\r\n   * Use this to know when the game is ready for instant start.\r\n   * The handler is called when UTXO pool is ready for rapid transactions.\r\n   *\r\n   * @param {Function} handler - Called with { poolStatus } when game is ready\r\n   * @returns {Function} Unsubscribe function\r\n   *\r\n   * @example\r\n   * const unsubscribe = game.onGameReady((data) => {\r\n   *   console.log('Game ready!', data.poolStatus);\r\n   *   enableStartButton();\r\n   * });\r\n   */\r\n  onGameReady(handler) {\r\n    return this.on(GameEvent.GAME_READY, handler);\r\n  }\r\n\r\n  /**\r\n   * Get current UTXO pool status.\r\n   *\r\n   * Use this to check if the game is ready before starting,\r\n   * or to show pool health in the UI.\r\n   *\r\n   * @returns {{available: number, reserved: number, isReady: boolean, isDegraded: boolean}}\r\n   *\r\n   * @example\r\n   * const status = game.getPoolStatus();\r\n   * if (status.isReady) {\r\n   *   startGame();\r\n   * } else if (status.isDegraded) {\r\n   *   showWarning('Low funds - game may have issues');\r\n   * }\r\n   */\r\n  getPoolStatus() {\r\n    if (!this._anchor?.getPoolStatus) {\r\n      return { available: 0, reserved: 0, isReady: false, isDegraded: true };\r\n    }\r\n    return this._anchor.getPoolStatus();\r\n  }\r\n\r\n  /**\r\n   * Prepare UTXO pool for instant game start.\r\n   *\r\n   * Call this during lobby join/create to pre-split UTXOs.\r\n   * This ensures game start is instant with no network delays.\r\n   *\r\n   * The GAME_READY event fires when preparation completes.\r\n   *\r\n   * @returns {Promise<{success: boolean, poolStatus: Object}>}\r\n   *\r\n   * @example\r\n   * // In lobby UI, after joining:\r\n   * await game.prepareUtxoPool();\r\n   * // Now game.startGame() will be instant\r\n   */\r\n  async prepareUtxoPool() {\r\n    this._ensureReady();\r\n\r\n    if (!this._anchor?.ensureUtxoPoolReady) {\r\n      throw new Error(\"Anchor facade not initialized\");\r\n    }\r\n\r\n    const result = await this._anchor.ensureUtxoPoolReady();\r\n\r\n    if (result.success) {\r\n      this._emit(GameEvent.GAME_READY, { poolStatus: result.poolStatus });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // MULTIPLAYER - Lobbies and messaging\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Create a multiplayer lobby.\r\n   *\r\n   * @param {Object} options - Lobby options\r\n   * @param {string} [options.name] - Lobby name\r\n   * @param {number} [options.maxPlayers] - Maximum players allowed\r\n   * @param {Object} [options.settings] - Game-specific settings\r\n   * @returns {Promise<{lobbyId: string, joinCode: string}>}\r\n   *\r\n   * @example\r\n   * const lobby = await game.createLobby({\r\n   *   name: 'My Game Room',\r\n   *   maxPlayers: 4,\r\n   * });\r\n   * console.log('Share this code:', lobby.joinCode);\r\n   */\r\n  async createLobby(options = {}) {\r\n    this._ensureReady();\r\n    this._ensureNotShuttingDown();\r\n    this._ensureLobby();\r\n\r\n    const lobbyName = options.lobbyName ?? options.name ?? \"KKTP Lobby\";\r\n    const gameName = options.gameName ?? options.game ?? \"KKTP Game\";\r\n    const maxMembers = options.maxMembers ?? options.maxPlayers ?? 2;\r\n    const displayName = options.displayName ?? undefined;\r\n\r\n    const result = await this._withTimeout(\r\n      this._lobby.hostLobby({\r\n        ...options,\r\n        lobbyName,\r\n        gameName,\r\n        maxMembers,\r\n        displayName,\r\n      }),\r\n      TIMEOUTS.LOBBY_CREATE,\r\n      \"Lobby creation timed out\"\r\n    );\r\n\r\n    return {\r\n      lobbyId: result.lobbyId ?? this._lobby.getGroupMailboxId(),\r\n      joinCode: result.joinCode,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Join an existing lobby.\r\n   *\r\n   * @param {string|Object} lobbyOrCode - Join code or lobby discovery anchor\r\n   * @param {string} [displayName] - Your display name in the lobby\r\n   * @returns {Promise<{success: boolean, lobbyId: string}>}\r\n   */\r\n  async joinLobby(lobbyOrCode, displayName) {\r\n    this._ensureReady();\r\n    this._ensureNotShuttingDown();\r\n    this._ensureLobby();\r\n\r\n    const result = await this._withTimeout(\r\n      this._lobby.joinLobby(lobbyOrCode, displayName),\r\n      TIMEOUTS.LOBBY_JOIN,\r\n      \"Lobby join timed out\"\r\n    );\r\n    return {\r\n      success: true,\r\n      lobbyId: this._lobby.getGroupMailboxId(),\r\n      ...result,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Discover lobbies with a callback.\r\n   *\r\n   * @param {Function} onLobby - Callback for each discovered lobby\r\n   * @param {string|null} [prefix] - Optional payload prefix override\r\n   * @returns {Function} Unsubscribe function\r\n   */\r\n  searchLobbies(onLobby, prefix = null) {\r\n    this._ensureReady();\r\n    this._ensureLobby();\r\n\r\n    let stopped = false;\r\n    let controller = null;\r\n\r\n    const start = async () => {\r\n      try {\r\n        controller = await this._lobby.discoverLobby({\r\n          prefix:\r\n            typeof prefix === \"string\" && prefix.length > 0\r\n              ? prefix\r\n              : undefined,\r\n          onLobby,\r\n        });\r\n\r\n        if (stopped) {\r\n          controller?.stop?.();\r\n        }\r\n      } catch (err) {\r\n        this._emit(GameEvent.ERROR, {\r\n          error: err?.message || String(err),\r\n          phase: \"lobby_search\",\r\n        });\r\n      }\r\n    };\r\n\r\n    void start();\r\n\r\n    return () => {\r\n      stopped = true;\r\n      controller?.stop?.();\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Leave the current lobby.\r\n   *\r\n   * @param {string} [reason] - Reason for leaving\r\n   */\r\n  async leaveLobby(reason) {\r\n    if (this._lobby) {\r\n      await this._lobby.leaveLobby(reason);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the current lobby (host only).\r\n   *\r\n   * @param {string} [reason] - Reason for closing\r\n   */\r\n  async closeLobby(reason) {\r\n    this._ensureLobby();\r\n    if (this._lobby) {\r\n      await this._lobby.closeLobby(reason);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Send a message to everyone in the lobby.\r\n   *\r\n   * @param {string|Object} message - Message to send\r\n   */\r\n  async sendLobbyMessage(message) {\r\n    this._ensureLobby();\r\n    if (this._lobby?.currentState === LOBBY_STATES.JOINING) {\r\n      const joined = await this._waitForLobbyState(LOBBY_STATES.MEMBER, 15000);\r\n      if (!joined) {\r\n        throw new Error(\"Lobby join not completed yet\");\r\n      }\r\n    }\r\n    const text =\r\n      typeof message === \"string\" ? message : JSON.stringify(message);\r\n    await this._lobby.sendGroupMessage(text);\r\n  }\r\n\r\n  /**\r\n   * Get current lobby members.\r\n   *\r\n   * @returns {Array<{id: string, name: string, isHost: boolean}>}\r\n   */\r\n  getLobbyMembers() {\r\n    const members = this._lobby?.members ?? [];\r\n    return members.map((member) => ({\r\n      id: member?.pubSig ?? member?.id ?? null,\r\n      name: member?.displayName ?? member?.name ?? null,\r\n      isHost: member?.role === \"host\" || member?.isHost === true,\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Check if we are the lobby host.\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  get isLobbyHost() {\r\n    return this._lobby?.isHost ?? false;\r\n  }\r\n\r\n  /**\r\n   * Check if we are currently in a lobby.\r\n   * @returns {boolean}\r\n   */\r\n  isInLobby() {\r\n    return this._lobby?.isInLobby?.() ?? false;\r\n  }\r\n\r\n  /**\r\n   * Get current lobby info.\r\n   * @returns {Object|null}\r\n   */\r\n  get lobbyInfo() {\r\n    return this._lobby?.lobbyInfo ?? null;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // WALLET - Balance and address info\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Get the wallet address.\r\n   *\r\n   * @returns {string|null}\r\n   */\r\n  get address() {\r\n    return this._address;\r\n  }\r\n\r\n  /**\r\n   * Get the current balance in KAS.\r\n   *\r\n   * @returns {number}\r\n   */\r\n  get balance() {\r\n    return this._balanceKas;\r\n  }\r\n\r\n  /**\r\n   * Refresh and get current balance.\r\n   *\r\n   * @returns {Promise<number>} Balance in KAS\r\n   */\r\n  async getBalance() {\r\n    this._ensureReady();\r\n    const sompi = await this._withTimeout(\r\n      this._adapter.getBalance(),\r\n      TIMEOUTS.BALANCE,\r\n      \"Balance fetch timed out\"\r\n    );\r\n    this._balanceKas = Number(sompi) / 100_000_000;\r\n    return this._balanceKas;\r\n  }\r\n\r\n  /**\r\n   * Get the wallet mnemonic after password verification.\r\n   * @param {Object} options\r\n   * @param {string} options.password\r\n   * @returns {Promise<string>}\r\n   */\r\n  async getMnemonic(options = {}) {\r\n    this._ensureReady();\r\n    const password = options.password ?? \"\";\r\n    const walletName = this._walletName;\r\n\r\n    if (!walletName) {\r\n      throw new Error(\"KKGameEngine: wallet not initialized\");\r\n    }\r\n    if (!password) {\r\n      throw new Error(\"KKGameEngine: password is required\");\r\n    }\r\n\r\n    const walletResult = await this._withTimeout(\r\n      this._adapter.createOrOpenWallet({\r\n        password,\r\n        walletFilename: walletName,\r\n      }),\r\n      TIMEOUTS.WALLET,\r\n      \"Wallet open timed out\"\r\n    );\r\n    if (walletResult?.address) {\r\n      this._address = walletResult.address;\r\n    }\r\n\r\n    return await this._withTimeout(\r\n      this._adapter.getMnemonic(),\r\n      TIMEOUTS.WALLET,\r\n      \"Mnemonic fetch timed out\"\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Delete a wallet from browser storage after password verification.\r\n   * @param {Object} options\r\n   * @param {string} options.password\r\n   * @param {string} [options.walletName]\r\n   * @returns {Promise<void>}\r\n   */\r\n  async deleteWallet(options = {}) {\r\n    this._ensureReady();\r\n    const password = options.password ?? \"\";\r\n    const walletName = options.walletName ?? this._walletName;\r\n\r\n    if (!walletName) {\r\n      throw new Error(\"KKGameEngine: wallet not initialized\");\r\n    }\r\n    if (!password) {\r\n      throw new Error(\"KKGameEngine: password is required\");\r\n    }\r\n\r\n    await this._withTimeout(\r\n      this._adapter.createOrOpenWallet({\r\n        password,\r\n        walletFilename: walletName,\r\n      }),\r\n      TIMEOUTS.WALLET,\r\n      \"Wallet open timed out\"\r\n    );\r\n    if (this._adapter.closeWallet) {\r\n      await this._withTimeout(\r\n        this._adapter.closeWallet(),\r\n        TIMEOUTS.WALLET,\r\n        \"Wallet close timed out\"\r\n      );\r\n    }\r\n    await this._withTimeout(\r\n      this._adapter.deleteWallet(walletName),\r\n      TIMEOUTS.WALLET,\r\n      \"Wallet delete timed out\"\r\n    );\r\n\r\n    if (walletName === this._walletName) {\r\n      this._walletName = null;\r\n      this._address = null;\r\n      this._balanceKas = 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if the engine has enough funds for gameplay.\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  get hasSufficientFunds() {\r\n    return this._balanceKas >= 0.5;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // STATE - Current engine state\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Get current engine state.\r\n   *\r\n   * @returns {GameState}\r\n   */\r\n  get state() {\r\n    return this._state;\r\n  }\r\n\r\n  /**\r\n   * Check if engine is initialized and ready.\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  get isReady() {\r\n    return this._state === GameState.READY || this._state === GameState.IN_GAME;\r\n  }\r\n\r\n  /**\r\n   * Check if a game is currently active.\r\n   *\r\n   * @returns {boolean}\r\n   */\r\n  get isInGame() {\r\n    return this._state === GameState.IN_GAME;\r\n  }\r\n\r\n  /**\r\n   * Get current game ID.\r\n   *\r\n   * @returns {string|null}\r\n   */\r\n  get gameId() {\r\n    return this._gameId;\r\n  }\r\n\r\n  /**\r\n   * Get current player ID.\r\n   *\r\n   * @returns {string|null}\r\n   */\r\n  get playerId() {\r\n    return this._playerId;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // AUDIT - Get proof and verification data\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Get all audit data for the current game.\r\n   *\r\n   * Use this to verify game integrity or share proof of gameplay.\r\n   *\r\n   * @param {Object|string} [options] - Options or gameId for DAG scanning\r\n   * @param {string} [genesisBlockHashHex] - Required when passing gameId\r\n   * @returns {Object|Promise<Object>|null} Audit data including merkle proofs\r\n   */\r\n  getAuditData(options = {}, genesisBlockHashHex = null) {\r\n    // Return cached snapshot if available (after endGame() wipes the vault)\r\n    if (\r\n      !options ||\r\n      (typeof options === \"object\" &&\r\n        !options.gameId &&\r\n        !options.genesisBlockHashHex)\r\n    ) {\r\n      if (this._cachedAuditData) {\r\n        return this._cachedAuditData;\r\n      }\r\n    }\r\n\r\n    if (typeof options === \"string\") {\r\n      const gameId = options;\r\n      if (!genesisBlockHashHex) {\r\n        throw new Error(\r\n          \"KKGameEngine: genesisBlockHashHex is required for DAG audit\",\r\n        );\r\n      }\r\n      return (\r\n        this._anchor?.getAuditDataFromDag({\r\n          gameId,\r\n          genesisBlockHashHex,\r\n        }) ?? null\r\n      );\r\n    }\r\n    if (\r\n      options &&\r\n      typeof options === \"object\" &&\r\n      options.gameId &&\r\n      options.genesisBlockHashHex\r\n    ) {\r\n      return this._anchor?.getAuditDataFromDag(options) ?? null;\r\n    }\r\n    return this._anchor?.getAuditData(options) ?? null;\r\n  }\r\n\r\n  /**\r\n   * Get the genesis anchor transaction ID.\r\n   * @returns {string|null}\r\n   */\r\n  get genesisTxId() {\r\n    return this._anchor?.processor?.genesisTxId ?? null;\r\n  }\r\n\r\n  /**\r\n   * Get the last anchor transaction ID.\r\n   * @returns {string|null}\r\n   */\r\n  get lastAnchorTxId() {\r\n    return this._anchor?.processor?.lastAnchorTxId ?? null;\r\n  }\r\n\r\n  /**\r\n   * Get the hex-encoded game ID tag used for on-chain prefix matching.\r\n   * @returns {string|null}\r\n   */\r\n  get gameIdTagHex() {\r\n    return this._anchor?.processor?.gameIdTagHex ?? null;\r\n  }\r\n\r\n  /**\r\n   * Get the genesis block hash hex used for DAG scanning bounds.\r\n   * @returns {string|null}\r\n   */\r\n  get genesisBlockHashHex() {\r\n    return this._genesisBlockHashHex;\r\n  }\r\n\r\n  /**\r\n   * Get the merkle root (fingerprint of all moves).\r\n   *\r\n   * @returns {string|null}\r\n   */\r\n  getMerkleRoot() {\r\n    return this._anchor?.getMerkleRoot() ?? null;\r\n  }\r\n\r\n  /**\r\n   * Get complete move history with proofs.\r\n   *\r\n   * @returns {Array}\r\n   */\r\n  getMoveHistory() {\r\n    return this._anchor?.getMoveHistory() ?? [];\r\n  }\r\n\r\n  /**\r\n   * Get total move count in current game.\r\n   *\r\n   * @returns {number}\r\n   */\r\n  getMoveCount() {\r\n    return this._anchor?.getMoveCount() ?? 0;\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // EVENTS - Subscribe to game events\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Subscribe to a game event.\r\n   *\r\n   * @param {string} event - Event name from GameEvent\r\n   * @param {Function} handler - Event handler\r\n   * @returns {this} For chaining\r\n   *\r\n   * @example\r\n   * game.on(GameEvent.MOVE_RECORDED, (move) => {\r\n   *   console.log('Move recorded:', move);\r\n   * });\r\n   *\r\n   * game.on(GameEvent.BALANCE_CHANGED, (data) => {\r\n   *   console.log('Balance:', data.balance, 'KAS');\r\n   * });\r\n   */\r\n  on(event, handler) {\r\n    if (!this._listeners.has(event)) {\r\n      this._listeners.set(event, new Set());\r\n    }\r\n    this._listeners.get(event).add(handler);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Unsubscribe from a game event.\r\n   *\r\n   * @param {string} event - Event name\r\n   * @param {Function} handler - Handler to remove\r\n   * @returns {this}\r\n   */\r\n  off(event, handler) {\r\n    this._listeners.get(event)?.delete(handler);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Subscribe to an event for one occurrence only.\r\n   *\r\n   * @param {string} event - Event name\r\n   * @param {Function} handler - Event handler\r\n   * @returns {this}\r\n   */\r\n  once(event, handler) {\r\n    const wrapper = (...args) => {\r\n      this.off(event, wrapper);\r\n      handler(...args);\r\n    };\r\n    return this.on(event, wrapper);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // OPPONENT HEARTBEAT - Convenience subscriptions\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /**\r\n   * Subscribe to opponent heartbeat batches.\r\n   *\r\n   * Fires once per inbound heartbeat TX with the full parsed batch.\r\n   *\r\n   * @param {Function} handler - Receives { txId, playerId, header, moveCount, moves, timestamp }\r\n   * @returns {this}\r\n   *\r\n   * @example\r\n   * game.onOpponentHeartbeat((hb) => {\r\n   *   console.log(`Opponent sent ${hb.moveCount} moves in tx ${hb.txId}`);\r\n   * });\r\n   */\r\n  onOpponentHeartbeat(handler) {\r\n    return this.on(GameEvent.OPPONENT_HEARTBEAT, handler);\r\n  }\r\n\r\n  /**\r\n   * Subscribe to individual opponent moves extracted from heartbeats.\r\n   *\r\n   * Fires once per move across all heartbeats. Each move carries a unique\r\n   * `moveId` (`${txId}-${sequenceIndex}`) and a cumulative `sessionTimeMs`.\r\n   *\r\n   * @param {Function} handler - Receives { moveId, playerId, action, lane,\r\n   *   timeDeltaMs, rawDelta, vrfFragment, sessionTimeMs, sequence, txId }\r\n   * @returns {this}\r\n   *\r\n   * @example\r\n   * game.onOpponentMoveAnchored((move) => {\r\n   *   console.log(`Opponent ${move.action} lane ${move.lane} at ${move.sessionTimeMs}ms`);\r\n   * });\r\n   */\r\n  onOpponentMoveAnchored(handler) {\r\n    return this.on(GameEvent.OPPONENT_MOVE_ANCHORED, handler);\r\n  }\r\n\r\n  /**\r\n   * Manually register a txId as \"ours\" so the heartbeat router skips it.\r\n   * Normally this is automatic via ANCHOR_SENT events, but callers that\r\n   * send anchors outside the standard pipeline can use this.\r\n   *\r\n   * @param {string} txId\r\n   */\r\n  registerOwnAnchorTxId(txId) {\r\n    if (txId) this._ownAnchorTxIds.add(txId);\r\n  }\r\n\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n  // INTERNAL HELPERS\r\n  // \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\r\n\r\n  /** @private */\r\n  _emit(event, data) {\r\n    const handlers = this._listeners.get(event);\r\n    if (handlers) {\r\n      for (const handler of handlers) {\r\n        try {\r\n          handler(data);\r\n        } catch (e) {\r\n          log.error(`KKGameEngine: Error in ${event} handler:`, e);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _ensureReady() {\r\n    if (this._state === GameState.UNINITIALIZED) {\r\n      throw new Error(\"KKGameEngine: Call init() first\");\r\n    }\r\n    if (this._state === GameState.INITIALIZING) {\r\n      throw new Error(\"KKGameEngine: Still initializing, please wait\");\r\n    }\r\n    if (this._state === GameState.ERROR) {\r\n      throw new Error(\r\n        \"KKGameEngine: Engine is in error state, call init() again\",\r\n      );\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _ensureInGame() {\r\n    this._ensureReady();\r\n    if (this._state !== GameState.IN_GAME) {\r\n      throw new Error(\"KKGameEngine: Call startGame() first\");\r\n    }\r\n  }\r\n\r\n  get anchorProcessor() {\r\n    return this._anchor?.processor ?? null;\r\n  }\r\n\r\n  get isUtxoReady() {\r\n    return this._anchor?.isUtxoReady ?? false;\r\n  }\r\n\r\n  /** @private */\r\n  _subscribeAnchorPrefixes() {\r\n    if (\r\n      !this._adapter?.addPrefixHex ||\r\n      !this._anchor?.processor?.gameIdTagHex\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this._clearAnchorPrefixes();\r\n\r\n    const tagHex = this._anchor.processor.gameIdTagHex;\r\n    const prefixes = [\r\n      `${BLOCKCHAIN.PREFIX_GAME_START_HEX}${tagHex}`,\r\n      `${BLOCKCHAIN.PREFIX_HEARTBEAT_HEX}${tagHex}`,\r\n      `${BLOCKCHAIN.PREFIX_GAME_END_HEX}${tagHex}`,\r\n    ];\r\n\r\n    for (const prefixHex of prefixes) {\r\n      this._adapter.addPrefixHex(prefixHex);\r\n    }\r\n\r\n    this._anchorPrefixHexes = prefixes;\r\n  }\r\n\r\n  /** @private */\r\n  _clearAnchorPrefixes() {\r\n    if (\r\n      !this._adapter?.removePrefixHex ||\r\n      this._anchorPrefixHexes.length === 0\r\n    ) {\r\n      this._anchorPrefixHexes = [];\r\n      return;\r\n    }\r\n\r\n    for (const prefixHex of this._anchorPrefixHexes) {\r\n      this._adapter.removePrefixHex(prefixHex);\r\n    }\r\n\r\n    this._anchorPrefixHexes = [];\r\n  }\r\n\r\n  /** @private */\r\n  _ensureLobby() {\r\n    if (!this._lobby && this._session) {\r\n      this._lobby = new LobbyFacade(this._session);\r\n\r\n      // Forward lobby events\r\n      this._lobby.onMemberJoin?.((member) => {\r\n        this._emit(GameEvent.PLAYER_JOINED, {\r\n          ...member,\r\n          id: member?.pubSig ?? member?.id ?? null,\r\n          name: member?.displayName ?? member?.name ?? null,\r\n        });\r\n      });\r\n      this._lobby.onMemberLeave?.((member) => {\r\n        this._emit(GameEvent.PLAYER_LEFT, {\r\n          ...member,\r\n          id: member?.pubSig ?? member?.id ?? null,\r\n          name: member?.displayName ?? member?.name ?? null,\r\n        });\r\n      });\r\n      this._lobby.onGroupMessage?.((msg) => {\r\n        const plaintext = msg?.plaintext ?? msg?.text ?? msg;\r\n        const senderId = msg?.senderId ?? msg?.senderPubSig ?? null;\r\n        const senderName = msg?.senderName ?? null;\r\n        let parsed = null;\r\n\r\n        if (typeof plaintext === \"string\") {\r\n          try {\r\n            parsed = JSON.parse(plaintext);\r\n          } catch {\r\n            parsed = null;\r\n          }\r\n        }\r\n\r\n        if (\r\n          parsed &&\r\n          typeof parsed === \"object\" &&\r\n          typeof parsed.type === \"string\"\r\n        ) {\r\n          if (parsed.type === \"chat\") {\r\n            this._emit(GameEvent.CHAT_MESSAGE, {\r\n              sender: senderName ?? \"Player\",\r\n              senderId,\r\n              text: parsed.text ?? \"\",\r\n              timestamp: parsed.timestamp ?? msg?.timestamp ?? Date.now(),\r\n            });\r\n          } else if (parsed.type === \"game_start\") {\r\n            this._emit(GameEvent.GAME_START, parsed);\r\n          } else if (parsed.type === \"ready_state\") {\r\n            this._emit(GameEvent.READY_STATE, {\r\n              senderId,\r\n              senderName: senderName ?? \"Player\",\r\n              isReady: parsed.isReady,\r\n              timestamp: parsed.timestamp ?? Date.now(),\r\n            });\r\n          }\r\n        }\r\n\r\n        this._emit(GameEvent.MESSAGE_RECEIVED, {\r\n          ...msg,\r\n          text: plaintext,\r\n          senderId,\r\n          senderName,\r\n        });\r\n      });\r\n      this._lobby.onLobbyClose?.((reason) => {\r\n        this._emit(GameEvent.LOBBY_CLOSED, { reason });\r\n      });\r\n      this._lobby.onStateChange?.((state) => {\r\n        this._emit(GameEvent.LOBBY_UPDATED, {\r\n          state,\r\n          lobby: this._lobby?.lobbyInfo ?? null,\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _startIncomingPayloadRouter() {\r\n    if (this._incomingRouterActive || !this._adapter || !this._session) {\r\n      return;\r\n    }\r\n\r\n    this._incomingRouterActive = true;\r\n\r\n    const handleMatch = async (match) => {\r\n      // \u2500\u2500 1. Try anchor/heartbeat hex path first \u2500\u2500\r\n      const hexPayload = match?.payload;\r\n      if (typeof hexPayload === \"string\" && this._state === GameState.IN_GAME) {\r\n        if (this._handleHeartbeatMatch(match)) return;\r\n      }\r\n\r\n      // \u2500\u2500 2. Fall through to KKTP text protocol \u2500\u2500\r\n      const rawPayload = match?.decodedPayload || hexPayload;\r\n      if (!rawPayload || typeof rawPayload !== \"string\") return;\r\n\r\n      if (rawPayload.startsWith(\"KKTP:GROUP:\")) {\r\n        if (this._lobby) {\r\n          try {\r\n            await this._lobby.processGroupPayload(rawPayload);\r\n          } catch (err) {\r\n            log.debug(\"KKGameEngine: Failed to process group payload\", err);\r\n          }\r\n        }\r\n        return;\r\n      }\r\n\r\n      const event = await this._session.processIncomingPayload(rawPayload);\r\n      if (\r\n        !event ||\r\n        event.type !== \"messages\" ||\r\n        !this._lobby ||\r\n        !event.mailboxId\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      for (const msg of event.messages || []) {\r\n        const plaintext = msg?.plaintext ?? msg;\r\n        if (typeof plaintext === \"string\") {\r\n          this._lobby.routeDMMessage(event.mailboxId, plaintext);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (this._adapter.onNewTransactionMatch) {\r\n      this._incomingUnsubscribe = this._adapter.onNewTransactionMatch(\r\n        (match) => {\r\n          void handleMatch(match);\r\n        },\r\n      );\r\n    }\r\n\r\n    if (this._adapter.startScanner) {\r\n      this._adapter.startScanner().catch(() => {});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle a single scanner match that may be an opponent heartbeat.\r\n   *\r\n   * Returns true if the match was consumed (heartbeat), false otherwise\r\n   * so the caller falls through to the KKTP text path.\r\n   *\r\n   * @param {Object} match - Scanner match object { txid, payload, timestamp, \u2026 }\r\n   * @returns {boolean}\r\n   * @private\r\n   */\r\n  _handleHeartbeatMatch(match) {\r\n    const hexPayload = match?.payload;\r\n    if (!hexPayload) return false;\r\n\r\n    const tagHex = this._anchor?.processor?.gameIdTagHex;\r\n    if (!tagHex) return false;\r\n\r\n    // NOTE: Scanner already validated prefix match before callback fired.\r\n    // We keep prefixHex only for parseHeartbeatHex offset calculation.\r\n    const prefixHex = BLOCKCHAIN.PREFIX_HEARTBEAT_HEX;\r\n\r\n    // \u2500\u2500 Filter own transactions \u2500\u2500\r\n    const txId = match.txid ?? match.txId;\r\n    if (txId && this._ownAnchorTxIds.has(txId)) {\r\n      return true; // consumed but ignored (our own echo)\r\n    }\r\n    const anchorChain = this._anchor?.processor?.anchorChain;\r\n    if (Array.isArray(anchorChain) && txId && anchorChain.includes(txId)) {\r\n      this._ownAnchorTxIds.add(txId);\r\n      return true;\r\n    }\r\n\r\n    // \u2500\u2500 Parse (use original hexPayload for correct binary parsing) \u2500\u2500\r\n    const parsed = parseHeartbeatHex(hexPayload, { prefixHex, tagHex });\r\n    if (!parsed) return false;\r\n\r\n    // \u2500\u2500 Resolve player via anchor chain tracking (N-player ready) \u2500\u2500\r\n    const playerId = this._resolvePlayerFromHeartbeat(parsed, txId);\r\n\r\n    // Time accumulator persists across heartbeats per opponent\r\n    if (!this._opponentTimeAccumulators.has(playerId)) {\r\n      this._opponentTimeAccumulators.set(playerId, { value: 0 });\r\n    }\r\n    const timeAccumulator = this._opponentTimeAccumulators.get(playerId);\r\n\r\n    // Enrich moves with session context\r\n    const moves = enrichMoves(parsed, { txId, playerId, timeAccumulator });\r\n\r\n    // \u2500\u2500 Emit batch-level event \u2500\u2500\r\n    this._emit(GameEvent.OPPONENT_HEARTBEAT, {\r\n      txId,\r\n      playerId,\r\n      header: parsed.header,\r\n      moveCount: moves.length,\r\n      moves,\r\n      timestamp: match.timestamp ?? Date.now(),\r\n    });\r\n\r\n    // \u2500\u2500 Emit per-move events \u2500\u2500\r\n    for (const move of moves) {\r\n      this._emit(GameEvent.OPPONENT_MOVE_ANCHORED, move);\r\n    }\r\n\r\n    log.debug(\"KKGameEngine: Opponent heartbeat processed\", {\r\n      txId,\r\n      playerId,\r\n      moveCount: moves.length,\r\n      hwm: timeAccumulator.value,\r\n    });\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Resolve player ID from a heartbeat via anchor chain tracking.\r\n   *\r\n   * For N-player multiplayer, each player's anchor chain is tracked:\r\n   * - Genesis tx registers the player's chain\r\n   * - Subsequent heartbeats link via prevTxId\r\n   * - We trace prevTxId to identify which player sent the heartbeat\r\n   *\r\n   * @param {Object} parsed - Parsed heartbeat from parseHeartbeatHex()\r\n   * @param {string} txId - Transaction ID of this heartbeat\r\n   * @returns {string} Player ID\r\n   * @private\r\n   */\r\n  _resolvePlayerFromHeartbeat(parsed, txId) {\r\n    const prevTxId = parsed?.header?.prevTxId;\r\n\r\n    // Check if prevTxId is in any known player's chain\r\n    for (const [playerId, chainTxIds] of this._playerAnchorChains) {\r\n      if (chainTxIds.has(prevTxId)) {\r\n        // Found the player - add this txId to their chain for future lookups\r\n        chainTxIds.add(txId);\r\n        return playerId;\r\n      }\r\n    }\r\n\r\n    // \u2500\u2500 Genesis case or first heartbeat from unknown player \u2500\u2500\r\n    // Check MoveProcessor for explicitly set opponentId\r\n    const fromProcessor = this._anchor?.processor?._opponentId;\r\n    if (fromProcessor) {\r\n      // Initialize their chain with this tx\r\n      if (!this._playerAnchorChains.has(fromProcessor)) {\r\n        this._playerAnchorChains.set(fromProcessor, new Set());\r\n      }\r\n      this._playerAnchorChains.get(fromProcessor).add(txId);\r\n      return fromProcessor;\r\n    }\r\n\r\n    // \u2500\u2500 Lobby fallback: find any peer who isn't me \u2500\u2500\r\n    const lobbyMembers = this._lobby?.members ?? this._lobby?.lobbyInfo?.members;\r\n    if (Array.isArray(lobbyMembers)) {\r\n      // Find lobby members who don't have a tracked chain yet\r\n      for (const member of lobbyMembers) {\r\n        const memberId = member?.pubSig ?? member?.id;\r\n        if (!memberId || memberId === this._playerId) continue;\r\n\r\n        // If this member doesn't have a chain yet, assume it's them\r\n        if (!this._playerAnchorChains.has(memberId)) {\r\n          this._playerAnchorChains.set(memberId, new Set([txId]));\r\n          return memberId;\r\n        }\r\n      }\r\n\r\n      // All members have chains; find one whose chain includes prevTxId or is smallest\r\n      const peer = lobbyMembers.find((m) => {\r\n        const id = m?.pubSig ?? m?.id;\r\n        return id && id !== this._playerId;\r\n      });\r\n      if (peer) {\r\n        const peerId = peer.pubSig ?? peer.id;\r\n        if (!this._playerAnchorChains.has(peerId)) {\r\n          this._playerAnchorChains.set(peerId, new Set());\r\n        }\r\n        this._playerAnchorChains.get(peerId).add(txId);\r\n        return peerId;\r\n      }\r\n    }\r\n\r\n    // Ultimate fallback\r\n    return \"opponent\";\r\n  }\r\n\r\n  /**\r\n   * Register a player's genesis anchor txId to initialize their chain.\r\n   *\r\n   * Call this when a player broadcasts their genesis anchor in multiplayer.\r\n   * Enables proper attribution of subsequent heartbeats in N-player games.\r\n   *\r\n   * @param {string} playerId - Player identifier (pubSig or custom ID)\r\n   * @param {string} genesisTxId - Transaction ID of their genesis anchor\r\n   */\r\n  registerPlayerAnchorChain(playerId, genesisTxId) {\r\n    if (!playerId || !genesisTxId) return;\r\n\r\n    if (!this._playerAnchorChains.has(playerId)) {\r\n      this._playerAnchorChains.set(playerId, new Set());\r\n    }\r\n    this._playerAnchorChains.get(playerId).add(genesisTxId);\r\n\r\n    log.debug(\"KKGameEngine: Registered player anchor chain\", {\r\n      playerId,\r\n      genesisTxId,\r\n    });\r\n  }\r\n\r\n  /** @private */\r\n  async _waitForLobbyState(targetState, timeoutMs = 15000) {\r\n    const start = Date.now();\r\n    while (Date.now() - start < timeoutMs) {\r\n      if (this._lobby?.currentState === targetState) {\r\n        return true;\r\n      }\r\n      await new Promise((resolve) => setTimeout(resolve, 250));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /** @private */\r\n  _setupEventForwarding() {\r\n    if (!this._anchor) return;\r\n\r\n    // Forward anchor events + track own txIds for self-echo filtering\r\n    this._anchor.on(MoveEvent.ANCHOR_SENT, (data) => {\r\n      if (data?.txId) {\r\n        this._ownAnchorTxIds.add(data.txId);\r\n        // Also add to our own anchor chain for completeness\r\n        if (this._playerId && !this._playerAnchorChains.has(this._playerId)) {\r\n          this._playerAnchorChains.set(this._playerId, new Set());\r\n        }\r\n        if (this._playerId) {\r\n          this._playerAnchorChains.get(this._playerId)?.add(data.txId);\r\n        }\r\n      }\r\n      this._emit(GameEvent.ANCHOR_SENT, data);\r\n    });\r\n\r\n    this._anchor.on(MoveEvent.ANCHOR_FAILED, (data) => {\r\n      this._emit(GameEvent.ANCHOR_FAILED, data);\r\n    });\r\n\r\n    this._anchor.on(MoveEvent.LOW_FUNDS_WARNING, (data) => {\r\n      this._emit(GameEvent.LOW_FUNDS, data);\r\n    });\r\n\r\n    // Forward pool events for game readiness\r\n    this._anchor.on(\"gameReady\", (data) => {\r\n      this._emit(GameEvent.GAME_READY, data);\r\n    });\r\n\r\n    this._anchor.on(\"poolLow\", (data) => {\r\n      this._emit(GameEvent.POOL_LOW, data);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Track an async operation for graceful shutdown draining.\r\n   * @param {Promise} promise - Promise to track\r\n   * @returns {Promise} Same promise (for chaining)\r\n   * @private\r\n   */\r\n  _trackOperation(promise) {\r\n    this._activeOperations.add(promise);\r\n    const cleanup = () => this._activeOperations.delete(promise);\r\n    promise.then(cleanup, cleanup);\r\n    return promise;\r\n  }\r\n\r\n  /**\r\n   * Guard method - throws if engine is shutting down.\r\n   * @private\r\n   */\r\n  _ensureNotShuttingDown() {\r\n    if (this._shuttingDown) {\r\n      throw new Error(\"KKGameEngine is shutting down - operation rejected\");\r\n    }\r\n  }\r\n\r\n  /** @private */\r\n  _withTimeout(promise, timeoutMs, message) {\r\n    return Promise.race([\r\n      promise,\r\n      new Promise((_, reject) =>\r\n        setTimeout(() => reject(new Error(message)), timeoutMs),\r\n      ),\r\n    ]);\r\n  }\r\n}\r\n\r\n// Convenience singleton for simple use cases\r\nexport const kkGame = new KKGameEngine();\r\n\r\nexport default KKGameEngine;\r\n"],
  "mappings": "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U;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,UAAU;AAAA,EACV,IAAI;AAAA,EACJ,aAAa;AAAA,EACb,IAAI;AAAA,EACJ,aAAa;AAAA,EACb,IAAI;AAAA,EACJ,aAAa;AAAA,EACb,IAAI;AAAA,EACJ,WAAW;AAAA,EACX,IAAI;AAAA,EACJ,YAAY;AAAA,EACZ,IAAI;AAAA,EACJ,QAAQ;AAAA,EACR,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,IAAI;AAAA,EACJ,OAAO;AAAA,EACP,IAAI;AAAA,EACJ,MAAM;AAAA,EACN,IAAI;AAAA,EACJ,SAAS;AAAA,EACT,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,YAAY;AAAA,EACZ,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,gBAAgB;AAAA,EAChB,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,MAAM;AAAA,EACN,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,SAAS;AAAA,EACT,KAAK;AAAA,EACL,eAAe;AAAA,EACf,KAAK;AAAA,EACL,aAAa;AAAA,EACb,KAAK;AAAA,EACL,aAAa;AAAA,EACb,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,aAAa;AAAA,EACb,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,WAAW;AAAA,EACX,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,YAAY;AAAA,EACZ,KAAK;AAAA,EACL,kBAAkB;AAAA,EAClB,KAAK;AAAA,EACL,eAAe;AAAA,EACf,KAAK;AAAA,EACL,YAAY;AAAA,EACZ,KAAK;AAAA,EACL,eAAe;AAAA,EACf,KAAK;AAAA,EACL,mBAAmB;AAAA,EACnB,KAAK;AAAA,EACL,sBAAsB;AAAA,EACtB,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,OAAO;AAAA,EACP,KAAK;AAAA,EACL,UAAU;AAAA,EACV,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,UAAU;AAAA,EACV,KAAK;AAAA,EACL,sBAAsB;AAAA,EACtB,KAAK;AAAA,EACL,WAAW;AAAA,EACX,KAAK;AAAA,EACL,iBAAiB;AAAA,EACjB,KAAK;AAAA,EACL,YAAY;AAAA,EACZ,KAAK;AAAA,EACL,kBAAkB;AAAA,EAClB,KAAK;AAAA,EACL,iBAAiB;AAAA,EACjB,KAAK;AAAA,EACL,uBAAuB;AAAA,EACvB,KAAK;AAAA,EACL,uBAAuB;AAAA,EACvB,KAAK;AAAA,EACL,uBAAuB;AAAA,EACvB,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,cAAc;AAAA,EACd,KAAK;AAAA,EACL,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",
  "names": ["init", "module", "heap", "module", "React", "module", "React", "workInProgress", "log", "root", "renderLanes", "isHydrating", "style", "normalizeKey", "index", "thenableState", "init", "treeForkCount", "_enabled", "options", "module", "import_react", "React", "import_react", "ptr", "module", "arg0", "arg1", "module", "hexToBytes", "wallet", "log", "client", "log", "client", "log", "client", "log", "client", "log", "now", "deleteWalletData", "filename", "currentNetworkId", "log", "deleteWalletData", "filename", "client", "filename", "client", "log", "log", "client", "log", "client", "log", "secp", "hexToBytes", "hexToBytes", "hexToBytes", "hexToBytes", "log", "gammaQ", "gammaQ", "bits", "m", "n", "x", "n", "erfc", "z", "erfc", "erfc", "z", "log", "hexToBytes", "bytesToHex", "log", "normalizeHex", "value", "log", "filename", "log", "filename", "log", "hexToBytes", "bytesToHex", "log", "log", "log", "hexToBytes", "bytesToHex", "log", "hexToBytes", "bytesToHex", "bytesToHex", "hexToBytes", "root", "hexToBytes", "bytesToHex", "hexToBytes", "bytesToHex", "log", "wallet", "hexToBytes", "bytesToHex", "log", "bytesToHex", "bytesToHex", "PROXY", "bytesToHex", "hexToBytes", "bytesToHex", "VRF_STATE_SIZE", "NIST_SIZE", "BTC_SIZE", "KASPA_SIZE", "DATA_BUFFER_SIZE_STANDARD", "DATA_BUFFER_SIZE_EXTENDED", "bytesToHex", "hexToBytes", "bytesToHex", "readBigUint64BE", "readUint32BE", "formatOutcome", "hexToBytes", "hexToBytes", "bytesToHex", "hexToString", "hexToBytes", "hexToBytes", "bytesToHex", "hexToBytes", "bytesToHex", "hexToBytes", "xchacha20poly1305", "blake2b", "computeVrfInputHash", "hexToBytes", "bytesToHex", "blake2b", "xchacha20poly1305", "bytesToHex", "log", "bytesToHex", "hexToBytes", "log", "bytesToHex", "strictParseJson", "hexToString", "log", "xchacha20poly1305", "xchacha20poly1305", "log", "log", "blake2b", "blake2b", "log", "log", "log", "log", "log", "log", "log", "log", "log", "log", "log", "log", "log", "LOBBY_DISCOVERY_PREFIX", "LOBBY_VERSION", "log", "log", "buildActionMaps", "isInLobby", "kkGame", "options", "filename", "wallet", "React", "React"]
}
